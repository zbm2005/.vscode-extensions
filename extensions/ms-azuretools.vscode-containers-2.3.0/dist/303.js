/*! For license information please see 303.js.LICENSE.txt */
exports.id=303,exports.ids=[303],exports.modules={2585:(e,r,t)=>{"use strict";var a=t(96740);e.exports=function SchemaObject(e){a.copy(e,this)}},4686:(e,r,t)=>{"use strict";var a=t(64551).MissingRef;e.exports=function compileAsync(e,r,t){var s=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(t=r,r=void 0);var o=loadMetaSchemaOf(e).then((function(){var t=s._addSchema(e,void 0,r);return t.validate||_compileAsync(t)}));t&&o.then((function(e){t(null,e)}),t);return o;function loadMetaSchemaOf(e){var r=e.$schema;return r&&!s.getSchema(r)?compileAsync.call(s,{$ref:r},!0):Promise.resolve()}function _compileAsync(e){try{return s._compile(e)}catch(t){if(t instanceof a)return function loadMissingSchema(t){var a=t.missingSchema;if(added(a))throw new Error("Schema "+a+" is loaded but "+t.missingRef+" cannot be resolved");var o=s._loadingSchemas[a];o||(o=s._loadingSchemas[a]=s._opts.loadSchema(a)).then(removePromise,removePromise);return o.then((function(e){if(!added(a))return loadMetaSchemaOf(e).then((function(){added(a)||s.addSchema(e,a,void 0,r)}))})).then((function(){return _compileAsync(e)}));function removePromise(){delete s._loadingSchemas[a]}function added(e){return s._refs[e]||s._schemas[e]}}(t);throw t}}}},7106:e=>{"use strict";var r=e.exports=function(e,r,t){"function"==typeof r&&(t=r,r={}),_traverse(r,"function"==typeof(t=r.cb||t)?t:t.pre||function(){},t.post||function(){},e,"",e)};function _traverse(e,t,a,s,o,i,n,l,c,u){if(s&&"object"==typeof s&&!Array.isArray(s)){for(var d in t(s,o,i,n,l,c,u),s){var p=s[d];if(Array.isArray(p)){if(d in r.arrayKeywords)for(var h=0;h<p.length;h++)_traverse(e,t,a,p[h],o+"/"+d+"/"+h,i,o,d,s,h)}else if(d in r.propsKeywords){if(p&&"object"==typeof p)for(var m in p)_traverse(e,t,a,p[m],o+"/"+d+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),i,o,d,s,m)}else(d in r.keywords||e.allKeys&&!(d in r.skipKeywords))&&_traverse(e,t,a,p,o+"/"+d,i,o,d,s)}a(s,o,i,n,l,c,u)}}r.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},r.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},r.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},r.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},7354:(e,r,t)=>{"use strict";var a=t(91030),s=t(96740),o=t(64551),i=t(72492),n=t(51873),l=s.ucs2length,c=t(32017),u=o.Validation;function checkCompiling(e,r,t){var a=compIndex.call(this,e,r,t);return a>=0?{index:a,compiling:!0}:(a=this._compilations.length,this._compilations[a]={schema:e,root:r,baseId:t},{index:a,compiling:!1})}function endCompiling(e,r,t){var a=compIndex.call(this,e,r,t);a>=0&&this._compilations.splice(a,1)}function compIndex(e,r,t){for(var a=0;a<this._compilations.length;a++){var s=this._compilations[a];if(s.schema==e&&s.root==r&&s.baseId==t)return a}return-1}function patternCode(e,r){return"var pattern"+e+" = new RegExp("+s.toQuotedString(r[e])+");"}function defaultCode(e){return"var default"+e+" = defaults["+e+"];"}function refValCode(e,r){return void 0===r[e]?"":"var refVal"+e+" = refVal["+e+"];"}function customRuleCode(e){return"var customRule"+e+" = customRules["+e+"];"}function vars(e,r){if(!e.length)return"";for(var t="",a=0;a<e.length;a++)t+=r(a,e);return t}e.exports=function compile(e,r,t,d){var p=this,h=this._opts,m=[void 0],f={},v=[],g={},y=[],P={},b=[];r=r||{schema:e,refVal:m,refs:f};var E=checkCompiling.call(this,e,r,d),_=this._compilations[E.index];if(E.compiling)return _.callValidate=function callValidate(){var e=_.validate,r=e.apply(this,arguments);return callValidate.errors=e.errors,r};var w=this._formats,S=this.RULES;try{var x=localCompile(e,r,t,d);_.validate=x;var R=_.callValidate;return R&&(R.schema=x.schema,R.errors=null,R.refs=x.refs,R.refVal=x.refVal,R.root=x.root,R.$async=x.$async,h.sourceCode&&(R.source=x.source)),x}finally{endCompiling.call(this,e,r,d)}function localCompile(e,t,i,d){var g=!t||t&&t.schema==e;if(t.schema!=r.schema)return compile.call(p,e,t,i,d);var P,E=!0===e.$async,_=n({isTop:!0,schema:e,isRoot:g,baseId:d,root:t,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:o.MissingRef,RULES:S,validate:n,util:s,resolve:a,resolveRef,usePattern,useDefault,useCustomRule,opts:h,formats:w,logger:p.logger,self:p});_=vars(m,refValCode)+vars(v,patternCode)+vars(y,defaultCode)+vars(b,customRuleCode)+_,h.processCode&&(_=h.processCode(_,e));try{P=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",_)(p,S,w,r,m,y,b,c,l,u),m[0]=P}catch(e){throw p.logger.error("Error compiling schema, function code:",_),e}return P.schema=e,P.errors=null,P.refs=f,P.refVal=m,P.root=g?P:t,E&&(P.$async=!0),!0===h.sourceCode&&(P.source={code:_,patterns:v,defaults:y}),P}function resolveRef(e,s,o){s=a.url(e,s);var i,n,l=f[s];if(void 0!==l)return resolvedRef(i=m[l],n="refVal["+l+"]");if(!o&&r.refs){var c=r.refs[s];if(void 0!==c)return resolvedRef(i=r.refVal[c],n=addLocalRef(s,i))}n=addLocalRef(s);var u=a.call(p,localCompile,r,s);if(void 0===u){var d=t&&t[s];d&&(u=a.inlineRef(d,h.inlineRefs)?d:compile.call(p,d,r,t,e))}if(void 0!==u)return function replaceLocalRef(e,r){var t=f[e];m[t]=r}(s,u),resolvedRef(u,n);!function removeLocalRef(e){delete f[e]}(s)}function addLocalRef(e,r){var t=m.length;return m[t]=r,f[e]=t,"refVal"+t}function resolvedRef(e,r){return"object"==typeof e||"boolean"==typeof e?{code:r,schema:e,inline:!0}:{code:r,$async:e&&!!e.$async}}function usePattern(e){var r=g[e];return void 0===r&&(r=g[e]=v.length,v[r]=e),"pattern"+r}function useDefault(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return s.toQuotedString(e);case"object":if(null===e)return"null";var r=i(e),t=P[r];return void 0===t&&(t=P[r]=y.length,y[t]=e),"default"+t}}function useCustomRule(e,r,t,a){if(!1!==p._opts.validateSchema){var s=e.definition.dependencies;if(s&&!s.every((function(e){return Object.prototype.hasOwnProperty.call(t,e)})))throw new Error("parent schema must have all required keywords: "+s.join(","));var o=e.definition.validateSchema;if(o)if(!o(r)){var i="keyword schema is invalid: "+p.errorsText(o.errors);if("log"!=p._opts.validateSchema)throw new Error(i);p.logger.error(i)}}var n,l=e.definition.compile,c=e.definition.inline,u=e.definition.macro;if(l)n=l.call(p,r,t,a);else if(u)n=u.call(p,r,t,a),!1!==h.validateSchema&&p.validateSchema(n,!0);else if(c)n=c.call(p,a,e.keyword,r,t);else if(!(n=e.definition.validate))return;if(void 0===n)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var d=b.length;return b[d]=n,{code:"customRule"+d,validate:n}}}},7992:e=>{"use strict";e.exports=function generate_custom(e,r,t){var a,s,o=" ",i=e.level,n=e.dataLevel,l=e.schema[r],c=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(n||""),h="valid"+i,m="errs__"+i,f=e.opts.$data&&l&&l.$data;f?(o+=" var schema"+i+" = "+e.util.getData(l.$data,n,e.dataPathArr)+"; ",s="schema"+i):s=l;var v,g,y,P,b,E=this,_="definition"+i,w=E.definition,S="";if(f&&w.$data){b="keywordValidate"+i;var x=w.validateSchema;o+=" var "+_+" = RULES.custom['"+r+"'].definition; var "+b+" = "+_+".validate;"}else{if(!(P=e.useCustomRule(E,l,e.schema,e)))return;s="validate.schema"+c,b=P.code,v=w.compile,g=w.inline,y=w.macro}var R=b+".errors",$="i"+i,A="ruleErr"+i,D=w.async;if(D&&!e.async)throw new Error("async keyword in sync schema");if(g||y||(o+=R+" = null;"),o+="var "+m+" = errors;var "+h+";",f&&w.$data&&(S+="}",o+=" if ("+s+" === undefined) { "+h+" = true; } else { ",x&&(S+="}",o+=" "+h+" = "+_+".validateSchema("+s+"); if ("+h+") { ")),g)w.statements?o+=" "+P.validate+" ":o+=" "+h+" = "+P.validate+"; ";else if(y){var k=e.util.copy(e);S="";k.level++;var C="valid"+k.level;k.schema=P.validate,k.schemaPath="";var I=e.compositeRule;e.compositeRule=k.compositeRule=!0;var O=e.validate(k).replace(/validate\.schema/g,b);e.compositeRule=k.compositeRule=I,o+=" "+O}else{(N=N||[]).push(o),o="",o+="  "+b+".call( ",e.opts.passContext?o+="this":o+="self",v||!1===w.schema?o+=" , "+p+" ":o+=" , "+s+" , "+p+" , validate.schema"+e.schemaPath+" ",o+=" , (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var j=n?"data"+(n-1||""):"parentData",F=n?e.dataPathArr[n]:"parentDataProperty",T=o+=" , "+j+" , "+F+" , rootData )  ";o=N.pop(),!1===w.errors?(o+=" "+h+" = ",D&&(o+="await "),o+=T+"; "):o+=D?" var "+(R="customErrors"+i)+" = null; try { "+h+" = await "+T+"; } catch (e) { "+h+" = false; if (e instanceof ValidationError) "+R+" = e.errors; else throw e; } ":" "+R+" = null; "+h+" = "+T+"; "}if(w.modifying&&(o+=" if ("+j+") "+p+" = "+j+"["+F+"];"),o+=""+S,w.valid)d&&(o+=" if (true) { ");else{var N;o+=" if ( ",void 0===w.valid?(o+=" !",o+=y?""+C:""+h):o+=" "+!w.valid+" ",o+=") { ",a=E.keyword,(N=N||[]).push(o),o="",(N=N||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(a||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+E.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+E.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),o+=" } "):o+=" {} ";var L=o;o=N.pop(),!e.compositeRule&&d?e.async?o+=" throw new ValidationError(["+L+"]); ":o+=" validate.errors = ["+L+"]; return false; ":o+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var q=o;o=N.pop(),g?w.errors?"full"!=w.errors&&(o+="  for (var "+$+"="+m+"; "+$+"<errors; "+$+"++) { var "+A+" = vErrors["+$+"]; if ("+A+".dataPath === undefined) "+A+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+A+".schemaPath === undefined) { "+A+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(o+=" "+A+".schema = "+s+"; "+A+".data = "+p+"; "),o+=" } "):!1===w.errors?o+=" "+q+" ":(o+=" if ("+m+" == errors) { "+q+" } else {  for (var "+$+"="+m+"; "+$+"<errors; "+$+"++) { var "+A+" = vErrors["+$+"]; if ("+A+".dataPath === undefined) "+A+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+A+".schemaPath === undefined) { "+A+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(o+=" "+A+".schema = "+s+"; "+A+".data = "+p+"; "),o+=" } } "):y?(o+="   var err =   ",!1!==e.createErrors?(o+=" { keyword: '"+(a||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+E.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+E.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; ")):!1===w.errors?o+=" "+q+" ":(o+=" if (Array.isArray("+R+")) { if (vErrors === null) vErrors = "+R+"; else vErrors = vErrors.concat("+R+"); errors = vErrors.length;  for (var "+$+"="+m+"; "+$+"<errors; "+$+"++) { var "+A+" = vErrors["+$+"]; if ("+A+".dataPath === undefined) "+A+".dataPath = (dataPath || '') + "+e.errorPath+";  "+A+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(o+=" "+A+".schema = "+s+"; "+A+".data = "+p+"; "),o+=" } } else { "+q+" } "),o+=" } ",d&&(o+=" else { ")}return o}},8198:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},8317:e=>{"use strict";e.exports=function generate_pattern(e,r,t){var a,s=" ",o=e.level,i=e.dataLevel,n=e.schema[r],l=e.schemaPath+e.util.getProperty(r),c=e.errSchemaPath+"/"+r,u=!e.opts.allErrors,d="data"+(i||""),p=e.opts.$data&&n&&n.$data;p?(s+=" var schema"+o+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",a="schema"+o):a=n,s+="if ( ",p&&(s+=" ("+a+" !== undefined && typeof "+a+" != 'string') || "),s+=" !"+(p?"(new RegExp("+a+"))":e.usePattern(n))+".test("+d+") ) {   ";var h=h||[];h.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { pattern:  ",s+=p?""+a:""+e.util.toQuotedString(n),s+="  } ",!1!==e.opts.messages&&(s+=" , message: 'should match pattern \"",s+=p?"' + "+a+" + '":""+e.util.escapeQuotes(n),s+="\"' "),e.opts.verbose&&(s+=" , schema:  ",s+=p?"validate.schema"+l:""+e.util.toQuotedString(n),s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var m=s;return s=h.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+m+"]); ":s+=" validate.errors = ["+m+"]; return false; ":s+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",u&&(s+=" else { "),s}},10224:e=>{"use strict";e.exports=function generate_const(e,r,t){var a=" ",s=e.level,o=e.dataLevel,i=e.schema[r],n=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,c=!e.opts.allErrors,u="data"+(o||""),d="valid"+s,p=e.opts.$data&&i&&i.$data;p&&(a+=" var schema"+s+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; "),p||(a+=" var schema"+s+" = validate.schema"+n+";"),a+="var "+d+" = equal("+u+", schema"+s+"); if (!"+d+") {   ";var h=h||[];h.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValue: schema"+s+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be equal to constant' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var m=a;return a=h.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+m+"]); ":a+=" validate.errors = ["+m+"]; return false; ":a+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" }",c&&(a+=" else { "),a}},14278:e=>{"use strict";e.exports=function generate_comment(e,r,t){var a=" ",s=e.schema[r],o=e.errSchemaPath+"/"+r,i=(e.opts.allErrors,e.util.toQuotedString(s));return!0===e.opts.$comment?a+=" console.log("+i+");":"function"==typeof e.opts.$comment&&(a+=" self._opts.$comment("+i+", "+e.util.toQuotedString(o)+", validate.root.schema);"),a}},22897:(e,r,t)=>{"use strict";var a=t(8198);e.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:a.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:a.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},23032:e=>{"use strict";e.exports=function generate_propertyNames(e,r,t){var a=" ",s=e.level,o=e.dataLevel,i=e.schema[r],n=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,c=!e.opts.allErrors,u="data"+(o||""),d="errs__"+s,p=e.util.copy(e);p.level++;var h="valid"+p.level;if(a+="var "+d+" = errors;",e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0||!1===i:e.util.schemaHasRules(i,e.RULES.all)){p.schema=i,p.schemaPath=n,p.errSchemaPath=l;var m="key"+s,f="idx"+s,v="i"+s,g="' + "+m+" + '",y="data"+(p.dataLevel=e.dataLevel+1),P="dataProperties"+s,b=e.opts.ownProperties,E=e.baseId;b&&(a+=" var "+P+" = undefined; "),a+=b?" "+P+" = "+P+" || Object.keys("+u+"); for (var "+f+"=0; "+f+"<"+P+".length; "+f+"++) { var "+m+" = "+P+"["+f+"]; ":" for (var "+m+" in "+u+") { ",a+=" var startErrs"+s+" = errors; ";var _=m,w=e.compositeRule;e.compositeRule=p.compositeRule=!0;var S=e.validate(p);p.baseId=E,e.util.varOccurences(S,y)<2?a+=" "+e.util.varReplace(S,y,_)+" ":a+=" var "+y+" = "+_+"; "+S+" ",e.compositeRule=p.compositeRule=w,a+=" if (!"+h+") { for (var "+v+"=startErrs"+s+"; "+v+"<errors; "+v+"++) { vErrors["+v+"].propertyName = "+m+"; }   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { propertyName: '"+g+"' } ",!1!==e.opts.messages&&(a+=" , message: 'property name \\'"+g+"\\' is invalid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),c&&(a+=" break; "),a+=" } }"}return c&&(a+="  if ("+d+" == errors) {"),a}},24278:e=>{"use strict";var r=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,t){for(var a=0;a<t.length;a++){e=JSON.parse(JSON.stringify(e));var s,o=t[a].split("/"),i=e;for(s=1;s<o.length;s++)i=i[o[s]];for(s=0;s<r.length;s++){var n=r[s],l=i[n];l&&(i[n]={anyOf:[l,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e}},27403:(e,r,t)=>{"use strict";e.exports={$ref:t(84609),allOf:t(80353),anyOf:t(29480),$comment:t(14278),const:t(10224),contains:t(35674),dependencies:t(41926),enum:t(80598),format:t(58019),if:t(88532),items:t(54371),maximum:t(74667),minimum:t(74667),maxItems:t(52119),minItems:t(52119),maxLength:t(47935),minLength:t(47935),maxProperties:t(51298),minProperties:t(51298),multipleOf:t(99294),not:t(48914),oneOf:t(95326),pattern:t(8317),properties:t(41374),propertyNames:t(23032),required:t(47850),uniqueItems:t(85898),validate:t(51873)}},28019:(e,r,t)=>{"use strict";var a=t(7354),s=t(91030),o=t(94006),i=t(2585),n=t(72492),l=t(45950),c=t(73845),u=t(24278),d=t(96740);e.exports=Ajv,Ajv.prototype.validate=function validate(e,r){var t;if("string"==typeof e){if(!(t=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var a=this._addSchema(e);t=a.validate||this._compile(a)}var s=t(r);!0!==t.$async&&(this.errors=t.errors);return s},Ajv.prototype.compile=function compile(e,r){var t=this._addSchema(e,void 0,r);return t.validate||this._compile(t)},Ajv.prototype.addSchema=function addSchema(e,r,t,a){if(Array.isArray(e)){for(var o=0;o<e.length;o++)this.addSchema(e[o],void 0,t,a);return this}var i=this._getId(e);if(void 0!==i&&"string"!=typeof i)throw new Error("schema id must be string");return checkUnique(this,r=s.normalizeId(r||i)),this._schemas[r]=this._addSchema(e,t,a,!0),this},Ajv.prototype.addMetaSchema=function addMetaSchema(e,r,t){return this.addSchema(e,r,t,!0),this},Ajv.prototype.validateSchema=function validateSchema(e,r){var t=e.$schema;if(void 0!==t&&"string"!=typeof t)throw new Error("$schema must be a string");if(!(t=t||this._opts.defaultMeta||function defaultMeta(e){var r=e._opts.meta;return e._opts.defaultMeta="object"==typeof r?e._getId(r)||r:e.getSchema(m)?m:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var a=this.validate(t,e);if(!a&&r){var s="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(s);this.logger.error(s)}return a},Ajv.prototype.getSchema=function getSchema(e){var r=_getSchemaObj(this,e);switch(typeof r){case"object":return r.validate||this._compile(r);case"string":return this.getSchema(r);case"undefined":return function _getSchemaFragment(e,r){var t=s.schema.call(e,{schema:{}},r);if(t){var o=t.schema,n=t.root,l=t.baseId,c=a.call(e,o,n,void 0,l);return e._fragments[r]=new i({ref:r,fragment:!0,schema:o,root:n,baseId:l,validate:c}),c}}(this,e)}},Ajv.prototype.removeSchema=function removeSchema(e){if(e instanceof RegExp)return _removeAllSchemas(this,this._schemas,e),_removeAllSchemas(this,this._refs,e),this;switch(typeof e){case"undefined":return _removeAllSchemas(this,this._schemas),_removeAllSchemas(this,this._refs),this._cache.clear(),this;case"string":var r=_getSchemaObj(this,e);return r&&this._cache.del(r.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var t=this._opts.serialize,a=t?t(e):e;this._cache.del(a);var o=this._getId(e);o&&(o=s.normalizeId(o),delete this._schemas[o],delete this._refs[o])}return this},Ajv.prototype.addFormat=function addFormat(e,r){"string"==typeof r&&(r=new RegExp(r));return this._formats[e]=r,this},Ajv.prototype.errorsText=function errorsText(e,r){if(!(e=e||this.errors))return"No errors";for(var t=void 0===(r=r||{}).separator?", ":r.separator,a=void 0===r.dataVar?"data":r.dataVar,s="",o=0;o<e.length;o++){var i=e[o];i&&(s+=a+i.dataPath+" "+i.message+t)}return s.slice(0,-t.length)},Ajv.prototype._addSchema=function _addSchema(e,r,t,a){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var o=this._opts.serialize,n=o?o(e):e,l=this._cache.get(n);if(l)return l;a=a||!1!==this._opts.addUsedSchema;var c=s.normalizeId(this._getId(e));c&&a&&checkUnique(this,c);var u,d=!1!==this._opts.validateSchema&&!r;d&&!(u=c&&c==s.normalizeId(e.$schema))&&this.validateSchema(e,!0);var p=s.ids.call(this,e),h=new i({id:c,schema:e,localRefs:p,cacheKey:n,meta:t});"#"!=c[0]&&a&&(this._refs[c]=h);this._cache.put(n,h),d&&u&&this.validateSchema(e,!0);return h},Ajv.prototype._compile=function _compile(e,r){if(e.compiling)return e.validate=callValidate,callValidate.schema=e.schema,callValidate.errors=null,callValidate.root=r||callValidate,!0===e.schema.$async&&(callValidate.$async=!0),callValidate;var t,s;e.compiling=!0,e.meta&&(t=this._opts,this._opts=this._metaOpts);try{s=a.call(this,e.schema,r,e.localRefs)}catch(r){throw delete e.validate,r}finally{e.compiling=!1,e.meta&&(this._opts=t)}return e.validate=s,e.refs=s.refs,e.refVal=s.refVal,e.root=s.root,s;function callValidate(){var r=e.validate,t=r.apply(this,arguments);return callValidate.errors=r.errors,t}},Ajv.prototype.compileAsync=t(4686);var p=t(73635);Ajv.prototype.addKeyword=p.add,Ajv.prototype.getKeyword=p.get,Ajv.prototype.removeKeyword=p.remove,Ajv.prototype.validateKeyword=p.validate;var h=t(64551);Ajv.ValidationError=h.Validation,Ajv.MissingRefError=h.MissingRef,Ajv.$dataMetaSchema=u;var m="http://json-schema.org/draft-07/schema",f=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],v=["/properties"];function Ajv(e){if(!(this instanceof Ajv))return new Ajv(e);e=this._opts=d.copy(e)||{},function setLogger(e){var r=e._opts.logger;if(!1===r)e.logger={log:noop,warn:noop,error:noop};else{if(void 0===r&&(r=console),!("object"==typeof r&&r.log&&r.warn&&r.error))throw new Error("logger must implement log, warn and error methods");e.logger=r}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=l(e.format),this._cache=e.cache||new o,this._loadingSchemas={},this._compilations=[],this.RULES=c(),this._getId=function chooseGetId(e){switch(e.schemaId){case"auto":return _get$IdOrId;case"id":return _getId;default:return _get$Id}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=n),this._metaOpts=function getMetaSchemaOptions(e){for(var r=d.copy(e._opts),t=0;t<f.length;t++)delete r[f[t]];return r}(this),e.formats&&function addInitialFormats(e){for(var r in e._opts.formats){var t=e._opts.formats[r];e.addFormat(r,t)}}(this),e.keywords&&function addInitialKeywords(e){for(var r in e._opts.keywords){var t=e._opts.keywords[r];e.addKeyword(r,t)}}(this),function addDefaultMetaSchema(e){var r;e._opts.$data&&(r=t(53420),e.addMetaSchema(r,r.$id,!0));if(!1===e._opts.meta)return;var a=t(8198);e._opts.$data&&(a=u(a,v));e.addMetaSchema(a,m,!0),e._refs["http://json-schema.org/schema"]=m}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function addInitialSchemas(e){var r=e._opts.schemas;if(!r)return;if(Array.isArray(r))e.addSchema(r);else for(var t in r)e.addSchema(r[t],t)}(this)}function _getSchemaObj(e,r){return r=s.normalizeId(r),e._schemas[r]||e._refs[r]||e._fragments[r]}function _removeAllSchemas(e,r,t){for(var a in r){var s=r[a];s.meta||t&&!t.test(a)||(e._cache.del(s.cacheKey),delete r[a])}}function _getId(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function _get$Id(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function _get$IdOrId(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function checkUnique(e,r){if(e._schemas[r]||e._refs[r])throw new Error('schema with key or id "'+r+'" already exists')}function noop(){}},28303:(e,r,t)=>{"use strict";t.r(r),t.d(r,{McpServer:()=>McpServer,ResourceTemplate:()=>ResourceTemplate});var a=t(37917);class Protocol{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(a.Sq,(e=>{const r=this._requestHandlerAbortControllers.get(e.params.requestId);null==r||r.abort(e.params.reason)})),this.setNotificationHandler(a._r,(e=>{this._onprogress(e)})),this.setRequestHandler(a.tC,(e=>({})))}_setupTimeout(e,r,t,a,s=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(a,r),startTime:Date.now(),timeout:r,maxTotalTimeout:t,resetTimeoutOnProgress:s,onTimeout:a})}_resetTimeout(e){const r=this._timeoutInfo.get(e);if(!r)return!1;const t=Date.now()-r.startTime;if(r.maxTotalTimeout&&t>=r.maxTotalTimeout)throw this._timeoutInfo.delete(e),new a.Nh(a.O4.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:r.maxTotalTimeout,totalElapsed:t});return clearTimeout(r.timeoutId),r.timeoutId=setTimeout(r.onTimeout,r.timeout),!0}_cleanupTimeout(e){const r=this._timeoutInfo.get(e);r&&(clearTimeout(r.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var r,t,s;this._transport=e;const o=null===(r=this.transport)||void 0===r?void 0:r.onclose;this._transport.onclose=()=>{null==o||o(),this._onclose()};const i=null===(t=this.transport)||void 0===t?void 0:t.onerror;this._transport.onerror=e=>{null==i||i(e),this._onerror(e)};const n=null===(s=this._transport)||void 0===s?void 0:s.onmessage;this._transport.onmessage=(e,r)=>{null==n||n(e,r),(0,a.tG)(e)||(0,a.o$)(e)?this._onresponse(e):(0,a.vo)(e)?this._onrequest(e,r):(0,a.lg)(e)?this._onnotification(e):this._onerror(new Error(`Unknown message type: ${JSON.stringify(e)}`))},await this._transport.start()}_onclose(){var e;const r=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,null===(e=this.onclose)||void 0===e||e.call(this);const t=new a.Nh(a.O4.ConnectionClosed,"Connection closed");for(const e of r.values())e(t)}_onerror(e){var r;null===(r=this.onerror)||void 0===r||r.call(this,e)}_onnotification(e){var r;const t=null!==(r=this._notificationHandlers.get(e.method))&&void 0!==r?r:this.fallbackNotificationHandler;void 0!==t&&Promise.resolve().then((()=>t(e))).catch((e=>this._onerror(new Error(`Uncaught error in notification handler: ${e}`))))}_onrequest(e,r){var t,s;const o=null!==(t=this._requestHandlers.get(e.method))&&void 0!==t?t:this.fallbackRequestHandler,i=this._transport;if(void 0===o)return void(null==i||i.send({jsonrpc:"2.0",id:e.id,error:{code:a.O4.MethodNotFound,message:"Method not found"}}).catch((e=>this._onerror(new Error(`Failed to send an error response: ${e}`)))));const n=new AbortController;this._requestHandlerAbortControllers.set(e.id,n);const l={signal:n.signal,sessionId:null==i?void 0:i.sessionId,_meta:null===(s=e.params)||void 0===s?void 0:s._meta,sendNotification:r=>this.notification(r,{relatedRequestId:e.id}),sendRequest:(r,t,a)=>this.request(r,t,{...a,relatedRequestId:e.id}),authInfo:null==r?void 0:r.authInfo,requestId:e.id,requestInfo:null==r?void 0:r.requestInfo};Promise.resolve().then((()=>o(e,l))).then((r=>{if(!n.signal.aborted)return null==i?void 0:i.send({result:r,jsonrpc:"2.0",id:e.id})}),(r=>{var t;if(!n.signal.aborted)return null==i?void 0:i.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(r.code)?r.code:a.O4.InternalError,message:null!==(t=r.message)&&void 0!==t?t:"Internal error"}})})).catch((e=>this._onerror(new Error(`Failed to send response: ${e}`)))).finally((()=>{this._requestHandlerAbortControllers.delete(e.id)}))}_onprogress(e){const{progressToken:r,...t}=e.params,a=Number(r),s=this._progressHandlers.get(a);if(!s)return void this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));const o=this._responseHandlers.get(a),i=this._timeoutInfo.get(a);if(i&&o&&i.resetTimeoutOnProgress)try{this._resetTimeout(a)}catch(e){return void o(e)}s(t)}_onresponse(e){const r=Number(e.id),t=this._responseHandlers.get(r);if(void 0!==t)if(this._responseHandlers.delete(r),this._progressHandlers.delete(r),this._cleanupTimeout(r),(0,a.tG)(e))t(e);else{t(new a.Nh(e.error.code,e.error.message,e.error.data))}else this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`))}get transport(){return this._transport}async close(){var e;await(null===(e=this._transport)||void 0===e?void 0:e.close())}request(e,r,t){const{relatedRequestId:s,resumptionToken:o,onresumptiontoken:i}=null!=t?t:{};return new Promise(((n,l)=>{var c,u,d,p,h,m;if(!this._transport)return void l(new Error("Not connected"));!0===(null===(c=this._options)||void 0===c?void 0:c.enforceStrictCapabilities)&&this.assertCapabilityForMethod(e.method),null===(u=null==t?void 0:t.signal)||void 0===u||u.throwIfAborted();const f=this._requestMessageId++,v={...e,jsonrpc:"2.0",id:f};(null==t?void 0:t.onprogress)&&(this._progressHandlers.set(f,t.onprogress),v.params={...e.params,_meta:{...(null===(d=e.params)||void 0===d?void 0:d._meta)||{},progressToken:f}});const cancel=e=>{var r;this._responseHandlers.delete(f),this._progressHandlers.delete(f),this._cleanupTimeout(f),null===(r=this._transport)||void 0===r||r.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:f,reason:String(e)}},{relatedRequestId:s,resumptionToken:o,onresumptiontoken:i}).catch((e=>this._onerror(new Error(`Failed to send cancellation: ${e}`)))),l(e)};this._responseHandlers.set(f,(e=>{var a;if(!(null===(a=null==t?void 0:t.signal)||void 0===a?void 0:a.aborted)){if(e instanceof Error)return l(e);try{const t=r.parse(e.result);n(t)}catch(e){l(e)}}})),null===(p=null==t?void 0:t.signal)||void 0===p||p.addEventListener("abort",(()=>{var e;cancel(null===(e=null==t?void 0:t.signal)||void 0===e?void 0:e.reason)}));const g=null!==(h=null==t?void 0:t.timeout)&&void 0!==h?h:6e4;this._setupTimeout(f,g,null==t?void 0:t.maxTotalTimeout,(()=>cancel(new a.Nh(a.O4.RequestTimeout,"Request timed out",{timeout:g}))),null!==(m=null==t?void 0:t.resetTimeoutOnProgress)&&void 0!==m&&m),this._transport.send(v,{relatedRequestId:s,resumptionToken:o,onresumptiontoken:i}).catch((e=>{this._cleanupTimeout(f),l(e)}))}))}async notification(e,r){var t,a;if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(e.method);if((null!==(a=null===(t=this._options)||void 0===t?void 0:t.debouncedNotificationMethods)&&void 0!==a?a:[]).includes(e.method)&&!e.params&&!(null==r?void 0:r.relatedRequestId)){if(this._pendingDebouncedNotifications.has(e.method))return;return this._pendingDebouncedNotifications.add(e.method),void Promise.resolve().then((()=>{var t;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;const a={...e,jsonrpc:"2.0"};null===(t=this._transport)||void 0===t||t.send(a,r).catch((e=>this._onerror(e)))}))}const s={...e,jsonrpc:"2.0"};await this._transport.send(s,r)}setRequestHandler(e,r){const t=e.shape.method.value;this.assertRequestHandlerCapability(t),this._requestHandlers.set(t,((t,a)=>Promise.resolve(r(e.parse(t),a))))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,r){this._notificationHandlers.set(e.shape.method.value,(t=>Promise.resolve(r(e.parse(t)))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}}var s=t(28019);class Server extends Protocol{constructor(e,r){var t;super(r),this._serverInfo=e,this._loggingLevels=new Map,this.LOG_LEVEL_SEVERITY=new Map(a.FP.options.map(((e,r)=>[e,r]))),this.isMessageIgnored=(e,r)=>{const t=this._loggingLevels.get(r);return!!t&&this.LOG_LEVEL_SEVERITY.get(e)<this.LOG_LEVEL_SEVERITY.get(t)},this._capabilities=null!==(t=null==r?void 0:r.capabilities)&&void 0!==t?t:{},this._instructions=null==r?void 0:r.instructions,this.setRequestHandler(a.rk,(e=>this._oninitialize(e))),this.setNotificationHandler(a.ZC,(()=>{var e;return null===(e=this.oninitialized)||void 0===e?void 0:e.call(this)})),this._capabilities.logging&&this.setRequestHandler(a.b_,(async(e,r)=>{var t;const s=r.sessionId||(null===(t=r.requestInfo)||void 0===t?void 0:t.headers["mcp-session-id"])||void 0,{level:o}=e.params,i=a.FP.safeParse(o);return i.success&&this._loggingLevels.set(s,i.data),{}}))}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=function mergeCapabilities(e,r){return Object.entries(r).reduce(((e,[r,t])=>(e[r]=t&&"object"==typeof t&&e[r]?{...e[r],...t}:t,e)),{...e})}(this._capabilities,e)}assertCapabilityForMethod(e){var r,t,a;switch(e){case"sampling/createMessage":if(!(null===(r=this._clientCapabilities)||void 0===r?void 0:r.sampling))throw new Error(`Client does not support sampling (required for ${e})`);break;case"elicitation/create":if(!(null===(t=this._clientCapabilities)||void 0===t?void 0:t.elicitation))throw new Error(`Client does not support elicitation (required for ${e})`);break;case"roots/list":if(!(null===(a=this._clientCapabilities)||void 0===a?void 0:a.roots))throw new Error(`Client does not support listing roots (required for ${e})`)}}assertNotificationCapability(e){switch(e){case"notifications/message":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw new Error(`Server does not support notifying about resources (required for ${e})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw new Error(`Server does not support notifying of tool list changes (required for ${e})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw new Error(`Server does not support notifying of prompt list changes (required for ${e})`)}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Server does not support sampling (required for ${e})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw new Error(`Server does not support resources (required for ${e})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw new Error(`Server does not support tools (required for ${e})`)}}async _oninitialize(e){const r=e.params.protocolVersion;this._clientCapabilities=e.params.capabilities,this._clientVersion=e.params.clientInfo;return{protocolVersion:a.Iu.includes(r)?r:a.aE,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},a.wR)}async createMessage(e,r){return this.request({method:"sampling/createMessage",params:e},a.K1,r)}async elicitInput(e,r){const t=await this.request({method:"elicitation/create",params:e},a.n_,r);if("accept"===t.action&&t.content)try{const r=new s,o=r.compile(e.requestedSchema);if(!o(t.content))throw new a.Nh(a.O4.InvalidParams,`Elicitation response content does not match requested schema: ${r.errorsText(o.errors)}`)}catch(e){if(e instanceof a.Nh)throw e;throw new a.Nh(a.O4.InternalError,`Error validating elicitation response: ${e}`)}return t}async listRoots(e,r){return this.request({method:"roots/list",params:e},a.Cs,r)}async sendLoggingMessage(e,r){if(this._capabilities.logging&&!this.isMessageIgnored(e.level,r))return this.notification({method:"notifications/message",params:e})}async sendResourceUpdated(e){return this.notification({method:"notifications/resources/updated",params:e})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}}const o=Symbol("Let zodToJsonSchema decide on which parser to use"),i={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},getRefs=e=>{const r=(e=>"string"==typeof e?{...i,name:e}:{...i,...e})(e),t=void 0!==r.name?[...r.basePath,r.definitionPath,r.name]:r.basePath;return{...r,flags:{hasReferencedOpenAiAnyType:!1},currentPath:t,propertyPath:void 0,seen:new Map(Object.entries(r.definitions).map((([e,t])=>[t._def,{def:t._def,path:[...r.basePath,r.definitionPath,e],jsonSchema:void 0}])))}};var n=t(18952);const getRelativePath=(e,r)=>{let t=0;for(;t<e.length&&t<r.length&&e[t]===r[t];t++);return[(e.length-t).toString(),...r.slice(t)].join("/")};function parseAnyDef(e){if("openAi"!==e.target)return{};const r=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:"relative"===e.$refStrategy?getRelativePath(r,e.currentPath):r.join("/")}}function addErrorMessage(e,r,t,a){a?.errorMessages&&t&&(e.errorMessage={...e.errorMessage,[r]:t})}function setResponseValueAndErrors(e,r,t,a,s){e[r]=t,addErrorMessage(e,r,a,s)}function parseBrandedDef(e,r){return parseDef(e.type._def,r)}function parseDateDef(e,r,t){const a=t??r.dateStrategy;if(Array.isArray(a))return{anyOf:a.map(((t,a)=>parseDateDef(e,r,t)))};switch(a){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return integerDateParser(e,r)}}const integerDateParser=(e,r)=>{const t={type:"integer",format:"unix-time"};if("openApi3"===r.target)return t;for(const a of e.checks)switch(a.kind){case"min":setResponseValueAndErrors(t,"minimum",a.value,a.message,r);break;case"max":setResponseValueAndErrors(t,"maximum",a.value,a.message,r)}return t};let l;const c=/^[cC][^\s-]{8,}$/,u=/^[0-9a-z]+$/,d=/^[0-9A-HJKMNP-TV-Z]{26}$/,p=/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,zodPatterns_emoji=()=>(void 0===l&&(l=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),l),h=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,m=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,f=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,v=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,g=/^[a-zA-Z0-9_-]{21}$/,y=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/;function parseStringDef(e,r){const t={type:"string"};if(e.checks)for(const a of e.checks)switch(a.kind){case"min":setResponseValueAndErrors(t,"minLength","number"==typeof t.minLength?Math.max(t.minLength,a.value):a.value,a.message,r);break;case"max":setResponseValueAndErrors(t,"maxLength","number"==typeof t.maxLength?Math.min(t.maxLength,a.value):a.value,a.message,r);break;case"email":switch(r.emailStrategy){case"format:email":addFormat(t,"email",a.message,r);break;case"format:idn-email":addFormat(t,"idn-email",a.message,r);break;case"pattern:zod":addPattern(t,p,a.message,r)}break;case"url":addFormat(t,"uri",a.message,r);break;case"uuid":addFormat(t,"uuid",a.message,r);break;case"regex":addPattern(t,a.regex,a.message,r);break;case"cuid":addPattern(t,c,a.message,r);break;case"cuid2":addPattern(t,u,a.message,r);break;case"startsWith":addPattern(t,RegExp(`^${escapeLiteralCheckValue(a.value,r)}`),a.message,r);break;case"endsWith":addPattern(t,RegExp(`${escapeLiteralCheckValue(a.value,r)}$`),a.message,r);break;case"datetime":addFormat(t,"date-time",a.message,r);break;case"date":addFormat(t,"date",a.message,r);break;case"time":addFormat(t,"time",a.message,r);break;case"duration":addFormat(t,"duration",a.message,r);break;case"length":setResponseValueAndErrors(t,"minLength","number"==typeof t.minLength?Math.max(t.minLength,a.value):a.value,a.message,r),setResponseValueAndErrors(t,"maxLength","number"==typeof t.maxLength?Math.min(t.maxLength,a.value):a.value,a.message,r);break;case"includes":addPattern(t,RegExp(escapeLiteralCheckValue(a.value,r)),a.message,r);break;case"ip":"v6"!==a.version&&addFormat(t,"ipv4",a.message,r),"v4"!==a.version&&addFormat(t,"ipv6",a.message,r);break;case"base64url":addPattern(t,v,a.message,r);break;case"jwt":addPattern(t,y,a.message,r);break;case"cidr":"v6"!==a.version&&addPattern(t,h,a.message,r),"v4"!==a.version&&addPattern(t,m,a.message,r);break;case"emoji":addPattern(t,zodPatterns_emoji(),a.message,r);break;case"ulid":addPattern(t,d,a.message,r);break;case"base64":switch(r.base64Strategy){case"format:binary":addFormat(t,"binary",a.message,r);break;case"contentEncoding:base64":setResponseValueAndErrors(t,"contentEncoding","base64",a.message,r);break;case"pattern:zod":addPattern(t,f,a.message,r)}break;case"nanoid":addPattern(t,g,a.message,r)}return t}function escapeLiteralCheckValue(e,r){return"escape"===r.patternStrategy?function escapeNonAlphaNumeric(e){let r="";for(let t=0;t<e.length;t++)P.has(e[t])||(r+="\\"),r+=e[t];return r}(e):e}const P=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function addFormat(e,r,t,a){e.format||e.anyOf?.some((e=>e.format))?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&a.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:r,...t&&a.errorMessages&&{errorMessage:{format:t}}})):setResponseValueAndErrors(e,"format",r,t,a)}function addPattern(e,r,t,a){e.pattern||e.allOf?.some((e=>e.pattern))?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&a.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:stringifyRegExpWithFlags(r,a),...t&&a.errorMessages&&{errorMessage:{pattern:t}}})):setResponseValueAndErrors(e,"pattern",stringifyRegExpWithFlags(r,a),t,a)}function stringifyRegExpWithFlags(e,r){if(!r.applyRegexFlags||!e.flags)return e.source;const t=e.flags.includes("i"),a=e.flags.includes("m"),s=e.flags.includes("s"),o=t?e.source.toLowerCase():e.source;let i="",n=!1,l=!1,c=!1;for(let e=0;e<o.length;e++)if(n)i+=o[e],n=!1;else{if(t)if(l){if(o[e].match(/[a-z]/)){c?(i+=o[e],i+=`${o[e-2]}-${o[e]}`.toUpperCase(),c=!1):"-"===o[e+1]&&o[e+2]?.match(/[a-z]/)?(i+=o[e],c=!0):i+=`${o[e]}${o[e].toUpperCase()}`;continue}}else if(o[e].match(/[a-z]/)){i+=`[${o[e]}${o[e].toUpperCase()}]`;continue}if(a){if("^"===o[e]){i+="(^|(?<=[\r\n]))";continue}if("$"===o[e]){i+="($|(?=[\r\n]))";continue}}s&&"."===o[e]?i+=l?`${o[e]}\r\n`:`[${o[e]}\r\n]`:(i+=o[e],"\\"===o[e]?n=!0:l&&"]"===o[e]?l=!1:l||"["!==o[e]||(l=!0))}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${r.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return i}function parseRecordDef(e,r){if("openAi"===r.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===r.target&&e.keyType?._def.typeName===n.kY.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce(((t,a)=>({...t,[a]:parseDef(e.valueType._def,{...r,currentPath:[...r.currentPath,"properties",a]})??parseAnyDef(r)})),{}),additionalProperties:r.rejectedAdditionalProperties};const t={type:"object",additionalProperties:parseDef(e.valueType._def,{...r,currentPath:[...r.currentPath,"additionalProperties"]})??r.allowedAdditionalProperties};if("openApi3"===r.target)return t;if(e.keyType?._def.typeName===n.kY.ZodString&&e.keyType._def.checks?.length){const{type:a,...s}=parseStringDef(e.keyType._def,r);return{...t,propertyNames:s}}if(e.keyType?._def.typeName===n.kY.ZodEnum)return{...t,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===n.kY.ZodBranded&&e.keyType._def.type._def.typeName===n.kY.ZodString&&e.keyType._def.type._def.checks?.length){const{type:a,...s}=parseBrandedDef(e.keyType._def,r);return{...t,propertyNames:s}}return t}const b={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};const asAnyOf=(e,r)=>{const t=(e.options instanceof Map?Array.from(e.options.values()):e.options).map(((e,t)=>parseDef(e._def,{...r,currentPath:[...r.currentPath,"anyOf",`${t}`]}))).filter((e=>!!e&&(!r.strictUnions||"object"==typeof e&&Object.keys(e).length>0)));return t.length?{anyOf:t}:void 0};function parseObjectDef(e,r){const t="openAi"===r.target,a={type:"object",properties:{}},s=[],o=e.shape();for(const e in o){let i=o[e];if(void 0===i||void 0===i._def)continue;let n=safeIsOptional(i);n&&t&&("ZodOptional"===i._def.typeName&&(i=i._def.innerType),i.isNullable()||(i=i.nullable()),n=!1);const l=parseDef(i._def,{...r,currentPath:[...r.currentPath,"properties",e],propertyPath:[...r.currentPath,"properties",e]});void 0!==l&&(a.properties[e]=l,n||s.push(e))}s.length&&(a.required=s);const i=function decideAdditionalProperties(e,r){if("ZodNever"!==e.catchall._def.typeName)return parseDef(e.catchall._def,{...r,currentPath:[...r.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return r.allowedAdditionalProperties;case"strict":return r.rejectedAdditionalProperties;case"strip":return"strict"===r.removeAdditionalStrategy?r.allowedAdditionalProperties:r.rejectedAdditionalProperties}}(e,r);return void 0!==i&&(a.additionalProperties=i),a}function safeIsOptional(e){try{return e.isOptional()}catch{return!0}}const selectParser=(e,r,t)=>{switch(r){case n.kY.ZodString:return parseStringDef(e,t);case n.kY.ZodNumber:return function parseNumberDef(e,r){const t={type:"number"};if(!e.checks)return t;for(const a of e.checks)switch(a.kind){case"int":t.type="integer",addErrorMessage(t,"type",a.message,r);break;case"min":"jsonSchema7"===r.target?a.inclusive?setResponseValueAndErrors(t,"minimum",a.value,a.message,r):setResponseValueAndErrors(t,"exclusiveMinimum",a.value,a.message,r):(a.inclusive||(t.exclusiveMinimum=!0),setResponseValueAndErrors(t,"minimum",a.value,a.message,r));break;case"max":"jsonSchema7"===r.target?a.inclusive?setResponseValueAndErrors(t,"maximum",a.value,a.message,r):setResponseValueAndErrors(t,"exclusiveMaximum",a.value,a.message,r):(a.inclusive||(t.exclusiveMaximum=!0),setResponseValueAndErrors(t,"maximum",a.value,a.message,r));break;case"multipleOf":setResponseValueAndErrors(t,"multipleOf",a.value,a.message,r)}return t}(e,t);case n.kY.ZodObject:return parseObjectDef(e,t);case n.kY.ZodBigInt:return function parseBigintDef(e,r){const t={type:"integer",format:"int64"};if(!e.checks)return t;for(const a of e.checks)switch(a.kind){case"min":"jsonSchema7"===r.target?a.inclusive?setResponseValueAndErrors(t,"minimum",a.value,a.message,r):setResponseValueAndErrors(t,"exclusiveMinimum",a.value,a.message,r):(a.inclusive||(t.exclusiveMinimum=!0),setResponseValueAndErrors(t,"minimum",a.value,a.message,r));break;case"max":"jsonSchema7"===r.target?a.inclusive?setResponseValueAndErrors(t,"maximum",a.value,a.message,r):setResponseValueAndErrors(t,"exclusiveMaximum",a.value,a.message,r):(a.inclusive||(t.exclusiveMaximum=!0),setResponseValueAndErrors(t,"maximum",a.value,a.message,r));break;case"multipleOf":setResponseValueAndErrors(t,"multipleOf",a.value,a.message,r)}return t}(e,t);case n.kY.ZodBoolean:return{type:"boolean"};case n.kY.ZodDate:return parseDateDef(e,t);case n.kY.ZodUndefined:return function parseUndefinedDef(e){return{not:parseAnyDef(e)}}(t);case n.kY.ZodNull:return function parseNullDef(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}(t);case n.kY.ZodArray:return function parseArrayDef(e,r){const t={type:"array"};return e.type?._def&&e.type?._def?.typeName!==n.kY.ZodAny&&(t.items=parseDef(e.type._def,{...r,currentPath:[...r.currentPath,"items"]})),e.minLength&&setResponseValueAndErrors(t,"minItems",e.minLength.value,e.minLength.message,r),e.maxLength&&setResponseValueAndErrors(t,"maxItems",e.maxLength.value,e.maxLength.message,r),e.exactLength&&(setResponseValueAndErrors(t,"minItems",e.exactLength.value,e.exactLength.message,r),setResponseValueAndErrors(t,"maxItems",e.exactLength.value,e.exactLength.message,r)),t}(e,t);case n.kY.ZodUnion:case n.kY.ZodDiscriminatedUnion:return function parseUnionDef(e,r){if("openApi3"===r.target)return asAnyOf(e,r);const t=e.options instanceof Map?Array.from(e.options.values()):e.options;if(t.every((e=>e._def.typeName in b&&(!e._def.checks||!e._def.checks.length)))){const e=t.reduce(((e,r)=>{const t=b[r._def.typeName];return t&&!e.includes(t)?[...e,t]:e}),[]);return{type:e.length>1?e:e[0]}}if(t.every((e=>"ZodLiteral"===e._def.typeName&&!e.description))){const e=t.reduce(((e,r)=>{const t=typeof r._def.value;switch(t){case"string":case"number":case"boolean":return[...e,t];case"bigint":return[...e,"integer"];case"object":if(null===r._def.value)return[...e,"null"];default:return e}}),[]);if(e.length===t.length){const r=e.filter(((e,r,t)=>t.indexOf(e)===r));return{type:r.length>1?r:r[0],enum:t.reduce(((e,r)=>e.includes(r._def.value)?e:[...e,r._def.value]),[])}}}else if(t.every((e=>"ZodEnum"===e._def.typeName)))return{type:"string",enum:t.reduce(((e,r)=>[...e,...r._def.values.filter((r=>!e.includes(r)))]),[])};return asAnyOf(e,r)}(e,t);case n.kY.ZodIntersection:return function parseIntersectionDef(e,r){const t=[parseDef(e.left._def,{...r,currentPath:[...r.currentPath,"allOf","0"]}),parseDef(e.right._def,{...r,currentPath:[...r.currentPath,"allOf","1"]})].filter((e=>!!e));let a="jsonSchema2019-09"===r.target?{unevaluatedProperties:!1}:void 0;const s=[];return t.forEach((e=>{if("type"in(r=e)&&"string"===r.type||!("allOf"in r)){let r=e;if("additionalProperties"in e&&!1===e.additionalProperties){const{additionalProperties:t,...a}=e;r=a}else a=void 0;s.push(r)}else s.push(...e.allOf),void 0===e.unevaluatedProperties&&(a=void 0);var r})),s.length?{allOf:s,...a}:void 0}(e,t);case n.kY.ZodTuple:return function parseTupleDef(e,r){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map(((e,t)=>parseDef(e._def,{...r,currentPath:[...r.currentPath,"items",`${t}`]}))).reduce(((e,r)=>void 0===r?e:[...e,r]),[]),additionalItems:parseDef(e.rest._def,{...r,currentPath:[...r.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map(((e,t)=>parseDef(e._def,{...r,currentPath:[...r.currentPath,"items",`${t}`]}))).reduce(((e,r)=>void 0===r?e:[...e,r]),[])}}(e,t);case n.kY.ZodRecord:return parseRecordDef(e,t);case n.kY.ZodLiteral:return function parseLiteralDef(e,r){const t=typeof e.value;return"bigint"!==t&&"number"!==t&&"boolean"!==t&&"string"!==t?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===r.target?{type:"bigint"===t?"integer":t,enum:[e.value]}:{type:"bigint"===t?"integer":t,const:e.value}}(e,t);case n.kY.ZodEnum:return function parseEnumDef(e){return{type:"string",enum:Array.from(e.values)}}(e);case n.kY.ZodNativeEnum:return function parseNativeEnumDef(e){const r=e.values,t=Object.keys(e.values).filter((e=>"number"!=typeof r[r[e]])).map((e=>r[e])),a=Array.from(new Set(t.map((e=>typeof e))));return{type:1===a.length?"string"===a[0]?"string":"number":["string","number"],enum:t}}(e);case n.kY.ZodNullable:return function parseNullableDef(e,r){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===r.target?{type:b[e.innerType._def.typeName],nullable:!0}:{type:[b[e.innerType._def.typeName],"null"]};if("openApi3"===r.target){const t=parseDef(e.innerType._def,{...r,currentPath:[...r.currentPath]});return t&&"$ref"in t?{allOf:[t],nullable:!0}:t&&{...t,nullable:!0}}const t=parseDef(e.innerType._def,{...r,currentPath:[...r.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}(e,t);case n.kY.ZodOptional:return((e,r)=>{if(r.currentPath.toString()===r.propertyPath?.toString())return parseDef(e.innerType._def,r);const t=parseDef(e.innerType._def,{...r,currentPath:[...r.currentPath,"anyOf","1"]});return t?{anyOf:[{not:parseAnyDef(r)},t]}:parseAnyDef(r)})(e,t);case n.kY.ZodMap:return function parseMapDef(e,r){return"record"===r.mapStrategy?parseRecordDef(e,r):{type:"array",maxItems:125,items:{type:"array",items:[parseDef(e.keyType._def,{...r,currentPath:[...r.currentPath,"items","items","0"]})||parseAnyDef(r),parseDef(e.valueType._def,{...r,currentPath:[...r.currentPath,"items","items","1"]})||parseAnyDef(r)],minItems:2,maxItems:2}}}(e,t);case n.kY.ZodSet:return function parseSetDef(e,r){const t={type:"array",uniqueItems:!0,items:parseDef(e.valueType._def,{...r,currentPath:[...r.currentPath,"items"]})};return e.minSize&&setResponseValueAndErrors(t,"minItems",e.minSize.value,e.minSize.message,r),e.maxSize&&setResponseValueAndErrors(t,"maxItems",e.maxSize.value,e.maxSize.message,r),t}(e,t);case n.kY.ZodLazy:return()=>e.getter()._def;case n.kY.ZodPromise:return function parsePromiseDef(e,r){return parseDef(e.type._def,r)}(e,t);case n.kY.ZodNaN:case n.kY.ZodNever:return function parseNeverDef(e){return"openAi"===e.target?void 0:{not:parseAnyDef({...e,currentPath:[...e.currentPath,"not"]})}}(t);case n.kY.ZodEffects:return function parseEffectsDef(e,r){return"input"===r.effectStrategy?parseDef(e.schema._def,r):parseAnyDef(r)}(e,t);case n.kY.ZodAny:return parseAnyDef(t);case n.kY.ZodUnknown:return function parseUnknownDef(e){return parseAnyDef(e)}(t);case n.kY.ZodDefault:return function parseDefaultDef(e,r){return{...parseDef(e.innerType._def,r),default:e.defaultValue()}}(e,t);case n.kY.ZodBranded:return parseBrandedDef(e,t);case n.kY.ZodReadonly:case n.kY.ZodCatch:return((e,r)=>parseDef(e.innerType._def,r))(e,t);case n.kY.ZodPipeline:return((e,r)=>{if("input"===r.pipeStrategy)return parseDef(e.in._def,r);if("output"===r.pipeStrategy)return parseDef(e.out._def,r);const t=parseDef(e.in._def,{...r,currentPath:[...r.currentPath,"allOf","0"]});return{allOf:[t,parseDef(e.out._def,{...r,currentPath:[...r.currentPath,"allOf",t?"1":"0"]})].filter((e=>void 0!==e))}})(e,t);case n.kY.ZodFunction:case n.kY.ZodVoid:case n.kY.ZodSymbol:default:return}};function parseDef(e,r,t=!1){const a=r.seen.get(e);if(r.override){const s=r.override?.(e,r,a,t);if(s!==o)return s}if(a&&!t){const e=get$ref(a,r);if(void 0!==e)return e}const s={def:e,path:r.currentPath,jsonSchema:void 0};r.seen.set(e,s);const i=selectParser(e,e.typeName,r),n="function"==typeof i?parseDef(i(),r):i;if(n&&addMeta(e,r,n),r.postProcess){const t=r.postProcess(n,e,r);return s.jsonSchema=n,t}return s.jsonSchema=n,n}const get$ref=(e,r)=>{switch(r.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:getRelativePath(r.currentPath,e.path)};case"none":case"seen":return e.path.length<r.currentPath.length&&e.path.every(((e,t)=>r.currentPath[t]===e))?(console.warn(`Recursive reference detected at ${r.currentPath.join("/")}! Defaulting to any`),parseAnyDef(r)):"seen"===r.$refStrategy?parseAnyDef(r):void 0}},addMeta=(e,r,t)=>(e.description&&(t.description=e.description,r.markdownDescription&&(t.markdownDescription=e.description)),t),zodToJsonSchema_zodToJsonSchema=(e,r)=>{const t=getRefs(r);let a="object"==typeof r&&r.definitions?Object.entries(r.definitions).reduce(((e,[r,a])=>({...e,[r]:parseDef(a._def,{...t,currentPath:[...t.basePath,t.definitionPath,r]},!0)??parseAnyDef(t)})),{}):void 0;const s="string"==typeof r?r:"title"===r?.nameStrategy?void 0:r?.name,o=parseDef(e._def,void 0===s?t:{...t,currentPath:[...t.basePath,t.definitionPath,s]},!1)??parseAnyDef(t),i="object"==typeof r&&void 0!==r.name&&"title"===r.nameStrategy?r.name:void 0;void 0!==i&&(o.title=i),t.flags.hasReferencedOpenAiAnyType&&(a||(a={}),a[t.openAiAnyTypeName]||(a[t.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:"relative"===t.$refStrategy?"1":[...t.basePath,t.definitionPath,t.openAiAnyTypeName].join("/")}}));const n=void 0===s?a?{...o,[t.definitionPath]:a}:o:{$ref:[..."relative"===t.$refStrategy?[]:t.basePath,t.definitionPath,s].join("/"),[t.definitionPath]:{...a,[s]:o}};return"jsonSchema7"===t.target?n.$schema="http://json-schema.org/draft-07/schema#":"jsonSchema2019-09"!==t.target&&"openAi"!==t.target||(n.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===t.target&&("anyOf"in n||"oneOf"in n||"allOf"in n||"type"in n&&Array.isArray(n.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),n};var E;!function(e){e.Completable="McpCompletable"}(E||(E={}));class Completable extends n.aR{_parse(e){const{ctx:r}=this._processInputParams(e),t=r.data;return this._def.type._parse({data:t,path:r.path,parent:r})}unwrap(){return this._def.type}}function processCreateParams(e){if(!e)return{};const{errorMap:r,invalid_type_error:t,required_error:a,description:s}=e;if(r&&(t||a))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(r)return{errorMap:r,description:s};return{errorMap:(r,s)=>{var o,i;const{message:n}=e;return"invalid_enum_value"===r.code?{message:null!=n?n:s.defaultError}:void 0===s.data?{message:null!==(o=null!=n?n:a)&&void 0!==o?o:s.defaultError}:"invalid_type"!==r.code?{message:s.defaultError}:{message:null!==(i=null!=n?n:t)&&void 0!==i?i:s.defaultError}},description:s}}Completable.create=(e,r)=>new Completable({type:e,typeName:E.Completable,complete:r.complete,...processCreateParams(r)});const _=1e6,w=1e6;class UriTemplate{static isTemplate(e){return/\{[^}\s]+\}/.test(e)}static validateLength(e,r,t){if(e.length>r)throw new Error(`${t} exceeds maximum length of ${r} characters (got ${e.length})`)}get variableNames(){return this.parts.flatMap((e=>"string"==typeof e?[]:e.names))}constructor(e){UriTemplate.validateLength(e,_,"Template"),this.template=e,this.parts=this.parse(e)}toString(){return this.template}parse(e){const r=[];let t="",a=0,s=0;for(;a<e.length;)if("{"===e[a]){t&&(r.push(t),t="");const o=e.indexOf("}",a);if(-1===o)throw new Error("Unclosed template expression");if(s++,s>1e4)throw new Error("Template contains too many expressions (max 10000)");const i=e.slice(a+1,o),n=this.getOperator(i),l=i.includes("*"),c=this.getNames(i),u=c[0];for(const e of c)UriTemplate.validateLength(e,w,"Variable name");r.push({name:u,operator:n,names:c,exploded:l}),a=o+1}else t+=e[a],a++;return t&&r.push(t),r}getOperator(e){return["+","#",".","/","?","&"].find((r=>e.startsWith(r)))||""}getNames(e){const r=this.getOperator(e);return e.slice(r.length).split(",").map((e=>e.replace("*","").trim())).filter((e=>e.length>0))}encodeValue(e,r){return UriTemplate.validateLength(e,w,"Variable value"),"+"===r||"#"===r?encodeURI(e):encodeURIComponent(e)}expandPart(e,r){if("?"===e.operator||"&"===e.operator){const t=e.names.map((t=>{const a=r[t];if(void 0===a)return"";return`${t}=${Array.isArray(a)?a.map((r=>this.encodeValue(r,e.operator))).join(","):this.encodeValue(a.toString(),e.operator)}`})).filter((e=>e.length>0));if(0===t.length)return"";return("?"===e.operator?"?":"&")+t.join("&")}if(e.names.length>1){const t=e.names.map((e=>r[e])).filter((e=>void 0!==e));return 0===t.length?"":t.map((e=>Array.isArray(e)?e[0]:e)).join(",")}const t=r[e.name];if(void 0===t)return"";const a=(Array.isArray(t)?t:[t]).map((r=>this.encodeValue(r,e.operator)));switch(e.operator){case"":case"+":default:return a.join(",");case"#":return"#"+a.join(",");case".":return"."+a.join(".");case"/":return"/"+a.join("/")}}expand(e){let r="",t=!1;for(const a of this.parts){if("string"==typeof a){r+=a;continue}const s=this.expandPart(a,e);s&&("?"!==a.operator&&"&"!==a.operator||!t?r+=s:r+=s.replace("?","&"),"?"!==a.operator&&"&"!==a.operator||(t=!0))}return r}escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}partToRegExp(e){const r=[];for(const r of e.names)UriTemplate.validateLength(r,w,"Variable name");if("?"===e.operator||"&"===e.operator){for(let t=0;t<e.names.length;t++){const a=e.names[t],s=0===t?"\\"+e.operator:"&";r.push({pattern:s+this.escapeRegExp(a)+"=([^&]+)",name:a})}return r}let t;const a=e.name;switch(e.operator){case"":t=e.exploded?"([^/]+(?:,[^/]+)*)":"([^/,]+)";break;case"+":case"#":t="(.+)";break;case".":t="\\.([^/,]+)";break;case"/":t="/"+(e.exploded?"([^/]+(?:,[^/]+)*)":"([^/,]+)");break;default:t="([^/]+)"}return r.push({pattern:t,name:a}),r}match(e){UriTemplate.validateLength(e,_,"URI");let r="^";const t=[];for(const e of this.parts)if("string"==typeof e)r+=this.escapeRegExp(e);else{const a=this.partToRegExp(e);for(const{pattern:s,name:o}of a)r+=s,t.push({name:o,exploded:e.exploded})}r+="$",UriTemplate.validateLength(r,1e6,"Generated regex pattern");const a=new RegExp(r),s=e.match(a);if(!s)return null;const o={};for(let e=0;e<t.length;e++){const{name:r,exploded:a}=t[e],i=s[e+1],n=r.replace("*","");a&&i.includes(",")?o[n]=i.split(","):o[n]=i}return o}}class McpServer{constructor(e,r){this._registeredResources={},this._registeredResourceTemplates={},this._registeredTools={},this._registeredPrompts={},this._toolHandlersInitialized=!1,this._completionHandlerInitialized=!1,this._resourceHandlersInitialized=!1,this._promptHandlersInitialized=!1,this.server=new Server(e,r)}async connect(e){return await this.server.connect(e)}async close(){await this.server.close()}setToolRequestHandlers(){this._toolHandlersInitialized||(this.server.assertCanSetRequestHandler(a.gW.shape.method.value),this.server.assertCanSetRequestHandler(a.FT.shape.method.value),this.server.registerCapabilities({tools:{listChanged:!0}}),this.server.setRequestHandler(a.gW,(()=>({tools:Object.entries(this._registeredTools).filter((([,e])=>e.enabled)).map((([e,r])=>{const t={name:e,title:r.title,description:r.description,inputSchema:r.inputSchema?zodToJsonSchema_zodToJsonSchema(r.inputSchema,{strictUnions:!0}):S,annotations:r.annotations,_meta:r._meta};return r.outputSchema&&(t.outputSchema=zodToJsonSchema_zodToJsonSchema(r.outputSchema,{strictUnions:!0})),t}))}))),this.server.setRequestHandler(a.FT,(async(e,r)=>{const t=this._registeredTools[e.params.name];if(!t)throw new a.Nh(a.O4.InvalidParams,`Tool ${e.params.name} not found`);if(!t.enabled)throw new a.Nh(a.O4.InvalidParams,`Tool ${e.params.name} disabled`);let s;if(t.inputSchema){const o=await t.inputSchema.safeParseAsync(e.params.arguments);if(!o.success)throw new a.Nh(a.O4.InvalidParams,`Invalid arguments for tool ${e.params.name}: ${o.error.message}`);const i=o.data,n=t.callback;try{s=await Promise.resolve(n(i,r))}catch(e){s={content:[{type:"text",text:e instanceof Error?e.message:String(e)}],isError:!0}}}else{const e=t.callback;try{s=await Promise.resolve(e(r))}catch(e){s={content:[{type:"text",text:e instanceof Error?e.message:String(e)}],isError:!0}}}if(t.outputSchema&&!s.isError){if(!s.structuredContent)throw new a.Nh(a.O4.InvalidParams,`Tool ${e.params.name} has an output schema but no structured content was provided`);const r=await t.outputSchema.safeParseAsync(s.structuredContent);if(!r.success)throw new a.Nh(a.O4.InvalidParams,`Invalid structured content for tool ${e.params.name}: ${r.error.message}`)}return s})),this._toolHandlersInitialized=!0)}setCompletionRequestHandler(){this._completionHandlerInitialized||(this.server.assertCanSetRequestHandler(a.iK.shape.method.value),this.server.registerCapabilities({completions:{}}),this.server.setRequestHandler(a.iK,(async e=>{switch(e.params.ref.type){case"ref/prompt":return this.handlePromptCompletion(e,e.params.ref);case"ref/resource":return this.handleResourceCompletion(e,e.params.ref);default:throw new a.Nh(a.O4.InvalidParams,`Invalid completion reference: ${e.params.ref}`)}})),this._completionHandlerInitialized=!0)}async handlePromptCompletion(e,r){const t=this._registeredPrompts[r.name];if(!t)throw new a.Nh(a.O4.InvalidParams,`Prompt ${r.name} not found`);if(!t.enabled)throw new a.Nh(a.O4.InvalidParams,`Prompt ${r.name} disabled`);if(!t.argsSchema)return x;const s=t.argsSchema.shape[e.params.argument.name];if(!(s instanceof Completable))return x;const o=s._def;return createCompletionResult(await o.complete(e.params.argument.value,e.params.context))}async handleResourceCompletion(e,r){const t=Object.values(this._registeredResourceTemplates).find((e=>e.resourceTemplate.uriTemplate.toString()===r.uri));if(!t){if(this._registeredResources[r.uri])return x;throw new a.Nh(a.O4.InvalidParams,`Resource template ${e.params.ref.uri} not found`)}const s=t.resourceTemplate.completeCallback(e.params.argument.name);if(!s)return x;return createCompletionResult(await s(e.params.argument.value,e.params.context))}setResourceRequestHandlers(){this._resourceHandlersInitialized||(this.server.assertCanSetRequestHandler(a.OI.shape.method.value),this.server.assertCanSetRequestHandler(a.s.shape.method.value),this.server.assertCanSetRequestHandler(a.R6.shape.method.value),this.server.registerCapabilities({resources:{listChanged:!0}}),this.server.setRequestHandler(a.OI,(async(e,r)=>{const t=Object.entries(this._registeredResources).filter((([e,r])=>r.enabled)).map((([e,r])=>({uri:e,name:r.name,...r.metadata}))),a=[];for(const e of Object.values(this._registeredResourceTemplates)){if(!e.resourceTemplate.listCallback)continue;const t=await e.resourceTemplate.listCallback(r);for(const r of t.resources)a.push({...e.metadata,...r})}return{resources:[...t,...a]}})),this.server.setRequestHandler(a.s,(async()=>({resourceTemplates:Object.entries(this._registeredResourceTemplates).map((([e,r])=>({name:e,uriTemplate:r.resourceTemplate.uriTemplate.toString(),...r.metadata})))}))),this.server.setRequestHandler(a.R6,(async(e,r)=>{const t=new URL(e.params.uri),s=this._registeredResources[t.toString()];if(s){if(!s.enabled)throw new a.Nh(a.O4.InvalidParams,`Resource ${t} disabled`);return s.readCallback(t,r)}for(const e of Object.values(this._registeredResourceTemplates)){const a=e.resourceTemplate.uriTemplate.match(t.toString());if(a)return e.readCallback(t,a,r)}throw new a.Nh(a.O4.InvalidParams,`Resource ${t} not found`)})),this.setCompletionRequestHandler(),this._resourceHandlersInitialized=!0)}setPromptRequestHandlers(){this._promptHandlersInitialized||(this.server.assertCanSetRequestHandler(a.Qq.shape.method.value),this.server.assertCanSetRequestHandler(a.$p.shape.method.value),this.server.registerCapabilities({prompts:{listChanged:!0}}),this.server.setRequestHandler(a.Qq,(()=>({prompts:Object.entries(this._registeredPrompts).filter((([,e])=>e.enabled)).map((([e,r])=>{return{name:e,title:r.title,description:r.description,arguments:r.argsSchema?(t=r.argsSchema,Object.entries(t.shape).map((([e,r])=>({name:e,description:r.description,required:!r.isOptional()})))):void 0};var t}))}))),this.server.setRequestHandler(a.$p,(async(e,r)=>{const t=this._registeredPrompts[e.params.name];if(!t)throw new a.Nh(a.O4.InvalidParams,`Prompt ${e.params.name} not found`);if(!t.enabled)throw new a.Nh(a.O4.InvalidParams,`Prompt ${e.params.name} disabled`);if(t.argsSchema){const s=await t.argsSchema.safeParseAsync(e.params.arguments);if(!s.success)throw new a.Nh(a.O4.InvalidParams,`Invalid arguments for prompt ${e.params.name}: ${s.error.message}`);const o=s.data,i=t.callback;return await Promise.resolve(i(o,r))}{const e=t.callback;return await Promise.resolve(e(r))}})),this.setCompletionRequestHandler(),this._promptHandlersInitialized=!0)}resource(e,r,...t){let a;"object"==typeof t[0]&&(a=t.shift());const s=t[0];if("string"==typeof r){if(this._registeredResources[r])throw new Error(`Resource ${r} is already registered`);const t=this._createRegisteredResource(e,void 0,r,a,s);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),t}{if(this._registeredResourceTemplates[e])throw new Error(`Resource template ${e} is already registered`);const t=this._createRegisteredResourceTemplate(e,void 0,r,a,s);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),t}}registerResource(e,r,t,a){if("string"==typeof r){if(this._registeredResources[r])throw new Error(`Resource ${r} is already registered`);const s=this._createRegisteredResource(e,t.title,r,t,a);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),s}{if(this._registeredResourceTemplates[e])throw new Error(`Resource template ${e} is already registered`);const s=this._createRegisteredResourceTemplate(e,t.title,r,t,a);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),s}}_createRegisteredResource(e,r,t,a,s){const o={name:e,title:r,metadata:a,readCallback:s,enabled:!0,disable:()=>o.update({enabled:!1}),enable:()=>o.update({enabled:!0}),remove:()=>o.update({uri:null}),update:e=>{void 0!==e.uri&&e.uri!==t&&(delete this._registeredResources[t],e.uri&&(this._registeredResources[e.uri]=o)),void 0!==e.name&&(o.name=e.name),void 0!==e.title&&(o.title=e.title),void 0!==e.metadata&&(o.metadata=e.metadata),void 0!==e.callback&&(o.readCallback=e.callback),void 0!==e.enabled&&(o.enabled=e.enabled),this.sendResourceListChanged()}};return this._registeredResources[t]=o,o}_createRegisteredResourceTemplate(e,r,t,a,s){const o={resourceTemplate:t,title:r,metadata:a,readCallback:s,enabled:!0,disable:()=>o.update({enabled:!1}),enable:()=>o.update({enabled:!0}),remove:()=>o.update({name:null}),update:r=>{void 0!==r.name&&r.name!==e&&(delete this._registeredResourceTemplates[e],r.name&&(this._registeredResourceTemplates[r.name]=o)),void 0!==r.title&&(o.title=r.title),void 0!==r.template&&(o.resourceTemplate=r.template),void 0!==r.metadata&&(o.metadata=r.metadata),void 0!==r.callback&&(o.readCallback=r.callback),void 0!==r.enabled&&(o.enabled=r.enabled),this.sendResourceListChanged()}};return this._registeredResourceTemplates[e]=o,o}_createRegisteredPrompt(e,r,t,a,s){const o={title:r,description:t,argsSchema:void 0===a?void 0:n.Ik(a),callback:s,enabled:!0,disable:()=>o.update({enabled:!1}),enable:()=>o.update({enabled:!0}),remove:()=>o.update({name:null}),update:r=>{void 0!==r.name&&r.name!==e&&(delete this._registeredPrompts[e],r.name&&(this._registeredPrompts[r.name]=o)),void 0!==r.title&&(o.title=r.title),void 0!==r.description&&(o.description=r.description),void 0!==r.argsSchema&&(o.argsSchema=n.Ik(r.argsSchema)),void 0!==r.callback&&(o.callback=r.callback),void 0!==r.enabled&&(o.enabled=r.enabled),this.sendPromptListChanged()}};return this._registeredPrompts[e]=o,o}_createRegisteredTool(e,r,t,a,s,o,i,l){const c={title:r,description:t,inputSchema:void 0===a?void 0:n.Ik(a),outputSchema:void 0===s?void 0:n.Ik(s),annotations:o,_meta:i,callback:l,enabled:!0,disable:()=>c.update({enabled:!1}),enable:()=>c.update({enabled:!0}),remove:()=>c.update({name:null}),update:r=>{void 0!==r.name&&r.name!==e&&(delete this._registeredTools[e],r.name&&(this._registeredTools[r.name]=c)),void 0!==r.title&&(c.title=r.title),void 0!==r.description&&(c.description=r.description),void 0!==r.paramsSchema&&(c.inputSchema=n.Ik(r.paramsSchema)),void 0!==r.callback&&(c.callback=r.callback),void 0!==r.annotations&&(c.annotations=r.annotations),void 0!==r._meta&&(c._meta=r._meta),void 0!==r.enabled&&(c.enabled=r.enabled),this.sendToolListChanged()}};return this._registeredTools[e]=c,this.setToolRequestHandlers(),this.sendToolListChanged(),c}tool(e,...r){if(this._registeredTools[e])throw new Error(`Tool ${e} is already registered`);let t,a,s;if("string"==typeof r[0]&&(t=r.shift()),r.length>1){const e=r[0];isZodRawShape(e)?(a=r.shift(),r.length>1&&"object"==typeof r[0]&&null!==r[0]&&!isZodRawShape(r[0])&&(s=r.shift())):"object"==typeof e&&null!==e&&(s=r.shift())}const o=r[0];return this._createRegisteredTool(e,void 0,t,a,undefined,s,void 0,o)}registerTool(e,r,t){if(this._registeredTools[e])throw new Error(`Tool ${e} is already registered`);const{title:a,description:s,inputSchema:o,outputSchema:i,annotations:n,_meta:l}=r;return this._createRegisteredTool(e,a,s,o,i,n,l,t)}prompt(e,...r){if(this._registeredPrompts[e])throw new Error(`Prompt ${e} is already registered`);let t,a;"string"==typeof r[0]&&(t=r.shift()),r.length>1&&(a=r.shift());const s=r[0],o=this._createRegisteredPrompt(e,void 0,t,a,s);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),o}registerPrompt(e,r,t){if(this._registeredPrompts[e])throw new Error(`Prompt ${e} is already registered`);const{title:a,description:s,argsSchema:o}=r,i=this._createRegisteredPrompt(e,a,s,o,t);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),i}isConnected(){return void 0!==this.server.transport}async sendLoggingMessage(e,r){return this.server.sendLoggingMessage(e,r)}sendResourceListChanged(){this.isConnected()&&this.server.sendResourceListChanged()}sendToolListChanged(){this.isConnected()&&this.server.sendToolListChanged()}sendPromptListChanged(){this.isConnected()&&this.server.sendPromptListChanged()}}class ResourceTemplate{constructor(e,r){this._callbacks=r,this._uriTemplate="string"==typeof e?new UriTemplate(e):e}get uriTemplate(){return this._uriTemplate}get listCallback(){return this._callbacks.list}completeCallback(e){var r;return null===(r=this._callbacks.complete)||void 0===r?void 0:r[e]}}const S={type:"object",properties:{}};function isZodRawShape(e){if("object"!=typeof e||null===e)return!1;return 0===Object.keys(e).length||Object.values(e).some(isZodTypeLike)}function isZodTypeLike(e){return null!==e&&"object"==typeof e&&"parse"in e&&"function"==typeof e.parse&&"safeParse"in e&&"function"==typeof e.safeParse}function createCompletionResult(e){return{completion:{values:e.slice(0,100),total:e.length,hasMore:e.length>100}}}const x={completion:{values:[],hasMore:!1}}},29480:e=>{"use strict";e.exports=function generate_anyOf(e,r,t){var a=" ",s=e.level,o=e.dataLevel,i=e.schema[r],n=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,c=!e.opts.allErrors,u="data"+(o||""),d="valid"+s,p="errs__"+s,h=e.util.copy(e),m="";h.level++;var f="valid"+h.level,v=i.every((function(r){return e.opts.strictKeywords?"object"==typeof r&&Object.keys(r).length>0||!1===r:e.util.schemaHasRules(r,e.RULES.all)}));if(v){var g=h.baseId;a+=" var "+p+" = errors; var "+d+" = false;  ";var y=e.compositeRule;e.compositeRule=h.compositeRule=!0;var P=i;if(P)for(var b,E=-1,_=P.length-1;E<_;)b=P[E+=1],h.schema=b,h.schemaPath=n+"["+E+"]",h.errSchemaPath=l+"/"+E,a+="  "+e.validate(h)+" ",h.baseId=g,a+=" "+d+" = "+d+" || "+f+"; if (!"+d+") { ",m+="}";e.compositeRule=h.compositeRule=y,a+=" "+m+" if (!"+d+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+=" } else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } ",e.opts.allErrors&&(a+=" } ")}else c&&(a+=" if (true) { ");return a}},29853:e=>{"use strict";e.exports=function ucs2length(e){for(var r,t=0,a=e.length,s=0;s<a;)t++,(r=e.charCodeAt(s++))>=55296&&r<=56319&&s<a&&56320==(64512&(r=e.charCodeAt(s)))&&s++;return t}},32017:e=>{"use strict";e.exports=function equal(e,r){if(e===r)return!0;if(e&&r&&"object"==typeof e&&"object"==typeof r){if(e.constructor!==r.constructor)return!1;var t,a,s;if(Array.isArray(e)){if((t=e.length)!=r.length)return!1;for(a=t;0!=a--;)if(!equal(e[a],r[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if((t=(s=Object.keys(e)).length)!==Object.keys(r).length)return!1;for(a=t;0!=a--;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=t;0!=a--;){var o=s[a];if(!equal(e[o],r[o]))return!1}return!0}return e!=e&&r!=r}},35674:e=>{"use strict";e.exports=function generate_contains(e,r,t){var a=" ",s=e.level,o=e.dataLevel,i=e.schema[r],n=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,c=!e.opts.allErrors,u="data"+(o||""),d="valid"+s,p="errs__"+s,h=e.util.copy(e);h.level++;var m="valid"+h.level,f="i"+s,v=h.dataLevel=e.dataLevel+1,g="data"+v,y=e.baseId,P=e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0||!1===i:e.util.schemaHasRules(i,e.RULES.all);if(a+="var "+p+" = errors;var "+d+";",P){var b=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=i,h.schemaPath=n,h.errSchemaPath=l,a+=" var "+m+" = false; for (var "+f+" = 0; "+f+" < "+u+".length; "+f+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,f,e.opts.jsonPointers,!0);var E=u+"["+f+"]";h.dataPathArr[v]=f;var _=e.validate(h);h.baseId=y,e.util.varOccurences(_,g)<2?a+=" "+e.util.varReplace(_,g,E)+" ":a+=" var "+g+" = "+E+"; "+_+" ",a+=" if ("+m+") break; }  ",e.compositeRule=h.compositeRule=b,a+="  if (!"+m+") {"}else a+=" if ("+u+".length == 0) {";var w=w||[];w.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should contain a valid item' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var S=a;return a=w.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+S+"]); ":a+=" validate.errors = ["+S+"]; return false; ":a+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { ",P&&(a+="  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } "),e.opts.allErrors&&(a+=" } "),a}},41374:e=>{"use strict";e.exports=function generate_properties(e,r,t){var a=" ",s=e.level,o=e.dataLevel,i=e.schema[r],n=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,c=!e.opts.allErrors,u="data"+(o||""),d="errs__"+s,p=e.util.copy(e),h="";p.level++;var m="valid"+p.level,f="key"+s,v="idx"+s,g=p.dataLevel=e.dataLevel+1,y="data"+g,P="dataProperties"+s,b=Object.keys(i||{}).filter(notProto),E=e.schema.patternProperties||{},_=Object.keys(E).filter(notProto),w=e.schema.additionalProperties,S=b.length||_.length,x=!1===w,R="object"==typeof w&&Object.keys(w).length,$=e.opts.removeAdditional,A=x||R||$,D=e.opts.ownProperties,k=e.baseId,C=e.schema.required;if(C&&(!e.opts.$data||!C.$data)&&C.length<e.opts.loopRequired)var I=e.util.toHash(C);function notProto(e){return"__proto__"!==e}if(a+="var "+d+" = errors;var "+m+" = true;",D&&(a+=" var "+P+" = undefined;"),A){if(a+=D?" "+P+" = "+P+" || Object.keys("+u+"); for (var "+v+"=0; "+v+"<"+P+".length; "+v+"++) { var "+f+" = "+P+"["+v+"]; ":" for (var "+f+" in "+u+") { ",S){if(a+=" var isAdditional"+s+" = !(false ",b.length)if(b.length>8)a+=" || validate.schema"+n+".hasOwnProperty("+f+") ";else{var O=b;if(O)for(var j=-1,F=O.length-1;j<F;)Y=O[j+=1],a+=" || "+f+" == "+e.util.toQuotedString(Y)+" "}if(_.length){var T=_;if(T)for(var N=-1,L=T.length-1;N<L;)se=T[N+=1],a+=" || "+e.usePattern(se)+".test("+f+") "}a+=" ); if (isAdditional"+s+") { "}if("all"==$)a+=" delete "+u+"["+f+"]; ";else{var q=e.errorPath,z="' + "+f+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,f,e.opts.jsonPointers)),x)if($)a+=" delete "+u+"["+f+"]; ";else{a+=" "+m+" = false; ";var V=l;l=e.errSchemaPath+"/additionalProperties",(re=re||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { additionalProperty: '"+z+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is an invalid additional property":a+="should NOT have additional properties",a+="' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var H=a;a=re.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+H+"]); ":a+=" validate.errors = ["+H+"]; return false; ":a+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=V,c&&(a+=" break; ")}else if(R)if("failing"==$){a+=" var "+d+" = errors;  ";var M=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=w,p.schemaPath=e.schemaPath+".additionalProperties",p.errSchemaPath=e.errSchemaPath+"/additionalProperties",p.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,f,e.opts.jsonPointers);var U=u+"["+f+"]";p.dataPathArr[g]=f;var Z=e.validate(p);p.baseId=k,e.util.varOccurences(Z,y)<2?a+=" "+e.util.varReplace(Z,y,U)+" ":a+=" var "+y+" = "+U+"; "+Z+" ",a+=" if (!"+m+") { errors = "+d+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+u+"["+f+"]; }  ",e.compositeRule=p.compositeRule=M}else{p.schema=w,p.schemaPath=e.schemaPath+".additionalProperties",p.errSchemaPath=e.errSchemaPath+"/additionalProperties",p.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,f,e.opts.jsonPointers);U=u+"["+f+"]";p.dataPathArr[g]=f;Z=e.validate(p);p.baseId=k,e.util.varOccurences(Z,y)<2?a+=" "+e.util.varReplace(Z,y,U)+" ":a+=" var "+y+" = "+U+"; "+Z+" ",c&&(a+=" if (!"+m+") break; ")}e.errorPath=q}S&&(a+=" } "),a+=" }  ",c&&(a+=" if ("+m+") { ",h+="}")}var Q=e.opts.useDefaults&&!e.compositeRule;if(b.length){var K=b;if(K)for(var Y,B=-1,J=K.length-1;B<J;){var G=i[Y=K[B+=1]];if(e.opts.strictKeywords?"object"==typeof G&&Object.keys(G).length>0||!1===G:e.util.schemaHasRules(G,e.RULES.all)){var W=e.util.getProperty(Y),X=(U=u+W,Q&&void 0!==G.default);p.schema=G,p.schemaPath=n+W,p.errSchemaPath=l+"/"+e.util.escapeFragment(Y),p.errorPath=e.util.getPath(e.errorPath,Y,e.opts.jsonPointers),p.dataPathArr[g]=e.util.toQuotedString(Y);Z=e.validate(p);if(p.baseId=k,e.util.varOccurences(Z,y)<2){Z=e.util.varReplace(Z,y,U);var ee=U}else{ee=y;a+=" var "+y+" = "+U+"; "}if(X)a+=" "+Z+" ";else{if(I&&I[Y]){a+=" if ( "+ee+" === undefined ",D&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(Y)+"') "),a+=") { "+m+" = false; ";q=e.errorPath,V=l;var re,te=e.util.escapeQuotes(Y);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(q,Y,e.opts.jsonPointers)),l=e.errSchemaPath+"/required",(re=re||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+te+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+te+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";H=a;a=re.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+H+"]); ":a+=" validate.errors = ["+H+"]; return false; ":a+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=V,e.errorPath=q,a+=" } else { "}else c?(a+=" if ( "+ee+" === undefined ",D&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(Y)+"') "),a+=") { "+m+" = true; } else { "):(a+=" if ("+ee+" !== undefined ",D&&(a+=" &&   Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(Y)+"') "),a+=" ) { ");a+=" "+Z+" } "}}c&&(a+=" if ("+m+") { ",h+="}")}}if(_.length){var ae=_;if(ae)for(var se,oe=-1,ie=ae.length-1;oe<ie;){G=E[se=ae[oe+=1]];if(e.opts.strictKeywords?"object"==typeof G&&Object.keys(G).length>0||!1===G:e.util.schemaHasRules(G,e.RULES.all)){p.schema=G,p.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(se),p.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(se),a+=D?" "+P+" = "+P+" || Object.keys("+u+"); for (var "+v+"=0; "+v+"<"+P+".length; "+v+"++) { var "+f+" = "+P+"["+v+"]; ":" for (var "+f+" in "+u+") { ",a+=" if ("+e.usePattern(se)+".test("+f+")) { ",p.errorPath=e.util.getPathExpr(e.errorPath,f,e.opts.jsonPointers);U=u+"["+f+"]";p.dataPathArr[g]=f;Z=e.validate(p);p.baseId=k,e.util.varOccurences(Z,y)<2?a+=" "+e.util.varReplace(Z,y,U)+" ":a+=" var "+y+" = "+U+"; "+Z+" ",c&&(a+=" if (!"+m+") break; "),a+=" } ",c&&(a+=" else "+m+" = true; "),a+=" }  ",c&&(a+=" if ("+m+") { ",h+="}")}}}return c&&(a+=" "+h+" if ("+d+" == errors) {"),a}},41926:e=>{"use strict";e.exports=function generate_dependencies(e,r,t){var a=" ",s=e.level,o=e.dataLevel,i=e.schema[r],n=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,c=!e.opts.allErrors,u="data"+(o||""),d="errs__"+s,p=e.util.copy(e),h="";p.level++;var m="valid"+p.level,f={},v={},g=e.opts.ownProperties;for(E in i)if("__proto__"!=E){var y=i[E],P=Array.isArray(y)?v:f;P[E]=y}a+="var "+d+" = errors;";var b=e.errorPath;for(var E in a+="var missing"+s+";",v)if((P=v[E]).length){if(a+=" if ( "+u+e.util.getProperty(E)+" !== undefined ",g&&(a+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(E)+"') "),c){a+=" && ( ";var _=P;if(_)for(var w=-1,S=_.length-1;w<S;){k=_[w+=1],w&&(a+=" || "),a+=" ( ( "+(j=u+(O=e.util.getProperty(k)))+" === undefined ",g&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(k)+"') "),a+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?k:O)+") ) "}a+=")) {  ";var x="missing"+s,R="' + "+x+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(b,x,!0):b+" + "+x);var $=$||[];$.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(E)+"', missingProperty: '"+R+"', depsCount: "+P.length+", deps: '"+e.util.escapeQuotes(1==P.length?P[0]:P.join(", "))+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should have ",1==P.length?a+="property "+e.util.escapeQuotes(P[0]):a+="properties "+e.util.escapeQuotes(P.join(", ")),a+=" when property "+e.util.escapeQuotes(E)+" is present' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var A=a;a=$.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+A+"]); ":a+=" validate.errors = ["+A+"]; return false; ":a+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{a+=" ) { ";var D=P;if(D)for(var k,C=-1,I=D.length-1;C<I;){k=D[C+=1];var O=e.util.getProperty(k),j=(R=e.util.escapeQuotes(k),u+O);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(b,k,e.opts.jsonPointers)),a+=" if ( "+j+" === undefined ",g&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(k)+"') "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(E)+"', missingProperty: '"+R+"', depsCount: "+P.length+", deps: '"+e.util.escapeQuotes(1==P.length?P[0]:P.join(", "))+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should have ",1==P.length?a+="property "+e.util.escapeQuotes(P[0]):a+="properties "+e.util.escapeQuotes(P.join(", ")),a+=" when property "+e.util.escapeQuotes(E)+" is present' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}a+=" }   ",c&&(h+="}",a+=" else { ")}e.errorPath=b;var F=p.baseId;for(var E in f){y=f[E];(e.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0||!1===y:e.util.schemaHasRules(y,e.RULES.all))&&(a+=" "+m+" = true; if ( "+u+e.util.getProperty(E)+" !== undefined ",g&&(a+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(E)+"') "),a+=") { ",p.schema=y,p.schemaPath=n+e.util.getProperty(E),p.errSchemaPath=l+"/"+e.util.escapeFragment(E),a+="  "+e.validate(p)+" ",p.baseId=F,a+=" }  ",c&&(a+=" if ("+m+") { ",h+="}"))}return c&&(a+="   "+h+" if ("+d+" == errors) {"),a}},45950:(e,r,t)=>{"use strict";var a=t(96740),s=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,o=[0,31,28,31,30,31,30,31,31,30,31,30,31],i=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,n=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,l=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,c=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,u=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,d=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,p=/^(?:\/(?:[^~/]|~0|~1)*)*$/,h=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,m=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function formats(e){return e="full"==e?"full":"fast",a.copy(formats[e])}function date(e){var r=e.match(s);if(!r)return!1;var t=+r[1],a=+r[2],i=+r[3];return a>=1&&a<=12&&i>=1&&i<=(2==a&&function isLeapYear(e){return e%4==0&&(e%100!=0||e%400==0)}(t)?29:o[a])}function time(e,r){var t=e.match(i);if(!t)return!1;var a=t[1],s=t[2],o=t[3],n=t[5];return(a<=23&&s<=59&&o<=59||23==a&&59==s&&60==o)&&(!r||n)}e.exports=formats,formats.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":c,url:u,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:n,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex,uuid:d,"json-pointer":p,"json-pointer-uri-fragment":h,"relative-json-pointer":m},formats.full={date,time,"date-time":function date_time(e){var r=e.split(f);return 2==r.length&&date(r[0])&&time(r[1],!0)},uri:function uri(e){return v.test(e)&&l.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":c,url:u,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:n,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex,uuid:d,"json-pointer":p,"json-pointer-uri-fragment":h,"relative-json-pointer":m};var f=/t|\s/i;var v=/\/|:/;var g=/[^\\]\\Z/;function regex(e){if(g.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}},46579:function(e,r){!function(e){"use strict";function merge(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length>1){r[0]=r[0].slice(0,-1);for(var a=r.length-1,s=1;s<a;++s)r[s]=r[s].slice(1,-1);return r[a]=r[a].slice(1),r.join("")}return r[0]}function subexp(e){return"(?:"+e+")"}function typeOf(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function toUpperCase(e){return e.toUpperCase()}function toArray(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}function assign(e,r){var t=e;if(r)for(var a in r)t[a]=r[a];return t}function buildExps(e){var r="[A-Za-z]",t="[0-9]",a=merge(t,"[A-Fa-f]"),s=subexp(subexp("%[EFef]"+a+"%"+a+a+"%"+a+a)+"|"+subexp("%[89A-Fa-f]"+a+"%"+a+a)+"|"+subexp("%"+a+a)),o="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",i=merge("[\\:\\/\\?\\#\\[\\]\\@]",o),n=e?"[\\uE000-\\uF8FF]":"[]",l=merge(r,t,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),c=subexp(r+merge(r,t,"[\\+\\-\\.]")+"*"),u=subexp(subexp(s+"|"+merge(l,o,"[\\:]"))+"*"),d=(subexp(subexp("25[0-5]")+"|"+subexp("2[0-4]"+t)+"|"+subexp("1"+t+t)+"|"+subexp("[1-9]"+t)+"|"+t),subexp(subexp("25[0-5]")+"|"+subexp("2[0-4]"+t)+"|"+subexp("1"+t+t)+"|"+subexp("0?[1-9]"+t)+"|0?0?"+t)),p=subexp(d+"\\."+d+"\\."+d+"\\."+d),h=subexp(a+"{1,4}"),m=subexp(subexp(h+"\\:"+h)+"|"+p),f=subexp(subexp(h+"\\:")+"{6}"+m),v=subexp("\\:\\:"+subexp(h+"\\:")+"{5}"+m),g=subexp(subexp(h)+"?\\:\\:"+subexp(h+"\\:")+"{4}"+m),y=subexp(subexp(subexp(h+"\\:")+"{0,1}"+h)+"?\\:\\:"+subexp(h+"\\:")+"{3}"+m),P=subexp(subexp(subexp(h+"\\:")+"{0,2}"+h)+"?\\:\\:"+subexp(h+"\\:")+"{2}"+m),b=subexp(subexp(subexp(h+"\\:")+"{0,3}"+h)+"?\\:\\:"+h+"\\:"+m),E=subexp(subexp(subexp(h+"\\:")+"{0,4}"+h)+"?\\:\\:"+m),_=subexp(subexp(subexp(h+"\\:")+"{0,5}"+h)+"?\\:\\:"+h),w=subexp(subexp(subexp(h+"\\:")+"{0,6}"+h)+"?\\:\\:"),S=subexp([f,v,g,y,P,b,E,_,w].join("|")),x=subexp(subexp(l+"|"+s)+"+"),R=(subexp(S+"\\%25"+x),subexp(S+subexp("\\%25|\\%(?!"+a+"{2})")+x)),$=subexp("[vV]"+a+"+\\."+merge(l,o,"[\\:]")+"+"),A=subexp("\\["+subexp(R+"|"+S+"|"+$)+"\\]"),D=subexp(subexp(s+"|"+merge(l,o))+"*"),k=subexp(A+"|"+p+"(?!"+D+")|"+D),C=subexp(t+"*"),I=subexp(subexp(u+"@")+"?"+k+subexp("\\:"+C)+"?"),O=subexp(s+"|"+merge(l,o,"[\\:\\@]")),j=subexp(O+"*"),F=subexp(O+"+"),T=subexp(subexp(s+"|"+merge(l,o,"[\\@]"))+"+"),N=subexp(subexp("\\/"+j)+"*"),L=subexp("\\/"+subexp(F+N)+"?"),q=subexp(T+N),z=subexp(F+N),V="(?!"+O+")",H=(subexp(N+"|"+L+"|"+q+"|"+z+"|"+V),subexp(subexp(O+"|"+merge("[\\/\\?]",n))+"*")),M=subexp(subexp(O+"|[\\/\\?]")+"*"),U=subexp(subexp("\\/\\/"+I+N)+"|"+L+"|"+z+"|"+V),Z=subexp(c+"\\:"+U+subexp("\\?"+H)+"?"+subexp("\\#"+M)+"?"),Q=subexp(subexp("\\/\\/"+I+N)+"|"+L+"|"+q+"|"+V),K=subexp(Q+subexp("\\?"+H)+"?"+subexp("\\#"+M)+"?");return subexp(Z+"|"+K),subexp(c+"\\:"+U+subexp("\\?"+H)+"?"),subexp(subexp("\\/\\/("+subexp("("+u+")@")+"?("+k+")"+subexp("\\:("+C+")")+"?)")+"?("+N+"|"+L+"|"+z+"|"+V+")"),subexp("\\?("+H+")"),subexp("\\#("+M+")"),subexp(subexp("\\/\\/("+subexp("("+u+")@")+"?("+k+")"+subexp("\\:("+C+")")+"?)")+"?("+N+"|"+L+"|"+q+"|"+V+")"),subexp("\\?("+H+")"),subexp("\\#("+M+")"),subexp(subexp("\\/\\/("+subexp("("+u+")@")+"?("+k+")"+subexp("\\:("+C+")")+"?)")+"?("+N+"|"+L+"|"+z+"|"+V+")"),subexp("\\?("+H+")"),subexp("\\#("+M+")"),subexp("("+u+")@"),subexp("\\:("+C+")"),{NOT_SCHEME:new RegExp(merge("[^]",r,t,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(merge("[^\\%\\:]",l,o),"g"),NOT_HOST:new RegExp(merge("[^\\%\\[\\]\\:]",l,o),"g"),NOT_PATH:new RegExp(merge("[^\\%\\/\\:\\@]",l,o),"g"),NOT_PATH_NOSCHEME:new RegExp(merge("[^\\%\\/\\@]",l,o),"g"),NOT_QUERY:new RegExp(merge("[^\\%]",l,o,"[\\:\\@\\/\\?]",n),"g"),NOT_FRAGMENT:new RegExp(merge("[^\\%]",l,o,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(merge("[^]",l,o),"g"),UNRESERVED:new RegExp(l,"g"),OTHER_CHARS:new RegExp(merge("[^\\%]",l,i),"g"),PCT_ENCODED:new RegExp(s,"g"),IPV4ADDRESS:new RegExp("^("+p+")$"),IPV6ADDRESS:new RegExp("^\\[?("+S+")"+subexp(subexp("\\%25|\\%(?!"+a+"{2})")+"("+x+")")+"?\\]?$")}}var r=buildExps(!1),t=buildExps(!0),a=function(){function sliceIterator(e,r){var t=[],a=!0,s=!1,o=void 0;try{for(var i,n=e[Symbol.iterator]();!(a=(i=n.next()).done)&&(t.push(i.value),!r||t.length!==r);a=!0);}catch(e){s=!0,o=e}finally{try{!a&&n.return&&n.return()}finally{if(s)throw o}}return t}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return sliceIterator(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),toConsumableArray=function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)},s=2147483647,o=36,i=1,n=26,l=38,c=700,u=72,d=128,p="-",h=/^xn--/,m=/[^\0-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,v={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=o-i,y=Math.floor,P=String.fromCharCode;function error$1(e){throw new RangeError(v[e])}function map(e,r){for(var t=[],a=e.length;a--;)t[a]=r(e[a]);return t}function mapDomain(e,r){var t=e.split("@"),a="";return t.length>1&&(a=t[0]+"@",e=t[1]),a+map((e=e.replace(f,".")).split("."),r).join(".")}function ucs2decode(e){for(var r=[],t=0,a=e.length;t<a;){var s=e.charCodeAt(t++);if(s>=55296&&s<=56319&&t<a){var o=e.charCodeAt(t++);56320==(64512&o)?r.push(((1023&s)<<10)+(1023&o)+65536):(r.push(s),t--)}else r.push(s)}return r}var b=function basicToDigit(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:o},E=function digitToBasic(e,r){return e+22+75*(e<26)-((0!=r)<<5)},_=function adapt(e,r,t){var a=0;for(e=t?y(e/c):e>>1,e+=y(e/r);e>g*n>>1;a+=o)e=y(e/g);return y(a+(g+1)*e/(e+l))},w=function decode(e){var r=[],t=e.length,a=0,l=d,c=u,h=e.lastIndexOf(p);h<0&&(h=0);for(var m=0;m<h;++m)e.charCodeAt(m)>=128&&error$1("not-basic"),r.push(e.charCodeAt(m));for(var f=h>0?h+1:0;f<t;){for(var v=a,g=1,P=o;;P+=o){f>=t&&error$1("invalid-input");var E=b(e.charCodeAt(f++));(E>=o||E>y((s-a)/g))&&error$1("overflow"),a+=E*g;var w=P<=c?i:P>=c+n?n:P-c;if(E<w)break;var S=o-w;g>y(s/S)&&error$1("overflow"),g*=S}var x=r.length+1;c=_(a-v,x,0==v),y(a/x)>s-l&&error$1("overflow"),l+=y(a/x),a%=x,r.splice(a++,0,l)}return String.fromCodePoint.apply(String,r)},S=function encode(e){var r=[],t=(e=ucs2decode(e)).length,a=d,l=0,c=u,h=!0,m=!1,f=void 0;try{for(var v,g=e[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var b=v.value;b<128&&r.push(P(b))}}catch(e){m=!0,f=e}finally{try{!h&&g.return&&g.return()}finally{if(m)throw f}}var w=r.length,S=w;for(w&&r.push(p);S<t;){var x=s,R=!0,$=!1,A=void 0;try{for(var D,k=e[Symbol.iterator]();!(R=(D=k.next()).done);R=!0){var C=D.value;C>=a&&C<x&&(x=C)}}catch(e){$=!0,A=e}finally{try{!R&&k.return&&k.return()}finally{if($)throw A}}var I=S+1;x-a>y((s-l)/I)&&error$1("overflow"),l+=(x-a)*I,a=x;var O=!0,j=!1,F=void 0;try{for(var T,N=e[Symbol.iterator]();!(O=(T=N.next()).done);O=!0){var L=T.value;if(L<a&&++l>s&&error$1("overflow"),L==a){for(var q=l,z=o;;z+=o){var V=z<=c?i:z>=c+n?n:z-c;if(q<V)break;var H=q-V,M=o-V;r.push(P(E(V+H%M,0))),q=y(H/M)}r.push(P(E(q,0))),c=_(l,I,S==w),l=0,++S}}}catch(e){j=!0,F=e}finally{try{!O&&N.return&&N.return()}finally{if(j)throw F}}++l,++a}return r.join("")},x=function toUnicode(e){return mapDomain(e,(function(e){return h.test(e)?w(e.slice(4).toLowerCase()):e}))},R=function toASCII(e){return mapDomain(e,(function(e){return m.test(e)?"xn--"+S(e):e}))},$={version:"2.1.0",ucs2:{decode:ucs2decode,encode:function ucs2encode(e){return String.fromCodePoint.apply(String,toConsumableArray(e))}},decode:w,encode:S,toASCII:R,toUnicode:x},A={};function pctEncChar(e){var r=e.charCodeAt(0);return r<16?"%0"+r.toString(16).toUpperCase():r<128?"%"+r.toString(16).toUpperCase():r<2048?"%"+(r>>6|192).toString(16).toUpperCase()+"%"+(63&r|128).toString(16).toUpperCase():"%"+(r>>12|224).toString(16).toUpperCase()+"%"+(r>>6&63|128).toString(16).toUpperCase()+"%"+(63&r|128).toString(16).toUpperCase()}function pctDecChars(e){for(var r="",t=0,a=e.length;t<a;){var s=parseInt(e.substr(t+1,2),16);if(s<128)r+=String.fromCharCode(s),t+=3;else if(s>=194&&s<224){if(a-t>=6){var o=parseInt(e.substr(t+4,2),16);r+=String.fromCharCode((31&s)<<6|63&o)}else r+=e.substr(t,6);t+=6}else if(s>=224){if(a-t>=9){var i=parseInt(e.substr(t+4,2),16),n=parseInt(e.substr(t+7,2),16);r+=String.fromCharCode((15&s)<<12|(63&i)<<6|63&n)}else r+=e.substr(t,9);t+=9}else r+=e.substr(t,3),t+=3}return r}function _normalizeComponentEncoding(e,r){function decodeUnreserved(e){var t=pctDecChars(e);return t.match(r.UNRESERVED)?t:e}return e.scheme&&(e.scheme=String(e.scheme).replace(r.PCT_ENCODED,decodeUnreserved).toLowerCase().replace(r.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(r.PCT_ENCODED,decodeUnreserved).replace(r.NOT_USERINFO,pctEncChar).replace(r.PCT_ENCODED,toUpperCase)),void 0!==e.host&&(e.host=String(e.host).replace(r.PCT_ENCODED,decodeUnreserved).toLowerCase().replace(r.NOT_HOST,pctEncChar).replace(r.PCT_ENCODED,toUpperCase)),void 0!==e.path&&(e.path=String(e.path).replace(r.PCT_ENCODED,decodeUnreserved).replace(e.scheme?r.NOT_PATH:r.NOT_PATH_NOSCHEME,pctEncChar).replace(r.PCT_ENCODED,toUpperCase)),void 0!==e.query&&(e.query=String(e.query).replace(r.PCT_ENCODED,decodeUnreserved).replace(r.NOT_QUERY,pctEncChar).replace(r.PCT_ENCODED,toUpperCase)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(r.PCT_ENCODED,decodeUnreserved).replace(r.NOT_FRAGMENT,pctEncChar).replace(r.PCT_ENCODED,toUpperCase)),e}function _stripLeadingZeros(e){return e.replace(/^0*(.*)/,"$1")||"0"}function _normalizeIPv4(e,r){var t=e.match(r.IPV4ADDRESS)||[],s=a(t,2)[1];return s?s.split(".").map(_stripLeadingZeros).join("."):e}function _normalizeIPv6(e,r){var t=e.match(r.IPV6ADDRESS)||[],s=a(t,3),o=s[1],i=s[2];if(o){for(var n=o.toLowerCase().split("::").reverse(),l=a(n,2),c=l[0],u=l[1],d=u?u.split(":").map(_stripLeadingZeros):[],p=c.split(":").map(_stripLeadingZeros),h=r.IPV4ADDRESS.test(p[p.length-1]),m=h?7:8,f=p.length-m,v=Array(m),g=0;g<m;++g)v[g]=d[g]||p[f+g]||"";h&&(v[m-1]=_normalizeIPv4(v[m-1],r));var y=v.reduce((function(e,r,t){if(!r||"0"===r){var a=e[e.length-1];a&&a.index+a.length===t?a.length++:e.push({index:t,length:1})}return e}),[]).sort((function(e,r){return r.length-e.length}))[0],P=void 0;if(y&&y.length>1){var b=v.slice(0,y.index),E=v.slice(y.index+y.length);P=b.join(":")+"::"+E.join(":")}else P=v.join(":");return i&&(P+="%"+i),P}return e}var D=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,k=void 0==="".match(/(){0}/)[1];function parse(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s={},o=!1!==a.iri?t:r;"suffix"===a.reference&&(e=(a.scheme?a.scheme+":":"")+"//"+e);var i=e.match(D);if(i){k?(s.scheme=i[1],s.userinfo=i[3],s.host=i[4],s.port=parseInt(i[5],10),s.path=i[6]||"",s.query=i[7],s.fragment=i[8],isNaN(s.port)&&(s.port=i[5])):(s.scheme=i[1]||void 0,s.userinfo=-1!==e.indexOf("@")?i[3]:void 0,s.host=-1!==e.indexOf("//")?i[4]:void 0,s.port=parseInt(i[5],10),s.path=i[6]||"",s.query=-1!==e.indexOf("?")?i[7]:void 0,s.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(s.port)&&(s.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),s.host&&(s.host=_normalizeIPv6(_normalizeIPv4(s.host,o),o)),void 0!==s.scheme||void 0!==s.userinfo||void 0!==s.host||void 0!==s.port||s.path||void 0!==s.query?void 0===s.scheme?s.reference="relative":void 0===s.fragment?s.reference="absolute":s.reference="uri":s.reference="same-document",a.reference&&"suffix"!==a.reference&&a.reference!==s.reference&&(s.error=s.error||"URI is not a "+a.reference+" reference.");var n=A[(a.scheme||s.scheme||"").toLowerCase()];if(a.unicodeSupport||n&&n.unicodeSupport)_normalizeComponentEncoding(s,o);else{if(s.host&&(a.domainHost||n&&n.domainHost))try{s.host=$.toASCII(s.host.replace(o.PCT_ENCODED,pctDecChars).toLowerCase())}catch(e){s.error=s.error||"Host's domain name can not be converted to ASCII via punycode: "+e}_normalizeComponentEncoding(s,r)}n&&n.parse&&n.parse(s,a)}else s.error=s.error||"URI can not be parsed.";return s}function _recomposeAuthority(e,a){var s=!1!==a.iri?t:r,o=[];return void 0!==e.userinfo&&(o.push(e.userinfo),o.push("@")),void 0!==e.host&&o.push(_normalizeIPv6(_normalizeIPv4(String(e.host),s),s).replace(s.IPV6ADDRESS,(function(e,r,t){return"["+r+(t?"%25"+t:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(o.push(":"),o.push(String(e.port))),o.length?o.join(""):void 0}var C=/^\.\.?\//,I=/^\/\.(\/|$)/,O=/^\/\.\.(\/|$)/,j=/^\/?(?:.|\n)*?(?=\/|$)/;function removeDotSegments(e){for(var r=[];e.length;)if(e.match(C))e=e.replace(C,"");else if(e.match(I))e=e.replace(I,"/");else if(e.match(O))e=e.replace(O,"/"),r.pop();else if("."===e||".."===e)e="";else{var t=e.match(j);if(!t)throw new Error("Unexpected dot segment condition");var a=t[0];e=e.slice(a.length),r.push(a)}return r.join("")}function serialize(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=a.iri?t:r,o=[],i=A[(a.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,a),e.host)if(s.IPV6ADDRESS.test(e.host));else if(a.domainHost||i&&i.domainHost)try{e.host=a.iri?$.toUnicode(e.host):$.toASCII(e.host.replace(s.PCT_ENCODED,pctDecChars).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(a.iri?"Unicode":"ASCII")+" via punycode: "+r}_normalizeComponentEncoding(e,s),"suffix"!==a.reference&&e.scheme&&(o.push(e.scheme),o.push(":"));var n=_recomposeAuthority(e,a);if(void 0!==n&&("suffix"!==a.reference&&o.push("//"),o.push(n),e.path&&"/"!==e.path.charAt(0)&&o.push("/")),void 0!==e.path){var l=e.path;a.absolutePath||i&&i.absolutePath||(l=removeDotSegments(l)),void 0===n&&(l=l.replace(/^\/\//,"/%2F")),o.push(l)}return void 0!==e.query&&(o.push("?"),o.push(e.query)),void 0!==e.fragment&&(o.push("#"),o.push(e.fragment)),o.join("")}function resolveComponents(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={};return arguments[3]||(e=parse(serialize(e,t),t),r=parse(serialize(r,t),t)),!(t=t||{}).tolerant&&r.scheme?(a.scheme=r.scheme,a.userinfo=r.userinfo,a.host=r.host,a.port=r.port,a.path=removeDotSegments(r.path||""),a.query=r.query):(void 0!==r.userinfo||void 0!==r.host||void 0!==r.port?(a.userinfo=r.userinfo,a.host=r.host,a.port=r.port,a.path=removeDotSegments(r.path||""),a.query=r.query):(r.path?("/"===r.path.charAt(0)?a.path=removeDotSegments(r.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?a.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+r.path:a.path=r.path:a.path="/"+r.path,a.path=removeDotSegments(a.path)),a.query=r.query):(a.path=e.path,void 0!==r.query?a.query=r.query:a.query=e.query),a.userinfo=e.userinfo,a.host=e.host,a.port=e.port),a.scheme=e.scheme),a.fragment=r.fragment,a}function resolve(e,r,t){var a=assign({scheme:"null"},t);return serialize(resolveComponents(parse(e,a),parse(r,a),a,!0),a)}function normalize(e,r){return"string"==typeof e?e=serialize(parse(e,r),r):"object"===typeOf(e)&&(e=parse(serialize(e,r),r)),e}function equal(e,r,t){return"string"==typeof e?e=serialize(parse(e,t),t):"object"===typeOf(e)&&(e=serialize(e,t)),"string"==typeof r?r=serialize(parse(r,t),t):"object"===typeOf(r)&&(r=serialize(r,t)),e===r}function escapeComponent(e,a){return e&&e.toString().replace(a&&a.iri?t.ESCAPE:r.ESCAPE,pctEncChar)}function unescapeComponent(e,a){return e&&e.toString().replace(a&&a.iri?t.PCT_ENCODED:r.PCT_ENCODED,pctDecChars)}var F={scheme:"http",domainHost:!0,parse:function parse(e,r){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function serialize(e,r){var t="https"===String(e.scheme).toLowerCase();return e.port!==(t?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},T={scheme:"https",domainHost:F.domainHost,parse:F.parse,serialize:F.serialize};function isSecure(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var N={scheme:"ws",domainHost:!0,parse:function parse(e,r){var t=e;return t.secure=isSecure(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t},serialize:function serialize(e,r){if(e.port!==(isSecure(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var t=e.resourceName.split("?"),s=a(t,2),o=s[0],i=s[1];e.path=o&&"/"!==o?o:void 0,e.query=i,e.resourceName=void 0}return e.fragment=void 0,e}},L={scheme:"wss",domainHost:N.domainHost,parse:N.parse,serialize:N.serialize},q={},z="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",V="[0-9A-Fa-f]",H=subexp(subexp("%[EFef]"+V+"%"+V+V+"%"+V+V)+"|"+subexp("%[89A-Fa-f]"+V+"%"+V+V)+"|"+subexp("%"+V+V)),M="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",U=merge("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),Z="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Q=new RegExp(z,"g"),K=new RegExp(H,"g"),Y=new RegExp(merge("[^]",M,"[\\.]",'[\\"]',U),"g"),B=new RegExp(merge("[^]",z,Z),"g"),J=B;function decodeUnreserved(e){var r=pctDecChars(e);return r.match(Q)?r:e}var G={scheme:"mailto",parse:function parse$$1(e,r){var t=e,a=t.to=t.path?t.path.split(","):[];if(t.path=void 0,t.query){for(var s=!1,o={},i=t.query.split("&"),n=0,l=i.length;n<l;++n){var c=i[n].split("=");switch(c[0]){case"to":for(var u=c[1].split(","),d=0,p=u.length;d<p;++d)a.push(u[d]);break;case"subject":t.subject=unescapeComponent(c[1],r);break;case"body":t.body=unescapeComponent(c[1],r);break;default:s=!0,o[unescapeComponent(c[0],r)]=unescapeComponent(c[1],r)}}s&&(t.headers=o)}t.query=void 0;for(var h=0,m=a.length;h<m;++h){var f=a[h].split("@");if(f[0]=unescapeComponent(f[0]),r.unicodeSupport)f[1]=unescapeComponent(f[1],r).toLowerCase();else try{f[1]=$.toASCII(unescapeComponent(f[1],r).toLowerCase())}catch(e){t.error=t.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}a[h]=f.join("@")}return t},serialize:function serialize$$1(e,r){var t=e,a=toArray(e.to);if(a){for(var s=0,o=a.length;s<o;++s){var i=String(a[s]),n=i.lastIndexOf("@"),l=i.slice(0,n).replace(K,decodeUnreserved).replace(K,toUpperCase).replace(Y,pctEncChar),c=i.slice(n+1);try{c=r.iri?$.toUnicode(c):$.toASCII(unescapeComponent(c,r).toLowerCase())}catch(e){t.error=t.error||"Email address's domain name can not be converted to "+(r.iri?"Unicode":"ASCII")+" via punycode: "+e}a[s]=l+"@"+c}t.path=a.join(",")}var u=e.headers=e.headers||{};e.subject&&(u.subject=e.subject),e.body&&(u.body=e.body);var d=[];for(var p in u)u[p]!==q[p]&&d.push(p.replace(K,decodeUnreserved).replace(K,toUpperCase).replace(B,pctEncChar)+"="+u[p].replace(K,decodeUnreserved).replace(K,toUpperCase).replace(J,pctEncChar));return d.length&&(t.query=d.join("&")),t}},W=/^([^\:]+)\:(.*)/,X={scheme:"urn",parse:function parse$$1(e,r){var t=e.path&&e.path.match(W),a=e;if(t){var s=r.scheme||a.scheme||"urn",o=t[1].toLowerCase(),i=t[2],n=s+":"+(r.nid||o),l=A[n];a.nid=o,a.nss=i,a.path=void 0,l&&(a=l.parse(a,r))}else a.error=a.error||"URN can not be parsed.";return a},serialize:function serialize$$1(e,r){var t=r.scheme||e.scheme||"urn",a=e.nid,s=t+":"+(r.nid||a),o=A[s];o&&(e=o.serialize(e,r));var i=e,n=e.nss;return i.path=(a||r.nid)+":"+n,i}},ee=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,re={scheme:"urn:uuid",parse:function parse(e,r){var t=e;return t.uuid=t.nss,t.nss=void 0,r.tolerant||t.uuid&&t.uuid.match(ee)||(t.error=t.error||"UUID is not valid."),t},serialize:function serialize(e,r){var t=e;return t.nss=(e.uuid||"").toLowerCase(),t}};A[F.scheme]=F,A[T.scheme]=T,A[N.scheme]=N,A[L.scheme]=L,A[G.scheme]=G,A[X.scheme]=X,A[re.scheme]=re,e.SCHEMES=A,e.pctEncChar=pctEncChar,e.pctDecChars=pctDecChars,e.parse=parse,e.removeDotSegments=removeDotSegments,e.serialize=serialize,e.resolveComponents=resolveComponents,e.resolve=resolve,e.normalize=normalize,e.equal=equal,e.escapeComponent=escapeComponent,e.unescapeComponent=unescapeComponent,Object.defineProperty(e,"__esModule",{value:!0})}(r)},47850:e=>{"use strict";e.exports=function generate_required(e,r,t){var a=" ",s=e.level,o=e.dataLevel,i=e.schema[r],n=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,c=!e.opts.allErrors,u="data"+(o||""),d="valid"+s,p=e.opts.$data&&i&&i.$data;p&&(a+=" var schema"+s+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ");var h="schema"+s;if(!p)if(i.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var m=[],f=i;if(f)for(var v,g=-1,y=f.length-1;g<y;){v=f[g+=1];var P=e.schema.properties[v];P&&(e.opts.strictKeywords?"object"==typeof P&&Object.keys(P).length>0||!1===P:e.util.schemaHasRules(P,e.RULES.all))||(m[m.length]=v)}}else m=i;if(p||m.length){var b=e.errorPath,E=p||m.length>=e.opts.loopRequired,_=e.opts.ownProperties;if(c)if(a+=" var missing"+s+"; ",E){p||(a+=" var "+h+" = validate.schema"+n+"; ");var w="' + "+(D="schema"+s+"["+(R="i"+s)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,D,e.opts.jsonPointers)),a+=" var "+d+" = true; ",p&&(a+=" if (schema"+s+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+s+")) "+d+" = false; else {"),a+=" for (var "+R+" = 0; "+R+" < "+h+".length; "+R+"++) { "+d+" = "+u+"["+h+"["+R+"]] !== undefined ",_&&(a+=" &&   Object.prototype.hasOwnProperty.call("+u+", "+h+"["+R+"]) "),a+="; if (!"+d+") break; } ",p&&(a+="  }  "),a+="  if (!"+d+") {   ",(A=A||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+w+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+w+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var S=a;a=A.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+S+"]); ":a+=" validate.errors = ["+S+"]; return false; ":a+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { "}else{a+=" if ( ";var x=m;if(x)for(var R=-1,$=x.length-1;R<$;){C=x[R+=1],R&&(a+=" || "),a+=" ( ( "+(F=u+(j=e.util.getProperty(C)))+" === undefined ",_&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(C)+"') "),a+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?C:j)+") ) "}a+=") {  ";var A;w="' + "+(D="missing"+s)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(b,D,!0):b+" + "+D),(A=A||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+w+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+w+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";S=a;a=A.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+S+"]); ":a+=" validate.errors = ["+S+"]; return false; ":a+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { "}else if(E){p||(a+=" var "+h+" = validate.schema"+n+"; ");var D;w="' + "+(D="schema"+s+"["+(R="i"+s)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,D,e.opts.jsonPointers)),p&&(a+=" if ("+h+" && !Array.isArray("+h+")) {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+w+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+w+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+h+" !== undefined) { "),a+=" for (var "+R+" = 0; "+R+" < "+h+".length; "+R+"++) { if ("+u+"["+h+"["+R+"]] === undefined ",_&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", "+h+"["+R+"]) "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+w+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+w+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",p&&(a+="  }  ")}else{var k=m;if(k)for(var C,I=-1,O=k.length-1;I<O;){C=k[I+=1];var j=e.util.getProperty(C),F=(w=e.util.escapeQuotes(C),u+j);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(b,C,e.opts.jsonPointers)),a+=" if ( "+F+" === undefined ",_&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(C)+"') "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+w+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+w+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=b}else c&&(a+=" if (true) {");return a}},47935:e=>{"use strict";e.exports=function generate__limitLength(e,r,t){var a,s=" ",o=e.level,i=e.dataLevel,n=e.schema[r],l=e.schemaPath+e.util.getProperty(r),c=e.errSchemaPath+"/"+r,u=!e.opts.allErrors,d="data"+(i||""),p=e.opts.$data&&n&&n.$data;if(p?(s+=" var schema"+o+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",a="schema"+o):a=n,!p&&"number"!=typeof n)throw new Error(r+" must be number");var h="maxLength"==r?">":"<";s+="if ( ",p&&(s+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),!1===e.opts.unicode?s+=" "+d+".length ":s+=" ucs2length("+d+") ",s+=" "+h+" "+a+") { ";var m=r,f=f||[];f.push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(m||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(s+=" , message: 'should NOT be ",s+="maxLength"==r?"longer":"shorter",s+=" than ",s+=p?"' + "+a+" + '":""+n,s+=" characters' "),e.opts.verbose&&(s+=" , schema:  ",s+=p?"validate.schema"+l:""+n,s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var v=s;return s=f.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+v+"]); ":s+=" validate.errors = ["+v+"]; return false; ":s+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",u&&(s+=" else { "),s}},48914:e=>{"use strict";e.exports=function generate_not(e,r,t){var a=" ",s=e.level,o=e.dataLevel,i=e.schema[r],n=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,c=!e.opts.allErrors,u="data"+(o||""),d="errs__"+s,p=e.util.copy(e);p.level++;var h="valid"+p.level;if(e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0||!1===i:e.util.schemaHasRules(i,e.RULES.all)){p.schema=i,p.schemaPath=n,p.errSchemaPath=l,a+=" var "+d+" = errors;  ";var m,f=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.createErrors=!1,p.opts.allErrors&&(m=p.opts.allErrors,p.opts.allErrors=!1),a+=" "+e.validate(p)+" ",p.createErrors=!0,m&&(p.opts.allErrors=m),e.compositeRule=p.compositeRule=f,a+=" if ("+h+") {   ";var v=v||[];v.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be valid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var g=a;a=v.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+g+"]); ":a+=" validate.errors = ["+g+"]; return false; ":a+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(a+=" } ")}else a+="  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be valid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(a+=" if (false) { ");return a}},51298:e=>{"use strict";e.exports=function generate__limitProperties(e,r,t){var a,s=" ",o=e.level,i=e.dataLevel,n=e.schema[r],l=e.schemaPath+e.util.getProperty(r),c=e.errSchemaPath+"/"+r,u=!e.opts.allErrors,d="data"+(i||""),p=e.opts.$data&&n&&n.$data;if(p?(s+=" var schema"+o+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",a="schema"+o):a=n,!p&&"number"!=typeof n)throw new Error(r+" must be number");s+="if ( ",p&&(s+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),s+=" Object.keys("+d+").length "+("maxProperties"==r?">":"<")+" "+a+") { ";var h=r,m=m||[];m.push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(h||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(s+=" , message: 'should NOT have ",s+="maxProperties"==r?"more":"fewer",s+=" than ",s+=p?"' + "+a+" + '":""+n,s+=" properties' "),e.opts.verbose&&(s+=" , schema:  ",s+=p?"validate.schema"+l:""+n,s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var f=s;return s=m.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+f+"]); ":s+=" validate.errors = ["+f+"]; return false; ":s+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",u&&(s+=" else { "),s}},51873:e=>{"use strict";e.exports=function generate_validate(e,r,t){var a="",s=!0===e.schema.$async,o=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),i=e.self._getId(e.schema);if(e.opts.strictKeywords){var n=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(n){var l="unknown keyword: "+n;if("log"!==e.opts.strictKeywords)throw new Error(l);e.logger.warn(l)}}if(e.isTop&&(a+=" var validate = ",s&&(e.async=!0,a+="async "),a+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",i&&(e.opts.sourceCode||e.opts.processCode)&&(a+=" /*# sourceURL="+i+" */ ")),"boolean"==typeof e.schema||!o&&!e.schema.$ref){r="false schema";var c=e.level,u=e.dataLevel,d=e.schema[r],p=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,m=!e.opts.allErrors,f="data"+(u||""),v="valid"+c;if(!1===e.schema){e.isTop?m=!0:a+=" var "+v+" = false; ",(J=J||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'boolean schema is false' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),a+=" } "):a+=" {} ";var g=a;a=J.pop(),!e.compositeRule&&m?e.async?a+=" throw new ValidationError(["+g+"]); ":a+=" validate.errors = ["+g+"]; return false; ":a+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?a+=s?" return data; ":" validate.errors = null; return true; ":a+=" var "+v+" = true; ";return e.isTop&&(a+=" }; return validate; "),a}if(e.isTop){var y=e.isTop;c=e.level=0,u=e.dataLevel=0,f="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var P="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(P);e.logger.warn(P)}a+=" var vErrors = null; ",a+=" var errors = 0;     ",a+=" if (rootData === undefined) rootData = data; "}else{c=e.level,f="data"+((u=e.dataLevel)||"");if(i&&(e.baseId=e.resolve.url(e.baseId,i)),s&&!e.async)throw new Error("async schema in sync schema");a+=" var errs_"+c+" = errors;"}v="valid"+c,m=!e.opts.allErrors;var b="",E="",_=e.schema.type,w=Array.isArray(_);if(_&&e.opts.nullable&&!0===e.schema.nullable&&(w?-1==_.indexOf("null")&&(_=_.concat("null")):"null"!=_&&(_=[_,"null"],w=!0)),w&&1==_.length&&(_=_[0],w=!1),e.schema.$ref&&o){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(o=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(a+=" "+e.RULES.all.$comment.code(e,"$comment")),_){if(e.opts.coerceTypes)var S=e.util.coerceToTypes(e.opts.coerceTypes,_);var x=e.RULES.types[_];if(S||w||!0===x||x&&!$shouldUseGroup(x)){p=e.schemaPath+".type",h=e.errSchemaPath+"/type",p=e.schemaPath+".type",h=e.errSchemaPath+"/type";var R=w?"checkDataTypes":"checkDataType";if(a+=" if ("+e.util[R](_,f,e.opts.strictNumbers,!0)+") { ",S){var $="dataType"+c,A="coerced"+c;a+=" var "+$+" = typeof "+f+"; var "+A+" = undefined; ","array"==e.opts.coerceTypes&&(a+=" if ("+$+" == 'object' && Array.isArray("+f+") && "+f+".length == 1) { "+f+" = "+f+"[0]; "+$+" = typeof "+f+"; if ("+e.util.checkDataType(e.schema.type,f,e.opts.strictNumbers)+") "+A+" = "+f+"; } "),a+=" if ("+A+" !== undefined) ; ";var D=S;if(D)for(var k,C=-1,I=D.length-1;C<I;)"string"==(k=D[C+=1])?a+=" else if ("+$+" == 'number' || "+$+" == 'boolean') "+A+" = '' + "+f+"; else if ("+f+" === null) "+A+" = ''; ":"number"==k||"integer"==k?(a+=" else if ("+$+" == 'boolean' || "+f+" === null || ("+$+" == 'string' && "+f+" && "+f+" == +"+f+" ","integer"==k&&(a+=" && !("+f+" % 1)"),a+=")) "+A+" = +"+f+"; "):"boolean"==k?a+=" else if ("+f+" === 'false' || "+f+" === 0 || "+f+" === null) "+A+" = false; else if ("+f+" === 'true' || "+f+" === 1) "+A+" = true; ":"null"==k?a+=" else if ("+f+" === '' || "+f+" === 0 || "+f+" === false) "+A+" = null; ":"array"==e.opts.coerceTypes&&"array"==k&&(a+=" else if ("+$+" == 'string' || "+$+" == 'number' || "+$+" == 'boolean' || "+f+" == null) "+A+" = ["+f+"]; ");a+=" else {   ",(J=J||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",a+=w?""+_.join(","):""+_,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=w?""+_.join(","):""+_,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),a+=" } "):a+=" {} ";g=a;a=J.pop(),!e.compositeRule&&m?e.async?a+=" throw new ValidationError(["+g+"]); ":a+=" validate.errors = ["+g+"]; return false; ":a+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } if ("+A+" !== undefined) {  ";var O=u?"data"+(u-1||""):"parentData";a+=" "+f+" = "+A+"; ",u||(a+="if ("+O+" !== undefined)"),a+=" "+O+"["+(u?e.dataPathArr[u]:"parentDataProperty")+"] = "+A+"; } "}else{(J=J||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",a+=w?""+_.join(","):""+_,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=w?""+_.join(","):""+_,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),a+=" } "):a+=" {} ";g=a;a=J.pop(),!e.compositeRule&&m?e.async?a+=" throw new ValidationError(["+g+"]); ":a+=" validate.errors = ["+g+"]; return false; ":a+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}a+=" } "}}if(e.schema.$ref&&!o)a+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",m&&(a+=" } if (errors === ",a+=y?"0":"errs_"+c,a+=") { ",E+="}");else{var j=e.RULES;if(j)for(var F=-1,T=j.length-1;F<T;)if($shouldUseGroup(x=j[F+=1])){if(x.type&&(a+=" if ("+e.util.checkDataType(x.type,f,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==x.type&&e.schema.properties){d=e.schema.properties;var N=Object.keys(d);if(N)for(var L,q=-1,z=N.length-1;q<z;){if(void 0!==(M=d[L=N[q+=1]]).default){var V=f+e.util.getProperty(L);if(e.compositeRule){if(e.opts.strictDefaults){P="default is ignored for: "+V;if("log"!==e.opts.strictDefaults)throw new Error(P);e.logger.warn(P)}}else a+=" if ("+V+" === undefined ","empty"==e.opts.useDefaults&&(a+=" || "+V+" === null || "+V+" === '' "),a+=" ) "+V+" = ","shared"==e.opts.useDefaults?a+=" "+e.useDefault(M.default)+" ":a+=" "+JSON.stringify(M.default)+" ",a+="; "}}}else if("array"==x.type&&Array.isArray(e.schema.items)){var H=e.schema.items;if(H){C=-1;for(var M,U=H.length-1;C<U;)if(void 0!==(M=H[C+=1]).default){V=f+"["+C+"]";if(e.compositeRule){if(e.opts.strictDefaults){P="default is ignored for: "+V;if("log"!==e.opts.strictDefaults)throw new Error(P);e.logger.warn(P)}}else a+=" if ("+V+" === undefined ","empty"==e.opts.useDefaults&&(a+=" || "+V+" === null || "+V+" === '' "),a+=" ) "+V+" = ","shared"==e.opts.useDefaults?a+=" "+e.useDefault(M.default)+" ":a+=" "+JSON.stringify(M.default)+" ",a+="; "}}}var Z=x.rules;if(Z)for(var Q,K=-1,Y=Z.length-1;K<Y;)if($shouldUseRule(Q=Z[K+=1])){var B=Q.code(e,Q.keyword,x.type);B&&(a+=" "+B+" ",m&&(b+="}"))}if(m&&(a+=" "+b+" ",b=""),x.type&&(a+=" } ",_&&_===x.type&&!S)){a+=" else { ";var J;p=e.schemaPath+".type",h=e.errSchemaPath+"/type";(J=J||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",a+=w?""+_.join(","):""+_,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=w?""+_.join(","):""+_,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),a+=" } "):a+=" {} ";g=a;a=J.pop(),!e.compositeRule&&m?e.async?a+=" throw new ValidationError(["+g+"]); ":a+=" validate.errors = ["+g+"]; return false; ":a+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } "}m&&(a+=" if (errors === ",a+=y?"0":"errs_"+c,a+=") { ",E+="}")}}function $shouldUseGroup(e){for(var r=e.rules,t=0;t<r.length;t++)if($shouldUseRule(r[t]))return!0}function $shouldUseRule(r){return void 0!==e.schema[r.keyword]||r.implements&&function $ruleImplementsSomeKeyword(r){for(var t=r.implements,a=0;a<t.length;a++)if(void 0!==e.schema[t[a]])return!0}(r)}return m&&(a+=" "+E+" "),y?(s?(a+=" if (errors === 0) return data;           ",a+=" else throw new ValidationError(vErrors); "):(a+=" validate.errors = vErrors; ",a+=" return errors === 0;       "),a+=" }; return validate;"):a+=" var "+v+" = errors === errs_"+c+";",a}},52119:e=>{"use strict";e.exports=function generate__limitItems(e,r,t){var a,s=" ",o=e.level,i=e.dataLevel,n=e.schema[r],l=e.schemaPath+e.util.getProperty(r),c=e.errSchemaPath+"/"+r,u=!e.opts.allErrors,d="data"+(i||""),p=e.opts.$data&&n&&n.$data;if(p?(s+=" var schema"+o+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",a="schema"+o):a=n,!p&&"number"!=typeof n)throw new Error(r+" must be number");s+="if ( ",p&&(s+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),s+=" "+d+".length "+("maxItems"==r?">":"<")+" "+a+") { ";var h=r,m=m||[];m.push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(h||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(s+=" , message: 'should NOT have ",s+="maxItems"==r?"more":"fewer",s+=" than ",s+=p?"' + "+a+" + '":""+n,s+=" items' "),e.opts.verbose&&(s+=" , schema:  ",s+=p?"validate.schema"+l:""+n,s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var f=s;return s=m.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+f+"]); ":s+=" validate.errors = ["+f+"]; return false; ":s+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",u&&(s+=" else { "),s}},53420:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},54371:e=>{"use strict";e.exports=function generate_items(e,r,t){var a=" ",s=e.level,o=e.dataLevel,i=e.schema[r],n=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,c=!e.opts.allErrors,u="data"+(o||""),d="valid"+s,p="errs__"+s,h=e.util.copy(e),m="";h.level++;var f="valid"+h.level,v="i"+s,g=h.dataLevel=e.dataLevel+1,y="data"+g,P=e.baseId;if(a+="var "+p+" = errors;var "+d+";",Array.isArray(i)){var b=e.schema.additionalItems;if(!1===b){a+=" "+d+" = "+u+".length <= "+i.length+"; ";var E=l;l=e.errSchemaPath+"/additionalItems",a+="  if (!"+d+") {   ";var _=_||[];_.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+i.length+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have more than "+i.length+" items' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var w=a;a=_.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+w+"]); ":a+=" validate.errors = ["+w+"]; return false; ":a+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",l=E,c&&(m+="}",a+=" else { ")}var S=i;if(S)for(var x,R=-1,$=S.length-1;R<$;)if(x=S[R+=1],e.opts.strictKeywords?"object"==typeof x&&Object.keys(x).length>0||!1===x:e.util.schemaHasRules(x,e.RULES.all)){a+=" "+f+" = true; if ("+u+".length > "+R+") { ";var A=u+"["+R+"]";h.schema=x,h.schemaPath=n+"["+R+"]",h.errSchemaPath=l+"/"+R,h.errorPath=e.util.getPathExpr(e.errorPath,R,e.opts.jsonPointers,!0),h.dataPathArr[g]=R;var D=e.validate(h);h.baseId=P,e.util.varOccurences(D,y)<2?a+=" "+e.util.varReplace(D,y,A)+" ":a+=" var "+y+" = "+A+"; "+D+" ",a+=" }  ",c&&(a+=" if ("+f+") { ",m+="}")}if("object"==typeof b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0||!1===b:e.util.schemaHasRules(b,e.RULES.all))){h.schema=b,h.schemaPath=e.schemaPath+".additionalItems",h.errSchemaPath=e.errSchemaPath+"/additionalItems",a+=" "+f+" = true; if ("+u+".length > "+i.length+") {  for (var "+v+" = "+i.length+"; "+v+" < "+u+".length; "+v+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);A=u+"["+v+"]";h.dataPathArr[g]=v;D=e.validate(h);h.baseId=P,e.util.varOccurences(D,y)<2?a+=" "+e.util.varReplace(D,y,A)+" ":a+=" var "+y+" = "+A+"; "+D+" ",c&&(a+=" if (!"+f+") break; "),a+=" } }  ",c&&(a+=" if ("+f+") { ",m+="}")}}else if(e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0||!1===i:e.util.schemaHasRules(i,e.RULES.all)){h.schema=i,h.schemaPath=n,h.errSchemaPath=l,a+="  for (var "+v+" = 0; "+v+" < "+u+".length; "+v+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);A=u+"["+v+"]";h.dataPathArr[g]=v;D=e.validate(h);h.baseId=P,e.util.varOccurences(D,y)<2?a+=" "+e.util.varReplace(D,y,A)+" ":a+=" var "+y+" = "+A+"; "+D+" ",c&&(a+=" if (!"+f+") break; "),a+=" }"}return c&&(a+=" "+m+" if ("+p+" == errors) {"),a}},58019:e=>{"use strict";e.exports=function generate_format(e,r,t){var a=" ",s=e.level,o=e.dataLevel,i=e.schema[r],n=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,c=!e.opts.allErrors,u="data"+(o||"");if(!1===e.opts.format)return c&&(a+=" if (true) { "),a;var d,p=e.opts.$data&&i&&i.$data;p?(a+=" var schema"+s+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",d="schema"+s):d=i;var h=e.opts.unknownFormats,m=Array.isArray(h);if(p){a+=" var "+(f="format"+s)+" = formats["+d+"]; var "+(v="isObject"+s)+" = typeof "+f+" == 'object' && !("+f+" instanceof RegExp) && "+f+".validate; var "+(g="formatType"+s)+" = "+v+" && "+f+".type || 'string'; if ("+v+") { ",e.async&&(a+=" var async"+s+" = "+f+".async; "),a+=" "+f+" = "+f+".validate; } if (  ",p&&(a+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),a+=" (","ignore"!=h&&(a+=" ("+d+" && !"+f+" ",m&&(a+=" && self._opts.unknownFormats.indexOf("+d+") == -1 "),a+=") || "),a+=" ("+f+" && "+g+" == '"+t+"' && !(typeof "+f+" == 'function' ? ",e.async?a+=" (async"+s+" ? await "+f+"("+u+") : "+f+"("+u+")) ":a+=" "+f+"("+u+") ",a+=" : "+f+".test("+u+"))))) {"}else{var f;if(!(f=e.formats[i])){if("ignore"==h)return e.logger.warn('unknown format "'+i+'" ignored in schema at path "'+e.errSchemaPath+'"'),c&&(a+=" if (true) { "),a;if(m&&h.indexOf(i)>=0)return c&&(a+=" if (true) { "),a;throw new Error('unknown format "'+i+'" is used in schema at path "'+e.errSchemaPath+'"')}var v,g=(v="object"==typeof f&&!(f instanceof RegExp)&&f.validate)&&f.type||"string";if(v){var y=!0===f.async;f=f.validate}if(g!=t)return c&&(a+=" if (true) { "),a;if(y){if(!e.async)throw new Error("async format in sync schema");a+=" if (!(await "+(P="formats"+e.util.getProperty(i)+".validate")+"("+u+"))) { "}else{a+=" if (! ";var P="formats"+e.util.getProperty(i);v&&(P+=".validate"),a+="function"==typeof f?" "+P+"("+u+") ":" "+P+".test("+u+") ",a+=") { "}}var b=b||[];b.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { format:  ",a+=p?""+d:""+e.util.toQuotedString(i),a+="  } ",!1!==e.opts.messages&&(a+=" , message: 'should match format \"",a+=p?"' + "+d+" + '":""+e.util.escapeQuotes(i),a+="\"' "),e.opts.verbose&&(a+=" , schema:  ",a+=p?"validate.schema"+n:""+e.util.toQuotedString(i),a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var E=a;return a=b.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+E+"]); ":a+=" validate.errors = ["+E+"]; return false; ":a+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",c&&(a+=" else { "),a}},64551:(e,r,t)=>{"use strict";var a=t(91030);function MissingRefError(e,r,t){this.message=t||MissingRefError.message(e,r),this.missingRef=a.url(e,r),this.missingSchema=a.normalizeId(a.fullPath(this.missingRef))}function errorSubclass(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:errorSubclass((function ValidationError(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:errorSubclass(MissingRefError)},MissingRefError.message=function(e,r){return"can't resolve reference "+r+" from id "+e}},72492:e=>{"use strict";e.exports=function(e,r){r||(r={}),"function"==typeof r&&(r={cmp:r});var t,a="boolean"==typeof r.cycles&&r.cycles,s=r.cmp&&(t=r.cmp,function(e){return function(r,a){var s={key:r,value:e[r]},o={key:a,value:e[a]};return t(s,o)}}),o=[];return function stringify(e){if(e&&e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!=typeof e)return JSON.stringify(e);var r,t;if(Array.isArray(e)){for(t="[",r=0;r<e.length;r++)r&&(t+=","),t+=stringify(e[r])||"null";return t+"]"}if(null===e)return"null";if(-1!==o.indexOf(e)){if(a)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var i=o.push(e)-1,n=Object.keys(e).sort(s&&s(e));for(t="",r=0;r<n.length;r++){var l=n[r],c=stringify(e[l]);c&&(t&&(t+=","),t+=JSON.stringify(l)+":"+c)}return o.splice(i,1),"{"+t+"}"}}(e)}},73635:(e,r,t)=>{"use strict";var a=/^[a-z_$][a-z0-9_$-]*$/i,s=t(7992),o=t(22897);e.exports={add:function addKeyword(e,r){var t=this.RULES;if(t.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!a.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(r){this.validateKeyword(r,!0);var o=r.type;if(Array.isArray(o))for(var i=0;i<o.length;i++)_addRule(e,o[i],r);else _addRule(e,o,r);var n=r.metaSchema;n&&(r.$data&&this._opts.$data&&(n={anyOf:[n,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),r.validateSchema=this.compile(n,!0))}function _addRule(e,r,a){for(var o,i=0;i<t.length;i++){var n=t[i];if(n.type==r){o=n;break}}o||(o={type:r,rules:[]},t.push(o));var l={keyword:e,definition:a,custom:!0,code:s,implements:a.implements};o.rules.push(l),t.custom[e]=l}return t.keywords[e]=t.all[e]=!0,this},get:function getKeyword(e){var r=this.RULES.custom[e];return r?r.definition:this.RULES.keywords[e]||!1},remove:function removeKeyword(e){var r=this.RULES;delete r.keywords[e],delete r.all[e],delete r.custom[e];for(var t=0;t<r.length;t++)for(var a=r[t].rules,s=0;s<a.length;s++)if(a[s].keyword==e){a.splice(s,1);break}return this},validate:function validateKeyword(e,r){validateKeyword.errors=null;var t=this._validateKeyword=this._validateKeyword||this.compile(o,!0);if(t(e))return!0;if(validateKeyword.errors=t.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(t.errors));return!1}}},73845:(e,r,t)=>{"use strict";var a=t(27403),s=t(96740).toHash;e.exports=function rules(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],r=["type","$comment"];return e.all=s(r),e.types=s(["number","integer","string","array","object","boolean","null"]),e.forEach((function(t){t.rules=t.rules.map((function(t){var s;if("object"==typeof t){var o=Object.keys(t)[0];s=t[o],t=o,s.forEach((function(t){r.push(t),e.all[t]=!0}))}return r.push(t),e.all[t]={keyword:t,code:a[t],implements:s}})),e.all.$comment={keyword:"$comment",code:a.$comment},t.type&&(e.types[t.type]=t)})),e.keywords=s(r.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}},74667:e=>{"use strict";e.exports=function generate__limit(e,r,t){var a,s=" ",o=e.level,i=e.dataLevel,n=e.schema[r],l=e.schemaPath+e.util.getProperty(r),c=e.errSchemaPath+"/"+r,u=!e.opts.allErrors,d="data"+(i||""),p=e.opts.$data&&n&&n.$data;p?(s+=" var schema"+o+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",a="schema"+o):a=n;var h="maximum"==r,m=h?"exclusiveMaximum":"exclusiveMinimum",f=e.schema[m],v=e.opts.$data&&f&&f.$data,g=h?"<":">",y=h?">":"<",P=void 0;if(!p&&"number"!=typeof n&&void 0!==n)throw new Error(r+" must be number");if(!v&&void 0!==f&&"number"!=typeof f&&"boolean"!=typeof f)throw new Error(m+" must be number or boolean");if(v){var b=e.util.getData(f.$data,i,e.dataPathArr),E="exclusive"+o,_="exclType"+o,w="exclIsNumber"+o,S="' + "+($="op"+o)+" + '";s+=" var schemaExcl"+o+" = "+b+"; ",s+=" var "+E+"; var "+_+" = typeof "+(b="schemaExcl"+o)+"; if ("+_+" != 'boolean' && "+_+" != 'undefined' && "+_+" != 'number') { ";var x;P=m;(x=x||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(P||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(s+=" , message: '"+m+" should be boolean' "),e.opts.verbose&&(s+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var R=s;s=x.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+R+"]); ":s+=" validate.errors = ["+R+"]; return false; ":s+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } else if ( ",p&&(s+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),s+=" "+_+" == 'number' ? ( ("+E+" = "+a+" === undefined || "+b+" "+g+"= "+a+") ? "+d+" "+y+"= "+b+" : "+d+" "+y+" "+a+" ) : ( ("+E+" = "+b+" === true) ? "+d+" "+y+"= "+a+" : "+d+" "+y+" "+a+" ) || "+d+" !== "+d+") { var op"+o+" = "+E+" ? '"+g+"' : '"+g+"='; ",void 0===n&&(P=m,c=e.errSchemaPath+"/"+m,a=b,p=v)}else{S=g;if((w="number"==typeof f)&&p){var $="'"+S+"'";s+=" if ( ",p&&(s+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),s+=" ( "+a+" === undefined || "+f+" "+g+"= "+a+" ? "+d+" "+y+"= "+f+" : "+d+" "+y+" "+a+" ) || "+d+" !== "+d+") { "}else{w&&void 0===n?(E=!0,P=m,c=e.errSchemaPath+"/"+m,a=f,y+="="):(w&&(a=Math[h?"min":"max"](f,n)),f===(!w||a)?(E=!0,P=m,c=e.errSchemaPath+"/"+m,y+="="):(E=!1,S+="="));$="'"+S+"'";s+=" if ( ",p&&(s+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),s+=" "+d+" "+y+" "+a+" || "+d+" !== "+d+") { "}}P=P||r,(x=x||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(P||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+$+", limit: "+a+", exclusive: "+E+" } ",!1!==e.opts.messages&&(s+=" , message: 'should be "+S+" ",s+=p?"' + "+a:a+"'"),e.opts.verbose&&(s+=" , schema:  ",s+=p?"validate.schema"+l:""+n,s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";R=s;return s=x.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+R+"]); ":s+=" validate.errors = ["+R+"]; return false; ":s+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } ",u&&(s+=" else { "),s}},80353:e=>{"use strict";e.exports=function generate_allOf(e,r,t){var a=" ",s=e.schema[r],o=e.schemaPath+e.util.getProperty(r),i=e.errSchemaPath+"/"+r,n=!e.opts.allErrors,l=e.util.copy(e),c="";l.level++;var u="valid"+l.level,d=l.baseId,p=!0,h=s;if(h)for(var m,f=-1,v=h.length-1;f<v;)m=h[f+=1],(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0||!1===m:e.util.schemaHasRules(m,e.RULES.all))&&(p=!1,l.schema=m,l.schemaPath=o+"["+f+"]",l.errSchemaPath=i+"/"+f,a+="  "+e.validate(l)+" ",l.baseId=d,n&&(a+=" if ("+u+") { ",c+="}"));return n&&(a+=p?" if (true) { ":" "+c.slice(0,-1)+" "),a}},80598:e=>{"use strict";e.exports=function generate_enum(e,r,t){var a=" ",s=e.level,o=e.dataLevel,i=e.schema[r],n=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,c=!e.opts.allErrors,u="data"+(o||""),d="valid"+s,p=e.opts.$data&&i&&i.$data;p&&(a+=" var schema"+s+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ");var h="i"+s,m="schema"+s;p||(a+=" var "+m+" = validate.schema"+n+";"),a+="var "+d+";",p&&(a+=" if (schema"+s+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+s+")) "+d+" = false; else {"),a+=d+" = false;for (var "+h+"=0; "+h+"<"+m+".length; "+h+"++) if (equal("+u+", "+m+"["+h+"])) { "+d+" = true; break; }",p&&(a+="  }  "),a+=" if (!"+d+") {   ";var f=f||[];f.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValues: schema"+s+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var v=a;return a=f.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+v+"]); ":a+=" validate.errors = ["+v+"]; return false; ":a+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" }",c&&(a+=" else { "),a}},84609:e=>{"use strict";e.exports=function generate_ref(e,r,t){var a,s,o=" ",i=e.level,n=e.dataLevel,l=e.schema[r],c=e.errSchemaPath+"/"+r,u=!e.opts.allErrors,d="data"+(n||""),p="valid"+i;if("#"==l||"#/"==l)e.isRoot?(a=e.async,s="validate"):(a=!0===e.root.schema.$async,s="root.refVal[0]");else{var h=e.resolveRef(e.baseId,l,e.isRoot);if(void 0===h){var m=e.MissingRefError.message(e.baseId,l);if("fail"==e.opts.missingRefs){e.logger.error(m),(y=y||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { ref: '"+e.util.escapeQuotes(l)+"' } ",!1!==e.opts.messages&&(o+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(l)+"' "),e.opts.verbose&&(o+=" , schema: "+e.util.toQuotedString(l)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var f=o;o=y.pop(),!e.compositeRule&&u?e.async?o+=" throw new ValidationError(["+f+"]); ":o+=" validate.errors = ["+f+"]; return false; ":o+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(o+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,l,m);e.logger.warn(m),u&&(o+=" if (true) { ")}}else if(h.inline){var v=e.util.copy(e);v.level++;var g="valid"+v.level;v.schema=h.schema,v.schemaPath="",v.errSchemaPath=l,o+=" "+e.validate(v).replace(/validate\.schema/g,h.code)+" ",u&&(o+=" if ("+g+") { ")}else a=!0===h.$async||e.async&&!1!==h.$async,s=h.code}if(s){var y;(y=y||[]).push(o),o="",e.opts.passContext?o+=" "+s+".call(this, ":o+=" "+s+"( ",o+=" "+d+", (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var P=o+=" , "+(n?"data"+(n-1||""):"parentData")+" , "+(n?e.dataPathArr[n]:"parentDataProperty")+", rootData)  ";if(o=y.pop(),a){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(o+=" var "+p+"; "),o+=" try { await "+P+"; ",u&&(o+=" "+p+" = true; "),o+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(o+=" "+p+" = false; "),o+=" } ",u&&(o+=" if ("+p+") { ")}else o+=" if (!"+P+") { if (vErrors === null) vErrors = "+s+".errors; else vErrors = vErrors.concat("+s+".errors); errors = vErrors.length; } ",u&&(o+=" else { ")}return o}},85898:e=>{"use strict";e.exports=function generate_uniqueItems(e,r,t){var a,s=" ",o=e.level,i=e.dataLevel,n=e.schema[r],l=e.schemaPath+e.util.getProperty(r),c=e.errSchemaPath+"/"+r,u=!e.opts.allErrors,d="data"+(i||""),p="valid"+o,h=e.opts.$data&&n&&n.$data;if(h?(s+=" var schema"+o+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",a="schema"+o):a=n,(n||h)&&!1!==e.opts.uniqueItems){h&&(s+=" var "+p+"; if ("+a+" === false || "+a+" === undefined) "+p+" = true; else if (typeof "+a+" != 'boolean') "+p+" = false; else { "),s+=" var i = "+d+".length , "+p+" = true , j; if (i > 1) { ";var m=e.schema.items&&e.schema.items.type,f=Array.isArray(m);if(!m||"object"==m||"array"==m||f&&(m.indexOf("object")>=0||m.indexOf("array")>=0))s+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+d+"[i], "+d+"[j])) { "+p+" = false; break outer; } } } ";else{s+=" var itemIndices = {}, item; for (;i--;) { var item = "+d+"[i]; ";var v="checkDataType"+(f?"s":"");s+=" if ("+e.util[v](m,"item",e.opts.strictNumbers,!0)+") continue; ",f&&(s+=" if (typeof item == 'string') item = '\"' + item; "),s+=" if (typeof itemIndices[item] == 'number') { "+p+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}s+=" } ",h&&(s+="  }  "),s+=" if (!"+p+") {   ";var g=g||[];g.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(s+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(s+=" , schema:  ",s+=h?"validate.schema"+l:""+n,s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var y=s;s=g.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+y+"]); ":s+=" validate.errors = ["+y+"]; return false; ":s+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } ",u&&(s+=" else { ")}else u&&(s+=" if (true) { ");return s}},88532:e=>{"use strict";e.exports=function generate_if(e,r,t){var a=" ",s=e.level,o=e.dataLevel,i=e.schema[r],n=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,c=!e.opts.allErrors,u="data"+(o||""),d="valid"+s,p="errs__"+s,h=e.util.copy(e);h.level++;var m="valid"+h.level,f=e.schema.then,v=e.schema.else,g=void 0!==f&&(e.opts.strictKeywords?"object"==typeof f&&Object.keys(f).length>0||!1===f:e.util.schemaHasRules(f,e.RULES.all)),y=void 0!==v&&(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0||!1===v:e.util.schemaHasRules(v,e.RULES.all)),P=h.baseId;if(g||y){var b;h.createErrors=!1,h.schema=i,h.schemaPath=n,h.errSchemaPath=l,a+=" var "+p+" = errors; var "+d+" = true;  ";var E=e.compositeRule;e.compositeRule=h.compositeRule=!0,a+="  "+e.validate(h)+" ",h.baseId=P,h.createErrors=!0,a+="  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; }  ",e.compositeRule=h.compositeRule=E,g?(a+=" if ("+m+") {  ",h.schema=e.schema.then,h.schemaPath=e.schemaPath+".then",h.errSchemaPath=e.errSchemaPath+"/then",a+="  "+e.validate(h)+" ",h.baseId=P,a+=" "+d+" = "+m+"; ",g&&y?a+=" var "+(b="ifClause"+s)+" = 'then'; ":b="'then'",a+=" } ",y&&(a+=" else { ")):a+=" if (!"+m+") { ",y&&(h.schema=e.schema.else,h.schemaPath=e.schemaPath+".else",h.errSchemaPath=e.errSchemaPath+"/else",a+="  "+e.validate(h)+" ",h.baseId=P,a+=" "+d+" = "+m+"; ",g&&y?a+=" var "+(b="ifClause"+s)+" = 'else'; ":b="'else'",a+=" } "),a+=" if (!"+d+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { failingKeyword: "+b+" } ",!1!==e.opts.messages&&(a+=" , message: 'should match \"' + "+b+" + '\" schema' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+=" }   ",c&&(a+=" else { ")}else c&&(a+=" if (true) { ");return a}},91030:(e,r,t)=>{"use strict";var a=t(46579),s=t(32017),o=t(96740),i=t(2585),n=t(7106);function resolve(e,r,t){var a=this._refs[t];if("string"==typeof a){if(!this._refs[a])return resolve.call(this,e,r,a);a=this._refs[a]}if((a=a||this._schemas[t])instanceof i)return inlineRef(a.schema,this._opts.inlineRefs)?a.schema:a.validate||this._compile(a);var s,o,n,l=resolveSchema.call(this,r,t);return l&&(s=l.schema,r=l.root,n=l.baseId),s instanceof i?o=s.validate||e.call(this,s.schema,r,void 0,n):void 0!==s&&(o=inlineRef(s,this._opts.inlineRefs)?s:e.call(this,s,r,void 0,n)),o}function resolveSchema(e,r){var t=a.parse(r),s=_getFullPath(t),o=getFullPath(this._getId(e.schema));if(0===Object.keys(e.schema).length||s!==o){var n=normalizeId(s),l=this._refs[n];if("string"==typeof l)return resolveRecursive.call(this,e,l,t);if(l instanceof i)l.validate||this._compile(l),e=l;else{if(!((l=this._schemas[n])instanceof i))return;if(l.validate||this._compile(l),n==normalizeId(r))return{schema:l,root:e,baseId:o};e=l}if(!e.schema)return;o=getFullPath(this._getId(e.schema))}return getJsonPointer.call(this,t,o,e.schema,e)}function resolveRecursive(e,r,t){var a=resolveSchema.call(this,e,r);if(a){var s=a.schema,o=a.baseId;e=a.root;var i=this._getId(s);return i&&(o=resolveUrl(o,i)),getJsonPointer.call(this,t,o,s,e)}}e.exports=resolve,resolve.normalizeId=normalizeId,resolve.fullPath=getFullPath,resolve.url=resolveUrl,resolve.ids=function resolveIds(e){var r=normalizeId(this._getId(e)),t={"":r},i={"":getFullPath(r,!1)},l={},c=this;return n(e,{allKeys:!0},(function(e,r,n,u,d,p,h){if(""!==r){var m=c._getId(e),f=t[u],v=i[u]+"/"+d;if(void 0!==h&&(v+="/"+("number"==typeof h?h:o.escapeFragment(h))),"string"==typeof m){m=f=normalizeId(f?a.resolve(f,m):m);var g=c._refs[m];if("string"==typeof g&&(g=c._refs[g]),g&&g.schema){if(!s(e,g.schema))throw new Error('id "'+m+'" resolves to more than one schema')}else if(m!=normalizeId(v))if("#"==m[0]){if(l[m]&&!s(e,l[m]))throw new Error('id "'+m+'" resolves to more than one schema');l[m]=e}else c._refs[m]=v}t[r]=f,i[r]=v}})),l},resolve.inlineRef=inlineRef,resolve.schema=resolveSchema;var l=o.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function getJsonPointer(e,r,t,a){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var s=e.fragment.split("/"),i=1;i<s.length;i++){var n=s[i];if(n){if(void 0===(t=t[n=o.unescapeFragment(n)]))break;var c;if(!l[n]&&((c=this._getId(t))&&(r=resolveUrl(r,c)),t.$ref)){var u=resolveUrl(r,t.$ref),d=resolveSchema.call(this,a,u);d&&(t=d.schema,a=d.root,r=d.baseId)}}}return void 0!==t&&t!==a.schema?{schema:t,root:a,baseId:r}:void 0}}var c=o.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function inlineRef(e,r){return!1!==r&&(void 0===r||!0===r?checkNoRef(e):r?countKeys(e)<=r:void 0)}function checkNoRef(e){var r;if(Array.isArray(e)){for(var t=0;t<e.length;t++)if("object"==typeof(r=e[t])&&!checkNoRef(r))return!1}else for(var a in e){if("$ref"==a)return!1;if("object"==typeof(r=e[a])&&!checkNoRef(r))return!1}return!0}function countKeys(e){var r,t=0;if(Array.isArray(e)){for(var a=0;a<e.length;a++)if("object"==typeof(r=e[a])&&(t+=countKeys(r)),t==1/0)return 1/0}else for(var s in e){if("$ref"==s)return 1/0;if(c[s])t++;else if("object"==typeof(r=e[s])&&(t+=countKeys(r)+1),t==1/0)return 1/0}return t}function getFullPath(e,r){return!1!==r&&(e=normalizeId(e)),_getFullPath(a.parse(e))}function _getFullPath(e){return a.serialize(e).split("#")[0]+"#"}var u=/#\/?$/;function normalizeId(e){return e?e.replace(u,""):""}function resolveUrl(e,r){return r=normalizeId(r),a.resolve(e,r)}},94006:e=>{"use strict";var r=e.exports=function Cache(){this._cache={}};r.prototype.put=function Cache_put(e,r){this._cache[e]=r},r.prototype.get=function Cache_get(e){return this._cache[e]},r.prototype.del=function Cache_del(e){delete this._cache[e]},r.prototype.clear=function Cache_clear(){this._cache={}}},95326:e=>{"use strict";e.exports=function generate_oneOf(e,r,t){var a=" ",s=e.level,o=e.dataLevel,i=e.schema[r],n=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,c=!e.opts.allErrors,u="data"+(o||""),d="valid"+s,p="errs__"+s,h=e.util.copy(e),m="";h.level++;var f="valid"+h.level,v=h.baseId,g="prevValid"+s,y="passingSchemas"+s;a+="var "+p+" = errors , "+g+" = false , "+d+" = false , "+y+" = null; ";var P=e.compositeRule;e.compositeRule=h.compositeRule=!0;var b=i;if(b)for(var E,_=-1,w=b.length-1;_<w;)E=b[_+=1],(e.opts.strictKeywords?"object"==typeof E&&Object.keys(E).length>0||!1===E:e.util.schemaHasRules(E,e.RULES.all))?(h.schema=E,h.schemaPath=n+"["+_+"]",h.errSchemaPath=l+"/"+_,a+="  "+e.validate(h)+" ",h.baseId=v):a+=" var "+f+" = true; ",_&&(a+=" if ("+f+" && "+g+") { "+d+" = false; "+y+" = ["+y+", "+_+"]; } else { ",m+="}"),a+=" if ("+f+") { "+d+" = "+g+" = true; "+y+" = "+_+"; }";return e.compositeRule=h.compositeRule=P,a+=m+"if (!"+d+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { passingSchemas: "+y+" } ",!1!==e.opts.messages&&(a+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+="} else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; }",e.opts.allErrors&&(a+=" } "),a}},96740:(e,r,t)=>{"use strict";function checkDataType(e,r,t,a){var s=a?" !== ":" === ",o=a?" || ":" && ",i=a?"!":"",n=a?"":"!";switch(e){case"null":return r+s+"null";case"array":return i+"Array.isArray("+r+")";case"object":return"("+i+r+o+"typeof "+r+s+'"object"'+o+n+"Array.isArray("+r+"))";case"integer":return"(typeof "+r+s+'"number"'+o+n+"("+r+" % 1)"+o+r+s+r+(t?o+i+"isFinite("+r+")":"")+")";case"number":return"(typeof "+r+s+'"'+e+'"'+(t?o+i+"isFinite("+r+")":"")+")";default:return"typeof "+r+s+'"'+e+'"'}}e.exports={copy:function copy(e,r){for(var t in r=r||{},e)r[t]=e[t];return r},checkDataType,checkDataTypes:function checkDataTypes(e,r,t){if(1===e.length)return checkDataType(e[0],r,t,!0);var a="",s=toHash(e);for(var o in s.array&&s.object&&(a=s.null?"(":"(!"+r+" || ",a+="typeof "+r+' !== "object")',delete s.null,delete s.array,delete s.object),s.number&&delete s.integer,s)a+=(a?" && ":"")+checkDataType(o,r,t,!0);return a},coerceToTypes:function coerceToTypes(e,r){if(Array.isArray(r)){for(var t=[],s=0;s<r.length;s++){var o=r[s];(a[o]||"array"===e&&"array"===o)&&(t[t.length]=o)}if(t.length)return t}else{if(a[r])return[r];if("array"===e&&"array"===r)return["array"]}},toHash,getProperty,escapeQuotes,equal:t(32017),ucs2length:t(29853),varOccurences:function varOccurences(e,r){r+="[^0-9]";var t=e.match(new RegExp(r,"g"));return t?t.length:0},varReplace:function varReplace(e,r,t){return r+="([^0-9])",t=t.replace(/\$/g,"$$$$"),e.replace(new RegExp(r,"g"),t+"$1")},schemaHasRules:function schemaHasRules(e,r){if("boolean"==typeof e)return!e;for(var t in e)if(r[t])return!0},schemaHasRulesExcept:function schemaHasRulesExcept(e,r,t){if("boolean"==typeof e)return!e&&"not"!=t;for(var a in e)if(a!=t&&r[a])return!0},schemaUnknownRules:function schemaUnknownRules(e,r){if("boolean"==typeof e)return;for(var t in e)if(!r[t])return t},toQuotedString,getPathExpr:function getPathExpr(e,r,t,a){return joinPaths(e,t?"'/' + "+r+(a?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):a?"'[' + "+r+" + ']'":"'[\\'' + "+r+" + '\\']'")},getPath:function getPath(e,r,t){var a=toQuotedString(t?"/"+escapeJsonPointer(r):getProperty(r));return joinPaths(e,a)},getData:function getData(e,r,t){var a,s,o,l;if(""===e)return"rootData";if("/"==e[0]){if(!i.test(e))throw new Error("Invalid JSON-pointer: "+e);s=e,o="rootData"}else{if(!(l=e.match(n)))throw new Error("Invalid JSON-pointer: "+e);if(a=+l[1],"#"==(s=l[2])){if(a>=r)throw new Error("Cannot access property/index "+a+" levels up, current level is "+r);return t[r-a]}if(a>r)throw new Error("Cannot access data "+a+" levels up, current level is "+r);if(o="data"+(r-a||""),!s)return o}for(var c=o,u=s.split("/"),d=0;d<u.length;d++){var p=u[d];p&&(c+=" && "+(o+=getProperty(unescapeJsonPointer(p))))}return c},unescapeFragment:function unescapeFragment(e){return unescapeJsonPointer(decodeURIComponent(e))},unescapeJsonPointer,escapeFragment:function escapeFragment(e){return encodeURIComponent(escapeJsonPointer(e))},escapeJsonPointer};var a=toHash(["string","number","integer","boolean","null"]);function toHash(e){for(var r={},t=0;t<e.length;t++)r[e[t]]=!0;return r}var s=/^[a-z$_][a-z$_0-9]*$/i,o=/'|\\/g;function getProperty(e){return"number"==typeof e?"["+e+"]":s.test(e)?"."+e:"['"+escapeQuotes(e)+"']"}function escapeQuotes(e){return e.replace(o,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function toQuotedString(e){return"'"+escapeQuotes(e)+"'"}var i=/^\/(?:[^~]|~0|~1)*$/,n=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function joinPaths(e,r){return'""'==e?r:(e+" + "+r).replace(/([^\\])' \+ '/g,"$1")}function escapeJsonPointer(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function unescapeJsonPointer(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},99294:e=>{"use strict";e.exports=function generate_multipleOf(e,r,t){var a,s=" ",o=e.level,i=e.dataLevel,n=e.schema[r],l=e.schemaPath+e.util.getProperty(r),c=e.errSchemaPath+"/"+r,u=!e.opts.allErrors,d="data"+(i||""),p=e.opts.$data&&n&&n.$data;if(p?(s+=" var schema"+o+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",a="schema"+o):a=n,!p&&"number"!=typeof n)throw new Error(r+" must be number");s+="var division"+o+";if (",p&&(s+=" "+a+" !== undefined && ( typeof "+a+" != 'number' || "),s+=" (division"+o+" = "+d+" / "+a+", ",e.opts.multipleOfPrecision?s+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":s+=" division"+o+" !== parseInt(division"+o+") ",s+=" ) ",p&&(s+="  )  "),s+=" ) {   ";var h=h||[];h.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { multipleOf: "+a+" } ",!1!==e.opts.messages&&(s+=" , message: 'should be multiple of ",s+=p?"' + "+a:a+"'"),e.opts.verbose&&(s+=" , schema:  ",s+=p?"validate.schema"+l:""+n,s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var m=s;return s=h.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+m+"]); ":s+=" validate.errors = ["+m+"]; return false; ":s+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",u&&(s+=" else { "),s}}};