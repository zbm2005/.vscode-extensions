exports.id=530,exports.ids=[530],exports.modules={146:(e,t,r)=>{"use strict";const{stringify:s}=r(11144),{outputFileSync:o}=r(80322);e.exports=function outputJsonSync(e,t,r){const n=s(t,r);o(e,n,r)}},3719:(e,t,r)=>{"use strict";r(91060);const{Duplex:s}=r(2203);function emitClose(e){e.emit("close")}function duplexOnEnd(){!this.destroyed&&this._writableState.finished&&this.destroy()}function duplexOnError(e){this.removeListener("error",duplexOnError),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function createWebSocketStream(e,t){let r=!0;const o=new s({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function message(t,r){const s=!r&&o._readableState.objectMode?t.toString():t;o.push(s)||e.pause()})),e.once("error",(function error(e){o.destroyed||(r=!1,o.destroy(e))})),e.once("close",(function close(){o.destroyed||o.push(null)})),o._destroy=function(t,s){if(e.readyState===e.CLOSED)return s(t),void process.nextTick(emitClose,o);let n=!1;e.once("error",(function error(e){n=!0,s(e)})),e.once("close",(function close(){n||s(t),process.nextTick(emitClose,o)})),r&&e.terminate()},o._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),o._readableState.endEmitted&&o.destroy()):(e._socket.once("finish",(function finish(){t()})),e.close())):e.once("open",(function open(){o._final(t)}))},o._read=function(){e.isPaused&&e.resume()},o._write=function(t,r,s){e.readyState!==e.CONNECTING?e.send(t,s):e.once("open",(function open(){o._write(t,r,s)}))},o.on("end",duplexOnEnd),o.on("error",duplexOnError),o}},4759:e=>{"use strict";const t=Symbol("kDone"),r=Symbol("kRun");e.exports=class Limiter{constructor(e){this[t]=()=>{this.pending--,this[r]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[r]()}[r](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[t])}}}},5476:(e,t,r)=>{"use strict";const s=r(41236).fromCallback,o=r(16928),n=r(63735),i=r(98808),a=r(12426).pathExists,{areIdentical:c}=r(22976);e.exports={createLink:s((function createLink(e,t,r){function makeLink(e,t){n.link(e,t,(e=>{if(e)return r(e);r(null)}))}n.lstat(t,((s,l)=>{n.lstat(e,((s,n)=>{if(s)return s.message=s.message.replace("lstat","ensureLink"),r(s);if(l&&c(n,l))return r(null);const u=o.dirname(t);a(u,((s,o)=>s?r(s):o?makeLink(e,t):void i.mkdirs(u,(s=>{if(s)return r(s);makeLink(e,t)}))))}))}))})),createLinkSync:function createLinkSync(e,t){let r;try{r=n.lstatSync(t)}catch{}try{const t=n.lstatSync(e);if(r&&c(t,r))return}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const s=o.dirname(t);return n.existsSync(s)||i.mkdirsSync(s),n.linkSync(e,t)}}},8442:(e,t,r)=>{"use strict";const s=r(63735),o=r(16928),n=r(64285).copySync,i=r(12512).removeSync,a=r(98808).mkdirpSync,c=r(22976);function rename(e,t,r){try{s.renameSync(e,t)}catch(s){if("EXDEV"!==s.code)throw s;return function moveAcrossDevice(e,t,r){const s={overwrite:r,errorOnExist:!0};return n(e,t,s),i(e)}(e,t,r)}}e.exports=function moveSync(e,t,r){const n=(r=r||{}).overwrite||r.clobber||!1,{srcStat:l,isChangingCase:u=!1}=c.checkPathsSync(e,t,"move",r);return c.checkParentPathsSync(e,l,t,"move"),function isParentRoot(e){const t=o.dirname(e);return o.parse(t).root===t}(t)||a(o.dirname(t)),function doRename(e,t,r,o){if(o)return rename(e,t,r);if(r)return i(t),rename(e,t,r);if(s.existsSync(t))throw new Error("dest already exists.");return rename(e,t,r)}(e,t,n,u)}},12426:(e,t,r)=>{"use strict";const s=r(41236).fromPromise,o=r(43439);e.exports={pathExists:s((function pathExists(e){return o.access(e).then((()=>!0)).catch((()=>!1))})),pathExistsSync:o.existsSync}},12512:(e,t,r)=>{"use strict";const s=r(63735),o=r(41236).fromCallback,n=r(91559);e.exports={remove:o((function remove(e,t){if(s.rm)return s.rm(e,{recursive:!0,force:!0},t);n(e,t)})),removeSync:function removeSync(e){if(s.rmSync)return s.rmSync(e,{recursive:!0,force:!0});n.sync(e)}}},18784:(e,t,r)=>{"use strict";const s=r(63735),o=r(16928),n=r(64285).copy,i=r(12512).remove,a=r(98808).mkdirp,c=r(12426).pathExists,l=r(22976);function doRename(e,t,r,s,o){return s?rename(e,t,r,o):r?i(t,(s=>s?o(s):rename(e,t,r,o))):void c(t,((s,n)=>s?o(s):n?o(new Error("dest already exists.")):rename(e,t,r,o)))}function rename(e,t,r,o){s.rename(e,t,(s=>s?"EXDEV"!==s.code?o(s):function moveAcrossDevice(e,t,r,s){const o={overwrite:r,errorOnExist:!0};n(e,t,o,(t=>t?s(t):i(e,s)))}(e,t,r,o):o()))}e.exports=function move(e,t,r,s){"function"==typeof r&&(s=r,r={});const n=(r=r||{}).overwrite||r.clobber||!1;l.checkPaths(e,t,"move",r,((r,i)=>{if(r)return s(r);const{srcStat:c,isChangingCase:u=!1}=i;l.checkParentPaths(e,c,t,"move",(r=>r?s(r):function isParentRoot(e){const t=o.dirname(e);return o.parse(t).root===t}(t)?doRename(e,t,n,u,s):void a(o.dirname(t),(r=>r?s(r):doRename(e,t,n,u,s)))))}))}},18926:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function __export(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(49423))},19813:(e,t,r)=>{"use strict";const s=r(63735);e.exports={utimesMillis:function utimesMillis(e,t,r,o){s.open(e,"r+",((e,n)=>{if(e)return o(e);s.futimes(n,t,r,(e=>{s.close(n,(t=>{o&&o(e||t)}))}))}))},utimesMillisSync:function utimesMillisSync(e,t,r){const o=s.openSync(e,"r+");return s.futimesSync(o,t,r),s.closeSync(o)}}},20539:(e,t,r)=>{"use strict";e.exports={...r(43439),...r(64285),...r(77361),...r(86754),...r(33590),...r(98808),...r(33317),...r(80322),...r(12426),...r(12512)}},21640:e=>{e.exports=function addHook(e,t,r,s){var o=s;e.registry[r]||(e.registry[r]=[]);"before"===t&&(s=function(e,t){return Promise.resolve().then(o.bind(null,t)).then(e.bind(null,t))});"after"===t&&(s=function(e,t){var r;return Promise.resolve().then(e.bind(null,t)).then((function(e){return o(r=e,t)})).then((function(){return r}))});"error"===t&&(s=function(e,t){return Promise.resolve().then(e.bind(null,t)).catch((function(e){return o(e,t)}))});e.registry[r].push({hook:s,orig:o})}},22976:(e,t,r)=>{"use strict";const s=r(43439),o=r(16928),n=r(39023);function getStats(e,t,r){const o=r.dereference?e=>s.stat(e,{bigint:!0}):e=>s.lstat(e,{bigint:!0});return Promise.all([o(e),o(t).catch((e=>{if("ENOENT"===e.code)return null;throw e}))]).then((([e,t])=>({srcStat:e,destStat:t})))}function areIdentical(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function isSrcSubdir(e,t){const r=o.resolve(e).split(o.sep).filter((e=>e)),s=o.resolve(t).split(o.sep).filter((e=>e));return r.reduce(((e,t,r)=>e&&s[r]===t),!0)}function errMsg(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}e.exports={checkPaths:function checkPaths(e,t,r,s,i){n.callbackify(getStats)(e,t,s,((s,n)=>{if(s)return i(s);const{srcStat:a,destStat:c}=n;if(c){if(areIdentical(a,c)){const s=o.basename(e),n=o.basename(t);return"move"===r&&s!==n&&s.toLowerCase()===n.toLowerCase()?i(null,{srcStat:a,destStat:c,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(a.isDirectory()&&!c.isDirectory())return i(new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`));if(!a.isDirectory()&&c.isDirectory())return i(new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`))}return a.isDirectory()&&isSrcSubdir(e,t)?i(new Error(errMsg(e,t,r))):i(null,{srcStat:a,destStat:c})}))},checkPathsSync:function checkPathsSync(e,t,r,n){const{srcStat:i,destStat:a}=function getStatsSync(e,t,r){let o;const n=r.dereference?e=>s.statSync(e,{bigint:!0}):e=>s.lstatSync(e,{bigint:!0}),i=n(e);try{o=n(t)}catch(e){if("ENOENT"===e.code)return{srcStat:i,destStat:null};throw e}return{srcStat:i,destStat:o}}(e,t,n);if(a){if(areIdentical(i,a)){const s=o.basename(e),n=o.basename(t);if("move"===r&&s!==n&&s.toLowerCase()===n.toLowerCase())return{srcStat:i,destStat:a,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!a.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&a.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&isSrcSubdir(e,t))throw new Error(errMsg(e,t,r));return{srcStat:i,destStat:a}},checkParentPaths:function checkParentPaths(e,t,r,n,i){const a=o.resolve(o.dirname(e)),c=o.resolve(o.dirname(r));if(c===a||c===o.parse(c).root)return i();s.stat(c,{bigint:!0},((s,o)=>s?"ENOENT"===s.code?i():i(s):areIdentical(t,o)?i(new Error(errMsg(e,r,n))):checkParentPaths(e,t,c,n,i)))},checkParentPathsSync:function checkParentPathsSync(e,t,r,n){const i=o.resolve(o.dirname(e)),a=o.resolve(o.dirname(r));if(a===i||a===o.parse(a).root)return;let c;try{c=s.statSync(a,{bigint:!0})}catch(e){if("ENOENT"===e.code)return;throw e}if(areIdentical(t,c))throw new Error(errMsg(e,r,n));return checkParentPathsSync(e,t,a,n)},isSrcSubdir,areIdentical}},24116:(e,t,r)=>{"use strict";const s=r(75617);class AbortError extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,({message:e}=e)):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}function decorateErrorWithCounts(e,t,r){const s=r.retries-(t-1);return e.attemptNumber=t,e.retriesLeft=s,e}e.exports=(e,t)=>new Promise(((r,o)=>{t=Object.assign({onFailedAttempt:()=>{},retries:10},t);const n=s.operation(t);n.attempt((s=>Promise.resolve(s).then(e).then(r,(e=>{e instanceof AbortError?(n.stop(),o(e.originalError)):e instanceof TypeError?(n.stop(),o(e)):n.retry(e)?(decorateErrorWithCounts(e,s,t),t.onFailedAttempt(e)):(decorateErrorWithCounts(e,s,t),t.onFailedAttempt(e),o(n.mainError()))}))))})),e.exports.AbortError=AbortError},25447:e=>{e.exports=function removeHook(e,t,r){if(!e.registry[t])return;var s=e.registry[t].map((function(e){return e.orig})).indexOf(r);if(-1===s)return;e.registry[t].splice(s,1)}},28237:(e,t,r)=>{"use strict";const{tokenChars:s}=r(95880);e.exports={parse:function parse(e){const t=new Set;let r=-1,o=-1,n=0;for(;n<e.length;n++){const i=e.charCodeAt(n);if(-1===o&&1===s[i])-1===r&&(r=n);else if(0===n||32!==i&&9!==i){if(44!==i)throw new SyntaxError(`Unexpected character at index ${n}`);{if(-1===r)throw new SyntaxError(`Unexpected character at index ${n}`);-1===o&&(o=n);const s=e.slice(r,o);if(t.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);t.add(s),r=o=-1}}else-1===o&&-1!==r&&(o=n)}if(-1===r||-1!==o)throw new SyntaxError("Unexpected end of input");const i=e.slice(r,n);if(t.has(i))throw new SyntaxError(`The "${i}" subprotocol is duplicated`);return t.add(i),t}}},30786:(e,t,r)=>{"use strict";const s=r(63735),o=r(16928),n=r(98808).mkdirsSync,i=r(19813).utimesMillisSync,a=r(22976);function getStats(e,t,r,n){const i=(n.dereference?s.statSync:s.lstatSync)(t);if(i.isDirectory())return function onDir(e,t,r,o,n){return t?copyDir(r,o,n):function mkDirAndCopy(e,t,r,o){return s.mkdirSync(r),copyDir(t,r,o),setDestMode(r,e)}(e.mode,r,o,n)}(i,e,t,r,n);if(i.isFile()||i.isCharacterDevice()||i.isBlockDevice())return function onFile(e,t,r,o,n){return t?function mayCopyFile(e,t,r,o){if(o.overwrite)return s.unlinkSync(r),copyFile(e,t,r,o);if(o.errorOnExist)throw new Error(`'${r}' already exists`)}(e,r,o,n):copyFile(e,r,o,n)}(i,e,t,r,n);if(i.isSymbolicLink())return function onLink(e,t,r,n){let i=s.readlinkSync(t);n.dereference&&(i=o.resolve(process.cwd(),i));if(e){let e;try{e=s.readlinkSync(r)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return s.symlinkSync(i,r);throw e}if(n.dereference&&(e=o.resolve(process.cwd(),e)),a.isSrcSubdir(i,e))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${e}'.`);if(s.statSync(r).isDirectory()&&a.isSrcSubdir(e,i))throw new Error(`Cannot overwrite '${e}' with '${i}'.`);return function copyLink(e,t){return s.unlinkSync(t),s.symlinkSync(e,t)}(i,r)}return s.symlinkSync(i,r)}(e,t,r,n);if(i.isSocket())throw new Error(`Cannot copy a socket file: ${t}`);if(i.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${t}`);throw new Error(`Unknown file: ${t}`)}function copyFile(e,t,r,o){return s.copyFileSync(t,r),o.preserveTimestamps&&function handleTimestamps(e,t,r){(function fileIsNotWritable(e){return!(128&e)})(e)&&function makeFileWritable(e,t){return setDestMode(e,128|t)}(r,e);return function setDestTimestamps(e,t){const r=s.statSync(e);return i(t,r.atime,r.mtime)}(t,r)}(e.mode,t,r),setDestMode(r,e.mode)}function setDestMode(e,t){return s.chmodSync(e,t)}function copyDir(e,t,r){s.readdirSync(e).forEach((s=>function copyDirItem(e,t,r,s){const n=o.join(t,e),i=o.join(r,e),{destStat:c}=a.checkPathsSync(n,i,"copy",s);return function startCopy(e,t,r,s){if(!s.filter||s.filter(t,r))return getStats(e,t,r,s)}(c,n,i,s)}(s,e,t,r)))}e.exports=function copySync(e,t,r){"function"==typeof r&&(r={filter:r}),(r=r||{}).clobber=!("clobber"in r)||!!r.clobber,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0002");const{srcStat:i,destStat:c}=a.checkPathsSync(e,t,"copy",r);return a.checkParentPathsSync(e,i,t,"copy"),function handleFilterAndCopy(e,t,r,i){if(i.filter&&!i.filter(t,r))return;const a=o.dirname(r);s.existsSync(a)||n(a);return getStats(e,t,r,i)}(c,e,t,r)}},31912:(e,t,r)=>{"use strict";const s=r(2909);e.exports={readJson:s.readFile,readJsonSync:s.readFileSync,writeJson:s.writeFile,writeJsonSync:s.writeFileSync}},32614:e=>{"use strict";const t=["nodebuffer","arraybuffer","fragments"],r="undefined"!=typeof Blob;r&&t.push("blob"),e.exports={BINARY_TYPES:t,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:r,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},33317:(e,t,r)=>{"use strict";const s=r(41236).fromCallback;e.exports={move:s(r(18784)),moveSync:r(8442)}},33590:(e,t,r)=>{"use strict";const s=r(41236).fromPromise,o=r(31912);o.outputJson=s(r(97400)),o.outputJsonSync=r(146),o.outputJSON=o.outputJson,o.outputJSONSync=o.outputJsonSync,o.writeJSON=o.writeJson,o.writeJSONSync=o.writeJsonSync,o.readJSON=o.readJson,o.readJSONSync=o.readJsonSync,e.exports=o},40431:e=>{"use strict";const t=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],r=["B","kiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],s=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],o=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],toLocaleString=(e,t,r)=>{let s=e;return"string"==typeof t||Array.isArray(t)?s=e.toLocaleString(t,r):!0!==t&&void 0===r||(s=e.toLocaleString(void 0,r)),s};e.exports=(e,n)=>{if(!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);const i=(n=Object.assign({bits:!1,binary:!1},n)).bits?n.binary?o:s:n.binary?r:t;if(n.signed&&0===e)return` 0 ${i[0]}`;const a=e<0,c=a?"-":n.signed?"+":"";let l;if(a&&(e=-e),void 0!==n.minimumFractionDigits&&(l={minimumFractionDigits:n.minimumFractionDigits}),void 0!==n.maximumFractionDigits&&(l=Object.assign({maximumFractionDigits:n.maximumFractionDigits},l)),e<1){return c+toLocaleString(e,n.locale,l)+" "+i[0]}const u=Math.min(Math.floor(n.binary?Math.log(e)/Math.log(1024):Math.log10(e)/3),i.length-1);e/=Math.pow(n.binary?1024:1e3,u),l||(e=e.toPrecision(3));return c+toLocaleString(Number(e),n.locale,l)+" "+i[u]}},42971:(e,t,r)=>{"use strict";const s=r(43106),o=r(93338),n=r(4759),{kStatusCode:i}=r(32614),a=Buffer[Symbol.species],c=Buffer.from([0,0,255,255]),l=Symbol("permessage-deflate"),u=Symbol("total-length"),p=Symbol("callback"),d=Symbol("buffers"),m=Symbol("error");let h;function deflateOnData(e){this[d].push(e),this[u]+=e.length}function inflateOnData(e){this[u]+=e.length,this[l]._maxPayload<1||this[u]<=this[l]._maxPayload?this[d].push(e):(this[m]=new RangeError("Max payload size exceeded"),this[m].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[m][i]=1009,this.removeListener("data",inflateOnData),this.reset())}function inflateOnError(e){this[l]._inflate=null,e[i]=1007,this[p](e)}e.exports=class PerMessageDeflate{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!h){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;h=new n(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[p];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,r=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{let r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r}))})),e}decompress(e,t,r){h.add((s=>{this._decompress(e,t,((e,t)=>{s(),r(e,t)}))}))}compress(e,t,r){h.add((s=>{this._compress(e,t,((e,t)=>{s(),r(e,t)}))}))}_decompress(e,t,r){const n=this._isServer?"client":"server";if(!this._inflate){const e=`${n}_max_window_bits`,t="number"!=typeof this.params[e]?s.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=s.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[l]=this,this._inflate[u]=0,this._inflate[d]=[],this._inflate.on("error",inflateOnError),this._inflate.on("data",inflateOnData)}this._inflate[p]=r,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush((()=>{const e=this._inflate[m];if(e)return this._inflate.close(),this._inflate=null,void r(e);const s=o.concat(this._inflate[d],this._inflate[u]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[u]=0,this._inflate[d]=[],t&&this.params[`${n}_no_context_takeover`]&&this._inflate.reset()),r(null,s)}))}_compress(e,t,r){const n=this._isServer?"server":"client";if(!this._deflate){const e=`${n}_max_window_bits`,t="number"!=typeof this.params[e]?s.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=s.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[u]=0,this._deflate[d]=[],this._deflate.on("data",deflateOnData)}this._deflate[p]=r,this._deflate.write(e),this._deflate.flush(s.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let e=o.concat(this._deflate[d],this._deflate[u]);t&&(e=new a(e.buffer,e.byteOffset,e.length-4)),this._deflate[p]=null,this._deflate[u]=0,this._deflate[d]=[],t&&this.params[`${n}_no_context_takeover`]&&this._deflate.reset(),r(null,e)}))}}},43439:(e,t,r)=>{"use strict";const s=r(41236).fromCallback,o=r(63735),n=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter((e=>"function"==typeof o[e]));Object.assign(t,o),n.forEach((e=>{t[e]=s(o[e])})),t.exists=function(e,t){return"function"==typeof t?o.exists(e,t):new Promise((t=>o.exists(e,t)))},t.read=function(e,t,r,s,n,i){return"function"==typeof i?o.read(e,t,r,s,n,i):new Promise(((i,a)=>{o.read(e,t,r,s,n,((e,t,r)=>{if(e)return a(e);i({bytesRead:t,buffer:r})}))}))},t.write=function(e,t,...r){return"function"==typeof r[r.length-1]?o.write(e,t,...r):new Promise(((s,n)=>{o.write(e,t,...r,((e,t,r)=>{if(e)return n(e);s({bytesWritten:t,buffer:r})}))}))},"function"==typeof o.writev&&(t.writev=function(e,t,...r){return"function"==typeof r[r.length-1]?o.writev(e,t,...r):new Promise(((s,n)=>{o.writev(e,t,...r,((e,t,r)=>{if(e)return n(e);s({bytesWritten:t,buffers:r})}))}))}),"function"==typeof o.realpath.native?t.realpath.native=s(o.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")},43868:(e,t,r)=>{"use strict";const s=r(16928),o=r(63735),n=r(12426).pathExists;e.exports={symlinkPaths:function symlinkPaths(e,t,r){if(s.isAbsolute(e))return o.lstat(e,(t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),r(t)):r(null,{toCwd:e,toDst:e})));{const i=s.dirname(t),a=s.join(i,e);return n(a,((t,n)=>t?r(t):n?r(null,{toCwd:a,toDst:e}):o.lstat(e,(t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),r(t)):r(null,{toCwd:e,toDst:s.relative(i,e)})))))}},symlinkPathsSync:function symlinkPathsSync(e,t){let r;if(s.isAbsolute(e)){if(r=o.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}{const n=s.dirname(t),i=s.join(n,e);if(r=o.existsSync(i),r)return{toCwd:i,toDst:e};if(r=o.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:s.relative(n,e)}}}}},46286:(e,t,r)=>{"use strict";const{Writable:s}=r(2203),o=r(42971),{BINARY_TYPES:n,EMPTY_BUFFER:i,kStatusCode:a,kWebSocket:c}=r(32614),{concat:l,toArrayBuffer:u,unmask:p}=r(93338),{isValidStatusCode:d,isValidUTF8:m}=r(95880),h=Buffer[Symbol.species];e.exports=class Receiver extends s{constructor(e={}){super(),this._allowSynchronousEvents=void 0===e.allowSynchronousEvents||e.allowSynchronousEvents,this._binaryType=e.binaryType||n[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[c]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=new h(t.buffer,t.byteOffset+e,t.length-e),new h(t.buffer,t.byteOffset,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0],s=t.length-e;e>=r.length?t.set(this._buffers.shift(),s):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),s),this._buffers[0]=new h(r.buffer,r.byteOffset+e,r.length-e)),e-=r.length}while(e>0);return t}startLoop(e){this._loop=!0;do{switch(this._state){case 0:this.getInfo(e);break;case 1:this.getPayloadLength16(e);break;case 2:this.getPayloadLength64(e);break;case 3:this.getMask();break;case 4:this.getData(e);break;case 5:case 6:return void(this._loop=!1)}}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2)return void(this._loop=!1);const t=this.consume(2);if(48&t[0]){return void e(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"))}const r=!(64&~t[0]);if(!r||this._extensions[o.extensionName]){if(this._fin=!(128&~t[0]),this._opcode=15&t[0],this._payloadLength=127&t[1],0===this._opcode){if(r){return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}if(!this._fragmented){return void e(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"))}this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented){return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"))}this._compressed=r}else{if(!(this._opcode>7&&this._opcode<11)){return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"))}if(!this._fin){return void e(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"))}if(r){return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength){return void e(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=!(128&~t[1]),this._isServer){if(!this._masked){return void e(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}}else if(this._masked){return void e(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"))}126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(e)}else{e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}}getPayloadLength16(e){this._bufferedBytes<2?this._loop=!1:(this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e))}getPayloadLength64(e){if(this._bufferedBytes<8)return void(this._loop=!1);const t=this.consume(8),r=t.readUInt32BE(0);if(r>Math.pow(2,21)-1){e(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH"))}else this._payloadLength=r*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){e(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"))}else this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=i;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&p(t,this._mask)}if(this._opcode>7)this.controlMessage(t,e);else{if(this._compressed)return this._state=5,void this.decompress(t,e);t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage(e)}}decompress(e,t){this._extensions[o.extensionName].decompress(e,this._fin,((e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0){const e=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");return void t(e)}this._fragments.push(r)}this.dataMessage(t),0===this._state&&this.startLoop(t)}))}dataMessage(e){if(!this._fin)return void(this._state=0);const t=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let s;s="nodebuffer"===this._binaryType?l(r,t):"arraybuffer"===this._binaryType?u(l(r,t)):"blob"===this._binaryType?new Blob(r):r,this._allowSynchronousEvents?(this.emit("message",s,!0),this._state=0):(this._state=6,setImmediate((()=>{this.emit("message",s,!0),this._state=0,this.startLoop(e)})))}else{const s=l(r,t);if(!this._skipUTF8Validation&&!m(s)){const t=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void e(t)}5===this._state||this._allowSynchronousEvents?(this.emit("message",s,!1),this._state=0):(this._state=6,setImmediate((()=>{this.emit("message",s,!1),this._state=0,this.startLoop(e)})))}}controlMessage(e,t){if(8!==this._opcode)this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",e),this._state=0):(this._state=6,setImmediate((()=>{this.emit(9===this._opcode?"ping":"pong",e),this._state=0,this.startLoop(t)})));else{if(0===e.length)this._loop=!1,this.emit("conclude",1005,i),this.end();else{const r=e.readUInt16BE(0);if(!d(r)){const e=this.createError(RangeError,`invalid status code ${r}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");return void t(e)}const s=new h(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!m(s)){const e=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void t(e)}this._loop=!1,this.emit("conclude",r,s),this.end()}this._state=0}}createError(e,t,r,s,o){this._loop=!1,this._errored=!0;const n=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(n,this.createError),n.code=o,n[a]=s,n}}},49423:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(79896),n=s(r(45753)).default("@kwsites/file-exists");t.exists=function exists(e,r=t.READABLE){return function check(e,t,r){n("checking %s",e);try{const s=o.statSync(e);return s.isFile()&&t?(n("[OK] path represents a file"),!0):s.isDirectory()&&r?(n("[OK] path represents a directory"),!0):(n("[FAIL] path represents something other than a file or directory"),!1)}catch(e){if("ENOENT"===e.code)return n("[FAIL] path is not accessible: %o",e),!1;throw n("[FATAL] %o",e),e}}(e,(r&t.FILE)>0,(r&t.FOLDER)>0)},t.FILE=1,t.FOLDER=2,t.READABLE=t.FILE+t.FOLDER},54728:(e,t,r)=>{"use strict";const s=r(63735),o=r(16928),n=r(98808).mkdirs,i=r(12426).pathExists,a=r(19813).utimesMillis,c=r(22976);function checkParentDir(e,t,r,s,a){const c=o.dirname(r);i(c,((o,i)=>o?a(o):i?getStats(e,t,r,s,a):void n(c,(o=>o?a(o):getStats(e,t,r,s,a)))))}function handleFilter(e,t,r,s,o,n){Promise.resolve(o.filter(r,s)).then((i=>i?e(t,r,s,o,n):n()),(e=>n(e)))}function getStats(e,t,r,o,n){(o.dereference?s.stat:s.lstat)(t,((i,a)=>i?n(i):a.isDirectory()?function onDir(e,t,r,o,n,i){return t?copyDir(r,o,n,i):function mkDirAndCopy(e,t,r,o,n){s.mkdir(r,(s=>{if(s)return n(s);copyDir(t,r,o,(t=>t?n(t):setDestMode(r,e,n)))}))}(e.mode,r,o,n,i)}(a,e,t,r,o,n):a.isFile()||a.isCharacterDevice()||a.isBlockDevice()?function onFile(e,t,r,o,n,i){return t?function mayCopyFile(e,t,r,o,n){if(!o.overwrite)return o.errorOnExist?n(new Error(`'${r}' already exists`)):n();s.unlink(r,(s=>s?n(s):copyFile(e,t,r,o,n)))}(e,r,o,n,i):copyFile(e,r,o,n,i)}(a,e,t,r,o,n):a.isSymbolicLink()?onLink(e,t,r,o,n):a.isSocket()?n(new Error(`Cannot copy a socket file: ${t}`)):a.isFIFO()?n(new Error(`Cannot copy a FIFO pipe: ${t}`)):n(new Error(`Unknown file: ${t}`))))}function copyFile(e,t,r,o,n){s.copyFile(t,r,(s=>s?n(s):o.preserveTimestamps?function handleTimestampsAndMode(e,t,r,s){if(function fileIsNotWritable(e){return!(128&e)}(e))return function makeFileWritable(e,t,r){return setDestMode(e,128|t,r)}(r,e,(o=>o?s(o):setDestTimestampsAndMode(e,t,r,s)));return setDestTimestampsAndMode(e,t,r,s)}(e.mode,t,r,n):setDestMode(r,e.mode,n)))}function setDestTimestampsAndMode(e,t,r,o){!function setDestTimestamps(e,t,r){s.stat(e,((e,s)=>e?r(e):a(t,s.atime,s.mtime,r)))}(t,r,(t=>t?o(t):setDestMode(r,e,o)))}function setDestMode(e,t,r){return s.chmod(e,t,r)}function copyDir(e,t,r,o){s.readdir(e,((s,n)=>s?o(s):copyDirItems(n,e,t,r,o)))}function copyDirItems(e,t,r,s,n){const i=e.pop();return i?function copyDirItem(e,t,r,s,n,i){const a=o.join(r,t),l=o.join(s,t);c.checkPaths(a,l,"copy",n,((t,o)=>{if(t)return i(t);const{destStat:c}=o;!function startCopy(e,t,r,s,o){return s.filter?handleFilter(getStats,e,t,r,s,o):getStats(e,t,r,s,o)}(c,a,l,n,(t=>t?i(t):copyDirItems(e,r,s,n,i)))}))}(e,i,t,r,s,n):n()}function onLink(e,t,r,n,i){s.readlink(t,((t,a)=>t?i(t):(n.dereference&&(a=o.resolve(process.cwd(),a)),e?void s.readlink(r,((t,l)=>t?"EINVAL"===t.code||"UNKNOWN"===t.code?s.symlink(a,r,i):i(t):(n.dereference&&(l=o.resolve(process.cwd(),l)),c.isSrcSubdir(a,l)?i(new Error(`Cannot copy '${a}' to a subdirectory of itself, '${l}'.`)):e.isDirectory()&&c.isSrcSubdir(l,a)?i(new Error(`Cannot overwrite '${l}' with '${a}'.`)):function copyLink(e,t,r){s.unlink(t,(o=>o?r(o):s.symlink(e,t,r)))}(a,r,i)))):s.symlink(a,r,i))))}e.exports=function copy(e,t,r,s){"function"!=typeof r||s?"function"==typeof r&&(r={filter:r}):(s=r,r={}),s=s||function(){},(r=r||{}).clobber=!("clobber"in r)||!!r.clobber,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0001"),c.checkPaths(e,t,"copy",r,((o,n)=>{if(o)return s(o);const{srcStat:i,destStat:a}=n;c.checkParentPaths(e,i,t,"copy",(o=>o?s(o):r.filter?handleFilter(checkParentDir,a,e,t,r,s):checkParentDir(a,e,t,r,s)))}))}},54758:(e,t,r)=>{"use strict";const s=r(43439),{checkPath:o}=r(79585),getMode=e=>"number"==typeof e?e:{mode:511,...e}.mode;e.exports.makeDir=async(e,t)=>(o(e),s.mkdir(e,{mode:getMode(t),recursive:!0})),e.exports.makeDirSync=(e,t)=>(o(e),s.mkdirSync(e,{mode:getMode(t),recursive:!0}))},55926:(e,t,r)=>{"use strict";const{tokenChars:s}=r(95880);function push(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}e.exports={format:function format(e){return Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>[t].concat(Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function parse(e){const t=Object.create(null);let r,o,n=Object.create(null),i=!1,a=!1,c=!1,l=-1,u=-1,p=-1,d=0;for(;d<e.length;d++)if(u=e.charCodeAt(d),void 0===r)if(-1===p&&1===s[u])-1===l&&(l=d);else if(0===d||32!==u&&9!==u){if(59!==u&&44!==u)throw new SyntaxError(`Unexpected character at index ${d}`);{if(-1===l)throw new SyntaxError(`Unexpected character at index ${d}`);-1===p&&(p=d);const s=e.slice(l,p);44===u?(push(t,s,n),n=Object.create(null)):r=s,l=p=-1}}else-1===p&&-1!==l&&(p=d);else if(void 0===o)if(-1===p&&1===s[u])-1===l&&(l=d);else if(32===u||9===u)-1===p&&-1!==l&&(p=d);else if(59===u||44===u){if(-1===l)throw new SyntaxError(`Unexpected character at index ${d}`);-1===p&&(p=d),push(n,e.slice(l,p),!0),44===u&&(push(t,r,n),n=Object.create(null),r=void 0),l=p=-1}else{if(61!==u||-1===l||-1!==p)throw new SyntaxError(`Unexpected character at index ${d}`);o=e.slice(l,d),l=p=-1}else if(a){if(1!==s[u])throw new SyntaxError(`Unexpected character at index ${d}`);-1===l?l=d:i||(i=!0),a=!1}else if(c)if(1===s[u])-1===l&&(l=d);else if(34===u&&-1!==l)c=!1,p=d;else{if(92!==u)throw new SyntaxError(`Unexpected character at index ${d}`);a=!0}else if(34===u&&61===e.charCodeAt(d-1))c=!0;else if(-1===p&&1===s[u])-1===l&&(l=d);else if(-1===l||32!==u&&9!==u){if(59!==u&&44!==u)throw new SyntaxError(`Unexpected character at index ${d}`);{if(-1===l)throw new SyntaxError(`Unexpected character at index ${d}`);-1===p&&(p=d);let s=e.slice(l,p);i&&(s=s.replace(/\\/g,""),i=!1),push(n,o,s),44===u&&(push(t,r,n),n=Object.create(null),r=void 0),o=void 0,l=p=-1}}else-1===p&&(p=d);if(-1===l||c||32===u||9===u)throw new SyntaxError("Unexpected end of input");-1===p&&(p=d);const m=e.slice(l,p);return void 0===r?push(t,m,n):(void 0===o?push(n,m,!0):push(n,o,i?m.replace(/\\/g,""):m),push(t,r,n)),t}}},58303:(e,t,r)=>{var s=r(93961);t.operation=function(e){var r=t.timeouts(e);return new s(r,{forever:e&&e.forever,unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],o=0;o<t.retries;o++)s.push(this.createTimeout(o,t));return e&&e.forever&&!s.length&&s.push(this.createTimeout(o,t)),s.sort((function(e,t){return e-t})),s},t.createTimeout=function(e,t){var r=t.randomize?Math.random()+1:1,s=Math.round(r*t.minTimeout*Math.pow(t.factor,e));return s=Math.min(s,t.maxTimeout)},t.wrap=function(e,r,s){if(r instanceof Array&&(s=r,r=null),!s)for(var o in s=[],e)"function"==typeof e[o]&&s.push(o);for(var n=0;n<s.length;n++){var i=s[n],a=e[i];e[i]=function retryWrapper(s){var o=t.operation(r),n=Array.prototype.slice.call(arguments,1),i=n.pop();n.push((function(e){o.retry(e)||(e&&(arguments[0]=o.mainError()),i.apply(this,arguments))})),o.attempt((function(){s.apply(e,n)}))}.bind(e,a),e[i].options=r}}},59041:(e,t,r)=>{var s=r(79896),o=r(2203).Transform,n=r(2203).PassThrough,i=r(43106),a=r(39023),c=r(24434).EventEmitter,l=r(84025);function ZipFile(){this.outputStream=new n,this.entries=[],this.outputStreamCursor=0,this.ended=!1,this.allDone=!1,this.forceZip64Eocd=!1}t.u=ZipFile,a.inherits(ZipFile,c),ZipFile.prototype.addFile=function(e,t,r){var o=this;t=validateMetadataPath(t,!1),null==r&&(r={});var n=new Entry(t,!1,r);o.entries.push(n),s.stat(e,(function(t,i){return t?o.emit("error",t):i.isFile()?(n.uncompressedSize=i.size,null==r.mtime&&n.setLastModDate(i.mtime),null==r.mode&&n.setFileAttributesMode(i.mode),n.setFileDataPumpFunction((function(){var t=s.createReadStream(e);n.state=Entry.FILE_DATA_IN_PROGRESS,t.on("error",(function(e){o.emit("error",e)})),pumpFileDataReadStream(o,n,t)})),void pumpEntries(o)):o.emit("error",new Error("not a file: "+e))}))},ZipFile.prototype.addReadStream=function(e,t,r){var s=this;null==r&&(r={});var o=new Entry(t=validateMetadataPath(t,!1),!1,r);s.entries.push(o),o.setFileDataPumpFunction((function(){o.state=Entry.FILE_DATA_IN_PROGRESS,pumpFileDataReadStream(s,o,e)})),pumpEntries(s)},ZipFile.prototype.addBuffer=function(e,t,r){var s=this;if(t=validateMetadataPath(t,!1),e.length>1073741823)throw new Error("buffer too large: "+e.length+" > 1073741823");if(null==r&&(r={}),null!=r.size)throw new Error("options.size not allowed");var o=new Entry(t,!1,r);function setCompressedBuffer(e){o.compressedSize=e.length,o.setFileDataPumpFunction((function(){writeToOutputStream(s,e),writeToOutputStream(s,o.getDataDescriptor()),o.state=Entry.FILE_DATA_DONE,setImmediate((function(){pumpEntries(s)}))})),pumpEntries(s)}o.uncompressedSize=e.length,o.crc32=l.unsigned(e),o.crcAndFileSizeKnown=!0,s.entries.push(o),o.compress?i.deflateRaw(e,(function(e,t){setCompressedBuffer(t)})):setCompressedBuffer(e)},ZipFile.prototype.addEmptyDirectory=function(e,t){var r=this;if(e=validateMetadataPath(e,!0),null==t&&(t={}),null!=t.size)throw new Error("options.size not allowed");if(null!=t.compress)throw new Error("options.compress not allowed");var s=new Entry(e,!0,t);r.entries.push(s),s.setFileDataPumpFunction((function(){writeToOutputStream(r,s.getDataDescriptor()),s.state=Entry.FILE_DATA_DONE,pumpEntries(r)})),pumpEntries(r)};var u=bufferFrom([80,75,5,6]);function writeToOutputStream(e,t){e.outputStream.write(t),e.outputStreamCursor+=t.length}function pumpFileDataReadStream(e,t,r){var s=new Crc32Watcher,o=new ByteCounter,a=t.compress?new i.DeflateRaw:new n,c=new ByteCounter;r.pipe(s).pipe(o).pipe(a).pipe(c).pipe(e.outputStream,{end:!1}),c.on("end",(function(){if(t.crc32=s.crc32,null==t.uncompressedSize)t.uncompressedSize=o.byteCount;else if(t.uncompressedSize!==o.byteCount)return e.emit("error",new Error("file data stream has unexpected number of bytes"));t.compressedSize=c.byteCount,e.outputStreamCursor+=t.compressedSize,writeToOutputStream(e,t.getDataDescriptor()),t.state=Entry.FILE_DATA_DONE,pumpEntries(e)}))}function pumpEntries(e){if(!e.allDone){if(e.ended&&null!=e.finalSizeCallback){var t=function calculateFinalSize(e){for(var t=0,r=0,s=0;s<e.entries.length;s++){var o=e.entries[s];if(o.compress)return-1;if(o.state>=Entry.READY_TO_PUMP_FILE_DATA){if(null==o.uncompressedSize)return-1}else if(null==o.uncompressedSize)return null;o.relativeOffsetOfLocalHeader=t;var n=o.useZip64Format();t+=g+o.utf8FileName.length,t+=o.uncompressedSize,o.crcAndFileSizeKnown||(t+=n?E:b),r+=T+o.utf8FileName.length+o.fileComment.length,n&&(r+=S)}var i=0;(e.forceZip64Eocd||e.entries.length>=65535||r>=65535||t>=4294967295)&&(i+=p+d);return i+=m+e.comment.length,t+r+i}(e);null!=t&&(e.finalSizeCallback(t),e.finalSizeCallback=null)}var r=function getFirstNotDoneEntry(){for(var t=0;t<e.entries.length;t++){var r=e.entries[t];if(r.state<Entry.FILE_DATA_DONE)return r}return null}();if(null!=r){if(r.state<Entry.READY_TO_PUMP_FILE_DATA)return;if(r.state===Entry.FILE_DATA_IN_PROGRESS)return;r.relativeOffsetOfLocalHeader=e.outputStreamCursor;var s=r.getLocalFileHeader();writeToOutputStream(e,s),r.doFileDataPump()}else e.ended&&(e.offsetOfStartOfCentralDirectory=e.outputStreamCursor,e.entries.forEach((function(t){var r=t.getCentralDirectoryRecord();writeToOutputStream(e,r)})),writeToOutputStream(e,function getEndOfCentralDirectoryRecord(e,t){var r=!1,s=e.entries.length;(e.forceZip64Eocd||e.entries.length>=65535)&&(s=65535,r=!0);var o=e.outputStreamCursor-e.offsetOfStartOfCentralDirectory,n=o;(e.forceZip64Eocd||o>=4294967295)&&(n=4294967295,r=!0);var i=e.offsetOfStartOfCentralDirectory;(e.forceZip64Eocd||e.offsetOfStartOfCentralDirectory>=4294967295)&&(i=4294967295,r=!0);if(t)return r?p+d+m:m;var a=bufferAlloc(m+e.comment.length);if(a.writeUInt32LE(101010256,0),a.writeUInt16LE(0,4),a.writeUInt16LE(0,6),a.writeUInt16LE(s,8),a.writeUInt16LE(s,10),a.writeUInt32LE(n,12),a.writeUInt32LE(i,16),a.writeUInt16LE(e.comment.length,20),e.comment.copy(a,22),!r)return a;var c=bufferAlloc(p);c.writeUInt32LE(101075792,0),writeUInt64LE(c,p-12,4),c.writeUInt16LE(w,12),c.writeUInt16LE(y,14),c.writeUInt32LE(0,16),c.writeUInt32LE(0,20),writeUInt64LE(c,e.entries.length,24),writeUInt64LE(c,e.entries.length,32),writeUInt64LE(c,o,40),writeUInt64LE(c,e.offsetOfStartOfCentralDirectory,48);var l=bufferAlloc(d);return l.writeUInt32LE(117853008,0),l.writeUInt32LE(0,4),writeUInt64LE(l,e.outputStreamCursor,8),l.writeUInt32LE(1,16),Buffer.concat([c,l,a])}(e)),e.outputStream.end(),e.allDone=!0)}}ZipFile.prototype.end=function(e,t){if("function"==typeof e&&(t=e,e=null),null==e&&(e={}),!this.ended){if(this.ended=!0,this.finalSizeCallback=t,this.forceZip64Eocd=!!e.forceZip64Format,e.comment){if("string"==typeof e.comment?this.comment=function encodeCp437(e){if(/^[\x20-\x7e]*$/.test(e))return bufferFrom(e,"utf-8");if(null==k){k={};for(var t=0;t<_.length;t++)k[_[t]]=t}var r=bufferAlloc(e.length);for(t=0;t<e.length;t++){var s=k[e[t]];if(null==s)throw new Error("character not encodable in CP437: "+JSON.stringify(e[t]));r[t]=s}return r}(e.comment):this.comment=e.comment,this.comment.length>65535)throw new Error("comment is too large");if(bufferIncludes(this.comment,u))throw new Error("comment contains end of central directory record signature")}else this.comment=h;pumpEntries(this)}};var p=56,d=20,m=22;function validateMetadataPath(e,t){if(""===e)throw new Error("empty metadataPath");if(e=e.replace(/\\/g,"/"),/^[a-zA-Z]:/.test(e)||/^\//.test(e))throw new Error("absolute path: "+e);if(-1!==e.split("/").indexOf(".."))throw new Error("invalid relative path: "+e);var r=/\/$/.test(e);if(t)r||(e+="/");else if(r)throw new Error("file path cannot end with '/': "+e);return e}var h=bufferAlloc(0);function Entry(e,t,r){if(this.utf8FileName=bufferFrom(e),this.utf8FileName.length>65535)throw new Error("utf8 file name too long. "+utf8FileName.length+" > 65535");if(this.isDirectory=t,this.state=Entry.WAITING_FOR_METADATA,this.setLastModDate(null!=r.mtime?r.mtime:new Date),null!=r.mode?this.setFileAttributesMode(r.mode):this.setFileAttributesMode(t?16893:33204),t?(this.crcAndFileSizeKnown=!0,this.crc32=0,this.uncompressedSize=0,this.compressedSize=0):(this.crcAndFileSizeKnown=!1,this.crc32=null,this.uncompressedSize=null,this.compressedSize=null,null!=r.size&&(this.uncompressedSize=r.size)),t?this.compress=!1:(this.compress=!0,null!=r.compress&&(this.compress=!!r.compress)),this.forceZip64Format=!!r.forceZip64Format,r.fileComment){if("string"==typeof r.fileComment?this.fileComment=bufferFrom(r.fileComment,"utf-8"):this.fileComment=r.fileComment,this.fileComment.length>65535)throw new Error("fileComment is too large")}else this.fileComment=h}Entry.WAITING_FOR_METADATA=0,Entry.READY_TO_PUMP_FILE_DATA=1,Entry.FILE_DATA_IN_PROGRESS=2,Entry.FILE_DATA_DONE=3,Entry.prototype.setLastModDate=function(e){var t=dateToDosDateTime(e);this.lastModFileTime=t.time,this.lastModFileDate=t.date},Entry.prototype.setFileAttributesMode=function(e){if((65535&e)!==e)throw new Error("invalid mode. expected: 0 <= "+e+" <= 65535");this.externalFileAttributes=e<<16>>>0},Entry.prototype.setFileDataPumpFunction=function(e){this.doFileDataPump=e,this.state=Entry.READY_TO_PUMP_FILE_DATA},Entry.prototype.useZip64Format=function(){return this.forceZip64Format||null!=this.uncompressedSize&&this.uncompressedSize>4294967294||null!=this.compressedSize&&this.compressedSize>4294967294||null!=this.relativeOffsetOfLocalHeader&&this.relativeOffsetOfLocalHeader>4294967294};var g=30,y=45,w=831;Entry.prototype.getLocalFileHeader=function(){var e=0,t=0,r=0;this.crcAndFileSizeKnown&&(e=this.crc32,t=this.compressedSize,r=this.uncompressedSize);var s=bufferAlloc(g),o=2048;return this.crcAndFileSizeKnown||(o|=8),s.writeUInt32LE(67324752,0),s.writeUInt16LE(20,4),s.writeUInt16LE(o,6),s.writeUInt16LE(this.getCompressionMethod(),8),s.writeUInt16LE(this.lastModFileTime,10),s.writeUInt16LE(this.lastModFileDate,12),s.writeUInt32LE(e,14),s.writeUInt32LE(t,18),s.writeUInt32LE(r,22),s.writeUInt16LE(this.utf8FileName.length,26),s.writeUInt16LE(0,28),Buffer.concat([s,this.utf8FileName])};var b=16,E=24;Entry.prototype.getDataDescriptor=function(){return this.crcAndFileSizeKnown?h:this.useZip64Format()?((e=bufferAlloc(E)).writeUInt32LE(134695760,0),e.writeUInt32LE(this.crc32,4),writeUInt64LE(e,this.compressedSize,8),writeUInt64LE(e,this.uncompressedSize,16),e):((e=bufferAlloc(b)).writeUInt32LE(134695760,0),e.writeUInt32LE(this.crc32,4),e.writeUInt32LE(this.compressedSize,8),e.writeUInt32LE(this.uncompressedSize,12),e);var e};var T=46,S=28;function dateToDosDateTime(e){var t=0;t|=31&e.getDate(),t|=(e.getMonth()+1&15)<<5,t|=(e.getFullYear()-1980&127)<<9;var r=0;return r|=Math.floor(e.getSeconds()/2),r|=(63&e.getMinutes())<<5,{date:t,time:r|=(31&e.getHours())<<11}}function writeUInt64LE(e,t,r){var s=Math.floor(t/4294967296),o=t%4294967296;e.writeUInt32LE(o,r),e.writeUInt32LE(s,r+4)}function ByteCounter(e){o.call(this,e),this.byteCount=0}function Crc32Watcher(e){o.call(this,e),this.crc32=0}Entry.prototype.getCentralDirectoryRecord=function(){var e=bufferAlloc(T),t=2048;this.crcAndFileSizeKnown||(t|=8);var r,s,o=this.compressedSize,n=this.uncompressedSize,i=this.relativeOffsetOfLocalHeader;return this.useZip64Format()?(o=4294967295,n=4294967295,i=4294967295,r=y,(s=bufferAlloc(S)).writeUInt16LE(1,0),s.writeUInt16LE(S-4,2),writeUInt64LE(s,this.uncompressedSize,4),writeUInt64LE(s,this.compressedSize,12),writeUInt64LE(s,this.relativeOffsetOfLocalHeader,20)):(r=20,s=h),e.writeUInt32LE(33639248,0),e.writeUInt16LE(w,4),e.writeUInt16LE(r,6),e.writeUInt16LE(t,8),e.writeUInt16LE(this.getCompressionMethod(),10),e.writeUInt16LE(this.lastModFileTime,12),e.writeUInt16LE(this.lastModFileDate,14),e.writeUInt32LE(this.crc32,16),e.writeUInt32LE(o,20),e.writeUInt32LE(n,24),e.writeUInt16LE(this.utf8FileName.length,28),e.writeUInt16LE(s.length,30),e.writeUInt16LE(this.fileComment.length,32),e.writeUInt16LE(0,34),e.writeUInt16LE(0,36),e.writeUInt32LE(this.externalFileAttributes,38),e.writeUInt32LE(i,42),Buffer.concat([e,this.utf8FileName,s,this.fileComment])},Entry.prototype.getCompressionMethod=function(){return this.compress?8:0},a.inherits(ByteCounter,o),ByteCounter.prototype._transform=function(e,t,r){this.byteCount+=e.length,r(null,e)},a.inherits(Crc32Watcher,o),Crc32Watcher.prototype._transform=function(e,t,r){this.crc32=l.unsigned(e,this.crc32),r(null,e)};var _="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ";if(256!==_.length)throw new Error("assertion failure");var k=null;function bufferAlloc(e){bufferAlloc=function modern(e){return Buffer.allocUnsafe(e)};try{return bufferAlloc(e)}catch(t){return bufferAlloc=function legacy(e){return new Buffer(e)},bufferAlloc(e)}}function bufferFrom(e,t){bufferFrom=function modern(e,t){return Buffer.from(e,t)};try{return bufferFrom(e,t)}catch(r){return bufferFrom=function legacy(e,t){return new Buffer(e,t)},bufferFrom(e,t)}}function bufferIncludes(e,t){bufferIncludes=function modern(e,t){return e.includes(t)};try{return bufferIncludes(e,t)}catch(r){return bufferIncludes=function legacy(e,t){for(var r=0;r<=e.length-t.length;r++)for(var s=0;;s++){if(s===t.length)return!0;if(e[r+s]!==t[s])break}return!1},bufferIncludes(e,t)}}},59837:(e,t,r)=>{"use strict";const s=r(41236).fromCallback,o=r(16928),n=r(43439),i=r(98808),a=i.mkdirs,c=i.mkdirsSync,l=r(43868),u=l.symlinkPaths,p=l.symlinkPathsSync,d=r(93566),m=d.symlinkType,h=d.symlinkTypeSync,g=r(12426).pathExists,{areIdentical:y}=r(22976);function _createSymlink(e,t,r,s){u(e,t,((i,c)=>{if(i)return s(i);e=c.toDst,m(c.toCwd,r,((r,i)=>{if(r)return s(r);const c=o.dirname(t);g(c,((r,o)=>r?s(r):o?n.symlink(e,t,i,s):void a(c,(r=>{if(r)return s(r);n.symlink(e,t,i,s)}))))}))}))}e.exports={createSymlink:s((function createSymlink(e,t,r,s){s="function"==typeof r?r:s,r="function"!=typeof r&&r,n.lstat(t,((o,i)=>{!o&&i.isSymbolicLink()?Promise.all([n.stat(e),n.stat(t)]).then((([o,n])=>{if(y(o,n))return s(null);_createSymlink(e,t,r,s)})):_createSymlink(e,t,r,s)}))})),createSymlinkSync:function createSymlinkSync(e,t,r){let s;try{s=n.lstatSync(t)}catch{}if(s&&s.isSymbolicLink()){const r=n.statSync(e),s=n.statSync(t);if(y(r,s))return}const i=p(e,t);e=i.toDst,r=h(i.toCwd,r);const a=o.dirname(t);return n.existsSync(a)||c(a),n.symlinkSync(e,t,r)}}},61722:(e,t,r)=>{"use strict";const s=r(24434),o=r(58611),{Duplex:n}=r(2203),{createHash:i}=r(76982),a=r(55926),c=r(42971),l=r(28237),u=r(91060),{GUID:p,kWebSocket:d}=r(32614),m=/^[+/0-9A-Za-z]{22}==$/;function emitClose(e){e._state=2,e.emit("close")}function socketOnError(){this.destroy()}function abortHandshake(e,t,r,s){r=r||o.STATUS_CODES[t],s={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...s},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${o.STATUS_CODES[t]}\r\n`+Object.keys(s).map((e=>`${e}: ${s[e]}`)).join("\r\n")+"\r\n\r\n"+r)}function abortHandshakeOrEmitwsClientError(e,t,r,s,o){if(e.listenerCount("wsClientError")){const s=new Error(o);Error.captureStackTrace(s,abortHandshakeOrEmitwsClientError),e.emit("wsClientError",s,r,t)}else abortHandshake(r,s,o)}e.exports=class WebSocketServer extends s{constructor(e,t){if(super(),null==(e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:u,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=o.createServer(((e,t)=>{const r=o.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function addListeners(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function removeListeners(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,s)=>{this.handleUpgrade(t,r,s,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state)return e&&this.once("close",(()=>{e(new Error("The server is not running"))})),void process.nextTick(emitClose,this);if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(emitClose,this);else{const e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close((()=>{emitClose(this)}))}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,s){t.on("error",socketOnError);const o=e.headers["sec-websocket-key"],n=e.headers.upgrade,i=+e.headers["sec-websocket-version"];if("GET"!==e.method){return void abortHandshakeOrEmitwsClientError(this,e,t,405,"Invalid HTTP method")}if(void 0===n||"websocket"!==n.toLowerCase()){return void abortHandshakeOrEmitwsClientError(this,e,t,400,"Invalid Upgrade header")}if(void 0===o||!m.test(o)){return void abortHandshakeOrEmitwsClientError(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header")}if(8!==i&&13!==i){return void abortHandshakeOrEmitwsClientError(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header")}if(!this.shouldHandle(e))return void abortHandshake(t,400);const u=e.headers["sec-websocket-protocol"];let p=new Set;if(void 0!==u)try{p=l.parse(u)}catch(r){return void abortHandshakeOrEmitwsClientError(this,e,t,400,"Invalid Sec-WebSocket-Protocol header")}const d=e.headers["sec-websocket-extensions"],h={};if(this.options.perMessageDeflate&&void 0!==d){const r=new c(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const e=a.parse(d);e[c.extensionName]&&(r.accept(e[c.extensionName]),h[c.extensionName]=r)}catch(r){return void abortHandshakeOrEmitwsClientError(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header")}}if(this.options.verifyClient){const n={origin:e.headers[""+(8===i?"sec-websocket-origin":"origin")],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(n,((n,i,a,c)=>{if(!n)return abortHandshake(t,i||401,a,c);this.completeUpgrade(h,o,p,e,t,r,s)}));if(!this.options.verifyClient(n))return abortHandshake(t,401)}this.completeUpgrade(h,o,p,e,t,r,s)}completeUpgrade(e,t,r,s,o,n,l){if(!o.readable||!o.writable)return o.destroy();if(o[d])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return abortHandshake(o,503);const u=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${i("sha1").update(t+p).digest("base64")}`],m=new this.options.WebSocket(null,void 0,this.options);if(r.size){const e=this.options.handleProtocols?this.options.handleProtocols(r,s):r.values().next().value;e&&(u.push(`Sec-WebSocket-Protocol: ${e}`),m._protocol=e)}if(e[c.extensionName]){const t=e[c.extensionName].params,r=a.format({[c.extensionName]:[t]});u.push(`Sec-WebSocket-Extensions: ${r}`),m._extensions=e}this.emit("headers",u,s),o.write(u.concat("\r\n").join("\r\n")),o.removeListener("error",socketOnError),m.setSocket(o,n,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(m),m.on("close",(()=>{this.clients.delete(m),this._shouldEmitClose&&!this.clients.size&&process.nextTick(emitClose,this)}))),l(m,s)}}},64285:(e,t,r)=>{"use strict";const s=r(41236).fromCallback;e.exports={copy:s(r(54728)),copySync:r(30786)}},72134:(e,t,r)=>{"use strict";const s=r(41236).fromCallback,o=r(16928),n=r(63735),i=r(98808);e.exports={createFile:s((function createFile(e,t){function makeFile(){n.writeFile(e,"",(e=>{if(e)return t(e);t()}))}n.stat(e,((r,s)=>{if(!r&&s.isFile())return t();const a=o.dirname(e);n.stat(a,((e,r)=>{if(e)return"ENOENT"===e.code?i.mkdirs(a,(e=>{if(e)return t(e);makeFile()})):t(e);r.isDirectory()?makeFile():n.readdir(a,(e=>{if(e)return t(e)}))}))}))})),createFileSync:function createFileSync(e){let t;try{t=n.statSync(e)}catch{}if(t&&t.isFile())return;const r=o.dirname(e);try{n.statSync(r).isDirectory()||n.readdirSync(r)}catch(e){if(!e||"ENOENT"!==e.code)throw e;i.mkdirsSync(r)}n.writeFileSync(e,"")}}},75617:(e,t,r)=>{e.exports=r(58303)},77361:(e,t,r)=>{"use strict";const s=r(41236).fromPromise,o=r(43439),n=r(16928),i=r(98808),a=r(12512),c=s((async function emptyDir(e){let t;try{t=await o.readdir(e)}catch{return i.mkdirs(e)}return Promise.all(t.map((t=>a.remove(n.join(e,t)))))}));function emptyDirSync(e){let t;try{t=o.readdirSync(e)}catch{return i.mkdirsSync(e)}t.forEach((t=>{t=n.join(e,t),a.removeSync(t)}))}e.exports={emptyDirSync,emptydirSync:emptyDirSync,emptyDir:c,emptydir:c}},78100:(e,t)=>{"use strict";function deferred(){let e,t,r="pending";return{promise:new Promise(((r,s)=>{e=r,t=s})),done(t){"pending"===r&&(r="resolved",e(t))},fail(e){"pending"===r&&(r="rejected",t(e))},get fulfilled(){return"pending"!==r},get status(){return r}}}t.ud=t.yX=void 0,t.yX=deferred,t.ud=deferred},79585:(e,t,r)=>{"use strict";const s=r(16928);e.exports.checkPath=function checkPath(e){if("win32"===process.platform){if(/[<>:"|?*]/.test(e.replace(s.parse(e).root,""))){const t=new Error(`Path contains invalid characters: ${e}`);throw t.code="EINVAL",t}}}},80322:(e,t,r)=>{"use strict";const s=r(41236).fromCallback,o=r(63735),n=r(16928),i=r(98808),a=r(12426).pathExists;e.exports={outputFile:s((function outputFile(e,t,r,s){"function"==typeof r&&(s=r,r="utf8");const c=n.dirname(e);a(c,((n,a)=>n?s(n):a?o.writeFile(e,t,r,s):void i.mkdirs(c,(n=>{if(n)return s(n);o.writeFile(e,t,r,s)}))))})),outputFileSync:function outputFileSync(e,...t){const r=n.dirname(e);if(o.existsSync(r))return o.writeFileSync(e,...t);i.mkdirsSync(r),o.writeFileSync(e,...t)}}},80811:(e,t,r)=>{var s=r(84346),o=r(21640),n=r(25447),i=Function.bind,a=i.bind(i);function bindApi(e,t,r){var s=a(n,null).apply(null,r?[t,r]:[t]);e.api={remove:s},e.remove=s,["before","error","after","wrap"].forEach((function(s){var n=r?[t,s,r]:[t,s];e[s]=e.api[s]=a(o,null).apply(null,n)}))}function HookCollection(){var e={registry:{}},t=s.bind(null,e);return bindApi(t,e),t}var c=!1;function Hook(){return c||(console.warn('[before-after-hook]: "Hook()" repurposing warning, use "Hook.Collection()". Read more: https://git.io/upgrade-before-after-hook-to-1.4'),c=!0),HookCollection()}Hook.Singular=function HookSingular(){var e={registry:{}},t=s.bind(null,e,"h");return bindApi(t,e,"h"),t}.bind(),Hook.Collection=HookCollection.bind(),e.exports=Hook,e.exports.Hook=Hook,e.exports.Singular=Hook.Singular,e.exports.Collection=Hook.Collection},80914:(e,t,r)=>{"use strict";const{Duplex:s}=r(2203),{randomFillSync:o}=r(76982),n=r(42971),{EMPTY_BUFFER:i,kWebSocket:a,NOOP:c}=r(32614),{isBlob:l,isValidStatusCode:u}=r(95880),{mask:p,toBuffer:d}=r(93338),m=Symbol("kByteLength"),h=Buffer.alloc(4),g=8192;let y,w=g;class Sender{constructor(e,t,r){this._extensions=t||{},r&&(this._generateMask=r,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=0,this.onerror=c,this[a]=void 0}static frame(e,t){let r,s,n=!1,i=2,a=!1;t.mask&&(r=t.maskBuffer||h,t.generateMask?t.generateMask(r):(w===g&&(void 0===y&&(y=Buffer.alloc(g)),o(y,0,g),w=0),r[0]=y[w++],r[1]=y[w++],r[2]=y[w++],r[3]=y[w++]),a=!(r[0]|r[1]|r[2]|r[3]),i=6),"string"==typeof e?s=t.mask&&!a||void 0===t[m]?(e=Buffer.from(e)).length:t[m]:(s=e.length,n=t.mask&&t.readOnly&&!a);let c=s;s>=65536?(i+=8,c=127):s>125&&(i+=2,c=126);const l=Buffer.allocUnsafe(n?s+i:i);return l[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(l[0]|=64),l[1]=c,126===c?l.writeUInt16BE(s,2):127===c&&(l[2]=l[3]=0,l.writeUIntBE(s,4,6)),t.mask?(l[1]|=128,l[i-4]=r[0],l[i-3]=r[1],l[i-2]=r[2],l[i-1]=r[3],a?[l,e]:n?(p(e,r,l,i,s),[l]):(p(e,r,e,0,s),[l,e])):[l,e]}close(e,t,r,s){let o;if(void 0===e)o=i;else{if("number"!=typeof e||!u(e))throw new TypeError("First argument must be a valid error code number");if(void 0!==t&&t.length){const r=Buffer.byteLength(t);if(r>123)throw new RangeError("The message must not be greater than 123 bytes");o=Buffer.allocUnsafe(2+r),o.writeUInt16BE(e,0),"string"==typeof t?o.write(t,2):o.set(t,2)}else o=Buffer.allocUnsafe(2),o.writeUInt16BE(e,0)}const n={[m]:o.length,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};0!==this._state?this.enqueue([this.dispatch,o,!1,n,s]):this.sendFrame(Sender.frame(o,n),s)}ping(e,t,r){let s,o;if("string"==typeof e?(s=Buffer.byteLength(e),o=!1):l(e)?(s=e.size,o=!1):(s=(e=d(e)).length,o=d.readOnly),s>125)throw new RangeError("The data size must not be greater than 125 bytes");const n={[m]:s,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:o,rsv1:!1};l(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,n,r]):this.getBlobData(e,!1,n,r):0!==this._state?this.enqueue([this.dispatch,e,!1,n,r]):this.sendFrame(Sender.frame(e,n),r)}pong(e,t,r){let s,o;if("string"==typeof e?(s=Buffer.byteLength(e),o=!1):l(e)?(s=e.size,o=!1):(s=(e=d(e)).length,o=d.readOnly),s>125)throw new RangeError("The data size must not be greater than 125 bytes");const n={[m]:s,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:o,rsv1:!1};l(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,n,r]):this.getBlobData(e,!1,n,r):0!==this._state?this.enqueue([this.dispatch,e,!1,n,r]):this.sendFrame(Sender.frame(e,n),r)}send(e,t,r){const s=this._extensions[n.extensionName];let o,i,a=t.binary?2:1,c=t.compress;"string"==typeof e?(o=Buffer.byteLength(e),i=!1):l(e)?(o=e.size,i=!1):(o=(e=d(e)).length,i=d.readOnly),this._firstFragment?(this._firstFragment=!1,c&&s&&s.params[s._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(c=o>=s._threshold),this._compress=c):(c=!1,a=0),t.fin&&(this._firstFragment=!0);const u={[m]:o,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:i,rsv1:c};l(e)?0!==this._state?this.enqueue([this.getBlobData,e,this._compress,u,r]):this.getBlobData(e,this._compress,u,r):0!==this._state?this.enqueue([this.dispatch,e,this._compress,u,r]):this.dispatch(e,this._compress,u,r)}getBlobData(e,t,r,s){this._bufferedBytes+=r[m],this._state=2,e.arrayBuffer().then((e=>{if(this._socket.destroyed){const e=new Error("The socket was closed while the blob was being read");return void process.nextTick(callCallbacks,this,e,s)}this._bufferedBytes-=r[m];const o=d(e);t?this.dispatch(o,t,r,s):(this._state=0,this.sendFrame(Sender.frame(o,r),s),this.dequeue())})).catch((e=>{process.nextTick(onError,this,e,s)}))}dispatch(e,t,r,s){if(!t)return void this.sendFrame(Sender.frame(e,r),s);const o=this._extensions[n.extensionName];this._bufferedBytes+=r[m],this._state=1,o.compress(e,r.fin,((e,t)=>{if(this._socket.destroyed){callCallbacks(this,new Error("The socket was closed while data was being compressed"),s)}else this._bufferedBytes-=r[m],this._state=0,r.readOnly=!1,this.sendFrame(Sender.frame(t,r),s),this.dequeue()}))}dequeue(){for(;0===this._state&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[3][m],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][m],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}function callCallbacks(e,t,r){"function"==typeof r&&r(t);for(let r=0;r<e._queue.length;r++){const s=e._queue[r],o=s[s.length-1];"function"==typeof o&&o(t)}}function onError(e,t,r){callCallbacks(e,t,r),e.onerror(t)}e.exports=Sender},81530:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AppInsightsCreateStep:()=>AppInsightsCreateStep,AppInsightsListStep:()=>AppInsightsListStep,AppKind:()=>Z,AppServicePlanCreateStep:()=>AppServicePlanCreateStep,AppServicePlanListStep:()=>AppServicePlanListStep,AppServicePlanRedundancyStep:()=>AppServicePlanRedundancyStep,AppServicePlanSkuStep:()=>AppServicePlanSkuStep,AppSource:()=>Go,CustomLocationListStep:()=>CustomLocationListStep,DeleteLastServicePlanStep:()=>DeleteLastServicePlanStep,DeleteSiteStep:()=>DeleteSiteStep,DeploymentTreeItem:()=>DeploymentTreeItem,DeploymentsTreeItem:()=>DeploymentsTreeItem,DomainNameLabelScope:()=>ee,FileTreeItem:()=>FileTreeItem,FolderTreeItem:()=>FolderTreeItem,LogAnalyticsCreateStep:()=>LogAnalyticsCreateStep,LogFilesTreeItem:()=>LogFilesTreeItem,ParsedSite:()=>ParsedSite,RemoteDebugLanguage:()=>jo,SiteClient:()=>SiteClient,SiteDomainNameLabelScopeStep:()=>SiteDomainNameLabelScopeStep,SiteFilesTreeItem:()=>SiteFilesTreeItem,SiteNameStep:()=>SiteNameStep,SiteOSStep:()=>SiteOSStep,TunnelProxy:()=>TunnelProxy,WebsiteOS:()=>K,appInsightsNamingRules:()=>H,confirmOverwriteSettings:()=>confirmOverwriteSettings,createAppInsightsClient:()=>createAppInsightsClient,createOperationalInsightsManagementClient:()=>createOperationalInsightsManagementClient,createResourceClient:()=>createResourceClient,createResourceGraphClient:()=>createResourceGraphClient,createSiteFilesUrl:()=>createSiteFilesUrl,createSlot:()=>createSlot,createWebSiteClient:()=>createWebSiteClient,deploy:()=>deploy,disconnectRepo:()=>disconnectRepo,editScmType:()=>editScmType,getDeployFsPath:()=>getDeployFsPath,getDeployNode:()=>getDeployNode,getFile:()=>getFile,getWebLocations:()=>getWebLocations,handleFailedPreDeployTask:()=>handleFailedPreDeployTask,listFiles:()=>listFiles,localGitDeploy:()=>localGitDeploy,pingFunctionApp:()=>pingFunctionApp,putFile:()=>putFile,registerAppServiceExtensionVariables:()=>registerAppServiceExtensionVariables,registerSiteCommand:()=>registerSiteCommand,reportMessage:()=>reportMessage,runPreDeployTask:()=>runPreDeployTask,setLocationsTask:()=>setLocationsTask,setRemoteDebug:()=>setRemoteDebug,showDeployConfirmation:()=>showDeployConfirmation,startRemoteDebug:()=>startRemoteDebug,startStreamingLogs:()=>startStreamingLogs,stopStreamingLogs:()=>stopStreamingLogs,swapSlot:()=>swapSlot,tryGetAppServicePlan:()=>tryGetAppServicePlan,tryGetWebApp:()=>tryGetWebApp,tryGetWebAppSlot:()=>tryGetWebAppSlot,tryRunPreDeployTask:()=>tryRunPreDeployTask});var s=r(30546),o=r(91398),n=r(99348);let i=new class UninitializedExtensionVariables{_error=new Error(o.l10n.t('"registerGitHubExtensionVariables" must be called before using the vscode-azext-github package.'));get context(){throw this._error}get outputChannel(){throw this._error}get ui(){throw this._error}get prefix(){throw this._error}};function getUserAgent(){return"object"==typeof navigator&&"userAgent"in navigator?navigator.userAgent:"object"==typeof process&&void 0!==process.version?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}var a=r(80811);function mergeDeep(e,t){const r=Object.assign({},e);return Object.keys(t).forEach((s=>{!function isPlainObject(e){if("object"!=typeof e||null===e)return!1;if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);if(null===t)return!0;const r=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Function.prototype.call(r)===Function.prototype.call(e)}(t[s])?Object.assign(r,{[s]:t[s]}):s in e?r[s]=mergeDeep(e[s],t[s]):Object.assign(r,{[s]:t[s]})})),r}function removeUndefinedProperties(e){for(const t in e)void 0===e[t]&&delete e[t];return e}function merge(e,t,r){if("string"==typeof t){let[e,s]=t.split(" ");r=Object.assign(s?{method:e,url:s}:{url:e},r)}else r=Object.assign({},t);r.headers=function lowercaseKeys(e){return e?Object.keys(e).reduce(((t,r)=>(t[r.toLowerCase()]=e[r],t)),{}):{}}(r.headers),removeUndefinedProperties(r),removeUndefinedProperties(r.headers);const s=mergeDeep(e||{},r);return"/graphql"===r.url&&(e&&e.mediaType.previews?.length&&(s.mediaType.previews=e.mediaType.previews.filter((e=>!s.mediaType.previews.includes(e))).concat(s.mediaType.previews)),s.mediaType.previews=(s.mediaType.previews||[]).map((e=>e.replace(/-preview/,"")))),s}const c=/\{[^{}}]+\}/g;function removeNonChars(e){return e.replace(/(?:^\W+)|(?:(?<!\W)\W+$)/g,"").split(/,/)}function omit(e,t){const r={__proto__:null};for(const s of Object.keys(e))-1===t.indexOf(s)&&(r[s]=e[s]);return r}function encodeReserved(e){return e.split(/(%[0-9A-Fa-f]{2})/g).map((function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e})).join("")}function encodeUnreserved(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function encodeValue(e,t,r){return t="+"===e||"#"===e?encodeReserved(t):encodeUnreserved(t),r?encodeUnreserved(r)+"="+t:t}function isDefined(e){return null!=e}function isKeyOperator(e){return";"===e||"&"===e||"?"===e}function expand(e,t){var r=["+","#",".","/",";","?","&"];return e=e.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,(function(e,s,o){if(s){let e="";const o=[];if(-1!==r.indexOf(s.charAt(0))&&(e=s.charAt(0),s=s.substr(1)),s.split(/,/g).forEach((function(r){var s=/([^:\*]*)(?::(\d+)|(\*))?/.exec(r);o.push(function getValues(e,t,r,s){var o=e[r],n=[];if(isDefined(o)&&""!==o)if("string"==typeof o||"number"==typeof o||"boolean"==typeof o)o=o.toString(),s&&"*"!==s&&(o=o.substring(0,parseInt(s,10))),n.push(encodeValue(t,o,isKeyOperator(t)?r:""));else if("*"===s)Array.isArray(o)?o.filter(isDefined).forEach((function(e){n.push(encodeValue(t,e,isKeyOperator(t)?r:""))})):Object.keys(o).forEach((function(e){isDefined(o[e])&&n.push(encodeValue(t,o[e],e))}));else{const e=[];Array.isArray(o)?o.filter(isDefined).forEach((function(r){e.push(encodeValue(t,r))})):Object.keys(o).forEach((function(r){isDefined(o[r])&&(e.push(encodeUnreserved(r)),e.push(encodeValue(t,o[r].toString())))})),isKeyOperator(t)?n.push(encodeUnreserved(r)+"="+e.join(",")):0!==e.length&&n.push(e.join(","))}else";"===t?isDefined(o)&&n.push(encodeUnreserved(r)):""!==o||"&"!==t&&"?"!==t?""===o&&n.push(""):n.push(encodeUnreserved(r)+"=");return n}(t,e,s[1],s[2]||s[3]))})),e&&"+"!==e){var n=",";return"?"===e?n="&":"#"!==e&&(n=e),(0!==o.length?e:"")+o.join(n)}return o.join(",")}return encodeReserved(o)})),"/"===e?e:e.replace(/\/$/,"")}function parse(e){let t,r=e.method.toUpperCase(),s=(e.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),o=Object.assign({},e.headers),n=omit(e,["method","baseUrl","url","headers","request","mediaType"]);const i=function extractUrlVariableNames(e){const t=e.match(c);return t?t.map(removeNonChars).reduce(((e,t)=>e.concat(t)),[]):[]}(s);s=function parseUrl(e){return{expand:expand.bind(null,e)}}(s).expand(n),/^http/.test(s)||(s=e.baseUrl+s);const a=omit(n,Object.keys(e).filter((e=>i.includes(e))).concat("baseUrl"));if(!/application\/octet-stream/i.test(o.accept)&&(e.mediaType.format&&(o.accept=o.accept.split(/,/).map((t=>t.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${e.mediaType.format}`))).join(",")),s.endsWith("/graphql")&&e.mediaType.previews?.length)){const t=o.accept.match(/(?<![\w-])[\w-]+(?=-preview)/g)||[];o.accept=t.concat(e.mediaType.previews).map((t=>`application/vnd.github.${t}-preview${e.mediaType.format?`.${e.mediaType.format}`:"+json"}`)).join(",")}return["GET","HEAD"].includes(r)?s=function addQueryParameters(e,t){const r=/\?/.test(e)?"&":"?",s=Object.keys(t);return 0===s.length?e:e+r+s.map((e=>"q"===e?"q="+t.q.split("+").map(encodeURIComponent).join("+"):`${e}=${encodeURIComponent(t[e])}`)).join("&")}(s,a):"data"in a?t=a.data:Object.keys(a).length&&(t=a),o["content-type"]||void 0===t||(o["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(r)&&void 0===t&&(t=""),Object.assign({method:r,url:s,headers:o},void 0!==t?{body:t}:null,e.request?{request:e.request}:null)}function endpointWithDefaults(e,t,r){return parse(merge(e,t,r))}const l=function withDefaults(e,t){const r=merge(e,t),s=endpointWithDefaults.bind(null,r);return Object.assign(s,{DEFAULTS:r,defaults:withDefaults.bind(null,r),merge:merge.bind(null,r),parse})}(null,{method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":`octokit-endpoint.js/9.0.6 ${getUserAgent()}`},mediaType:{format:""}});class Deprecation extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="Deprecation"}}var u=r(83519),p=r.n(u);const d=p()((e=>console.warn(e))),m=p()((e=>console.warn(e)));class RequestError extends Error{constructor(e,t,r){let s;super(e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=t,"headers"in r&&void 0!==r.headers&&(s=r.headers),"response"in r&&(this.response=r.response,s=r.response.headers);const o=Object.assign({},r.request);r.request.headers.authorization&&(o.headers=Object.assign({},r.request.headers,{authorization:r.request.headers.authorization.replace(/(?<! ) .*$/," [REDACTED]")})),o.url=o.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=o,Object.defineProperty(this,"code",{get:()=>(d(new Deprecation("[@octokit/request-error] `error.code` is deprecated, use `error.status`.")),t)}),Object.defineProperty(this,"headers",{get:()=>(m(new Deprecation("[@octokit/request-error] `error.headers` is deprecated, use `error.response.headers`.")),s||{})})}}function fetchWrapper(e){const t=e.request&&e.request.log?e.request.log:console,r=!1!==e.request?.parseSuccessResponseBody;(function is_plain_object_isPlainObject(e){if("object"!=typeof e||null===e)return!1;if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);if(null===t)return!0;const r=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Function.prototype.call(r)===Function.prototype.call(e)}(e.body)||Array.isArray(e.body))&&(e.body=JSON.stringify(e.body));let s,o,n={},{fetch:i}=globalThis;if(e.request?.fetch&&(i=e.request.fetch),!i)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");return i(e.url,{method:e.method,body:e.body,redirect:e.request?.redirect,headers:e.headers,signal:e.request?.signal,...e.body&&{duplex:"half"}}).then((async i=>{o=i.url,s=i.status;for(const e of i.headers)n[e[0]]=e[1];if("deprecation"in n){const r=n.link&&n.link.match(/<([^<>]+)>; rel="deprecation"/),s=r&&r.pop();t.warn(`[@octokit/request] "${e.method} ${e.url}" is deprecated. It is scheduled to be removed on ${n.sunset}${s?`. See ${s}`:""}`)}if(204!==s&&205!==s){if("HEAD"===e.method){if(s<400)return;throw new RequestError(i.statusText,s,{response:{url:o,status:s,headers:n,data:void 0},request:e})}if(304===s)throw new RequestError("Not modified",s,{response:{url:o,status:s,headers:n,data:await getResponseData(i)},request:e});if(s>=400){const t=await getResponseData(i),r=new RequestError(function toErrorMessage(e){if("string"==typeof e)return e;let t;t="documentation_url"in e?` - ${e.documentation_url}`:"";if("message"in e)return Array.isArray(e.errors)?`${e.message}: ${e.errors.map(JSON.stringify).join(", ")}${t}`:`${e.message}${t}`;return`Unknown error: ${JSON.stringify(e)}`}(t),s,{response:{url:o,status:s,headers:n,data:t},request:e});throw r}return r?await getResponseData(i):i.body}})).then((e=>({status:s,url:o,headers:n,data:e}))).catch((t=>{if(t instanceof RequestError)throw t;if("AbortError"===t.name)throw t;let r=t.message;throw"TypeError"===t.name&&"cause"in t&&(t.cause instanceof Error?r=t.cause.message:"string"==typeof t.cause&&(r=t.cause)),new RequestError(r,500,{request:e})}))}async function getResponseData(e){const t=e.headers.get("content-type");return/application\/json/.test(t)?e.json().catch((()=>e.text())).catch((()=>"")):!t||/^text\/|charset=utf-8$/.test(t)?e.text():function getBufferResponse(e){return e.arrayBuffer()}(e)}const h=function with_defaults_withDefaults(e,t){const r=e.defaults(t);return Object.assign((function(e,t){const s=r.merge(e,t);if(!s.request||!s.request.hook)return fetchWrapper(r.parse(s));const request=(e,t)=>fetchWrapper(r.parse(r.merge(e,t)));return Object.assign(request,{endpoint:r,defaults:with_defaults_withDefaults.bind(null,r)}),s.request.hook(request,s)}),{endpoint:r,defaults:with_defaults_withDefaults.bind(null,r)})}(l,{headers:{"user-agent":`octokit-request.js/8.4.1 ${getUserAgent()}`}});var g=class extends Error{constructor(e,t,r){super(function _buildMessageForResponseErrors(e){return"Request failed due to following response errors:\n"+e.errors.map((e=>` - ${e.message}`)).join("\n")}(r)),this.request=e,this.headers=t,this.response=r,this.name="GraphqlResponseError",this.errors=r.errors,this.data=r.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},y=["method","baseUrl","url","headers","request","query","mediaType"],w=["query","method","url"],b=/\/api\/v3\/?$/;function dist_web_withDefaults(e,t){const r=e.defaults(t);return Object.assign(((e,t)=>function graphql(e,t,r){if(r){if("string"==typeof t&&"query"in r)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const e in r)if(w.includes(e))return Promise.reject(new Error(`[@octokit/graphql] "${e}" cannot be used as variable name`))}const s="string"==typeof t?Object.assign({query:t},r):t,o=Object.keys(s).reduce(((e,t)=>y.includes(t)?(e[t]=s[t],e):(e.variables||(e.variables={}),e.variables[t]=s[t],e)),{}),n=s.baseUrl||e.endpoint.DEFAULTS.baseUrl;return b.test(n)&&(o.url=n.replace(b,"/api/graphql")),e(o).then((e=>{if(e.data.errors){const t={};for(const r of Object.keys(e.headers))t[r]=e.headers[r];throw new g(o,t,e.data)}return e.data.data}))}(r,e,t)),{defaults:dist_web_withDefaults.bind(null,r),endpoint:r.endpoint})}dist_web_withDefaults(h,{headers:{"user-agent":`octokit-graphql.js/7.1.1 ${getUserAgent()}`},method:"POST",url:"/graphql"});const E=/^v1\./,T=/^ghs_/,S=/^ghu_/;async function auth(e){const t=3===e.split(/\./).length,r=E.test(e)||T.test(e),s=S.test(e);return{type:"token",token:e,tokenType:t?"app":r?"installation":s?"user-to-server":"oauth"}}async function hook(e,t,r,s){const o=t.endpoint.merge(r,s);return o.headers.authorization=function withAuthorizationPrefix(e){return 3===e.split(/\./).length?`bearer ${e}`:`token ${e}`}(e),t(o)}const _=function createTokenAuth2(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if("string"!=typeof e)throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(auth.bind(null,e),{hook:hook.bind(null,e)})};var k="5.2.2",noop=()=>{},v=console.warn.bind(console),P=console.error.bind(console);var C=`octokit-core.js/${k} ${getUserAgent()}`,A=class{static{this.VERSION=k}static defaults(e){return class extends(this){constructor(...t){const r=t[0]||{};super("function"!=typeof e?Object.assign({},e,r,r.userAgent&&e.userAgent?{userAgent:`${r.userAgent} ${e.userAgent}`}:null):e(r))}}}static{this.plugins=[]}static plugin(...e){const t=this.plugins;return class extends(this){static{this.plugins=t.concat(e.filter((e=>!t.includes(e))))}}}constructor(e={}){const t=new a.Collection,r={baseUrl:h.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:t.bind(null,"request")}),mediaType:{previews:[],format:""}};if(r.headers["user-agent"]=e.userAgent?`${e.userAgent} ${C}`:C,e.baseUrl&&(r.baseUrl=e.baseUrl),e.previews&&(r.mediaType.previews=e.previews),e.timeZone&&(r.headers["time-zone"]=e.timeZone),this.request=h.defaults(r),this.graphql=function withCustomRequest(e){return dist_web_withDefaults(e,{method:"POST",url:"/graphql"})}(this.request).defaults(r),this.log=function createLogger(e={}){return"function"!=typeof e.debug&&(e.debug=noop),"function"!=typeof e.info&&(e.info=noop),"function"!=typeof e.warn&&(e.warn=v),"function"!=typeof e.error&&(e.error=P),e}(e.log),this.hook=t,e.authStrategy){const{authStrategy:r,...s}=e,o=r(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:s},e.auth));t.wrap("request",o.hook),this.auth=o}else if(e.auth){const r=_(e.auth);t.wrap("request",r.hook),this.auth=r}else this.auth=async()=>({type:"unauthenticated"});const s=this.constructor;for(let t=0;t<s.plugins.length;++t)Object.assign(this,s.plugins[t](this,e))}};function requestLog(e){e.hook.wrap("request",((t,r)=>{e.log.debug("request",r);const s=Date.now(),o=e.request.endpoint.parse(r),n=o.url.replace(r.baseUrl,"");return t(r).then((t=>(e.log.info(`${o.method} ${n} - ${t.status} in ${Date.now()-s}ms`),t))).catch((t=>{throw e.log.info(`${o.method} ${n} - ${t.status} in ${Date.now()-s}ms`),t}))}))}requestLog.VERSION="4.0.1";function iterator(e,t,r){const s="function"==typeof t?t.endpoint(r):e.request.endpoint(t,r),o="function"==typeof t?t:e.request,n=s.method,i=s.headers;let a=s.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!a)return{done:!0};try{const e=function normalizePaginatedListResponse(e){if(!e.data)return{...e,data:[]};if(!("total_count"in e.data)||"url"in e.data)return e;const t=e.data.incomplete_results,r=e.data.repository_selection,s=e.data.total_count;delete e.data.incomplete_results,delete e.data.repository_selection,delete e.data.total_count;const o=Object.keys(e.data)[0],n=e.data[o];return e.data=n,void 0!==t&&(e.data.incomplete_results=t),void 0!==r&&(e.data.repository_selection=r),e.data.total_count=s,e}(await o({method:n,url:a,headers:i}));return a=((e.headers.link||"").match(/<([^<>]+)>;\s*rel="next"/)||[])[1],{value:e}}catch(e){if(409!==e.status)throw e;return a="",{value:{status:200,headers:{},data:[]}}}}})}}function paginate(e,t,r,s){return"function"==typeof r&&(s=r,r=void 0),gather(e,[],iterator(e,t,r)[Symbol.asyncIterator](),s)}function gather(e,t,r,s){return r.next().then((o=>{if(o.done)return t;let n=!1;return t=t.concat(s?s(o.value,(function done(){n=!0})):o.value.data),n?t:gather(e,t,r,s)}))}Object.assign(paginate,{iterator});function paginateRest(e){return{paginate:Object.assign(paginate.bind(null,e),{iterator:iterator.bind(null,e)})}}paginateRest.VERSION="11.4.4-cjs.2";const O="13.3.2-cjs.1";var R={actions:{addCustomLabelsToSelfHostedRunnerForOrg:["POST /orgs/{org}/actions/runners/{runner_id}/labels"],addCustomLabelsToSelfHostedRunnerForRepo:["POST /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],addRepoAccessToSelfHostedRunnerGroupInOrg:["PUT /orgs/{org}/actions/runner-groups/{runner_group_id}/repositories/{repository_id}"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],approveWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/approve"],cancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel"],createEnvironmentVariable:["POST /repos/{owner}/{repo}/environments/{environment_name}/variables"],createOrUpdateEnvironmentSecret:["PUT /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}"],createOrgVariable:["POST /orgs/{org}/actions/variables"],createRegistrationTokenForOrg:["POST /orgs/{org}/actions/runners/registration-token"],createRegistrationTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/registration-token"],createRemoveTokenForOrg:["POST /orgs/{org}/actions/runners/remove-token"],createRemoveTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/remove-token"],createRepoVariable:["POST /repos/{owner}/{repo}/actions/variables"],createWorkflowDispatch:["POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches"],deleteActionsCacheById:["DELETE /repos/{owner}/{repo}/actions/caches/{cache_id}"],deleteActionsCacheByKey:["DELETE /repos/{owner}/{repo}/actions/caches{?key,ref}"],deleteArtifact:["DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],deleteEnvironmentSecret:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],deleteEnvironmentVariable:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],deleteOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}"],deleteOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}"],deleteRepoVariable:["DELETE /repos/{owner}/{repo}/actions/variables/{name}"],deleteSelfHostedRunnerFromOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}"],deleteSelfHostedRunnerFromRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}"],deleteWorkflowRun:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}"],deleteWorkflowRunLogs:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],disableSelectedRepositoryGithubActionsOrganization:["DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}"],disableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable"],downloadArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}"],downloadJobLogsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs"],downloadWorkflowRunAttemptLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/logs"],downloadWorkflowRunLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],enableSelectedRepositoryGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories/{repository_id}"],enableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable"],forceCancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/force-cancel"],generateRunnerJitconfigForOrg:["POST /orgs/{org}/actions/runners/generate-jitconfig"],generateRunnerJitconfigForRepo:["POST /repos/{owner}/{repo}/actions/runners/generate-jitconfig"],getActionsCacheList:["GET /repos/{owner}/{repo}/actions/caches"],getActionsCacheUsage:["GET /repos/{owner}/{repo}/actions/cache/usage"],getActionsCacheUsageByRepoForOrg:["GET /orgs/{org}/actions/cache/usage-by-repository"],getActionsCacheUsageForOrg:["GET /orgs/{org}/actions/cache/usage"],getAllowedActionsOrganization:["GET /orgs/{org}/actions/permissions/selected-actions"],getAllowedActionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/selected-actions"],getArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],getCustomOidcSubClaimForRepo:["GET /repos/{owner}/{repo}/actions/oidc/customization/sub"],getEnvironmentPublicKey:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/public-key"],getEnvironmentSecret:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],getEnvironmentVariable:["GET /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],getGithubActionsDefaultWorkflowPermissionsOrganization:["GET /orgs/{org}/actions/permissions/workflow"],getGithubActionsDefaultWorkflowPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/workflow"],getGithubActionsPermissionsOrganization:["GET /orgs/{org}/actions/permissions"],getGithubActionsPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions"],getJobForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}"],getOrgPublicKey:["GET /orgs/{org}/actions/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}"],getOrgVariable:["GET /orgs/{org}/actions/variables/{name}"],getPendingDeploymentsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],getRepoPermissions:["GET /repos/{owner}/{repo}/actions/permissions",{},{renamed:["actions","getGithubActionsPermissionsRepository"]}],getRepoPublicKey:["GET /repos/{owner}/{repo}/actions/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/actions/secrets/{secret_name}"],getRepoVariable:["GET /repos/{owner}/{repo}/actions/variables/{name}"],getReviewsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/approvals"],getSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}"],getSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}"],getWorkflow:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}"],getWorkflowAccessToRepository:["GET /repos/{owner}/{repo}/actions/permissions/access"],getWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}"],getWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}"],getWorkflowRunUsage:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing"],getWorkflowUsage:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing"],listArtifactsForRepo:["GET /repos/{owner}/{repo}/actions/artifacts"],listEnvironmentSecrets:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets"],listEnvironmentVariables:["GET /repos/{owner}/{repo}/environments/{environment_name}/variables"],listJobsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs"],listJobsForWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/jobs"],listLabelsForSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}/labels"],listLabelsForSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],listOrgSecrets:["GET /orgs/{org}/actions/secrets"],listOrgVariables:["GET /orgs/{org}/actions/variables"],listRepoOrganizationSecrets:["GET /repos/{owner}/{repo}/actions/organization-secrets"],listRepoOrganizationVariables:["GET /repos/{owner}/{repo}/actions/organization-variables"],listRepoSecrets:["GET /repos/{owner}/{repo}/actions/secrets"],listRepoVariables:["GET /repos/{owner}/{repo}/actions/variables"],listRepoWorkflows:["GET /repos/{owner}/{repo}/actions/workflows"],listRunnerApplicationsForOrg:["GET /orgs/{org}/actions/runners/downloads"],listRunnerApplicationsForRepo:["GET /repos/{owner}/{repo}/actions/runners/downloads"],listSelectedReposForOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}/repositories"],listSelectedReposForOrgVariable:["GET /orgs/{org}/actions/variables/{name}/repositories"],listSelectedRepositoriesEnabledGithubActionsOrganization:["GET /orgs/{org}/actions/permissions/repositories"],listSelfHostedRunnersForOrg:["GET /orgs/{org}/actions/runners"],listSelfHostedRunnersForRepo:["GET /repos/{owner}/{repo}/actions/runners"],listWorkflowRunArtifacts:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts"],listWorkflowRuns:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs"],listWorkflowRunsForRepo:["GET /repos/{owner}/{repo}/actions/runs"],reRunJobForWorkflowRun:["POST /repos/{owner}/{repo}/actions/jobs/{job_id}/rerun"],reRunWorkflow:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun"],reRunWorkflowFailedJobs:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun-failed-jobs"],removeAllCustomLabelsFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels"],removeAllCustomLabelsFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],removeCustomLabelFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels/{name}"],removeCustomLabelFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels/{name}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],reviewCustomGatesForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/deployment_protection_rule"],reviewPendingDeploymentsForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],setAllowedActionsOrganization:["PUT /orgs/{org}/actions/permissions/selected-actions"],setAllowedActionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/selected-actions"],setCustomLabelsForSelfHostedRunnerForOrg:["PUT /orgs/{org}/actions/runners/{runner_id}/labels"],setCustomLabelsForSelfHostedRunnerForRepo:["PUT /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],setCustomOidcSubClaimForRepo:["PUT /repos/{owner}/{repo}/actions/oidc/customization/sub"],setGithubActionsDefaultWorkflowPermissionsOrganization:["PUT /orgs/{org}/actions/permissions/workflow"],setGithubActionsDefaultWorkflowPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/workflow"],setGithubActionsPermissionsOrganization:["PUT /orgs/{org}/actions/permissions"],setGithubActionsPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories"],setSelectedReposForOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories"],setSelectedRepositoriesEnabledGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories"],setWorkflowAccessToRepository:["PUT /repos/{owner}/{repo}/actions/permissions/access"],updateEnvironmentVariable:["PATCH /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],updateOrgVariable:["PATCH /orgs/{org}/actions/variables/{name}"],updateRepoVariable:["PATCH /repos/{owner}/{repo}/actions/variables/{name}"]},activity:{checkRepoIsStarredByAuthenticatedUser:["GET /user/starred/{owner}/{repo}"],deleteRepoSubscription:["DELETE /repos/{owner}/{repo}/subscription"],deleteThreadSubscription:["DELETE /notifications/threads/{thread_id}/subscription"],getFeeds:["GET /feeds"],getRepoSubscription:["GET /repos/{owner}/{repo}/subscription"],getThread:["GET /notifications/threads/{thread_id}"],getThreadSubscriptionForAuthenticatedUser:["GET /notifications/threads/{thread_id}/subscription"],listEventsForAuthenticatedUser:["GET /users/{username}/events"],listNotificationsForAuthenticatedUser:["GET /notifications"],listOrgEventsForAuthenticatedUser:["GET /users/{username}/events/orgs/{org}"],listPublicEvents:["GET /events"],listPublicEventsForRepoNetwork:["GET /networks/{owner}/{repo}/events"],listPublicEventsForUser:["GET /users/{username}/events/public"],listPublicOrgEvents:["GET /orgs/{org}/events"],listReceivedEventsForUser:["GET /users/{username}/received_events"],listReceivedPublicEventsForUser:["GET /users/{username}/received_events/public"],listRepoEvents:["GET /repos/{owner}/{repo}/events"],listRepoNotificationsForAuthenticatedUser:["GET /repos/{owner}/{repo}/notifications"],listReposStarredByAuthenticatedUser:["GET /user/starred"],listReposStarredByUser:["GET /users/{username}/starred"],listReposWatchedByUser:["GET /users/{username}/subscriptions"],listStargazersForRepo:["GET /repos/{owner}/{repo}/stargazers"],listWatchedReposForAuthenticatedUser:["GET /user/subscriptions"],listWatchersForRepo:["GET /repos/{owner}/{repo}/subscribers"],markNotificationsAsRead:["PUT /notifications"],markRepoNotificationsAsRead:["PUT /repos/{owner}/{repo}/notifications"],markThreadAsDone:["DELETE /notifications/threads/{thread_id}"],markThreadAsRead:["PATCH /notifications/threads/{thread_id}"],setRepoSubscription:["PUT /repos/{owner}/{repo}/subscription"],setThreadSubscription:["PUT /notifications/threads/{thread_id}/subscription"],starRepoForAuthenticatedUser:["PUT /user/starred/{owner}/{repo}"],unstarRepoForAuthenticatedUser:["DELETE /user/starred/{owner}/{repo}"]},apps:{addRepoToInstallation:["PUT /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","addRepoToInstallationForAuthenticatedUser"]}],addRepoToInstallationForAuthenticatedUser:["PUT /user/installations/{installation_id}/repositories/{repository_id}"],checkToken:["POST /applications/{client_id}/token"],createFromManifest:["POST /app-manifests/{code}/conversions"],createInstallationAccessToken:["POST /app/installations/{installation_id}/access_tokens"],deleteAuthorization:["DELETE /applications/{client_id}/grant"],deleteInstallation:["DELETE /app/installations/{installation_id}"],deleteToken:["DELETE /applications/{client_id}/token"],getAuthenticated:["GET /app"],getBySlug:["GET /apps/{app_slug}"],getInstallation:["GET /app/installations/{installation_id}"],getOrgInstallation:["GET /orgs/{org}/installation"],getRepoInstallation:["GET /repos/{owner}/{repo}/installation"],getSubscriptionPlanForAccount:["GET /marketplace_listing/accounts/{account_id}"],getSubscriptionPlanForAccountStubbed:["GET /marketplace_listing/stubbed/accounts/{account_id}"],getUserInstallation:["GET /users/{username}/installation"],getWebhookConfigForApp:["GET /app/hook/config"],getWebhookDelivery:["GET /app/hook/deliveries/{delivery_id}"],listAccountsForPlan:["GET /marketplace_listing/plans/{plan_id}/accounts"],listAccountsForPlanStubbed:["GET /marketplace_listing/stubbed/plans/{plan_id}/accounts"],listInstallationReposForAuthenticatedUser:["GET /user/installations/{installation_id}/repositories"],listInstallationRequestsForAuthenticatedApp:["GET /app/installation-requests"],listInstallations:["GET /app/installations"],listInstallationsForAuthenticatedUser:["GET /user/installations"],listPlans:["GET /marketplace_listing/plans"],listPlansStubbed:["GET /marketplace_listing/stubbed/plans"],listReposAccessibleToInstallation:["GET /installation/repositories"],listSubscriptionsForAuthenticatedUser:["GET /user/marketplace_purchases"],listSubscriptionsForAuthenticatedUserStubbed:["GET /user/marketplace_purchases/stubbed"],listWebhookDeliveries:["GET /app/hook/deliveries"],redeliverWebhookDelivery:["POST /app/hook/deliveries/{delivery_id}/attempts"],removeRepoFromInstallation:["DELETE /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","removeRepoFromInstallationForAuthenticatedUser"]}],removeRepoFromInstallationForAuthenticatedUser:["DELETE /user/installations/{installation_id}/repositories/{repository_id}"],resetToken:["PATCH /applications/{client_id}/token"],revokeInstallationAccessToken:["DELETE /installation/token"],scopeToken:["POST /applications/{client_id}/token/scoped"],suspendInstallation:["PUT /app/installations/{installation_id}/suspended"],unsuspendInstallation:["DELETE /app/installations/{installation_id}/suspended"],updateWebhookConfigForApp:["PATCH /app/hook/config"]},billing:{getGithubActionsBillingOrg:["GET /orgs/{org}/settings/billing/actions"],getGithubActionsBillingUser:["GET /users/{username}/settings/billing/actions"],getGithubBillingUsageReportOrg:["GET /organizations/{org}/settings/billing/usage"],getGithubPackagesBillingOrg:["GET /orgs/{org}/settings/billing/packages"],getGithubPackagesBillingUser:["GET /users/{username}/settings/billing/packages"],getSharedStorageBillingOrg:["GET /orgs/{org}/settings/billing/shared-storage"],getSharedStorageBillingUser:["GET /users/{username}/settings/billing/shared-storage"]},checks:{create:["POST /repos/{owner}/{repo}/check-runs"],createSuite:["POST /repos/{owner}/{repo}/check-suites"],get:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}"],getSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}"],listAnnotations:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations"],listForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-runs"],listForSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs"],listSuitesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-suites"],rerequestRun:["POST /repos/{owner}/{repo}/check-runs/{check_run_id}/rerequest"],rerequestSuite:["POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest"],setSuitesPreferences:["PATCH /repos/{owner}/{repo}/check-suites/preferences"],update:["PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}"]},codeScanning:{commitAutofix:["POST /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix/commits"],createAutofix:["POST /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix"],createVariantAnalysis:["POST /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses"],deleteAnalysis:["DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}"],deleteCodeqlDatabase:["DELETE /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}"],getAlert:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}",{},{renamedParameters:{alert_id:"alert_number"}}],getAnalysis:["GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}"],getAutofix:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix"],getCodeqlDatabase:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}"],getDefaultSetup:["GET /repos/{owner}/{repo}/code-scanning/default-setup"],getSarif:["GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}"],getVariantAnalysis:["GET /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses/{codeql_variant_analysis_id}"],getVariantAnalysisRepoTask:["GET /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses/{codeql_variant_analysis_id}/repos/{repo_owner}/{repo_name}"],listAlertInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances"],listAlertsForOrg:["GET /orgs/{org}/code-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/code-scanning/alerts"],listAlertsInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances",{},{renamed:["codeScanning","listAlertInstances"]}],listCodeqlDatabases:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases"],listRecentAnalyses:["GET /repos/{owner}/{repo}/code-scanning/analyses"],updateAlert:["PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}"],updateDefaultSetup:["PATCH /repos/{owner}/{repo}/code-scanning/default-setup"],uploadSarif:["POST /repos/{owner}/{repo}/code-scanning/sarifs"]},codeSecurity:{attachConfiguration:["POST /orgs/{org}/code-security/configurations/{configuration_id}/attach"],attachEnterpriseConfiguration:["POST /enterprises/{enterprise}/code-security/configurations/{configuration_id}/attach"],createConfiguration:["POST /orgs/{org}/code-security/configurations"],createConfigurationForEnterprise:["POST /enterprises/{enterprise}/code-security/configurations"],deleteConfiguration:["DELETE /orgs/{org}/code-security/configurations/{configuration_id}"],deleteConfigurationForEnterprise:["DELETE /enterprises/{enterprise}/code-security/configurations/{configuration_id}"],detachConfiguration:["DELETE /orgs/{org}/code-security/configurations/detach"],getConfiguration:["GET /orgs/{org}/code-security/configurations/{configuration_id}"],getConfigurationForRepository:["GET /repos/{owner}/{repo}/code-security-configuration"],getConfigurationsForEnterprise:["GET /enterprises/{enterprise}/code-security/configurations"],getConfigurationsForOrg:["GET /orgs/{org}/code-security/configurations"],getDefaultConfigurations:["GET /orgs/{org}/code-security/configurations/defaults"],getDefaultConfigurationsForEnterprise:["GET /enterprises/{enterprise}/code-security/configurations/defaults"],getRepositoriesForConfiguration:["GET /orgs/{org}/code-security/configurations/{configuration_id}/repositories"],getRepositoriesForEnterpriseConfiguration:["GET /enterprises/{enterprise}/code-security/configurations/{configuration_id}/repositories"],getSingleConfigurationForEnterprise:["GET /enterprises/{enterprise}/code-security/configurations/{configuration_id}"],setConfigurationAsDefault:["PUT /orgs/{org}/code-security/configurations/{configuration_id}/defaults"],setConfigurationAsDefaultForEnterprise:["PUT /enterprises/{enterprise}/code-security/configurations/{configuration_id}/defaults"],updateConfiguration:["PATCH /orgs/{org}/code-security/configurations/{configuration_id}"],updateEnterpriseConfiguration:["PATCH /enterprises/{enterprise}/code-security/configurations/{configuration_id}"]},codesOfConduct:{getAllCodesOfConduct:["GET /codes_of_conduct"],getConductCode:["GET /codes_of_conduct/{key}"]},codespaces:{addRepositoryForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],checkPermissionsForDevcontainer:["GET /repos/{owner}/{repo}/codespaces/permissions_check"],codespaceMachinesForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/machines"],createForAuthenticatedUser:["POST /user/codespaces"],createOrUpdateOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],createOrUpdateSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}"],createWithPrForAuthenticatedUser:["POST /repos/{owner}/{repo}/pulls/{pull_number}/codespaces"],createWithRepoForAuthenticatedUser:["POST /repos/{owner}/{repo}/codespaces"],deleteForAuthenticatedUser:["DELETE /user/codespaces/{codespace_name}"],deleteFromOrganization:["DELETE /orgs/{org}/members/{username}/codespaces/{codespace_name}"],deleteOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],deleteSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}"],exportForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/exports"],getCodespacesForUserInOrg:["GET /orgs/{org}/members/{username}/codespaces"],getExportDetailsForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/exports/{export_id}"],getForAuthenticatedUser:["GET /user/codespaces/{codespace_name}"],getOrgPublicKey:["GET /orgs/{org}/codespaces/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}"],getPublicKeyForAuthenticatedUser:["GET /user/codespaces/secrets/public-key"],getRepoPublicKey:["GET /repos/{owner}/{repo}/codespaces/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],getSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}"],listDevcontainersInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/devcontainers"],listForAuthenticatedUser:["GET /user/codespaces"],listInOrganization:["GET /orgs/{org}/codespaces",{},{renamedParameters:{org_id:"org"}}],listInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces"],listOrgSecrets:["GET /orgs/{org}/codespaces/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/codespaces/secrets"],listRepositoriesForSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}/repositories"],listSecretsForAuthenticatedUser:["GET /user/codespaces/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],preFlightWithRepoForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/new"],publishForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/publish"],removeRepositoryForSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],repoMachinesForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/machines"],setRepositoriesForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],startForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/start"],stopForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/stop"],stopInOrganization:["POST /orgs/{org}/members/{username}/codespaces/{codespace_name}/stop"],updateForAuthenticatedUser:["PATCH /user/codespaces/{codespace_name}"]},copilot:{addCopilotSeatsForTeams:["POST /orgs/{org}/copilot/billing/selected_teams"],addCopilotSeatsForUsers:["POST /orgs/{org}/copilot/billing/selected_users"],cancelCopilotSeatAssignmentForTeams:["DELETE /orgs/{org}/copilot/billing/selected_teams"],cancelCopilotSeatAssignmentForUsers:["DELETE /orgs/{org}/copilot/billing/selected_users"],copilotMetricsForOrganization:["GET /orgs/{org}/copilot/metrics"],copilotMetricsForTeam:["GET /orgs/{org}/team/{team_slug}/copilot/metrics"],getCopilotOrganizationDetails:["GET /orgs/{org}/copilot/billing"],getCopilotSeatDetailsForUser:["GET /orgs/{org}/members/{username}/copilot"],listCopilotSeats:["GET /orgs/{org}/copilot/billing/seats"],usageMetricsForOrg:["GET /orgs/{org}/copilot/usage"],usageMetricsForTeam:["GET /orgs/{org}/team/{team_slug}/copilot/usage"]},dependabot:{addSelectedRepoToOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],deleteOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],getAlert:["GET /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"],getOrgPublicKey:["GET /orgs/{org}/dependabot/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}"],getRepoPublicKey:["GET /repos/{owner}/{repo}/dependabot/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/dependabot/alerts"],listAlertsForOrg:["GET /orgs/{org}/dependabot/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/dependabot/alerts"],listOrgSecrets:["GET /orgs/{org}/dependabot/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/dependabot/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],updateAlert:["PATCH /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"]},dependencyGraph:{createRepositorySnapshot:["POST /repos/{owner}/{repo}/dependency-graph/snapshots"],diffRange:["GET /repos/{owner}/{repo}/dependency-graph/compare/{basehead}"],exportSbom:["GET /repos/{owner}/{repo}/dependency-graph/sbom"]},emojis:{get:["GET /emojis"]},gists:{checkIsStarred:["GET /gists/{gist_id}/star"],create:["POST /gists"],createComment:["POST /gists/{gist_id}/comments"],delete:["DELETE /gists/{gist_id}"],deleteComment:["DELETE /gists/{gist_id}/comments/{comment_id}"],fork:["POST /gists/{gist_id}/forks"],get:["GET /gists/{gist_id}"],getComment:["GET /gists/{gist_id}/comments/{comment_id}"],getRevision:["GET /gists/{gist_id}/{sha}"],list:["GET /gists"],listComments:["GET /gists/{gist_id}/comments"],listCommits:["GET /gists/{gist_id}/commits"],listForUser:["GET /users/{username}/gists"],listForks:["GET /gists/{gist_id}/forks"],listPublic:["GET /gists/public"],listStarred:["GET /gists/starred"],star:["PUT /gists/{gist_id}/star"],unstar:["DELETE /gists/{gist_id}/star"],update:["PATCH /gists/{gist_id}"],updateComment:["PATCH /gists/{gist_id}/comments/{comment_id}"]},git:{createBlob:["POST /repos/{owner}/{repo}/git/blobs"],createCommit:["POST /repos/{owner}/{repo}/git/commits"],createRef:["POST /repos/{owner}/{repo}/git/refs"],createTag:["POST /repos/{owner}/{repo}/git/tags"],createTree:["POST /repos/{owner}/{repo}/git/trees"],deleteRef:["DELETE /repos/{owner}/{repo}/git/refs/{ref}"],getBlob:["GET /repos/{owner}/{repo}/git/blobs/{file_sha}"],getCommit:["GET /repos/{owner}/{repo}/git/commits/{commit_sha}"],getRef:["GET /repos/{owner}/{repo}/git/ref/{ref}"],getTag:["GET /repos/{owner}/{repo}/git/tags/{tag_sha}"],getTree:["GET /repos/{owner}/{repo}/git/trees/{tree_sha}"],listMatchingRefs:["GET /repos/{owner}/{repo}/git/matching-refs/{ref}"],updateRef:["PATCH /repos/{owner}/{repo}/git/refs/{ref}"]},gitignore:{getAllTemplates:["GET /gitignore/templates"],getTemplate:["GET /gitignore/templates/{name}"]},interactions:{getRestrictionsForAuthenticatedUser:["GET /user/interaction-limits"],getRestrictionsForOrg:["GET /orgs/{org}/interaction-limits"],getRestrictionsForRepo:["GET /repos/{owner}/{repo}/interaction-limits"],getRestrictionsForYourPublicRepos:["GET /user/interaction-limits",{},{renamed:["interactions","getRestrictionsForAuthenticatedUser"]}],removeRestrictionsForAuthenticatedUser:["DELETE /user/interaction-limits"],removeRestrictionsForOrg:["DELETE /orgs/{org}/interaction-limits"],removeRestrictionsForRepo:["DELETE /repos/{owner}/{repo}/interaction-limits"],removeRestrictionsForYourPublicRepos:["DELETE /user/interaction-limits",{},{renamed:["interactions","removeRestrictionsForAuthenticatedUser"]}],setRestrictionsForAuthenticatedUser:["PUT /user/interaction-limits"],setRestrictionsForOrg:["PUT /orgs/{org}/interaction-limits"],setRestrictionsForRepo:["PUT /repos/{owner}/{repo}/interaction-limits"],setRestrictionsForYourPublicRepos:["PUT /user/interaction-limits",{},{renamed:["interactions","setRestrictionsForAuthenticatedUser"]}]},issues:{addAssignees:["POST /repos/{owner}/{repo}/issues/{issue_number}/assignees"],addLabels:["POST /repos/{owner}/{repo}/issues/{issue_number}/labels"],addSubIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/sub_issues"],checkUserCanBeAssigned:["GET /repos/{owner}/{repo}/assignees/{assignee}"],checkUserCanBeAssignedToIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/assignees/{assignee}"],create:["POST /repos/{owner}/{repo}/issues"],createComment:["POST /repos/{owner}/{repo}/issues/{issue_number}/comments"],createLabel:["POST /repos/{owner}/{repo}/labels"],createMilestone:["POST /repos/{owner}/{repo}/milestones"],deleteComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}"],deleteLabel:["DELETE /repos/{owner}/{repo}/labels/{name}"],deleteMilestone:["DELETE /repos/{owner}/{repo}/milestones/{milestone_number}"],get:["GET /repos/{owner}/{repo}/issues/{issue_number}"],getComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}"],getEvent:["GET /repos/{owner}/{repo}/issues/events/{event_id}"],getLabel:["GET /repos/{owner}/{repo}/labels/{name}"],getMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}"],list:["GET /issues"],listAssignees:["GET /repos/{owner}/{repo}/assignees"],listComments:["GET /repos/{owner}/{repo}/issues/{issue_number}/comments"],listCommentsForRepo:["GET /repos/{owner}/{repo}/issues/comments"],listEvents:["GET /repos/{owner}/{repo}/issues/{issue_number}/events"],listEventsForRepo:["GET /repos/{owner}/{repo}/issues/events"],listEventsForTimeline:["GET /repos/{owner}/{repo}/issues/{issue_number}/timeline"],listForAuthenticatedUser:["GET /user/issues"],listForOrg:["GET /orgs/{org}/issues"],listForRepo:["GET /repos/{owner}/{repo}/issues"],listLabelsForMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels"],listLabelsForRepo:["GET /repos/{owner}/{repo}/labels"],listLabelsOnIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/labels"],listMilestones:["GET /repos/{owner}/{repo}/milestones"],listSubIssues:["GET /repos/{owner}/{repo}/issues/{issue_number}/sub_issues"],lock:["PUT /repos/{owner}/{repo}/issues/{issue_number}/lock"],removeAllLabels:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels"],removeAssignees:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees"],removeLabel:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}"],removeSubIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/sub_issue"],reprioritizeSubIssue:["PATCH /repos/{owner}/{repo}/issues/{issue_number}/sub_issues/priority"],setLabels:["PUT /repos/{owner}/{repo}/issues/{issue_number}/labels"],unlock:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock"],update:["PATCH /repos/{owner}/{repo}/issues/{issue_number}"],updateComment:["PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}"],updateLabel:["PATCH /repos/{owner}/{repo}/labels/{name}"],updateMilestone:["PATCH /repos/{owner}/{repo}/milestones/{milestone_number}"]},licenses:{get:["GET /licenses/{license}"],getAllCommonlyUsed:["GET /licenses"],getForRepo:["GET /repos/{owner}/{repo}/license"]},markdown:{render:["POST /markdown"],renderRaw:["POST /markdown/raw",{headers:{"content-type":"text/plain; charset=utf-8"}}]},meta:{get:["GET /meta"],getAllVersions:["GET /versions"],getOctocat:["GET /octocat"],getZen:["GET /zen"],root:["GET /"]},migrations:{deleteArchiveForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/archive"],deleteArchiveForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/archive"],downloadArchiveForOrg:["GET /orgs/{org}/migrations/{migration_id}/archive"],getArchiveForAuthenticatedUser:["GET /user/migrations/{migration_id}/archive"],getStatusForAuthenticatedUser:["GET /user/migrations/{migration_id}"],getStatusForOrg:["GET /orgs/{org}/migrations/{migration_id}"],listForAuthenticatedUser:["GET /user/migrations"],listForOrg:["GET /orgs/{org}/migrations"],listReposForAuthenticatedUser:["GET /user/migrations/{migration_id}/repositories"],listReposForOrg:["GET /orgs/{org}/migrations/{migration_id}/repositories"],listReposForUser:["GET /user/migrations/{migration_id}/repositories",{},{renamed:["migrations","listReposForAuthenticatedUser"]}],startForAuthenticatedUser:["POST /user/migrations"],startForOrg:["POST /orgs/{org}/migrations"],unlockRepoForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock"],unlockRepoForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock"]},oidc:{getOidcCustomSubTemplateForOrg:["GET /orgs/{org}/actions/oidc/customization/sub"],updateOidcCustomSubTemplateForOrg:["PUT /orgs/{org}/actions/oidc/customization/sub"]},orgs:{addSecurityManagerTeam:["PUT /orgs/{org}/security-managers/teams/{team_slug}",{},{deprecated:"octokit.rest.orgs.addSecurityManagerTeam() is deprecated, see https://docs.github.com/rest/orgs/security-managers#add-a-security-manager-team"}],assignTeamToOrgRole:["PUT /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],assignUserToOrgRole:["PUT /orgs/{org}/organization-roles/users/{username}/{role_id}"],blockUser:["PUT /orgs/{org}/blocks/{username}"],cancelInvitation:["DELETE /orgs/{org}/invitations/{invitation_id}"],checkBlockedUser:["GET /orgs/{org}/blocks/{username}"],checkMembershipForUser:["GET /orgs/{org}/members/{username}"],checkPublicMembershipForUser:["GET /orgs/{org}/public_members/{username}"],convertMemberToOutsideCollaborator:["PUT /orgs/{org}/outside_collaborators/{username}"],createInvitation:["POST /orgs/{org}/invitations"],createOrUpdateCustomProperties:["PATCH /orgs/{org}/properties/schema"],createOrUpdateCustomPropertiesValuesForRepos:["PATCH /orgs/{org}/properties/values"],createOrUpdateCustomProperty:["PUT /orgs/{org}/properties/schema/{custom_property_name}"],createWebhook:["POST /orgs/{org}/hooks"],delete:["DELETE /orgs/{org}"],deleteWebhook:["DELETE /orgs/{org}/hooks/{hook_id}"],enableOrDisableSecurityProductOnAllOrgRepos:["POST /orgs/{org}/{security_product}/{enablement}",{},{deprecated:"octokit.rest.orgs.enableOrDisableSecurityProductOnAllOrgRepos() is deprecated, see https://docs.github.com/rest/orgs/orgs#enable-or-disable-a-security-feature-for-an-organization"}],get:["GET /orgs/{org}"],getAllCustomProperties:["GET /orgs/{org}/properties/schema"],getCustomProperty:["GET /orgs/{org}/properties/schema/{custom_property_name}"],getMembershipForAuthenticatedUser:["GET /user/memberships/orgs/{org}"],getMembershipForUser:["GET /orgs/{org}/memberships/{username}"],getOrgRole:["GET /orgs/{org}/organization-roles/{role_id}"],getWebhook:["GET /orgs/{org}/hooks/{hook_id}"],getWebhookConfigForOrg:["GET /orgs/{org}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}"],list:["GET /organizations"],listAppInstallations:["GET /orgs/{org}/installations"],listAttestations:["GET /orgs/{org}/attestations/{subject_digest}"],listBlockedUsers:["GET /orgs/{org}/blocks"],listCustomPropertiesValuesForRepos:["GET /orgs/{org}/properties/values"],listFailedInvitations:["GET /orgs/{org}/failed_invitations"],listForAuthenticatedUser:["GET /user/orgs"],listForUser:["GET /users/{username}/orgs"],listInvitationTeams:["GET /orgs/{org}/invitations/{invitation_id}/teams"],listMembers:["GET /orgs/{org}/members"],listMembershipsForAuthenticatedUser:["GET /user/memberships/orgs"],listOrgRoleTeams:["GET /orgs/{org}/organization-roles/{role_id}/teams"],listOrgRoleUsers:["GET /orgs/{org}/organization-roles/{role_id}/users"],listOrgRoles:["GET /orgs/{org}/organization-roles"],listOrganizationFineGrainedPermissions:["GET /orgs/{org}/organization-fine-grained-permissions"],listOutsideCollaborators:["GET /orgs/{org}/outside_collaborators"],listPatGrantRepositories:["GET /orgs/{org}/personal-access-tokens/{pat_id}/repositories"],listPatGrantRequestRepositories:["GET /orgs/{org}/personal-access-token-requests/{pat_request_id}/repositories"],listPatGrantRequests:["GET /orgs/{org}/personal-access-token-requests"],listPatGrants:["GET /orgs/{org}/personal-access-tokens"],listPendingInvitations:["GET /orgs/{org}/invitations"],listPublicMembers:["GET /orgs/{org}/public_members"],listSecurityManagerTeams:["GET /orgs/{org}/security-managers",{},{deprecated:"octokit.rest.orgs.listSecurityManagerTeams() is deprecated, see https://docs.github.com/rest/orgs/security-managers#list-security-manager-teams"}],listWebhookDeliveries:["GET /orgs/{org}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /orgs/{org}/hooks"],pingWebhook:["POST /orgs/{org}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeCustomProperty:["DELETE /orgs/{org}/properties/schema/{custom_property_name}"],removeMember:["DELETE /orgs/{org}/members/{username}"],removeMembershipForUser:["DELETE /orgs/{org}/memberships/{username}"],removeOutsideCollaborator:["DELETE /orgs/{org}/outside_collaborators/{username}"],removePublicMembershipForAuthenticatedUser:["DELETE /orgs/{org}/public_members/{username}"],removeSecurityManagerTeam:["DELETE /orgs/{org}/security-managers/teams/{team_slug}",{},{deprecated:"octokit.rest.orgs.removeSecurityManagerTeam() is deprecated, see https://docs.github.com/rest/orgs/security-managers#remove-a-security-manager-team"}],reviewPatGrantRequest:["POST /orgs/{org}/personal-access-token-requests/{pat_request_id}"],reviewPatGrantRequestsInBulk:["POST /orgs/{org}/personal-access-token-requests"],revokeAllOrgRolesTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}"],revokeAllOrgRolesUser:["DELETE /orgs/{org}/organization-roles/users/{username}"],revokeOrgRoleTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],revokeOrgRoleUser:["DELETE /orgs/{org}/organization-roles/users/{username}/{role_id}"],setMembershipForUser:["PUT /orgs/{org}/memberships/{username}"],setPublicMembershipForAuthenticatedUser:["PUT /orgs/{org}/public_members/{username}"],unblockUser:["DELETE /orgs/{org}/blocks/{username}"],update:["PATCH /orgs/{org}"],updateMembershipForAuthenticatedUser:["PATCH /user/memberships/orgs/{org}"],updatePatAccess:["POST /orgs/{org}/personal-access-tokens/{pat_id}"],updatePatAccesses:["POST /orgs/{org}/personal-access-tokens"],updateWebhook:["PATCH /orgs/{org}/hooks/{hook_id}"],updateWebhookConfigForOrg:["PATCH /orgs/{org}/hooks/{hook_id}/config"]},packages:{deletePackageForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}"],deletePackageForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}"],deletePackageForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}"],deletePackageVersionForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getAllPackageVersionsForAPackageOwnedByAnOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByOrg"]}],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByAuthenticatedUser"]}],getAllPackageVersionsForPackageOwnedByAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions"],getPackageForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}"],getPackageForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}"],getPackageForUser:["GET /users/{username}/packages/{package_type}/{package_name}"],getPackageVersionForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],listDockerMigrationConflictingPackagesForAuthenticatedUser:["GET /user/docker/conflicts"],listDockerMigrationConflictingPackagesForOrganization:["GET /orgs/{org}/docker/conflicts"],listDockerMigrationConflictingPackagesForUser:["GET /users/{username}/docker/conflicts"],listPackagesForAuthenticatedUser:["GET /user/packages"],listPackagesForOrganization:["GET /orgs/{org}/packages"],listPackagesForUser:["GET /users/{username}/packages"],restorePackageForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForUser:["POST /users/{username}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageVersionForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForUser:["POST /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"]},privateRegistries:{createOrgPrivateRegistry:["POST /orgs/{org}/private-registries"],deleteOrgPrivateRegistry:["DELETE /orgs/{org}/private-registries/{secret_name}"],getOrgPrivateRegistry:["GET /orgs/{org}/private-registries/{secret_name}"],getOrgPublicKey:["GET /orgs/{org}/private-registries/public-key"],listOrgPrivateRegistries:["GET /orgs/{org}/private-registries"],updateOrgPrivateRegistry:["PATCH /orgs/{org}/private-registries/{secret_name}"]},projects:{addCollaborator:["PUT /projects/{project_id}/collaborators/{username}"],createCard:["POST /projects/columns/{column_id}/cards"],createColumn:["POST /projects/{project_id}/columns"],createForAuthenticatedUser:["POST /user/projects"],createForOrg:["POST /orgs/{org}/projects"],createForRepo:["POST /repos/{owner}/{repo}/projects"],delete:["DELETE /projects/{project_id}"],deleteCard:["DELETE /projects/columns/cards/{card_id}"],deleteColumn:["DELETE /projects/columns/{column_id}"],get:["GET /projects/{project_id}"],getCard:["GET /projects/columns/cards/{card_id}"],getColumn:["GET /projects/columns/{column_id}"],getPermissionForUser:["GET /projects/{project_id}/collaborators/{username}/permission"],listCards:["GET /projects/columns/{column_id}/cards"],listCollaborators:["GET /projects/{project_id}/collaborators"],listColumns:["GET /projects/{project_id}/columns"],listForOrg:["GET /orgs/{org}/projects"],listForRepo:["GET /repos/{owner}/{repo}/projects"],listForUser:["GET /users/{username}/projects"],moveCard:["POST /projects/columns/cards/{card_id}/moves"],moveColumn:["POST /projects/columns/{column_id}/moves"],removeCollaborator:["DELETE /projects/{project_id}/collaborators/{username}"],update:["PATCH /projects/{project_id}"],updateCard:["PATCH /projects/columns/cards/{card_id}"],updateColumn:["PATCH /projects/columns/{column_id}"]},pulls:{checkIfMerged:["GET /repos/{owner}/{repo}/pulls/{pull_number}/merge"],create:["POST /repos/{owner}/{repo}/pulls"],createReplyForReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies"],createReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],createReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments"],deletePendingReview:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],deleteReviewComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}"],dismissReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals"],get:["GET /repos/{owner}/{repo}/pulls/{pull_number}"],getReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],getReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}"],list:["GET /repos/{owner}/{repo}/pulls"],listCommentsForReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments"],listCommits:["GET /repos/{owner}/{repo}/pulls/{pull_number}/commits"],listFiles:["GET /repos/{owner}/{repo}/pulls/{pull_number}/files"],listRequestedReviewers:["GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],listReviewComments:["GET /repos/{owner}/{repo}/pulls/{pull_number}/comments"],listReviewCommentsForRepo:["GET /repos/{owner}/{repo}/pulls/comments"],listReviews:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],merge:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge"],removeRequestedReviewers:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],requestReviewers:["POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],submitReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events"],update:["PATCH /repos/{owner}/{repo}/pulls/{pull_number}"],updateBranch:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch"],updateReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],updateReviewComment:["PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}"]},rateLimit:{get:["GET /rate_limit"]},reactions:{createForCommitComment:["POST /repos/{owner}/{repo}/comments/{comment_id}/reactions"],createForIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/reactions"],createForIssueComment:["POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],createForPullRequestReviewComment:["POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],createForRelease:["POST /repos/{owner}/{repo}/releases/{release_id}/reactions"],createForTeamDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],createForTeamDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"],deleteForCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}"],deleteForIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}"],deleteForIssueComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}"],deleteForPullRequestComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}"],deleteForRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}/reactions/{reaction_id}"],deleteForTeamDiscussion:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}"],deleteForTeamDiscussionComment:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}"],listForCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}/reactions"],listForIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/reactions"],listForIssueComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],listForPullRequestReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],listForRelease:["GET /repos/{owner}/{repo}/releases/{release_id}/reactions"],listForTeamDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],listForTeamDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"]},repos:{acceptInvitation:["PATCH /user/repository_invitations/{invitation_id}",{},{renamed:["repos","acceptInvitationForAuthenticatedUser"]}],acceptInvitationForAuthenticatedUser:["PATCH /user/repository_invitations/{invitation_id}"],addAppAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],addCollaborator:["PUT /repos/{owner}/{repo}/collaborators/{username}"],addStatusCheckContexts:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],addTeamAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],addUserAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],cancelPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}/cancel"],checkAutomatedSecurityFixes:["GET /repos/{owner}/{repo}/automated-security-fixes"],checkCollaborator:["GET /repos/{owner}/{repo}/collaborators/{username}"],checkPrivateVulnerabilityReporting:["GET /repos/{owner}/{repo}/private-vulnerability-reporting"],checkVulnerabilityAlerts:["GET /repos/{owner}/{repo}/vulnerability-alerts"],codeownersErrors:["GET /repos/{owner}/{repo}/codeowners/errors"],compareCommits:["GET /repos/{owner}/{repo}/compare/{base}...{head}"],compareCommitsWithBasehead:["GET /repos/{owner}/{repo}/compare/{basehead}"],createAttestation:["POST /repos/{owner}/{repo}/attestations"],createAutolink:["POST /repos/{owner}/{repo}/autolinks"],createCommitComment:["POST /repos/{owner}/{repo}/commits/{commit_sha}/comments"],createCommitSignatureProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],createCommitStatus:["POST /repos/{owner}/{repo}/statuses/{sha}"],createDeployKey:["POST /repos/{owner}/{repo}/keys"],createDeployment:["POST /repos/{owner}/{repo}/deployments"],createDeploymentBranchPolicy:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],createDeploymentProtectionRule:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],createDeploymentStatus:["POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],createDispatchEvent:["POST /repos/{owner}/{repo}/dispatches"],createForAuthenticatedUser:["POST /user/repos"],createFork:["POST /repos/{owner}/{repo}/forks"],createInOrg:["POST /orgs/{org}/repos"],createOrUpdateCustomPropertiesValues:["PATCH /repos/{owner}/{repo}/properties/values"],createOrUpdateEnvironment:["PUT /repos/{owner}/{repo}/environments/{environment_name}"],createOrUpdateFileContents:["PUT /repos/{owner}/{repo}/contents/{path}"],createOrgRuleset:["POST /orgs/{org}/rulesets"],createPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments"],createPagesSite:["POST /repos/{owner}/{repo}/pages"],createRelease:["POST /repos/{owner}/{repo}/releases"],createRepoRuleset:["POST /repos/{owner}/{repo}/rulesets"],createUsingTemplate:["POST /repos/{template_owner}/{template_repo}/generate"],createWebhook:["POST /repos/{owner}/{repo}/hooks"],declineInvitation:["DELETE /user/repository_invitations/{invitation_id}",{},{renamed:["repos","declineInvitationForAuthenticatedUser"]}],declineInvitationForAuthenticatedUser:["DELETE /user/repository_invitations/{invitation_id}"],delete:["DELETE /repos/{owner}/{repo}"],deleteAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],deleteAdminBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],deleteAnEnvironment:["DELETE /repos/{owner}/{repo}/environments/{environment_name}"],deleteAutolink:["DELETE /repos/{owner}/{repo}/autolinks/{autolink_id}"],deleteBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection"],deleteCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}"],deleteCommitSignatureProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],deleteDeployKey:["DELETE /repos/{owner}/{repo}/keys/{key_id}"],deleteDeployment:["DELETE /repos/{owner}/{repo}/deployments/{deployment_id}"],deleteDeploymentBranchPolicy:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],deleteFile:["DELETE /repos/{owner}/{repo}/contents/{path}"],deleteInvitation:["DELETE /repos/{owner}/{repo}/invitations/{invitation_id}"],deleteOrgRuleset:["DELETE /orgs/{org}/rulesets/{ruleset_id}"],deletePagesSite:["DELETE /repos/{owner}/{repo}/pages"],deletePullRequestReviewProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],deleteRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}"],deleteReleaseAsset:["DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}"],deleteRepoRuleset:["DELETE /repos/{owner}/{repo}/rulesets/{ruleset_id}"],deleteWebhook:["DELETE /repos/{owner}/{repo}/hooks/{hook_id}"],disableAutomatedSecurityFixes:["DELETE /repos/{owner}/{repo}/automated-security-fixes"],disableDeploymentProtectionRule:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],disablePrivateVulnerabilityReporting:["DELETE /repos/{owner}/{repo}/private-vulnerability-reporting"],disableVulnerabilityAlerts:["DELETE /repos/{owner}/{repo}/vulnerability-alerts"],downloadArchive:["GET /repos/{owner}/{repo}/zipball/{ref}",{},{renamed:["repos","downloadZipballArchive"]}],downloadTarballArchive:["GET /repos/{owner}/{repo}/tarball/{ref}"],downloadZipballArchive:["GET /repos/{owner}/{repo}/zipball/{ref}"],enableAutomatedSecurityFixes:["PUT /repos/{owner}/{repo}/automated-security-fixes"],enablePrivateVulnerabilityReporting:["PUT /repos/{owner}/{repo}/private-vulnerability-reporting"],enableVulnerabilityAlerts:["PUT /repos/{owner}/{repo}/vulnerability-alerts"],generateReleaseNotes:["POST /repos/{owner}/{repo}/releases/generate-notes"],get:["GET /repos/{owner}/{repo}"],getAccessRestrictions:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],getAdminBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],getAllDeploymentProtectionRules:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],getAllEnvironments:["GET /repos/{owner}/{repo}/environments"],getAllStatusCheckContexts:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts"],getAllTopics:["GET /repos/{owner}/{repo}/topics"],getAppsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps"],getAutolink:["GET /repos/{owner}/{repo}/autolinks/{autolink_id}"],getBranch:["GET /repos/{owner}/{repo}/branches/{branch}"],getBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection"],getBranchRules:["GET /repos/{owner}/{repo}/rules/branches/{branch}"],getClones:["GET /repos/{owner}/{repo}/traffic/clones"],getCodeFrequencyStats:["GET /repos/{owner}/{repo}/stats/code_frequency"],getCollaboratorPermissionLevel:["GET /repos/{owner}/{repo}/collaborators/{username}/permission"],getCombinedStatusForRef:["GET /repos/{owner}/{repo}/commits/{ref}/status"],getCommit:["GET /repos/{owner}/{repo}/commits/{ref}"],getCommitActivityStats:["GET /repos/{owner}/{repo}/stats/commit_activity"],getCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}"],getCommitSignatureProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],getCommunityProfileMetrics:["GET /repos/{owner}/{repo}/community/profile"],getContent:["GET /repos/{owner}/{repo}/contents/{path}"],getContributorsStats:["GET /repos/{owner}/{repo}/stats/contributors"],getCustomDeploymentProtectionRule:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],getCustomPropertiesValues:["GET /repos/{owner}/{repo}/properties/values"],getDeployKey:["GET /repos/{owner}/{repo}/keys/{key_id}"],getDeployment:["GET /repos/{owner}/{repo}/deployments/{deployment_id}"],getDeploymentBranchPolicy:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],getDeploymentStatus:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}"],getEnvironment:["GET /repos/{owner}/{repo}/environments/{environment_name}"],getLatestPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/latest"],getLatestRelease:["GET /repos/{owner}/{repo}/releases/latest"],getOrgRuleSuite:["GET /orgs/{org}/rulesets/rule-suites/{rule_suite_id}"],getOrgRuleSuites:["GET /orgs/{org}/rulesets/rule-suites"],getOrgRuleset:["GET /orgs/{org}/rulesets/{ruleset_id}"],getOrgRulesets:["GET /orgs/{org}/rulesets"],getPages:["GET /repos/{owner}/{repo}/pages"],getPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/{build_id}"],getPagesDeployment:["GET /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}"],getPagesHealthCheck:["GET /repos/{owner}/{repo}/pages/health"],getParticipationStats:["GET /repos/{owner}/{repo}/stats/participation"],getPullRequestReviewProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],getPunchCardStats:["GET /repos/{owner}/{repo}/stats/punch_card"],getReadme:["GET /repos/{owner}/{repo}/readme"],getReadmeInDirectory:["GET /repos/{owner}/{repo}/readme/{dir}"],getRelease:["GET /repos/{owner}/{repo}/releases/{release_id}"],getReleaseAsset:["GET /repos/{owner}/{repo}/releases/assets/{asset_id}"],getReleaseByTag:["GET /repos/{owner}/{repo}/releases/tags/{tag}"],getRepoRuleSuite:["GET /repos/{owner}/{repo}/rulesets/rule-suites/{rule_suite_id}"],getRepoRuleSuites:["GET /repos/{owner}/{repo}/rulesets/rule-suites"],getRepoRuleset:["GET /repos/{owner}/{repo}/rulesets/{ruleset_id}"],getRepoRulesets:["GET /repos/{owner}/{repo}/rulesets"],getStatusChecksProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],getTeamsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams"],getTopPaths:["GET /repos/{owner}/{repo}/traffic/popular/paths"],getTopReferrers:["GET /repos/{owner}/{repo}/traffic/popular/referrers"],getUsersWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users"],getViews:["GET /repos/{owner}/{repo}/traffic/views"],getWebhook:["GET /repos/{owner}/{repo}/hooks/{hook_id}"],getWebhookConfigForRepo:["GET /repos/{owner}/{repo}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}"],listActivities:["GET /repos/{owner}/{repo}/activity"],listAttestations:["GET /repos/{owner}/{repo}/attestations/{subject_digest}"],listAutolinks:["GET /repos/{owner}/{repo}/autolinks"],listBranches:["GET /repos/{owner}/{repo}/branches"],listBranchesForHeadCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head"],listCollaborators:["GET /repos/{owner}/{repo}/collaborators"],listCommentsForCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/comments"],listCommitCommentsForRepo:["GET /repos/{owner}/{repo}/comments"],listCommitStatusesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/statuses"],listCommits:["GET /repos/{owner}/{repo}/commits"],listContributors:["GET /repos/{owner}/{repo}/contributors"],listCustomDeploymentRuleIntegrations:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/apps"],listDeployKeys:["GET /repos/{owner}/{repo}/keys"],listDeploymentBranchPolicies:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],listDeploymentStatuses:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],listDeployments:["GET /repos/{owner}/{repo}/deployments"],listForAuthenticatedUser:["GET /user/repos"],listForOrg:["GET /orgs/{org}/repos"],listForUser:["GET /users/{username}/repos"],listForks:["GET /repos/{owner}/{repo}/forks"],listInvitations:["GET /repos/{owner}/{repo}/invitations"],listInvitationsForAuthenticatedUser:["GET /user/repository_invitations"],listLanguages:["GET /repos/{owner}/{repo}/languages"],listPagesBuilds:["GET /repos/{owner}/{repo}/pages/builds"],listPublic:["GET /repositories"],listPullRequestsAssociatedWithCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls"],listReleaseAssets:["GET /repos/{owner}/{repo}/releases/{release_id}/assets"],listReleases:["GET /repos/{owner}/{repo}/releases"],listTags:["GET /repos/{owner}/{repo}/tags"],listTeams:["GET /repos/{owner}/{repo}/teams"],listWebhookDeliveries:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /repos/{owner}/{repo}/hooks"],merge:["POST /repos/{owner}/{repo}/merges"],mergeUpstream:["POST /repos/{owner}/{repo}/merge-upstream"],pingWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeAppAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],removeCollaborator:["DELETE /repos/{owner}/{repo}/collaborators/{username}"],removeStatusCheckContexts:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],removeStatusCheckProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],removeTeamAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],removeUserAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],renameBranch:["POST /repos/{owner}/{repo}/branches/{branch}/rename"],replaceAllTopics:["PUT /repos/{owner}/{repo}/topics"],requestPagesBuild:["POST /repos/{owner}/{repo}/pages/builds"],setAdminBranchProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],setAppAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],setStatusCheckContexts:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],setTeamAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],setUserAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],testPushWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/tests"],transfer:["POST /repos/{owner}/{repo}/transfer"],update:["PATCH /repos/{owner}/{repo}"],updateBranchProtection:["PUT /repos/{owner}/{repo}/branches/{branch}/protection"],updateCommitComment:["PATCH /repos/{owner}/{repo}/comments/{comment_id}"],updateDeploymentBranchPolicy:["PUT /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],updateInformationAboutPagesSite:["PUT /repos/{owner}/{repo}/pages"],updateInvitation:["PATCH /repos/{owner}/{repo}/invitations/{invitation_id}"],updateOrgRuleset:["PUT /orgs/{org}/rulesets/{ruleset_id}"],updatePullRequestReviewProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],updateRelease:["PATCH /repos/{owner}/{repo}/releases/{release_id}"],updateReleaseAsset:["PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}"],updateRepoRuleset:["PUT /repos/{owner}/{repo}/rulesets/{ruleset_id}"],updateStatusCheckPotection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks",{},{renamed:["repos","updateStatusCheckProtection"]}],updateStatusCheckProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],updateWebhook:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}"],updateWebhookConfigForRepo:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config"],uploadReleaseAsset:["POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}",{baseUrl:"https://uploads.github.com"}]},search:{code:["GET /search/code"],commits:["GET /search/commits"],issuesAndPullRequests:["GET /search/issues"],labels:["GET /search/labels"],repos:["GET /search/repositories"],topics:["GET /search/topics"],users:["GET /search/users"]},secretScanning:{createPushProtectionBypass:["POST /repos/{owner}/{repo}/secret-scanning/push-protection-bypasses"],getAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"],getScanHistory:["GET /repos/{owner}/{repo}/secret-scanning/scan-history"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/secret-scanning/alerts"],listAlertsForOrg:["GET /orgs/{org}/secret-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/secret-scanning/alerts"],listLocationsForAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}/locations"],updateAlert:["PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"]},securityAdvisories:{createFork:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/forks"],createPrivateVulnerabilityReport:["POST /repos/{owner}/{repo}/security-advisories/reports"],createRepositoryAdvisory:["POST /repos/{owner}/{repo}/security-advisories"],createRepositoryAdvisoryCveRequest:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/cve"],getGlobalAdvisory:["GET /advisories/{ghsa_id}"],getRepositoryAdvisory:["GET /repos/{owner}/{repo}/security-advisories/{ghsa_id}"],listGlobalAdvisories:["GET /advisories"],listOrgRepositoryAdvisories:["GET /orgs/{org}/security-advisories"],listRepositoryAdvisories:["GET /repos/{owner}/{repo}/security-advisories"],updateRepositoryAdvisory:["PATCH /repos/{owner}/{repo}/security-advisories/{ghsa_id}"]},teams:{addOrUpdateMembershipForUserInOrg:["PUT /orgs/{org}/teams/{team_slug}/memberships/{username}"],addOrUpdateProjectPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}"],addOrUpdateRepoPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],checkPermissionsForProjectInOrg:["GET /orgs/{org}/teams/{team_slug}/projects/{project_id}"],checkPermissionsForRepoInOrg:["GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],create:["POST /orgs/{org}/teams"],createDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],createDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions"],deleteDiscussionCommentInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],deleteDiscussionInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],deleteInOrg:["DELETE /orgs/{org}/teams/{team_slug}"],getByName:["GET /orgs/{org}/teams/{team_slug}"],getDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],getDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],getMembershipForUserInOrg:["GET /orgs/{org}/teams/{team_slug}/memberships/{username}"],list:["GET /orgs/{org}/teams"],listChildInOrg:["GET /orgs/{org}/teams/{team_slug}/teams"],listDiscussionCommentsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],listDiscussionsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions"],listForAuthenticatedUser:["GET /user/teams"],listMembersInOrg:["GET /orgs/{org}/teams/{team_slug}/members"],listPendingInvitationsInOrg:["GET /orgs/{org}/teams/{team_slug}/invitations"],listProjectsInOrg:["GET /orgs/{org}/teams/{team_slug}/projects"],listReposInOrg:["GET /orgs/{org}/teams/{team_slug}/repos"],removeMembershipForUserInOrg:["DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}"],removeProjectInOrg:["DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}"],removeRepoInOrg:["DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],updateDiscussionCommentInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],updateDiscussionInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],updateInOrg:["PATCH /orgs/{org}/teams/{team_slug}"]},users:{addEmailForAuthenticated:["POST /user/emails",{},{renamed:["users","addEmailForAuthenticatedUser"]}],addEmailForAuthenticatedUser:["POST /user/emails"],addSocialAccountForAuthenticatedUser:["POST /user/social_accounts"],block:["PUT /user/blocks/{username}"],checkBlocked:["GET /user/blocks/{username}"],checkFollowingForUser:["GET /users/{username}/following/{target_user}"],checkPersonIsFollowedByAuthenticated:["GET /user/following/{username}"],createGpgKeyForAuthenticated:["POST /user/gpg_keys",{},{renamed:["users","createGpgKeyForAuthenticatedUser"]}],createGpgKeyForAuthenticatedUser:["POST /user/gpg_keys"],createPublicSshKeyForAuthenticated:["POST /user/keys",{},{renamed:["users","createPublicSshKeyForAuthenticatedUser"]}],createPublicSshKeyForAuthenticatedUser:["POST /user/keys"],createSshSigningKeyForAuthenticatedUser:["POST /user/ssh_signing_keys"],deleteEmailForAuthenticated:["DELETE /user/emails",{},{renamed:["users","deleteEmailForAuthenticatedUser"]}],deleteEmailForAuthenticatedUser:["DELETE /user/emails"],deleteGpgKeyForAuthenticated:["DELETE /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","deleteGpgKeyForAuthenticatedUser"]}],deleteGpgKeyForAuthenticatedUser:["DELETE /user/gpg_keys/{gpg_key_id}"],deletePublicSshKeyForAuthenticated:["DELETE /user/keys/{key_id}",{},{renamed:["users","deletePublicSshKeyForAuthenticatedUser"]}],deletePublicSshKeyForAuthenticatedUser:["DELETE /user/keys/{key_id}"],deleteSocialAccountForAuthenticatedUser:["DELETE /user/social_accounts"],deleteSshSigningKeyForAuthenticatedUser:["DELETE /user/ssh_signing_keys/{ssh_signing_key_id}"],follow:["PUT /user/following/{username}"],getAuthenticated:["GET /user"],getById:["GET /user/{account_id}"],getByUsername:["GET /users/{username}"],getContextForUser:["GET /users/{username}/hovercard"],getGpgKeyForAuthenticated:["GET /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","getGpgKeyForAuthenticatedUser"]}],getGpgKeyForAuthenticatedUser:["GET /user/gpg_keys/{gpg_key_id}"],getPublicSshKeyForAuthenticated:["GET /user/keys/{key_id}",{},{renamed:["users","getPublicSshKeyForAuthenticatedUser"]}],getPublicSshKeyForAuthenticatedUser:["GET /user/keys/{key_id}"],getSshSigningKeyForAuthenticatedUser:["GET /user/ssh_signing_keys/{ssh_signing_key_id}"],list:["GET /users"],listAttestations:["GET /users/{username}/attestations/{subject_digest}"],listBlockedByAuthenticated:["GET /user/blocks",{},{renamed:["users","listBlockedByAuthenticatedUser"]}],listBlockedByAuthenticatedUser:["GET /user/blocks"],listEmailsForAuthenticated:["GET /user/emails",{},{renamed:["users","listEmailsForAuthenticatedUser"]}],listEmailsForAuthenticatedUser:["GET /user/emails"],listFollowedByAuthenticated:["GET /user/following",{},{renamed:["users","listFollowedByAuthenticatedUser"]}],listFollowedByAuthenticatedUser:["GET /user/following"],listFollowersForAuthenticatedUser:["GET /user/followers"],listFollowersForUser:["GET /users/{username}/followers"],listFollowingForUser:["GET /users/{username}/following"],listGpgKeysForAuthenticated:["GET /user/gpg_keys",{},{renamed:["users","listGpgKeysForAuthenticatedUser"]}],listGpgKeysForAuthenticatedUser:["GET /user/gpg_keys"],listGpgKeysForUser:["GET /users/{username}/gpg_keys"],listPublicEmailsForAuthenticated:["GET /user/public_emails",{},{renamed:["users","listPublicEmailsForAuthenticatedUser"]}],listPublicEmailsForAuthenticatedUser:["GET /user/public_emails"],listPublicKeysForUser:["GET /users/{username}/keys"],listPublicSshKeysForAuthenticated:["GET /user/keys",{},{renamed:["users","listPublicSshKeysForAuthenticatedUser"]}],listPublicSshKeysForAuthenticatedUser:["GET /user/keys"],listSocialAccountsForAuthenticatedUser:["GET /user/social_accounts"],listSocialAccountsForUser:["GET /users/{username}/social_accounts"],listSshSigningKeysForAuthenticatedUser:["GET /user/ssh_signing_keys"],listSshSigningKeysForUser:["GET /users/{username}/ssh_signing_keys"],setPrimaryEmailVisibilityForAuthenticated:["PATCH /user/email/visibility",{},{renamed:["users","setPrimaryEmailVisibilityForAuthenticatedUser"]}],setPrimaryEmailVisibilityForAuthenticatedUser:["PATCH /user/email/visibility"],unblock:["DELETE /user/blocks/{username}"],unfollow:["DELETE /user/following/{username}"],updateAuthenticated:["PATCH /user"]}};const F=new Map;for(const[e,t]of Object.entries(R))for(const[r,s]of Object.entries(t)){const[t,o,n]=s,[i,a]=t.split(/ /),c=Object.assign({method:i,url:a},o);F.has(e)||F.set(e,new Map),F.get(e).set(r,{scope:e,methodName:r,endpointDefaults:c,decorations:n})}const x={has:({scope:e},t)=>F.get(e).has(t),getOwnPropertyDescriptor(e,t){return{value:this.get(e,t),configurable:!0,writable:!0,enumerable:!0}},defineProperty:(e,t,r)=>(Object.defineProperty(e.cache,t,r),!0),deleteProperty:(e,t)=>(delete e.cache[t],!0),ownKeys:({scope:e})=>[...F.get(e).keys()],set:(e,t,r)=>e.cache[t]=r,get({octokit:e,scope:t,cache:r},s){if(r[s])return r[s];const o=F.get(t).get(s);if(!o)return;const{endpointDefaults:n,decorations:i}=o;return r[s]=i?function decorate(e,t,r,s,o){const n=e.request.defaults(s);function withDecorations(...s){let i=n.endpoint.merge(...s);if(o.mapToData)return i=Object.assign({},i,{data:i[o.mapToData],[o.mapToData]:void 0}),n(i);if(o.renamed){const[s,n]=o.renamed;e.log.warn(`octokit.${t}.${r}() has been renamed to octokit.${s}.${n}()`)}if(o.deprecated&&e.log.warn(o.deprecated),o.renamedParameters){const i=n.endpoint.merge(...s);for(const[s,n]of Object.entries(o.renamedParameters))s in i&&(e.log.warn(`"${s}" parameter is deprecated for "octokit.${t}.${r}()". Use "${n}" instead`),n in i||(i[n]=i[s]),delete i[s]);return n(i)}return n(...s)}return Object.assign(withDecorations,n)}(e,t,s,n,i):e.request.defaults(n),r[s]}};function endpointsToMethods(e){const t={};for(const r of F.keys())t[r]=new Proxy({octokit:e,scope:r,cache:{}},x);return t}function legacyRestEndpointMethods(e){const t=endpointsToMethods(e);return{...t,rest:t}}legacyRestEndpointMethods.VERSION=O;var D=A.plugin(requestLog,legacyRestEndpointMethods,paginateRest).defaults({userAgent:"octokit-rest.js/20.1.2"});const L="github",G=["repo","workflow","user:email","read:user"],N={label:o.l10n.t("$(sync) Load More"),data:void 0,suppressPersistence:!0};async function createOctokitClient_createOctokitClient(e){return e.gitHubAccessToken||=await async function getGitHubAccessToken(){try{const e=(await o.authentication.getSession(L,G,{createIfNone:!0})).accessToken;return e.startsWith("ghu_")?(await o.authentication.getSession(L,[...G,"x-AzToolsScope"],{createIfNone:!0})).accessToken:e}catch(e){if(/did not consent/i.test((0,s.parseError)(e).message))throw new s.UserCancelledError("getGitHubToken");throw e}}(),new D({userAgent:(0,s.appendExtensionUserAgent)(),auth:e.gitHubAccessToken})}var I,U,M=r(74353),W=r.n(M),B=r(6279),j=r.n(B);W().extend(j()),function(e){e.Success="success",e.Failure="failure",e.Skipped="skipped",e.Cancelled="cancelled"}(I||(I={})),function(e){e.Queued="queued",e.InProgress="in_progress",e.Completed="completed"}(U||(U={}));class GitHubBranchListStep extends s.AzureWizardPromptStep{picks;async prompt(e){this.picks=[];const t=o.l10n.t("Select a branch");let r=0;for(;!e.gitHubBranch;)r++,e.gitHubBranch=(await e.ui.showQuickPick(this.getPicks(e,r),{placeHolder:t})).data;e.valuesToMask.push(e.gitHubBranch)}shouldPrompt(e){return!e.gitHubBranch}async getPicks(e,t){const r={owner:(0,s.nonNullProp)(e,"gitHubRepositoryOwner"),repo:(0,s.nonNullProp)(e,"gitHubRepository"),per_page:50,page:t},o=await async function getBranches(e,t){const r=await createOctokitClient_createOctokitClient(e);return(await r.repos.listBranches(t)).data}(e,r);this.picks.push(...o.map((e=>({label:e.name,data:e.name})))),this.picks.sort(((e,t)=>"main"===e.label||"master"===e.label?-1:"main"===t.label||"master"===t.label?1:e.label.localeCompare(t.label)));return 50*t===this.picks.length?[...this.picks,N]:this.picks}}class GitHubOrgListStep extends s.AzureWizardPromptStep{async prompt(e){const t=o.l10n.t("Select an organization");e.gitHubOrg=(await e.ui.showQuickPick(this.getPicks(e),{placeHolder:t})).data,e.gitHubOrg&&e.valuesToMask.push(e.gitHubOrg)}shouldPrompt(e){return!e.gitHubOrg}async getPicks(e){const t=await async function getAuthenticatedUser(e){const t=await createOctokitClient_createOctokitClient(e);return(await t.users.getAuthenticated()).data}(e),r=await async function getOrgs(e){const t=await createOctokitClient_createOctokitClient(e);return(await t.orgs.listForAuthenticatedUser()).data}(e);return[{label:t.login,data:void 0},...r.map((e=>({label:e.login,data:e.login})))]}}class GitHubRepositoryListStep extends s.AzureWizardPromptStep{picks;async prompt(e){this.picks=[];const t=o.l10n.t("Select a repository");let r,s=0;for(;!r;)s++,r=(await e.ui.showQuickPick(this.getPicks(e,s),{placeHolder:t})).data;e.gitHubRepository=r.repo,e.gitHubRepositoryOwner=r.owner,e.gitHubRepositoryUrl=r.url,e.valuesToMask.push(e.gitHubRepository),e.valuesToMask.push(e.gitHubRepositoryOwner),e.valuesToMask.push(e.gitHubRepositoryUrl)}shouldPrompt(e){return!e.gitHubRepository||!e.gitHubRepositoryOwner}async getPicks(e,t){const r={affiliation:"owner",visibility:"all",per_page:50,page:t},s={org:e.gitHubOrg??"",type:"all",per_page:50,page:t};this.picks.push(...e.gitHubOrg?(await async function getRepositoriesByOrg(e,t){const r=await createOctokitClient_createOctokitClient(e);return(await r.repos.listForOrg(t)).data}(e,s)).map((e=>({label:e.name,data:{owner:e.owner.login,repo:e.name,url:e.html_url}}))):(await async function getRepositoriesByUser(e,t){const r=await createOctokitClient_createOctokitClient(e);return(await r.repos.listForAuthenticatedUser(t)).data}(e,r)).map((e=>({label:e.name,data:{owner:e.owner.login,repo:e.name,url:e.html_url}})))),this.picks.sort(((e,t)=>e.label.localeCompare(t.label)));return 50*t===this.picks.length?[...this.picks,N]:this.picks}}let z=new class extensionVariables_UninitializedExtensionVariables{_error=new Error(o.l10n.t('"registerUIExtensionVariables" must be called before using the vscode-azureappservice package.'));get context(){throw this._error}get outputChannel(){throw this._error}get ui(){throw this._error}get prefix(){throw this._error}};function registerAppServiceExtensionVariables(e){z!==e&&(z=e,(0,s.registerUIExtensionVariables)(e),(0,n.registerAzureUtilsExtensionVariables)(e),function registerGitHubExtensionVariables(e){i!==e&&(i=e,(0,s.registerUIExtensionVariables)(e))}(e))}async function confirmOverwriteSettings(e,t,r,n){let i=!1,a=!1;const c=[],l=[],u=[],p=[];for(const d of Object.keys(t)){const m=Object.keys(r).find((e=>d.toLowerCase()===e.toLowerCase()))||d;if(void 0===r[m])c.push(m),r[m]=t[d];else if(r[m]===t[d])p.push(m);else if(t[d]){if(!i){const t={title:o.l10n.t("Yes to all")},r={title:o.l10n.t("No to all")},c=o.l10n.t('Setting "{0}" already exists in "{1}". Overwrite?',m,n),l=await e.ui.showWarningMessage(c,{modal:!0,stepName:"confirmOverwriteSetting"},s.DialogResponses.yes,t,s.DialogResponses.no,r);l===s.DialogResponses.yes?a=!0:l===t?(a=!0,i=!0):l===s.DialogResponses.no?a=!1:l===r&&(a=!1,i=!0)}a?(l.push(m),r[m]=t[d]):u.push(m)}}c.length>0&&(z.outputChannel.appendLog(o.l10n.t("Added the following settings:")),c.forEach(logKey)),l.length>0&&(z.outputChannel.appendLog(o.l10n.t("Updated the following settings:")),l.forEach(logKey)),p.length>0&&(z.outputChannel.appendLog(o.l10n.t("Ignored the following settings that were already the same:")),p.forEach(logKey)),u.length>0&&(z.outputChannel.appendLog(o.l10n.t("Ignored the following settings based on user input:")),u.forEach(logKey)),Object.keys(r).length>Object.keys(t).length&&z.outputChannel.appendLog(o.l10n.t('WARNING: This operation will not delete any settings in "{0}". You must manually delete settings if desired.',n))}function logKey(e){z.outputChannel.appendLine(`- ${e}`)}var $=r(76982);async function createWebSiteClient(e){return(0,n.createAzureClient)(e,(await r.e(379).then(r.bind(r,65379))).WebSiteManagementClient)}async function createAppInsightsClient(e){return(0,n.createAzureClient)(e,(await r.e(960).then(r.bind(r,54960))).ApplicationInsightsManagementClient)}async function createResourceClient(e){return(0,n.createAzureClient)(e,(await r.e(365).then(r.bind(r,26365))).ResourceManagementClient)}async function createResourceGraphClient(e){return(0,n.createAzureSubscriptionClient)(e,(await r.e(4).then(r.bind(r,55004))).ResourceGraphClient)}async function createOperationalInsightsManagementClient(e){return(0,n.createAzureClient)(e,(await r.e(462).then(r.bind(r,56462))).OperationalInsightsManagementClient)}class AppInsightsNameStep extends s.AzureWizardPromptStep{async isNameAvailable(e,t){return!(await AppInsightsListStep.getAppInsightsComponents(e)).some((e=>void 0!==e.name&&e.name.toLowerCase()===t.toLowerCase()))}async prompt(e){const t=e.relatedNameTask?await e.relatedNameTask:void 0;e.newAppInsightsName=(await e.ui.showInputBox({value:t,prompt:"Enter the name of the new Application Insights resource.",validateInput:async t=>await this.validateApplicationInsightName(e,t)})).trim(),e.valuesToMask.push(e.newAppInsightsName)}shouldPrompt(e){return!e.newAppInsightsName}async validateApplicationInsightName(e,t){return(t=t.trim()).length<H.minLength||t.length>H.maxLength?o.l10n.t("The name must be between {0} and {1} characters.",H.minLength,H.maxLength):H.invalidCharsRegExp.test(t)?o.l10n.t("The name can only contain alphanumeric characters or the symbols ._-()"):t.endsWith(".")?o.l10n.t("The name cannot end in a period."):await this.isNameAvailable(e,t)?void 0:o.l10n.t('Application Insights resource "{0}" already exists in subscription "{1}".',t,e.subscriptionDisplayName)}}var V=r(1965);function normalizeLocationName(e){return(e||"").toLowerCase().replace(/\s/g,"")}async function getAppInsightsSupportedLocation(e,t){const r=await async function getLocations(e){const t=await createResourceClient(e),r=await t.providers.get("microsoft.insights"),s=r.resourceTypes&&r.resourceTypes.find((e=>"components"===e.resourceType));return s&&s.locations?s.locations:void 0}(e)||[],o=(0,s.nonNullProp)(t,"name");if(r.some((e=>function areLocationNamesEqual(e,t){return normalizeLocationName(e)===normalizeLocationName(t)}(e,t.name))))return e.telemetry.properties.aiLocationSupported="true",o;{const t=await async function getPairedRegions(e,t){try{const r=await(0,n.createGenericClient)(e,void 0),s=(await r.sendRequest((0,V.createPipelineRequest)({method:"GET",url:"https://appinsights.azureedge.net/portal/regionMapping.json"}))).parsedBody;if(s.regions[t])return s.regions[t].pairedRegions}catch(e){}return[]}(e,o);return t.length>0?(e.telemetry.properties.aiLocationSupported="pairedRegion",t[0]):void(e.telemetry.properties.aiLocationSupported="false")}}class LogAnalyticsCreateStep extends s.AzureWizardExecuteStep{priority=134;stepName="LogAnalyticsCreateStep";_usedExistingLaw=!1;_skippedCreate=!1;getTreeItemLabel(e){const t=`workspace-${e.newAppInsightsName}`;let r=o.l10n.t('Create log analytics workspace "{0}"',t);return this._skippedCreate?r=o.l10n.t("Skipping log analytics workspace creation."):this._usedExistingLaw&&(r=o.l10n.t('Using existing log analytics workspace "{0}"',t)),r}getOutputLogSuccess(e){const t=`workspace-${e.newAppInsightsName}`;let r=o.l10n.t('Successfully created log analytics workspace "{0}".',t);return this._skippedCreate?r=o.l10n.t("Skipped creating log analytics workspace."):this._usedExistingLaw&&(r=o.l10n.t('Successfully found existing log analytics workspace "{0}".',t)),r}getOutputLogFail(e){const t=`workspace-${e.newAppInsightsName}`;return o.l10n.t('Failed to create log analytics workspace "{0}".',t)}getOutputLogProgress(e){const t=`workspace-${e.newAppInsightsName}`;return o.l10n.t('Creating log analytics workspace "{0}"...',t)}async execute(e,t){const r=await createOperationalInsightsManagementClient(e),o=(0,s.nonNullValueAndProp)(e.resourceGroup,"name"),i=await n.LocationListStep.getLocation(e),a=await getAppInsightsSupportedLocation(e,i);if(!a)return void(this._skippedCreate=!0);const c=(await n.uiUtils.listAllIterator(r.workspaces.list())).filter((e=>e.location===a)),l=c.filter((e=>(0,n.getResourceGroupFromId)((0,s.nonNullProp)(e,"id"))===o));if(e.logAnalyticsWorkspace=l[0]??c[0],e.logAnalyticsWorkspace)this._usedExistingLaw=!0;else{const t=`workspace-${e.newAppInsightsName}`;e.logAnalyticsWorkspace=await r.workspaces.beginCreateOrUpdateAndWait(o,t,{location:a})}}shouldExecute(e){return!e.logAnalyticsWorkspace}}const H={minLength:1,maxLength:255,invalidCharsRegExp:/[^a-zA-Z0-9\.\_\-\(\)]/},q="$(clock) Skip for now";class AppInsightsListStep extends s.AzureWizardPromptStep{_suppressCreate;constructor(e){super(),this._suppressCreate=e}static async getAppInsightsComponents(e){if(void 0===e.appInsightsTask){const t=await createAppInsightsClient(e);e.appInsightsTask=n.uiUtils.listAllIterator(t.components.list())}return await e.appInsightsTask}async prompt(e){const t={placeHolder:"Select an Application Insights resource for your app.",id:`AppInsightsListStep/${e.subscriptionId}`},r=await e.ui.showQuickPick(this.getQuickPicks(e),t);e.appInsightsComponent=r.data,r.label===q?(e.telemetry.properties.aiSkipForNow="true",e.appInsightsSkip=!0):e.telemetry.properties.newAI=String(!e.appInsightsComponent)}shouldPrompt(e){return!e.appInsightsComponent}async getSubWizard(e){if(e.appInsightsComponent)e.valuesToMask.push((0,s.nonNullProp)(e.appInsightsComponent,"name"));else if(!e.appInsightsSkip){const t=[new AppInsightsNameStep];return n.LocationListStep.addStep(e,t),{promptSteps:t,executeSteps:[new LogAnalyticsCreateStep,new AppInsightsCreateStep]}}}async getQuickPicks(e){const t=this._suppressCreate?[]:[{label:o.l10n.t("$(plus) Create new Application Insights resource"),data:void 0}];t.push({label:o.l10n.t(q),data:void 0});let r=await AppInsightsListStep.getAppInsightsComponents(e);return Array.isArray(r)||(r=[]),t.concat(r.map((e=>({id:e.id,label:(0,s.nonNullProp)(e,"name"),description:e.location,data:e}))))}}class AppInsightsCreateStep extends s.AzureWizardExecuteStepWithActivityOutput{priority=135;stepName="AppInsightsCreateStep";_skippedCreate=!1;getOutputLogSuccess(e){let t=o.l10n.t('Successfully created application insights "{0}".',(0,s.nonNullProp)(e,"newAppInsightsName"));return this._skippedCreate&&(t=o.l10n.t("Skipped creating application insights due to account restrictions or location compatibility.")),t}getOutputLogFail=e=>o.l10n.t('Failed to create application insights "{0}"',(0,s.nonNullProp)(e,"newAppInsightsName"));getTreeItemLabel(e){let t=o.l10n.t('Create application insights "{0}"',(0,s.nonNullProp)(e,"newAppInsightsName"));return this._skippedCreate&&(t=o.l10n.t("Skipping application insights creation.")),t}isMissingCreatePermissions=!1;async configureBeforeExecute(e){const t=(0,s.nonNullProp)(e,"newAppInsightsName"),r=(0,s.nonNullValueAndProp)(e.resourceGroup,"name");try{const s=await createAppInsightsClient(e);e.appInsightsComponent=await s.components.get(r,t),z.outputChannel.appendLog(o.l10n.t('Found existing application insights "{0}".',t)),z.outputChannel.appendLog(o.l10n.t('Using existing application insights "{0}".',t))}catch(e){}}async execute(e,t){const r=o.l10n.t("Verifying that Application Insights is available for this location...");z.outputChannel.appendLog(r);const i=await n.LocationListStep.getLocation(e),a=await getAppInsightsSupportedLocation(e,i);if(a){const t=await createAppInsightsClient(e),r=(0,s.nonNullProp)(e,"resourceGroup"),n=(0,s.nonNullProp)(r,"name"),i=(0,s.nonNullProp)(e,"newAppInsightsName");try{e.appInsightsComponent=await t.components.createOrUpdate(n,i,{kind:"web",applicationType:"web",location:a,workspaceResourceId:e.logAnalyticsWorkspace?.id})}catch(t){const r=(0,s.parseError)(t);if("AuthorizationFailed"===r.errorType){if(!e.advancedCreation)return void(this._skippedCreate=!0);this.isMissingCreatePermissions=!0,this.options.continueOnFail=!0,this.addExecuteSteps=()=>[new AppInsightsNoCreatePermissionsStep],this.options.suppressActivityOutput=s.ActivityOutputType.Message,z.outputChannel.appendLog(o.l10n.t('Unable to create application insights "{0}" in subscription "{1}" due to a lack of permissions.',i,e.subscriptionDisplayName)),z.outputChannel.appendLog(r.message)}throw t}}else this._skippedCreate=!0}shouldExecute(e){return!e.appInsightsComponent&&!!e.newAppInsightsName}_errorItemId=(0,$.randomUUID)();createFailOutput(e){const t=new s.ActivityChildItem({label:this.getTreeItemLabel(e),activityType:s.ActivityChildType.Fail,contextValue:(0,s.createContextValue)([this.stepName,s.activityFailContext]),iconPath:s.activityFailIcon,isParent:!0,initialCollapsibleState:o.TreeItemCollapsibleState.Expanded});return this.isMissingCreatePermissions&&(t.getChildren=()=>[new s.ActivityChildItem({id:this._errorItemId,activityType:s.ActivityChildType.Error,contextValue:(0,s.createContextValue)([`${this.stepName}Item`,s.activityErrorContext]),label:o.l10n.t('Unable to create application insights "{0}" in subscription "{1}" due to a lack of permissions.',(0,s.nonNullProp)(e,"newAppInsightsName"),e.subscriptionDisplayName)})]),{item:t,message:this.getOutputLogFail(e)}}}class AppInsightsNoCreatePermissionsStep extends s.AzureWizardExecuteStepWithActivityOutput{priority=136;stepName="AppInsightsNoCreatePermissionsStep";getOutputLogSuccess=e=>o.l10n.t('Successfully selected existing application insights "{0}"',(0,s.nonNullValueAndProp)(e.appInsightsComponent,"name"));getOutputLogFail=()=>o.l10n.t("Failed to select existing application insights");getTreeItemLabel=e=>e.appInsightsComponent?.name?o.l10n.t('Select application insights "{0}"',e.appInsightsComponent?.name):o.l10n.t("Select application insights...");async execute(e,t){t.report({message:o.l10n.t("Selecting application insights...")});const r=o.l10n.t('You do not have permission to create an application insights in subscription "{0}".',e.subscriptionDisplayName),s={title:o.l10n.t("Select Existing")};await e.ui.showWarningMessage(r,{modal:!0,stepName:"AspNoPermissions"},s),e.telemetry.properties.forbiddenResponse="SelectExistingAppInsights";const n=new AppInsightsListStep(!0);await n.prompt(e)}shouldExecute(e){return!e.appInsightsComponent&&!!e.newAppInsightsName}}var K,Z;function getWebsiteOSDisplayName(e){switch(e){case K.windows:return"Windows";case K.linux:return"Linux";default:throw new RangeError}}!function(e){e.linux="linux",e.windows="windows"}(K||(K={})),function(e){e.app="app",e.functionapp="functionapp",e.workflowapp="workflowapp"}(Z||(Z={}));const J="Microsoft.Web",Y="ms-azuretools-vscode";async function tryGetAppServicePlan(e,t,r){return await tryGetSiteResource((async()=>await e.appServicePlans.get(t,r)))}async function tryGetWebApp(e,t,r){return await tryGetSiteResource((async()=>await e.webApps.get(t,r)))}async function tryGetWebAppSlot(e,t,r,s){return await tryGetSiteResource((async()=>await e.webApps.getSlot(t,r,s)))}async function tryGetSiteResource(e){try{return await e()}catch(e){if(/NotFound/i.test((0,s.parseError)(e).errorType))return;throw e}}const Q={minLength:1,maxLength:40,invalidCharsRegExp:/[^a-zA-Z0-9\-_]/};class AppServicePlanNameStep extends s.AzureWizardPromptStep{async prompt(e){e.newPlanName=(await e.ui.showInputBox({value:await e.relatedNameTask,prompt:o.l10n.t("Enter the name of the new App Service plan."),validateInput:async t=>await this.validatePlanName(e,t)})).trim(),e.valuesToMask.push(e.newPlanName)}shouldPrompt(e){return!e.newPlanName}async validatePlanName(e,t){return(t=t.trim()).length<Q.minLength||t.length>Q.maxLength?o.l10n.t("The name must be between {0} and {1} characters.",Q.minLength,Q.maxLength):Q.invalidCharsRegExp.test(t)?o.l10n.t("The name can only contain alphanumeric characters, hyphens, and underscores."):e.resourceGroup&&!await AppServicePlanListStep.isNameAvailable(e,t,(0,s.nonNullProp)(e.resourceGroup,"name"))?o.l10n.t('App Service plan "{0}" already exists in resource group "{1}".',t,e.resourceGroup.name):void 0}}class AppServicePlanRedundancyStep extends s.AzureWizardPromptStep{async prompt(e){const t=o.l10n.t("Select zone redundancy availability"),r=[{label:o.l10n.t("Enabled"),data:!0},{label:o.l10n.t("Disabled"),data:!1}];e.zoneRedundant=(await e.ui.showQuickPick(r,{placeHolder:t})).data}static isZoneRedundancySupportedLocation(e){return e=e.replace(/\s/,"").toLowerCase(),["westus2","westus3","centralus","eastus","eastus2","canadacentral","brazilsouth","northeurope","westeurope","germanywestcentral","francecentral","uksouth","japaneast","southeastasia","australiaeast","eastus2euap"].includes(e)}static isZoneRedundancySupportedServicePlan(e){let t;return t=e?.family?e.family??"":e,["Pv2","Pv3","WS"].includes(t)}static isZoneRedundancySupported(e,t){return this.isZoneRedundancySupportedLocation(e)&&this.isZoneRedundancySupportedServicePlan(t)}shouldPrompt(e){const{customLocation:t,_location:r,plan:s,newPlanSku:o}=e,{name:n}=r||{};return!(void 0!==s||void 0!==t||!n||!o)&&AppServicePlanRedundancyStep.isZoneRedundancySupported(n,o)}}async function openUrl(e){await o.commands.executeCommand("vscode.open",o.Uri.parse(e))}async function setLocationsTask(e){n.LocationListStep.setLocationSubset(e,getWebLocations(e),J)}async function getWebLocations(e){const t={"api-version":"2024-04-01"};e.newSiteOS===K.linux&&(e.newSiteKind===Z.functionapp&&e.useConsumptionPlan?t.linuxDynamicWorkersEnabled=!0:t.linuxWorkersEnabled=!0),e.newPlanSku&&e.newPlanSku.tier&&(t.sku=e.newPlanSku.tier.replace(/\s/g,""));const r=Object.keys(t).map((e=>`${e}=${t[e]}`)).join("&"),o=await(0,n.createGenericClient)(e,e);return(await o.sendRequest((0,V.createPipelineRequest)({method:"GET",url:`/subscriptions/${e.subscriptionId}/providers/Microsoft.Web/geoRegions?${r}`}))).parsedBody.value.map((e=>(0,s.nonNullProp)(e,"name")))}class AppServicePlanSkuStep extends s.AzureWizardPromptStep{async prompt(e){let t=[];t=await this.isPV4Region(e)?e.advancedCreation?this.pv4RecommendedSkus().concat(this.getAdvancedSkus()):this.pv4RecommendedSkus():e.advancedCreation?this.nonPV4RecommendedSkus().concat(this.getAdvancedSkus()):this.nonPV4RecommendedSkus(),e.newSiteKind===Z.functionapp?t.push(...this.getElasticPremiumSkus()):e.newSiteKind?.includes(Z.workflowapp)?t=this.getWorkflowStandardSkus():"jbosseap"===e.newSiteJavaStack?.majorVersion?.value&&(t=this.getPremiumV3Skus());const r=e.planSkuFamilyFilter;r&&(t=t.filter((e=>!e.family||r.test(e.family))));const n=t.map((e=>({label:e.label||(0,s.nonNullProp)(e,"name"),description:e.description,data:e,group:e.group||o.l10n.t("Additional Options")})));for(n.push({label:o.l10n.t("$(link-external) Show pricing information..."),data:void 0,suppressPersistence:!0});!e.newPlanSku;){const t=o.l10n.t("Select a pricing tier");e.newPlanSku=(await e.ui.showQuickPick(n,{placeHolder:t,suppressPersistence:!0,enableGrouping:e.advancedCreation})).data,e.newPlanSku||(e.newSiteOS===K.linux?await openUrl("https://aka.ms/AA60znj"):await openUrl("https://aka.ms/AA6202c"))}await setLocationsTask(e)}shouldPrompt(e){return!e.newPlanSku}async isPV4Region(e){const t=await createWebSiteClient(e),r=(await n.uiUtils.listAllIterator(t.listGeoRegions())).filter((e=>e.orgDomain?.includes("PV4SERIES")));if(n.LocationListStep.hasLocation(e)){const t=await n.LocationListStep.getLocation(e);return!!r.some((e=>e.displayName===t.displayName))}return!1}pv4RecommendedSkus(){const e=o.l10n.t("Recommended");return[{name:"F1",tier:"Free",size:"F1",family:"F",capacity:1,label:o.l10n.t("Free (F1)"),description:o.l10n.t("Try out Azure at no cost"),group:e},{name:"B1",tier:"Basic",size:"B1",family:"B",capacity:1,label:o.l10n.t("Basic (B1)"),description:o.l10n.t("Develop and test"),group:e},{name:"P0V4",tier:"Premium V4",size:"P0V4",family:"Pv4",capacity:1,label:o.l10n.t("Premium V4 (P0V4)"),group:e},{name:"P1V4",tier:"Premium V4",size:"P1V4",family:"Pv4",capacity:1,label:o.l10n.t("Premium V4 (P1V4)"),group:e},{name:"P1MV4",tier:"Premium V4",size:"P1MV4",family:"Pv4",capacity:1,label:o.l10n.t("Premium V4 (P1MV4)"),group:e},{name:"P0V3",tier:"Premium V3",size:"P0V3",family:"Pv3",capacity:1,label:o.l10n.t("Premium V3 (P0V3)"),group:e},{name:"P1V3",tier:"Premium V3",size:"P1V3",family:"Pv3",capacity:1,label:o.l10n.t("Premium V3 (P1V3)"),group:e},{name:"P1MV3",tier:"Premium V3",size:"P1MV3",family:"Pv3",capacity:1,label:o.l10n.t("Premium V3 (P1MV3)"),group:e}]}nonPV4RecommendedSkus(){const e=o.l10n.t("Recommended");return[{name:"F1",tier:"Free",size:"F1",family:"F",capacity:1,label:o.l10n.t("Free (F1)"),description:o.l10n.t("Try out Azure at no cost"),group:e},{name:"B1",tier:"Basic",size:"B1",family:"B",capacity:1,label:o.l10n.t("Basic (B1)"),description:o.l10n.t("Develop and test"),group:e},{name:"P0V3",tier:"Premium V3",size:"P0V3",family:"Pv3",capacity:1,label:o.l10n.t("Premium V3 (P0V3)"),group:e},{name:"P1V3",tier:"Premium V3",size:"P1V3",family:"Pv3",capacity:1,label:o.l10n.t("Premium V3 (P1V3)"),group:e},{name:"P1MV3",tier:"Premium V3",size:"P1MV3",family:"Pv3",capacity:1,label:o.l10n.t("Premium V3 (P1MV3)"),group:e}]}getAdvancedSkus(){return[{name:"Basic (B2)",tier:"Basic",size:"B2",family:"B",capacity:1},{name:"Basic (B3)",tier:"Basic",size:"B3",family:"B",capacity:1},{name:"Standard (S1)",tier:"Standard",size:"S1",family:"S",capacity:1},{name:"Standard (S2)",tier:"Standard",size:"S2",family:"S",capacity:1},{name:"Standard (S3)",tier:"Standard",size:"S3",family:"S",capacity:1},{name:"Premium V2 (P2v2)",tier:"Premium V2",size:"P2v2",family:"Pv2",capacity:1},{name:"Premium V2 (P3v2)",tier:"Premium V2",size:"P3v2",family:"Pv2",capacity:1}]}getPremiumV3Skus(){return[{name:"Premium V3 (P1v3)",tier:"Premium V3",size:"P1v3",family:"Pv3",capacity:1},{name:"Premium V3 (P2v3)",tier:"Premium V3",size:"P2v3",family:"Pv3",capacity:1},{name:"Premium V3 (P3v3)",tier:"Premium V3",size:"P3v3",family:"Pv3",capacity:1}]}getElasticPremiumSkus(){return[{name:"Elastic Premium (EP1)",tier:"Elastic Premium",size:"EP1",family:"EP",capacity:1},{name:"Elastic Premium (EP2)",tier:"Elastic Premium",size:"EP2",family:"EP",capacity:1},{name:"Elastic Premium (EP3)",tier:"Elastic Premium",size:"EP3",family:"EP",capacity:1}]}getWorkflowStandardSkus(){return[{name:"Workflow Standard WS1",tier:"Workflow Standard",size:"WS1",family:"WS",capacity:1},{name:"Workflow Standard WS2",tier:"Workflow Standard",size:"WS2",family:"WS",capacity:1},{name:"Workflow Standard WS3",tier:"Workflow Standard",size:"WS3",family:"WS",capacity:1}]}}class AppServicePlanListStep extends s.AzureWizardPromptStep{_suppressCreate;constructor(e){super(),this._suppressCreate=e}static async getPlans(e){if(void 0===e.plansTask){const t=await createWebSiteClient(e);e.plansTask=n.uiUtils.listAllIterator(t.appServicePlans.list())}return await e.plansTask}static async isNameAvailable(e,t,r){return!(await AppServicePlanListStep.getPlans(e)).some((e=>(0,s.nonNullProp)(e,"resourceGroup").toLowerCase()===r.toLowerCase()&&(0,s.nonNullProp)(e,"name").toLowerCase()===t.toLowerCase()))}async prompt(e){const t={placeHolder:e.newSiteKind?.includes(Z.workflowapp)&&e.planSkuFamilyFilter?.test("IV2")?o.l10n.t("Select an App Service Environment (v3) Plan"):o.l10n.t("Select a {0} App Service plan.",getWebsiteOSDisplayName((0,s.nonNullProp)(e,"newSiteOS"))),id:`AppServicePlanListStep/${e.subscriptionId}`};e.plan=(await e.ui.showQuickPick(this.getQuickPicks(e),t)).data,e.telemetry.properties.newPlan=String(!e.plan),e.plan&&await n.LocationListStep.setLocation(e,e.plan.location)}async getSubWizard(e){if(!e.plan){const t=[new AppServicePlanNameStep,new AppServicePlanSkuStep,new AppServicePlanRedundancyStep,new n.ResourceGroupListStep];return n.LocationListStep.addStep(e,t),{promptSteps:t,executeSteps:[new AppServicePlanCreateStep]}}e.valuesToMask.push((0,s.nonNullProp)(e.plan,"name"))}shouldPrompt(e){return!e.plan&&!e.newPlanName}async getQuickPicks(e){const t=this._suppressCreate?[]:[{label:o.l10n.t("$(plus) Create new App Service plan"),description:"",data:void 0}];let r=await AppServicePlanListStep.getPlans(e);const i=e.planSkuFamilyFilter;let a;i&&(r=r.filter((e=>!e.sku||!e.sku.family||i.test(e.sku.family)))),n.LocationListStep.hasLocation(e)&&(a=await n.LocationListStep.getLocation(e,J));let c=!1;for(const o of r){const r=e.newSiteOS===K.linux;let i=(0,s.nonNullProp)(o,"kind").toLowerCase().includes(K.linux);if(o.sku&&("EP"===o.sku.family||"WS"===o.sku.family)){const t=await createWebSiteClient(e),r=await tryGetAppServicePlan(t,(0,s.nonNullProp)(o,"resourceGroup"),(0,s.nonNullProp)(o,"name"));i=!!r?.reserved}r===i&&(a&&!n.LocationListStep.locationMatchesName(a,o.location)?c=!0:t.push({id:o.id,label:(0,s.nonNullProp)(o,"name"),description:o.sku?.name,data:o}))}return c&&a&&t.push({label:o.l10n.t('$(warning) Only plans in the region "{0}" are shown.',a.displayName),onPicked:()=>{},data:void 0}),t}}class AppServicePlanCreateStep extends s.AzureWizardExecuteStepWithActivityOutput{priority=120;stepName="AppServicePlanCreateStep";isMissingCreatePermissions=!1;getOutputLogSuccess=e=>o.l10n.t('Successfully created app service plan "{0}".',(0,s.nonNullProp)(e,"newPlanName"));getOutputLogFail=e=>o.l10n.t('Failed to create app service plan "{0}"',(0,s.nonNullProp)(e,"newPlanName"));getTreeItemLabel=e=>o.l10n.t('Create app service plan "{0}"',(0,s.nonNullProp)(e,"newPlanName"));async configureBeforeExecute(e){const t=(0,s.nonNullProp)(e,"newPlanName"),r=(0,s.nonNullProp)((0,s.nonNullValue)(e.resourceGroup,"name"),"name");try{const s=await createWebSiteClient(e),n=await tryGetAppServicePlan(s,r,t);n&&(e.plan=n,z.outputChannel.appendLog(o.l10n.t('Found existing app service plan "{0}".',t)),z.outputChannel.appendLog(o.l10n.t('Using existing app service plan "{0}".',t)))}catch(e){}}async execute(e,t){t.report({message:o.l10n.t("Creating app service plan")});const r=(0,s.nonNullProp)(e,"newPlanName"),i=(0,s.nonNullValueAndProp)(e.resourceGroup,"name");try{const t=await createWebSiteClient(e);e.plan=await t.appServicePlans.beginCreateOrUpdateAndWait(i,r,await async function getNewPlan(e){const t=await n.LocationListStep.getLocation(e,J),r={kind:getPlanKind(e),sku:(0,s.nonNullProp)(e,"newPlanSku"),location:t.name,reserved:e.newSiteOS===K.linux,zoneRedundant:e.zoneRedundant},o=e.newPlanSku?.family?e.newPlanSku?.family.toLowerCase():"";"ep"!==o&&"ws"!==o||(r.maximumElasticWorkerCount=20);e.customLocation&&function addCustomLocationProperties(e,t){e.perSiteScaling=!0,e.kubeEnvironmentProfile={id:t.kubeEnvironment.id},e.extendedLocation={name:t.id,type:"customLocation"}}(r,e.customLocation);return r}(e))}catch(t){const n=(0,s.parseError)(t);throw"AuthorizationFailed"===n.errorType&&(this.isMissingCreatePermissions=!0,this.options.continueOnFail=!0,this.addExecuteSteps=()=>[new AppServicePlanNoCreatePermissionsStep],this.options.suppressActivityOutput=s.ActivityOutputType.Message,z.outputChannel.appendLog(o.l10n.t('Unable to create app service plan "{0}" in subscription "{1}" due to a lack of permissions.',r,e.subscriptionDisplayName)),z.outputChannel.appendLog(n.message)),t}}shouldExecute(e){return!e.plan}_errorItemId=(0,$.randomUUID)();createFailOutput(e){const t=new s.ActivityChildItem({label:this.getTreeItemLabel(e),activityType:s.ActivityChildType.Fail,contextValue:(0,s.createContextValue)([this.stepName,s.activityFailContext]),iconPath:s.activityFailIcon,isParent:!0,initialCollapsibleState:o.TreeItemCollapsibleState.Expanded});return this.isMissingCreatePermissions&&(t.getChildren=()=>[new s.ActivityChildItem({id:this._errorItemId,activityType:s.ActivityChildType.Error,contextValue:(0,s.createContextValue)([`${this.stepName}Item`,s.activityErrorContext]),label:o.l10n.t('Unable to create app service plan "{0}" in subscription "{1}" due to a lack of permissions.',(0,s.nonNullProp)(e,"newPlanName"),e.subscriptionDisplayName)})]),{item:t,message:this.getOutputLogFail(e)}}}class AppServicePlanNoCreatePermissionsStep extends s.AzureWizardExecuteStepWithActivityOutput{priority=121;stepName="appserviceplanNoCreatePermissionsSelectStep";getOutputLogSuccess=e=>o.l10n.t('Successfully selected existing app service plan "{0}"',(0,s.nonNullValueAndProp)(e.plan,"name"));getOutputLogFail=()=>o.l10n.t("Failed to select an existing app service plan.");getTreeItemLabel=e=>e.plan?.name?o.l10n.t('Select app service plan "{0}"',e.plan?.name):o.l10n.t("Select app service plan");async execute(e,t){t.report({message:o.l10n.t("Selecting app service plan...")});const r=o.l10n.t('You do not have permission to create an app service plan in subscription "{0}".',e.subscriptionDisplayName),s={title:o.l10n.t("Select Existing")};await e.ui.showWarningMessage(r,{modal:!0,stepName:"AspNoPermissions"},s),e.telemetry.properties.forbiddenResponse="SelectExistingAsp";const n=new AppServicePlanListStep(!0);await n.prompt(e)}shouldExecute(e){return!e.plan}}function getPlanKind(e){return e.customLocation?"linux,kubernetes":e.newSiteOS===K.linux?K.linux:Z.app}class CustomLocationListStep extends n.LocationListStep{async prompt(e){const t={placeHolder:o.l10n.t("Select a location for new resources."),enableGrouping:!0},r=(await e.ui.showQuickPick(this.getCustomQuickPicks(e),t)).data;"kubeEnvironment"in r?(e.telemetry.properties.pickedCustomLoc="true",e.customLocation=r,await n.LocationListStep.setLocation(e,r.kubeEnvironment.location),e.newPlanName=await e.relatedNameTask,e.newPlanSku={name:"K1",tier:"Kubernetes",size:"K1",family:"K",capacity:1},e.useConsumptionPlan=!1):(e.telemetry.properties.pickedCustomLoc="false",await n.LocationListStep.setLocation(e,r.name))}async getCustomQuickPicks(e){const t=await super.getQuickPicks(e);if("windows"!==e.newSiteOS)try{const r=await createResourceGraphClient(e),s=(await r.resources({query:X,subscriptions:[e.subscriptionId]})).data,n=Object.values(s).sort(((e,t)=>e.name.localeCompare(t.name)));e.telemetry.properties.hasCustomLoc=String(n.length>0),t.unshift(...n.map((e=>({label:e.name,group:o.l10n.t("Custom"),data:e}))))}catch(t){e.telemetry.properties.customLocationError=(0,s.parseError)(t).message}return t}}const X="\nResources\n| where type contains 'Microsoft.Web/kubeEnvironments'\n| project kubeEnvironment=pack('id', id, 'name', name, 'location', location, 'properties', properties, 'extendedLocation', extendedLocation), customLocationId=tolower(tostring(extendedLocation.name))\n| where isnotnull(customLocationId)\n| join (Resources\n    | where type contains 'Microsoft.ExtendedLocation/customLocations'\n    | project name, customLocationId=tolower(tostring(id)), id) on customLocationId\n| project kubeEnvironment, name, id\n";var ee;!function(e){e.ResourceGroup="ResourceGroupReuse",e.Subscription="SubscriptionReuse",e.Tenant="TenantReuse",e.Global="NoReuse"}(ee||(ee={}));class SiteDomainNameLabelScopeStep extends s.AzureWizardPromptStep{async prompt(e){const t=[{label:o.l10n.t("Secure unique default hostname"),description:o.l10n.t("Tenant Scope"),data:ee.Tenant},{label:o.l10n.t("Global default hostname"),description:o.l10n.t("Global"),data:ee.Global},{label:o.l10n.t("$(link-external) Learn more about unique default hostname"),data:void 0}],r="https://aka.ms/AAu7lhs";let n;do{n=(await e.ui.showQuickPick(t,{placeHolder:o.l10n.t("Select default hostname format"),suppressPersistence:!0,learnMoreLink:r})).data,n||await(0,s.openUrl)(r)}while(!n);e.telemetry.properties.siteDomainNameLabelScope=n,e.newSiteDomainNameLabelScope=n}shouldPrompt(e){return!e.newSiteDomainNameLabelScope}}const te={minLength:2,maxLength:60,invalidCharsRegExp:/[^a-zA-Z0-9\-]/};class SiteNameStep extends s.AzureNameStep{_siteFor;constructor(e){super(),this._siteFor=e}async prompt(e){const t=await createWebSiteClient(e);let r,s;if("Azure"===e.environment.name){let t;t=e.newSiteKind===Z.functionapp?o.l10n.t("function app name"):e.newSiteKind?.includes(Z.workflowapp)?o.l10n.t("logic app name"):o.l10n.t("web app name"),r=`<${t}>.azurewebsites.net`}s=e.newSiteKind===Z.functionapp?o.l10n.t("Enter a name for the new function app."):e.newSiteKind?.includes(Z.workflowapp)?o.l10n.t("Enter a name for the new logic app."):o.l10n.t("Enter a name for the new web app.");const n="functionApp"===this._siteFor||"containerizedFunctionApp"===this._siteFor?{parameterDisplayTitle:o.l10n.t("Function App Name"),parameterDisplayDescription:o.l10n.t("The name of the new function app.")}:{parameterDisplayTitle:o.l10n.t("Site Name"),parameterDisplayDescription:o.l10n.t("The name of the app service site.")};"containerizedFunctionApp"===this._siteFor&&(te.maxLength=32);const i={prompt:s,placeHolder:r,validateInput:t=>this.validateSiteName(e,t),asyncValidationTask:async r=>await this.asyncValidateSiteName(e,t,r),agentMetadata:n};e.newSiteName=(await e.ui.showInputBox(i)).trim(),e.valuesToMask.push(e.newSiteName),e.relatedNameTask??=this.generateRelatedName(e,e.newSiteName,this.getRelatedResourceNamingRules(e))}getRelatedResourceNamingRules(e){const t=[n.resourceGroupNamingRules];return e.newSiteKind===Z.functionapp?t.push(n.storageAccountNamingRules):t.push(Q),t.push(H),t}async getRelatedName(e,t){return await this.generateRelatedName(e,t,Q)}shouldPrompt(e){return!e.newSiteName}async isRelatedNameAvailable(e,t){const r=[n.ResourceGroupListStep.isNameAvailable(e,t)];return e.newSiteKind===Z.functionapp?r.push(n.StorageAccountListStep.isNameAvailable(e,t)):r.push(AppServicePlanListStep.isNameAvailable(e,t,t)),(await Promise.all(r)).every((e=>e))}validateSiteName(e,t){t=t.trim();let r=te.maxLength;return e.newSiteDomainNameLabelScope&&e.newSiteDomainNameLabelScope!==ee.Global&&(r=43),t.length<te.minLength||t.length>r?o.l10n.t("The name must be between {0} and {1} characters.",te.minLength,r):"containerizedFunctionApp"!==this._siteFor||/^[a-z][a-z0-9]*(-[a-z0-9]+)*$/.test(t)?te.invalidCharsRegExp.test(t)?o.l10n.t("The name can only contain letters, numbers, or hyphens."):void 0:o.l10n.t("A name must consist of lower case alphanumeric characters or '-', start with an alphabetic character, and end with an alphanumeric character and cannot have '--'.")}async asyncValidateSiteName(e,t,r){let s;return r=r.trim(),e.newSiteDomainNameLabelScope&&e.newSiteDomainNameLabelScope!==ee.Global||(s??=await this.asyncValidateGlobalCNA(t,r)),e.newSiteDomainNameLabelScope&&(s??=await this.asyncValidateRegionalCNA(e,e.newSiteDomainNameLabelScope,r,e.resourceGroup?.name??e.newResourceGroupName),s??=await this.asyncValidateUniqueARMId(e,t,r,e.resourceGroup?.name??e.newResourceGroupName)),s}async asyncValidateGlobalCNA(e,t){const r=await e.checkNameAvailability(t,"Site");return r.nameAvailable?void 0:r.message}async asyncValidateRegionalCNA(e,t,r,i){if(!n.LocationListStep.hasLocation(e))throw new Error(o.l10n.t("Internal Error: A location is required when validating a site name with regional CNA."));if(t===ee.ResourceGroup&&!i)throw new Error(o.l10n.t("Internal Error: A resource group name is required for validating this level of domain name scope."));const a=await n.LocationListStep.getLocation(e),c=(0,s.nonNullValueAndProp)(await e.credentials.getToken(),"token"),l={url:`${e.environment.resourceManagerEndpointUrl}subscriptions/${e.subscriptionId}/providers/Microsoft.Web/locations/${a.name}/checknameavailability?api-version=2024-04-01`,method:"POST",headers:(0,V.createHttpHeaders)({"Content-Type":"application/json",Authorization:`Bearer ${c}`}),body:JSON.stringify({name:r,type:"Site",autoGeneratedDomainNameLabelScope:t,resourceGroupName:t===ee.ResourceGroup?i:void 0})},u=await(0,n.createGenericClient)(e,void 0),p=(await u.sendRequest((0,V.createPipelineRequest)(l))).parsedBody;if(!p.nameAvailable){if(t===ee.Global&&r.length>43&&p.message&&/must be less than \d{2} chars/i.test(p.message))return;return p.message}}async asyncValidateUniqueARMId(e,t,r,n){n||(e.relatedNameTask??=this.generateRelatedName(e,r,this.getRelatedResourceNamingRules(e)),n=await e.relatedNameTask);try{const e=(0,s.nonNullValue)(n,o.l10n.t("Internal Error: A resource group name must be provided to verify unique site ID."));if(await t.webApps.get(e,r))return o.l10n.t('A site with name "{0}" already exists in resource group "{1}".',r,e)}catch(e){const t=e?.statusCode;if(404!==t)return o.l10n.t('Failed to validate name availability for "{0}".  Please try another name.',r)}}}class SiteOSStep extends s.AzureWizardPromptStep{async prompt(e){const t=Object.keys(K).map((e=>{const t=K[e];return{label:getWebsiteOSDisplayName(t),description:"",data:t}}));e.newSiteOS=(await e.ui.showQuickPick(t,{placeHolder:o.l10n.t("Select an OS.")})).data,await setLocationsTask(e)}shouldPrompt(e){return void 0===e.newSiteOS}}var re;function getNewFileShareName(e){return e.toLowerCase().substr(0,57)+re.getRandomHexString(6)}async function createSlot(e,t,r){const s=await createWebSiteClient([r,e.subscription]),i=await(0,n.createGenericClient)(r,e.subscription),a=(await r.ui.showInputBox({prompt:o.l10n.t("Enter a unique name for the new deployment slot"),stepName:"slotName",validateInput:async t=>async function validateSlotName(e,t,r){if("production"===(e=e.trim()))return o.l10n.t('The slot name "{0}" is not available.',e);if(e.length<se.minLength)return o.l10n.t("The slot name must be at least {0} characters.",se.minLength);if(e.length+r.siteName.length>se.maxLength)return o.l10n.t("The combined site name and slot name must be fewer than {0} characters.",se.maxLength);if(se.invalidCharsRegExp.test(e))return o.l10n.t("The name can only contain letters, numbers, or hyphens.");{const s=await async function checkNameAvailability(e,t,r,s){return(await e.sendRequest((0,V.createPipelineRequest)({method:"POST",url:`/subscriptions/${t}/providers/Microsoft.Web/checknameavailability?api-version=2021-02-01`,headers:(0,V.createHttpHeaders)({"Content-Type":"application/json"}),body:JSON.stringify({name:r,type:s})}))).parsedBody}(t,r.subscription.subscriptionId,`${r.siteName}-${e}`,"Slot");return s.nameAvailable?void 0:s.message}}(t,i,e)})).trim(),c={name:a,kind:e.kind,location:e.location,serverFarmId:e.serverFarmId,siteConfig:{appSettings:[]}},l=await async function chooseConfigurationSource(e,t,r){if(t.isFunctionApp)return t;{const s=[{label:o.l10n.t("Don't clone configuration from an existing slot"),data:void 0}];s.push({label:t.fullName,data:t});for(const e of r)s.push({label:e.fullName,data:e});const n=o.l10n.t("Choose a configuration source.");return(await e.ui.showQuickPick(s,{placeHolder:n,stepName:"slotConfigSource"})).data}}(r,e,t);if(l){const e=await async function parseAppSettings(e,t){const r=await t.createClient(e),s=await r.listApplicationSettings(),o=[];if(s.properties)for(const e of Object.keys(s.properties)){let r=s.properties[e];t.isFunctionApp&&"WEBSITE_CONTENTSHARE"===e&&(r=getNewFileShareName(t.fullName)),o.push({name:e,value:r})}return o}(r,l);c.siteConfig.appSettings=e}r.showCreatingTreeItem(a);const u=o.l10n.t('Creating slot "{0}"...',a);return z.outputChannel.appendLog(u),await o.window.withProgress({location:o.ProgressLocation.Notification,title:u},(async()=>await s.webApps.beginCreateOrUpdateSlotAndWait(e.resourceGroup,e.siteName,a,c)))}!function(e){e.getRandomHexString=function getRandomHexString(e){return $.randomBytes(Math.ceil(e/2)).toString("hex").slice(0,e)},e.getPseudononymousStringHash=function getPseudononymousStringHash(e){return $.createHash("sha256").update(e).digest("base64")}}(re||(re={}));const se={minLength:2,maxLength:59,invalidCharsRegExp:/[^a-zA-Z0-9\-]/};var oe=r(39023);class DeleteLastServicePlanStep extends s.AzureWizardPromptStep{async prompt(e){const t=(0,s.nonNullProp)(e,"site"),r=await t.createClient(e),n=await r.getAppServicePlan();if(n&&!(0,oe.isNullOrUndefined)(n.numberOfSites)&&n.numberOfSites<2){const t=o.l10n.t('This is the last app in the App Service plan "{0}". Do you want to delete this App Service plan to prevent unexpected charges?',n.name),r=await e.ui.showWarningMessage(t,{modal:!0,stepName:"lastAppOnPlan"},s.DialogResponses.yes,s.DialogResponses.no);e.deletePlan=r===s.DialogResponses.yes}}shouldPrompt(e){return!(0,s.nonNullProp)(e,"site").isSlot}}class DeleteSiteStep extends s.AzureWizardExecuteStep{priority=100;async execute(e,t){const r=(0,s.nonNullProp)(e,"site");let n,i;r.isSlot?(n=o.l10n.t('Deleting slot "{0}"...',r.fullName),i=o.l10n.t('Successfully deleted slot "{0}".',r.fullName)):r.isFunctionApp?(n=o.l10n.t('Deleting function app "{0}"...',r.fullName),i=o.l10n.t('Successfully deleted function app "{0}".',r.fullName)):(n=o.l10n.t('Deleting web app "{0}"...',r.fullName),i=o.l10n.t('Successfully deleted web app "{0}".',r.fullName)),z.outputChannel.appendLog(n),t.report({message:n});const a=await r.createClient(e);await a.deleteMethod({deleteEmptyServerFarm:e.deletePlan}),z.outputChannel.appendLog(i)}shouldExecute(){return!0}}var ne,ie=r(16928);!function(e){e.None="None",e.LocalGit="LocalGit",e.GitHub="GitHub"}(ne||(ne={}));class DeployExecuteStepBase extends s.AzureWizardExecuteStep{stepName="DeployExecuteStepBase";createSuccessOutput(e){return{item:new s.ActivityChildItem({contextValue:(0,s.createContextValue)([s.activitySuccessContext,e.site.id]),label:o.l10n.t('Zip and deploy workspace "{0}"',e.effectiveDeployFsPath),iconPath:s.activitySuccessIcon,activityType:s.ActivityChildType.Success})}}createProgressOutput(e){return{item:new s.ActivityChildItem({contextValue:(0,s.createContextValue)([s.activityProgressContext,e.site.id]),label:o.l10n.t('Zip and deploy workspace "{0}"',e.effectiveDeployFsPath),iconPath:s.activityProgressIcon,activityType:s.ActivityChildType.Progress})}}createFailOutput(e){return{item:new s.ActivityChildItem({contextValue:(0,s.createContextValue)([s.activityFailContext,e.site.id]),label:o.l10n.t('Zip and deploy workspace "{0}"',e.effectiveDeployFsPath),iconPath:s.activityFailIcon,activityType:s.ActivityChildType.Fail})}}priority=200;progress;constructor(){super()}async execute(e,t){const r=e.client;this.progress=t;const n=await r.getSiteConfig(),i=o.l10n.t("Starting deployment...");t.report({message:i});try{await async function setDeploymentTelemetry(e,t,r){e.telemetry.properties.sourceHash=await s.randomUtils.getPseudononymousStringHash(e.fsPath),e.telemetry.properties.destHash=await s.randomUtils.getPseudononymousStringHash(e.site.fullName),e.telemetry.properties.scmType=String(t.scmType),e.telemetry.properties.isSlot=e.site.isSlot?"true":"false",e.telemetry.properties.alwaysOn=t.alwaysOn?"true":"false",e.telemetry.properties.linuxFxVersion=function getLinuxFxVersionForTelemetry(e){const t=e.linuxFxVersion||"";return/^docker/i.test(t)?"docker":t}(t),e.telemetry.properties.nodeVersion=String(t.nodeVersion),e.telemetry.properties.pythonVersion=String(t.pythonVersion),e.telemetry.properties.hasCors=t.cors?"true":"false",e.telemetry.properties.hasIpSecurityRestrictions=t.ipSecurityRestrictions&&t.ipSecurityRestrictions.length>0?"true":"false",e.telemetry.properties.javaVersion=String(t.javaVersion),e.telemetry.properties.siteKind=e.site.kind,e.client.getState().then((t=>{e.telemetry.properties.state=t}),(()=>{})),r.then((t=>{t&&(e.telemetry.properties.planStatus=String(t.status),e.telemetry.properties.planKind=String(t.kind),t.sku&&(e.telemetry.properties.planSize=String(t.sku.size),e.telemetry.properties.planTier=String(t.sku.tier)))}),(()=>{}))}(e,n,e.aspPromise)}catch(e){}await this.deployCore(e,n)}shouldExecute(e){return!0}}class DeployGitHubExecuteStep extends DeployExecuteStepBase{async deployCore(e){throw new Error(o.l10n.t('"{0}" is connected to a GitHub repository. Push to GitHub repository to deploy.',e.site.fullName))}}var ae,ce=r(18926),le=r(45753),ue=r(35317),pe=r(78100),de=r(78474),me=Object.defineProperty,he=Object.defineProperties,ge=Object.getOwnPropertyDescriptor,fe=Object.getOwnPropertyDescriptors,ye=Object.getOwnPropertyNames,we=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))be.call(t,r)&&__defNormalProp(e,r,t[r]);if(we)for(var r of we(t))Ee.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__spreadProps=(e,t)=>he(e,fe(t)),__esm=(e,t)=>function __init(){return e&&(t=(0,e[ye(e)[0]])(e=0)),t},__export=(e,t)=>{for(var r in t)me(e,r,{get:t[r],enumerable:!0})},__toCommonJS=e=>((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of ye(t))be.call(e,o)||o===r||me(e,o,{get:()=>t[o],enumerable:!(s=ge(t,o))||s.enumerable});return e})(me({},"__esModule",{value:!0}),e),__async=(e,t,r)=>new Promise(((s,o)=>{var fulfilled=e=>{try{step(r.next(e))}catch(e){o(e)}},rejected=e=>{try{step(r.throw(e))}catch(e){o(e)}},step=e=>e.done?s(e.value):Promise.resolve(e.value).then(fulfilled,rejected);step((r=r.apply(e,t)).next())}));function isPathSpec(e){return e instanceof String&&ae.has(e)}function toPaths(e){return ae.get(e)||[]}var Te,Se,_e,ke,ve,Pe,Ce=__esm({"src/lib/args/pathspec.ts"(){ae=new WeakMap}}),Ae=__esm({"src/lib/errors/git-error.ts"(){Te=class extends Error{constructor(e,t){super(t),this.task=e,Object.setPrototypeOf(this,new.target.prototype)}}}}),Oe=__esm({"src/lib/errors/git-response-error.ts"(){Ae(),Se=class extends Te{constructor(e,t){super(void 0,t||String(e)),this.git=e}}}}),Re=__esm({"src/lib/errors/task-configuration-error.ts"(){Ae(),_e=class extends Te{constructor(e){super(void 0,e)}}}});function asFunction(e){return"function"==typeof e?e:ve}function isUserFunction(e){return"function"==typeof e&&e!==ve}function splitOn(e,t){const r=e.indexOf(t);return r<=0?[e,""]:[e.substr(0,r),e.substr(r+1)]}function first(e,t=0){return isArrayLike(e)&&e.length>t?e[t]:void 0}function last(e,t=0){if(isArrayLike(e)&&e.length>t)return e[e.length-1-t]}function isArrayLike(e){return!(!e||"number"!=typeof e.length)}function toLinesWithContent(e="",t=!0,r="\n"){return e.split(r).reduce(((e,r)=>{const s=t?r.trim():r;return s&&e.push(s),e}),[])}function forEachLineWithContent(e,t){return toLinesWithContent(e,!0).map((e=>t(e)))}function folderExists(e){return(0,ce.exists)(e,ce.FOLDER)}function append(e,t){return Array.isArray(e)?e.includes(t)||e.push(t):e.add(t),t}function including(e,t){return Array.isArray(e)&&!e.includes(t)&&e.push(t),e}function remove(e,t){if(Array.isArray(e)){const r=e.indexOf(t);r>=0&&e.splice(r,1)}else e.delete(t);return t}function asArray(e){return Array.isArray(e)?e:[e]}function asCamelCase(e){return e.replace(/[\s-]+(.)/g,((e,t)=>t.toUpperCase()))}function asStringArray(e){return asArray(e).map(String)}function asNumber(e,t=0){if(null==e)return t;const r=parseInt(e,10);return isNaN(r)?t:r}function prefixedArray(e,t){const r=[];for(let s=0,o=e.length;s<o;s++)r.push(t,e[s]);return r}function bufferToString(e){return(Array.isArray(e)?Buffer.concat(e):e).toString("utf-8")}function pick(e,t){return Object.assign({},...t.map((t=>t in e?{[t]:e[t]}:{})))}function delay(e=0){return new Promise((t=>setTimeout(t,e)))}function orVoid(e){if(!1!==e)return e}var Fe,xe,De,Le,Ge,Ne=__esm({"src/lib/utils/util.ts"(){ke="\0",ve=()=>{},Pe=Object.prototype.toString.call.bind(Object.prototype.toString)}});function filterType(e,t,r){return t(e)?e:arguments.length>2?r:void 0}function filterPrimitives(e,t){const r=isPathSpec(e)?"string":typeof e;return/number|string|boolean/.test(r)&&(!t||!t.includes(r))}function filterPlainObject(e){return!!e&&"[object Object]"===Pe(e)}function filterFunction(e){return"function"==typeof e}var Ie,Ue,Me,We,Be,je=__esm({"src/lib/utils/argument-filters.ts"(){Ne(),Ce(),Fe=e=>Array.isArray(e),xe=e=>"string"==typeof e,De=e=>Array.isArray(e)&&e.every(xe),Le=e=>xe(e)||Array.isArray(e)&&e.every(xe),Ge=e=>null!=e&&!"number|boolean|function".includes(typeof e)&&(Array.isArray(e)||"string"==typeof e||"number"==typeof e.length)}}),ze=__esm({"src/lib/utils/exit-codes.ts"(){Ie=(e=>(e[e.SUCCESS=0]="SUCCESS",e[e.ERROR=1]="ERROR",e[e.NOT_FOUND=-2]="NOT_FOUND",e[e.UNCLEAN=128]="UNCLEAN",e))(Ie||{})}}),$e=__esm({"src/lib/utils/git-output-streams.ts"(){Ue=class{constructor(e,t){this.stdOut=e,this.stdErr=t}asStrings(){return new Ue(this.stdOut.toString("utf8"),this.stdErr.toString("utf8"))}}}}),Ve=__esm({"src/lib/utils/line-parser.ts"(){Me=class{constructor(e,t){this.matches=[],this.parse=(e,t)=>(this.resetMatches(),!!this._regExp.every(((t,r)=>this.addMatch(t,r,e(r))))&&!1!==this.useMatches(t,this.prepareMatches())),this._regExp=Array.isArray(e)?e:[e],t&&(this.useMatches=t)}useMatches(e,t){throw new Error("LineParser:useMatches not implemented")}resetMatches(){this.matches.length=0}prepareMatches(){return this.matches}addMatch(e,t,r){const s=r&&e.exec(r);return s&&this.pushMatch(t,s),!!s}pushMatch(e,t){this.matches.push(...t.slice(1))}},We=class extends Me{addMatch(e,t,r){return/^remote:\s/.test(String(r))&&super.addMatch(e,t,r)}pushMatch(e,t){(e>0||t.length>1)&&super.pushMatch(e,t)}}}});function createInstanceConfig(...e){const t=process.cwd(),r=Object.assign(__spreadValues({baseDir:t},Be),...e.filter((e=>"object"==typeof e&&e)));return r.baseDir=r.baseDir||t,r.trimmed=!0===r.trimmed,r}var He=__esm({"src/lib/utils/simple-git-options.ts"(){Be={binary:"git",maxConcurrentProcesses:5,config:[],trimmed:!1}}});function appendTaskOptions(e,t=[]){return filterPlainObject(e)?Object.keys(e).reduce(((t,r)=>{const s=e[r];return isPathSpec(s)?t.push(s):filterPrimitives(s,["boolean"])?t.push(r+"="+s):t.push(r),t}),t):t}function getTrailingOptions(e,t=0,r=!1){const s=[];for(let r=0,o=t<0?e.length:t;r<o;r++)"string|number".includes(typeof e[r])&&s.push(String(e[r]));return appendTaskOptions(trailingOptionsArgument(e),s),r||s.push(...function trailingArrayArgument(e){const t="function"==typeof last(e);return filterType(last(e,t?1:0),Fe,[])}(e)),s}function trailingOptionsArgument(e){const t=filterFunction(last(e));return filterType(last(e,t?1:0),filterPlainObject)}function trailingFunctionArgument(e,t=!0){const r=asFunction(last(e));return t||isUserFunction(r)?r:void 0}var qe=__esm({"src/lib/utils/task-options.ts"(){je(),Ne(),Ce()}});function callTaskParser(e,t){return e(t.stdOut,t.stdErr)}function parseStringResponse(e,t,r,s=!0){return asArray(r).forEach((r=>{for(let o=toLinesWithContent(r,s),n=0,i=o.length;n<i;n++){const line=(e=0)=>{if(!(n+e>=i))return o[n+e]};t.some((({parse:t})=>t(line,e)))}})),e}var Ke=__esm({"src/lib/utils/task-parser.ts"(){Ne()}}),Ze={};__export(Ze,{ExitCodes:()=>Ie,GitOutputStreams:()=>Ue,LineParser:()=>Me,NOOP:()=>ve,NULL:()=>ke,RemoteLineParser:()=>We,append:()=>append,appendTaskOptions:()=>appendTaskOptions,asArray:()=>asArray,asCamelCase:()=>asCamelCase,asFunction:()=>asFunction,asNumber:()=>asNumber,asStringArray:()=>asStringArray,bufferToString:()=>bufferToString,callTaskParser:()=>callTaskParser,createInstanceConfig:()=>createInstanceConfig,delay:()=>delay,filterArray:()=>Fe,filterFunction:()=>filterFunction,filterHasLength:()=>Ge,filterPlainObject:()=>filterPlainObject,filterPrimitives:()=>filterPrimitives,filterString:()=>xe,filterStringArray:()=>De,filterStringOrStringArray:()=>Le,filterType:()=>filterType,first:()=>first,folderExists:()=>folderExists,forEachLineWithContent:()=>forEachLineWithContent,getTrailingOptions:()=>getTrailingOptions,including:()=>including,isUserFunction:()=>isUserFunction,last:()=>last,objectToString:()=>Pe,orVoid:()=>orVoid,parseStringResponse:()=>parseStringResponse,pick:()=>pick,prefixedArray:()=>prefixedArray,remove:()=>remove,splitOn:()=>splitOn,toLinesWithContent:()=>toLinesWithContent,trailingFunctionArgument:()=>trailingFunctionArgument,trailingOptionsArgument:()=>trailingOptionsArgument});var Je,Ye,Qe,Xe=__esm({"src/lib/utils/index.ts"(){je(),ze(),$e(),Ve(),He(),qe(),Ke(),Ne()}}),et={};function checkIsRepoTask(e){switch(e){case"bare":return checkIsBareRepoTask();case"root":return checkIsRepoRootTask()}return{commands:["rev-parse","--is-inside-work-tree"],format:"utf-8",onError:Ye,parser:Qe}}function checkIsRepoRootTask(){return{commands:["rev-parse","--git-dir"],format:"utf-8",onError:Ye,parser:e=>/^\.(git)?$/.test(e.trim())}}function checkIsBareRepoTask(){return{commands:["rev-parse","--is-bare-repository"],format:"utf-8",onError:Ye,parser:Qe}}__export(et,{CheckRepoActions:()=>Je,checkIsBareRepoTask:()=>checkIsBareRepoTask,checkIsRepoRootTask:()=>checkIsRepoRootTask,checkIsRepoTask:()=>checkIsRepoTask});var tt,rt,st,ot,nt=__esm({"src/lib/tasks/check-is-repo.ts"(){Xe(),Je=(e=>(e.BARE="bare",e.IN_TREE="tree",e.IS_REPO_ROOT="root",e))(Je||{}),Ye=({exitCode:e},t,r,s)=>{if(128===e&&function isNotRepoMessage(e){return/(Not a git repository|Kein Git-Repository)/i.test(String(e))}(t))return r(Buffer.from("false"));s(t)},Qe=e=>"true"===e.trim()}});var it,at=__esm({"src/lib/responses/CleanSummary.ts"(){Xe(),tt=class{constructor(e){this.dryRun=e,this.paths=[],this.files=[],this.folders=[]}},rt=/^[a-z]+\s*/i,st=/^[a-z]+\s+[a-z]+\s*/i,ot=/\/$/}}),ct={};function adhocExecTask(e){return{commands:it,format:"empty",parser:e}}function configurationErrorTask(e){return{commands:it,format:"empty",parser(){throw"string"==typeof e?new _e(e):e}}}function straightThroughStringTask(e,t=!1){return{commands:e,format:"utf-8",parser:e=>t?String(e).trim():e}}function straightThroughBufferTask(e){return{commands:e,format:"buffer",parser:e=>e}}function isBufferTask(e){return"buffer"===e.format}function isEmptyTask(e){return"empty"===e.format||!e.commands.length}__export(ct,{EMPTY_COMMANDS:()=>it,adhocExecTask:()=>adhocExecTask,configurationErrorTask:()=>configurationErrorTask,isBufferTask:()=>isBufferTask,isEmptyTask:()=>isEmptyTask,straightThroughBufferTask:()=>straightThroughBufferTask,straightThroughStringTask:()=>straightThroughStringTask});var lt,ut,pt,dt,mt,ht=__esm({"src/lib/tasks/task.ts"(){Re(),it=[]}}),gt={};function cleanWithOptionsTask(e,t){const{cleanMode:r,options:s,valid:o}=function getCleanOptions(e){let t,r=[],s={cleanMode:!1,options:!0};return e.replace(/[^a-z]i/g,"").split("").forEach((e=>{!function isCleanMode(e){return"f"===e||"n"===e}(e)?s.options=s.options&&function isKnownOption(e){return/^-[a-z]$/i.test(e)&&mt.has(e.charAt(1))}(r[r.length]=`-${e}`):(t=e,s.cleanMode=!0)})),{cleanMode:t,options:r,valid:s}}(e);return r?o.options?(s.push(...t),s.some(isInteractiveMode)?configurationErrorTask(lt):cleanTask(r,s)):configurationErrorTask(pt+JSON.stringify(e)):configurationErrorTask(ut)}function cleanTask(e,t){return{commands:["clean",`-${e}`,...t],format:"utf-8",parser:t=>function cleanSummaryParser(e,t){const r=new tt(e),s=e?st:rt;return toLinesWithContent(t).forEach((e=>{const t=e.replace(s,"");r.paths.push(t),(ot.test(t)?r.folders:r.files).push(t)})),r}("n"===e,t)}}function isCleanOptionsArray(e){return Array.isArray(e)&&e.every((e=>mt.has(e)))}function isInteractiveMode(e){return/^-[^\-]/.test(e)?e.indexOf("i")>0:"--interactive"===e}__export(gt,{CONFIG_ERROR_INTERACTIVE_MODE:()=>lt,CONFIG_ERROR_MODE_REQUIRED:()=>ut,CONFIG_ERROR_UNKNOWN_OPTION:()=>pt,CleanOptions:()=>dt,cleanTask:()=>cleanTask,cleanWithOptionsTask:()=>cleanWithOptionsTask,isCleanOptionsArray:()=>isCleanOptionsArray});var ft,yt=__esm({"src/lib/tasks/clean.ts"(){at(),Xe(),ht(),lt="Git clean interactive mode is not supported",ut='Git clean mode parameter ("n" or "f") is required',pt="Git clean unknown option found in: ",dt=(e=>(e.DRY_RUN="n",e.FORCE="f",e.IGNORED_INCLUDED="x",e.IGNORED_ONLY="X",e.EXCLUDING="e",e.QUIET="q",e.RECURSIVE="d",e))(dt||{}),mt=new Set(["i",...asStringArray(Object.values(dt))])}});function*configParser(e,t=null){const r=e.split("\0");for(let e=0,s=r.length-1;e<s;){const s=r[e++].replace(/^(file):/,"");let o=r[e++],n=t;if(o.includes("\n")){const e=splitOn(o,"\n");n=e[0],o=e[1]}yield{file:s,key:n,value:o}}}var wt,bt=__esm({"src/lib/responses/ConfigList.ts"(){Xe(),ft=class{constructor(){this.files=[],this.values=Object.create(null)}get all(){return this._all||(this._all=this.files.reduce(((e,t)=>Object.assign(e,this.values[t])),{})),this._all}addFile(e){if(!(e in this.values)){const t=last(this.files);this.values[e]=t?Object.create(this.values[t]):{},this.files.push(e)}return this.values[e]}addValue(e,t,r){const s=this.addFile(e);s.hasOwnProperty(t)?Array.isArray(s[t])?s[t].push(r):s[t]=[s[t],r]:s[t]=r,this._all=void 0}}}});function asConfigScope(e,t){return"string"==typeof e&&wt.hasOwnProperty(e)?e:t}function getConfigTask(e,t){const r=["config","--null","--show-origin","--get-all",e];return t&&r.splice(1,0,`--${t}`),{commands:r,format:"utf-8",parser:t=>function configGetParser(e,t){let r=null;const s=[],o=new Map;for(const n of configParser(e,t))n.key===t&&(s.push(r=n.value),o.has(n.file)||o.set(n.file,[]),o.get(n.file).push(r));return{key:t,paths:Array.from(o.keys()),scopes:o,value:r,values:s}}(t,e)}}function listConfigTask(e){const t=["config","--list","--show-origin","--null"];return e&&t.push(`--${e}`),{commands:t,format:"utf-8",parser:e=>function configListParser(e){const t=new ft;for(const r of configParser(e))t.addValue(r.file,String(r.key),r.value);return t}(e)}}var Et,Tt,St=__esm({"src/lib/tasks/config.ts"(){bt(),Xe(),wt=(e=>(e.system="system",e.global="global",e.local="local",e.worktree="worktree",e))(wt||{})}});var _t,kt,vt,Pt,Ct=__esm({"src/lib/tasks/diff-name-status.ts"(){Et=(e=>(e.ADDED="A",e.COPIED="C",e.DELETED="D",e.MODIFIED="M",e.RENAMED="R",e.CHANGED="T",e.UNMERGED="U",e.UNKNOWN="X",e.BROKEN="B",e))(Et||{}),Tt=new Set(Object.values(Et))}});function grep_default(){return{grep(e){const t=trailingFunctionArgument(arguments),r=getTrailingOptions(arguments);for(const e of _t)if(r.includes(e))return this._runTask(configurationErrorTask(`git.grep: use of "${e}" is not supported.`),t);"string"==typeof e&&(e=function grepQueryBuilder(...e){return(new Pt).param(...e)}().param(e));const s=["grep","--null","-n","--full-name",...r,...e];return this._runTask({commands:s,format:"utf-8",parser:e=>function parseGrep(e){const t=new Set,r={};return forEachLineWithContent(e,(e=>{const[s,o,n]=e.split(ke);t.add(s),(r[s]=r[s]||[]).push({line:asNumber(o),path:s,preview:n})})),{paths:t,results:r}}(e)},t)}}}var At,Ot,Rt=__esm({"src/lib/tasks/grep.ts"(){Xe(),ht(),_t=["-h"],kt=Symbol("grepQuery"),Pt=class{constructor(){this[vt]=[]}*[(vt=kt,Symbol.iterator)](){for(const e of this[kt])yield e}and(...e){return e.length&&this[kt].push("--and","(",...prefixedArray(e,"-e"),")"),this}param(...e){return this[kt].push(...prefixedArray(e,"-e")),this}}}}),Ft={};function resetTask(e,t){const r=["reset"];return isValidResetMode(e)&&r.push(`--${e}`),r.push(...t),straightThroughStringTask(r)}function getResetMode(e){if(isValidResetMode(e))return e;switch(typeof e){case"string":case"undefined":return"soft"}}function isValidResetMode(e){return Ot.includes(e)}__export(Ft,{ResetMode:()=>At,getResetMode:()=>getResetMode,resetTask:()=>resetTask});var xt=__esm({"src/lib/tasks/reset.ts"(){ht(),At=(e=>(e.MIXED="mixed",e.SOFT="soft",e.HARD="hard",e.MERGE="merge",e.KEEP="keep",e))(At||{}),Ot=Array.from(Object.values(At))}});function prefixedLogger(e,t,r){return t&&String(t).replace(/\s*/,"")?(s,...o)=>{e(`%s ${s}`,t,...o),r&&r(s,...o)}:r?(t,...s)=>{e(t,...s),r(t,...s)}:e}function esm_createLogger(e,t,r,s=function createLog(){return le("simple-git")}()){const o=e&&`[${e}]`||"",n=[],i="string"==typeof t?s.extend(t):t,a=function childLoggerName(e,t,{namespace:r}){if("string"==typeof e)return e;const s=t&&t.namespace||"";return s.startsWith(r)?s.substr(r.length+1):s||r}(filterType(t,xe),i,s);return function step(t){const r=t&&`[${t}]`||"",n=i&&prefixedLogger(i,r)||ve,a=prefixedLogger(s,`${o} ${r}`,n);return Object.assign(i?n:a,{label:e,sibling,info:a,step})}(r);function sibling(t,r){return append(n,esm_createLogger(e,a.replace(/^[^:]+/,t),r,s))}}var Dt,Lt,Gt,Nt=__esm({"src/lib/git-logger.ts"(){Xe(),le.formatters.L=e=>String(Ge(e)?e.length:"-"),le.formatters.B=e=>Buffer.isBuffer(e)?e.toString("utf8"):Pe(e)}}),It=__esm({"src/lib/runners/tasks-pending-queue.ts"(){Ae(),Nt(),(Lt=Dt=class{constructor(e="GitExecutor"){this.logLabel=e,this._queue=new Map}withProgress(e){return this._queue.get(e)}createProgress(e){const t=Dt.getName(e.commands[0]);return{task:e,logger:esm_createLogger(this.logLabel,t),name:t}}push(e){const t=this.createProgress(e);return t.logger("Adding task to the queue, commands = %o",e.commands),this._queue.set(e,t),t}fatal(e){for(const[t,{logger:r}]of Array.from(this._queue.entries()))t===e.task?(r.info("Failed %o",e),r("Fatal exception, any as-yet un-started tasks run through this executor will not be attempted")):r.info("A fatal exception occurred in a previous task, the queue has been purged: %o",e.message),this.complete(t);if(0!==this._queue.size)throw new Error(`Queue size should be zero after fatal: ${this._queue.size}`)}complete(e){this.withProgress(e)&&this._queue.delete(e)}attempt(e){const t=this.withProgress(e);if(!t)throw new Te(void 0,"TasksPendingQueue: attempt called for an unknown task");return t.logger("Starting task"),t}static getName(e="empty"){return`task:${e}:${++Dt.counter}`}}).counter=0}});function pluginContext(e,t){return{method:first(e.commands)||"",commands:t}}function onDataReceived(e,t,r,s){return o=>{r("%s received %L bytes",t,o),s("%B",o),e.push(o)}}var Ut,Mt=__esm({"src/lib/runners/git-executor-chain.ts"(){Ae(),ht(),Xe(),It(),Gt=class{constructor(e,t,r){this._executor=e,this._scheduler=t,this._plugins=r,this._chain=Promise.resolve(),this._queue=new Lt}get cwd(){return this._cwd||this._executor.cwd}set cwd(e){this._cwd=e}get env(){return this._executor.env}get outputHandler(){return this._executor.outputHandler}chain(){return this}push(e){return this._queue.push(e),this._chain=this._chain.then((()=>this.attemptTask(e)))}attemptTask(e){return __async(this,null,(function*(){const t=yield this._scheduler.next(),onQueueComplete=()=>this._queue.complete(e);try{const{logger:t}=this._queue.attempt(e);return yield isEmptyTask(e)?this.attemptEmptyTask(e,t):this.attemptRemoteTask(e,t)}catch(t){throw this.onFatalException(e,t)}finally{onQueueComplete(),t()}}))}onFatalException(e,t){const r=t instanceof Te?Object.assign(t,{task:e}):new Te(e,t&&String(t));return this._chain=Promise.resolve(),this._queue.fatal(r),r}attemptRemoteTask(e,t){return __async(this,null,(function*(){const r=this._plugins.exec("spawn.binary","",pluginContext(e,e.commands)),s=this._plugins.exec("spawn.args",[...e.commands],pluginContext(e,e.commands)),o=yield this.gitResponse(e,r,s,this.outputHandler,t.step("SPAWN")),n=yield this.handleTaskData(e,s,o,t.step("HANDLE"));return t("passing response to task's parser as a %s",e.format),isBufferTask(e)?callTaskParser(e.parser,n):callTaskParser(e.parser,n.asStrings())}))}attemptEmptyTask(e,t){return __async(this,null,(function*(){return t("empty task bypassing child process to call to task's parser"),e.parser(this)}))}handleTaskData(e,t,r,s){const{exitCode:o,rejection:n,stdOut:i,stdErr:a}=r;return new Promise(((c,l)=>{s("Preparing to handle process response exitCode=%d stdOut=",o);const{error:u}=this._plugins.exec("task.error",{error:n},__spreadValues(__spreadValues({},pluginContext(e,t)),r));return u&&e.onError?(s.info("exitCode=%s handling with custom error handler"),e.onError(r,u,(e=>{s.info("custom error handler treated as success"),s("custom error returned a %s",Pe(e)),c(new Ue(Array.isArray(e)?Buffer.concat(e):e,Buffer.concat(a)))}),l)):u?(s.info("handling as error: exitCode=%s stdErr=%s rejection=%o",o,a.length,n),l(u)):(s.info("retrieving task output complete"),void c(new Ue(Buffer.concat(i),Buffer.concat(a))))}))}gitResponse(e,t,r,s,o){return __async(this,null,(function*(){const n=o.sibling("output"),i=this._plugins.exec("spawn.options",{cwd:this.cwd,env:this.env,windowsHide:!0},pluginContext(e,e.commands));return new Promise((a=>{const c=[],l=[];o.info("%s %o",t,r),o("%O",i);let u=this._beforeSpawn(e,r);if(u)return a({stdOut:c,stdErr:l,exitCode:9901,rejection:u});this._plugins.exec("spawn.before",void 0,__spreadProps(__spreadValues({},pluginContext(e,r)),{kill(e){u=e||u}}));const p=(0,ue.spawn)(t,r,i);p.stdout.on("data",onDataReceived(c,"stdOut",o,n.step("stdOut"))),p.stderr.on("data",onDataReceived(l,"stdErr",o,n.step("stdErr"))),p.on("error",function onErrorReceived(e,t){return r=>{t("[ERROR] child process exception %o",r),e.push(Buffer.from(String(r.stack),"ascii"))}}(l,o)),s&&(o("Passing child process stdOut/stdErr to custom outputHandler"),s(t,p.stdout,p.stderr,[...r])),this._plugins.exec("spawn.after",void 0,__spreadProps(__spreadValues({},pluginContext(e,r)),{spawned:p,close(e,t){a({stdOut:c,stdErr:l,exitCode:e,rejection:u||t})},kill(e){p.killed||(u=e,p.kill("SIGINT"))}}))}))}))}_beforeSpawn(e,t){let r;return this._plugins.exec("spawn.before",void 0,__spreadProps(__spreadValues({},pluginContext(e,t)),{kill(e){r=e||r}})),r}}}}),Wt={};__export(Wt,{GitExecutor:()=>Ut});var Bt=__esm({"src/lib/runners/git-executor.ts"(){Mt(),Ut=class{constructor(e,t,r){this.cwd=e,this._scheduler=t,this._plugins=r,this._chain=new Gt(this,this._scheduler,this._plugins)}chain(){return new Gt(this,this._scheduler,this._plugins)}push(e){return this._chain.push(e)}}}});function taskCallback(e,t,r=ve){t.then((e=>{r(null,e)}),(t=>{(null==t?void 0:t.task)===e&&r(t instanceof Se?function addDeprecationNoticeToError(e){let log=e=>{console.warn(`simple-git deprecation notice: accessing GitResponseError.${e} should be GitResponseError.git.${e}, this will no longer be available in version 3`),log=ve};return Object.create(e,Object.getOwnPropertyNames(e.git).reduce(descriptorReducer,{}));function descriptorReducer(t,r){return r in e||(t[r]={enumerable:!1,configurable:!1,get:()=>(log(r),e.git[r])}),t}}(t):t,void 0)}))}var jt=__esm({"src/lib/task-callback.ts"(){Oe(),Xe()}});function changeWorkingDirectoryTask(e,t){return adhocExecTask((r=>{if(!folderExists(e))throw new Error(`Git.cwd: cannot change to non-directory "${e}"`);return(t||r).cwd=e}))}var zt=__esm({"src/lib/tasks/change-working-directory.ts"(){Xe(),ht()}});function checkoutTask(e){const t=["checkout",...e];return"-b"===t[1]&&t.includes("-B")&&(t[1]=remove(t,"-B")),straightThroughStringTask(t)}var $t,Vt=__esm({"src/lib/tasks/checkout.ts"(){Xe(),ht()}});var Ht,qt=__esm({"src/lib/tasks/count-objects.ts"(){Xe(),$t=new Me(/([a-z-]+): (\d+)$/,((e,[t,r])=>{const s=asCamelCase(t);e.hasOwnProperty(s)&&(e[s]=asNumber(r))}))}});function parseCommitResult(e){return parseStringResponse({author:null,branch:"",commit:"",root:!1,summary:{changes:0,insertions:0,deletions:0}},Ht,e)}var Kt=__esm({"src/lib/parsers/parse-commit.ts"(){Xe(),Ht=[new Me(/^\[([^\s]+)( \([^)]+\))? ([^\]]+)/,((e,[t,r,s])=>{e.branch=t,e.commit=s,e.root=!!r})),new Me(/\s*Author:\s(.+)/i,((e,[t])=>{const r=t.split("<"),s=r.pop();s&&s.includes("@")&&(e.author={email:s.substr(0,s.length-1),name:r.join("<").trim()})})),new Me(/(\d+)[^,]*(?:,\s*(\d+)[^,]*)(?:,\s*(\d+))/g,((e,[t,r,s])=>{e.summary.changes=parseInt(t,10)||0,e.summary.insertions=parseInt(r,10)||0,e.summary.deletions=parseInt(s,10)||0})),new Me(/^(\d+)[^,]*(?:,\s*(\d+)[^(]+\(([+-]))?/,((e,[t,r,s])=>{e.summary.changes=parseInt(t,10)||0;const o=parseInt(r,10)||0;"-"===s?e.summary.deletions=o:"+"===s&&(e.summary.insertions=o)}))]}});function commit_default(){return{commit(e,...t){const r=trailingFunctionArgument(arguments),s=function rejectDeprecatedSignatures(e){return!Le(e)&&configurationErrorTask("git.commit: requires the commit message to be supplied as a string/string[]")}(e)||function commitTask(e,t,r){return{commands:["-c","core.abbrev=40","commit",...prefixedArray(e,"-m"),...t,...r],format:"utf-8",parser:parseCommitResult}}(asArray(e),asArray(filterType(t[0],Le,[])),[...filterType(t[1],Fe,[]),...getTrailingOptions(arguments,0,!0)]);return this._runTask(s,r)}}}var Zt=__esm({"src/lib/tasks/commit.ts"(){Kt(),Xe(),ht()}});var Jt=__esm({"src/lib/tasks/first-commit.ts"(){Xe(),ht()}});var Yt,Qt,Xt,er=__esm({"src/lib/tasks/hash-object.ts"(){ht()}});var tr,rr=__esm({"src/lib/responses/InitSummary.ts"(){Yt=class{constructor(e,t,r,s){this.bare=e,this.path=t,this.existing=r,this.gitDir=s}},Qt=/^Init.+ repository in (.+)$/,Xt=/^Rein.+ in (.+)$/}});function initTask(e=!1,t,r){const s=["init",...r];return e&&!function hasBareCommand(e){return e.includes(tr)}(s)&&s.splice(1,0,tr),{commands:s,format:"utf-8",parser:e=>function parseInit(e,t,r){const s=String(r).trim();let o;if(o=Qt.exec(s))return new Yt(e,t,!1,o[1]);if(o=Xt.exec(s))return new Yt(e,t,!0,o[1]);let n="";const i=s.split(" ");for(;i.length;)if("in"===i.shift()){n=i.join(" ");break}return new Yt(e,t,/^re/i.test(s),n)}(s.includes("--bare"),t,e)}}var sr,or=__esm({"src/lib/tasks/init.ts"(){rr(),tr="--bare"}});function logFormatFromCommand(e){for(let t=0;t<e.length;t++){const r=sr.exec(e[t]);if(r)return`--${r[1]}`}return""}function isLogFormat(e){return sr.test(e)}var nr,ir,ar,cr,lr,ur,pr=__esm({"src/lib/args/log-format.ts"(){sr=/^--(stat|numstat|name-only|name-status)(=|$)/}}),dr=__esm({"src/lib/responses/DiffSummary.ts"(){nr=class{constructor(){this.changed=0,this.deletions=0,this.insertions=0,this.files=[]}}}});function getDiffParser(e=""){const t=ur[e];return e=>parseStringResponse(new nr,t,e,!1)}var mr,hr,gr,fr,yr=__esm({"src/lib/parsers/parse-diff-summary.ts"(){pr(),dr(),Ct(),Xe(),ir=[new Me(/^(.+)\s+\|\s+(\d+)(\s+[+\-]+)?$/,((e,[t,r,s=""])=>{e.files.push({file:t.trim(),changes:asNumber(r),insertions:s.replace(/[^+]/g,"").length,deletions:s.replace(/[^-]/g,"").length,binary:!1})})),new Me(/^(.+) \|\s+Bin ([0-9.]+) -> ([0-9.]+) ([a-z]+)/,((e,[t,r,s])=>{e.files.push({file:t.trim(),before:asNumber(r),after:asNumber(s),binary:!0})})),new Me(/(\d+) files? changed\s*((?:, \d+ [^,]+){0,2})/,((e,[t,r])=>{const s=/(\d+) i/.exec(r),o=/(\d+) d/.exec(r);e.changed=asNumber(t),e.insertions=asNumber(null==s?void 0:s[1]),e.deletions=asNumber(null==o?void 0:o[1])}))],ar=[new Me(/(\d+)\t(\d+)\t(.+)$/,((e,[t,r,s])=>{const o=asNumber(t),n=asNumber(r);e.changed++,e.insertions+=o,e.deletions+=n,e.files.push({file:s,changes:o+n,insertions:o,deletions:n,binary:!1})})),new Me(/-\t-\t(.+)$/,((e,[t])=>{e.changed++,e.files.push({file:t,after:0,before:0,binary:!0})}))],cr=[new Me(/(.+)$/,((e,[t])=>{e.changed++,e.files.push({file:t,changes:0,insertions:0,deletions:0,binary:!1})}))],lr=[new Me(/([ACDMRTUXB])([0-9]{0,3})\t(.[^\t]*)(\t(.[^\t]*))?$/,((e,[t,r,s,o,n])=>{var i;e.changed++,e.files.push({file:null!=n?n:s,changes:0,insertions:0,deletions:0,binary:!1,status:orVoid((i=t,Tt.has(i)&&t)),from:orVoid(!!n&&s!==n&&s),similarity:asNumber(r)})}))],ur={"":ir,"--stat":ir,"--numstat":ar,"--name-status":lr,"--name-only":cr}}});function createListLogSummaryParser(e=gr,t=fr,r=""){const s=getDiffParser(r);return function(r){const o=toLinesWithContent(r.trim(),!1,mr).map((function(r){const o=r.split(hr),n=function lineBuilder(e,t){return t.reduce(((t,r,s)=>(t[r]=e[s]||"",t)),Object.create({diff:null}))}(o[0].split(e),t);return o.length>1&&o[1].trim()&&(n.diff=s(o[1])),n}));return{all:o,latest:o.length&&o[0]||null,total:o.length}}}var wr=__esm({"src/lib/parsers/parse-list-log-summary.ts"(){Xe(),yr(),pr(),mr="òòòòòò ",hr=" òò",gr=" ò ",fr=["hash","date","message","refs","author_name","author_email"]}}),br={};function diffSummaryTask(e){let t=logFormatFromCommand(e);const r=["diff"];return""===t&&(t="--stat",r.push("--stat=4096")),r.push(...e),validateLogFormatConfig(r)||{commands:r,format:"utf-8",parser:getDiffParser(t)}}function validateLogFormatConfig(e){const t=e.filter(isLogFormat);return t.length>1?configurationErrorTask(`Summary flags are mutually exclusive - pick one of ${t.join(",")}`):t.length&&e.includes("-z")?configurationErrorTask(`Summary flag ${t} parsing is not compatible with null termination option '-z'`):void 0}__export(br,{diffSummaryTask:()=>diffSummaryTask,validateLogFormatConfig:()=>validateLogFormatConfig});var Er,Tr=__esm({"src/lib/tasks/diff.ts"(){pr(),yr(),ht()}});function parseLogOptions(e={},t=[]){const r=filterType(e.splitter,xe,gr),s=!filterPrimitives(e.format)&&e.format?e.format:{hash:"%H",date:!1===e.strictDate?"%ai":"%aI",message:"%s",refs:"%D",body:e.multiLine?"%B":"%b",author_name:!1!==e.mailMap?"%aN":"%an",author_email:!1!==e.mailMap?"%aE":"%ae"},[o,n]=function prettyFormat(e,t){const r=[],s=[];return Object.keys(e).forEach((t=>{r.push(t),s.push(String(e[t]))})),[r,s.join(t)]}(s,r),i=[],a=[`--pretty=format:${mr}${n}${hr}`,...t],c=e.n||e["max-count"]||e.maxCount;if(c&&a.push(`--max-count=${c}`),e.from||e.to){const t=!1!==e.symmetric?"...":"..";i.push(`${e.from||""}${t}${e.to||""}`)}return xe(e.file)&&a.push("--follow",function pathspec(...e){const t=new String(e);return ae.set(t,e),t}(e.file)),appendTaskOptions(function userOptions(e){return Object.keys(e).reduce(((t,r)=>(r in Er||(t[r]=e[r]),t)),{})}(e),a),{fields:o,splitter:r,commands:[...a,...i]}}function log_default(){return{log(...e){const t=trailingFunctionArgument(arguments),r=parseLogOptions(trailingOptionsArgument(arguments),filterType(arguments[0],Fe)),s=function rejectDeprecatedSignatures(e,t){return xe(e)&&xe(t)&&configurationErrorTask("git.log(string, string) should be replaced with git.log({ from: string, to: string })")}(...e)||validateLogFormatConfig(r.commands)||function createLogTask(e){return function logTask(e,t,r){const s=createListLogSummaryParser(e,t,logFormatFromCommand(r));return{commands:["log",...r],format:"utf-8",parser:s}}(e.splitter,e.fields,e.commands)}(r);return this._runTask(s,t)}}}var Sr,_r,kr,vr,Pr,Cr=__esm({"src/lib/tasks/log.ts"(){pr(),Ce(),wr(),Xe(),ht(),Tr(),Er=(e=>(e[e["--pretty"]=0]="--pretty",e[e["max-count"]=1]="max-count",e[e.maxCount=2]="maxCount",e[e.n=3]="n",e[e.file=4]="file",e[e.format=5]="format",e[e.from=6]="from",e[e.to=7]="to",e[e.splitter=8]="splitter",e[e.symmetric=9]="symmetric",e[e.mailMap=10]="mailMap",e[e.multiLine=11]="multiLine",e[e.strictDate=12]="strictDate",e))(Er||{})}}),Ar=__esm({"src/lib/responses/MergeSummary.ts"(){Sr=class{constructor(e,t=null,r){this.reason=e,this.file=t,this.meta=r}toString(){return`${this.file}:${this.reason}`}},_r=class{constructor(){this.conflicts=[],this.merges=[],this.result="success"}get failed(){return this.conflicts.length>0}get reason(){return this.result}toString(){return this.conflicts.length?`CONFLICTS: ${this.conflicts.join(", ")}`:"OK"}}}}),Or=__esm({"src/lib/responses/PullSummary.ts"(){kr=class{constructor(){this.remoteMessages={all:[]},this.created=[],this.deleted=[],this.files=[],this.deletions={},this.insertions={},this.summary={changes:0,deletions:0,insertions:0}}},vr=class{constructor(){this.remote="",this.hash={local:"",remote:""},this.branch={local:"",remote:""},this.message=""}toString(){return this.message}}}});function objectEnumerationResult(e){return e.objects=e.objects||{compressing:0,counting:0,enumerating:0,packReused:0,reused:{count:0,delta:0},total:{count:0,delta:0}}}function asObjectCount(e){const t=/^\s*(\d+)/.exec(e),r=/delta (\d+)/i.exec(e);return{count:asNumber(t&&t[1]||"0"),delta:asNumber(r&&r[1]||"0")}}var Rr,Fr,xr=__esm({"src/lib/parsers/parse-remote-objects.ts"(){Xe(),Pr=[new We(/^remote:\s*(enumerating|counting|compressing) objects: (\d+),/i,((e,[t,r])=>{const s=t.toLowerCase(),o=objectEnumerationResult(e.remoteMessages);Object.assign(o,{[s]:asNumber(r)})})),new We(/^remote:\s*(enumerating|counting|compressing) objects: \d+% \(\d+\/(\d+)\),/i,((e,[t,r])=>{const s=t.toLowerCase(),o=objectEnumerationResult(e.remoteMessages);Object.assign(o,{[s]:asNumber(r)})})),new We(/total ([^,]+), reused ([^,]+), pack-reused (\d+)/i,((e,[t,r,s])=>{const o=objectEnumerationResult(e.remoteMessages);o.total=asObjectCount(t),o.reused=asObjectCount(r),o.packReused=asNumber(s)}))]}});function parseRemoteMessages(e,t){return parseStringResponse({remoteMessages:new Fr},Rr,t)}var Dr,Lr,Gr,Nr,Ir,Ur,Mr=__esm({"src/lib/parsers/parse-remote-messages.ts"(){Xe(),xr(),Rr=[new We(/^remote:\s*(.+)$/,((e,[t])=>(e.remoteMessages.all.push(t.trim()),!1))),...Pr,new We([/create a (?:pull|merge) request/i,/\s(https?:\/\/\S+)$/],((e,[t])=>{e.remoteMessages.pullRequestUrl=t})),new We([/found (\d+) vulnerabilities.+\(([^)]+)\)/i,/\s(https?:\/\/\S+)$/],((e,[t,r,s])=>{e.remoteMessages.vulnerabilities={count:asNumber(t),summary:r,url:s}}))],Fr=class{constructor(){this.all=[]}}}});var Wr,Br,jr,zr=__esm({"src/lib/parsers/parse-pull.ts"(){Or(),Xe(),Mr(),Dr=/(\d+)\D+((\d+)\D+\(\+\))?(\D+(\d+)\D+\(-\))?/,Lr=/^(create|delete) mode \d+ (.+)/,Gr=[new Me(/^\s*(.+?)\s+\|\s+\d+\s*(\+*)(-*)/,((e,[t,r,s])=>{e.files.push(t),r&&(e.insertions[t]=r.length),s&&(e.deletions[t]=s.length)})),new Me(Dr,((e,[t,,r,,s])=>(void 0!==r||void 0!==s)&&(e.summary.changes=+t||0,e.summary.insertions=+r||0,e.summary.deletions=+s||0,!0))),new Me(Lr,((e,[t,r])=>{append(e.files,r),append("create"===t?e.created:e.deleted,r)}))],Nr=[new Me(/^from\s(.+)$/i,((e,[t])=>{e.remote=t})),new Me(/^fatal:\s(.+)$/,((e,[t])=>{e.message=t})),new Me(/([a-z0-9]+)\.\.([a-z0-9]+)\s+(\S+)\s+->\s+(\S+)$/,((e,[t,r,s,o])=>{e.branch.local=s,e.hash.local=t,e.branch.remote=o,e.hash.remote=r}))],Ir=(e,t)=>parseStringResponse(new kr,Gr,[e,t]),Ur=(e,t)=>Object.assign(new kr,Ir(e,t),parseRemoteMessages(0,t))}}),$r=__esm({"src/lib/parsers/parse-merge.ts"(){Ar(),Xe(),zr(),Wr=[new Me(/^Auto-merging\s+(.+)$/,((e,[t])=>{e.merges.push(t)})),new Me(/^CONFLICT\s+\((.+)\): Merge conflict in (.+)$/,((e,[t,r])=>{e.conflicts.push(new Sr(t,r))})),new Me(/^CONFLICT\s+\((.+\/delete)\): (.+) deleted in (.+) and/,((e,[t,r,s])=>{e.conflicts.push(new Sr(t,r,{deleteRef:s}))})),new Me(/^CONFLICT\s+\((.+)\):/,((e,[t])=>{e.conflicts.push(new Sr(t,null))})),new Me(/^Automatic merge failed;\s+(.+)$/,((e,[t])=>{e.result=t}))],Br=(e,t)=>Object.assign(jr(e,t),Ur(e,t)),jr=e=>parseStringResponse(new _r,Wr,e)}});function mergeTask(e){return e.length?{commands:["merge",...e],format:"utf-8",parser(e,t){const r=Br(e,t);if(r.failed)throw new Se(r);return r}}:configurationErrorTask("Git.merge requires at least one option")}var Vr,Hr,qr,Kr=__esm({"src/lib/tasks/merge.ts"(){Oe(),$r(),ht()}});var Zr=__esm({"src/lib/parsers/parse-push.ts"(){Xe(),Mr(),Vr=[new Me(/^Pushing to (.+)$/,((e,[t])=>{e.repo=t})),new Me(/^updating local tracking ref '(.+)'/,((e,[t])=>{e.ref=__spreadProps(__spreadValues({},e.ref||{}),{local:t})})),new Me(/^[=*-]\s+([^:]+):(\S+)\s+\[(.+)]$/,((e,[t,r,s])=>{e.pushed.push(function pushResultPushedItem(e,t,r){const s=r.includes("deleted"),o=r.includes("tag")||/^refs\/tags/.test(e),n=!r.includes("new");return{deleted:s,tag:o,branch:!o,new:!n,alreadyUpdated:n,local:e,remote:t}}(t,r,s))})),new Me(/^Branch '([^']+)' set up to track remote branch '([^']+)' from '([^']+)'/,((e,[t,r,s])=>{e.branch=__spreadProps(__spreadValues({},e.branch||{}),{local:t,remote:r,remoteName:s})})),new Me(/^([^:]+):(\S+)\s+([a-z0-9]+)\.\.([a-z0-9]+)$/,((e,[t,r,s,o])=>{e.update={head:{local:t,remote:r},hash:{from:s,to:o}}}))],Hr=(e,t)=>{const r=qr(e,t),s=parseRemoteMessages(0,t);return __spreadValues(__spreadValues({},r),s)},qr=(e,t)=>parseStringResponse({pushed:[]},Vr,[e,t])}}),Jr={};function pushTagsTask(e={},t){return append(t,"--tags"),pushTask(e,t)}function pushTask(e={},t){const r=["push",...t];return e.branch&&r.splice(1,0,e.branch),e.remote&&r.splice(1,0,e.remote),remove(r,"-v"),append(r,"--verbose"),append(r,"--porcelain"),{commands:r,format:"utf-8",parser:Hr}}__export(Jr,{pushTagsTask:()=>pushTagsTask,pushTask:()=>pushTask});var Yr=__esm({"src/lib/tasks/push.ts"(){Zr(),Xe()}});var Qr,Xr,es,ts,rs,ss=__esm({"src/lib/tasks/show.ts"(){Xe(),ht()}}),os=__esm({"src/lib/responses/FileStatusSummary.ts"(){Qr=/^(.+)\0(.+)$/,Xr=class{constructor(e,t,r){if(this.path=e,this.index=t,this.working_dir=r,"R"===t||"R"===r){const t=Qr.exec(e)||[null,e,e];this.from=t[2]||"",this.path=t[1]||""}}}}});function renamedFile(e){const[t,r]=e.split(ke);return{from:r||t,to:t}}function parser3(e,t,r){return[`${e}${t}`,r]}function conflicts(e,...t){return t.map((t=>parser3(e,t,((e,t)=>append(e.conflicted,t)))))}function splitLine(e,t){const r=t.trim();switch(" "){case r.charAt(2):return data(r.charAt(0),r.charAt(1),r.substr(3));case r.charAt(1):return data(" ",r.charAt(0),r.substr(2));default:return}function data(t,r,s){const o=`${t}${r}`,n=ts.get(o);n&&n(e,s),"##"!==o&&"!!"!==o&&e.files.push(new Xr(s,t,r))}}var ns,is=__esm({"src/lib/responses/StatusSummary.ts"(){Xe(),os(),es=class{constructor(){this.not_added=[],this.conflicted=[],this.created=[],this.deleted=[],this.ignored=void 0,this.modified=[],this.renamed=[],this.files=[],this.staged=[],this.ahead=0,this.behind=0,this.current=null,this.tracking=null,this.detached=!1,this.isClean=()=>!this.files.length}},ts=new Map([parser3(" ","A",((e,t)=>append(e.created,t))),parser3(" ","D",((e,t)=>append(e.deleted,t))),parser3(" ","M",((e,t)=>append(e.modified,t))),parser3("A"," ",((e,t)=>append(e.created,t)&&append(e.staged,t))),parser3("A","M",((e,t)=>append(e.created,t)&&append(e.staged,t)&&append(e.modified,t))),parser3("D"," ",((e,t)=>append(e.deleted,t)&&append(e.staged,t))),parser3("M"," ",((e,t)=>append(e.modified,t)&&append(e.staged,t))),parser3("M","M",((e,t)=>append(e.modified,t)&&append(e.staged,t))),parser3("R"," ",((e,t)=>{append(e.renamed,renamedFile(t))})),parser3("R","M",((e,t)=>{const r=renamedFile(t);append(e.renamed,r),append(e.modified,r.to)})),parser3("!","!",((e,t)=>{append(e.ignored=e.ignored||[],t)})),parser3("?","?",((e,t)=>append(e.not_added,t))),...conflicts("A","A","U"),...conflicts("D","D","U"),...conflicts("U","A","D","U"),["##",(e,t)=>{let r;r=/ahead (\d+)/.exec(t),e.ahead=r&&+r[1]||0,r=/behind (\d+)/.exec(t),e.behind=r&&+r[1]||0,r=/^(.+?(?=(?:\.{3}|\s|$)))/.exec(t),e.current=r&&r[1],r=/\.{3}(\S*)/.exec(t),e.tracking=r&&r[1],r=/\son\s([\S]+)$/.exec(t),e.current=r&&r[1]||e.current,e.detached=/\(no branch\)/.test(t)}]]),rs=function(e){const t=e.split(ke),r=new es;for(let e=0,s=t.length;e<s;){let s=t[e++].trim();s&&("R"===s.charAt(0)&&(s+=ke+(t[e++]||"")),splitLine(r,s))}return r}}});var as,cs,ls=__esm({"src/lib/tasks/status.ts"(){is(),ns=["--null","-z"]}});function versionResponse(e=0,t=0,r=0,s="",o=!0){return Object.defineProperty({major:e,minor:t,patch:r,agent:s,installed:o},"toString",{value(){return`${this.major}.${this.minor}.${this.patch}`},configurable:!1,enumerable:!1})}function versionParser(e){return e===as?function notInstalledResponse(){return versionResponse(0,0,0,"",!1)}():parseStringResponse(versionResponse(0,0,0,e),cs,e)}var us,ps=__esm({"src/lib/tasks/version.ts"(){Xe(),as="installed=false",cs=[new Me(/version (\d+)\.(\d+)\.(\d+)(?:\s*\((.+)\))?/,((e,[t,r,s,o=""])=>{Object.assign(e,versionResponse(asNumber(t),asNumber(r),asNumber(s),o))})),new Me(/version (\d+)\.(\d+)\.(\D+)(.+)?$/,((e,[t,r,s,o=""])=>{Object.assign(e,versionResponse(asNumber(t),asNumber(r),s,o))}))]}}),ds={};__export(ds,{SimpleGitApi:()=>us});var ms,hs,gs=__esm({"src/lib/simple-git-api.ts"(){jt(),zt(),Vt(),qt(),Zt(),St(),Jt(),Rt(),er(),or(),Cr(),Kr(),Yr(),ss(),ls(),ht(),ps(),Xe(),us=class{constructor(e){this._executor=e}_runTask(e,t){const r=this._executor.chain(),s=r.push(e);return t&&taskCallback(e,s,t),Object.create(this,{then:{value:s.then.bind(s)},catch:{value:s.catch.bind(s)},_executor:{value:r}})}add(e){return this._runTask(straightThroughStringTask(["add",...asArray(e)]),trailingFunctionArgument(arguments))}cwd(e){const t=trailingFunctionArgument(arguments);return"string"==typeof e?this._runTask(changeWorkingDirectoryTask(e,this._executor),t):"string"==typeof(null==e?void 0:e.path)?this._runTask(changeWorkingDirectoryTask(e.path,e.root&&this._executor||void 0),t):this._runTask(configurationErrorTask("Git.cwd: workingDirectory must be supplied as a string"),t)}hashObject(e,t){return this._runTask(function hashObjectTask(e,t){const r=["hash-object",e];return t&&r.push("-w"),straightThroughStringTask(r,!0)}(e,!0===t),trailingFunctionArgument(arguments))}init(e){return this._runTask(initTask(!0===e,this._executor.cwd,getTrailingOptions(arguments)),trailingFunctionArgument(arguments))}merge(){return this._runTask(mergeTask(getTrailingOptions(arguments)),trailingFunctionArgument(arguments))}mergeFromTo(e,t){return xe(e)&&xe(t)?this._runTask(mergeTask([e,t,...getTrailingOptions(arguments)]),trailingFunctionArgument(arguments,!1)):this._runTask(configurationErrorTask("Git.mergeFromTo requires that the 'remote' and 'branch' arguments are supplied as strings"))}outputHandler(e){return this._executor.outputHandler=e,this}push(){const e=pushTask({remote:filterType(arguments[0],xe),branch:filterType(arguments[1],xe)},getTrailingOptions(arguments));return this._runTask(e,trailingFunctionArgument(arguments))}stash(){return this._runTask(straightThroughStringTask(["stash",...getTrailingOptions(arguments)]),trailingFunctionArgument(arguments))}status(){return this._runTask(function statusTask(e){return{format:"utf-8",commands:["status","--porcelain","-b","-u","--null",...e.filter((e=>!ns.includes(e)))],parser:e=>rs(e)}}(getTrailingOptions(arguments)),trailingFunctionArgument(arguments))}},Object.assign(us.prototype,function checkout_default(){return{checkout(){return this._runTask(checkoutTask(getTrailingOptions(arguments,1)),trailingFunctionArgument(arguments))},checkoutBranch(e,t){return this._runTask(checkoutTask(["-b",e,t,...getTrailingOptions(arguments)]),trailingFunctionArgument(arguments))},checkoutLocalBranch(e){return this._runTask(checkoutTask(["-b",e,...getTrailingOptions(arguments)]),trailingFunctionArgument(arguments))}}}(),commit_default(),function config_default(){return{addConfig(e,t,...r){return this._runTask(function addConfigTask(e,t,r,s){const o=["config",`--${s}`];return r&&o.push("--add"),o.push(e,t),{commands:o,format:"utf-8",parser:e=>e}}(e,t,!0===r[0],asConfigScope(r[1],"local")),trailingFunctionArgument(arguments))},getConfig(e,t){return this._runTask(getConfigTask(e,asConfigScope(t,void 0)),trailingFunctionArgument(arguments))},listConfig(...e){return this._runTask(listConfigTask(asConfigScope(e[0],void 0)),trailingFunctionArgument(arguments))}}}(),function count_objects_default(){return{countObjects(){return this._runTask({commands:["count-objects","--verbose"],format:"utf-8",parser:e=>parseStringResponse({count:0,garbage:0,inPack:0,packs:0,prunePackable:0,size:0,sizeGarbage:0,sizePack:0},[$t],e)})}}}(),function first_commit_default(){return{firstCommit(){return this._runTask(straightThroughStringTask(["rev-list","--max-parents=0","HEAD"],!0),trailingFunctionArgument(arguments))}}}(),grep_default(),log_default(),function show_default(){return{showBuffer(){const e=["show",...getTrailingOptions(arguments,1)];return e.includes("--binary")||e.splice(1,0,"--binary"),this._runTask(straightThroughBufferTask(e),trailingFunctionArgument(arguments))},show(){const e=["show",...getTrailingOptions(arguments,1)];return this._runTask(straightThroughStringTask(e),trailingFunctionArgument(arguments))}}}(),function version_default(){return{version(){return this._runTask({commands:["--version"],format:"utf-8",parser:versionParser,onError(e,t,r,s){if(-2===e.exitCode)return r(Buffer.from(as));s(t)}})}}}())}}),fs={};__export(fs,{Scheduler:()=>hs});var ys=__esm({"src/lib/runners/scheduler.ts"(){Xe(),Nt(),ms=(()=>{let e=0;return()=>{e++;const{promise:t,done:r}=(0,pe.ud)();return{promise:t,done:r,id:e}}})(),hs=class{constructor(e=2){this.concurrency=e,this.logger=esm_createLogger("","scheduler"),this.pending=[],this.running=[],this.logger("Constructed, concurrency=%s",e)}schedule(){if(!this.pending.length||this.running.length>=this.concurrency)return void this.logger("Schedule attempt ignored, pending=%s running=%s concurrency=%s",this.pending.length,this.running.length,this.concurrency);const e=append(this.running,this.pending.shift());this.logger("Attempting id=%s",e.id),e.done((()=>{this.logger("Completing id=",e.id),remove(this.running,e),this.schedule()}))}next(){const{promise:e,id:t}=append(this.pending,ms());return this.logger("Scheduling id=%s",t),this.schedule(),e}}}}),ws={};function applyPatchTask(e,t){return straightThroughStringTask(["apply",...t,...e])}__export(ws,{applyPatchTask:()=>applyPatchTask});var bs,Es=__esm({"src/lib/tasks/apply-patch.ts"(){ht()}});var Ts,Ss,_s,ks=__esm({"src/lib/responses/BranchDeleteSummary.ts"(){bs=class{constructor(){this.all=[],this.branches={},this.errors=[]}get success(){return!this.errors.length}}}});function hasBranchDeletionError(e,t){return 1===t&&Ts.test(e)}var vs,Ps,Cs=__esm({"src/lib/parsers/parse-branch-delete.ts"(){ks(),Xe(),Ts=/^error[^']+'([^']+)'/m,Ss=[new Me(/(\S+)\s+\(\S+\s([^)]+)\)/,((e,[t,r])=>{const s=function branchDeletionSuccess(e,t){return{branch:e,hash:t,success:!0}}(t,r);e.all.push(s),e.branches[t]=s})),new Me(Ts,((e,[t])=>{const r=function branchDeletionFailure(e){return{branch:e,hash:null,success:!1}}(t);e.errors.push(r),e.all.push(r),e.branches[t]=r}))],_s=(e,t)=>parseStringResponse(new bs,Ss,[e,t])}}),As=__esm({"src/lib/responses/BranchSummary.ts"(){vs=class{constructor(){this.all=[],this.branches={},this.current="",this.detached=!1}push(e,t,r,s,o){"*"===e&&(this.detached=t,this.current=r),this.all.push(r),this.branches[r]={current:"*"===e,linkedWorkTree:"+"===e,name:r,commit:s,label:o}}}}});function branchStatus(e){return e?e.charAt(0):""}function parseBranchSummary(e){return parseStringResponse(new vs,Ps,e)}var Os=__esm({"src/lib/parsers/parse-branch.ts"(){As(),Xe(),Ps=[new Me(/^([*+]\s)?\((?:HEAD )?detached (?:from|at) (\S+)\)\s+([a-z0-9]+)\s(.*)$/,((e,[t,r,s,o])=>{e.push(branchStatus(t),!0,r,s,o)})),new Me(new RegExp("^([*+]\\s)?(\\S+)\\s+([a-z0-9]+)\\s?(.*)$","s"),((e,[t,r,s,o])=>{e.push(branchStatus(t),!1,r,s,o)}))]}}),Rs={};function containsDeleteBranchCommand(e){const t=["-d","-D","--delete"];return e.some((e=>t.includes(e)))}function branchTask(e){const t=containsDeleteBranchCommand(e),r=["branch",...e];return 1===r.length&&r.push("-a"),r.includes("-v")||r.splice(1,0,"-v"),{format:"utf-8",commands:r,parser:(e,r)=>t?_s(e,r).all[0]:parseBranchSummary(e)}}function branchLocalTask(){return{format:"utf-8",commands:["branch","-v"],parser:parseBranchSummary}}function deleteBranchesTask(e,t=!1){return{format:"utf-8",commands:["branch","-v",t?"-D":"-d",...e],parser:(e,t)=>_s(e,t),onError({exitCode:e,stdOut:t},r,s,o){if(!hasBranchDeletionError(String(r),e))return o(r);s(t)}}}function deleteBranchTask(e,t=!1){const r={format:"utf-8",commands:["branch","-v",t?"-D":"-d",e],parser:(t,r)=>_s(t,r).branches[e],onError({exitCode:e,stdErr:t,stdOut:s},o,n,i){if(!hasBranchDeletionError(String(o),e))return i(o);throw new Se(r.parser(bufferToString(s),bufferToString(t)),String(o))}};return r}__export(Rs,{branchLocalTask:()=>branchLocalTask,branchTask:()=>branchTask,containsDeleteBranchCommand:()=>containsDeleteBranchCommand,deleteBranchTask:()=>deleteBranchTask,deleteBranchesTask:()=>deleteBranchesTask});var Fs,xs=__esm({"src/lib/tasks/branch.ts"(){Oe(),Cs(),Os(),Xe()}}),Ds=__esm({"src/lib/responses/CheckIgnore.ts"(){Fs=e=>e.split(/\n/g).map((e=>e.trim())).filter((e=>!!e))}}),Ls={};function checkIgnoreTask(e){return{commands:["check-ignore",...e],format:"utf-8",parser:Fs}}__export(Ls,{checkIgnoreTask:()=>checkIgnoreTask});var Gs=__esm({"src/lib/tasks/check-ignore.ts"(){Ds()}}),Ns={};function disallowedCommand(e){return/^--upload-pack(=|$)/.test(e)}function cloneTask(e,t,r){const s=["clone",...r];xe(e)&&s.push(e),xe(t)&&s.push(t);return s.find(disallowedCommand)?configurationErrorTask("git.fetch: potential exploit argument blocked."):straightThroughStringTask(s)}function cloneMirrorTask(e,t,r){return append(r,"--mirror"),cloneTask(e,t,r)}__export(Ns,{cloneMirrorTask:()=>cloneMirrorTask,cloneTask:()=>cloneTask});var Is,Us=__esm({"src/lib/tasks/clone.ts"(){ht(),Xe()}});function parseFetchResult(e,t){return parseStringResponse({raw:e,remote:null,branches:[],tags:[],updated:[],deleted:[]},Is,[e,t])}var Ms=__esm({"src/lib/parsers/parse-fetch.ts"(){Xe(),Is=[new Me(/From (.+)$/,((e,[t])=>{e.remote=t})),new Me(/\* \[new branch]\s+(\S+)\s*-> (.+)$/,((e,[t,r])=>{e.branches.push({name:t,tracking:r})})),new Me(/\* \[new tag]\s+(\S+)\s*-> (.+)$/,((e,[t,r])=>{e.tags.push({name:t,tracking:r})})),new Me(/- \[deleted]\s+\S+\s*-> (.+)$/,((e,[t])=>{e.deleted.push({tracking:t})})),new Me(/\s*([^.]+)\.\.(\S+)\s+(\S+)\s*-> (.+)$/,((e,[t,r,s,o])=>{e.updated.push({name:s,tracking:o,to:r,from:t})}))]}}),Ws={};function disallowedCommand2(e){return/^--upload-pack(=|$)/.test(e)}function fetchTask(e,t,r){const s=["fetch",...r];e&&t&&s.push(e,t);return s.find(disallowedCommand2)?configurationErrorTask("git.fetch: potential exploit argument blocked."):{commands:s,format:"utf-8",parser:parseFetchResult}}__export(Ws,{fetchTask:()=>fetchTask});var Bs,js=__esm({"src/lib/tasks/fetch.ts"(){Ms(),ht()}});function parseMoveResult(e){return parseStringResponse({moves:[]},Bs,e)}var zs=__esm({"src/lib/parsers/parse-move.ts"(){Xe(),Bs=[new Me(/^Renaming (.+) to (.+)$/,((e,[t,r])=>{e.moves.push({from:t,to:r})}))]}}),$s={};function moveTask(e,t){return{commands:["mv","-v",...asArray(e),t],format:"utf-8",parser:parseMoveResult}}__export($s,{moveTask:()=>moveTask});var Vs=__esm({"src/lib/tasks/move.ts"(){zs(),Xe()}}),Hs={};function pullTask(e,t,r){const s=["pull",...r];return e&&t&&s.splice(1,0,e,t),{commands:s,format:"utf-8",parser:(e,t)=>Ur(e,t),onError(e,t,r,s){const o=function parsePullErrorResult(e,t){const r=parseStringResponse(new vr,Nr,[e,t]);return r.message&&r}(bufferToString(e.stdOut),bufferToString(e.stdErr));if(o)return s(new Se(o));s(t)}}}__export(Hs,{pullTask:()=>pullTask});var qs=__esm({"src/lib/tasks/pull.ts"(){Oe(),zr(),Xe()}});function parseGetRemotes(e){const t={};return forEach(e,(([e])=>t[e]={name:e})),Object.values(t)}function parseGetRemotesVerbose(e){const t={};return forEach(e,(([e,r,s])=>{t.hasOwnProperty(e)||(t[e]={name:e,refs:{fetch:"",push:""}}),s&&r&&(t[e].refs[s.replace(/[^a-z]/g,"")]=r)})),Object.values(t)}function forEach(e,t){forEachLineWithContent(e,(e=>t(e.split(/\s+/))))}var Ks=__esm({"src/lib/responses/GetRemoteSummary.ts"(){Xe()}}),Zs={};function addRemoteTask(e,t,r){return straightThroughStringTask(["remote","add",...r,e,t])}function getRemotesTask(e){const t=["remote"];return e&&t.push("-v"),{commands:t,format:"utf-8",parser:e?parseGetRemotesVerbose:parseGetRemotes}}function listRemotesTask(e){const t=[...e];return"ls-remote"!==t[0]&&t.unshift("ls-remote"),straightThroughStringTask(t)}function remoteTask(e){const t=[...e];return"remote"!==t[0]&&t.unshift("remote"),straightThroughStringTask(t)}function removeRemoteTask(e){return straightThroughStringTask(["remote","remove",e])}__export(Zs,{addRemoteTask:()=>addRemoteTask,getRemotesTask:()=>getRemotesTask,listRemotesTask:()=>listRemotesTask,remoteTask:()=>remoteTask,removeRemoteTask:()=>removeRemoteTask});var Js=__esm({"src/lib/tasks/remote.ts"(){Ks(),ht()}}),Ys={};function stashListTask(e={},t){const r=parseLogOptions(e),s=["stash","list",...r.commands,...t],o=createListLogSummaryParser(r.splitter,r.fields,logFormatFromCommand(s));return validateLogFormatConfig(s)||{commands:s,format:"utf-8",parser:o}}__export(Ys,{stashListTask:()=>stashListTask});var Qs=__esm({"src/lib/tasks/stash-list.ts"(){pr(),wr(),Tr(),Cr()}}),Xs={};function addSubModuleTask(e,t){return subModuleTask(["add",e,t])}function initSubModuleTask(e){return subModuleTask(["init",...e])}function subModuleTask(e){const t=[...e];return"submodule"!==t[0]&&t.unshift("submodule"),straightThroughStringTask(t)}function updateSubModuleTask(e){return subModuleTask(["update",...e])}__export(Xs,{addSubModuleTask:()=>addSubModuleTask,initSubModuleTask:()=>initSubModuleTask,subModuleTask:()=>subModuleTask,updateSubModuleTask:()=>updateSubModuleTask});var eo,to,ro=__esm({"src/lib/tasks/sub-module.ts"(){ht()}});function sorted(e,t){return e===t?0:e>t?1:-1}function trimmed(e){return e.trim()}function toNumber(e){return"string"==typeof e&&parseInt(e.replace(/^\D+/g,""),10)||0}var so=__esm({"src/lib/responses/TagList.ts"(){eo=class{constructor(e,t){this.all=e,this.latest=t}},to=function(e,t=!1){const r=e.split("\n").map(trimmed).filter(Boolean);t||r.sort((function(e,t){const r=e.split("."),s=t.split(".");if(1===r.length||1===s.length)return function singleSorted(e,t){const r=isNaN(e);return r!==isNaN(t)?r?1:-1:r?sorted(e,t):0}(toNumber(r[0]),toNumber(s[0]));for(let e=0,t=Math.max(r.length,s.length);e<t;e++){const t=sorted(toNumber(r[e]),toNumber(s[e]));if(t)return t}return 0}));const s=t?r[0]:[...r].reverse().find((e=>e.indexOf(".")>=0));return new eo(r,s)}}}),oo={};function tagListTask(e=[]){const t=e.some((e=>/^--sort=/.test(e)));return{format:"utf-8",commands:["tag","-l",...e],parser:e=>to(e,t)}}function addTagTask(e){return{format:"utf-8",commands:["tag",e],parser:()=>({name:e})}}function addAnnotatedTagTask(e,t){return{format:"utf-8",commands:["tag","-a","-m",t,e],parser:()=>({name:e})}}__export(oo,{addAnnotatedTagTask:()=>addAnnotatedTagTask,addTagTask:()=>addTagTask,tagListTask:()=>tagListTask});var no,io,ao=__esm({"src/lib/tasks/tag.ts"(){so()}}),co=(no={"src/git.js"(e,t){var{GitExecutor:r}=(Bt(),__toCommonJS(Wt)),{SimpleGitApi:s}=(gs(),__toCommonJS(ds)),{Scheduler:o}=(ys(),__toCommonJS(fs)),{configurationErrorTask:n}=(ht(),__toCommonJS(ct)),{asArray:i,filterArray:a,filterPrimitives:c,filterString:l,filterStringOrStringArray:u,filterType:p,getTrailingOptions:d,trailingFunctionArgument:m,trailingOptionsArgument:h}=(Xe(),__toCommonJS(Ze)),{applyPatchTask:g}=(Es(),__toCommonJS(ws)),{branchTask:y,branchLocalTask:w,deleteBranchesTask:b,deleteBranchTask:E}=(xs(),__toCommonJS(Rs)),{checkIgnoreTask:T}=(Gs(),__toCommonJS(Ls)),{checkIsRepoTask:S}=(nt(),__toCommonJS(et)),{cloneTask:_,cloneMirrorTask:k}=(Us(),__toCommonJS(Ns)),{cleanWithOptionsTask:v,isCleanOptionsArray:P}=(yt(),__toCommonJS(gt)),{diffSummaryTask:C}=(Tr(),__toCommonJS(br)),{fetchTask:A}=(js(),__toCommonJS(Ws)),{moveTask:O}=(Vs(),__toCommonJS($s)),{pullTask:R}=(qs(),__toCommonJS(Hs)),{pushTagsTask:F}=(Yr(),__toCommonJS(Jr)),{addRemoteTask:x,getRemotesTask:D,listRemotesTask:L,remoteTask:G,removeRemoteTask:N}=(Js(),__toCommonJS(Zs)),{getResetMode:I,resetTask:U}=(xt(),__toCommonJS(Ft)),{stashListTask:M}=(Qs(),__toCommonJS(Ys)),{addSubModuleTask:W,initSubModuleTask:B,subModuleTask:j,updateSubModuleTask:z}=(ro(),__toCommonJS(Xs)),{addAnnotatedTagTask:$,addTagTask:V,tagListTask:H}=(ao(),__toCommonJS(oo)),{straightThroughBufferTask:q,straightThroughStringTask:K}=(ht(),__toCommonJS(ct));function Git2(e,t){this._plugins=t,this._executor=new r(e.baseDir,new o(e.maxConcurrentProcesses),t),this._trimmed=e.trimmed}function createCloneTask(e,t,r,s){return"string"!=typeof r?n(`git.${e}() requires a string 'repoPath'`):t(r,p(s,l),d(arguments))}(Git2.prototype=Object.create(s.prototype)).constructor=Git2,Git2.prototype.customBinary=function(e){return this._plugins.reconfigure("binary",e),this},Git2.prototype.env=function(e,t){return 1===arguments.length&&"object"==typeof e?this._executor.env=e:(this._executor.env=this._executor.env||{})[e]=t,this},Git2.prototype.stashList=function(e){return this._runTask(M(h(arguments)||{},a(e)&&e||[]),m(arguments))},Git2.prototype.clone=function(){return this._runTask(createCloneTask("clone",_,...arguments),m(arguments))},Git2.prototype.mirror=function(){return this._runTask(createCloneTask("mirror",k,...arguments),m(arguments))},Git2.prototype.mv=function(e,t){return this._runTask(O(e,t),m(arguments))},Git2.prototype.checkoutLatestTag=function(e){var t=this;return this.pull((function(){t.tags((function(r,s){t.checkout(s.latest,e)}))}))},Git2.prototype.pull=function(e,t,r,s){return this._runTask(R(p(e,l),p(t,l),d(arguments)),m(arguments))},Git2.prototype.fetch=function(e,t){return this._runTask(A(p(e,l),p(t,l),d(arguments)),m(arguments))},Git2.prototype.silent=function(e){return console.warn("simple-git deprecation notice: git.silent: logging should be configured using the `debug` library / `DEBUG` environment variable, this will be an error in version 3"),this},Git2.prototype.tags=function(e,t){return this._runTask(H(d(arguments)),m(arguments))},Git2.prototype.rebase=function(){return this._runTask(K(["rebase",...d(arguments)]),m(arguments))},Git2.prototype.reset=function(e){return this._runTask(U(I(e),d(arguments)),m(arguments))},Git2.prototype.revert=function(e){const t=m(arguments);return"string"!=typeof e?this._runTask(n("Commit must be a string"),t):this._runTask(K(["revert",...d(arguments,0,!0),e]),t)},Git2.prototype.addTag=function(e){const t="string"==typeof e?V(e):n("Git.addTag requires a tag name");return this._runTask(t,m(arguments))},Git2.prototype.addAnnotatedTag=function(e,t){return this._runTask($(e,t),m(arguments))},Git2.prototype.deleteLocalBranch=function(e,t,r){return this._runTask(E(e,"boolean"==typeof t&&t),m(arguments))},Git2.prototype.deleteLocalBranches=function(e,t,r){return this._runTask(b(e,"boolean"==typeof t&&t),m(arguments))},Git2.prototype.branch=function(e,t){return this._runTask(y(d(arguments)),m(arguments))},Git2.prototype.branchLocal=function(e){return this._runTask(w(),m(arguments))},Git2.prototype.raw=function(e){const t=!Array.isArray(e),r=[].slice.call(t?arguments:e,0);for(let e=0;e<r.length&&t;e++)if(!c(r[e])){r.splice(e,r.length-e);break}r.push(...d(arguments,0,!0));var s=m(arguments);return r.length?this._runTask(K(r,this._trimmed),s):this._runTask(n("Raw: must supply one or more command to execute"),s)},Git2.prototype.submoduleAdd=function(e,t,r){return this._runTask(W(e,t),m(arguments))},Git2.prototype.submoduleUpdate=function(e,t){return this._runTask(z(d(arguments,!0)),m(arguments))},Git2.prototype.submoduleInit=function(e,t){return this._runTask(B(d(arguments,!0)),m(arguments))},Git2.prototype.subModule=function(e,t){return this._runTask(j(d(arguments)),m(arguments))},Git2.prototype.listRemote=function(){return this._runTask(L(d(arguments)),m(arguments))},Git2.prototype.addRemote=function(e,t,r){return this._runTask(x(e,t,d(arguments)),m(arguments))},Git2.prototype.removeRemote=function(e,t){return this._runTask(N(e),m(arguments))},Git2.prototype.getRemotes=function(e,t){return this._runTask(D(!0===e),m(arguments))},Git2.prototype.remote=function(e,t){return this._runTask(G(d(arguments)),m(arguments))},Git2.prototype.tag=function(e,t){const r=d(arguments);return"tag"!==r[0]&&r.unshift("tag"),this._runTask(K(r),m(arguments))},Git2.prototype.updateServerInfo=function(e){return this._runTask(K(["update-server-info"]),m(arguments))},Git2.prototype.pushTags=function(e,t){const r=F({remote:p(e,l)},d(arguments));return this._runTask(r,m(arguments))},Git2.prototype.rm=function(e){return this._runTask(K(["rm","-f",...i(e)]),m(arguments))},Git2.prototype.rmKeepLocal=function(e){return this._runTask(K(["rm","--cached",...i(e)]),m(arguments))},Git2.prototype.catFile=function(e,t){return this._catFile("utf-8",arguments)},Git2.prototype.binaryCatFile=function(){return this._catFile("buffer",arguments)},Git2.prototype._catFile=function(e,t){var r=m(t),s=["cat-file"],o=t[0];if("string"==typeof o)return this._runTask(n("Git.catFile: options must be supplied as an array of strings"),r);Array.isArray(o)&&s.push.apply(s,o);const i="buffer"===e?q(s):K(s);return this._runTask(i,r)},Git2.prototype.diff=function(e,t){const r=l(e)?n("git.diff: supplying options as a single string is no longer supported, switch to an array of strings"):K(["diff",...d(arguments)]);return this._runTask(r,m(arguments))},Git2.prototype.diffSummary=function(){return this._runTask(C(d(arguments,1)),m(arguments))},Git2.prototype.applyPatch=function(e){const t=u(e)?g(i(e),d([].slice.call(arguments,1))):n("git.applyPatch requires one or more string patches as the first argument");return this._runTask(t,m(arguments))},Git2.prototype.revparse=function(){const e=["rev-parse",...d(arguments,!0)];return this._runTask(K(e,!0),m(arguments))},Git2.prototype.clean=function(e,t,r){const s=P(e),o=s&&e.join("")||p(e,l)||"",n=d([].slice.call(arguments,s?1:0));return this._runTask(v(o,n),m(arguments))},Git2.prototype.exec=function(e){const t={commands:[],format:"utf-8",parser(){"function"==typeof e&&e()}};return this._runTask(t)},Git2.prototype.clearQueue=function(){return this},Git2.prototype.checkIgnore=function(e,t){return this._runTask(T(i(p(e,u,[]))),m(arguments))},Git2.prototype.checkIsRepo=function(e,t){return this._runTask(S(p(e,l)),m(arguments))},t.exports=Git2}},function __require(){return io||(0,no[ye(no)[0]])((io={exports:{}}).exports,io),io.exports});Ce(),Ae();var lo=class extends Te{constructor(e,t){super(void 0,t),this.config=e}};Ae(),Ae();var uo=class extends Te{constructor(e,t,r){super(e,r),this.task=e,this.plugin=t,Object.setPrototypeOf(this,new.target.prototype)}};function blockUnsafeOperationsPlugin({allowUnsafeProtocolOverride:e=!1,allowUnsafePack:t=!1}={}){return{type:"spawn.args",action:(r,s)=>(r.forEach(((o,n)=>{const i=n<r.length?r[n+1]:"";e||function preventProtocolOverride(e,t){if(function isConfigSwitch(e){return"string"==typeof e&&"-c"===e.trim().toLowerCase()}(e)&&/^\s*protocol(.[a-z]+)?.allow/.test(t))throw new uo(void 0,"unsafe","Configuring protocol.allow is not permitted without enabling allowUnsafeExtProtocol")}(o,i),t||function preventUploadPack(e,t){if(/^\s*--(upload|receive)-pack/.test(e))throw new uo(void 0,"unsafe","Use of --upload-pack or --receive-pack is not permitted without enabling allowUnsafePack");if("clone"===t&&/^\s*-u\b/.test(e))throw new uo(void 0,"unsafe","Use of clone with option -u is not permitted without enabling allowUnsafePack");if("push"===t&&/^\s*--exec\b/.test(e))throw new uo(void 0,"unsafe","Use of push with option --exec is not permitted without enabling allowUnsafePack")}(o,s.method)})),r)}}Oe(),Re(),nt(),yt(),St(),Ct(),Rt(),xt(),Xe(),Xe();var po=(0,pe.yX)().promise;function completionDetectionPlugin({onClose:e=!0,onExit:t=50}={}){function configureTimeout(e,t,r){!1!==e&&(!0===e?t.promise:t.promise.then((()=>delay(e)))).then(r.done)}return{type:"spawn.after",action(r,s){return __async(this,arguments,(function*(r,{spawned:s,close:o}){var n,i;const a=function createEvents(){let r=-1;const s={close:(0,pe.yX)(),closeTimeout:(0,pe.yX)(),exit:(0,pe.yX)(),exitTimeout:(0,pe.yX)()},o=Promise.race([!1===e?po:s.closeTimeout.promise,!1===t?po:s.exitTimeout.promise]);return configureTimeout(e,s.close,s.closeTimeout),configureTimeout(t,s.exit,s.exitTimeout),{close(e){r=e,s.close.done()},exit(e){r=e,s.exit.done()},get exitCode(){return r},result:o}}();let c=!0,quickClose=()=>{c=!1};null==(n=s.stdout)||n.on("data",quickClose),null==(i=s.stderr)||i.on("data",quickClose),s.on("error",quickClose),s.on("close",(e=>a.close(e))),s.on("exit",(e=>a.exit(e)));try{yield a.result,c&&(yield delay(50)),o(a.exitCode)}catch(e){o(a.exitCode,e)}}))}}}Xe();var mo="Invalid value supplied for custom binary, restricted characters must be removed or supply the unsafe.allowUnsafeCustomBinary option";function isBadArgument(e){return!e||!/^([a-z]:)?([a-z0-9/.\\_-]+)$/i.test(e)}function toBinaryConfig(e,t){if(e.length<1||e.length>2)throw new uo(void 0,"binary","Invalid value supplied for custom binary, requires a single string or an array containing either one or two strings");if(e.some(isBadArgument)){if(!t)throw new uo(void 0,"binary",mo);console.warn(mo)}const[r,s]=e;return{binary:r,prefix:s}}function isTaskError(e){return!(!e.exitCode||!e.stdErr.length)}function getErrorMessage(e){return Buffer.concat([...e.stdOut,...e.stdErr])}function errorDetectionHandler(e=!1,t=isTaskError,r=getErrorMessage){return(s,o)=>!e&&s||!t(o)?s:r(o)}function errorDetectionPlugin(e){return{type:"task.error",action(t,r){const s=e(t.error,{stdErr:r.stdErr,stdOut:r.stdOut,exitCode:r.exitCode});return Buffer.isBuffer(s)?{error:new Te(void 0,s.toString("utf-8"))}:{error:s}}}}Ae(),Xe();var ho=class{constructor(){this.plugins=new Set,this.events=new de.EventEmitter}on(e,t){this.events.on(e,t)}reconfigure(e,t){this.events.emit(e,t)}append(e,t){const r=append(this.plugins,{type:e,action:t});return()=>this.plugins.delete(r)}add(e){const t=[];return asArray(e).forEach((e=>e&&this.plugins.add(append(t,e)))),()=>{t.forEach((e=>this.plugins.delete(e)))}}exec(e,t,r){let s=t;const o=Object.freeze(Object.create(r));for(const t of this.plugins)t.type===e&&(s=t.action(s,o));return s}};Xe(),Xe(),Ce(),Xe();var go=co();function gitInstanceFactory(e,t){var r;const s=new ho,o=createInstanceConfig(e&&("string"==typeof e?{baseDir:e}:e)||{},t);if(!folderExists(o.baseDir))throw new lo(o,"Cannot use simple-git on a directory that does not exist");return Array.isArray(o.config)&&s.add(function commandConfigPrefixingPlugin(e){const t=prefixedArray(e,"-c");return{type:"spawn.args",action:e=>[...t,...e]}}(o.config)),s.add(blockUnsafeOperationsPlugin(o.unsafe)),s.add(function suffixPathsPlugin(){return{type:"spawn.args",action(e){const t=[];let r;function append2(e){(r=r||[]).push(...e)}for(let r=0;r<e.length;r++){const s=e[r];if(isPathSpec(s))append2(toPaths(s));else{if("--"===s){append2(e.slice(r+1).flatMap((e=>isPathSpec(e)&&toPaths(e)||e)));break}t.push(s)}}return r?[...t,"--",...r.map(String)]:t}}}()),s.add(completionDetectionPlugin(o.completion)),o.abort&&s.add(function abortPlugin(e){if(!e)return;const t={type:"spawn.after",action(t,r){function kill(){r.kill(new uo(void 0,"abort","Abort signal received"))}e.addEventListener("abort",kill),r.spawned.on("close",(()=>e.removeEventListener("abort",kill)))}};return[{type:"spawn.before",action(t,r){e.aborted&&r.kill(new uo(void 0,"abort","Abort already signaled"))}},t]}(o.abort)),o.progress&&s.add(function progressMonitorPlugin(e){const t="--progress",r=["checkout","clone","fetch","pull","push"];return[{type:"spawn.args",action:(e,s)=>r.includes(s.method)?including(e,t):e},{type:"spawn.after",action(r,s){var o;s.commands.includes(t)&&(null==(o=s.spawned.stderr)||o.on("data",(t=>{const r=/^([\s\S]+?):\s*(\d+)% \((\d+)\/(\d+)\)/.exec(t.toString("utf8"));var o;r&&e({method:s.method,stage:(o=r[1],String(o.toLowerCase().split(" ",1))||"unknown"),progress:asNumber(r[2]),processed:asNumber(r[3]),total:asNumber(r[4])})})))}}]}(o.progress)),o.timeout&&s.add(function timeoutPlugin({block:e,stdErr:t=!0,stdOut:r=!0}){if(e>0)return{type:"spawn.after",action(s,o){var n,i;let a;function wait(){a&&clearTimeout(a),a=setTimeout(kill,e)}function stop(){var e,t;null==(e=o.spawned.stdout)||e.off("data",wait),null==(t=o.spawned.stderr)||t.off("data",wait),o.spawned.off("exit",stop),o.spawned.off("close",stop),a&&clearTimeout(a)}function kill(){stop(),o.kill(new uo(void 0,"timeout","block timeout reached"))}r&&(null==(n=o.spawned.stdout)||n.on("data",wait)),t&&(null==(i=o.spawned.stderr)||i.on("data",wait)),o.spawned.on("exit",stop),o.spawned.on("close",stop),wait()}}}(o.timeout)),o.spawnOptions&&s.add(function spawnOptionsPlugin(e){const t=pick(e,["uid","gid"]);return{type:"spawn.options",action:e=>__spreadValues(__spreadValues({},t),e)}}(o.spawnOptions)),s.add(errorDetectionPlugin(errorDetectionHandler(!0))),o.errors&&s.add(errorDetectionPlugin(o.errors)),function customBinaryPlugin(e,t=["git"],r=!1){let s=toBinaryConfig(asArray(t),r);e.on("binary",(e=>{s=toBinaryConfig(asArray(e),r)})),e.append("spawn.binary",(()=>s.binary)),e.append("spawn.args",(e=>s.prefix?[s.prefix,...e]:e))}(s,o.binary,null==(r=o.unsafe)?void 0:r.allowUnsafeCustomBinary),new go(o,s)}Oe();var fo=gitInstanceFactory;async function verifyNoRunFromPackageSetting(e,t){let r=!1;const s=["WEBSITE_RUN_FROM_PACKAGE","WEBSITE_RUN_FROM_ZIP"],n=await t.createClient(e),i=await n.listApplicationSettings();for(const e of s)i.properties&&i.properties[e]&&(delete i.properties[e],z.outputChannel.appendLog(o.l10n.t('Deleting setting "{0}"...',e),{resourceName:t.fullName}),r=!0);r&&await n.updateApplicationSettings(i)}async function delay_delay(e){await new Promise((t=>{setTimeout(t,e)}))}var yo,wo=r(24116),bo=r.n(wo);async function retryKuduCall(e,t,r){return await bo()((async s=>{if(s>1){const r=e.telemetry.measurements.kuduMaxRetry;(void 0===r||r<s)&&(e.telemetry.measurements.kuduMaxRetry=s,e.telemetry.properties.kuduRetryMethod=t)}return await r()}),{retries:4,minTimeout:1e3})}async function ignore404Error(e,t){try{await t()}catch(t){if("404"!==(0,s.parseError)(t).errorType)throw t;e.telemetry.properties.ignore404Error="true"}}function convertQueryParamsValuesToString(e){const t=Object.keys(e);for(const r of t)"object"==typeof e[r]||(e[r]=String(e[r]));return e}async function waitForDeploymentToComplete(e,t,r={}){let i,a,c,l="",u=new Date(0),p="";const d=Date.now()+6e4,m=await t.createClient(e),{expectedId:h,token:g,locationUrl:y}=r,w=r.pollingInterval??1e3;for(e.activityAttributes=e.activityAttributes||{},e.activityAttributes.logs=e.activityAttributes.logs||[];!g?.isCancellationRequested;){if(y)try{a=(await(0,n.sendRequestWithTimeout)(e,{method:"GET",url:y},1e4,t.subscription)).parsedBody}catch(e){const t=(0,s.parseError)(e);if("REQUEST_ABORTED_ERROR"!==t.errorType)throw t}else[a,c,i]=await tryGetLatestDeployment(e,m,c,i,h);if(void 0===a||!a.id){if((h||y)&&Date.now()<d){await delay_delay(w);continue}throw new Error(o.l10n.t("Failed to get status of deployment."))}const g=a.id;let b,E=[];for(await retryKuduCall(e,"getLogEntry",(async()=>{await ignore404Error(e,(async()=>{E=(await m.getLogEntry(e,g)).reverse()}))}));;){const s=E.pop();if(!s)break;s.message&&s.logTime&&s.logTime>u&&(l=l.concat(s.message),r.progress?.report({message:s.message}),z.outputChannel.appendLog(s.message,{date:s.logTime,resourceName:t.fullName}),e.activityAttributes.logs.push({content:s.message}),b=s.logTime,/error/i.test(s.message)&&(p=s.message)),await retryKuduCall(e,"getLogEntryDetails",(async()=>{await ignore404Error(e,(async()=>{if(s.id&&s.detailsUrl){const t=await m.getLogEntryDetails(e,g,s.id);E.push(...cleanDetails(t))}}))}))}if(b&&(u=b),0!==a.status&&2!==a.status){if(3===a.status||a.isTemp){showErrorMessageWithOutput(o.l10n.t('Deployment to "{0}" failed.',t.fullName));const r=o.l10n.t("Deployment failed.");throw z.outputChannel.appendLog(r,{resourceName:t.fullName}),e.errorHandling.suppressDisplay=!0,e.telemetry.properties.deployErrorLastLine=p,new Error(r)}if(4===a.status);else{if(5===a.status)throw new Error(o.l10n.t("Deployment was cancelled and another deployment is in progress"));if(6===a.status)showErrorMessageWithOutput(o.l10n.t("Deployment was partially successful.",t.fullName));else if(-1===a.status)throw new Error(o.l10n.t("Deployment was cancelled."))}return void(e.syncTriggersPostDeploy=t.isFunctionApp&&!/syncing/i.test(l)&&!t.isKubernetesApp&&!t.isWorkflowApp)}await delay_delay(w)}async function tryGetLatestDeployment(e,t,r,n,i){let a;if(r)a=await retryKuduCall(e,"getResult",(async()=>await t.getDeployResult(e,(0,s.nonNullValue)(r))));else if(i)try{const s=await retryKuduCall(e,"getResult",(async()=>await t.getDeployResult(e,"latest")));if(s.isTemp)a=s;else if(s.id===i)a=s,r=s.id;else if(!s.status)throw new Error(o.l10n.t("Failed to retrieve deployment status."))}catch(e){const t=(0,s.parseError)(e);if("404"!==t.errorType)throw t}else if(n){a=(await retryKuduCall(e,"getDeployResults",(async()=>await t.getDeployResults(e)))).filter((e=>e.startTime&&e.startTime>=n)).sort(((e,t)=>(0,s.nonNullProp)(t,"startTime").valueOf()-(0,s.nonNullProp)(e,"startTime").valueOf())).shift(),a&&!a.isTemp&&(r=a.id)}else{try{a=await retryKuduCall(e,"getResult",(async()=>await t.getDeployResult(e,"latest")))}catch(e){if("404"!==(0,s.parseError)(e).errorType)throw e}a&&a.startTime&&(n=a.startTime)}return[a,r,n]}}function cleanDetails(e){const t=[];for(const r of e){const s="\\n";if(r.message?.includes(s)){const o=r.message.split(s);for(const s of o)e.find((e=>e.message===s))||t.push({...r,message:s})}else t.push(r)}return t.reverse()}async function showErrorMessageWithOutput(e){const t=o.l10n.t("View Output");o.window.showErrorMessage(e,t).then((e=>{e===t&&z.outputChannel.show()}))}async function localGitDeploy(e,t,r){const n=await e.createClient(r),i=await n.getWebAppPublishCredential(),a=(0,s.nonNullProp)(i,"publishingPassword"),c=(0,s.nonNullProp)(i,"publishingUserName");await(0,s.callWithMaskHandling)((async()=>{const s=`https://${encodeURIComponent(c)}:${encodeURIComponent(a)}@${e.gitUrl}`,n=fo(t.fsPath);let i;try{if(i=await n.status(),i.files.length>0&&!t.commit){const e=o.l10n.t('{0} uncommitted change(s) in local repo "{1}"',i.files.length,t.fsPath),s={title:o.l10n.t("Deploy Anyway")};await r.ui.showWarningMessage(e,{modal:!0,stepName:"pushWithUncommitChanges"},s),r.telemetry.properties.pushWithUncommitChanges="true"}await verifyNoRunFromPackageSetting(r,e),z.outputChannel.appendLog(o.l10n.t('Deploying Local Git repository to "{resourceName}"...'),{resourceName:e.fullName}),await tryPushAndWaitForDeploymentToComplete()}catch(e){if(e.message.indexOf("spawn git ENOENT")>=0){const e=o.l10n.t("Install");return await o.window.showErrorMessage(o.l10n.t("Git must be installed to use Local Git Deploy."),e)===e&&await openUrl("https://git-scm.com/downloads"),void(r.telemetry.properties.gitNotInstalled="true")}if(!(e.message.indexOf("error: failed to push")>=0))throw e;{const e={title:o.l10n.t("Force Push")},t=o.l10n.t("Push rejected due to Git history diverging.");await r.ui.showWarningMessage(t,{modal:!0,stepName:"forcePush"},e),r.telemetry.properties.forcePush="true",await tryPushAndWaitForDeploymentToComplete(!0)}}async function tryPushAndWaitForDeploymentToComplete(i=!1){const a=new o.CancellationTokenSource,c=a.token;try{if(t.commit){const e={"-a":null};await n.commit("Deployed via Azure App Service Extension",void 0,e)}const o=(await n.log()).latest?.hash;await new Promise(((l,u)=>{const p=i?{"-f":null}:{};n.push(s,`HEAD:${t.branch??"master"}`,p).catch((e=>{u(e),a.cancel()})),waitForDeploymentToComplete(r,e,{expectedId:o,token:c}).then(l).catch(u)}))}finally{a.dispose()}}}),a)}class DeployLocalGitExecuteStep extends DeployExecuteStepBase{async deployCore(e){await localGitDeploy(e.site,{fsPath:e.fsPath},e)}}class PostDeploySyncTriggersExecuteStep extends s.AzureWizardExecuteStep{priority=310;async execute(e){const t=await e.client.getState();"running"!==t?.toLowerCase()||e.site.identity||await async function syncTriggersPostDeploy(e,t){await delay_delay(1e4);const r=await t.createClient(e);await bo()((async e=>{const s=1===e?o.l10n.t("Syncing triggers..."):o.l10n.t("Syncing triggers (Attempt {0}/{1})...",e,6);z.outputChannel.appendLog(s,{resourceName:t.fullName}),await r.syncFunctionTriggers()}),{retries:5,minTimeout:5e3})}(e,e.site)}shouldExecute(e){return!!e.syncTriggersPostDeploy}}function isSubpath(e,t){const r=(0,ie.relative)(e,t);return""!==r&&!r.startsWith("..")&&r!==t}function isPathEqual(e,t){return""===(0,ie.relative)(e,t)}function getFileExtension(e){return e.split(".").pop()}async function runPreDeployTask(e,t,r){const s=await tryRunPreDeployTask(e,t,r);if(s.failedToFindTask)throw new Error(`Failed to find pre-deploy task "${s.taskName}". Modify your tasks or the setting "${z.prefix}.preDeployTask".`);void 0!==s.exitCode&&0!==s.exitCode&&await handleFailedPreDeployTask(e,s)}async function tryRunPreDeployTask(e,t,r){const s="preDeployTask",n=o.workspace.getConfiguration(z.prefix,o.Uri.file(t)).get(s);e.telemetry.properties.hasPreDeployTask=String(!!n);let i={taskName:n,exitCode:void 0,failedToFindTask:!1};if(n&&shouldExecuteTask(e,r,s,n)){const r=await yo.findTask(t,n);if(e.telemetry.properties.foundPreDeployTask=String(!!r),r){const s=o.l10n.t('Running preDeployTask "{0}"...',n);await o.window.withProgress({location:o.ProgressLocation.Notification,title:s},(async()=>{await yo.executeIfNotActive(r),i=await async function waitForPreDeployTask(e,t){return await new Promise((r=>{const s=o.tasks.onDidEndTaskProcess((o=>{yo.isTaskInScopeOfPath(o.execution.task,t)&&0!==o.exitCode&&(s.dispose(),r({taskName:o.execution.task.name,exitCode:o.exitCode,failedToFindTask:!1})),yo.isTaskEqual(o.execution.task,e)&&(s.dispose(),r({taskName:o.execution.task.name,exitCode:o.exitCode,failedToFindTask:!1}))}))}))}(r,t),e.telemetry.properties.preDeployTaskExitCode=String(i.exitCode)}))}else i.failedToFindTask=!0}return i}function shouldExecuteTask(e,t,r,s){const n="storage"===e.deployMethod||"zip"===e.deployMethod||t!==ne.LocalGit&&t!==ne.GitHub;return n||z.outputChannel.appendLog(o.l10n.t('WARNING: Ignoring {0} "{1}" for non-zip deploy.',r,s)),n}async function handleFailedPreDeployTask(e,t){const r=o.l10n.t('Errors exist after running preDeployTask "{0}". See task output for more info.',t.taskName),n={title:o.l10n.t("Deploy Anyway")},i={title:o.l10n.t("Open Settings")},a=await o.window.showErrorMessage(r,{modal:!0},n,i);if(a!==n)throw a===i?(e.telemetry.properties.preDeployTaskResponse="openSettings",await o.commands.executeCommand("workbench.action.openSettings"),new s.UserCancelledError("preDeployFailed|OpenSettings")):(e.telemetry.properties.preDeployTaskResponse="cancel",new s.UserCancelledError("preDeployFailed"));e.telemetry.properties.preDeployTaskResponse="deployAnyway"}!function(e){function getFsPathFromTask(e){if("object"==typeof e.scope){const t=e.scope;return t.uri?.fsPath}}function isTaskInScopeOfPath(e,t){if(e.scope===o.TaskScope.Global||e.scope===o.TaskScope.Workspace)return!0;{const r=getFsPathFromTask(e);return!!r&&(isPathEqual(r,t)||isSubpath(r,t))}}function isTaskScopeEqual(e,t){if(e.scope===t.scope)return!0;{const r=getFsPathFromTask(e),s=getFsPathFromTask(t);return!!r&&!!s&&isPathEqual(r,s)}}function isTaskEqual(e,t){return isTaskScopeEqual(e,t)&&e.name===t.name&&e.source===t.source&&e.definition.type===t.definition.type}e.getFsPathFromTask=getFsPathFromTask,e.isTaskInScopeOfPath=isTaskInScopeOfPath,e.isTaskScopeEqual=isTaskScopeEqual,e.isTaskEqual=isTaskEqual,e.findTask=async function findTask(e,t,r){return r=r||await o.tasks.fetchTasks(),t=t.toLowerCase(),r.find((r=>isTaskInScopeOfPath(r,e)&&(t===r.name.toLowerCase()||t===`${r.definition.type}: `+r.name.toLowerCase()||t===`${r.source}: `+r.name.toLowerCase())))},e.executeIfNotActive=async function executeIfNotActive(e){o.tasks.taskExecutions.find((t=>isTaskEqual(t.task,e)))||await o.tasks.executeTask(e)}}(yo||(yo={}));class PostDeployTaskExecuteStep extends s.AzureWizardExecuteStep{config;priority=300;constructor(e){super(),this.config=e}stepName="PostDeployTaskExecuteStep";createSuccessOutput(e){const t="postDeployTask",r=o.workspace.getConfiguration(z.prefix,o.Uri.file(e.fsPath)).get(t)??"",n=o.l10n.t('Start {0} "{1}".',t,r);return{item:new s.ActivityChildItem({contextValue:(0,s.createContextValue)([s.activitySuccessContext,e.site.id]),label:n,iconPath:s.activitySuccessIcon,activityType:s.ActivityChildType.Success})}}createFailOutput(e){return{item:new s.ActivityChildItem({contextValue:(0,s.createContextValue)([s.activityFailContext,e.site.id]),label:o.l10n.t("Post deploy task failed."),iconPath:s.activityFailIcon,activityType:s.ActivityChildType.Fail})}}async execute(e,t){const r="postDeployTask",s=o.workspace.getConfiguration(z.prefix,o.Uri.file(e.fsPath)).get(r);if(e.telemetry.properties.hasPostDeployTask=String(!!s),s){const n=await yo.findTask(e.fsPath,s);if(e.telemetry.properties.foundPostDeployTask=String(!!n),!n){const e=o.l10n.t('Failed to find {0} "{1}".',r,s);throw t.report({message:e}),new Error(e)}{await yo.executeIfNotActive(n);const i=o.l10n.t('Started {0} "{1}".',r,s);t.report({message:i}),z.outputChannel.appendLog(i,{resourceName:e.site.fullName})}}}shouldExecute(e){const t="postDeployTask",r=o.workspace.getConfiguration(z.prefix,o.Uri.file(e.fsPath)).get(t);return!(!r||!shouldExecuteTask(e,this.config.scmType,t,r))}}class StartAppAfterDeployExecuteStep extends s.AzureWizardExecuteStepWithActivityOutput{priority=900;stepName="StartAppAfterDeployExecuteStep";getTreeItemLabel(e){return e.site.isSlot?o.l10n.t('Start slot "{0}" after deployment',e.site.fullName):o.l10n.t('Start app "{0}" after deployment',e.site.fullName)}getOutputLogSuccess(e){return e.site.isSlot?o.l10n.t('Successfully started slot "{0}".',e.site.fullName):o.l10n.t('Successfully started app "{0}".',e.site.fullName)}getOutputLogFail(e){return e.site.isSlot?o.l10n.t('Failed to start slot "{0}".',e.site.fullName):o.l10n.t('Failed to start app "{0}".',e.site.fullName)}getOutputLogProgress(e){return e.site.isSlot?o.l10n.t('Starting slot "{0}"...',e.site.fullName):o.l10n.t('Starting app "{0}"...',e.site.fullName)}async execute(e,t){const r=e.site,s=e.site.isSlot?o.l10n.t("Starting slot..."):o.l10n.t("Starting app...");t.report({message:s});const n=await r.createClient(e);await n.start()}shouldExecute(e){return!0}}class StopAppBeforeDeployExecuteStep extends s.AzureWizardExecuteStepWithActivityOutput{stepName="StopAppBeforeDeployExecuteStep";getTreeItemLabel(e){return e.site.isSlot?o.l10n.t('Stop slot "{0}" before deployment',e.site.fullName):o.l10n.t('Stop app "{0}" before deployment',e.site.fullName)}getOutputLogSuccess(e){return e.site.isSlot?o.l10n.t('Successfully stopped slot "{0}".',e.site.fullName):o.l10n.t('Successfully stopped app "{0}".',e.site.fullName)}getOutputLogFail(e){return e.site.isSlot?o.l10n.t('Failed to stop slot "{0}".',e.site.fullName):o.l10n.t('Failed to stop app "{0}".',e.site.fullName)}getOutputLogProgress(e){return e.site.isSlot?o.l10n.t('Stopping slot "{0}"...',e.site.fullName):o.l10n.t('Stopping app "{0}"...',e.site.fullName)}priority=100;async execute(e,t){const r=e.site,s=o.l10n.t("Stopping app...");t.report({message:s});const n=await r.createClient(e);await n.stop()}shouldExecute(e){return!0}}class DelayFirstWebAppDeployStep extends s.AzureWizardExecuteStep{priority=300;constructor(){super()}async execute(e){await new Promise((async t=>{setTimeout(t,1e4);try{e.site.isFunctionApp&&t();const r=await e.aspPromise;r&&r.sku&&r.sku.tier&&"basic"===r.sku.tier.toLowerCase()||t(),e.site.isLinux||t();(await e.client.getDeployResults(e)).length>1&&t()}catch(e){t()}}))}shouldExecute(e){return!0}}var Eo=r(20539),To=r(40431),So=r.n(To),_o=r(2203),ko=r(59041);async function runWithZipStream(e,t){function onFileSize(r){e.telemetry.measurements.zipFileSize=r;const s=o.l10n.t("Zip package size: {0}",So()(r));z.outputChannel.appendLog(s,{resourceName:n.fullName}),t.progress?.report({message:s})}let r;const{site:n,pathFileMap:i,callback:a}=t;let{fsPath:c}=t;if("zip"===getFileExtension(c))e.telemetry.properties.alreadyZipped="true",r=Eo.createReadStream(c),Eo.lstat(c).then((e=>{onFileSize(e.size)}));else{const e=o.l10n.t("Creating zip package...");z.outputChannel.appendLog(e,{resourceName:n.fullName}),t.progress?.report({message:e});const a=new ko.u;let l=[],u=0;const p=new _o.PassThrough,d=new _o.PassThrough;if(a.outputStream.pipe(p),a.outputStream.pipe(d),p.on("data",(e=>{("string"==typeof e||Buffer.isBuffer(e))&&(u+=e.length)})),p.on("finish",(()=>{onFileSize(u)})),(await Eo.lstat(c)).isDirectory()){c.endsWith(ie.sep)||(c+=ie.sep),l=n.isFunctionApp?await async function getFilesFromGitignore(e,t){let r=[];const n=ie.join(e,t);if(await s.AzExtFsExtra.pathExists(n)){r=(await s.AzExtFsExtra.readFile(n)).split("\n").map((e=>e.trim())).filter((e=>""!==e))}const i=r.length>0?`{${r.join(",")}}`:null;return(await o.workspace.findFiles(new o.RelativePattern(e,"**/*"),i)).map((t=>ie.relative(e,t.fsPath)))}(c,".funcignore"):await async function getFilesFromGlob(e,t,r){const s=o.workspace.getConfiguration(z.prefix??"appService",o.Uri.file(e)),n=s.get("zipGlobPattern")||"**/*",i="zipIgnorePattern",a=s.get(i),c="string"==typeof a?[a]:a;let l=await o.workspace.findFiles(new o.RelativePattern(e,n));const u=o.l10n.t('Ignoring files from "{0}.{1}"',z.prefix,i);if(c){try{z.outputChannel.appendLog(u,{resourceName:t})}catch(e){z.outputChannel.appendLine(u)}r?.report({message:u});for(const e of c){const t=(await o.workspace.findFiles(n,e)).map((e=>e.fsPath));l=l.filter((e=>t.includes(e.fsPath))),z.outputChannel.appendLine(`"${e}"`)}}return l.map((t=>ie.relative(e,t.fsPath)))}(c,n.fullName,t.progress),z.outputChannel.appendLog(o.l10n.t("Adding {0} files to zip package...",l.length),{resourceName:n.fullName});for(const e of l)z.outputChannel.appendLog(ie.join(c,e),{resourceName:n.fullName}),a.addFile(ie.join(c,e),getPathFromMap(e,i))}else a.addFile(c,getPathFromMap(ie.basename(c),i));a.end(),r=d}return await a(r)}function getPathFromMap(e,t){return t?.get(e)||e}class DeployZipBaseExecuteStep extends DeployExecuteStepBase{pathFileMap;constructor(e){super(),this.pathFileMap=e}async deployCore(e){const t=e.fsPath;if(!await s.AzExtFsExtra.pathExists(t))throw new Error(o.l10n.t("Failed to deploy path that does not exist: {0}",t));const r=await this.deployZip(e);try{r&&(e.telemetry.properties.deploymentId=r.headers.get("scm-deployment-id"),e.locationUrl=r.headers.get("location"))}catch(e){}}}class DeployFlexExecuteStep extends DeployZipBaseExecuteStep{async deployZip(e){const t=await this.getFlexSite(e,e.site.subscription.subscriptionId,e.site.resourceGroup,e.site.siteName),r=await e.site.createClient(e),s="python"===t.properties?.functionAppConfig?.runtime.name;return await runWithZipStream(e,{fsPath:e.fsPath,site:e.site,pathFileMap:this.pathFileMap,callback:async t=>await r.flexDeploy(e,(()=>t),{RemoteBuild:s,Deployer:Y}),progress:this.progress})}async getFlexSite(e,t,r,s){const o={url:`https://management.azure.com/subscriptions/${t}/resourceGroups/${r}/providers/Microsoft.Web/sites/${s}?api-version=2023-12-01`,method:"GET",headers:(0,V.createHttpHeaders)({"Content-Type":"application/json"})},i=await(0,n.createGenericClient)(e,e.site.subscription);return(await i.sendRequest((0,V.createPipelineRequest)(o))).parsedBody}}var vo=r(41716),Po=r(565),Co=r(86588),Ao=r(64178),Oo=r(83826),Ro=r.n(Oo),Fo=r(87016);W().extend(j()),W().extend(Ro());const xo="core.windows.net";async function deployToStorageAccount(e,t,r){e.telemetry.properties.useStorageAccountDeploy="true";const n=`${W()().utc().format("YYYYMMDDHHmmss")}-${re.getRandomHexString(32)}.zip`,i=await async function createBlobServiceClient(e,t){const r=await t.createClient(e),n="AzureWebJobsStorage",i=await r.listApplicationSettings();let a=i.properties&&i.properties[n];if(!a)throw new Error(o.l10n.t('"{0}" app setting is required for Run From Package deployment.',n));try{return vo.w.fromConnectionString(a)}catch(e){const t="EndpointSuffix",r=";";if((0,s.parseError)(e).message.includes(t)&&!a.includes(t))return a.endsWith(r)||(a+=r),a+=`${t}=${xo}${r}`,vo.w.fromConnectionString(a);throw e}}(e,r),a=await async function createBlobFromZip(e,t,r,s,n){const i="function-releases",a=s.getContainerClient(i);await a.exists()||await a.create();const c=a.getBlockBlobClient(n);if(await runWithZipStream(e,{fsPath:t,site:r,callback:async e=>{z.outputChannel.appendLog(o.l10n.t("Uploading zip package to storage container..."),{resourceName:r.fullName}),await c.uploadStream(e)}}),c.getProperties().then((t=>{e.telemetry.measurements.blobSize=Number(t.contentLength)})),s.credential instanceof Po.Z){const e=new Fo.URL(c.url);return e.search=(0,Co.W)({containerName:i,blobName:n,permissions:Ao.v.parse("r"),startsOn:W()().utc().subtract(5,"minute").toDate(),expiresOn:W()().utc().add(10,"year").toDate()},s.credential).toString(),e.toString()}throw new Error('Internal Error: Expected credential to be of type "StorageSharedKeyCredential".')}(e,t,r,i,n),c=await r.createClient(e),l=await c.listApplicationSettings();l.properties=l.properties||{},delete l.properties.WEBSITE_RUN_FROM_ZIP,l.properties.WEBSITE_RUN_FROM_PACKAGE=a,await c.updateApplicationSettings(l),z.outputChannel.appendLog(o.l10n.t("Deployment successful."),{resourceName:r.fullName}),e.syncTriggersPostDeploy=!0}class DeployStorageAccountExecuteStep extends DeployZipBaseExecuteStep{async deployZip(e){return await deployToStorageAccount(e,e.fsPath,e.site)}}var Do=r(79896);class DeployWarExecuteStep extends DeployZipBaseExecuteStep{async deployZip(e){if("war"!==getFileExtension(e.fsPath))throw new Error(o.l10n.t("Path specified is not a war file"));const t=await e.site.createClient(e);await t.warPushDeploy(e,(()=>Do.createReadStream(e.fsPath)),{isAsync:!0,author:Y,deployer:Y,trackDeploymentId:!0})}}class DeployZipPushExecuteStep extends DeployZipBaseExecuteStep{async deployZip(e){const t=await e.site.createClient(e);return await runWithZipStream(e,{fsPath:e.fsPath,site:e.site,pathFileMap:this.pathFileMap,callback:async r=>await t.zipPushDeploy(e,(()=>r),{author:Y,deployer:Y,isAsync:!0,trackDeploymentId:!0}),progress:this.progress})}}class WaitForDeploymentToCompleteStep extends s.AzureWizardExecuteStep{stepName="WaitForDeploymentToCompleteStep";priority=210;_command={title:"",command:z.prefix+".showOutputChannel"};_childId=(0,$.randomUUID)();createSuccessOutput(e){const t=e.site.isSlot?o.l10n.t('Build slot "{0}" in Azure',e.site.fullName):o.l10n.t('Build app "{0}" in Azure',e.site.fullName);return{item:new s.ActivityChildItem({contextValue:(0,s.createContextValue)([s.activitySuccessContext,e.site.id]),label:t,iconPath:s.activitySuccessIcon,activityType:s.ActivityChildType.Success})}}createProgressOutput(e){const t=e.site.isSlot?o.l10n.t('Build slot "{0}" in Azure',e.site.fullName):o.l10n.t('Build app "{0}" in Azure',e.site.fullName),r=new s.ActivityChildItem({contextValue:(0,s.createContextValue)([s.activityProgressContext,e.site.id]),label:t,iconPath:s.activityProgressIcon,activityType:s.ActivityChildType.Progress,isParent:!0,initialCollapsibleState:o.TreeItemCollapsibleState.Expanded});return r.getChildren=()=>[new s.ActivityChildItem({label:o.l10n.t("Click to view output channel"),id:this._childId,command:this._command,activityType:s.ActivityChildType.Info,contextValue:(0,s.createContextValue)([s.activityProgressContext,"viewOutputChannel"]),iconPath:new o.ThemeIcon("output")})],{item:r}}createFailOutput(e){const t=e.site.isSlot?o.l10n.t('Build slot "{0}" in Azure',e.site.fullName):o.l10n.t('Build app "{0}" in Azure',e.site.fullName),r=new s.ActivityChildItem({contextValue:(0,s.createContextValue)([s.activityFailContext,e.site.id]),label:t,iconPath:s.activityFailIcon,activityType:s.ActivityChildType.Fail,isParent:!0,initialCollapsibleState:o.TreeItemCollapsibleState.Expanded});return r.getChildren=()=>[new s.ActivityChildItem({label:o.l10n.t("Click to view output channel"),id:this._childId,command:this._command,activityType:s.ActivityChildType.Info,contextValue:(0,s.createContextValue)([s.activityProgressContext,"viewOutputChannel"]),iconPath:new o.ThemeIcon("output")})],{item:r}}async execute(e,t){return await waitForDeploymentToComplete(e,(0,s.nonNullProp)(e,"site"),{locationUrl:e.locationUrl,progress:t})}shouldExecute(e){return!0}}async function deploy(e,t,r){const n=await e.createClient(r),i=n.getAppServicePlan(),a=Object.assign(r,{site:e,fsPath:t,client:n,aspPromise:i}),c=e.isSlot?o.l10n.t('Deploying to slot "{0}"',e.fullName):o.l10n.t('Deploying to app "{0}"',e.fullName),l=await async function createDeployExecuteSteps(e){const t=[],r=await e.client.getSiteConfig();if(e.stopAppBeforeDeploy&&t.push(new StopAppBeforeDeployExecuteStep,new StartAppAfterDeployExecuteStep),e.deployMethod||r.scmType!==ne.GitHub)if("storage"===e.deployMethod)t.push(new DeployStorageAccountExecuteStep);else if(e.deployMethod||r.scmType!==ne.LocalGit){const s=e.site.isLinux?r.linuxFxVersion:r.javaContainer;if(s&&/^(tomcat|wildfly|jboss)/i.test(s))t.push(new DeployWarExecuteStep);else if(s&&/^java/i.test(s)&&!e.site.isFunctionApp){const r=new Map([[ie.basename(e.fsPath),"app.jar"]]);t.push(new DeployZipPushExecuteStep(r))}else"flexconsumption"===e.deployMethod?t.push(new DeployFlexExecuteStep):t.push(new DeployZipPushExecuteStep);t.push(new WaitForDeploymentToCompleteStep),t.push(new DelayFirstWebAppDeployStep)}else t.push(new DeployLocalGitExecuteStep);else t.push(new DeployGitHubExecuteStep);return t.push(new PostDeployTaskExecuteStep(r)),t.push(new PostDeploySyncTriggersExecuteStep),t}(a),u=new s.AzureWizard(a,{executeSteps:l,title:c});a.activityTitle=e.isSlot?o.l10n.t('Deploy to slot "{0}"',e.fullName):o.l10n.t('Deploy to app "{0}"',e.fullName),await u.execute()}function getWorkspaceSetting(e,t,r){return o.workspace.getConfiguration(t,getScope(r)).get(e)}function getScope(e){return"string"==typeof e?o.Uri.file(e):e}async function selectWorkspaceItem(e,t,r){let s;if(o.workspace.workspaceFolders){const r=await Promise.all(o.workspace.workspaceFolders.map((e=>({label:ie.basename(e.uri.fsPath),description:e.uri.fsPath,data:e}))));r.push({label:o.l10n.t("$(file-directory) Browse..."),description:"",data:void 0}),s=(await e.ui.showQuickPick(r,{placeHolder:t})).data}return s||(e.telemetry.properties.browse="true",(await e.ui.showOpenDialog(r))[0])}const Lo="deploySubpath";async function getDeployFsPath(e,t,r){let n,i,a;if(t instanceof o.Uri)n=t.fsPath,a=o.workspace.getWorkspaceFolder(t),i=await appendDeploySubpathSetting(e,a,t.fsPath);else if("string"==typeof t)n=t,a=o.workspace.getWorkspaceFolder(o.Uri.file(t)),i=await appendDeploySubpathSetting(e,a,t);else if(o.workspace.workspaceFolders&&1===o.workspace.workspaceFolders.length){const t=o.workspace.workspaceFolders[0],r=getWorkspaceSetting(Lo,z.prefix,t);r&&(e.telemetry.properties.hasDeploySubpathSetting="true",n=t.uri.fsPath,i=ie.join(t.uri.fsPath,r),a=t)}if(!n||!i){"string"==typeof r&&(r=[r]);const t=o.l10n.t("Select the {0} file to deploy",r?r.join("/"):""),s=o.l10n.t("Select the folder to deploy"),c=r?await async function selectWorkspaceFile(e,t,r){const s={};return r&&(s.Artifacts=r),await selectWorkspaceItem(e,t,{canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,openLabel:o.l10n.t("Select"),filters:s})}(e,t,r):await async function selectWorkspaceFolder(e,t){return await selectWorkspaceItem(e,t,{canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,defaultUri:o.workspace.workspaceFolders&&o.workspace.workspaceFolders.length>0?o.workspace.workspaceFolders[0].uri:void 0,openLabel:o.l10n.t("Select")})}(e,s);c instanceof o.Uri?(n=c.fsPath,a=o.workspace.getWorkspaceFolder(c)):(n=c.uri.fsPath,a=c),i=await appendDeploySubpathSetting(e,a,n)}return async function addRuntimeFileTelemetry(e,t){const r=[],s=[...["package.json","requirements.txt","pom.xml"].map((e=>async function checkRuntimeFile(e,t,r){await Eo.pathExists(ie.join(t,r))&&e.push(r)}(r,t,e))),...["dll","jar","war","csproj","fsproj"].map((e=>async function checkRuntimeExtension(e,t,r){const s=await o.workspace.findFiles(new o.RelativePattern(t,`*.${r}`),void 0,1);s.length>0&&e.push(r)}(r,t,e)))];await Promise.all(s),e.telemetry.properties.runtimeFiles=r.sort().join("|")}(e,i),a||function promptToOpenWorkspace(e,t){const r={title:o.l10n.t("Open in new window")},n=o.l10n.t('Failed to deploy because "{0}" is not part of an open workspace.',ie.basename(t));throw e.ui.showWarningMessage(n,r).then((async e=>{await(0,s.callWithTelemetryAndErrorHandling)("deployWarning.openInNewWindow",(async s=>{s.telemetry.properties.dialogResult=e?.title,e===r&&await o.commands.executeCommand("vscode.openFolder",o.Uri.file(t),!0)}))})),new s.UserCancelledError("openInNewWindow")}(e,n),e.telemetry.properties.deployingSubpathOfWorkspace=String(isSubpath(a.uri.fsPath,i)),{originalDeployFsPath:n,effectiveDeployFsPath:i,workspaceFolder:a}}async function appendDeploySubpathSetting(e,t,r){if(t){const n=getWorkspaceSetting(Lo,z.prefix,t);if(n){if(e.telemetry.properties.hasDeploySubpathSetting="true",isPathEqual(t.uri.fsPath,r))return ie.join(r,n);{const i=ie.join(t.uri.fsPath,n);if(!isPathEqual(i,r)){e.telemetry.properties.overwriteTargetWithSubpathSetting="true";const i="showDeploySubpathWarning";if(getWorkspaceSetting(i,z.prefix)){const a=ie.relative(t.uri.fsPath,r),c=o.l10n.t('Deploying "{0}" instead of selected folder "{1}". Use "{2}.{3}" to change this behavior.',n,a,z.prefix,Lo);e.ui.showWarningMessage(c,{title:o.l10n.t("OK")},s.DialogResponses.dontWarnAgain).then((async e=>{e===s.DialogResponses.dontWarnAgain&&await async function updateGlobalSetting(e,t,r){const s=o.workspace.getConfiguration(r);await s.update(e,t,o.ConfigurationTarget.Global)}(i,!1,z.prefix)}))}}return i}}}return r}var Go;async function getDeployNode(e,t,r,s,n){let i;if(function isAzExtTreeItem(e){return!!e&&void 0!==e.fullId&&null!==e.fullId}(r))i=r,e.appSource=Go.tree;else if("string"==typeof s&&s){if(i=await t.findTreeItem(s,e),!i)throw new Error(o.l10n.t('Failed to find app matching id "{0}".',s));e.appSource=Go.api}else{const r=getWorkspaceSetting(e.defaultAppSetting,z.prefix,e.workspaceFolder.uri.fsPath);r&&"none"!==r.toLowerCase()&&(i=await t.findTreeItem(r,e),i?e.appSource=Go.setting:z.outputChannel.appendLog(o.l10n.t('WARNING: Failed to find app matching setting "{0}.{1}" with id "{2}"',z.prefix,e.defaultAppSetting,r))),i||(i=await n(),e.appSource=Go.nodePicker)}return e.telemetry.properties.appSource=e.appSource,e.telemetry.properties.isNewApp=String(!!e.isNewApp),i}async function showDeployConfirmation(e,t,r,n,i){const a=o.l10n.t('Are you sure you want to deploy to "{0}"? This will overwrite any previous deployment and cannot be undone.',t.fullName);let c="";if(n){c=n.join("\n\n")}const l=[{title:o.l10n.t("Deploy")}],u={title:"Reset default"};e.appSource===Go.setting&&l.push(u);const p={modal:!0,stepName:"confirmDestructiveDeployment",detail:c,learnMoreLink:i},d=await e.ui.showWarningMessage(a,p,...l);if(await delay_delay(500),d===u){const t=(0,ie.join)(e.workspaceFolder.uri.fsPath,".vscode","settings.json");throw await async function updateWorkspaceSetting(e,t,r,s){const n=o.workspace.getConfiguration(s,getScope(r));await n.update(e,t)}(e.defaultAppSetting,"",e.workspaceFolder.uri.fsPath,z.prefix),await o.window.showTextDocument(o.Uri.file(t)),o.commands.executeCommand(r),new s.UserCancelledError("resetDefault")}}async function editScmType(e,t,r,n,i=!0){const a=await t.createClient(e);if(t.isLinux&&await a.getIsConsumption(e))throw e.errorHandling.suppressReportIssue=!0,new Error(o.l10n.t("Linux consumption plans only support zip deploy. See [here](https://aka.ms/AA7avjx) for more information."));const c=await a.getSiteConfig();if(n=n||await async function showScmPrompt(e,t){const r=o.l10n.t("(Current source)"),n=[];for(const e of Object.keys(ne)){const s=ne[e];s===t?n.unshift({label:s,description:r,data:void 0}):n.push({label:s,description:"",data:s})}const i={placeHolder:o.l10n.t("Select a new source."),suppressPersistence:!0,stepName:"editScmType"},a=(await e.ui.showQuickPick(n,i)).data;if(void 0===a)throw new s.UserCancelledError("scmTypeAlreadyMatches");return a}(e,(0,s.nonNullProp)(c,"scmType")),n===ne.GitHub?(c.scmType!==ne.None&&await editScmType(e,t,r,ne.None,!1),await async function connectToGitHub(e,t){const r=o.l10n.t("Connect GitHub repository"),n={...e},i=new s.AzureWizard(n,{title:r,promptSteps:[new GitHubOrgListStep,new GitHubRepositoryListStep,new GitHubBranchListStep]});await i.prompt();const a={repoUrl:(0,s.nonNullProp)(n,"gitHubRepositoryUrl"),branch:(0,s.nonNullProp)(n,"gitHubBranch"),isManualIntegration:!1,deploymentRollbackEnabled:!0,isMercurial:!1},c=`${(0,s.nonNullProp)(n,"gitHubRepositoryOwner")}/${(0,s.nonNullProp)(n,"gitHubRepository")}`,l=await t.createClient(e);try{const r=o.l10n.t('"{0}" is being connected to repo "{1}". This may take several minutes...',t.fullName,c),s=o.l10n.t('Repo "{0}" is connected and deployed to "{1}".',c,t.fullName);await o.window.withProgress({location:o.ProgressLocation.Notification,title:r},(async()=>{z.outputChannel.appendLog(r),await verifyNoRunFromPackageSetting(e,t),await l.updateSourceControl(a),o.window.showInformationMessage(s),z.outputChannel.appendLog(s)}))}catch(e){try{await l.syncRepository()}catch(e){if(-1===(0,s.parseError)(e).message.indexOf('"statusCode":200'))throw e}}}(e,t)):(c.scmType=n,await a.updateConfiguration(c)),i){const e=o.l10n.t('Deployment source for "{0}" has been updated to "{1}".',t.fullName,n);z.outputChannel.appendLog(e),o.window.showInformationMessage(e)}if(n===ne.LocalGit){const e=await a.getPublishingUser();if(e.publishingUserName){const r=`https://${e.publishingUserName}@${t.gitUrl}`;z.outputChannel.appendLog(o.l10n.t('Git Clone Uri for "{0}": "{1}"',t.fullName,r))}}return n}async function disconnectRepo(e,t,r){const s=await t.createClient(e),n=await s.getSourceControl(),i={title:o.l10n.t("Disconnect")},a=o.l10n.t('Disconnect from "{0}"? This will not affect your app\'s active deployment. You may reconnect a repository at any time.',n.repoUrl);await e.ui.showWarningMessage(a,{modal:!0,stepName:"disconnectRepo"},i),await editScmType(e,t,r,ne.None)}!function(e){e.setting="setting",e.tree="tree",e.nodePicker="nodePicker",e.api="api"}(Go||(Go={}));class ParsedSite{id;isSlot;siteName;slotName;fullName;resourceGroup;location;serverFarmId;kind;initialState;isFunctionApp;isWorkflowApp;isKubernetesApp;isLinux;planResourceGroup;planName;defaultHostName;defaultHostUrl;kuduHostName;kuduUrl;gitUrl;identity;subscription;rawSite;constructor(e,t){this.rawSite=e;let r=(0,s.nonNullProp)(e,"serverFarmId").match(/\/subscriptions\/(.*)\/resourceGroups\/(.*)\/providers\/Microsoft.Web\/serverfarms\/(.*)/);r=(0,s.nonNullValue)(r,"Invalid serverFarmId."),this.id=(0,s.nonNullProp)(e,"id"),[this.siteName,this.slotName]=(0,s.nonNullProp)(e,"name").split("/"),this.isSlot=!!this.slotName,this.fullName=this.siteName+(this.slotName?`-${this.slotName}`:""),this.resourceGroup=(0,s.nonNullProp)(e,"resourceGroup"),this.location=e.location,this.serverFarmId=(0,s.nonNullProp)(e,"serverFarmId"),this.kind=(0,s.nonNullProp)(e,"kind"),this.initialState=e.state;const o=(e.kind||"").toLowerCase();this.isFunctionApp=o.includes(Z.functionapp),this.isWorkflowApp=o.includes(Z.workflowapp),this.isKubernetesApp=o.includes("kubernetes"),this.isLinux=o.includes("linux"),this.identity=e.identity,this.planResourceGroup=r[2],this.planName=r[3],this.defaultHostName=(0,s.nonNullProp)(e,"defaultHostName"),this.defaultHostUrl=`https://${this.defaultHostName}`;const n=(0,s.nonNullProp)(e,"hostNameSslStates").find((e=>!!e.hostType&&"repository"===e.hostType.toLowerCase()));n&&(this.kuduHostName=n.name,this.kuduUrl=`https://${this.kuduHostName}`,this.gitUrl=`${this.kuduHostName}:443/${e.repositorySiteName}.git`),this.subscription=t}async createClient(e){let t=e._parsedSiteClients?.[this.id];if(!t){const r=await createWebSiteClient([e,this.subscription]);t=new SiteClient(r,this),e._parsedSiteClients||={},e._parsedSiteClients[this.id]=t}return t}}class SiteClient{_client;_site;_cachedSku;constructor(e,t){this._client=e,this._site=t}get fullName(){return this._site.fullName}get isLinux(){return this._site.isLinux}async getIsConsumption(e){if(this._site.isFunctionApp){const t=await this.getCachedSku(e);return!!t&&"dynamic"===t.toLowerCase()}return!1}async getIsConsumptionV2(e){if(this._site.isFunctionApp){const t=await this.getCachedSku(e);return!!t&&"flexconsumption"===t.toLowerCase()}return!1}async stop(){this._site.slotName?await this._client.webApps.stopSlot(this._site.resourceGroup,this._site.siteName,this._site.slotName):await this._client.webApps.stop(this._site.resourceGroup,this._site.siteName)}async start(){this._site.slotName?await this._client.webApps.startSlot(this._site.resourceGroup,this._site.siteName,this._site.slotName):await this._client.webApps.start(this._site.resourceGroup,this._site.siteName)}async getSite(){return this._site.slotName?await tryGetWebAppSlot(this._client,this._site.resourceGroup,this._site.siteName,this._site.slotName):await tryGetWebApp(this._client,this._site.resourceGroup,this._site.siteName)}async getState(){return(await this.getSite())?.state}async getWebAppPublishCredential(){return this._site.slotName?await this._client.webApps.beginListPublishingCredentialsSlotAndWait(this._site.resourceGroup,this._site.siteName,this._site.slotName):await this._client.webApps.beginListPublishingCredentialsAndWait(this._site.resourceGroup,this._site.siteName)}async getSiteConfig(){return this._site.slotName?await this._client.webApps.getConfigurationSlot(this._site.resourceGroup,this._site.siteName,this._site.slotName):await this._client.webApps.getConfiguration(this._site.resourceGroup,this._site.siteName)}async updateConfiguration(e){return this._site.slotName?await this._client.webApps.updateConfigurationSlot(this._site.resourceGroup,this._site.siteName,this._site.slotName,e):await this._client.webApps.updateConfiguration(this._site.resourceGroup,this._site.siteName,e)}async getLogsConfig(){return this._site.slotName?await this._client.webApps.getDiagnosticLogsConfigurationSlot(this._site.resourceGroup,this._site.siteName,this._site.slotName):await this._client.webApps.getDiagnosticLogsConfiguration(this._site.resourceGroup,this._site.siteName)}async updateLogsConfig(e){return this._site.slotName?await this._client.webApps.updateDiagnosticLogsConfigSlot(this._site.resourceGroup,this._site.siteName,this._site.slotName,e):await this._client.webApps.updateDiagnosticLogsConfig(this._site.resourceGroup,this._site.siteName,e)}async getAppServicePlan(){return await tryGetAppServicePlan(this._client,this._site.planResourceGroup,this._site.planName)}async getSourceControl(){return this._site.slotName?await this._client.webApps.getSourceControlSlot(this._site.resourceGroup,this._site.siteName,this._site.slotName):await this._client.webApps.getSourceControl(this._site.resourceGroup,this._site.siteName)}async updateSourceControl(e){return this._site.slotName?await this._client.webApps.beginCreateOrUpdateSourceControlSlotAndWait(this._site.resourceGroup,this._site.siteName,this._site.slotName,e):await this._client.webApps.beginCreateOrUpdateSourceControlAndWait(this._site.resourceGroup,this._site.siteName,e)}async syncRepository(){this._site.slotName?await this._client.webApps.syncRepositorySlot(this._site.resourceGroup,this._site.siteName,this._site.slotName):await this._client.webApps.syncRepository(this._site.resourceGroup,this._site.siteName)}async listApplicationSettings(){return this._site.slotName?await this._client.webApps.listApplicationSettingsSlot(this._site.resourceGroup,this._site.siteName,this._site.slotName):await this._client.webApps.listApplicationSettings(this._site.resourceGroup,this._site.siteName)}async updateApplicationSettings(e){return this._site.slotName?await this._client.webApps.updateApplicationSettingsSlot(this._site.resourceGroup,this._site.siteName,this._site.slotName,e):await this._client.webApps.updateApplicationSettings(this._site.resourceGroup,this._site.siteName,e)}async listSlotConfigurationNames(){return await this._client.webApps.listSlotConfigurationNames(this._site.resourceGroup,this._site.siteName)}async updateSlotConfigurationNames(e){return await this._client.webApps.updateSlotConfigurationNames(this._site.resourceGroup,this._site.siteName,e)}async deleteMethod(e){this._site.slotName?await this._client.webApps.deleteSlot(this._site.resourceGroup,this._site.siteName,this._site.slotName,e):await this._client.webApps.delete(this._site.resourceGroup,this._site.siteName,e)}async listInstanceIdentifiers(){return this._site.slotName?await n.uiUtils.listAllIterator(this._client.webApps.listInstanceIdentifiersSlot(this._site.resourceGroup,this._site.siteName,this._site.slotName)):await n.uiUtils.listAllIterator(this._client.webApps.listInstanceIdentifiers(this._site.resourceGroup,this._site.siteName))}async listSourceControls(){return await n.uiUtils.listAllIterator(this._client.listSourceControls())}async listFunctions(){return this._site.slotName?await n.uiUtils.listAllIterator(this._client.webApps.listInstanceFunctionsSlot(this._site.resourceGroup,this._site.siteName,this._site.slotName)):await n.uiUtils.listAllIterator(this._client.webApps.listFunctions(this._site.resourceGroup,this._site.siteName))}async getFunction(e){return this._site.slotName?await this._client.webApps.getInstanceFunctionSlot(this._site.resourceGroup,this._site.siteName,e,this._site.slotName):await this._client.webApps.getFunction(this._site.resourceGroup,this._site.siteName,e)}async deleteFunction(e){this._site.slotName?await this._client.webApps.deleteInstanceFunctionSlot(this._site.resourceGroup,this._site.siteName,e,this._site.slotName):await this._client.webApps.deleteFunction(this._site.resourceGroup,this._site.siteName,e)}async listFunctionSecrets(e){return this._site.slotName?await this._client.webApps.listFunctionSecretsSlot(this._site.resourceGroup,this._site.siteName,e,this._site.slotName):await this._client.webApps.listFunctionSecrets(this._site.resourceGroup,this._site.siteName,e)}async syncFunctionTriggers(){try{this._site.slotName?await this._client.webApps.syncFunctionTriggersSlot(this._site.resourceGroup,this._site.siteName,this._site.slotName):await this._client.webApps.syncFunctionTriggers(this._site.resourceGroup,this._site.siteName)}catch(e){if("200"!==(0,s.parseError)(e).errorType)throw e}}async getPublishingUser(){return await this._client.getPublishingUser({})}async listWebJobs(){return this._site.slotName?await n.uiUtils.listAllIterator(this._client.webApps.listWebJobsSlot(this._site.resourceGroup,this._site.siteName,this._site.slotName)):await n.uiUtils.listAllIterator(this._client.webApps.listWebJobs(this._site.resourceGroup,this._site.siteName))}async listHostKeys(){return this._site.slotName?await this._client.webApps.listHostKeysSlot(this._site.resourceGroup,this._site.siteName,this._site.slotName):await this._client.webApps.listHostKeys(this._site.resourceGroup,this._site.siteName)}async listFunctionKeys(e){return this._site.slotName?await this._client.webApps.listFunctionKeysSlot(this._site.resourceGroup,this._site.siteName,e,this._site.slotName):await this._client.webApps.listFunctionKeys(this._site.resourceGroup,this._site.siteName,e)}async zipPushDeploy(e,t,r){const s=await(0,n.createGenericClient)(e,this._site.subscription),o=convertQueryParamsValuesToString(r),i=new Fo.URLSearchParams(o).toString(),a=(0,V.createPipelineRequest)({method:"POST",url:`${this._site.kuduUrl}/api/zipdeploy?${i}`,body:t});return await s.sendRequest(a)}async warPushDeploy(e,t,r){const s=await(0,n.createGenericClient)(e,this._site.subscription),o=convertQueryParamsValuesToString(r),i=new Fo.URLSearchParams(o).toString(),a=(0,V.createPipelineRequest)({method:"POST",url:`${this._site.kuduUrl}/api/wardeploy?${i}`,body:t});return await s.sendRequest(a)}async flexDeploy(e,t,r){const s=await(0,n.createGenericClient)(e,this._site.subscription),o=convertQueryParamsValuesToString(r),i=new Fo.URLSearchParams(o).toString(),a=(0,V.createHttpHeaders)({"Content-Type":"application/zip","Cache-Control":"no-cache"}),c=(0,V.createPipelineRequest)({headers:a,method:"POST",url:`${this._site.kuduUrl}/api/publish?${i}`,body:t});return await s.sendRequest(c)}async deploy(e,t){const r=await(0,n.createGenericClient)(e,this._site.subscription);return await r.sendRequest((0,V.createPipelineRequest)({method:"PUT",url:`${this._site.kuduUrl}/api/deployments/${t}`}))}async getDeployResults(e){const t=await(0,n.createGenericClient)(e,this._site.subscription,{addStatusCodePolicy:!0});return(await t.sendRequest((0,V.createPipelineRequest)({method:"GET",url:`${this._site.kuduUrl}/api/deployments`}))).parsedBody.map((e=>{const t={...e};return t.receivedTime=new Date(e.received_time),t}))}async getDeployResult(e,t){const r=await(0,n.createGenericClient)(e,this._site.subscription,{addStatusCodePolicy:!0});return(await r.sendRequest((0,V.createPipelineRequest)({method:"GET",url:`${this._site.kuduUrl}/api/deployments/${t}`}))).parsedBody}async getLogEntry(e,t){const r=await(0,n.createGenericClient)(e,this._site.subscription,{addStatusCodePolicy:!0});return(await r.sendRequest((0,V.createPipelineRequest)({method:"GET",url:`${this._site.kuduUrl}/api/deployments/${t}/log`}))).parsedBody.map((e=>{const t={...e};return t.logTime=new Date(e.log_time),t.detailsUrl=e.details_url,t}))}async getLogEntryDetails(e,t,r){const s=await(0,n.createGenericClient)(e,this._site.subscription,{addStatusCodePolicy:!0});return(await s.sendRequest((0,V.createPipelineRequest)({method:"GET",url:`${this._site.kuduUrl}/api/deployments/${t}/log/${r}`}))).parsedBody.map((e=>{const t={...e};return t.logTime=new Date(e.log_time),t.detailsUrl=e.details_url,t}))}async vfsGetItem(e,t){const r=await(0,n.createGenericClient)(e,this._site.subscription);return await r.sendRequest((0,V.createPipelineRequest)({method:"GET",url:t}))}async vfsPutItem(e,t,r,s){const o=await(0,n.createGenericClient)(e,this._site.subscription),i=(0,V.createHttpHeaders)(s);return await o.sendRequest((0,V.createPipelineRequest)({method:"PUT",url:r,body:"string"==typeof t?t:t.toString(),headers:i}))}async getCachedSku(e){if(!this._cachedSku){const t=await(0,n.createGenericClient)(e,this._site.subscription),r=await t.sendRequest((0,V.createPipelineRequest)({method:"GET",url:`${this._site.id}?api-version=2016-08-01`}));this._cachedSku=r.parsedBody.properties.sku}return this._cachedSku}}var No=r(69278),Io=r(3719),Uo=(r(46286),r(80914),r(91060));r(61722);var Mo;!function(e){e.STARTED="STARTED",e.STARTING="STARTING",e.STOPPED="STOPPED"}(Mo||(Mo={}));class RetryableTunnelStatusError extends Error{}class TunnelProxy{_port;_site;_server;_openSockets;_isSsh;_credentials;constructor(e,t,r,s=!1){this._port=e,this._site=t,this._server=(0,No.createServer)(),this._openSockets=[],this._isSsh=s,this._credentials=r}async startProxy(e,t){try{await this.checkTunnelStatusWithRetry(e,t);const r=(await this._credentials.getToken()).token;await this.setupTunnelServer(r,t)}catch(e){throw this.dispose(),e}}dispose(){this._openSockets.forEach((e=>{e.close()})),this._server.close(),this._server.unref()}async pingApp(e){z.outputChannel.appendLog("[Tunnel] Pinging app default url...");const t=await(0,n.createGenericClient)(e,void 0);let r;try{r=(await t.sendRequest((0,V.createPipelineRequest)({method:"GET",url:this._site.defaultHostUrl}))).status}catch(e){if(!(e instanceof V.pj))throw e;r=e.statusCode}z.outputChannel.appendLog(`[Tunnel] Ping responded with status code: ${r}`)}async checkTunnelStatus(e){const t=await(0,n.createGenericClient)(e,void 0);let r;t.pipeline.addPolicy((0,V.N$)({scopes:[],credential:this._credentials}));try{const e=await t.sendRequest((0,V.createPipelineRequest)({method:"GET",url:`https://${this._site.kuduHostName}/AppServiceTunnel/Tunnel.ashx?GetStatus&GetStatusAPIVer=2`}));z.outputChannel.appendLog(`[Tunnel] Checking status, body: ${e.bodyAsText}`),r=e.parsedBody}catch(e){const t=(0,s.parseError)(e);throw z.outputChannel.appendLog(`[Tunnel] Checking status, error: ${t.message}`),new Error(o.l10n.t("Error getting tunnel status: {0}",t.errorType))}if(r.state===Mo.STARTED){if(2222===r.port&&!this._isSsh||2222!==r.port&&this._isSsh)throw new RetryableTunnelStatusError;if(r.canReachPort)return;throw new Error(o.l10n.t("App is started, but port is unreachable"))}throw r.state===Mo.STARTING?new RetryableTunnelStatusError:r.state===Mo.STOPPED?(await this.pingApp(e),new RetryableTunnelStatusError):new Error(o.l10n.t("Unexpected app state: {0}",r.state))}async checkTunnelStatusWithRetry(e,t){const r=Date.now();for(;Date.now()<r+24e4;){if(t.isCancellationRequested)throw new s.UserCancelledError("checkTunnelStatus");await this.pingApp(e);try{return void await this.checkTunnelStatus(e)}catch(e){if(!(e instanceof RetryableTunnelStatusError))throw new Error(o.l10n.t("Unable to establish connection to application: {0}",(0,s.parseError)(e).message))}await delay_delay(5e3)}throw new Error(o.l10n.t("Unable to establish connection to application: Timed out"))}async setupTunnelServer(e,t){return new Promise(((r,o)=>{const n=t.onCancellationRequested((()=>{o(new s.UserCancelledError("setupTunnelServer")),n.dispose()}));this._server.on("connection",(t=>{t.pause();const r=new Uo(`wss://${this._site.kuduHostName}/AppServiceTunnel/Tunnel.ashx`,{headers:{"User-Agent":"vscode-azuretools","Cache-Control":"no-cache",Pragma:"no-cache",Authorization:`Bearer ${e}`}});this._openSockets.push(r),r.on("open",(()=>{t.resume()})),r.on("close",(()=>{const e=this._openSockets.indexOf(r);e>=0&&(this._openSockets.splice(e,1),z.outputChannel.appendLog(`[Proxy Server] client closed, connection count: ${this._openSockets.length}`))}));const s=Io(r);s.pipe(t),t.pipe(s),z.outputChannel.appendLog(`[Proxy Server] client connected ${t.remoteAddress}:${t.remotePort}, connection count: ${this._openSockets.length}`)})),this._server.on("listening",(()=>{z.outputChannel.appendLog("[Proxy Server] start listening"),r()})),this._server.on("error",(e=>{z.outputChannel.appendLog(`[Proxy Server] server error: ${e}`),this.dispose(),o(e)})),this._server.listen({host:"localhost",port:this._port,backlog:1})}))}}async function pingFunctionApp(e,t){const r=await t.createClient(e),s=await(0,n.createGenericClient)(e,void 0),o=(0,V.createHttpHeaders)({"x-functions-key":(await r.listHostKeys()).masterKey||""});await s.sendRequest((0,V.createPipelineRequest)({method:"GET",url:`${t.defaultHostUrl}/admin/host/status`,headers:o}))}function registerSiteCommand(e,t,r){(0,s.registerCommand)(e,(async(e,...r)=>{try{return await Promise.resolve(t(e,...r))}catch(t){!function handleSiteErrors(e,t){const r=(0,s.parseError)(t);if("502"===r.errorType||"503"===r.errorType){e.errorHandling.suppressReportIssue=!0;const t=o.l10n.t("View troubleshooting tips [here](https://aka.ms/AA772mm).");throw new Error(`${r.message} ${t}`)}throw t}(e,t)}}),r)}function reportMessage(e,t,r){if(r.isCancellationRequested)throw new s.UserCancelledError("remoteDebugReportMessage");z.outputChannel.appendLog(e),t.report({message:e})}async function setRemoteDebug(e,t,r,n,i,a,c,l,u){const p=await i.createClient(e),d=await p.getState();if(d&&"stopped"===d.toLowerCase())throw new Error(o.l10n.t('The app must be running, but is currently in state "Stopped". Start the app to continue.'));if(t!==a.remoteDebuggingEnabled){const n=t?{title:"Enable"}:{title:"Disable"};await e.ui.showWarningMessage(r,{modal:!0,learnMoreLink:u},n),a.remoteDebuggingEnabled=t,reportMessage(o.l10n.t("Updating site configuration to set remote debugging..."),c,l),await(0,s.callWithTelemetryAndErrorHandling)("appService.remoteDebugUpdateConfiguration",(async e=>{e.errorHandling.suppressDisplay=!0,e.errorHandling.rethrow=!0,await p.updateConfiguration(a)})),reportMessage(o.l10n.t("Updating site configuration done."),c,l)}else n&&o.window.showWarningMessage(n)}const Wo="https://aka.ms/appsvc-remotedebug";let Bo=!1;var jo;async function startRemoteDebug(e,t){if(Bo)throw new Error(o.l10n.t("Azure Remote Debugging is currently starting or already started."));Bo=!0;try{await async function startRemoteDebugInternal(e,t){await o.window.withProgress({location:o.ProgressLocation.Notification,cancellable:!0},(async(r,n)=>{const i=await(0,s.findFreePort)(),a=await async function getDebugConfiguration(e,t){const r=Date.now().toString(),s="localhost";switch(e){case jo.Node:return await async function getNodeDebugConfiguration(e,t,r){const s={name:e,type:"node",protocol:"inspector",remoteRoot:"/home/site/wwwroot",request:"attach",address:r,port:t};return s.localRoot=await getDebugPath(),s}(r,t,s);case jo.Python:return await async function getPythonDebugConfiguration(e,t,r){const s=await getDebugPath(),o={name:e,type:"python",request:"attach",connect:{host:r,port:t},pathMappings:[{localRoot:s,remoteRoot:"."}]};return o}(r,t,s);default:throw new Error(o.l10n.t('The language "{0}" is not supported for remote debugging.',e))}}(t.language,i),c=o.l10n.t("The configuration will be updated to enable remote debugging. Would you like to continue? This will restart the app.");await setRemoteDebug(e,!0,c,void 0,t.site,t.siteConfig,r,n,Wo),reportMessage(o.l10n.t("Starting tunnel proxy..."),r,n);const l=new TunnelProxy(i,t.site,t.credentials);await(0,s.callWithTelemetryAndErrorHandling)("appService.remoteDebugStartProxy",(async t=>{t.errorHandling.suppressDisplay=!0,t.errorHandling.rethrow=!0,await l.startProxy(e,n)})),reportMessage(o.l10n.t("Attaching debugger..."),r,n),await(0,s.callWithTelemetryAndErrorHandling)("appService.remoteDebugAttach",(async e=>{e.errorHandling.suppressDisplay=!0,e.errorHandling.rethrow=!0,await o.debug.startDebugging(void 0,a)})),reportMessage(o.l10n.t("Attached!"),r,n);const u=o.debug.onDidTerminateDebugSession((async r=>{if(r.name===a.name){Bo=!1,void 0!==l&&l.dispose(),u.dispose();const r=o.l10n.t("Remaining in debugging mode may cause performance issues. Would you like to disable debugging? This will restart the app.");await o.window.withProgress({location:o.ProgressLocation.Notification,cancellable:!0},(async(s,o)=>{await setRemoteDebug(e,!1,r,void 0,t.site,t.siteConfig,s,o,Wo)}))}}))}))}(e,t)}catch(e){throw Bo=!1,e}}async function getDebugPath(){if(o.workspace.workspaceFolders){if(1===o.workspace.workspaceFolders.length)return o.workspace.workspaceFolders[0].uri.fsPath;{const e=await o.window.showWorkspaceFolderPick();if(e)return e.uri.fsPath;throw new Error(o.l10n.t("Please select a workspace folder before attaching a debugger."))}}throw new Error(o.l10n.t("Please open a workspace folder before attaching a debugger."))}function createSiteFilesUrl(e,t,r){return e.isFunctionApp&&e.isLinux?(t=t.replace(/^\/home\//,""),`${e.id}/hostruntime/admin/vfs/home/${t}/?api-version=2022-03-01`):r??`${e.kuduUrl}/api/vfs/${t}`}async function getFile(e,t,r){let s;try{s=await getFsResponse(e,t,r)}catch(e){if(!(e instanceof V.pj&&"PARSE_ERROR"===e.code&&200===e.response?.status))throw e;s=e.response}return{data:s.bodyAsText,etag:s.headers.get("etag")}}async function listFiles(e,t,r){const s=await getFsResponse(e,t,r);return Array.isArray(s.parsedBody)?s.parsedBody:[]}async function putFile(e,t,r,s,o){const n=o?{"If-Match":o}:{},i=await t.createClient(e);return(await i.vfsPutItem(e,r,s,n)).headers.get("etag")}async function getFsResponse(e,t,r){try{if(t.isFunctionApp){const o=3,i=/BadGateway/i,a=/ServiceUnavailable/i,c=await(0,n.createGenericClient)(e,t.subscription);return await bo()((async()=>{try{return await c.sendRequest((0,V.createPipelineRequest)({method:"GET",url:r}))}catch(e){const t=(0,s.parseError)(e);if(!i.test(t.message)&&!a.test(t.message))throw new(bo().AbortError)(e);throw e}}),{retries:o,minTimeout:1e4})}{const s=await t.createClient(e);return await s.vfsGetItem(e,r)}}catch(t){throw e.telemetry.maskEntireErrorMessage=!0,t}}!function(e){e[e.Node=0]="Node",e[e.Python=1]="Python"}(jo||(jo={}));const zo=new WeakMap,$o=new WeakMap;class AbortSignal{constructor(){this.onabort=null,zo.set(this,[]),$o.set(this,!1)}get aborted(){if(!$o.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");return $o.get(this)}static get none(){return new AbortSignal}addEventListener(e,t){if(!zo.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");zo.get(this).push(t)}removeEventListener(e,t){if(!zo.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");const r=zo.get(this),s=r.indexOf(t);s>-1&&r.splice(s,1)}dispatchEvent(e){throw new Error("This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.")}}function abortSignal(e){if(e.aborted)return;e.onabort&&e.onabort.call(e);const t=zo.get(e);t&&t.slice().forEach((t=>{t.call(e,{type:"abort"})})),$o.set(e,!0)}Error;class AbortController{constructor(e){if(this._signal=new AbortSignal,e){Array.isArray(e)||(e=arguments);for(const t of e)t.aborted?this.abort():t.addEventListener("abort",(()=>{this.abort()}))}}get signal(){return this._signal}abort(){abortSignal(this._signal)}static timeout(e){const t=new AbortSignal,r=setTimeout(abortSignal,e,t);return"function"==typeof r.unref&&r.unref(),t}}var Vo=r(53557);const Ho=new Map;function getLogStreamId(e,t){return`${e.id}${t}`}async function startStreamingLogs(e,t,r,i,a=""){const c=getLogStreamId(t,a),l=Ho.get(c);if(l&&l.isConnected)return l.outputChannel.show(),e.ui.showWarningMessage(o.l10n.t('The log-streaming service for "{0}" is already active.',i)),l;{await r();const e=l?l.outputChannel:o.window.createOutputChannel(o.l10n.t("{0} - Log Stream",i));z.context.subscriptions.push(e),e.show(),e.appendLine(o.l10n.t("Connecting to log stream..."));const u=t.subscription.credentials,p=(await u.getToken()).token;return await new Promise((r=>{(0,s.callWithTelemetryAndErrorHandling)("appService.streamingLogs",(async i=>{let l;i.errorHandling.suppressDisplay=!0,t.isFunctionApp&&(await pingFunctionApp(i,t),l=(0,Vo.setInterval)((async()=>await pingFunctionApp(i,t)),6e4));const u=await(0,n.createGenericClient)(i,void 0),d=new AbortController,m=(0,V.createHttpHeaders)({Authorization:`Bearer ${p}`}),h=await u.sendRequest((0,V.createPipelineRequest)({headers:m,method:"GET",url:`${t.kuduUrl}/api/logstream/${a}`,abortSignal:d.signal,streamResponseStatusCodes:new Set([200,206])}));await new Promise(((t,n)=>{const i={dispose:()=>{h.readableStreamBody?.removeAllListeners(),d.abort(),e.show(),l&&clearInterval(l),e.appendLine(o.l10n.t("Disconnected from log-streaming service.")),i.isConnected=!1,t()},isConnected:!0,outputChannel:e};h.readableStreamBody?.on("data",(t=>{e.append(t.toString())})).on("error",(t=>{l&&clearInterval(l),i.isConnected=!1,e.show(),e.appendLine(o.l10n.t("Error connecting to log-streaming service:")),e.appendLine((0,s.parseError)(t).message),n(t)})).on("complete",(()=>{i.dispose()})),Ho.set(c,i),r(i)}))}))}))}}async function stopStreamingLogs(e,t=""){const r=getLogStreamId(e,t),s=Ho.get(r);s&&s.isConnected?s.dispose():await o.window.showWarningMessage(o.l10n.t("The log-streaming service is already disconnected."))}async function swapSlot(e,t,r){const s="production",n=[{label:s,data:void 0}];for(const e of r)if(t.slotName!==e.slotName){const t={label:e.slotName,data:e};n.push(t)}const i=o.l10n.t('Select which slot to swap with "{0}".',t.slotName),a=(await e.ui.showQuickPick(n,{placeHolder:i,stepName:"swapSlot"})).data,c=a?a.fullName:`${t.siteName}-${s}`,l=o.l10n.t('Swapping "{0}" with "{1}"...',c,t.fullName),u=o.l10n.t('Successfully swapped "{0}" with "{1}".',c,t.fullName);z.outputChannel.appendLog(l);const p=await createWebSiteClient([e,t.subscription]);await o.window.withProgress({location:o.ProgressLocation.Notification,title:l},(async()=>{a?await p.webApps.beginSwapSlotAndWait(t.resourceGroup,t.siteName,t.slotName,{targetSlot:a.slotName,preserveVnet:!0}):await p.webApps.beginSwapSlotWithProductionAndWait(t.resourceGroup,t.siteName,{targetSlot:t.slotName,preserveVnet:!0}),o.window.showInformationMessage(u),z.outputChannel.appendLog(u)}))}var qo,Ko=r(70857);!function(e){e[e.Building=0]="Building",e[e.Deploying=1]="Deploying",e[e.Pending=2]="Pending",e[e.Failed=3]="Failed",e[e.Success=4]="Success"}(qo||(qo={}));class DeploymentTreeItem extends s.AzExtTreeItem{static contextValue=new RegExp("deployment/.*");label;receivedTime;_deployResult;_scmType;constructor(e,t,r){super(e),this._scmType=r,this._deployResult=t,this.receivedTime=(0,s.nonNullProp)(t,"receivedTime");const o=this.getDeploymentMessage(t);this.label=`${this.id.substring(0,7)} - ${o}`}get contextValue(){return(0,s.createContextValue)([`deployment/${this._scmType}`.toLocaleLowerCase(),...this.parent.contextValuesToAdd])}get iconPath(){return new o.ThemeIcon("git-commit")}get id(){return(0,s.nonNullProp)(this._deployResult,"id")}get commandId(){return`${z.prefix}.viewDeploymentLogs`}get description(){if(this._deployResult.active)return o.l10n.t("Active");switch(this._deployResult.status){case qo.Building:return o.l10n.t("Building...");case qo.Deploying:return o.l10n.t("Deploying...");case qo.Pending:return o.l10n.t("Pending...");case qo.Failed:return o.l10n.t("Failed");case qo.Success:default:return}}isAncestorOfImpl(e){return this.contextValue===e}async redeployDeployment(e){if(this._deployResult.isReadonly)throw new Error(o.l10n.t("Redeploy is not supported for non-git deployments."));const t=o.l10n.t('Redeploying commit "{0}" to "{1}". Check [output window](command:{2}) for status.',this.id,this.parent.site.fullName,z.prefix+".showOutputChannel"),r=o.l10n.t('Commit "{0}" has been redeployed to "{1}".',this.id,this.parent.site.fullName);await o.window.withProgress({location:o.ProgressLocation.Notification,title:t},(async()=>{z.outputChannel.appendLog(o.l10n.t('Redeploying commit "{0}" to "{1}"...',this.id,this.parent.site.fullName),{resourceName:this.parent.site.fullName});(await this.parent.site.createClient(e)).deploy(e,this.id);const t=setInterval((async()=>{await this.refresh(e)}),1e3);try{await waitForDeploymentToComplete(e,this.parent.site,{expectedId:this.id}),await this.parent.refresh(e),o.window.showInformationMessage(r),z.outputChannel.appendLog(r)}finally{clearInterval(t)}}))}async getDeploymentLogs(e){const t=await this.parent.site.createClient(e);let r=[];await retryKuduCall(e,"getLogEntry",(async()=>{await ignore404Error(e,(async()=>{r=await t.getLogEntry(e,this.id)}))}));let s="";for(const o of r){s+=this.formatLogEntry(o);let r=[];await retryKuduCall(e,"getLogEntryDetails",(async()=>{await ignore404Error(e,(async()=>{o.detailsUrl&&o.id&&(r=await t.getLogEntryDetails(e,this.id,o.id))}))}));for(const e of r)s+=this.formatLogEntry(e)}return s}async viewDeploymentLogs(e){await this.runWithTemporaryDescription(e,o.l10n.t("Retrieving logs..."),(async()=>{const t=await this.getDeploymentLogs(e);await(0,s.openReadOnlyContent)(this,t,".log")}))}async viewCommitInGitHub(e){const t=await this.parent.site.createClient(e),r=await t.getSourceControl();if(!r.repoUrl)throw new Error(o.l10n.t('There is no GitHub repo url associated with deployment "{0}".',this._deployResult.id));{const e=`${r.repoUrl}/commit/${this._deployResult.id}`;await openUrl(e)}}async refreshImpl(e){const t=await this.parent.site.createClient(e);this._deployResult=await t.getDeployResult(e,this.id)}formatLogEntry(e){return e.logTime&&e.message?`${e.logTime.toISOString()} - ${e.message}${Ko.EOL}`:""}getDeploymentMessage(e){let t=(0,s.nonNullProp)(e,"message");try{const e=JSON.parse(t);e.message&&(t=e.message)}catch{}const r=this.getFirstLine(t);return r.length>50?`${r.substring(0,50)}...`:r}getFirstLine(e){const t=e.search(/\r?\n|\r/);return t>=0&&(e=e.substring(0,t)),e}}class DeploymentsTreeItem extends s.AzExtParentTreeItem{static contextValueConnected="deploymentsConnected";static contextValueUnconnected="deploymentsUnconnected";label=o.l10n.t("Deployments");childTypeLabel=o.l10n.t("Deployment");site;suppressMaskLabel=!0;contextValuesToAdd;_scmType;_repoUrl;constructor(e,t){super(e),this.site=t.site,this.contextValuesToAdd=t?.contextValuesToAdd||[]}get iconPath(){return new o.ThemeIcon("cloud-upload")}get description(){switch(this._scmType){case ne.LocalGit:return o.l10n.t("Git");case ne.GitHub:return this._repoUrl?this._repoUrl.substring(19):o.l10n.t("GitHub");case ne.None:default:return""}}get contextValue(){return(0,s.createContextValue)([this._scmType===ne.None?DeploymentsTreeItem.contextValueUnconnected:DeploymentsTreeItem.contextValueConnected,...this.contextValuesToAdd])}hasMoreChildrenImpl(){return!1}async init(e){const t=await this.site.createClient(e),r=await t.getSiteConfig(),s=await t.getSourceControl();this._scmType=r.scmType,this._repoUrl=s.repoUrl}async loadMoreChildrenImpl(e,t){await this.init(t);const r=await this.site.createClient(t),o=await retryKuduCall(t,"getDeployResults",(async()=>r.getDeployResults(t))),n=await this.createTreeItemsWithErrorHandling(o,"invalidDeployment",(e=>new DeploymentTreeItem(this,e,this._scmType)),(e=>e.id?e.id.substring(0,7):void 0));return this._scmType===ne.None&&n.push(new s.GenericTreeItem(this,{commandId:z.prefix+".connectToGitHub",contextValue:"ConnectToGithub",label:"Connect to a GitHub Repository..."})),n}compareChildrenImpl(e,t){return e instanceof s.GenericTreeItem?1:t instanceof s.GenericTreeItem?-1:t.receivedTime.valueOf()-e.receivedTime.valueOf()}async refreshImpl(e){const t=await this.site.createClient(e),r=await t.getSiteConfig(),s=await t.getSourceControl();this._scmType=r.scmType,this._repoUrl=s.repoUrl}}class FileTreeItem extends s.AzExtTreeItem{static contextValue="file";label;url;isReadOnly;site;constructor(e,t,r,s,o){super(e),this.site=t,this.label=r,this.url=s,this.isReadOnly=o}get contextValue(){return(0,s.createContextValue)([FileTreeItem.contextValue,...this.parent.contextValuesToAdd])}get iconPath(){return new o.ThemeIcon("file")}get commandId(){return z.prefix+".openFile"}async openReadOnly(e){await this.runWithTemporaryDescription(e,o.l10n.t("Opening..."),(async()=>{const t=await getFile(e,this.site,this.url);await(0,s.openReadOnlyContent)(this,t.data,"")}))}}class FolderTreeItem extends s.AzExtParentTreeItem{static contextValue="folder";childTypeLabel=o.l10n.t("file or folder");label;url;isReadOnly;contextValuesToAdd;site;_isRoot=!1;constructor(e,t){super(e),this.site=t.site,this.label=t.label,this.url=t.url,this.isReadOnly=t.isReadOnly,this.contextValuesToAdd=t.contextValuesToAdd||[]}get contextValue(){return(0,s.createContextValue)([FolderTreeItem.contextValue,...this.contextValuesToAdd])}get iconPath(){return new o.ThemeIcon("folder")}hasMoreChildrenImpl(){return!1}get description(){return this._isRoot&&this.isReadOnly?o.l10n.t("Read-only"):void 0}async loadMoreChildrenImpl(e,t){let r=await listFiles(t,this.site,this.url);return r=r.filter((e=>"text/xml"!==e.mime||!e.name.includes("LogFiles-kudu-trace_pending.xml"))),r.map((e=>{const t=createSiteFilesUrl(this.site,e.path,e.href);return"inode/directory"===e.mime?new FolderTreeItem(this,{site:this.site,label:e.name,isReadOnly:this.isReadOnly,url:t,contextValuesToAdd:this.contextValuesToAdd}):new FileTreeItem(this,this.site,e.name,t,this.isReadOnly)}))}compareChildrenImpl(e,t){let r=instanceOfCompare(e,t,s.GenericTreeItem);return void 0===r&&(r=instanceOfCompare(e,t,FolderTreeItem)),void 0===r?e.label.localeCompare(t.label):r}}function instanceOfCompare(e,t,r){return!(e instanceof r)&&t instanceof r?1:e instanceof r&&!(t instanceof r)?-1:void 0}class LogFilesTreeItem extends FolderTreeItem{static contextValue="logFiles";suppressMaskLabel=!0;_isRoot=!0;constructor(e,t){super(e,{site:t.site,label:o.l10n.t("Logs"),url:createSiteFilesUrl(t.site,"LogFiles/"),isReadOnly:!0,contextValuesToAdd:t.contextValuesToAdd||[]})}get contextValue(){return(0,s.createContextValue)([LogFilesTreeItem.contextValue,...this.contextValuesToAdd])}async loadMoreChildrenImpl(e,t){let r;try{r=await super.loadMoreChildrenImpl(e,t)}catch(e){const n=(0,s.parseError)(e).message;t.telemetry.properties.logFilesError=n,r=[new s.GenericTreeItem(this,{label:o.l10n.t("Error: {0}",n),contextValue:"logFilesError"})]}if(e){const e=new s.GenericTreeItem(this,{contextValue:"logStream",commandId:z.prefix+".startStreamingLogs",iconPath:new o.ThemeIcon("play"),label:o.l10n.t("Connect to Log Stream...")});e.commandArgs=[this.parent],r.push(e)}return r}}class SiteFilesTreeItem extends FolderTreeItem{static contextValue="siteFiles";suppressMaskLabel=!0;contextValuesToAdd;_isRoot=!0;constructor(e,t){super(e,{site:t.site,label:o.l10n.t("Files"),url:createSiteFilesUrl(t.site,"site/wwwroot/"),isReadOnly:t.isReadOnly}),this.contextValuesToAdd=t.contextValuesToAdd||[]}get contextValue(){return(0,s.createContextValue)([SiteFilesTreeItem.contextValue,...this.contextValuesToAdd])}}},83519:(e,t,r)=>{var s=r(86587);function once(e){var f=function(){return f.called?f.value:(f.called=!0,f.value=e.apply(this,arguments))};return f.called=!1,f}function onceStrict(e){var f=function(){if(f.called)throw new Error(f.onceError);return f.called=!0,f.value=e.apply(this,arguments)},t=e.name||"Function wrapped with `once`";return f.onceError=t+" shouldn't be called more than once",f.called=!1,f}e.exports=s(once),e.exports.strict=s(onceStrict),once.proto=once((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return onceStrict(this)},configurable:!0})}))},84025:(e,t,r)=>{var s=r(20181).Buffer,o=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function ensureBuffer(e){if(s.isBuffer(e))return e;var t="function"==typeof s.alloc&&"function"==typeof s.from;if("number"==typeof e)return t?s.alloc(e):new s(e);if("string"==typeof e)return t?s.from(e):new s(e);throw new Error("input must be buffer, number, or string, received "+typeof e)}function _crc32(e,t){e=ensureBuffer(e),s.isBuffer(t)&&(t=t.readUInt32BE(0));for(var r=~t,n=0;n<e.length;n++)r=o[255&(r^e[n])]^r>>>8;return~r}function crc32(){return function bufferizeInt(e){var t=ensureBuffer(4);return t.writeInt32BE(e,0),t}(_crc32.apply(null,arguments))}"undefined"!=typeof Int32Array&&(o=new Int32Array(o)),crc32.signed=function(){return _crc32.apply(null,arguments)},crc32.unsigned=function(){return _crc32.apply(null,arguments)>>>0},e.exports=crc32},84346:e=>{e.exports=function register(e,t,r,s){if("function"!=typeof r)throw new Error("method for before hook must be a function");s||(s={});if(Array.isArray(t))return t.reverse().reduce((function(t,r){return register.bind(null,e,r,t,s)}),r)();return Promise.resolve().then((function(){return e.registry[t]?e.registry[t].reduce((function(e,t){return t.hook.bind(null,e,s)}),r)():r(s)}))}},86587:e=>{e.exports=function wrappy(e,t){if(e&&t)return wrappy(e)(t);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach((function(t){wrapper[t]=e[t]})),wrapper;function wrapper(){for(var t=new Array(arguments.length),r=0;r<t.length;r++)t[r]=arguments[r];var s=e.apply(this,t),o=t[t.length-1];return"function"==typeof s&&s!==o&&Object.keys(o).forEach((function(e){s[e]=o[e]})),s}}},86754:(e,t,r)=>{"use strict";const{createFile:s,createFileSync:o}=r(72134),{createLink:n,createLinkSync:i}=r(5476),{createSymlink:a,createSymlinkSync:c}=r(59837);e.exports={createFile:s,createFileSync:o,ensureFile:s,ensureFileSync:o,createLink:n,createLinkSync:i,ensureLink:n,ensureLinkSync:i,createSymlink:a,createSymlinkSync:c,ensureSymlink:a,ensureSymlinkSync:c}},90597:(e,t,r)=>{"use strict";const{kForOnEventAttribute:s,kListener:o}=r(32614),n=Symbol("kCode"),i=Symbol("kData"),a=Symbol("kError"),c=Symbol("kMessage"),l=Symbol("kReason"),u=Symbol("kTarget"),p=Symbol("kType"),d=Symbol("kWasClean");class Event{constructor(e){this[u]=null,this[p]=e}get target(){return this[u]}get type(){return this[p]}}Object.defineProperty(Event.prototype,"target",{enumerable:!0}),Object.defineProperty(Event.prototype,"type",{enumerable:!0});class CloseEvent extends Event{constructor(e,t={}){super(e),this[n]=void 0===t.code?0:t.code,this[l]=void 0===t.reason?"":t.reason,this[d]=void 0!==t.wasClean&&t.wasClean}get code(){return this[n]}get reason(){return this[l]}get wasClean(){return this[d]}}Object.defineProperty(CloseEvent.prototype,"code",{enumerable:!0}),Object.defineProperty(CloseEvent.prototype,"reason",{enumerable:!0}),Object.defineProperty(CloseEvent.prototype,"wasClean",{enumerable:!0});class ErrorEvent extends Event{constructor(e,t={}){super(e),this[a]=void 0===t.error?null:t.error,this[c]=void 0===t.message?"":t.message}get error(){return this[a]}get message(){return this[c]}}Object.defineProperty(ErrorEvent.prototype,"error",{enumerable:!0}),Object.defineProperty(ErrorEvent.prototype,"message",{enumerable:!0});class MessageEvent extends Event{constructor(e,t={}){super(e),this[i]=void 0===t.data?null:t.data}get data(){return this[i]}}Object.defineProperty(MessageEvent.prototype,"data",{enumerable:!0});const m={addEventListener(e,t,r={}){for(const n of this.listeners(e))if(!r[s]&&n[o]===t&&!n[s])return;let n;if("message"===e)n=function onMessage(e,r){const s=new MessageEvent("message",{data:r?e:e.toString()});s[u]=this,callListener(t,this,s)};else if("close"===e)n=function onClose(e,r){const s=new CloseEvent("close",{code:e,reason:r.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});s[u]=this,callListener(t,this,s)};else if("error"===e)n=function onError(e){const r=new ErrorEvent("error",{error:e,message:e.message});r[u]=this,callListener(t,this,r)};else{if("open"!==e)return;n=function onOpen(){const e=new Event("open");e[u]=this,callListener(t,this,e)}}n[s]=!!r[s],n[o]=t,r.once?this.once(e,n):this.on(e,n)},removeEventListener(e,t){for(const r of this.listeners(e))if(r[o]===t&&!r[s]){this.removeListener(e,r);break}}};function callListener(e,t,r){"object"==typeof e&&e.handleEvent?e.handleEvent.call(e,r):e.call(t,r)}e.exports={CloseEvent,ErrorEvent,Event,EventTarget:m,MessageEvent}},91060:(e,t,r)=>{"use strict";const s=r(24434),o=r(65692),n=r(58611),i=r(69278),a=r(64756),{randomBytes:c,createHash:l}=r(76982),{Duplex:u,Readable:p}=r(2203),{URL:d}=r(87016),m=r(42971),h=r(46286),g=r(80914),{isBlob:y}=r(95880),{BINARY_TYPES:w,EMPTY_BUFFER:b,GUID:E,kForOnEventAttribute:T,kListener:S,kStatusCode:_,kWebSocket:k,NOOP:v}=r(32614),{EventTarget:{addEventListener:P,removeEventListener:C}}=r(90597),{format:A,parse:O}=r(55926),{toBuffer:R}=r(93338),F=Symbol("kAborted"),x=[8,13],D=["CONNECTING","OPEN","CLOSING","CLOSED"],L=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class WebSocket extends s{constructor(e,t,r){super(),this._binaryType=w[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=b,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=WebSocket.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(r=t,t=[]):t=[t]),initAsClient(this,e,t,r)):(this._autoPong=r.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){w.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){const s=new h({allowSynchronousEvents:r.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation}),o=new g(e,this._extensions,r.generateMask);this._receiver=s,this._sender=o,this._socket=e,s[k]=this,o[k]=this,e[k]=this,s.on("conclude",receiverOnConclude),s.on("drain",receiverOnDrain),s.on("error",receiverOnError),s.on("message",receiverOnMessage),s.on("ping",receiverOnPing),s.on("pong",receiverOnPong),o.onerror=senderOnError,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",socketOnClose),e.on("data",socketOnData),e.on("end",socketOnEnd),e.on("error",socketOnError),this._readyState=WebSocket.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=WebSocket.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[m.extensionName]&&this._extensions[m.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=WebSocket.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==WebSocket.CLOSED)if(this.readyState!==WebSocket.CONNECTING)this.readyState!==WebSocket.CLOSING?(this._readyState=WebSocket.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())})),setCloseTimer(this)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();else{const e="WebSocket was closed before the connection was established";abortHandshake(this,this._req,e)}}pause(){this.readyState!==WebSocket.CONNECTING&&this.readyState!==WebSocket.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,r){if(this.readyState===WebSocket.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===WebSocket.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||b,t,r)):sendAfterClose(this,e,r)}pong(e,t,r){if(this.readyState===WebSocket.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===WebSocket.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||b,t,r)):sendAfterClose(this,e,r)}resume(){this.readyState!==WebSocket.CONNECTING&&this.readyState!==WebSocket.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,r){if(this.readyState===WebSocket.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==WebSocket.OPEN)return void sendAfterClose(this,e,r);const s={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[m.extensionName]||(s.compress=!1),this._sender.send(e||b,s,r)}terminate(){if(this.readyState!==WebSocket.CLOSED)if(this.readyState!==WebSocket.CONNECTING)this._socket&&(this._readyState=WebSocket.CLOSING,this._socket.destroy());else{const e="WebSocket was closed before the connection was established";abortHandshake(this,this._req,e)}}}function initAsClient(e,t,r,s){const i={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:x[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...s,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(e._autoPong=i.autoPong,!x.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${x.join(", ")})`);let a;if(t instanceof d)a=t;else try{a=new d(t)}catch(e){throw new SyntaxError(`Invalid URL: ${t}`)}"http:"===a.protocol?a.protocol="ws:":"https:"===a.protocol&&(a.protocol="wss:"),e._url=a.href;const u="wss:"===a.protocol,p="ws+unix:"===a.protocol;let h;if("ws:"===a.protocol||u||p?p&&!a.pathname?h="The URL's pathname is empty":a.hash&&(h="The URL contains a fragment identifier"):h='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"',h){const t=new SyntaxError(h);if(0===e._redirects)throw t;return void emitErrorAndClose(e,t)}const g=u?443:80,y=c(16).toString("base64"),w=u?o.request:n.request,b=new Set;let T,S;if(i.createConnection=i.createConnection||(u?tlsConnect:netConnect),i.defaultPort=i.defaultPort||g,i.port=a.port||g,i.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,i.headers={...i.headers,"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":y,Connection:"Upgrade",Upgrade:"websocket"},i.path=a.pathname+a.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(T=new m(!0!==i.perMessageDeflate?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=A({[m.extensionName]:T.offer()})),r.length){for(const e of r){if("string"!=typeof e||!L.test(e)||b.has(e))throw new SyntaxError("An invalid or duplicated subprotocol was specified");b.add(e)}i.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(a.username||a.password)&&(i.auth=`${a.username}:${a.password}`),p){const e=i.path.split(":");i.socketPath=e[0],i.path=e[1]}if(i.followRedirects){if(0===e._redirects){e._originalIpc=p,e._originalSecure=u,e._originalHostOrSocketPath=p?i.socketPath:a.host;const t=s&&s.headers;if(s={...s,headers:{}},t)for(const[e,r]of Object.entries(t))s.headers[e.toLowerCase()]=r}else if(0===e.listenerCount("redirect")){const t=p?!!e._originalIpc&&i.socketPath===e._originalHostOrSocketPath:!e._originalIpc&&a.host===e._originalHostOrSocketPath;(!t||e._originalSecure&&!u)&&(delete i.headers.authorization,delete i.headers.cookie,t||delete i.headers.host,i.auth=void 0)}i.auth&&!s.headers.authorization&&(s.headers.authorization="Basic "+Buffer.from(i.auth).toString("base64")),S=e._req=w(i),e._redirects&&e.emit("redirect",e.url,S)}else S=e._req=w(i);i.timeout&&S.on("timeout",(()=>{abortHandshake(e,S,"Opening handshake has timed out")})),S.on("error",(t=>{null===S||S[F]||(S=e._req=null,emitErrorAndClose(e,t))})),S.on("response",(o=>{const n=o.headers.location,a=o.statusCode;if(n&&i.followRedirects&&a>=300&&a<400){if(++e._redirects>i.maxRedirects)return void abortHandshake(e,S,"Maximum redirects exceeded");let o;S.abort();try{o=new d(n,t)}catch(t){const r=new SyntaxError(`Invalid URL: ${n}`);return void emitErrorAndClose(e,r)}initAsClient(e,o,r,s)}else e.emit("unexpected-response",S,o)||abortHandshake(e,S,`Unexpected server response: ${o.statusCode}`)})),S.on("upgrade",((t,r,s)=>{if(e.emit("upgrade",t),e.readyState!==WebSocket.CONNECTING)return;S=e._req=null;const o=t.headers.upgrade;if(void 0===o||"websocket"!==o.toLowerCase())return void abortHandshake(e,r,"Invalid Upgrade header");const n=l("sha1").update(y+E).digest("base64");if(t.headers["sec-websocket-accept"]!==n)return void abortHandshake(e,r,"Invalid Sec-WebSocket-Accept header");const a=t.headers["sec-websocket-protocol"];let c;if(void 0!==a?b.size?b.has(a)||(c="Server sent an invalid subprotocol"):c="Server sent a subprotocol but none was requested":b.size&&(c="Server sent no subprotocol"),c)return void abortHandshake(e,r,c);a&&(e._protocol=a);const u=t.headers["sec-websocket-extensions"];if(void 0!==u){if(!T){return void abortHandshake(e,r,"Server sent a Sec-WebSocket-Extensions header but no extension was requested")}let t;try{t=O(u)}catch(t){return void abortHandshake(e,r,"Invalid Sec-WebSocket-Extensions header")}const s=Object.keys(t);if(1!==s.length||s[0]!==m.extensionName){return void abortHandshake(e,r,"Server indicated an extension that was not requested")}try{T.accept(t[m.extensionName])}catch(t){return void abortHandshake(e,r,"Invalid Sec-WebSocket-Extensions header")}e._extensions[m.extensionName]=T}e.setSocket(r,s,{allowSynchronousEvents:i.allowSynchronousEvents,generateMask:i.generateMask,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation})})),i.finishRequest?i.finishRequest(S,e):S.end()}function emitErrorAndClose(e,t){e._readyState=WebSocket.CLOSING,e._errorEmitted=!0,e.emit("error",t),e.emitClose()}function netConnect(e){return e.path=e.socketPath,i.connect(e)}function tlsConnect(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=i.isIP(e.host)?"":e.host),a.connect(e)}function abortHandshake(e,t,r){e._readyState=WebSocket.CLOSING;const s=new Error(r);Error.captureStackTrace(s,abortHandshake),t.setHeader?(t[F]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(emitErrorAndClose,e,s)):(t.destroy(s),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function sendAfterClose(e,t,r){if(t){const r=y(t)?t.size:R(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}if(r){const t=new Error(`WebSocket is not open: readyState ${e.readyState} (${D[e.readyState]})`);process.nextTick(r,t)}}function receiverOnConclude(e,t){const r=this[k];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,void 0!==r._socket[k]&&(r._socket.removeListener("data",socketOnData),process.nextTick(resume,r._socket),1005===e?r.close():r.close(e,t))}function receiverOnDrain(){const e=this[k];e.isPaused||e._socket.resume()}function receiverOnError(e){const t=this[k];void 0!==t._socket[k]&&(t._socket.removeListener("data",socketOnData),process.nextTick(resume,t._socket),t.close(e[_])),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e))}function receiverOnFinish(){this[k].emitClose()}function receiverOnMessage(e,t){this[k].emit("message",e,t)}function receiverOnPing(e){const t=this[k];t._autoPong&&t.pong(e,!this._isServer,v),t.emit("ping",e)}function receiverOnPong(e){this[k].emit("pong",e)}function resume(e){e.resume()}function senderOnError(e){const t=this[k];t.readyState!==WebSocket.CLOSED&&(t.readyState===WebSocket.OPEN&&(t._readyState=WebSocket.CLOSING,setCloseTimer(t)),this._socket.end(),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e)))}function setCloseTimer(e){e._closeTimer=setTimeout(e._socket.destroy.bind(e._socket),3e4)}function socketOnClose(){const e=this[k];let t;this.removeListener("close",socketOnClose),this.removeListener("data",socketOnData),this.removeListener("end",socketOnEnd),e._readyState=WebSocket.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[k]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",receiverOnFinish),e._receiver.on("finish",receiverOnFinish))}function socketOnData(e){this[k]._receiver.write(e)||this.pause()}function socketOnEnd(){const e=this[k];e._readyState=WebSocket.CLOSING,e._receiver.end(),this.end()}function socketOnError(){const e=this[k];this.removeListener("error",socketOnError),this.on("error",v),e&&(e._readyState=WebSocket.CLOSING,this.destroy())}Object.defineProperty(WebSocket,"CONNECTING",{enumerable:!0,value:D.indexOf("CONNECTING")}),Object.defineProperty(WebSocket.prototype,"CONNECTING",{enumerable:!0,value:D.indexOf("CONNECTING")}),Object.defineProperty(WebSocket,"OPEN",{enumerable:!0,value:D.indexOf("OPEN")}),Object.defineProperty(WebSocket.prototype,"OPEN",{enumerable:!0,value:D.indexOf("OPEN")}),Object.defineProperty(WebSocket,"CLOSING",{enumerable:!0,value:D.indexOf("CLOSING")}),Object.defineProperty(WebSocket.prototype,"CLOSING",{enumerable:!0,value:D.indexOf("CLOSING")}),Object.defineProperty(WebSocket,"CLOSED",{enumerable:!0,value:D.indexOf("CLOSED")}),Object.defineProperty(WebSocket.prototype,"CLOSED",{enumerable:!0,value:D.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach((e=>{Object.defineProperty(WebSocket.prototype,e,{enumerable:!0})})),["open","error","close","message"].forEach((e=>{Object.defineProperty(WebSocket.prototype,`on${e}`,{enumerable:!0,get(){for(const t of this.listeners(e))if(t[T])return t[S];return null},set(t){for(const t of this.listeners(e))if(t[T]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[T]:!0})}})})),WebSocket.prototype.addEventListener=P,WebSocket.prototype.removeEventListener=C,e.exports=WebSocket},91559:(e,t,r)=>{"use strict";const s=r(63735),o=r(16928),n=r(42613),i="win32"===process.platform;function defaults(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((t=>{e[t]=e[t]||s[t],e[t+="Sync"]=e[t]||s[t]})),e.maxBusyTries=e.maxBusyTries||3}function rimraf(e,t,r){let s=0;"function"==typeof t&&(r=t,t={}),n(e,"rimraf: missing path"),n.strictEqual(typeof e,"string","rimraf: path should be a string"),n.strictEqual(typeof r,"function","rimraf: callback function required"),n(t,"rimraf: invalid options argument provided"),n.strictEqual(typeof t,"object","rimraf: options should be object"),defaults(t),rimraf_(e,t,(function CB(o){if(o){if(("EBUSY"===o.code||"ENOTEMPTY"===o.code||"EPERM"===o.code)&&s<t.maxBusyTries){s++;return setTimeout((()=>rimraf_(e,t,CB)),100*s)}"ENOENT"===o.code&&(o=null)}r(o)}))}function rimraf_(e,t,r){n(e),n(t),n("function"==typeof r),t.lstat(e,((s,o)=>s&&"ENOENT"===s.code?r(null):s&&"EPERM"===s.code&&i?fixWinEPERM(e,t,s,r):o&&o.isDirectory()?rmdir(e,t,s,r):void t.unlink(e,(s=>{if(s){if("ENOENT"===s.code)return r(null);if("EPERM"===s.code)return i?fixWinEPERM(e,t,s,r):rmdir(e,t,s,r);if("EISDIR"===s.code)return rmdir(e,t,s,r)}return r(s)}))))}function fixWinEPERM(e,t,r,s){n(e),n(t),n("function"==typeof s),t.chmod(e,438,(o=>{o?s("ENOENT"===o.code?null:r):t.stat(e,((o,n)=>{o?s("ENOENT"===o.code?null:r):n.isDirectory()?rmdir(e,t,r,s):t.unlink(e,s)}))}))}function fixWinEPERMSync(e,t,r){let s;n(e),n(t);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw r}try{s=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw r}s.isDirectory()?rmdirSync(e,t,r):t.unlinkSync(e)}function rmdir(e,t,r,s){n(e),n(t),n("function"==typeof s),t.rmdir(e,(i=>{!i||"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code?i&&"ENOTDIR"===i.code?s(r):s(i):function rmkids(e,t,r){n(e),n(t),n("function"==typeof r),t.readdir(e,((s,n)=>{if(s)return r(s);let i,a=n.length;if(0===a)return t.rmdir(e,r);n.forEach((s=>{rimraf(o.join(e,s),t,(s=>{if(!i)return s?r(i=s):void(0==--a&&t.rmdir(e,r))}))}))}))}(e,t,s)}))}function rimrafSync(e,t){let r;defaults(t=t||{}),n(e,"rimraf: missing path"),n.strictEqual(typeof e,"string","rimraf: path should be a string"),n(t,"rimraf: missing options"),n.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(r){if("ENOENT"===r.code)return;"EPERM"===r.code&&i&&fixWinEPERMSync(e,t,r)}try{r&&r.isDirectory()?rmdirSync(e,t,null):t.unlinkSync(e)}catch(r){if("ENOENT"===r.code)return;if("EPERM"===r.code)return i?fixWinEPERMSync(e,t,r):rmdirSync(e,t,r);if("EISDIR"!==r.code)throw r;rmdirSync(e,t,r)}}function rmdirSync(e,t,r){n(e),n(t);try{t.rmdirSync(e)}catch(s){if("ENOTDIR"===s.code)throw r;if("ENOTEMPTY"===s.code||"EEXIST"===s.code||"EPERM"===s.code)!function rmkidsSync(e,t){if(n(e),n(t),t.readdirSync(e).forEach((r=>rimrafSync(o.join(e,r),t))),!i){return t.rmdirSync(e,t)}{const r=Date.now();do{try{return t.rmdirSync(e,t)}catch{}}while(Date.now()-r<500)}}(e,t);else if("ENOENT"!==s.code)throw s}}e.exports=rimraf,rimraf.sync=rimrafSync},93338:(e,t,r)=>{"use strict";const{EMPTY_BUFFER:s}=r(32614),o=Buffer[Symbol.species];function _mask(e,t,r,s,o){for(let n=0;n<o;n++)r[s+n]=e[n]^t[3&n]}function _unmask(e,t){for(let r=0;r<e.length;r++)e[r]^=t[3&r]}if(e.exports={concat:function concat(e,t){if(0===e.length)return s;if(1===e.length)return e[0];const r=Buffer.allocUnsafe(t);let n=0;for(let t=0;t<e.length;t++){const s=e[t];r.set(s,n),n+=s.length}return n<t?new o(r.buffer,r.byteOffset,n):r},mask:_mask,toArrayBuffer:function toArrayBuffer(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)},toBuffer:function toBuffer(e){if(toBuffer.readOnly=!0,Buffer.isBuffer(e))return e;let t;return e instanceof ArrayBuffer?t=new o(e):ArrayBuffer.isView(e)?t=new o(e.buffer,e.byteOffset,e.byteLength):(t=Buffer.from(e),toBuffer.readOnly=!1),t},unmask:_unmask},!process.env.WS_NO_BUFFER_UTIL)try{const t=r(Object(function webpackMissingModule(){var e=new Error("Cannot find module 'bufferutil'");throw e.code="MODULE_NOT_FOUND",e}()));e.exports.mask=function(e,r,s,o,n){n<48?_mask(e,r,s,o,n):t.mask(e,r,s,o,n)},e.exports.unmask=function(e,r){e.length<32?_unmask(e,r):t.unmask(e,r)}}catch(e){}},93566:(e,t,r)=>{"use strict";const s=r(63735);e.exports={symlinkType:function symlinkType(e,t,r){if(r="function"==typeof t?t:r,t="function"!=typeof t&&t)return r(null,t);s.lstat(e,((e,s)=>{if(e)return r(null,"file");t=s&&s.isDirectory()?"dir":"file",r(null,t)}))},symlinkTypeSync:function symlinkTypeSync(e,t){let r;if(t)return t;try{r=s.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}}},93961:e=>{function RetryOperation(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=RetryOperation,RetryOperation.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts},RetryOperation.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},RetryOperation.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),r=this._timeouts.shift()}var s=this,o=setTimeout((function(){s._attempts++,s._operationTimeoutCb&&(s._timeout=setTimeout((function(){s._operationTimeoutCb(s._attempts)}),s._operationTimeout),s._options.unref&&s._timeout.unref()),s._fn(s._attempts)}),r);return this._options.unref&&o.unref(),!0},RetryOperation.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){r._operationTimeoutCb()}),r._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},RetryOperation.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},RetryOperation.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},RetryOperation.prototype.start=RetryOperation.prototype.try,RetryOperation.prototype.errors=function(){return this._errors},RetryOperation.prototype.attempts=function(){return this._attempts},RetryOperation.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,s=0;s<this._errors.length;s++){var o=this._errors[s],n=o.message,i=(e[n]||0)+1;e[n]=i,i>=r&&(t=o,r=i)}return t}},95880:(e,t,r)=>{"use strict";const{isUtf8:s}=r(20181),{hasBlob:o}=r(32614);function _isValidUTF8(e){const t=e.length;let r=0;for(;r<t;)if(128&e[r])if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}else r++;return!0}if(e.exports={isBlob:function isBlob(e){return o&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&("Blob"===e[Symbol.toStringTag]||"File"===e[Symbol.toStringTag])},isValidStatusCode:function isValidStatusCode(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:_isValidUTF8,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},s)e.exports.isValidUTF8=function(e){return e.length<24?_isValidUTF8(e):s(e)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{const t=r(Object(function webpackMissingModule(){var e=new Error("Cannot find module 'utf-8-validate'");throw e.code="MODULE_NOT_FOUND",e}()));e.exports.isValidUTF8=function(e){return e.length<32?_isValidUTF8(e):t(e)}}catch(e){}},97400:(e,t,r)=>{"use strict";const{stringify:s}=r(11144),{outputFile:o}=r(80322);e.exports=async function outputJson(e,t,r={}){const n=s(t,r);await o(e,n,r)}},98808:(e,t,r)=>{"use strict";const s=r(41236).fromPromise,{makeDir:o,makeDirSync:n}=r(54758),i=s(o);e.exports={mkdirs:i,mkdirsSync:n,mkdirp:i,mkdirpSync:n,ensureDir:i,ensureDirSync:n}}};