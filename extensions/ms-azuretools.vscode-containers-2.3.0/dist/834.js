"use strict";exports.id=834,exports.ids=[834],exports.modules={54430:(e,t)=>{t.w=void 0,t.w={operationRequestMap:new WeakMap}},99834:(e,t,r)=>{function encodeByteArray(e){return(e instanceof Buffer?e:Buffer.from(e.buffer)).toString("base64")}function decodeString(e){return Buffer.from(e,"base64")}r.d(t,{ServiceClient:()=>ServiceClient,fj:()=>authorizeRequestOnClaimChallenge,rH:()=>authorizeRequestOnTenantChallenge,uc:()=>createClientPipeline,rl:()=>createSerializer,h6:()=>serializationPolicy});const n="$",o="_";const i=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;const s=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function flattenResponse(e,t){var r,n;const o=e.parsedHeaders;if("HEAD"===e.request.method)return Object.assign(Object.assign({},o),{body:e.parsedBody});const i=t&&t.bodyMapper,s=Boolean(null==i?void 0:i.nullable),a=null==i?void 0:i.type.name;if("Stream"===a)return Object.assign(Object.assign({},o),{blobBody:e.blobBody,readableStreamBody:e.readableStreamBody});const l="Composite"===a&&i.type.modelProperties||{},u=Object.keys(l).some((e=>""===l[e].serializedName));if("Sequence"===a||u){const t=null!==(r=e.parsedBody)&&void 0!==r?r:[];for(const r of Object.keys(l))l[r].serializedName&&(t[r]=null===(n=e.parsedBody)||void 0===n?void 0:n[r]);if(o)for(const e of Object.keys(o))t[e]=o[e];return!s||e.parsedBody||o||0!==Object.getOwnPropertyNames(l).length?t:null}return function handleNullableResponseAndWrappableBody(e){const t=Object.assign(Object.assign({},e.headers),e.body);return e.hasNullableType&&0===Object.getOwnPropertyNames(t).length?e.shouldWrapBody?{body:null}:null:e.shouldWrapBody?Object.assign(Object.assign({},e.headers),{body:e.body}):t}({body:e.parsedBody,headers:o,hasNullableType:s,shouldWrapBody:(c=e.parsedBody,p=a,"Composite"!==p&&"Dictionary"!==p&&("string"==typeof c||"number"==typeof c||"boolean"==typeof c||null!==(null==p?void 0:p.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i))||null==c))});var c,p}class SerializerImpl{constructor(e={},t=!1){this.modelMappers=e,this.isXML=t}validateConstraints(e,t,r){const failValidation=(e,n)=>{throw new Error(`"${r}" with value "${t}" should satisfy the constraint "${e}": ${n}.`)};if(e.constraints&&null!=t){const{ExclusiveMaximum:r,ExclusiveMinimum:n,InclusiveMaximum:o,InclusiveMinimum:i,MaxItems:s,MaxLength:a,MinItems:l,MinLength:u,MultipleOf:c,Pattern:p,UniqueItems:m}=e.constraints;if(void 0!==r&&t>=r&&failValidation("ExclusiveMaximum",r),void 0!==n&&t<=n&&failValidation("ExclusiveMinimum",n),void 0!==o&&t>o&&failValidation("InclusiveMaximum",o),void 0!==i&&t<i&&failValidation("InclusiveMinimum",i),void 0!==s&&t.length>s&&failValidation("MaxItems",s),void 0!==a&&t.length>a&&failValidation("MaxLength",a),void 0!==l&&t.length<l&&failValidation("MinItems",l),void 0!==u&&t.length<u&&failValidation("MinLength",u),void 0!==c&&t%c!=0&&failValidation("MultipleOf",c),p){const e="string"==typeof p?new RegExp(p):p;"string"==typeof t&&null!==t.match(e)||failValidation("Pattern",p)}m&&t.some(((e,t,r)=>r.indexOf(e)!==t))&&failValidation("UniqueItems",m)}}serialize(e,t,r,a={xml:{}}){var l,u,c;const p={xml:{rootName:null!==(l=a.xml.rootName)&&void 0!==l?l:"",includeRoot:null!==(u=a.xml.includeRoot)&&void 0!==u&&u,xmlCharKey:null!==(c=a.xml.xmlCharKey)&&void 0!==c?c:o}};let m={};const d=e.type.name;r||(r=e.serializedName),null!==d.match(/^Sequence$/i)&&(m=[]),e.isConstant&&(t=e.defaultValue);const{required:f,nullable:y}=e;if(f&&y&&void 0===t)throw new Error(`${r} cannot be undefined.`);if(f&&!y&&null==t)throw new Error(`${r} cannot be null or undefined.`);if(!f&&!1===y&&null===t)throw new Error(`${r} cannot be null.`);if(null==t)m=t;else if(null!==d.match(/^any$/i))m=t;else if(null!==d.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i))m=function serializeBasicTypes(e,t,r){if(null!=r)if(null!==e.match(/^Number$/i)){if("number"!=typeof r)throw new Error(`${t} with value ${r} must be of type number.`)}else if(null!==e.match(/^String$/i)){if("string"!=typeof r.valueOf())throw new Error(`${t} with value "${r}" must be of type string.`)}else if(null!==e.match(/^Uuid$/i)){if("string"!=typeof r.valueOf()||!function isValidUuid(e){return s.test(e)}(r))throw new Error(`${t} with value "${r}" must be of type string and a valid uuid.`)}else if(null!==e.match(/^Boolean$/i)){if("boolean"!=typeof r)throw new Error(`${t} with value ${r} must be of type boolean.`)}else if(null!==e.match(/^Stream$/i)){const e=typeof r;if(!("string"===e||"function"==typeof r.pipe||"function"==typeof r.tee||r instanceof ArrayBuffer||ArrayBuffer.isView(r)||("function"==typeof Blob||"object"==typeof Blob)&&r instanceof Blob||"function"===e))throw new Error(`${t} must be a string, Blob, ArrayBuffer, ArrayBufferView, ReadableStream, or () => ReadableStream.`)}return r}(d,r,t);else if(null!==d.match(/^Enum$/i)){m=function serializeEnumType(e,t,r){if(!t)throw new Error(`Please provide a set of allowedValues to validate ${e} as an Enum Type.`);if(!t.some((e=>"string"==typeof e.valueOf()?e.toLowerCase()===r.toLowerCase():e===r)))throw new Error(`${r} is not a valid value for ${e}. The valid values are: ${JSON.stringify(t)}.`);return r}(r,e.type.allowedValues,t)}else null!==d.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)?m=function serializeDateTypes(e,t,r){if(null!=t)if(null!==e.match(/^Date$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in ISO8601 format.`);t=t instanceof Date?t.toISOString().substring(0,10):new Date(t).toISOString().substring(0,10)}else if(null!==e.match(/^DateTime$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in ISO8601 format.`);t=t instanceof Date?t.toISOString():new Date(t).toISOString()}else if(null!==e.match(/^DateTimeRfc1123$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in RFC-1123 format.`);t=t instanceof Date?t.toUTCString():new Date(t).toUTCString()}else if(null!==e.match(/^UnixTime$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);t=function dateToUnixTime(e){if(!e)return;"string"==typeof e.valueOf()&&(e=new Date(e));return Math.floor(e.getTime()/1e3)}(t)}else if(null!==e.match(/^TimeSpan$/i)&&!function isDuration(e){return i.test(e)}(t))throw new Error(`${r} must be a string in ISO 8601 format. Instead was "${t}".`);return t}(d,t,r):null!==d.match(/^ByteArray$/i)?m=function serializeByteArrayType(e,t){if(null!=t){if(!(t instanceof Uint8Array))throw new Error(`${e} must be of type Uint8Array.`);t=encodeByteArray(t)}return t}(r,t):null!==d.match(/^Base64Url$/i)?m=function serializeBase64UrlType(e,t){if(null!=t){if(!(t instanceof Uint8Array))throw new Error(`${e} must be of type Uint8Array.`);t=function bufferToBase64Url(e){if(!e)return;if(!(e instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");return function trimEnd(e,t){let r=e.length;for(;r-1>=0&&e[r-1]===t;)--r;return e.substr(0,r)}(encodeByteArray(e),"=").replace(/\+/g,"-").replace(/\//g,"_")}(t)}return t}(r,t):null!==d.match(/^Sequence$/i)?m=function serializeSequenceType(e,t,r,o,i,s){var a;if(!Array.isArray(r))throw new Error(`${o} must be of type Array.`);let l=t.type.element;if(!l||"object"!=typeof l)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${o}.`);"Composite"===l.type.name&&l.type.className&&(l=null!==(a=e.modelMappers[l.type.className])&&void 0!==a?a:l);const u=[];for(let t=0;t<r.length;t++){const a=e.serialize(l,r[t],o,s);if(i&&l.xmlNamespace){const e=l.xmlNamespacePrefix?`xmlns:${l.xmlNamespacePrefix}`:"xmlns";"Composite"===l.type.name?(u[t]=Object.assign({},a),u[t][n]={[e]:l.xmlNamespace}):(u[t]={},u[t][s.xml.xmlCharKey]=a,u[t][n]={[e]:l.xmlNamespace})}else u[t]=a}return u}(this,e,t,r,Boolean(this.isXML),p):null!==d.match(/^Dictionary$/i)?m=function serializeDictionaryType(e,t,r,o,i,s){if("object"!=typeof r)throw new Error(`${o} must be of type object.`);const a=t.type.value;if(!a||"object"!=typeof a)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${o}.`);const l={};for(const t of Object.keys(r)){const n=e.serialize(a,r[t],o,s);l[t]=getXmlObjectValue(a,n,i,s)}if(i&&t.xmlNamespace){const e=t.xmlNamespacePrefix?`xmlns:${t.xmlNamespacePrefix}`:"xmlns",r=l;return r[n]={[e]:t.xmlNamespace},r}return l}(this,e,t,r,Boolean(this.isXML),p):null!==d.match(/^Composite$/i)&&(m=function serializeCompositeType(e,t,r,o,i,s){getPolymorphicDiscriminatorRecursively(e,t)&&(t=getPolymorphicMapper(e,t,r,"clientName"));if(null!=r){const a={},l=resolveModelProperties(e,t,o);for(const u of Object.keys(l)){const c=l[u];if(c.readOnly)continue;let p,m=a;if(e.isXML)p=c.xmlIsWrapped?c.xmlName:c.xmlElementName||c.xmlName;else{const e=splitSerializeName(c.serializedName);p=e.pop();for(const t of e){const e=m[t];null==e&&(void 0!==r[u]&&null!==r[u]||void 0!==c.defaultValue)&&(m[t]={}),m=m[t]}}if(null!=m){if(i&&t.xmlNamespace){const e=t.xmlNamespacePrefix?`xmlns:${t.xmlNamespacePrefix}`:"xmlns";m[n]=Object.assign(Object.assign({},m[n]),{[e]:t.xmlNamespace})}const a=""!==c.serializedName?o+"."+c.serializedName:o;let l=r[u];const d=getPolymorphicDiscriminatorRecursively(e,t);d&&d.clientName===u&&null==l&&(l=t.serializedName);const f=e.serialize(c,l,a,s);if(void 0!==f&&null!=p){const e=getXmlObjectValue(c,f,i,s);i&&c.xmlIsAttribute?(m[n]=m[n]||{},m[n][p]=f):i&&c.xmlIsWrapped?m[p]={[c.xmlElementName]:e}:m[p]=e}}}const u=function resolveAdditionalProperties(e,t,r){const n=t.type.additionalProperties;if(!n&&t.type.className){const n=resolveReferencedMapper(e,t,r);return null==n?void 0:n.type.additionalProperties}return n}(e,t,o);if(u){const t=Object.keys(l);for(const n in r){t.every((e=>e!==n))&&(a[n]=e.serialize(u,r[n],o+'["'+n+'"]',s))}}return a}return r}(this,e,t,r,Boolean(this.isXML),p));return m}deserialize(e,t,r,i={xml:{}}){var s,a,l,u;const c={xml:{rootName:null!==(s=i.xml.rootName)&&void 0!==s?s:"",includeRoot:null!==(a=i.xml.includeRoot)&&void 0!==a&&a,xmlCharKey:null!==(l=i.xml.xmlCharKey)&&void 0!==l?l:o},ignoreUnknownProperties:null!==(u=i.ignoreUnknownProperties)&&void 0!==u&&u};if(null==t)return this.isXML&&"Sequence"===e.type.name&&!e.xmlIsWrapped&&(t=[]),void 0!==e.defaultValue&&(t=e.defaultValue),t;let p;const m=e.type.name;if(r||(r=e.serializedName),null!==m.match(/^Composite$/i))p=function deserializeCompositeType(e,t,r,i,s){var a,l;const u=null!==(a=s.xml.xmlCharKey)&&void 0!==a?a:o;getPolymorphicDiscriminatorRecursively(e,t)&&(t=getPolymorphicMapper(e,t,r,"serializedName"));const c=resolveModelProperties(e,t,i);let p={};const m=[];for(const o of Object.keys(c)){const a=c[o],d=splitSerializeName(c[o].serializedName);m.push(d[0]);const{serializedName:f,xmlName:y,xmlElementName:h}=a;let g=i;""!==f&&void 0!==f&&(g=i+"."+f);const b=a.headerCollectionPrefix;if(b){const t={};for(const n of Object.keys(r))n.startsWith(b)&&(t[n.substring(b.length)]=e.deserialize(a.type.value,r[n],g,s)),m.push(n);p[o]=t}else if(e.isXML)if(a.xmlIsAttribute&&r[n])p[o]=e.deserialize(a,r[n][y],g,s);else if(a.xmlIsMsText)void 0!==r[u]?p[o]=r[u]:"string"==typeof r&&(p[o]=r);else{const t=h||y||f;if(a.xmlIsWrapped){const t=r[y],n=null!==(l=null==t?void 0:t[h])&&void 0!==l?l:[];p[o]=e.deserialize(a,n,g,s),m.push(y)}else{const n=r[t];p[o]=e.deserialize(a,n,g,s),m.push(t)}}else{let n,i=r,l=0;for(const e of d){if(!i)break;l++,i=i[e]}null===i&&l<d.length&&(i=void 0),n=i;const u=t.type.polymorphicDiscriminator;let m;if(u&&o===u.clientName&&null==n&&(n=t.serializedName),Array.isArray(r[o])&&""===c[o].serializedName){n=r[o];const t=e.deserialize(a,n,g,s);for(const[e,r]of Object.entries(p))Object.prototype.hasOwnProperty.call(t,e)||(t[e]=r);p=t}else void 0===n&&void 0===a.defaultValue||(m=e.deserialize(a,n,g,s),p[o]=m)}}const d=t.type.additionalProperties;if(d){const isAdditionalProperty=e=>{for(const t in c){if(splitSerializeName(c[t].serializedName)[0]===e)return!1}return!0};for(const t in r)isAdditionalProperty(t)&&(p[t]=e.deserialize(d,r[t],i+'["'+t+'"]',s))}else if(r&&!s.ignoreUnknownProperties)for(const e of Object.keys(r))void 0!==p[e]||m.includes(e)||isSpecialXmlProperty(e,s)||(p[e]=r[e]);return p}(this,e,t,r,c);else{if(this.isXML){const e=c.xml.xmlCharKey;void 0!==t[n]&&void 0!==t[e]&&(t=t[e])}null!==m.match(/^Number$/i)?(p=parseFloat(t),isNaN(p)&&(p=t)):null!==m.match(/^Boolean$/i)?p="true"===t||"false"!==t&&t:null!==m.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)?p=t:null!==m.match(/^(Date|DateTime|DateTimeRfc1123)$/i)?p=new Date(t):null!==m.match(/^UnixTime$/i)?p=function unixTimeToDate(e){if(!e)return;return new Date(1e3*e)}(t):null!==m.match(/^ByteArray$/i)?p=decodeString(t):null!==m.match(/^Base64Url$/i)?p=function base64UrlToByteArray(e){if(!e)return;if(e&&"string"!=typeof e.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return decodeString(e=e.replace(/-/g,"+").replace(/_/g,"/"))}(t):null!==m.match(/^Sequence$/i)?p=function deserializeSequenceType(e,t,r,n,o){var i;let s=t.type.element;if(!s||"object"!=typeof s)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${n}`);if(r){Array.isArray(r)||(r=[r]),"Composite"===s.type.name&&s.type.className&&(s=null!==(i=e.modelMappers[s.type.className])&&void 0!==i?i:s);const t=[];for(let i=0;i<r.length;i++)t[i]=e.deserialize(s,r[i],`${n}[${i}]`,o);return t}return r}(this,e,t,r,c):null!==m.match(/^Dictionary$/i)&&(p=function deserializeDictionaryType(e,t,r,n,o){const i=t.type.value;if(!i||"object"!=typeof i)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${n}`);if(r){const t={};for(const s of Object.keys(r))t[s]=e.deserialize(i,r[s],n,o);return t}return r}(this,e,t,r,c))}return e.isConstant&&(p=e.defaultValue),p}}function createSerializer(e={},t=!1){return new SerializerImpl(e,t)}function splitSerializeName(e){const t=[];let r="";if(e){const n=e.split(".");for(const e of n)"\\"===e.charAt(e.length-1)?r+=e.substr(0,e.length-1)+".":(r+=e,t.push(r),r="")}return t}function resolveReferencedMapper(e,t,r){const n=t.type.className;if(!n)throw new Error(`Class name for model "${r}" is not provided in the mapper "${JSON.stringify(t,void 0,2)}".`);return e.modelMappers[n]}function resolveModelProperties(e,t,r){let n=t.type.modelProperties;if(!n){const o=resolveReferencedMapper(e,t,r);if(!o)throw new Error(`mapper() cannot be null or undefined for model "${t.type.className}".`);if(n=null==o?void 0:o.type.modelProperties,!n)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(o)}" of type "${t.type.className}" for object "${r}".`)}return n}function getXmlObjectValue(e,t,r,o){if(!r||!e.xmlNamespace)return t;const i=e.xmlNamespacePrefix?`xmlns:${e.xmlNamespacePrefix}`:"xmlns",s={[i]:e.xmlNamespace};if(["Composite"].includes(e.type.name)){if(t[n])return t;{const e=Object.assign({},t);return e[n]=s,e}}const a={};return a[o.xml.xmlCharKey]=t,a[n]=s,a}function isSpecialXmlProperty(e,t){return[n,t.xml.xmlCharKey].includes(e)}function getPolymorphicMapper(e,t,r,n){var o;const i=getPolymorphicDiscriminatorRecursively(e,t);if(i){let s=i[n];if(s){"serializedName"===n&&(s=s.replace(/\\/gi,""));const i=r[s],a=null!==(o=t.type.uberParent)&&void 0!==o?o:t.type.className;if("string"==typeof i&&a){const r=function getIndexDiscriminator(e,t,r){const n=[r];for(;n.length;){const r=n.shift(),o=t===r?t:r+"."+t;if(Object.prototype.hasOwnProperty.call(e,o))return e[o];for(const[t,o]of Object.entries(e))t.startsWith(r+".")&&o.type.uberParent===r&&o.type.className&&n.push(o.type.className)}}(e.modelMappers.discriminators,i,a);r&&(t=r)}}}return t}function getPolymorphicDiscriminatorRecursively(e,t){return t.type.polymorphicDiscriminator||getPolymorphicDiscriminatorSafely(e,t.type.uberParent)||getPolymorphicDiscriminatorSafely(e,t.type.className)}function getPolymorphicDiscriminatorSafely(e,t){return t&&e.modelMappers[t]&&e.modelMappers[t].type.polymorphicDiscriminator}const a={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};var l=r(1965);const u=r(54430).w;function getOperationArgumentValueFromParameter(e,t,r){let n=t.parameterPath;const o=t.mapper;let i;if("string"==typeof n&&(n=[n]),Array.isArray(n)){if(n.length>0)if(o.isConstant)i=o.defaultValue;else{let t=getPropertyFromParameterPath(e,n);!t.propertyFound&&r&&(t=getPropertyFromParameterPath(r,n));let s=!1;t.propertyFound||(s=o.required||"options"===n[0]&&2===n.length),i=s?o.defaultValue:t.propertyValue}}else{o.required&&(i={});for(const t in n){const s=o.type.modelProperties[t],a=getOperationArgumentValueFromParameter(e,{parameterPath:n[t],mapper:s},r);void 0!==a&&(i||(i={}),i[t]=a)}}return i}function getPropertyFromParameterPath(e,t){const r={propertyFound:!1};let n=0;for(;n<t.length;++n){const r=t[n];if(!e||!(r in e))break;e=e[r]}return n===t.length&&(r.propertyValue=e,r.propertyFound=!0),r}const c=Symbol.for("@azure/core-client original request");function getOperationRequestInfo(e){if(function hasOriginalRequest(e){return c in e}(e))return getOperationRequestInfo(e[c]);let t=u.operationRequestMap.get(e);return t||(t={},u.operationRequestMap.set(e,t)),t}const p=["application/json","text/json"],m=["application/xml","application/atom+xml"],d="deserializationPolicy";function deserializationPolicy(e={}){var t,r,n,i,s,u,c;const f=null!==(r=null===(t=e.expectedContentTypes)||void 0===t?void 0:t.json)&&void 0!==r?r:p,y=null!==(i=null===(n=e.expectedContentTypes)||void 0===n?void 0:n.xml)&&void 0!==i?i:m,h=e.parseXML,g=e.serializerOptions,b={xml:{rootName:null!==(s=null==g?void 0:g.xml.rootName)&&void 0!==s?s:"",includeRoot:null!==(u=null==g?void 0:g.xml.includeRoot)&&void 0!==u&&u,xmlCharKey:null!==(c=null==g?void 0:g.xml.xmlCharKey)&&void 0!==c?c:o}};return{name:d,async sendRequest(e,t){const r=await t(e);return async function deserializeResponseBody(e,t,r,n,o){const i=await async function parse(e,t,r,n,o){var i;if(!(null===(i=r.request.streamResponseStatusCodes)||void 0===i?void 0:i.has(r.status))&&r.bodyAsText){const i=r.bodyAsText,s=r.headers.get("Content-Type")||"",a=s?s.split(";").map((e=>e.toLowerCase())):[];try{if(0===a.length||a.some((t=>-1!==e.indexOf(t))))return r.parsedBody=JSON.parse(i),r;if(a.some((e=>-1!==t.indexOf(e)))){if(!o)throw new Error("Parsing XML not supported.");const e=await o(i,n.xml);return r.parsedBody=e,r}}catch(e){const t=`Error "${e}" occurred while parsing the response body - ${r.bodyAsText}.`,n=e.code||l.pj.PARSE_ERROR;throw new l.pj(t,{code:n,statusCode:r.status,request:r.request,response:r})}}return r}(e,t,r,n,o);if(!function shouldDeserializeResponse(e){const t=e.request,r=getOperationRequestInfo(t),n=null==r?void 0:r.shouldDeserialize;let o;o=void 0===n||("boolean"==typeof n?n:n(e));return o}(i))return i;const s=getOperationRequestInfo(i.request),u=null==s?void 0:s.operationSpec;if(!u||!u.responses)return i;const c=function getOperationResponseMap(e){let t;const r=e.request,n=getOperationRequestInfo(r),o=null==n?void 0:n.operationSpec;o&&(t=(null==n?void 0:n.operationResponseGetter)?null==n?void 0:n.operationResponseGetter(o,e):o.responses[e.status]);return t}(i),{error:p,shouldReturnResponse:m}=function handleErrorResponse(e,t,r,n){var o,i,s,u,c;const p=200<=e.status&&e.status<300,m=function isOperationSpecEmpty(e){const t=Object.keys(e.responses);return 0===t.length||1===t.length&&"default"===t[0]}(t)?p:!!r;if(m){if(!r)return{error:null,shouldReturnResponse:!1};if(!r.isError)return{error:null,shouldReturnResponse:!1}}const d=null!=r?r:t.responses.default,f=(null===(o=e.request.streamResponseStatusCodes)||void 0===o?void 0:o.has(e.status))?`Unexpected status code: ${e.status}`:e.bodyAsText,y=new l.pj(f,{statusCode:e.status,request:e.request,response:e});if(!(d||(null===(s=null===(i=e.parsedBody)||void 0===i?void 0:i.error)||void 0===s?void 0:s.code)&&(null===(c=null===(u=e.parsedBody)||void 0===u?void 0:u.error)||void 0===c?void 0:c.message)))throw y;const h=null==d?void 0:d.bodyMapper,g=null==d?void 0:d.headersMapper;try{if(e.parsedBody){const r=e.parsedBody;let o;if(h){let e=r;if(t.isXML&&h.type.name===a.Sequence){e=[];const t=h.xmlElementName;"object"==typeof r&&t&&(e=r[t])}o=t.serializer.deserialize(h,e,"error.response.parsedBody",n)}const i=r.error||o||r;y.code=i.code,i.message&&(y.message=i.message),h&&(y.response.parsedBody=o)}e.headers&&g&&(y.response.parsedHeaders=t.serializer.deserialize(g,e.headers.toJSON(),"operationRes.parsedHeaders"))}catch(t){y.message=`Error "${t.message}" occurred in deserializing the responseBody - "${e.bodyAsText}" for the default response.`}return{error:y,shouldReturnResponse:!1}}(i,u,c,n);if(p)throw p;if(m)return i;if(c){if(c.bodyMapper){let e=i.parsedBody;u.isXML&&c.bodyMapper.type.name===a.Sequence&&(e="object"==typeof e?e[c.bodyMapper.xmlElementName]:[]);try{i.parsedBody=u.serializer.deserialize(c.bodyMapper,e,"operationRes.parsedBody",n)}catch(e){throw new l.pj(`Error ${e} occurred in deserializing the responseBody - ${i.bodyAsText}`,{statusCode:i.status,request:i.request,response:i})}}else"HEAD"===u.httpMethod&&(i.parsedBody=r.status>=200&&r.status<300);c.headersMapper&&(i.parsedHeaders=u.serializer.deserialize(c.headersMapper,i.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return i}(f,y,r,b,h)}}}function getPathStringFromParameter(e){const{parameterPath:t,mapper:r}=e;let n;return n="string"==typeof t?t:Array.isArray(t)?t.join("."):r.serializedName,n}const f="serializationPolicy";function serializationPolicy(e={}){const t=e.stringifyXML;return{name:f,async sendRequest(e,r){const i=getOperationRequestInfo(e),s=null==i?void 0:i.operationSpec,l=null==i?void 0:i.operationArguments;return s&&l&&(!function serializeHeaders(e,t,r){var n,o;if(r.headerParameters)for(const n of r.headerParameters){let o=getOperationArgumentValueFromParameter(t,n);if(null!=o||n.mapper.required){o=r.serializer.serialize(n.mapper,o,getPathStringFromParameter(n));const t=n.mapper.headerCollectionPrefix;if(t)for(const r of Object.keys(o))e.headers.set(t+r,o[r]);else e.headers.set(n.mapper.serializedName||getPathStringFromParameter(n),o)}}const i=null===(o=null===(n=t.options)||void 0===n?void 0:n.requestOptions)||void 0===o?void 0:o.customHeaders;if(i)for(const t of Object.keys(i))e.headers.set(t,i[t])}(e,l,s),function serializeRequestBody(e,t,r,i=function(){throw new Error("XML serialization unsupported!")}){var s,l,u,c,p;const m=null===(s=t.options)||void 0===s?void 0:s.serializerOptions,d={xml:{rootName:null!==(l=null==m?void 0:m.xml.rootName)&&void 0!==l?l:"",includeRoot:null!==(u=null==m?void 0:m.xml.includeRoot)&&void 0!==u&&u,xmlCharKey:null!==(c=null==m?void 0:m.xml.xmlCharKey)&&void 0!==c?c:o}},f=d.xml.xmlCharKey;if(r.requestBody&&r.requestBody.mapper){e.body=getOperationArgumentValueFromParameter(t,r.requestBody);const o=r.requestBody.mapper,{required:s,serializedName:l,xmlName:u,xmlElementName:c,xmlNamespace:m,xmlNamespacePrefix:y,nullable:h}=o,g=o.type.name;try{if(void 0!==e.body&&null!==e.body||h&&null===e.body||s){const t=getPathStringFromParameter(r.requestBody);e.body=r.serializer.serialize(o,e.body,t,d);const s=g===a.Stream;if(r.isXML){const t=y?`xmlns:${y}`:"xmlns",r=function getXmlValueWithNamespace(e,t,r,o,i){if(e&&!["Composite","Sequence","Dictionary"].includes(r)){const r={};return r[i.xml.xmlCharKey]=o,r[n]={[t]:e},r}return o}(m,t,g,e.body,d);g===a.Sequence?e.body=i(function prepareXMLRootList(e,t,r,o){Array.isArray(e)||(e=[e]);if(!r||!o)return{[t]:e};const i={[t]:e};return i[n]={[r]:o},i}(r,c||u||l,t,m),{rootName:u||l,xmlCharKey:f}):s||(e.body=i(r,{rootName:u||l,xmlCharKey:f}))}else{if(g===a.String&&((null===(p=r.contentType)||void 0===p?void 0:p.match("text/plain"))||"text"===r.mediaType))return;s||(e.body=JSON.stringify(e.body))}}}catch(e){throw new Error(`Error "${e.message}" occurred in serializing the payload - ${JSON.stringify(l,void 0,"  ")}.`)}}else if(r.formDataParameters&&r.formDataParameters.length>0){e.formData={};for(const n of r.formDataParameters){const o=getOperationArgumentValueFromParameter(t,n);if(null!=o){const t=n.mapper.serializedName||getPathStringFromParameter(n);e.formData[t]=r.serializer.serialize(n.mapper,o,getPathStringFromParameter(n),d)}}}}(e,l,s,t)),r(e)}}}function createClientPipeline(e={}){const t=(0,l.Fp)(null!=e?e:{});return e.credentialOptions&&t.addPolicy((0,l.N$)({credential:e.credentialOptions.credential,scopes:e.credentialOptions.credentialScopes})),t.addPolicy(serializationPolicy(e.serializationOptions),{phase:"Serialize"}),t.addPolicy(deserializationPolicy(e.deserializationOptions),{phase:"Deserialize"}),t}let y;const h={CSV:",",SSV:" ",Multi:"Multi",TSV:"\t",Pipes:"|"};function getRequestUrl(e,t,r,n){const o=function calculateUrlReplacements(e,t,r){var n;const o=new Map;if(null===(n=e.urlParameters)||void 0===n?void 0:n.length)for(const n of e.urlParameters){let i=getOperationArgumentValueFromParameter(t,n,r);const s=getPathStringFromParameter(n);i=e.serializer.serialize(n.mapper,i,s),n.skipEncoding||(i=encodeURIComponent(i)),o.set(`{${n.mapper.serializedName||s}}`,i)}return o}(t,r,n);let i=!1,s=replaceAll(e,o);if(t.path){let e=replaceAll(t.path,o);"/{nextLink}"===t.path&&e.startsWith("/")&&(e=e.substring(1)),!function isAbsoluteUrl(e){return e.includes("://")}(e)?s=function appendPath(e,t){if(!t)return e;const r=new URL(e);let n=r.pathname;n.endsWith("/")||(n=`${n}/`);t.startsWith("/")&&(t=t.substring(1));const o=t.indexOf("?");if(-1!==o){const e=t.substring(0,o),i=t.substring(o+1);n+=e,i&&(r.search=r.search?`${r.search}&${i}`:i)}else n+=t;return r.pathname=n,r.toString()}(s,e):(s=e,i=!0)}const{queryParams:a,sequenceParams:l}=function calculateQueryParameters(e,t,r){var n;const o=new Map,i=new Set;if(null===(n=e.queryParameters)||void 0===n?void 0:n.length)for(const n of e.queryParameters){"Sequence"===n.mapper.type.name&&n.mapper.serializedName&&i.add(n.mapper.serializedName);let s=getOperationArgumentValueFromParameter(t,n,r);if(null!=s||n.mapper.required){s=e.serializer.serialize(n.mapper,s,getPathStringFromParameter(n));const t=n.collectionFormat?h[n.collectionFormat]:"";if(Array.isArray(s)&&(s=s.map((e=>null==e?"":e))),"Multi"===n.collectionFormat&&0===s.length)continue;!Array.isArray(s)||"SSV"!==n.collectionFormat&&"TSV"!==n.collectionFormat||(s=s.join(t)),n.skipEncoding||(s=Array.isArray(s)?s.map((e=>encodeURIComponent(e))):encodeURIComponent(s)),!Array.isArray(s)||"CSV"!==n.collectionFormat&&"Pipes"!==n.collectionFormat||(s=s.join(t)),o.set(n.mapper.serializedName||getPathStringFromParameter(n),s)}}return{queryParams:o,sequenceParams:i}}(t,r,n);return s=function appendQueryParams(e,t,r,n=!1){if(0===t.size)return e;const o=new URL(e),i=function simpleParseQueryParams(e){const t=new Map;if(!e||"?"!==e[0])return t;const r=(e=e.slice(1)).split("&");for(const e of r){const[r,n]=e.split("=",2),o=t.get(r);o?Array.isArray(o)?o.push(n):t.set(r,[o,n]):t.set(r,n)}return t}(o.search);for(const[e,o]of t){const t=i.get(e);if(Array.isArray(t))if(Array.isArray(o)){t.push(...o);const r=new Set(t);i.set(e,Array.from(r))}else t.push(o);else t?(Array.isArray(o)?o.unshift(t):r.has(e)&&i.set(e,[t,o]),n||i.set(e,o)):i.set(e,o)}const s=[];for(const[e,t]of i)if("string"==typeof t)s.push(`${e}=${t}`);else if(Array.isArray(t))for(const r of t)s.push(`${e}=${r}`);else s.push(`${e}=${t}`);return o.search=s.length?`?${s.join("&")}`:"",o.toString()}(s,a,l,i),s}function replaceAll(e,t){let r=e;for(const[e,n]of t)r=r.split(e).join(n);return r}const g=(0,r(5136).KV)("core-client");class ServiceClient{constructor(e={}){var t,r;if(this._requestContentType=e.requestContentType,this._endpoint=null!==(t=e.endpoint)&&void 0!==t?t:e.baseUri,e.baseUri&&g.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||function getCachedDefaultHttpClient(){return y||(y=(0,l.fl)()),y}(),this.pipeline=e.pipeline||function createDefaultPipeline(e){const t=function getCredentialScopes(e){if(e.credentialScopes)return e.credentialScopes;if(e.endpoint)return`${e.endpoint}/.default`;if(e.baseUri)return`${e.baseUri}/.default`;if(e.credential&&!e.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy");return}(e),r=e.credential&&t?{credentialScopes:t,credential:e.credential}:void 0;return createClientPipeline(Object.assign(Object.assign({},e),{credentialOptions:r}))}(e),null===(r=e.additionalPolicies)||void 0===r?void 0:r.length)for(const{policy:t,position:r}of e.additionalPolicies){const e="perRetry"===r?"Sign":void 0;this.pipeline.addPolicy(t,{afterPhase:e})}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,t){const r=t.baseUrl||this._endpoint;if(!r)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");const n=getRequestUrl(r,t,e,this),o=(0,l.createPipelineRequest)({url:n});o.method=t.httpMethod;const i=getOperationRequestInfo(o);i.operationSpec=t,i.operationArguments=e;const s=t.contentType||this._requestContentType;s&&t.requestBody&&o.headers.set("Content-Type",s);const u=e.options;if(u){const e=u.requestOptions;e&&(e.timeout&&(o.timeout=e.timeout),e.onUploadProgress&&(o.onUploadProgress=e.onUploadProgress),e.onDownloadProgress&&(o.onDownloadProgress=e.onDownloadProgress),void 0!==e.shouldDeserialize&&(i.shouldDeserialize=e.shouldDeserialize),e.allowInsecureConnection&&(o.allowInsecureConnection=!0)),u.abortSignal&&(o.abortSignal=u.abortSignal),u.tracingOptions&&(o.tracingOptions=u.tracingOptions)}this._allowInsecureConnection&&(o.allowInsecureConnection=!0),void 0===o.streamResponseStatusCodes&&(o.streamResponseStatusCodes=function getStreamingResponseStatusCodes(e){const t=new Set;for(const r in e.responses){const n=e.responses[r];n.bodyMapper&&n.bodyMapper.type.name===a.Stream&&t.add(Number(r))}return t}(t));try{const e=await this.sendRequest(o),r=flattenResponse(e,t.responses[e.status]);return(null==u?void 0:u.onResponse)&&u.onResponse(e,r),r}catch(e){if("object"==typeof e&&(null==e?void 0:e.response)){const r=e.response,n=flattenResponse(r,t.responses[e.statusCode]||t.responses.default);e.details=n,(null==u?void 0:u.onResponse)&&u.onResponse(r,n,e)}throw e}}}async function authorizeRequestOnClaimChallenge(e){var t;const{scopes:r,response:n}=e,o=e.logger||g,i=n.headers.get("WWW-Authenticate");if(!i)return o.info("The WWW-Authenticate header was missing. Failed to perform the Continuous Access Evaluation authentication flow."),!1;const s=function parseCAEChallenge(e){return`, ${e.trim()}`.split(", Bearer ").filter((e=>e)).map((e=>`${e.trim()}, `.split('", ').filter((e=>e)).map((e=>(([e,t])=>({[e]:t}))(e.trim().split('="')))).reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{})))}(i)||[],a=s.find((e=>e.claims));if(!a)return o.info('The WWW-Authenticate header was missing the necessary "claims" to perform the Continuous Access Evaluation authentication flow.'),!1;const l=await e.getAccessToken(a.scope?[a.scope]:r,{claims:(u=a.claims,Buffer.from(u,"base64").toString())});var u;return!!l&&(e.request.headers.set("Authorization",`${null!==(t=l.tokenType)&&void 0!==t?t:"Bearer"} ${l.token}`),!0)}const b="/.default",v={AUTHORIZATION:"authorization"};const authorizeRequestOnTenantChallenge=async e=>{var t;const r=function requestToOptions(e){return{abortSignal:e.abortSignal,requestOptions:{timeout:e.timeout},tracingOptions:e.tracingOptions}}(e.request),n=function getChallenge(e){const t=e.headers.get("WWW-Authenticate");if(401===e.status&&t)return t;return}(e.response);if(n){const o=function parseChallenge(e){const t=e.slice(7),r=`${t.trim()} `.split(" ").filter((e=>e));return r.map((e=>(([e,t])=>({[e]:t}))(e.trim().split("=")))).reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{})}(n),i=function buildScopes(e,t){if(!t.resource_id)return e.scopes;const r=new URL(t.resource_id);r.pathname=b;let n=r.toString();"https://disk.azure.com/.default"===n&&(n="https://disk.azure.com//.default");return[n]}(e,o),s=function extractTenantId(e){const t=new URL(e.authorization_uri),r=t.pathname.split("/")[1];if(r&&function isUuid(e){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(e)}(r))return r;return}(o);if(!s)return!1;const a=await e.getAccessToken(i,Object.assign(Object.assign({},r),{tenantId:s}));return!!a&&(e.request.headers.set(v.AUTHORIZATION,`${null!==(t=a.tokenType)&&void 0!==t?t:"Bearer"} ${a.token}`),!0)}return!1}}};