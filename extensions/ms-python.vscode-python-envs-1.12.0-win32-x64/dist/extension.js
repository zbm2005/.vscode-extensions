/*! For license information please see extension.js.LICENSE.txt */
(()=>{var __webpack_modules__={8574:(e,t,n)=>{"use strict";const r=n(9611),i=global.Date;class a extends i{constructor(e){super(e),this.isDate=!0}toISOString(){return`${this.getUTCFullYear()}-${r(2,this.getUTCMonth()+1)}-${r(2,this.getUTCDate())}`}}e.exports=e=>{const t=new a(e);if(isNaN(t))throw new TypeError("Invalid Datetime");return t}},6804:(e,t,n)=>{"use strict";const r=n(9611);class i extends Date{constructor(e){super(e+"Z"),this.isFloating=!0}toISOString(){return`${this.getUTCFullYear()}-${r(2,this.getUTCMonth()+1)}-${r(2,this.getUTCDate())}T${r(2,this.getUTCHours())}:${r(2,this.getUTCMinutes())}:${r(2,this.getUTCSeconds())}.${r(3,this.getUTCMilliseconds())}`}}e.exports=e=>{const t=new i(e);if(isNaN(t))throw new TypeError("Invalid Datetime");return t}},1051:e=>{"use strict";e.exports=e=>{const t=new Date(e);if(isNaN(t))throw new TypeError("Invalid Datetime");return t}},5879:(e,t,n)=>{"use strict";const r=n(9611);class i extends Date{constructor(e){super(`0000-01-01T${e}Z`),this.isTime=!0}toISOString(){return`${r(2,this.getUTCHours())}:${r(2,this.getUTCMinutes())}:${r(2,this.getUTCSeconds())}.${r(3,this.getUTCMilliseconds())}`}}e.exports=e=>{const t=new i(e);if(isNaN(t))throw new TypeError("Invalid Datetime");return t}},9611:e=>{"use strict";e.exports=(e,t)=>{for(t=String(t);t.length<e;)t="0"+t;return t}},2526:e=>{"use strict";const t=1114112;class n extends Error{constructor(e,t,r){super("[ParserError] "+e,t,r),this.name="ParserError",this.code="ParserError",Error.captureStackTrace&&Error.captureStackTrace(this,n)}}class r{constructor(e){this.parser=e,this.buf="",this.returned=null,this.result=null,this.resultTable=null,this.resultArr=null}}class i{constructor(){this.pos=0,this.col=0,this.line=0,this.obj={},this.ctx=this.obj,this.stack=[],this._buf="",this.char=null,this.ii=0,this.state=new r(this.parseStart)}parse(e){if(0===e.length||null==e.length)return;let t;for(this._buf=String(e),this.ii=-1,this.char=-1;!1===t||this.nextChar();)t=this.runOne();this._buf=null}nextChar(){return 10===this.char&&(++this.line,this.col=-1),++this.ii,this.char=this._buf.codePointAt(this.ii),++this.pos,++this.col,this.haveBuffer()}haveBuffer(){return this.ii<this._buf.length}runOne(){return this.state.parser.call(this,this.state.returned)}finish(){let e;this.char=t;do{e=this.state.parser,this.runOne()}while(this.state.parser!==e);return this.ctx=null,this.state=null,this._buf=null,this.obj}next(e){if("function"!=typeof e)throw new n("Tried to set state to non-existent state: "+JSON.stringify(e));this.state.parser=e}goto(e){return this.next(e),this.runOne()}call(e,t){t&&this.next(t),this.stack.push(this.state),this.state=new r(e)}callNow(e,t){return this.call(e,t),this.runOne()}return(e){if(0===this.stack.length)throw this.error(new n("Stack underflow"));void 0===e&&(e=this.state.buf),this.state=this.stack.pop(),this.state.returned=e}returnNow(e){return this.return(e),this.runOne()}consume(){if(this.char===t)throw this.error(new n("Unexpected end-of-buffer"));this.state.buf+=this._buf[this.ii]}error(e){return e.line=this.line,e.col=this.col,e.pos=this.pos,e}parseStart(){throw new n("Must declare a parseStart method")}}i.END=t,i.Error=n,e.exports=i},5985:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=makeParserClass(__webpack_require__(2526)),module.exports.makeParserClass=makeParserClass;class TomlError extends Error{constructor(e){super(e),this.name="TomlError",Error.captureStackTrace&&Error.captureStackTrace(this,TomlError),this.fromTOML=!0,this.wrapped=null}}TomlError.wrap=e=>{const t=new TomlError(e.message);return t.code=e.code,t.wrapped=e,t},module.exports.TomlError=TomlError;const createDateTime=__webpack_require__(1051),createDateTimeFloat=__webpack_require__(6804),createDate=__webpack_require__(8574),createTime=__webpack_require__(5879),CTRL_I=9,CTRL_J=10,CTRL_M=13,CTRL_CHAR_BOUNDARY=31,CHAR_SP=32,CHAR_QUOT=34,CHAR_NUM=35,CHAR_APOS=39,CHAR_PLUS=43,CHAR_COMMA=44,CHAR_HYPHEN=45,CHAR_PERIOD=46,CHAR_0=48,CHAR_1=49,CHAR_7=55,CHAR_9=57,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_A=65,CHAR_E=69,CHAR_F=70,CHAR_T=84,CHAR_U=85,CHAR_Z=90,CHAR_LOWBAR=95,CHAR_a=97,CHAR_b=98,CHAR_e=101,CHAR_f=102,CHAR_i=105,CHAR_l=108,CHAR_n=110,CHAR_o=111,CHAR_r=114,CHAR_s=115,CHAR_t=116,CHAR_u=117,CHAR_x=120,CHAR_z=122,CHAR_LCUB=123,CHAR_RCUB=125,CHAR_LSQB=91,CHAR_BSOL=92,CHAR_RSQB=93,CHAR_DEL=127,SURROGATE_FIRST=55296,SURROGATE_LAST=57343,escapes={[CHAR_b]:"\b",[CHAR_t]:"\t",[CHAR_n]:"\n",[CHAR_f]:"\f",[CHAR_r]:"\r",[CHAR_QUOT]:'"',[CHAR_BSOL]:"\\"};function isDigit(e){return e>=CHAR_0&&e<=CHAR_9}function isHexit(e){return e>=CHAR_A&&e<=CHAR_F||e>=CHAR_a&&e<=CHAR_f||e>=CHAR_0&&e<=CHAR_9}function isBit(e){return e===CHAR_1||e===CHAR_0}function isOctit(e){return e>=CHAR_0&&e<=CHAR_7}function isAlphaNumQuoteHyphen(e){return e>=CHAR_A&&e<=CHAR_Z||e>=CHAR_a&&e<=CHAR_z||e>=CHAR_0&&e<=CHAR_9||e===CHAR_APOS||e===CHAR_QUOT||e===CHAR_LOWBAR||e===CHAR_HYPHEN}function isAlphaNumHyphen(e){return e>=CHAR_A&&e<=CHAR_Z||e>=CHAR_a&&e<=CHAR_z||e>=CHAR_0&&e<=CHAR_9||e===CHAR_LOWBAR||e===CHAR_HYPHEN}const _type=Symbol("type"),_declared=Symbol("declared"),hasOwnProperty=Object.prototype.hasOwnProperty,defineProperty=Object.defineProperty,descriptor={configurable:!0,enumerable:!0,writable:!0,value:void 0};function hasKey(e,t){return!!hasOwnProperty.call(e,t)||("__proto__"===t&&defineProperty(e,"__proto__",descriptor),!1)}const INLINE_TABLE=Symbol("inline-table");function InlineTable(){return Object.defineProperties({},{[_type]:{value:INLINE_TABLE}})}function isInlineTable(e){return null!==e&&"object"==typeof e&&e[_type]===INLINE_TABLE}const TABLE=Symbol("table");function Table(){return Object.defineProperties({},{[_type]:{value:TABLE},[_declared]:{value:!1,writable:!0}})}function isTable(e){return null!==e&&"object"==typeof e&&e[_type]===TABLE}const _contentType=Symbol("content-type"),INLINE_LIST=Symbol("inline-list");function InlineList(e){return Object.defineProperties([],{[_type]:{value:INLINE_LIST},[_contentType]:{value:e}})}function isInlineList(e){return null!==e&&"object"==typeof e&&e[_type]===INLINE_LIST}const LIST=Symbol("list");function List(){return Object.defineProperties([],{[_type]:{value:LIST}})}function isList(e){return null!==e&&"object"==typeof e&&e[_type]===LIST}let _custom;try{const utilInspect=eval("require('util').inspect");_custom=utilInspect.custom}catch(e){}const _inspect=_custom||"inspect";class BoxedBigInt{constructor(e){try{this.value=global.BigInt.asIntN(64,e)}catch(e){this.value=null}Object.defineProperty(this,_type,{value:INTEGER})}isNaN(){return null===this.value}toString(){return String(this.value)}[_inspect](){return`[BigInt: ${this.toString()}]}`}valueOf(){return this.value}}const INTEGER=Symbol("integer");function Integer(e){let t=Number(e);return Object.is(t,-0)&&(t=0),global.BigInt&&!Number.isSafeInteger(t)?new BoxedBigInt(e):Object.defineProperties(new Number(t),{isNaN:{value:function(){return isNaN(this)}},[_type]:{value:INTEGER},[_inspect]:{value:()=>`[Integer: ${e}]`}})}function isInteger(e){return null!==e&&"object"==typeof e&&e[_type]===INTEGER}const FLOAT=Symbol("float");function Float(e){return Object.defineProperties(new Number(e),{[_type]:{value:FLOAT},[_inspect]:{value:()=>`[Float: ${e}]`}})}function isFloat(e){return null!==e&&"object"==typeof e&&e[_type]===FLOAT}function tomlType(e){const t=typeof e;if("object"===t){if(null===e)return"null";if(e instanceof Date)return"datetime";if(_type in e)switch(e[_type]){case INLINE_TABLE:return"inline-table";case INLINE_LIST:return"inline-list";case TABLE:return"table";case LIST:return"list";case FLOAT:return"float";case INTEGER:return"integer"}}return t}function makeParserClass(e){return class extends e{constructor(){super(),this.ctx=this.obj=Table()}atEndOfWord(){return this.char===CHAR_NUM||this.char===CTRL_I||this.char===CHAR_SP||this.atEndOfLine()}atEndOfLine(){return this.char===e.END||this.char===CTRL_J||this.char===CTRL_M}parseStart(){if(this.char===e.END)return null;if(this.char===CHAR_LSQB)return this.call(this.parseTableOrList);if(this.char===CHAR_NUM)return this.call(this.parseComment);if(this.char===CTRL_J||this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M)return null;if(isAlphaNumQuoteHyphen(this.char))return this.callNow(this.parseAssignStatement);throw this.error(new TomlError(`Unknown character "${this.char}"`))}parseWhitespaceToEOL(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M)return null;if(this.char===CHAR_NUM)return this.goto(this.parseComment);if(this.char===e.END||this.char===CTRL_J)return this.return();throw this.error(new TomlError("Unexpected character, expected only whitespace or comments till end of line"))}parseAssignStatement(){return this.callNow(this.parseAssign,this.recordAssignStatement)}recordAssignStatement(e){let t=this.ctx,n=e.key.pop();for(let n of e.key){if(hasKey(t,n)&&(!isTable(t[n])||t[n][_declared]))throw this.error(new TomlError("Can't redefine existing key"));t=t[n]=t[n]||Table()}if(hasKey(t,n))throw this.error(new TomlError("Can't redefine existing key"));return isInteger(e.value)||isFloat(e.value)?t[n]=e.value.valueOf():t[n]=e.value,this.goto(this.parseWhitespaceToEOL)}parseAssign(){return this.callNow(this.parseKeyword,this.recordAssignKeyword)}recordAssignKeyword(e){return this.state.resultTable?this.state.resultTable.push(e):this.state.resultTable=[e],this.goto(this.parseAssignKeywordPreDot)}parseAssignKeywordPreDot(){return this.char===CHAR_PERIOD?this.next(this.parseAssignKeywordPostDot):this.char!==CHAR_SP&&this.char!==CTRL_I?this.goto(this.parseAssignEqual):void 0}parseAssignKeywordPostDot(){if(this.char!==CHAR_SP&&this.char!==CTRL_I)return this.callNow(this.parseKeyword,this.recordAssignKeyword)}parseAssignEqual(){if(this.char===CHAR_EQUALS)return this.next(this.parseAssignPreValue);throw this.error(new TomlError('Invalid character, expected "="'))}parseAssignPreValue(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseValue,this.recordAssignValue)}recordAssignValue(e){return this.returnNow({key:this.state.resultTable,value:e})}parseComment(){do{if(this.char===e.END||this.char===CTRL_J)return this.return()}while(this.nextChar())}parseTableOrList(){if(this.char!==CHAR_LSQB)return this.goto(this.parseTable);this.next(this.parseList)}parseTable(){return this.ctx=this.obj,this.goto(this.parseTableNext)}parseTableNext(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseKeyword,this.parseTableMore)}parseTableMore(e){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CHAR_RSQB){if(hasKey(this.ctx,e)&&(!isTable(this.ctx[e])||this.ctx[e][_declared]))throw this.error(new TomlError("Can't redefine existing key"));return this.ctx=this.ctx[e]=this.ctx[e]||Table(),this.ctx[_declared]=!0,this.next(this.parseWhitespaceToEOL)}if(this.char===CHAR_PERIOD){if(hasKey(this.ctx,e))if(isTable(this.ctx[e]))this.ctx=this.ctx[e];else{if(!isList(this.ctx[e]))throw this.error(new TomlError("Can't redefine existing key"));this.ctx=this.ctx[e][this.ctx[e].length-1]}else this.ctx=this.ctx[e]=Table();return this.next(this.parseTableNext)}throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseList(){return this.ctx=this.obj,this.goto(this.parseListNext)}parseListNext(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseKeyword,this.parseListMore)}parseListMore(e){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CHAR_RSQB){if(hasKey(this.ctx,e)||(this.ctx[e]=List()),isInlineList(this.ctx[e]))throw this.error(new TomlError("Can't extend an inline array"));if(!isList(this.ctx[e]))throw this.error(new TomlError("Can't redefine an existing key"));{const t=Table();this.ctx[e].push(t),this.ctx=t}return this.next(this.parseListEnd)}if(this.char===CHAR_PERIOD){if(hasKey(this.ctx,e)){if(isInlineList(this.ctx[e]))throw this.error(new TomlError("Can't extend an inline array"));if(isInlineTable(this.ctx[e]))throw this.error(new TomlError("Can't extend an inline table"));if(isList(this.ctx[e]))this.ctx=this.ctx[e][this.ctx[e].length-1];else{if(!isTable(this.ctx[e]))throw this.error(new TomlError("Can't redefine an existing key"));this.ctx=this.ctx[e]}}else this.ctx=this.ctx[e]=Table();return this.next(this.parseListNext)}throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseListEnd(e){if(this.char===CHAR_RSQB)return this.next(this.parseWhitespaceToEOL);throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseValue(){if(this.char===e.END)throw this.error(new TomlError("Key without value"));if(this.char===CHAR_QUOT)return this.next(this.parseDoubleString);if(this.char===CHAR_APOS)return this.next(this.parseSingleString);if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)return this.goto(this.parseNumberSign);if(this.char===CHAR_i)return this.next(this.parseInf);if(this.char===CHAR_n)return this.next(this.parseNan);if(isDigit(this.char))return this.goto(this.parseNumberOrDateTime);if(this.char===CHAR_t||this.char===CHAR_f)return this.goto(this.parseBoolean);if(this.char===CHAR_LSQB)return this.call(this.parseInlineList,this.recordValue);if(this.char===CHAR_LCUB)return this.call(this.parseInlineTable,this.recordValue);throw this.error(new TomlError("Unexpected character, expecting string, number, datetime, boolean, inline array or inline table"))}recordValue(e){return this.returnNow(e)}parseInf(){if(this.char===CHAR_n)return this.next(this.parseInf2);throw this.error(new TomlError('Unexpected character, expected "inf", "+inf" or "-inf"'))}parseInf2(){if(this.char===CHAR_f)return"-"===this.state.buf?this.return(-1/0):this.return(1/0);throw this.error(new TomlError('Unexpected character, expected "inf", "+inf" or "-inf"'))}parseNan(){if(this.char===CHAR_a)return this.next(this.parseNan2);throw this.error(new TomlError('Unexpected character, expected "nan"'))}parseNan2(){if(this.char===CHAR_n)return this.return(NaN);throw this.error(new TomlError('Unexpected character, expected "nan"'))}parseKeyword(){return this.char===CHAR_QUOT?this.next(this.parseBasicString):this.char===CHAR_APOS?this.next(this.parseLiteralString):this.goto(this.parseBareKey)}parseBareKey(){do{if(this.char===e.END)throw this.error(new TomlError("Key ended without value"));if(!isAlphaNumHyphen(this.char)){if(0===this.state.buf.length)throw this.error(new TomlError("Empty bare keys are not allowed"));return this.returnNow()}this.consume()}while(this.nextChar())}parseSingleString(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiStringMaybe):this.goto(this.parseLiteralString)}parseLiteralString(){do{if(this.char===CHAR_APOS)return this.return();if(this.atEndOfLine())throw this.error(new TomlError("Unterminated string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}parseLiteralMultiStringMaybe(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiString):this.returnNow()}parseLiteralMultiString(){return this.char===CTRL_M?null:this.char===CTRL_J?this.next(this.parseLiteralMultiStringContent):this.goto(this.parseLiteralMultiStringContent)}parseLiteralMultiStringContent(){do{if(this.char===CHAR_APOS)return this.next(this.parseLiteralMultiEnd);if(this.char===e.END)throw this.error(new TomlError("Unterminated multi-line string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I&&this.char!==CTRL_J&&this.char!==CTRL_M)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}parseLiteralMultiEnd(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiEnd2):(this.state.buf+="'",this.goto(this.parseLiteralMultiStringContent))}parseLiteralMultiEnd2(){return this.char===CHAR_APOS?this.return():(this.state.buf+="''",this.goto(this.parseLiteralMultiStringContent))}parseDoubleString(){return this.char===CHAR_QUOT?this.next(this.parseMultiStringMaybe):this.goto(this.parseBasicString)}parseBasicString(){do{if(this.char===CHAR_BSOL)return this.call(this.parseEscape,this.recordEscapeReplacement);if(this.char===CHAR_QUOT)return this.return();if(this.atEndOfLine())throw this.error(new TomlError("Unterminated string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}recordEscapeReplacement(e){return this.state.buf+=e,this.goto(this.parseBasicString)}parseMultiStringMaybe(){return this.char===CHAR_QUOT?this.next(this.parseMultiString):this.returnNow()}parseMultiString(){return this.char===CTRL_M?null:this.char===CTRL_J?this.next(this.parseMultiStringContent):this.goto(this.parseMultiStringContent)}parseMultiStringContent(){do{if(this.char===CHAR_BSOL)return this.call(this.parseMultiEscape,this.recordMultiEscapeReplacement);if(this.char===CHAR_QUOT)return this.next(this.parseMultiEnd);if(this.char===e.END)throw this.error(new TomlError("Unterminated multi-line string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I&&this.char!==CTRL_J&&this.char!==CTRL_M)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}errorControlCharInString(){let e="\\u00";return this.char<16&&(e+="0"),e+=this.char.toString(16),this.error(new TomlError(`Control characters (codes < 0x1f and 0x7f) are not allowed in strings, use ${e} instead`))}recordMultiEscapeReplacement(e){return this.state.buf+=e,this.goto(this.parseMultiStringContent)}parseMultiEnd(){return this.char===CHAR_QUOT?this.next(this.parseMultiEnd2):(this.state.buf+='"',this.goto(this.parseMultiStringContent))}parseMultiEnd2(){return this.char===CHAR_QUOT?this.return():(this.state.buf+='""',this.goto(this.parseMultiStringContent))}parseMultiEscape(){return this.char===CTRL_M||this.char===CTRL_J?this.next(this.parseMultiTrim):this.char===CHAR_SP||this.char===CTRL_I?this.next(this.parsePreMultiTrim):this.goto(this.parseEscape)}parsePreMultiTrim(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CTRL_M||this.char===CTRL_J)return this.next(this.parseMultiTrim);throw this.error(new TomlError("Can't escape whitespace"))}parseMultiTrim(){return this.char===CTRL_J||this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M?null:this.returnNow()}parseEscape(){if(this.char in escapes)return this.return(escapes[this.char]);if(this.char===CHAR_u)return this.call(this.parseSmallUnicode,this.parseUnicodeReturn);if(this.char===CHAR_U)return this.call(this.parseLargeUnicode,this.parseUnicodeReturn);throw this.error(new TomlError("Unknown escape character: "+this.char))}parseUnicodeReturn(e){try{const t=parseInt(e,16);if(t>=SURROGATE_FIRST&&t<=SURROGATE_LAST)throw this.error(new TomlError("Invalid unicode, character in range 0xD800 - 0xDFFF is reserved"));return this.returnNow(String.fromCodePoint(t))}catch(e){throw this.error(TomlError.wrap(e))}}parseSmallUnicode(){if(!isHexit(this.char))throw this.error(new TomlError("Invalid character in unicode sequence, expected hex"));if(this.consume(),this.state.buf.length>=4)return this.return()}parseLargeUnicode(){if(!isHexit(this.char))throw this.error(new TomlError("Invalid character in unicode sequence, expected hex"));if(this.consume(),this.state.buf.length>=8)return this.return()}parseNumberSign(){return this.consume(),this.next(this.parseMaybeSignedInfOrNan)}parseMaybeSignedInfOrNan(){return this.char===CHAR_i?this.next(this.parseInf):this.char===CHAR_n?this.next(this.parseNan):this.callNow(this.parseNoUnder,this.parseNumberIntegerStart)}parseNumberIntegerStart(){return this.char===CHAR_0?(this.consume(),this.next(this.parseNumberIntegerExponentOrDecimal)):this.goto(this.parseNumberInteger)}parseNumberIntegerExponentOrDecimal(){return this.char===CHAR_PERIOD?(this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat)):this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.returnNow(Integer(this.state.buf))}parseNumberInteger(){if(!isDigit(this.char)){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder);if(this.char===CHAR_E||this.char===CHAR_e)return this.consume(),this.next(this.parseNumberExponentSign);if(this.char===CHAR_PERIOD)return this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat);{const e=Integer(this.state.buf);if(e.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(e)}}this.consume()}parseNoUnder(){if(this.char===CHAR_LOWBAR||this.char===CHAR_PERIOD||this.char===CHAR_E||this.char===CHAR_e)throw this.error(new TomlError("Unexpected character, expected digit"));if(this.atEndOfWord())throw this.error(new TomlError("Incomplete number"));return this.returnNow()}parseNoUnderHexOctBinLiteral(){if(this.char===CHAR_LOWBAR||this.char===CHAR_PERIOD)throw this.error(new TomlError("Unexpected character, expected digit"));if(this.atEndOfWord())throw this.error(new TomlError("Incomplete number"));return this.returnNow()}parseNumberFloat(){return this.char===CHAR_LOWBAR?this.call(this.parseNoUnder,this.parseNumberFloat):isDigit(this.char)?void this.consume():this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.returnNow(Float(this.state.buf))}parseNumberExponentSign(){if(isDigit(this.char))return this.goto(this.parseNumberExponent);if(this.char!==CHAR_HYPHEN&&this.char!==CHAR_PLUS)throw this.error(new TomlError("Unexpected character, expected -, + or digit"));this.consume(),this.call(this.parseNoUnder,this.parseNumberExponent)}parseNumberExponent(){if(!isDigit(this.char))return this.char===CHAR_LOWBAR?this.call(this.parseNoUnder):this.returnNow(Float(this.state.buf));this.consume()}parseNumberOrDateTime(){return this.char===CHAR_0?(this.consume(),this.next(this.parseNumberBaseOrDateTime)):this.goto(this.parseNumberOrDateTimeOnly)}parseNumberOrDateTimeOnly(){return this.char===CHAR_LOWBAR?this.call(this.parseNoUnder,this.parseNumberInteger):isDigit(this.char)?(this.consume(),void(this.state.buf.length>4&&this.next(this.parseNumberInteger))):this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.char===CHAR_PERIOD?(this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat)):this.char===CHAR_HYPHEN?this.goto(this.parseDateTime):this.char===CHAR_COLON?this.goto(this.parseOnlyTimeHour):this.returnNow(Integer(this.state.buf))}parseDateTimeOnly(){if(this.state.buf.length<4){if(isDigit(this.char))return this.consume();if(this.char===CHAR_COLON)return this.goto(this.parseOnlyTimeHour);throw this.error(new TomlError("Expected digit while parsing year part of a date"))}if(this.char===CHAR_HYPHEN)return this.goto(this.parseDateTime);throw this.error(new TomlError("Expected hyphen (-) while parsing year part of date"))}parseNumberBaseOrDateTime(){return this.char===CHAR_b?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerBin)):this.char===CHAR_o?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerOct)):this.char===CHAR_x?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerHex)):this.char===CHAR_PERIOD?this.goto(this.parseNumberInteger):isDigit(this.char)?this.goto(this.parseDateTimeOnly):this.returnNow(Integer(this.state.buf))}parseIntegerHex(){if(!isHexit(this.char)){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const e=Integer(this.state.buf);if(e.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(e)}}this.consume()}parseIntegerOct(){if(!isOctit(this.char)){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const e=Integer(this.state.buf);if(e.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(e)}}this.consume()}parseIntegerBin(){if(!isBit(this.char)){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const e=Integer(this.state.buf);if(e.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(e)}}this.consume()}parseDateTime(){if(this.state.buf.length<4)throw this.error(new TomlError("Years less than 1000 must be zero padded to four characters"));return this.state.result=this.state.buf,this.state.buf="",this.next(this.parseDateMonth)}parseDateMonth(){if(this.char===CHAR_HYPHEN){if(this.state.buf.length<2)throw this.error(new TomlError("Months less than 10 must be zero padded to two characters"));return this.state.result+="-"+this.state.buf,this.state.buf="",this.next(this.parseDateDay)}if(!isDigit(this.char))throw this.error(new TomlError("Incomplete datetime"));this.consume()}parseDateDay(){if(this.char===CHAR_T||this.char===CHAR_SP){if(this.state.buf.length<2)throw this.error(new TomlError("Days less than 10 must be zero padded to two characters"));return this.state.result+="-"+this.state.buf,this.state.buf="",this.next(this.parseStartTimeHour)}if(this.atEndOfWord())return this.returnNow(createDate(this.state.result+"-"+this.state.buf));if(!isDigit(this.char))throw this.error(new TomlError("Incomplete datetime"));this.consume()}parseStartTimeHour(){return this.atEndOfWord()?this.returnNow(createDate(this.state.result)):this.goto(this.parseTimeHour)}parseTimeHour(){if(this.char===CHAR_COLON){if(this.state.buf.length<2)throw this.error(new TomlError("Hours less than 10 must be zero padded to two characters"));return this.state.result+="T"+this.state.buf,this.state.buf="",this.next(this.parseTimeMin)}if(!isDigit(this.char))throw this.error(new TomlError("Incomplete datetime"));this.consume()}parseTimeMin(){if(!(this.state.buf.length<2&&isDigit(this.char))){if(2===this.state.buf.length&&this.char===CHAR_COLON)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseTimeSec);throw this.error(new TomlError("Incomplete datetime"))}this.consume()}parseTimeSec(){if(!isDigit(this.char))throw this.error(new TomlError("Incomplete datetime"));if(this.consume(),2===this.state.buf.length)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseTimeZoneOrFraction)}parseOnlyTimeHour(){if(this.char===CHAR_COLON){if(this.state.buf.length<2)throw this.error(new TomlError("Hours less than 10 must be zero padded to two characters"));return this.state.result=this.state.buf,this.state.buf="",this.next(this.parseOnlyTimeMin)}throw this.error(new TomlError("Incomplete time"))}parseOnlyTimeMin(){if(!(this.state.buf.length<2&&isDigit(this.char))){if(2===this.state.buf.length&&this.char===CHAR_COLON)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseOnlyTimeSec);throw this.error(new TomlError("Incomplete time"))}this.consume()}parseOnlyTimeSec(){if(!isDigit(this.char))throw this.error(new TomlError("Incomplete time"));if(this.consume(),2===this.state.buf.length)return this.next(this.parseOnlyTimeFractionMaybe)}parseOnlyTimeFractionMaybe(){if(this.state.result+=":"+this.state.buf,this.char!==CHAR_PERIOD)return this.return(createTime(this.state.result));this.state.buf="",this.next(this.parseOnlyTimeFraction)}parseOnlyTimeFraction(){if(!isDigit(this.char)){if(this.atEndOfWord()){if(0===this.state.buf.length)throw this.error(new TomlError("Expected digit in milliseconds"));return this.returnNow(createTime(this.state.result+"."+this.state.buf))}throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}this.consume()}parseTimeZoneOrFraction(){if(this.char===CHAR_PERIOD)this.consume(),this.next(this.parseDateTimeFraction);else{if(this.char!==CHAR_HYPHEN&&this.char!==CHAR_PLUS){if(this.char===CHAR_Z)return this.consume(),this.return(createDateTime(this.state.result+this.state.buf));if(this.atEndOfWord())return this.returnNow(createDateTimeFloat(this.state.result+this.state.buf));throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}this.consume(),this.next(this.parseTimeZoneHour)}}parseDateTimeFraction(){if(isDigit(this.char))this.consume();else{if(1===this.state.buf.length)throw this.error(new TomlError("Expected digit in milliseconds"));if(this.char!==CHAR_HYPHEN&&this.char!==CHAR_PLUS){if(this.char===CHAR_Z)return this.consume(),this.return(createDateTime(this.state.result+this.state.buf));if(this.atEndOfWord())return this.returnNow(createDateTimeFloat(this.state.result+this.state.buf));throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}this.consume(),this.next(this.parseTimeZoneHour)}}parseTimeZoneHour(){if(!isDigit(this.char))throw this.error(new TomlError("Unexpected character in datetime, expected digit"));if(this.consume(),/\d\d$/.test(this.state.buf))return this.next(this.parseTimeZoneSep)}parseTimeZoneSep(){if(this.char!==CHAR_COLON)throw this.error(new TomlError("Unexpected character in datetime, expected colon"));this.consume(),this.next(this.parseTimeZoneMin)}parseTimeZoneMin(){if(!isDigit(this.char))throw this.error(new TomlError("Unexpected character in datetime, expected digit"));if(this.consume(),/\d\d$/.test(this.state.buf))return this.return(createDateTime(this.state.result+this.state.buf))}parseBoolean(){return this.char===CHAR_t?(this.consume(),this.next(this.parseTrue_r)):this.char===CHAR_f?(this.consume(),this.next(this.parseFalse_a)):void 0}parseTrue_r(){if(this.char===CHAR_r)return this.consume(),this.next(this.parseTrue_u);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseTrue_u(){if(this.char===CHAR_u)return this.consume(),this.next(this.parseTrue_e);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseTrue_e(){if(this.char===CHAR_e)return this.return(!0);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_a(){if(this.char===CHAR_a)return this.consume(),this.next(this.parseFalse_l);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_l(){if(this.char===CHAR_l)return this.consume(),this.next(this.parseFalse_s);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_s(){if(this.char===CHAR_s)return this.consume(),this.next(this.parseFalse_e);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_e(){if(this.char===CHAR_e)return this.return(!1);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseInlineList(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M||this.char===CTRL_J)return null;if(this.char===e.END)throw this.error(new TomlError("Unterminated inline array"));return this.char===CHAR_NUM?this.call(this.parseComment):this.char===CHAR_RSQB?this.return(this.state.resultArr||InlineList()):this.callNow(this.parseValue,this.recordInlineListValue)}recordInlineListValue(e){if(this.state.resultArr){const t=this.state.resultArr[_contentType],n=tomlType(e);if(t!==n)throw this.error(new TomlError(`Inline lists must be a single type, not a mix of ${t} and ${n}`))}else this.state.resultArr=InlineList(tomlType(e));return isFloat(e)||isInteger(e)?this.state.resultArr.push(e.valueOf()):this.state.resultArr.push(e),this.goto(this.parseInlineListNext)}parseInlineListNext(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M||this.char===CTRL_J)return null;if(this.char===CHAR_NUM)return this.call(this.parseComment);if(this.char===CHAR_COMMA)return this.next(this.parseInlineList);if(this.char===CHAR_RSQB)return this.goto(this.parseInlineList);throw this.error(new TomlError("Invalid character, expected whitespace, comma (,) or close bracket (])"))}parseInlineTable(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===e.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));return this.char===CHAR_RCUB?this.return(this.state.resultTable||InlineTable()):(this.state.resultTable||(this.state.resultTable=InlineTable()),this.callNow(this.parseAssign,this.recordInlineTableValue))}recordInlineTableValue(e){let t=this.state.resultTable,n=e.key.pop();for(let n of e.key){if(hasKey(t,n)&&(!isTable(t[n])||t[n][_declared]))throw this.error(new TomlError("Can't redefine existing key"));t=t[n]=t[n]||Table()}if(hasKey(t,n))throw this.error(new TomlError("Can't redefine existing key"));return isInteger(e.value)||isFloat(e.value)?t[n]=e.value.valueOf():t[n]=e.value,this.goto(this.parseInlineTableNext)}parseInlineTableNext(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===e.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));if(this.char===CHAR_COMMA)return this.next(this.parseInlineTable);if(this.char===CHAR_RCUB)return this.goto(this.parseInlineTable);throw this.error(new TomlError("Invalid character, expected whitespace, comma (,) or close bracket (])"))}}}},3643:(e,t,n)=>{"use strict";e.exports=function(e,t){t||(t={});const n=t.blocksize||40960,a=new r;return new Promise(((e,t)=>{setImmediate(o,0,n,e,t)}));function o(t,n,r,s){if(t>=e.length)try{return r(a.finish())}catch(t){return s(i(t,e))}try{a.parse(e.slice(t,t+n)),setImmediate(o,t+n,n,r,s)}catch(t){s(i(t,e))}}};const r=n(5985),i=n(3956)},3956:e=>{"use strict";e.exports=function(e,t){if(null==e.pos||null==e.line)return e;let n=e.message;if(n+=` at row ${e.line+1}, col ${e.col+1}, pos ${e.pos}:\n`,t&&t.split){const r=t.split(/\n/),i=String(Math.min(r.length,e.line+3)).length;let a=" ";for(;a.length<i;)a+=" ";for(let t=Math.max(0,e.line-1);t<Math.min(r.length,e.line+2);++t){let o=String(t+1);if(o.length<i&&(o=" "+o),e.line===t){n+=o+"> "+r[t]+"\n",n+=a+"  ";for(let t=0;t<e.col;++t)n+=" ";n+="^\n"}else n+=o+": "+r[t]+"\n"}}return e.message=n+"\n",e}},8551:(e,t,n)=>{"use strict";e.exports=function(e){return e?function(e){const t=new i;return e.setEncoding("utf8"),new Promise(((n,r)=>{let i,a=!1,o=!1;function s(){if(a=!0,!i)try{n(t.finish())}catch(e){r(e)}}function c(e){o=!0,r(e)}e.once("end",s),e.once("error",c),function n(){let r;for(i=!0;null!==(r=e.read());)try{t.parse(r)}catch(e){return c(e)}if(i=!1,a)return s();o||e.once("readable",n)}()}))}(e):function(){const e=new i;return new r.Transform({objectMode:!0,transform(t,n,r){try{e.parse(t.toString(n))}catch(e){this.emit("error",e)}r()},flush(t){try{this.push(e.finish())}catch(e){this.emit("error",e)}t()}})}()};const r=n(2203),i=n(5985)},6970:(e,t,n)=>{"use strict";e.exports=function(e){global.Buffer&&global.Buffer.isBuffer(e)&&(e=e.toString("utf8"));const t=new r;try{return t.parse(e),t.finish()}catch(t){throw i(t,e)}};const r=n(5985),i=n(3956)},7950:(e,t,n)=>{"use strict";e.exports=n(6970),e.exports.async=n(3643),e.exports.stream=n(8551),e.exports.prettyError=n(3956)},6608:e=>{"use strict";function t(e){return new Error("Can only stringify objects, not "+e)}function n(e){return Object.keys(e).filter((t=>a(e[t])))}function r(e){let t=Array.isArray(e)?[]:Object.prototype.hasOwnProperty.call(e,"__proto__")?{["__proto__"]:void 0}:{};for(let n of Object.keys(e))e[n]&&"function"==typeof e[n].toJSON&&!("toISOString"in e[n])?t[n]=e[n].toJSON():t[n]=e[n];return t}function i(e,c,l){var h,d;h=n(l=r(l)),d=function(e){return Object.keys(e).filter((t=>!a(e[t])))}(l);var p=[],v=c||"";h.forEach((e=>{var t=o(l[e]);"undefined"!==t&&"null"!==t&&p.push(v+s(e)+" = "+u(l[e],!0))})),p.length>0&&p.push("");var m=e&&h.length>0?c+"  ":"";return d.forEach((a=>{p.push(function(e,a,c,l){var u=o(l);if("array"===u)return function(e,n,a,c){f(c=r(c));var l=o(c[0]);if("table"!==l)throw t(l);var u=e+s(a),h="";return c.forEach((e=>{h.length>0&&(h+="\n"),h+=n+"[["+u+"]]\n",h+=i(u+".",n,e)})),h}(e,a,c,l);if("table"===u)return function(e,t,r,a){var o=e+s(r),c="";return n(a).length>0&&(c+=t+"["+o+"]\n"),c+i(o+".",t,a)}(e,a,c,l);throw t(u)}(e,m,a,l[a]))})),p.join("\n")}function a(e){switch(o(e)){case"undefined":case"null":case"integer":case"nan":case"float":case"boolean":case"string":case"datetime":return!0;case"array":return 0===e.length||"table"!==o(e[0]);case"table":return 0===Object.keys(e).length;default:return!1}}function o(e){return void 0===e?"undefined":null===e?"null":"bigint"==typeof e||Number.isInteger(e)&&!Object.is(e,-0)?"integer":"number"==typeof e?"float":"boolean"==typeof e?"boolean":"string"==typeof e?"string":"toISOString"in e?isNaN(e)?"undefined":"datetime":Array.isArray(e)?"array":"table"}function s(e){var t=String(e);return/^[-A-Za-z0-9_]+$/.test(t)?t:c(t)}function c(e){return'"'+l(e).replace(/"/g,'\\"')+'"'}function l(e){return e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/([\u0000-\u001f\u007f])/,(e=>"\\u"+function(e,t){for(;t.length<4;)t="0"+t;return t}(0,e.codePointAt(0).toString(16))))}function u(e,t){let n=o(e);return"string"===n&&(t&&/\n/.test(e)?n="string-multiline":!/[\b\t\n\f\r']/.test(e)&&/"/.test(e)&&(n="string-literal")),h(e,n)}function h(e,n){switch(n||(n=o(e)),n){case"string-multiline":return function(e){let t=e.split(/\n/).map((e=>l(e).replace(/"(?="")/g,'\\"'))).join("\n");return'"'===t.slice(-1)&&(t+="\\\n"),'"""\n'+t+'"""'}(e);case"string":return c(e);case"string-literal":return"'"+e+"'";case"integer":return d(e);case"float":return function(e){if(e===1/0)return"inf";if(e===-1/0)return"-inf";if(Object.is(e,NaN))return"nan";if(Object.is(e,-0))return"-0.0";var t=String(e).split("."),n=t[0],r=t[1]||0;return d(n)+"."+r}(e);case"boolean":return function(e){return String(e)}(e);case"datetime":return function(e){return e.toISOString()}(e);case"array":return function(e){const t=f(e=r(e));var n="[",i=e.map((e=>h(e,t)));return i.join(", ").length>60||/\n/.test(i)?n+="\n  "+i.join(",\n  ")+"\n":n+=" "+i.join(", ")+(i.length>0?" ":""),n+"]"}(e.filter((e=>"null"!==o(e)&&"undefined"!==o(e)&&"nan"!==o(e))));case"table":return function(e){e=r(e);var t=[];return Object.keys(e).forEach((n=>{t.push(s(n)+" = "+u(e[n],!1))})),"{ "+t.join(", ")+(t.length>0?" ":"")+"}"}(e);default:throw t(n)}}function d(e){return String(e).replace(/\B(?=(\d{3})+(?!\d))/g,"_")}function f(e){const t=function(e){var t=o(e[0]);return e.every((e=>o(e)===t))?t:e.every((e=>{return"float"===(t=o(e))||"integer"===t;var t}))?"float":"mixed"}(e);if("mixed"===t)throw new Error("Array values can't have mixed types");return t}e.exports=function(e){if(null===e)throw t("null");if(void 0===e)throw t("undefined");if("object"!=typeof e)throw t(typeof e);if("function"==typeof e.toJSON&&(e=e.toJSON()),null==e)return null;const n=o(e);if("table"!==n)throw t(n);return i("","",e)},e.exports.value=h},9:(e,t,n)=>{"use strict";t.parse=n(7950),t.stringify=n(6608)},956:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ActiveStatus:()=>k.f,AppInsightsCore:()=>p,BaseTelemetryPlugin:()=>C.s,DiagnosticLogger:()=>c.wq,EventLatency:()=>g,EventPersistence:()=>E,EventPropertyType:()=>y,EventsDiscardedReason:()=>I.x,FullVersionString:()=>h.xE,InternalAppInsightsCore:()=>l._,LoggingSeverity:()=>b,MinChannelPriorty:()=>_,NotificationManager:()=>S.h,PerfEvent:()=>o.Q6,PerfManager:()=>o.NS,ProcessTelemetryContext:()=>T.W0,SenderPostManager:()=>$.v,TraceLevel:()=>w,Undefined:()=>D.bA,ValueKind:()=>m,ValueSanitizer:()=>P,Version:()=>h.Rx,_InternalLogMessage:()=>c.WD,__getRegisteredEvents:()=>M.El,_appendHeader:()=>O.LU,_getAllResponseHeaders:()=>O.w3,_logInternalMessage:()=>c.Oc,_testHookMaxUnloadHooksCb:()=>W.d,_throwInternal:()=>c.ZP,_warnToConsole:()=>c.OG,addEventHandler:()=>M.So,addEventListeners:()=>M.lQ,addPageHideEventListener:()=>M.Fc,addPageShowEventListener:()=>M.oS,addPageUnloadEventListener:()=>M.ee,areCookiesSupported:()=>j.gi,arrForEach:()=>a.Iuo,arrIndexOf:()=>a.rDm,arrMap:()=>a.W$7,arrReduce:()=>a.KTd,attachEvent:()=>M.Q3,blockDynamicConversion:()=>V.V9,convertAllHeadersToMap:()=>O.IL,cookieAvailable:()=>j.gi,createCookieMgr:()=>j.xN,createDynamicConfig:()=>s.e,createEnumStyle:()=>v.H,createGuid:()=>h.gj,createProcessTelemetryContext:()=>T.i8,createTraceParent:()=>L.wk,createUniqueNamespace:()=>R.Z,createUnloadHandlerContainer:()=>F.P,dateNow:()=>a.f0d,detachEvent:()=>M.Ym,disallowsSameSiteNone:()=>j.It,doPerf:()=>o.r2,dumpObj:()=>a.mmD,eventOff:()=>M.ML,eventOn:()=>M.mB,extend:()=>h.X$,findW3cTraceParent:()=>L.ef,forceDynamicConversion:()=>V.Hf,formatErrorMessageXdr:()=>O.HU,formatErrorMessageXhr:()=>O.r4,formatTraceParent:()=>L.L0,generateW3CId:()=>N.cL,getCommonSchemaMetaData:()=>h.Go,getConsole:()=>x.U5,getCookieValue:()=>h.UM,getCrypto:()=>x.MY,getDocument:()=>a.YEm,getDynamicConfigHandler:()=>V.QA,getExceptionName:()=>O.lL,getFieldValueType:()=>h.cq,getGlobal:()=>a.mS$,getGlobalInst:()=>a.zS2,getHistory:()=>a.JKf,getIEVersion:()=>x.L0,getISOString:()=>O._u,getJSON:()=>x.hm,getLocation:()=>x.g$,getMsCrypto:()=>x.iN,getNavigator:()=>a.w3n,getPerformance:()=>a.FJj,getResponseText:()=>O.Lo,getSetValue:()=>O.c2,getTenantId:()=>h.EO,getTime:()=>h.WB,getWindow:()=>a.zkX,hasDocument:()=>a.Wtk,hasHistory:()=>a.twz,hasJSON:()=>x.Z,hasNavigator:()=>a.w9M,hasOwnProperty:()=>a.v0u,hasWindow:()=>a.Vdv,isArray:()=>a.cyL,isArrayValid:()=>h.wJ,isBeaconsSupported:()=>x.Uf,isBoolean:()=>a.Lmq,isChromium:()=>h.F2,isDate:()=>a.$PY,isDocumentObjectAvailable:()=>h.g8,isError:()=>a.bJ7,isFetchSupported:()=>x.R7,isFunction:()=>a.Tnt,isGreaterThanZero:()=>h.ei,isIE:()=>x.lT,isLatency:()=>h.Hh,isNotTruthy:()=>a.woc,isNullOrUndefined:()=>a.hXl,isNumber:()=>a.EtT,isObject:()=>a.Gvm,isReactNative:()=>x.lV,isSampledFlag:()=>L.N7,isString:()=>a.KgX,isTruthy:()=>a.zzB,isTypeof:()=>a.Edw,isUint8ArrayAvailable:()=>h.h3,isUndefined:()=>a.b07,isValidSpanId:()=>L.wN,isValidTraceId:()=>L.hX,isValidTraceParent:()=>L.mJ,isValueAssigned:()=>h.yD,isValueKind:()=>h.m0,isWindowObjectAvailable:()=>h.P$,isXhrSupported:()=>x.xk,mergeEvtNamespace:()=>M.Hm,newGuid:()=>N.aq,newId:()=>A.Si,normalizeJsName:()=>O.cH,objDefineAccessors:()=>a.raO,objForEachKey:()=>a.zav,objFreeze:()=>a.N6t,objKeys:()=>a.cGk,objSeal:()=>a.jsL,onConfigChange:()=>s.a,openXhr:()=>h.H$,optimizeObject:()=>O.hW,parseResponse:()=>H.x,parseTraceParent:()=>L.ZI,perfNow:()=>a.UUD,prependTransports:()=>O.jL,proxyAssign:()=>O.qz,proxyFunctionAs:()=>O.RF,proxyFunctions:()=>O.o$,random32:()=>A.VN,randomValue:()=>A.Z1,removeEventHandler:()=>M.zh,removeEventListeners:()=>M.Wg,removePageHideEventListener:()=>M.sq,removePageShowEventListener:()=>M.vF,removePageUnloadEventListener:()=>M.Ds,safeGetCookieMgr:()=>j.um,safeGetLogger:()=>c.y0,sanitizeProperty:()=>h.TC,setEnableEnvMocks:()=>x.cU,setProcessTelemetryTimings:()=>h.u9,setValue:()=>O.KY,strContains:()=>O.Ju,strEndsWith:()=>a.Cv9,strFunction:()=>D.hW,strObject:()=>D._1,strPrototype:()=>D.vR,strStartsWith:()=>a.tGl,strTrim:()=>a.EHq,strUndefined:()=>D.bA,throwError:()=>a.$8,toISOString:()=>O._u,useXDomainRequest:()=>x.PV});var r=n(659),i=n(8279),a=n(269),o=n(8156),s=n(9749),c=n(3775),l=n(2774),u=n(937),h=n(4822),d=n(1739),f=(0,a.ZHX)({endpointUrl:u.S,propertyStorageOverride:{isVal:function(e){return!e||e.getProperty&&e.setProperty||(0,a.$8)("Invalid property storage override passed."),!0}}}),p=function(e){function t(){var n=e.call(this)||this;return(0,i.A)(t,n,(function(e,t){e[d.mE]=function(n,r,i,l){(0,o.r2)(e,(function(){return"AppInsightsCore.initialize"}),(function(){try{t[d.mE]((0,s.e)(n,f,i||e[d.Uw],!1).cfg,r,i,l)}catch(t){var o=e[d.Uw],u=(0,a.mmD)(t);-1!==u[d.Sj]("channels")&&(u+="\n - Channels must be provided through config.channels only!"),(0,c.ZP)(o,1,514,"SDK Initialization Failed - no telemetry will be sent: "+u)}}),(function(){return{config:n,extensions:r,logger:i,notificationManager:l}}))},e.track=function(n){(0,o.r2)(e,(function(){return"AppInsightsCore.track"}),(function(){var r=n;if(r){r[d.dg]=r[d.dg]||{},r[d.dg].trackStart=(0,h.WB)(),(0,h.Hh)(r.latency)||(r.latency=1);var i=r.ext=r.ext||{};i.sdk=i.sdk||{},i.sdk.ver=h.xE;var a=r.baseData=r.baseData||{};a[u._0]=a[u._0]||{};var o=a[u._0];o[u.hj]=o[u.hj]||e.pluginVersionString||u.m5}t.track(r)}),(function(){return{item:n}}),!n.sync)},e[d.h4]=function(e){return t[d.h4](e||"InternalLog")}})),n}return(0,r.qU)(t,e),t.__ieDyn=1,t}(l._),v=n(4282),m=(0,v.H)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,Pii_IPv6ScrubLastHextets:14,Pii_DropValue:15,CustomerContent_GenericContent:32}),g=(0,v.H)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),y=(0,v.H)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),E=(0,v.H)({Normal:1,Critical:2}),w=(0,v.H)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),P=function(){function e(e){var t=this,n={},r=[],i=[];function o(e,t){var o,s=n[e];if(s&&(o=s[t]),!o&&null!==o){if((0,a.KgX)(e)&&(0,a.KgX)(t))if(i[d.oI]>0){for(var c=0;c<i[d.oI];c++)if(i[c][d.hF](e,t)){o={canHandle:!0,fieldHandler:i[c]};break}}else 0===r[d.oI]&&(o={canHandle:!0});if(!o&&null!==o)for(o=null,c=0;c<r[d.oI];c++)if(r[c][d.hF](e,t)){o={canHandle:!0,handler:r[c],fieldHandler:null};break}s||(s=n[e]={}),s[t]=o}return o}function s(e,t,n,r,i,o){if(e.handler)return e.handler.property(t,n,i,o);if(!(0,a.hXl)(i[d.QV])){if(4096==(4096&r)||!(0,h.m0)(i[d.QV]))return null;i[d.pF]=i[d.pF].toString()}return l(e.fieldHandler,t,n,r,i)}function c(e,t,n){return(0,h.yD)(n)?{value:n}:null}function l(e,n,r,i,o){if(o&&e){var s=e.getSanitizer(n,r,i,o[d.QV],o.propertyType);if(s)if(4===i){var u={},f=o[d.pF];(0,a.zav)(f,(function(t,i){var a=n+"."+r;if((0,h.yD)(i)){var o=c(0,0,i);(o=l(e,a,t,(0,h.cq)(i),o))&&(u[t]=o[d.pF])}})),o[d.pF]=u}else{var p={path:n,name:r,type:i,prop:o,sanitizer:t};o=s.call(t,p)}}return o}e&&i.push(e),t.clearCache=function(){n={}},t.addSanitizer=function(e){e&&((0,a.Nq2)(r,e)||r.push(e),n={})},t.addFieldSanitizer=function(e){e&&((0,a.Nq2)(i,e)||i.push(e),n={})},t[d.Rl]=function(e){if(e){var t=(0,a.rDm)(r,e);-1!==t&&(r.splice(t,1),n={}),(0,a.Iuo)(r,(function(t){t&&t[d.Rl]&&t[d.Rl](e)}))}},t[d.Mr]=function(e){if(e){var t=(0,a.rDm)(i,e);-1!==t&&(i.splice(t,1),n={}),(0,a.Iuo)(r,(function(t){t&&t[d.Mr]&&t[d.Mr](e)}))}},t.isEmpty=function(){return(0,a.R3R)(r)+(0,a.R3R)(i)===0},t[d.hF]=function(e,t){var n=o(e,t);return!!n&&n[d.nw]},t[d.pF]=function(e,t,n,r){var i=o(e,t);if(i&&i[d.nw]){if(!i||!i[d.nw])return null;if(i.handler)return i.handler[d.pF](e,t,n,r);if(!(0,a.KgX)(t)||(0,a.hXl)(n)||n===u.m5)return null;var l=null,f=(0,h.cq)(n);if(8192==(8192&f)){var p=-8193&f;if(l=n,!(0,h.yD)(l[d.pF])||1!==p&&2!==p&&3!==p&&4096!=(4096&p))return null}else 1===f||2===f||3===f||4096==(4096&f)?l=c(0,0,n):4===f&&(l=c(0,0,r?JSON.stringify(n):n));if(l)return s(i,e,t,f,l,r)}return null},t.property=function(e,t,n,r){var i=o(e,t);if(!i||!i[d.nw])return null;if(!(0,a.KgX)(t)||(0,a.hXl)(n)||!(0,h.yD)(n[d.pF]))return null;var c=(0,h.cq)(n[d.pF]);return 0===c?null:s(i,e,t,c,n,r)}}return e.getFieldType=h.cq,e}(),_=100,b=(0,v.H)({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3}),S=n(1356),C=n(8257),T=n(2317),I=n(3662),k=n(4875),M=n(6149),O=n(3673),N=n(9882),A=n(6535),x=n(7292),D=n(5664),j=n(5034),R=n(4276),F=n(836),L=n(1864),V=n(9147),$=n(856),H=n(1190),W=n(8969)},937:(e,t,n)=>{"use strict";n.d(t,{S:()=>i,_0:()=>o,hj:()=>a,m5:()=>r});var r="",i="https://browser.events.data.microsoft.com/OneCollector/1.0/",a="version",o="properties"},4822:(e,t,n)=>{"use strict";n.d(t,{EO:()=>P,F2:()=>D,Go:()=>C,H$:()=>j,Hh:()=>b,P$:()=>E,Rx:()=>u,TC:()=>S,UM:()=>T,WB:()=>M,X$:()=>k,cq:()=>x,ei:()=>R,g8:()=>y,gj:()=>I,h3:()=>_,m0:()=>O,u9:()=>A,wJ:()=>N,xE:()=>h,yD:()=>w});var r,i=n(269),a=n(7292),o=n(9882),s=n(5664),c=n(937),l=n(1739),u="4.3.4",h="1DS-Web-JS-"+u,d=s.Wy.hasOwnProperty,f="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",p="withCredentials",v="timeout",m=((r={})[0]=0,r[2]=6,r[1]=1,r[3]=7,r[4098]=6,r[4097]=1,r[4099]=7,r),g=null,y=(0,i.Wtk)(),E=(0,i.Vdv)();function w(e){return!(e===c.m5||(0,i.hXl)(e))}function P(e){if(e){var t=(0,i.HzD)(e,"-");if(t>-1)return(0,i.ZWZ)(e,t)}return c.m5}function _(){return null===g&&(g=!(0,i.b07)(Uint8Array)&&!function(){var e=(0,i.w3n)();if(!(0,i.b07)(e)&&e.userAgent){var t=e.userAgent.toLowerCase();if((t[l.Sj]("safari")>=0||t[l.Sj]("firefox")>=0)&&t[l.Sj]("chrome")<0)return!0}return!1}()&&!(0,a.lV)()),g}function b(e){return!!(e&&(0,i.EtT)(e)&&e>=1&&e<=4)}function S(e,t,n){if(!t&&!w(t)||"string"!=typeof e)return null;var r=typeof t;if("string"===r||"number"===r||"boolean"===r||(0,i.cyL)(t))t={value:t};else if("object"!==r||d.call(t,"value")){if((0,i.hXl)(t[l.pF])||t[l.pF]===c.m5||!(0,i.KgX)(t[l.pF])&&!(0,i.EtT)(t[l.pF])&&!(0,i.Lmq)(t[l.pF])&&!(0,i.cyL)(t[l.pF]))return null}else t={value:n?JSON.stringify(t):t};if((0,i.cyL)(t[l.pF])&&!N(t[l.pF]))return null;if(!(0,i.hXl)(t[l.QV])){if((0,i.cyL)(t[l.pF])||!O(t[l.QV]))return null;t[l.pF]=t[l.pF].toString()}return t}function C(e,t,n){var r=-1;if(!(0,i.b07)(e))if(t>0&&(32===t?r=8192:t<=13&&(r=t<<5)),function(e){return e>=0&&e<=9}(n))-1===r&&(r=0),r|=n;else{var a=m[x(e)]||-1;-1!==r&&-1!==a?r|=a:6===a&&(r=a)}return r}function T(e,t,n){var r;return void 0===n&&(n=!0),e&&(r=e.get(t),n&&r&&decodeURIComponent&&(r=decodeURIComponent(r))),r||c.m5}function I(e){void 0===e&&(e="D");var t=(0,o.aq)();return"B"===e?t="{"+t+"}":"P"===e?t="("+t+")":"N"===e&&(t=t.replace(/-/g,c.m5)),t}function k(e,t,n,r,a){var o={},s=!1,c=0,u=arguments[l.oI],h=arguments;for((0,i.Lmq)(h[0])&&(s=h[0],c++);c<u;c++)e=h[c],(0,i.zav)(e,(function(e,t){s&&t&&(0,i.Gvm)(t)?(0,i.cyL)(t)?(o[e]=o[e]||[],(0,i.Iuo)(t,(function(t,n){t&&(0,i.Gvm)(t)?o[e][n]=k(!0,o[e][n],t):o[e][n]=t}))):o[e]=k(!0,o[e],t):o[e]=t}));return o}var M=i.UUD;function O(e){return 0===e||e>0&&e<=13||32===e}function N(e){return e[l.oI]>0}function A(e,t){var n=e;n[l.dg]=n[l.dg]||{},n[l.dg][l.Jg]=n[l.dg][l.Jg]||{},n[l.dg][l.Jg][t]=M()}function x(e){var t=0;if(null!=e){var n=typeof e;"string"===n?t=1:"number"===n?t=2:"boolean"===n?t=3:n===s._1&&(t=4,(0,i.cyL)(e)?(t=4096,e[l.oI]>0&&(t|=x(e[0]))):d.call(e,"value")&&(t=8192|x(e[l.pF])))}return t}function D(){return!!(0,i.zS2)("chrome")}function j(e,t,n,r,i,a){function o(e,t,n){try{e[t]=n}catch(e){}}void 0===r&&(r=!1),void 0===i&&(i=!1);var s=new XMLHttpRequest;return r&&o(s,f,r),n&&o(s,p,n),s.open(e,t,!i),n&&o(s,p,n),!i&&a&&o(s,v,a),s}function R(e){return e>0}},1739:(e,t,n)=>{"use strict";n.d(t,{Jg:()=>h,Mr:()=>p,QV:()=>l,Rl:()=>f,Sj:()=>a,Uw:()=>i,dg:()=>o,h4:()=>s,hF:()=>d,mE:()=>r,nw:()=>v,oI:()=>u,pF:()=>c});var r="initialize",i="logger",a="indexOf",o="timings",s="pollInternalLogs",c="value",l="kind",u="length",h="processTelemetryStart",d="handleField",f="rmSanitizer",p="rmFieldSanitizer",v="canHandle"},8916:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BE_PROFILE:()=>a,NRT_PROFILE:()=>i,PostChannel:()=>Pt,RT_PROFILE:()=>r});var r="REAL_TIME",i="NEAR_REAL_TIME",a="BEST_EFFORT",o=n(659),s=n(8279),c=n(4822),l=n(269),u=n(8156),h=n(6149),d=n(4276),f=n(9749),p=n(2317),v=n(3673),m=n(3662),g=n(3775),y=n(8257),E=n(8205),w="",P="drop",_="requeue",b="no-cache, no-store",S="application/x-json-stream",C="cache-control",T="content-type",I="client-version",k="client-id",M="time-delta-to-apply-millis",O="upload-time",N="apikey",A="AuthMsaDeviceTicket",x="WebAuthToken",D="AuthXToken",j="msfpc",R="trace",F="user",L="allowRequestSending",V="firstRequestSent",$="shouldAddClockSkewHeaders",H="getClockSkewHeaderValue",W="setClockSkew",B="length",U="concat",K="iKey",Y="count",q="events",z="push",G="split",X="splice",Q="toLowerCase",J="hdrs",Z="useHdrs",ee="initialize",te="setTimeoutOverride",ne="clearTimeoutOverride",re="overrideEndpointUrl",ie="avoidOptions",ae="enableCompoundKey",oe="disableXhrSync",se="disableFetchKeepAlive",ce="useSendBeacon",le="fetchCredentials",ue="alwaysUseXhrOverride",he="serializeOfflineEvt",de="getOfflineRequestDetails",fe="createPayload",pe="createOneDSPayload",ve="payloadBlob",me="headers",ge="_thePayload",ye="urlString",Ee="batches",we="sendType",Pe="addHeader",_e="canSendRequest",be="sendQueuedRequests",Se="isCompletelyIdle",Ce="setUnloading",Te="resume",Ie="sendSynchronousBatch",ke="_transport",Me="getWParam",Oe="isBeacon",Ne="timings",Ae="isTeardown",xe="isSync",De="data",je="_sendReason",Re="setKillSwitchTenants",Fe="_backOffTransmission",Le="identifier",Ve="eventsLimitInMem",$e="autoFlushEventsLimit",He="baseData",We="sendAttempt",Be="latency",Ue="sync";function Ke(e){var t=(e.ext||{}).intweb;return t&&(0,c.yD)(t[j])?t[j]:null}function Ye(e){for(var t=null,n=0;null===t&&n<e[B];n++)t=Ke(e[n]);return t}var qe=function(){function e(t,n){var r=n?[][U](n):[],i=this,a=Ye(r);i[K]=function(){return t},i.Msfpc=function(){return a||w},i[Y]=function(){return r[B]},i[q]=function(){return r},i.addEvent=function(e){return!!e&&(r[z](e),a||(a=Ke(e)),!0)},i[G]=function(n,i){var o;if(n<r[B]){var s=r[B]-n;(0,l.hXl)(i)||(s=i<s?i:s),o=r[X](n,s),a=Ye(r)}return new e(t,o)}}return e.create=function(t,n){return new e(t,n)},e}(),ze=n(7292),Ge=n(856),Xe=n(5664),Qe=function(){function e(){var t=!0,n=!0,r=!0,i="use-collector-delta",a=!1;(0,s.A)(e,this,(function(e){e[L]=function(){return t},e[V]=function(){r&&(r=!1,a||(t=!1))},e[$]=function(){return n},e[H]=function(){return i},e[W]=function(e){a||(e?(i=e,n=!0,a=!0):n=!1,t=!0)}}))}return e.__ieDyn=1,e}(),Je=function(){function e(){var t={};(0,s.A)(e,this,(function(e){e[Re]=function(e,n){if(e&&n)try{var r=(o=e[G](","),s=[],o&&(0,l.Iuo)(o,(function(e){s[z]((0,l.EHq)(e))})),s);if("this-request-only"===n)return r;for(var i=1e3*parseInt(n,10),a=0;a<r[B];++a)t[r[a]]=(0,l.f0d)()+i}catch(e){return[]}var o,s;return[]},e.isTenantKilled=function(e){var n=t,r=(0,l.EHq)(e);return void 0!==n[r]&&n[r]>(0,l.f0d)()||(delete n[r],!1)}}))}return e.__ieDyn=1,e}();function Ze(e){var t,n=Math.floor(1200*Math.random())+2400;return t=Math.pow(2,e)*n,Math.min(t,6e5)}var et,tt=2e6,nt=Math.min(tt,65e3),rt="metadata",it="f",at=/\./,ot=function(){function e(t,n,r,i,a,o){var h="data",d="baseData",f=!!i,p=n,v={},m=!!o,g=a||c.Go;(0,s.A)(e,this,(function(e){function n(e,t,i,a,o,s,u){(0,l.zav)(e,(function(e,h){var d=null;if(h||(0,c.yD)(h)){var m=i,g=e,y=o,E=t;if(f&&!a&&at.test(e)){var w=e.split("."),P=w.length;if(P>1){y&&(y=y.slice());for(var _=0;_<P-1;_++){var b=w[_];E=E[b]=E[b]||{},m+="."+b,y&&y.push(b)}g=w[P-1]}}var S=a&&function(e,t){var n=v[e];return void 0===n&&(e.length>=7&&(n=(0,l.tGl)(e,"ext.metadata")||(0,l.tGl)(e,"ext.web")),v[e]=n),n}(m);if(d=!S&&p&&p.handleField(m,g)?p.value(m,g,h,r):(0,c.TC)(g,h,r)){var C=d.value;if(E[g]=C,s&&s(y,g,d),u&&"object"==typeof C&&!(0,l.cyL)(C)){var T=y;T&&(T=T.slice()).push(g),n(h,C,m+"."+g,a,T,s,u)}}}}))}e.createPayload=function(e,t,n,r,i,a){return{apiKeys:[],payloadBlob:w,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:e,isTeardown:t,isSync:n,isBeacon:r,sendType:a,sendReason:i}},e.appendPayload=function(n,r,i){var a=n&&r&&!n.overflow;return a&&(0,u.r2)(t,(function(){return"Serializer:appendPayload"}),(function(){for(var t=r.events(),a=n.payloadBlob,o=n.numEvents,s=!1,c=[],u=[],h=n.isBeacon,d=h?65e3:3984588,f=h?nt:tt,p=0,v=0;p<t.length;){var m=t[p];if(m){if(o>=i){n.overflow=r.split(p);break}var g=e.getEventBlob(m);if(g&&g.length<=f){var y=g.length;if(a.length+y>d){n.overflow=r.split(p);break}a&&(a+="\n"),a+=g,++v>20&&((0,l.hKY)(a,0,1),v=0),s=!0,o++}else g?c.push(m):u.push(m),t.splice(p,1),p--}p++}if(c.length>0&&n.sizeExceed.push(qe.create(r.iKey(),c)),u.length>0&&n.failedEvts.push(qe.create(r.iKey(),u)),s){n.batches.push(r),n.payloadBlob=a,n.numEvents=o;var E=r.iKey();-1===(0,l.rDm)(n.apiKeys,E)&&n.apiKeys.push(E)}}),(function(){return{payload:n,theBatch:{iKey:r.iKey(),evts:r.events()},max:i}})),a},e.getEventBlob=function(e){try{return(0,u.r2)(t,(function(){return"Serializer.getEventBlob"}),(function(){var t={};t.name=e.name,t.time=e.time,t.ver=e.ver,t.iKey="o:"+(0,c.EO)(e.iKey);var r,i={};m||(r=function(e,t,n){!function(e,t,n,r,i){if(i&&t){var a=e(i.value,i.kind,i.propertyType);if(a>-1){var o=t[rt];o||(o=t[rt]={f:{}});var s=o[it];if(s||(s=o[it]={}),n)for(var c=0;c<n.length;c++){var u=n[c];s[u]||(s[u]={f:{}});var h=s[u][it];h||(h=s[u][it]={}),s=h}s=s[r]={},(0,l.cyL)(i.value)?s.a={t:a}:s.t=a}}}(g,i,e,t,n)});var a=e.ext;a&&(t.ext=i,(0,l.zav)(a,(function(e,t){n(t,i[e]={},"ext."+e,!0,null,null,!0)})));var o=t[h]={};o.baseType=e.baseType;var s=o[d]={};return n(e.baseData,s,d,!1,[d],r,!0),n(e.data,o,h,!1,[],r,!0),JSON.stringify(t)}),(function(){return{item:e}}))}catch(e){return null}}}))}return e.__ieDyn=1,e}();function st(e,t){return{set:function(n,r){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];return(0,l.vKV)([e,t],n,r,i)}}}var ct="sendAttempt",lt="?cors=true&"+T[Q]()+"="+S,ut=((et={})[1]=_,et[100]=_,et[200]="sent",et[8004]=P,et[8003]=P,et),ht={},dt={};function ft(e,t,n){ht[e]=t,!1!==n&&(dt[t]=e)}function pt(e,t){var n=!1;if(e&&t){var r=(0,l.cGk)(e);if(r&&r[B]>0)for(var i=t[Q](),a=0;a<r[B];a++){var o=r[a];if(o&&(0,l.v0u)(t,o)&&o[Q]()===i){n=!0;break}}}return n}function vt(e,t,n,r){t&&n&&n[B]>0&&(r&&ht[t]?(e[J][ht[t]]=n,e[Z]=!0):e.url+="&"+t+"="+n)}ft(A,A,!1),ft(I,I),ft(k,"Client-Id"),ft(N,N),ft(M,M),ft(O,O),ft(D,D);var mt=function(){function e(t,n,r,i){var a,o,h,d,p,m,y,E,_,A,x,D,R,F,Q,Le,Ve,$e,He,We,Be,Ue,Ke,Ye,et,tt,nt,rt,it,at,ht,ft,mt=!1;(0,s.A)(e,this,(function(e){function s(e,t){try{return ht&&ht.getSenderInst(e,t)}catch(e){}return null}function gt(){try{return{enableSendPromise:!1,isOneDs:!0,disableCredentials:!1,fetchCredentials:ft,disableXhr:!1,disableBeacon:!mt,disableBeaconSync:!mt,disableFetchKeepAlive:Be,timeWrapper:it,addNoResponse:Ke,senderOnCompleteCallBack:{xdrOnComplete:yt,fetchOnComplete:Et,xhrOnComplete:wt,beaconOnRetry:_t}}}catch(e){}return null}function yt(e,t,n){var r=(0,v.Lo)(e);Pt(t,200,{},r),Dt(r)}function Et(e,t,n,r){var i={},a=e[me];a&&a.forEach((function(e,t){i[t]=e})),function(e,n,r){Pt(t,e,n,r),Dt(r)}(e.status,i,n||w)}function wt(e,t,n){var r=(0,v.Lo)(e);Pt(t,e.status,(0,v.w3)(e,!0),r),Dt(r)}function Pt(e,t,n,r){try{e(t,n,r)}catch(e){(0,g.ZP)(y,2,518,(0,l.mmD)(e))}}function _t(e,t,n){var r=200,i=e[ge],a=e[ye]+(Ke?"&NoResponseBody=true":w);try{var o=(0,l.w3n)();if(i){var s=!!_.getPlugin("LocalStorage"),c=[],u=[];(0,l.Iuo)(i[Ee],(function(e){if(c&&e&&e[Y]()>0)for(var t=e[q](),n=0;n<t[B];n++){if(!o.sendBeacon(a,F.getEventBlob(t[n]))){c[z](e[G](n));break}u[z](e[n])}else c[z](e[G](0))})),u[B]>0&&(i.sentEvts=u),s||jt(c,8003,i[we],!0)}else r=0}catch(e){(0,g.OG)(y,"Failed to send telemetry using sendBeacon API. Ex:"+(0,l.mmD)(e)),r=0}finally{Pt(t,r,{},w)}}function bt(e){return 2===e||3===e}function St(e){return Ve&&bt(e)&&(e=2),e}function Ct(){return!h&&p<n}function Tt(){var e=R;return R=[],e}function It(e,t,n){var r=!1;return e&&e[B]>0&&!h&&E[t]&&F&&(r=0!==t||Ct()&&(n>0||d[L]())),r}function kt(e){var t={};return e&&(0,l.Iuo)(e,(function(e,n){t[n]={iKey:e[K](),evts:e[q]()}})),t}function Mt(e,n,r,i,a){if(e&&0!==e[B])if(h)jt(e,1,i);else{i=St(i);try{var s=e,d=0!==i;(0,u.r2)(_,(function(){return"HttpManager:_sendBatches"}),(function(s){s&&(e=e.slice(0));for(var l=[],u=null,h=(0,c.WB)(),f=E[i]||(d?E[1]:E[0]),p=f&&f[ke],v=Ue&&(Ve||bt(i)||3===p||f._isSync&&2===p);It(e,i,n);){var m=e.shift();m&&m[Y]()>0&&(o.isTenantKilled(m[K]())?l[z](m):(u=u||F[fe](n,r,d,v,a,i),F.appendPayload(u,m,t)?null!==u.overflow&&(e=[u.overflow][U](e),u.overflow=null,At(u,h,(0,c.WB)(),a),h=(0,c.WB)(),u=null):(At(u,h,(0,c.WB)(),a),h=(0,c.WB)(),e=[m][U](e),u=null)))}u&&At(u,h,(0,c.WB)(),a),e[B]>0&&(R=e[U](R)),jt(l,8004,i)}),(function(){return{batches:kt(s),retryCount:n,isTeardown:r,isSynchronous:d,sendReason:a,useSendBeacon:bt(i),sendType:i}}),!d)}catch(e){(0,g.ZP)(y,2,48,"Unexpected Exception sending batch: "+(0,l.mmD)(e))}}}function Ot(e,t){var n={url:a,hdrs:{},useHdrs:!1};t?(n[J]=(0,c.X$)(n[J],D),n.useHdrs=(0,l.cGk)(n.hdrs)[B]>0):(0,l.zav)(D,(function(e,t){dt[e]?vt(n,dt[e],t,!1):(n[J][e]=t,n[Z]=!0)})),vt(n,k,"NO_AUTH",t),vt(n,I,c.xE,t);var r=w;(0,l.Iuo)(e.apiKeys,(function(e){r[B]>0&&(r+=","),r+=e})),vt(n,N,r,t),vt(n,O,(0,l.f0d)().toString(),t);var i=function(e){for(var t=0;t<e.batches[B];t++){var n=e[Ee][t].Msfpc();if(n)return encodeURIComponent(n)}return w}(e);if((0,c.yD)(i)&&(n.url+="&ext.intweb.msfpc="+i),d[$]()&&vt(n,M,d[H](),t),_[Me]){var o=_[Me]();o>=0&&(n.url+="&w="+o)}for(var s=0;s<x[B];s++)n.url+="&"+x[s].name+"="+x[s].value;return n}function Nt(e,t,n){e[t]=e[t]||{},e[t][m.identifier]=n}function At(t,n,i,a){if(t&&t.payloadBlob&&t.payloadBlob[B]>0){var s=!!et,h=E[t.sendType];!bt(t[we])&&t[Oe]&&2===t.sendReason&&(h=E[2]||E[3]||h);var f=$e;(t.isBeacon||3===h[ke])&&(f=!1);var v=Ot(t,f);f=f||v[Z];var w=(0,c.WB)();(0,u.r2)(_,(function(){return"HttpManager:_doPayloadSend"}),(function(){for(var E=0;E<t.batches[B];E++)for(var P=t[Ee][E][q](),I=0;I<P[B];I++){var k=P[I];if(Q){var M=k[Ne]=k[Ne]||{};Nt(M,"sendEventStart",w),Nt(M,"serializationStart",n),Nt(M,"serializationCompleted",i)}k[ct]>0?k[ct]++:k[ct]=1}jt(t[Ee],1e3+(a||0),t[we],!0);var O={data:t[ve],urlString:v.url,headers:v[J],_thePayload:t,_sendReason:a,timeout:He,disableXhrSync:We,disableFetchKeepAlive:Be};f&&(pt(O[me],C)||(O[me][C]=b),pt(O[me],T)||(O[me][T]=S));var N=null;h&&(N=function(n){d[V]();var i=function(n,i){!function(t,n,i,a){var s,u=9e3,h=null,f=!1,v=!1;try{var g=!0;if(typeof t!==Xe.bA){if(n){d[W](n["time-delta-millis"]);var y=n["kill-duration"]||n["kill-duration-seconds"];(0,l.Iuo)(o[Re](n["kill-tokens"],y),(function(e){(0,l.Iuo)(i[Ee],(function(t){if(t[K]()===e){h=h||[];var n=t[G](0);i.numEvents-=n[Y](),h[z](n)}}))}))}if(200==t||204==t)return void(u=200);((s=t)>=300&&s<500&&429!=s||501==s||505==s||i.numEvents<=0)&&(g=!1),u=9e3+t%1e3}if(g){u=100;var E=i.retryCnt;0===i[we]&&(E<r?(f=!0,xt((function(){0===i[we]&&p--,Mt(i[Ee],E+1,i[Ae],Ve?2:i[we],5)}),Ve,Ze(E))):(v=!0,Ve&&(u=8001)))}}finally{f||(d[W](),function(t,n,r,i){try{i&&m[Fe]();var a=t[Ee];200===n&&(a=t.sentEvts||t[Ee],i||t[xe]||m._clearBackOff(),function(e){if(Q){var t=(0,c.WB)();(0,l.Iuo)(e,(function(e){e&&e[Y]()>0&&function(e,t){Q&&(0,l.Iuo)(e,(function(e){Nt(e[Ne]=e[Ne]||{},"sendEventCompleted",t)}))}(e[q](),t)}))}}(a)),jt(a,n,t[we],!0)}finally{0===t[we]&&(p--,5!==r&&e.sendQueuedRequests(t[we],r))}}(i,u,a,v)),jt(h,8004,i[we])}}(n,i,t,a)},s=t[Ae]||t[xe];try{h.sendPOST(n,i,s),tt&&tt(O,n,s,t[Oe])}catch(e){(0,g.OG)(y,"Unexpected exception sending payload. Ex:"+(0,l.mmD)(e)),Pt(i,0,{})}}),(0,u.r2)(_,(function(){return"HttpManager:_doPayloadSend.sender"}),(function(){if(N)if(0===t[we]&&p++,s&&!t.isBeacon&&3!==h[ke]){var e={data:O[De],urlString:O[ye],headers:(0,c.X$)({},O[me]),timeout:O.timeout,disableXhrSync:O[oe],disableFetchKeepAlive:O[se]},n=!1;(0,u.r2)(_,(function(){return"HttpManager:_doPayloadSend.sendHook"}),(function(){try{et(e,(function(e){n=!0,A||e[ge]||(e[ge]=e[ge]||O[ge],e[je]=e[je]||O[je]),N(e)}),t.isSync||t[Ae])}catch(e){n||N(O)}}))}else N(O)}))}),(function(){return{thePayload:t,serializationStart:n,serializationCompleted:i,sendReason:a}}),t[xe])}t.sizeExceed&&t.sizeExceed[B]>0&&jt(t.sizeExceed,8003,t[we]),t.failedEvts&&t.failedEvts[B]>0&&jt(t.failedEvts,8002,t[we])}function xt(e,t,n){t?e():it.set(e,n)}function Dt(e){var t=nt;try{for(var n=0;n<t[B];n++)try{t[n](e)}catch(e){(0,g.ZP)(y,1,519,"Response handler failed: "+e)}if(e){var r=JSON.parse(e);(0,c.yD)(r.webResult)&&(0,c.yD)(r.webResult[j])&&Le.set("MSFPC",r.webResult[j],31536e3)}}catch(e){}}function jt(e,t,n,r){if(e&&e[B]>0&&i){var a=i[(s=t,l=ut[s],(0,c.yD)(l)||(l="oth",s>=9e3&&s<=9999?l="rspFail":s>=8e3&&s<=8999?l=P:s>=1e3&&s<=1999&&(l="send")),l)];if(a){var o=0!==n;(0,u.r2)(_,(function(){return"HttpManager:_sendBatchesNotification"}),(function(){xt((function(){try{a.call(i,e,t,o,n)}catch(e){(0,g.ZP)(y,1,74,"send request notification failed: "+e)}}),r||o,0)}),(function(){return{batches:kt(e),reason:t,isSync:o,sendSync:r,sendType:n}}),!o)}}var s,l}!function(){var e;a=null,o=new Je,h=!1,d=new Qe,mt=!1,p=0,m=null,y=null,E=null,_=null,A=!0,x=[],D={},R=[],F=null,Q=!1,Le=null,Ve=!1,$e=!1,He=e,We=e,Be=e,Ue=e,Ke=e,Ye=[],et=e,tt=e,nt=[],rt=!1,it=st(),at=!1,ht=null}(),e[ee]=function(e,t,n){rt||(_=t,Le=t.getCookieMgr(),y=(m=n).diagLog(),(0,l.Yny)(Ye,(0,f.a)(e,(function(e){var r,i=e.cfg,o=e.cfg.extensionConfig[n.identifier];it=st(o[te],o[ne]),(0,c.yD)(i.anonCookieName)?function(e,t,n){for(var r=0;r<e[B];r++)if(e[r].name===t)return void(e[r].value=n);e[z]({name:t,value:n})}(x,"anoncknm",i.anonCookieName):function(e,t){for(var n=0;n<e[B];n++)if("anoncknm"===e[n].name)return void e[X](n,1)}(x),et=o.payloadPreprocessor,tt=o.payloadListener;var u=o.httpXHROverride,h=o[re]?o[re]:i.endpointUrl;a=h+lt,$e=!!(0,l.b07)(o[ie])||!o[ie],Q=!o.disableEventTimings;var d=o.valueSanitizer,f=o.stringifyObjects,p=!!i[ae];(0,l.b07)(o[ae])||(p=!!o[ae]),He=o.xhrTimeout,We=!!o[oe],Be=!!o[se],Ke=!1!==o.addNoResponse,at=!!o.excludeCsMetaData,t.getPlugin("LocalStorage")&&(Be=!0),mt=!(0,ze.lV)(),F=new ot(_,d,f,p,c.Go,at),(0,l.hXl)(o[ce])||(mt=!!o[ce]),o[le]&&(ft=o[le]);var m=gt();ht?ht.SetConfig(m):(ht=new Ge.v)[ee](m,y);var w=u,P=o[ue]?u:null,b=o[ue]?u:null,S=[3,2];if(!u){A=!1;var C=[];(0,ze.lV)()?(C=[2,1],S=[2,1,3]):C=[1,2,3],(u=s(C=(0,v.jL)(C,o.transports),!1))||(0,g.OG)(y,"No available transport to send events"),w=s(C,!0)}P||(P=s(S=(0,v.jL)(S,o.unloadTransports),!0)),Ue=!A&&(mt&&(0,ze.Uf)()||!Be&&(0,ze.R7)(!0)),(r={})[0]=u,r[1]=w||s([1,2,3],!0),r[2]=P||w||s([1],!0),r[3]=b||s([2,3],!0)||w||s([1],!0),E=r}))),rt=!0)},e.addResponseHandler=function(e){return nt[z](e),{rm:function(){var t=nt.indexOf(e);t>=0&&nt[X](t,1)}}},e[he]=function(e){try{if(F)return F.getEventBlob(e)}catch(e){}return w},e[de]=function(){try{return Ot(F&&F[fe](0,!1,!1,!1,1,0),$e)}catch(e){}return null},e[pe]=function(e,n){try{var r=[];(0,l.Iuo)(e,(function(e){n&&(e=(0,v.hW)(e));var t=qe.create(e[K],[e]);r[z](t)}));for(var i=null;r[B]>0&&F;){var a=r.shift();a&&a[Y]()>0&&(i=i||F[fe](0,!1,!1,!1,1,0),F.appendPayload(i,a,t))}var o=Ot(i,$e),s={data:i[ve],urlString:o.url,headers:o[J],timeout:He,disableXhrSync:We,disableFetchKeepAlive:Be};return $e&&(pt(s[me],C)||(s[me][C]=b),pt(s[me],T)||(s[me][T]=S)),s}catch(e){}return null},e._getDbgPlgTargets=function(){return[E[0],o,F,E,gt(),a]},e[Pe]=function(e,t){D[e]=t},e.removeHeader=function(e){delete D[e]},e[_e]=function(){return Ct()&&d[L]()},e[be]=function(e,t){(0,l.b07)(e)&&(e=0),Ve&&(e=St(e),t=2),It(R,e,0)&&Mt(Tt(),0,!1,e,t||0)},e[Se]=function(){return!h&&0===p&&0===R[B]},e[Ce]=function(e){Ve=e},e.addBatch=function(e){if(e&&e[Y]()>0){if(o.isTenantKilled(e[K]()))return!1;R[z](e)}return!0},e.teardown=function(){R[B]>0&&Mt(Tt(),0,!0,2,2),(0,l.Iuo)(Ye,(function(e){e&&e.rm&&e.rm()})),Ye=[]},e.pause=function(){h=!0},e[Te]=function(){h=!1,e[be](0,4)},e[Ie]=function(e,t,n){e&&e[Y]()>0&&((0,l.hXl)(t)&&(t=1),Ve&&(t=St(t),n=2),Mt([e],0,!1,t,n||0))}}))}return e.__ieDyn=1,e}(),gt=1e4,yt="eventsDiscarded",Et=void 0,wt=(0,l.ZHX)({eventsLimitInMem:{isVal:c.ei,v:gt},immediateEventLimit:{isVal:c.ei,v:500},autoFlushEventsLimit:{isVal:c.ei,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:function(e){return e&&e.sendPOST},v:Et},overrideInstrumentationKey:Et,overrideEndpointUrl:Et,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:Et,clearTimeoutOverride:Et,payloadPreprocessor:Et,payloadListener:Et,disableEventTimings:Et,valueSanitizer:Et,stringifyObjects:Et,enableCompoundKey:Et,disableOptimizeObj:!1,fetchCredentials:Et,transports:Et,unloadTransports:Et,useSendBeacon:Et,disableFetchKeepAlive:Et,avoidOptions:!1,xhrTimeout:Et,disableXhrSync:Et,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:l.EtT,v:6},maxUnloadEventRetryAttempts:{isVal:l.EtT,v:2},addNoResponse:Et,excludeCsMetaData:Et}),Pt=function(e){function t(){var n,o=e.call(this)||this;o.identifier="PostChannel",o.priority=1011,o.version="4.3.4";var y,w,P,_,b,S,C,T,I,k,M,O,N,D,j,L,V,$,H,W,Q,J,Z,re,ie,ae=!1,oe=[],se=!1,ce=0,le=0,ue={},fe=r;return(0,s.A)(t,o,(function(e,t){function o(){(0,h.Ds)(null,$),(0,h.sq)(null,$),(0,h.vF)(null,$)}function s(e){var t="";return e&&e[B]&&(0,l.Iuo)(e,(function(e){t&&(t+="\n"),t+=e})),t}function ve(e){var t="";try{ye(e),t=T[he](e)}catch(e){}return t}function me(e){"beforeunload"!==(e||(0,l.zkX)().event).type&&(j=!0,T[Ce](j)),Re(2,2)}function ge(e){j=!1,T[Ce](j)}function ye(e){e.ext&&e.ext[R]&&delete e.ext[R],e.ext&&e.ext[F]&&e.ext[F].id&&delete e.ext[F].id,D&&(e.ext=(0,v.hW)(e.ext),e[He]&&(e[He]=(0,v.hW)(e[He])),e[De]&&(e[De]=(0,v.hW)(e[De])))}function we(e,t){if(e[We]||(e[We]=0),e[Be]||(e[Be]=1),ye(e),e[Ue])if(S||se)e[Be]=3,e[Ue]=!1;else if(T)return D&&(e=(0,v.hW)(e)),void T[Ie](qe.create(e[K],[e]),!0===e[Ue]?1:e[Ue],3);var n=e[Be],r=le,i=P;4===n&&(r=ce,i=w);var a=!1;if(r<i)a=!ze(e,t);else{var o=1,s=20;4===n&&(o=4,s=1),a=!0,function(e,t,n,r){for(;n<=t;){var i=Ke(e,t,!0);if(i&&i[Y]()>0){var a=i[G](0,r),o=a[Y]();if(o>0)return 4===n?ce-=o:le-=o,it(yt,[a],m.x.QueueFull),!0}n++}return Ge(),!1}(e[K],e[Be],o,s)&&(a=!ze(e,t))}a&&rt(yt,[e],m.x.QueueFull)}function ke(e,t,n){var r=Xe(e,t,n);return T[be](t,n),r}function Oe(){return le>0}function Ne(){if(O>=0&&Xe(O,0,N)&&T[be](0,N),ce>0&&!b&&!se){var e=ue[fe][2];e>=0&&(b=xe((function(){b=null,ke(4,0,1),Ne()}),e))}var t=ue[fe][1];!_&&!y&&t>=0&&!se&&(Oe()?_=xe((function(){_=null,ke(0===C?3:1,0,1),C++,C%=2,Ne()}),t):C=0)}function Ae(){n=null,ae=!1,oe=[],y=null,se=!1,ce=0,w=500,le=0,P=gt,ue={},fe=r,_=null,b=null,S=0,C=0,I={},k=0,Z=!1,M=0,O=-1,N=null,D=!0,j=!1,L=6,V=2,$=null,re=null,ie=!1,H=st(),T=new mt(500,2,1,{requeue:tt,send:at,sent:ot,drop:ct,rspFail:lt,oth:ut}),et(),I[4]={batches:[],iKeyMap:{}},I[3]={batches:[],iKeyMap:{}},I[2]={batches:[],iKeyMap:{}},I[1]={batches:[],iKeyMap:{}},ht()}function xe(e,t){0===t&&S&&(t=1);var n=1e3;return S&&(n=Ze(S-1)),H.set(e,t*n)}function je(){return null!==_&&(_.cancel(),_=null,C=0,!0)}function Re(e,t){je(),y&&(y.cancel(),y=null),se||ke(1,e,t)}function Ke(e,t,n){var r=I[t];r||(r=I[t=1]);var i=r.iKeyMap[e];return!i&&n&&(i=qe.create(e),r.batches[z](i),r.iKeyMap[e]=i),i}function Ye(t,n){T[_e]()&&!S&&(k>0&&le>k&&(n=!0),n&&null==y&&e.flush(t,(function(){}),20))}function ze(e,t){D&&(e=(0,v.hW)(e));var n=e[Be],r=Ke(e[K],n,!0);return!!r.addEvent(e)&&(4!==n?(le++,t&&0===e[We]&&Ye(!e.sync,M>0&&r[Y]()>=M)):ce++,!0)}function Ge(){for(var e=0,t=0,n=function(n){var r=I[n];r&&r[Ee]&&(0,l.Iuo)(r[Ee],(function(r){4===n?e+=r[Y]():t+=r[Y]()}))},r=1;r<=4;r++)n(r);le=t,ce=e}function Xe(t,n,r){var i=!1,a=0===n;return!a||T[_e]()?(0,u.r2)(e.core,(function(){return"PostChannel._queueBatches"}),(function(){for(var e=[],n=4;n>=t;){var r=I[n];r&&r.batches&&r.batches[B]>0&&((0,l.Iuo)(r[Ee],(function(t){T.addBatch(t)?i=i||t&&t[Y]()>0:e=e[U](t[q]()),4===n?ce-=t[Y]():le-=t[Y]()})),r[Ee]=[],r.iKeyMap={}),n--}e[B]>0&&rt(yt,e,m.x.KillSwitch),i&&O>=t&&(O=-1,N=0)}),(function(){return{latency:t,sendType:n,sendReason:r}}),!a):(O=O>=0?Math.min(O,t):t,N=Math.max(N,r)),i}function Qe(e,t){ke(1,0,t),Ge(),Je((function(){e&&e(),oe[B]>0?y=xe((function(){y=null,Qe(oe.shift(),t)}),0):(y=null,Ne())}))}function Je(e){T[Se]()?e():y=xe((function(){y=null,Je(e)}),.25)}function et(){(ue={})[r]=[2,1,0],ue[i]=[6,3,0],ue[a]=[18,9,0]}function tt(t,n){var r=[],i=L;j&&(i=V),(0,l.Iuo)(t,(function(t){t&&t[Y]()>0&&(0,l.Iuo)(t[q](),(function(t){t&&(t[Ue]&&(t[Be]=4,t[Ue]=!1),t[We]<i?((0,c.u9)(t,e[Le]),we(t,!1)):r[z](t))}))})),r[B]>0&&rt(yt,r,m.x.NonRetryableStatus),j&&Re(2,2)}function nt(t,n){var r=J||{},i=r[t];if(i)try{i.apply(r,n)}catch(n){(0,g.ZP)(e.diagLog(),1,74,t+" notification failed: "+n)}}function rt(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t&&t[B]>0&&nt(e,[t][U](n))}function it(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t&&t[B]>0&&(0,l.Iuo)(t,(function(t){t&&t[Y]()>0&&nt(e,[t.events()][U](n))}))}function at(e,t,n){e&&e[B]>0&&nt("eventsSendRequest",[t>=1e3&&t<=1999?t-1e3:0,!0!==n])}function ot(e,t){it("eventsSent",e,t),Ne()}function ct(e,t){it(yt,e,t>=8e3&&t<=8999?t-8e3:m.x.Unknown)}function lt(e){it(yt,e,m.x.NonRetryableStatus),Ne()}function ut(e,t){it(yt,e,m.x.Unknown),Ne()}function ht(){M=Q?0:Math.max(1500,P/6)}Ae(),e._getDbgPlgTargets=function(){return[T,n]},e[ee]=function(r,i,a){(0,u.r2)(i,(function(){return"PostChannel:initialize"}),(function(){t[ee](r,i,a),J=i.getNotifyMgr();try{$=(0,h.Hm)((0,d.Z)(e[Le]),i.evtNamespace&&i.evtNamespace()),e._addHook((0,f.a)(r,(function(t){var r=t.cfg,a=(0,p.i8)(null,r,i);n=a.getExtCfg(e[Le],wt),H=st(n[te],n[ne]),D=!n.disableOptimizeObj&&(0,c.F2)(),W=n.ignoreMc1Ms0CookieProcessing,function(e){var t=e[Me];e[Me]=function(){var n=0;return W&&(n|=2),n|t.call(e)}}(i),P=n[Ve],w=n.immediateEventLimit,k=n[$e],L=n.maxEventRetryAttempts,V=n.maxUnloadEventRetryAttempts,Q=n.disableAutoBatchFlushLimit,(0,l.$XS)(r.endpointUrl)?e.pause():se&&e[Te](),ht(),re=n.overrideInstrumentationKey,ie=!!n.disableTelemetry,Z&&o();var s=r.disablePageUnloadEvents||[];Z=(0,h.ee)(me,s,$),Z=(0,h.Fc)(me,s,$)||Z,Z=(0,h.oS)(ge,r.disablePageShowEvents,$)||Z}))),T[ee](r,e.core,e)}catch(t){throw e.setInitialized(!1),t}}),(function(){return{theConfig:r,core:i,extensions:a}}))},e.processTelemetry=function(t,n){(0,c.u9)(t,e[Le]),n=n||e._getTelCtx(n);var r=t;ie||ae||(re&&(r[K]=re),we(r,!0),j?Re(2,2):Ne()),e.processNext(r,n)},e.getOfflineSupport=function(){try{var e=T&&T[de]();if(T)return{getUrl:function(){return e?e.url:null},serialize:ve,batch:s,shouldProcess:function(e){return!ie},createPayload:function(e){return null},createOneDSPayload:function(e){if(T[pe])return T[pe](e,D)}}}catch(e){}return null},e._doTeardown=function(e,t){Re(2,2),ae=!0,T.teardown(),o(),Ae()},e.setEventQueueLimits=function(e,t){n[Ve]=P=(0,c.ei)(e)?e:gt,n[$e]=k=(0,c.ei)(t)?t:0,ht();var r=le>e;if(!r&&M>0)for(var i=1;!r&&i<=3;i++){var a=I[i];a&&a[Ee]&&(0,l.Iuo)(a[Ee],(function(e){e&&e[Y]()>=M&&(r=!0)}))}Ye(!0,r)},e.pause=function(){je(),se=!0,T&&T.pause()},e[Te]=function(){se=!1,T&&T[Te](),Ne()},e._loadTransmitProfiles=function(e){je(),et(),fe=r,Ne(),(0,l.zav)(e,(function(e,t){var n=t[B];if(n>=2){var r=n>2?t[2]:0;if(t[X](0,n-2),t[1]<0&&(t[0]=-1),t[1]>0&&t[0]>0){var i=t[0]/t[1];t[0]=Math.ceil(i)*t[1]}r>=0&&t[1]>=0&&r>t[1]&&(r=t[1]),t[z](r),ue[e]=t}}))},e.flush=function(e,t,n){var r;if(void 0===e&&(e=!0),!se)if(n=n||1,e)t||(r=(0,E.Qo)((function(e){t=e}))),null==y?(je(),Xe(1,0,n),y=xe((function(){y=null,Qe(t,n)}),0)):oe[z](t);else{var i=je();ke(1,1,n),t&&t(),i&&Ne()}return r},e.setMsaAuthTicket=function(e){T[Pe](A,e)},e.setAuthPluginHeader=function(e){T[Pe](x,e)},e.removeAuthPluginHeader=function(){T.removeHeader(x)},e.hasEvents=Oe,e._setTransmitProfile=function(e){fe!==e&&void 0!==ue[e]&&(je(),fe=e,Ne())},(0,v.o$)(e,(function(){return T}),["addResponseHandler"]),e[Fe]=function(){S<4&&(S++,je(),Ne())},e._clearBackOff=function(){S&&(S=0,je(),Ne())}})),o}return(0,o.qU)(t,e),t.__ieDyn=1,t}(y.s)},4484:(e,t,n)=>{"use strict";n.d(t,{F:()=>l,H:()=>c});var r=n(269),i=n(5025),a=n(5130),o=";",s="=";function c(e){if(!e)return{};var t=e[a.sY](o),n=(0,r.KTd)(t,(function(e,t){var n=t[a.sY](s);if(2===n[a.oI]){var r=n[0][a.OL](),i=n[1];e[r]=i}return e}),{});if((0,r.cGk)(n)[a.oI]>0){if(n.endpointsuffix){var c=n.location?n.location+".":"";n[a.zV]=n[a.zV]||"https://"+c+"dc."+n.endpointsuffix}n[a.zV]=n[a.zV]||i._G,(0,r.Cv9)(n[a.zV],"/")&&(n[a.zV]=n[a.zV].slice(0,-1))}return n}var l={parse:c}},5025:(e,t,n)=>{"use strict";n.d(t,{R2:()=>l,_G:()=>s,jp:()=>a,ks:()=>u,tU:()=>i,wc:()=>c,xF:()=>r,ym:()=>o});var r="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",i="sampleRate",a="ProcessLegacy",o="http.method",s="https://dc.services.visualstudio.com",c="/v2/track",l="not_specified",u="iKey"},7374:(e,t,n)=>{"use strict";n.d(t,{eL:()=>i,iD:()=>o,uG:()=>a});var r=n(4282),i=(0,r.H)({LocalStorage:0,SessionStorage:1}),a=(0,r.H)({AI:0,AI_AND_W3C:1,W3C:2}),o=(0,r.H)({Normal:1,Critical:2})},87:(e,t,n)=>{"use strict";n.d(t,{Dt:()=>o,Y8:()=>c,bb:()=>s,vv:()=>l});var r=n(269),i=n(5130),a="";function o(e,t){return void 0===t&&(t=!1),null==e?t:"true"===e.toString()[i.OL]()}function s(e){(isNaN(e)||e<0)&&(e=0),e=Math.round(e);var t=a+e%1e3,n=a+Math.floor(e/1e3)%60,r=a+Math.floor(e/6e4)%60,o=a+Math.floor(e/36e5)%24,s=Math.floor(e/864e5);return t=1===t[i.oI]?"00"+t:2===t[i.oI]?"0"+t:t,n=n[i.oI]<2?"0"+n:n,r=r[i.oI]<2?"0"+r:r,o=o[i.oI]<2?"0"+o:o,(s>0?s+".":a)+o+":"+r+":"+n+"."+t}function c(e,t){var n=null;return(0,r.Iuo)(e,(function(e){if(e.identifier===t)return n=e,-1})),n}function l(e,t,n,i,a){return!a&&(0,r.KgX)(e)&&("Script error."===e||"Script error"===e)}},8596:(e,t,n)=>{"use strict";n.d(t,{o:()=>p});var r=n(659),i=n(3673);function a(e){var t="ai."+e+".";return function(e){return t+e}}var o=a("application"),s=a("device"),c=a("location"),l=a("operation"),u=a("session"),h=a("user"),d=a("cloud"),f=a("internal"),p=function(e){function t(){return e.call(this)||this}return(0,r.qU)(t,e),t}((0,i.SZ)({applicationVersion:o("ver"),applicationBuild:o("build"),applicationTypeId:o("typeId"),applicationId:o("applicationId"),applicationLayer:o("layer"),deviceId:s("id"),deviceIp:s("ip"),deviceLanguage:s("language"),deviceLocale:s("locale"),deviceModel:s("model"),deviceFriendlyName:s("friendlyName"),deviceNetwork:s("network"),deviceNetworkName:s("networkName"),deviceOEMName:s("oemName"),deviceOS:s("os"),deviceOSVersion:s("osVersion"),deviceRoleInstance:s("roleInstance"),deviceRoleName:s("roleName"),deviceScreenResolution:s("screenResolution"),deviceType:s("type"),deviceMachineName:s("machineName"),deviceVMName:s("vmName"),deviceBrowser:s("browser"),deviceBrowserVersion:s("browserVersion"),locationIp:c("ip"),locationCountry:c("country"),locationProvince:c("province"),locationCity:c("city"),operationId:l("id"),operationName:l("name"),operationParentId:l("parentId"),operationRootId:l("rootId"),operationSyntheticSource:l("syntheticSource"),operationCorrelationVector:l("correlationVector"),sessionId:u("id"),sessionIsFirst:u("isFirst"),sessionIsNew:u("isNew"),userAccountAcquisitionDate:h("accountAcquisitionDate"),userAccountId:h("accountId"),userAgent:h("userAgent"),userId:h("id"),userStoreRegion:h("storeRegion"),userAuthUserId:h("authUserId"),userAnonymousUserAcquisitionDate:h("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:h("authUserAcquisitionDate"),cloudName:d("name"),cloudRole:d("role"),cloudRoleVer:d("roleVer"),cloudRoleInstance:d("roleInstance"),cloudEnvironment:d("environment"),cloudLocation:d("location"),cloudDeploymentUnit:d("deploymentUnit"),internalNodeName:f("nodeName"),internalSdkVersion:f("sdkVersion"),internalAgentVersion:f("agentVersion"),internalSnippet:f("snippet"),internalSdkSrc:f("sdkSrc")}))},9762:(e,t,n)=>{"use strict";n.d(t,{O:()=>r});var r=(0,n(4282).H)({Verbose:0,Information:1,Warning:2,Error:3,Critical:4})},1575:(e,t,n)=>{"use strict";n.d(t,{F:()=>i,O:()=>a});var r=n(8596),i={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},a=new r.o},5571:(e,t,n)=>{"use strict";n.d(t,{G:()=>c});var r=n(6149),i=n(269),a=n(4276),o=n(5130);function s(e,t){(0,r.ML)(e,null,null,t)}function c(e){var t=(0,i.YEm)(),n=(0,i.w3n)(),c=!1,l=[],u=1;!n||(0,i.hXl)(n.onLine)||n.onLine||(u=2);var h=0,d=m(),f=(0,r.Hm)((0,a.Z)("OfflineListener"),e);try{if(v((0,i.zkX)())&&(c=!0),t){var p=t.body||t;p.ononline&&v(p)&&(c=!0)}}catch(e){c=!1}function v(e){var t=!1;return e&&(t=(0,r.mB)(e,"online",y,f))&&(0,r.mB)(e,"offline",E,f),t}function m(){return 2!==h&&2!==u}function g(){var e=m();d!==e&&(d=e,(0,i.Iuo)(l,(function(e){var t={isOnline:d,rState:u,uState:h};try{e(t)}catch(e){}})))}function y(){u=1,g()}function E(){u=2,g()}return{isOnline:function(){return d},isListening:function(){return c},unload:function(){var e=(0,i.zkX)();if(e&&c){if(s(e,f),t){var n=t.body||t;(0,i.b07)(n.ononline)||s(n,f)}c=!1}},addListener:function(e){return l[o.y5](e),{rm:function(){var t=l.indexOf(e);return t>-1?l.splice(t,1):void 0}}},setOnlineState:function(e){h=e,g()}}}},2910:(e,t,n)=>{"use strict";n.d(t,{a:()=>r});var r=(0,n(4282).o)({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]})},4658:(e,t,n)=>{"use strict";n.d(t,{AN:()=>P,BW:()=>g,Dt:()=>S,Nu:()=>p,Se:()=>y,T9:()=>_,_M:()=>E,iw:()=>m,tm:()=>w,v7:()=>C,vH:()=>b,vh:()=>v});var r=n(269),i=n(3775),a=n(3673),o=n(7374),s=n(5130),c=void 0,l=void 0,u="";function h(){return g()?d(o.eL.LocalStorage):null}function d(e){try{if((0,r.hXl)((0,r.mS$)()))return null;var t=(new Date)[s.xE](),n=(0,r.zS2)(e===o.eL.LocalStorage?"localStorage":"sessionStorage"),i=u+t;n.setItem(i,t);var a=n.getItem(i)!==t;if(n[s.AZ](i),!a)return n}catch(e){}return null}function f(){return P()?d(o.eL.SessionStorage):null}function p(){c=!1,l=!1}function v(e){u=e||""}function m(){c=g(!0),l=P(!0)}function g(e){return(e||void 0===c)&&(c=!!d(o.eL.LocalStorage)),c}function y(e,t){var n=h();if(null!==n)try{return n.getItem(t)}catch(t){c=!1,(0,i.ZP)(e,2,1,"Browser failed read of local storage. "+(0,a.lL)(t),{exception:(0,r.mmD)(t)})}return null}function E(e,t,n){var o=h();if(null!==o)try{return o.setItem(t,n),!0}catch(t){c=!1,(0,i.ZP)(e,2,3,"Browser failed write to local storage. "+(0,a.lL)(t),{exception:(0,r.mmD)(t)})}return!1}function w(e,t){var n=h();if(null!==n)try{return n[s.AZ](t),!0}catch(t){c=!1,(0,i.ZP)(e,2,5,"Browser failed removal of local storage item. "+(0,a.lL)(t),{exception:(0,r.mmD)(t)})}return!1}function P(e){return(e||void 0===l)&&(l=!!d(o.eL.SessionStorage)),l}function _(){var e=[];return P()&&(0,r.zav)((0,r.zS2)("sessionStorage"),(function(t){e[s.y5](t)})),e}function b(e,t){var n=f();if(null!==n)try{return n.getItem(t)}catch(t){l=!1,(0,i.ZP)(e,2,2,"Browser failed read of session storage. "+(0,a.lL)(t),{exception:(0,r.mmD)(t)})}return null}function S(e,t,n){var o=f();if(null!==o)try{return o.setItem(t,n),!0}catch(t){l=!1,(0,i.ZP)(e,2,4,"Browser failed write to session storage. "+(0,a.lL)(t),{exception:(0,r.mmD)(t)})}return!1}function C(e,t){var n=f();if(null!==n)try{return n[s.AZ](t),!0}catch(t){l=!1,(0,i.ZP)(e,2,6,"Browser failed removal of session storage item. "+(0,a.lL)(t),{exception:(0,r.mmD)(t)})}return!1}},7358:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});var r=function(e,t){this.aiDataContract={baseType:1,baseData:1},this.baseType=e,this.baseData=t}},7975:(e,t,n)=>{"use strict";n.d(t,{HQ:()=>v,Rr:()=>l,Vj:()=>p,Vk:()=>h,Vt:()=>d,_T:()=>m,lq:()=>c,pJ:()=>u,qW:()=>g,xP:()=>f,zx:()=>s});var r=n(269),i=n(3775),a=n(7292),o=n(5130);function s(e,t,n){var i=t[o.oI],a=c(e,t);if(a[o.oI]!==i){for(var s=0,l=a;void 0!==n[l];)s++,l=(0,r.P0f)(a,0,147)+g(s);a=l}return a}function c(e,t){var n;return t&&(t=(0,r.EHq)((0,r.oJg)(t)))[o.oI]>150&&(n=(0,r.P0f)(t,0,150),(0,i.ZP)(e,2,57,"name is too long.  It has been truncated to 150 characters.",{name:t},!0)),n||t}function l(e,t,n){var a;return void 0===n&&(n=1024),t&&(n=n||1024,(t=(0,r.EHq)((0,r.oJg)(t)))[o.oI]>n&&(a=(0,r.P0f)(t,0,n),(0,i.ZP)(e,2,61,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),a||t}function u(e,t){return m(e,t,2048,66)}function h(e,t){var n;return t&&t[o.oI]>32768&&(n=(0,r.P0f)(t,0,32768),(0,i.ZP)(e,2,56,"message is too long, it has been truncated to 32768 characters.",{message:t},!0)),n||t}function d(e,t){var n;if(t){var a=""+t;a[o.oI]>32768&&(n=(0,r.P0f)(a,0,32768),(0,i.ZP)(e,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:t},!0))}return n||t}function f(e,t){if(t){var n={};(0,r.zav)(t,(function(t,c){if((0,r.Gvm)(c)&&(0,a.Z)())try{c=(0,a.hm)()[o.Jj](c)}catch(t){(0,i.ZP)(e,2,49,"custom property is not valid",{exception:t},!0)}c=l(e,c,8192),t=s(e,t,n),n[t]=c})),t=n}return t}function p(e,t){if(t){var n={};(0,r.zav)(t,(function(t,r){t=s(e,t,n),n[t]=r})),t=n}return t}function v(e,t){return t?m(e,t,128,69)[o.xE]():t}function m(e,t,n,a){var s;return t&&(t=(0,r.EHq)((0,r.oJg)(t)))[o.oI]>n&&(s=(0,r.P0f)(t,0,n),(0,i.ZP)(e,2,a,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0)),s||t}function g(e){var t="00"+e;return(0,r.hKY)(t,t[o.oI]-3)}},1062:(e,t,n)=>{"use strict";n.d(t,{L:()=>s});var r=n(3673),i=n(5025),a=n(5130),o=n(7975),s=function(e,t,n){var s=this,c=this;c.ver=1,c.sampleRate=100,c.tags={},c[a.RS]=(0,o.Rr)(e,n)||i.R2,c.data=t,c.time=(0,r._u)(new Date),c.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return 100===s.sampleRate?4:1},tags:1,data:1}}},3072:(e,t,n)=>{"use strict";n.d(t,{J:()=>o});var r=n(5025),i=n(5130),a=n(7975),o=function(){function e(e,t,n,o){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var s=this;s.ver=2,s[i.RS]=(0,a.Rr)(e,t)||r.R2,s[i.$y]=(0,a.xP)(e,n),s[i.XA]=(0,a.Vj)(e,o)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Event",e.dataType="EventData",e}()},5397:(e,t,n)=>{"use strict";n.d(t,{WJ:()=>P});var r=n(659),i=n(269),a=n(5025),o=n(5130),s=n(7975),c="error",l="stack",u="stackDetails",h="errorSrc",d="message",f="description";function p(e,t){var n=e;return n&&!(0,i.KgX)(n)&&(JSON&&JSON[o.Jj]?(n=JSON[o.Jj](e),!t||n&&"{}"!==n||(n=(0,i.Tnt)(e[o.xE])?e[o.xE]():""+e)):n=e+" - (Missing JSON.stringify)"),n||""}function v(e,t){var n=e;return e&&(n&&!(0,i.KgX)(n)&&(n=e[d]||e[f]||n),n&&!(0,i.KgX)(n)&&(n=p(n,!0)),e.filename&&(n=n+" @"+(e.filename||"")+":"+(e.lineno||"?")+":"+(e.colno||"?"))),t&&"String"!==t&&"Object"!==t&&"Error"!==t&&-1===(0,i.HzD)(n||"",t)&&(n=t+": "+n),n||""}function m(e){return e&&e.src&&(0,i.KgX)(e.src)&&e.obj&&(0,i.cyL)(e.obj)}function g(e){var t=e||"";(0,i.KgX)(t)||(t=(0,i.KgX)(t[l])?t[l]:""+t);var n=t[o.sY]("\n");return{src:t,obj:n}}function y(e){var t=null;if(e)try{if(e[l])t=g(e[l]);else if(e[c]&&e[c][l])t=g(e[c][l]);else if(e.exception&&e.exception[l])t=g(e.exception[l]);else if(m(e))t=e;else if(m(e[u]))t=e[u];else if((0,i.zkX)()&&(0,i.zkX)().opera&&e[d])t=function(e){for(var t=[],n=e[o.sY]("\n"),r=0;r<n[o.oI];r++){var i=n[r];n[r+1]&&(i+="@"+n[r+1],r++),t[o.y5](i)}return{src:e,obj:t}}(e[o.pM]);else if(e.reason&&e.reason[l])t=g(e.reason[l]);else if((0,i.KgX)(e))t=g(e);else{var n=e[d]||e[f]||"";(0,i.KgX)(e[h])&&(n&&(n+="\n"),n+=" from "+e[h]),n&&(t=g(n))}}catch(e){t=g(e)}return t||{src:"",obj:null}}function E(e){var t="";if(e&&!(t=e.typeName||e[o.RS]||""))try{var n=/function (.{1,200})\(/.exec(e.constructor[o.xE]());t=n&&n[o.oI]>1?n[1]:""}catch(e){}return t}function w(e){if(e)try{if(!(0,i.KgX)(e)){var t=E(e),n=p(e,!1);return n&&"{}"!==n||(e[c]&&(t=E(e=e[c])),n=p(e,!0)),0!==(0,i.HzD)(n,t)&&"String"!==t?t+":"+n:n}}catch(e){}return""+(e||"")}var P=function(){function e(e,t,n,r,a,c){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var l=this;l.ver=2,function(e){try{if((0,i.Gvm)(e))return"ver"in e&&"exceptions"in e&&"properties"in e}catch(e){}return!1}(t)?(l[o.OK]=t[o.OK]||[],l[o.$y]=t[o.$y],l[o.XA]=t[o.XA],t[o.Ur]&&(l[o.Ur]=t[o.Ur]),t.id&&(l.id=t.id,t[o.$y].id=t.id),t[o.Fq]&&(l[o.Fq]=t[o.Fq]),(0,i.hXl)(t[o.r1])||(l[o.r1]=t[o.r1])):(n||(n={}),c&&(n.id=c),l[o.OK]=[new _(e,t,n)],l[o.$y]=(0,s.xP)(e,n),l[o.XA]=(0,s.Vj)(e,r),a&&(l[o.Ur]=a),c&&(l.id=c))}return e.CreateAutoException=function(e,t,n,r,i,a,s,c){var l,u=E(i||a||e);return(l={})[o.pM]=v(e,u),l.url=t,l.lineNumber=n,l.columnNumber=r,l.error=w(i||a||e),l.evt=w(a||e),l[o.qg]=u,l.stackDetails=y(s||i||a),l.errorSrc=c,l},e.CreateFromInterface=function(t,n,a,s){var c=n[o.OK]&&(0,i.W$7)(n[o.OK],(function(e){return _[o.vu](t,e)}));return new e(t,(0,r.Im)((0,r.Im)({},n),{exceptions:c}),a,s)},e.prototype.toInterface=function(){var e,t=this,n=t.exceptions,r=t.properties,a=t.measurements,s=t.severityLevel,c=t.problemGroup,l=t.id,u=t.isManual,h=n instanceof Array&&(0,i.W$7)(n,(function(e){return e.toInterface()}))||void 0;return(e={ver:"4.0"})[o.OK]=h,e.severityLevel=s,e.properties=r,e.measurements=a,e.problemGroup=c,e.id=l,e.isManual=u,e},e.CreateSimpleException=function(e,t,n,r,i,a){var s;return{exceptions:[(s={},s[o.lW]=!0,s.message=e,s.stack=i,s.typeName=t,s)]}},e.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",e.dataType="ExceptionData",e.formatError=w,e}(),_=function(){function e(e,t,n){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var r=this;if(function(e){try{if((0,i.Gvm)(e))return"hasFullStack"in e&&"typeName"in e}catch(e){}return!1}(t))r[o.qg]=t[o.qg],r[o.pM]=t[o.pM],r[l]=t[l],r[o.on]=t[o.on]||[],r[o.lW]=t[o.lW];else{var h=t,d=h&&h.evt;(0,i.bJ7)(h)||(h=h[c]||d||h),r[o.qg]=(0,s.Rr)(e,E(h))||a.R2,r[o.pM]=(0,s.Vk)(e,v(t||h,r[o.qg]))||a.R2;var f=t[u]||y(t);r[o.on]=function(e){var t,n=e.obj;if(n&&n[o.oI]>0){t=[];var r=0,a=0;if((0,i.Iuo)(n,(function(e){var n=e[o.xE]();if(b.regex.test(n)){var i=new b(n,r++);a+=i[o.J$],t[o.y5](i)}})),a>32768)for(var s=0,c=t[o.oI]-1,l=0,u=s,h=c;s<c;){if((l+=t[s][o.J$]+t[c][o.J$])>32768){var d=h-u+1;t.splice(u,d);break}u=s,h=c,s++,c--}}return t}(f),(0,i.cyL)(r[o.on])&&(0,i.W$7)(r[o.on],(function(t){t[o.QE]=(0,s.Rr)(e,t[o.QE]),t[o.IE]=(0,s.Rr)(e,t[o.IE])})),r[l]=(0,s.Vt)(e,function(e){var t="";return e&&(e.obj?(0,i.Iuo)(e.obj,(function(e){t+=e+"\n"})):t=e.src||""),t}(f)),r.hasFullStack=(0,i.cyL)(r.parsedStack)&&r.parsedStack[o.oI]>0,n&&(n[o.qg]=n[o.qg]||r[o.qg])}}return e.prototype.toInterface=function(){var e,t=this,n=t[o.on]instanceof Array&&(0,i.W$7)(t[o.on],(function(e){return e.toInterface()}));return(e={id:t.id,outerId:t.outerId,typeName:t[o.qg],message:t[o.pM],hasFullStack:t[o.lW],stack:t[l]})[o.on]=n||void 0,e},e.CreateFromInterface=function(t,n){var a=n[o.on]instanceof Array&&(0,i.W$7)(n[o.on],(function(e){return b[o.vu](e)}))||n[o.on];return new e(t,(0,r.Im)((0,r.Im)({},n),{parsedStack:a}))},e}(),b=function(){function e(t,n){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var r=this;if(r[o.J$]=0,"string"==typeof t){var a=t;r[o.Av]=n,r[o.lx]="<no_method>",r[o.QE]=(0,i.EHq)(a),r[o.IE]="",r[o.h_]=0;var s=a.match(e.regex);s&&s[o.oI]>=5&&(r[o.lx]=(0,i.EHq)(s[2])||r[o.lx],r[o.IE]=(0,i.EHq)(s[4]),r[o.h_]=parseInt(s[5])||0)}else r[o.Av]=t[o.Av],r[o.lx]=t[o.lx],r[o.QE]=t[o.QE],r[o.IE]=t[o.IE],r[o.h_]=t[o.h_],r[o.J$]=0;r.sizeInBytes+=r.method[o.oI],r.sizeInBytes+=r.fileName[o.oI],r.sizeInBytes+=r.assembly[o.oI],r[o.J$]+=e.baseSize,r.sizeInBytes+=r.level.toString()[o.oI],r.sizeInBytes+=r.line.toString()[o.oI]}return e.CreateFromInterface=function(t){return new e(t,null)},e.prototype.toInterface=function(){var e=this;return{level:e[o.Av],method:e[o.lx],assembly:e[o.QE],fileName:e[o.IE],line:e[o.h_]}},e.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,e.baseSize=58,e}()},5014:(e,t,n)=>{"use strict";n.d(t,{J:()=>s});var r=n(5025),i=n(5130),a=function(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0},o=n(7975),s=function(){function e(e,t,n,s,c,l,u,h,d){this.aiDataContract={ver:1,metrics:1,properties:0};var f=this;f.ver=2;var p=new a;p[i.F2]=s>0?s:void 0,p.max=isNaN(l)||null===l?void 0:l,p.min=isNaN(c)||null===c?void 0:c,p[i.RS]=(0,o.Rr)(e,t)||r.R2,p.value=n,p.stdDev=isNaN(u)||null===u?void 0:u,f.metrics=[p],f[i.$y]=(0,o.xP)(e,h),f[i.XA]=(0,o.Vj)(e,d)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",e.dataType="MetricData",e}()},1448:(e,t,n)=>{"use strict";n.d(t,{h:()=>s});var r=n(5025),i=n(87),a=n(5130),o=n(7975),s=function(){function e(e,t,n,s,c,l,u){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var h=this;h.ver=2,h.id=(0,o.HQ)(e,u),h.url=(0,o.pJ)(e,n),h[a.RS]=(0,o.Rr)(e,t)||r.R2,isNaN(s)||(h[a.qd]=(0,i.bb)(s)),h[a.$y]=(0,o.xP)(e,c),h[a.XA]=(0,o.Vj)(e,l)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",e.dataType="PageviewData",e}()},4164:(e,t,n)=>{"use strict";n.d(t,{H:()=>o});var r=n(5025),i=n(5130),a=n(7975),o=function(){function e(e,t,n,o,s,c,l){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var u=this;u.ver=2,u.url=(0,a.pJ)(e,n),u[i.RS]=(0,a.Rr)(e,t)||r.R2,u[i.$y]=(0,a.xP)(e,s),u[i.XA]=(0,a.Vj)(e,c),l&&(u.domProcessing=l.domProcessing,u[i.qd]=l[i.qd],u.networkConnect=l.networkConnect,u.perfTotal=l.perfTotal,u[i.fd]=l[i.fd],u.sentRequest=l.sentRequest)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",e.dataType="PageviewPerformanceData",e}()},1365:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(87),i=n(2318),a=n(5130),o=n(7975),s=function(){function e(e,t,n,s,c,l,u,h,d,f,p,v){void 0===d&&(d="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var m=this;m.ver=2,m.id=t,m[a.qd]=(0,r.bb)(c),m.success=l,m.resultCode=u+"",m.type=(0,o.Rr)(e,d);var g=(0,i._U)(e,n,h,s);m.data=(0,o.pJ)(e,s)||g.data,m.target=(0,o.Rr)(e,g.target),f&&(m.target="".concat(m.target," | ").concat(f)),m[a.RS]=(0,o.Rr)(e,g[a.RS]),m[a.$y]=(0,o.xP)(e,p),m[a.XA]=(0,o.Vj)(e,v)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",e.dataType="RemoteDependencyData",e}()},2445:(e,t,n)=>{"use strict";n.d(t,{C:()=>o});var r=n(5025),i=n(5130),a=n(7975),o=function(){function e(e,t,n,o,s){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var c=this;c.ver=2,t=t||r.R2,c[i.pM]=(0,a.Vk)(e,t),c[i.$y]=(0,a.xP)(e,o),c[i.XA]=(0,a.Vj)(e,s),n&&(c[i.Ur]=n)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Message",e.dataType="MessageData",e}()},9354:(e,t,n)=>{"use strict";n.d(t,{Gz:()=>u,M0:()=>f,PS:()=>d,cM:()=>c,k6:()=>h,wX:()=>l});var r=n(269),i=n(5130),a=(0,r.YEm)()||{},o=0,s=[null,null,null,null,null];function c(e){var t=o,n=s,r=n[t];return a.createElement?n[t]||(r=n[t]=a.createElement("a")):r={host:d(e,!0)},r.href=e,++t>=n[i.oI]&&(t=0),o=t,r}function l(e){var t,n=c(e);return n&&(t=n.href),t}function u(e){var t,n=c(e);return n&&(t=n[i.Ue]),t}function h(e,t){return e?e.toUpperCase()+" "+t:t}function d(e,t){var n=f(e,t)||"";if(n){var a=n.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(null!=a&&a[i.oI]>3&&(0,r.KgX)(a[2])&&a[2][i.oI]>0)return a[2]+(a[3]||"")}return n}function f(e,t){var n=null;if(e){var a=e.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(null!=a&&a[i.oI]>2&&(0,r.KgX)(a[2])&&a[2][i.oI]>0&&(n=a[2]||"",t&&a[i.oI]>2)){var o=(a[1]||"")[i.OL](),s=a[3]||"";("http"===o&&":80"===s||"https"===o&&":443"===s)&&(s=""),n+=s}}return n}},2318:(e,t,n)=>{"use strict";n.d(t,{Ft:()=>P,Qu:()=>d,Rs:()=>v,Wt:()=>f,_U:()=>y,jj:()=>w,lt:()=>E,mD:()=>g,mp:()=>p,pg:()=>m});var r=n(269),i=n(1864),a=n(5025),o=n(2910),s=n(7975),c=n(9354),l=n(5130),u=[a._G+a.wc,"https://breeze.aimon.applicationinsights.io"+a.wc,"https://dc-int.services.visualstudio.com"+a.wc],h="cid-v1:";function d(e){return-1!==(0,r.rDm)(u,e[l.OL]())}function f(e){h=e}function p(){return h}function v(e,t,n){if(!t||e&&e.disableCorrelationHeaders)return!1;if(e&&e[l.Ol])for(var i=0;i<e.correlationHeaderExcludePatterns[l.oI];i++)if(e[l.Ol][i].test(t))return!1;var a=(0,c.cM)(t).host[l.OL]();if(!a||-1===(0,r.HzD)(a,":443")&&-1===(0,r.HzD)(a,":80")||(a=((0,c.M0)(t,!0)||"")[l.OL]()),(!e||!e.enableCorsCorrelation)&&a&&a!==n)return!1;var o,s=e&&e.correlationHeaderDomains;if(s&&((0,r.Iuo)(s,(function(e){var t=new RegExp(e.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));o=o||t.test(a)})),!o))return!1;var u=e&&e.correlationHeaderExcludedDomains;if(!u||0===u[l.oI])return!0;for(i=0;i<u[l.oI];i++)if(new RegExp(u[i].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")).test(a))return!1;return a&&a[l.oI]>0}function m(e){if(e){var t=g(e,o.a[1]);if(t&&t!==h)return t}}function g(e,t){if(e)for(var n=e[l.sY](","),r=0;r<n[l.oI];++r){var i=n[r][l.sY]("=");if(2===i[l.oI]&&i[0]===t)return i[1]}}function y(e,t,n,r){var i,a=r,o=r;if(t&&t[l.oI]>0){var u=(0,c.cM)(t);if(i=u.host,!a)if(null!=u[l.Ue]){var h=0===u.pathname[l.oI]?"/":u[l.Ue];"/"!==h.charAt(0)&&(h="/"+h),o=u[l.Ue],a=(0,s.Rr)(e,n?n+" "+h:h)}else a=(0,s.Rr)(e,t)}else i=r,a=r;return{target:i,name:a,data:o}}function E(){var e=(0,r.FJj)();if(e&&e.now&&e.timing){var t=e.now()+e.timing.navigationStart;if(t>0)return t}return(0,r.f0d)()}function w(e,t){var n=null;return 0===e||0===t||(0,r.hXl)(e)||(0,r.hXl)(t)||(n=t-e),n}function P(e,t){var n=e||{};return{getName:function(){return n[l.RS]},setName:function(e){t&&t.setName(e),n[l.RS]=e},getTraceId:function(){return n.traceID},setTraceId:function(e){t&&t.setTraceId(e),(0,i.hX)(e)&&(n.traceID=e)},getSpanId:function(){return n.parentID},setSpanId:function(e){t&&t.setSpanId(e),(0,i.wN)(e)&&(n.parentID=e)},getTraceFlags:function(){return n.traceFlags},setTraceFlags:function(e){t&&t.setTraceFlags(e),n.traceFlags=e}}}},5130:(e,t,n)=>{"use strict";n.d(t,{$e:()=>y,$y:()=>C,AZ:()=>l,Av:()=>R,C9:()=>g,Cx:()=>p,F2:()=>d,Fq:()=>O,IE:()=>D,J$:()=>I,Jj:()=>E,Jm:()=>f,OK:()=>b,OL:()=>a,Ol:()=>P,QE:()=>x,RS:()=>u,Ue:()=>w,Ur:()=>M,XA:()=>T,fd:()=>$,h_:()=>L,i9:()=>m,lW:()=>j,lx:()=>F,oI:()=>i,on:()=>S,pM:()=>h,qd:()=>V,qg:()=>k,r1:()=>N,sY:()=>r,up:()=>_,vu:()=>A,xE:()=>s,y5:()=>c,zV:()=>o,zw:()=>v});var r="split",i="length",a="toLowerCase",o="ingestionendpoint",s="toString",c="push",l="removeItem",u="name",h="message",d="count",f="preTriggerDate",p="disabled",v="interval",m="daysOfMonth",g="date",y="getUTCDate",E="stringify",w="pathname",P="correlationHeaderExcludePatterns",_="extensionConfig",b="exceptions",S="parsedStack",C="properties",T="measurements",I="sizeInBytes",k="typeName",M="severityLevel",O="problemGroup",N="isManual",A="CreateFromInterface",x="assembly",D="fileName",j="hasFullStack",R="level",F="method",L="line",V="duration",$="receivedResponse"},740:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AnalyticsPluginIdentifier:()=>$,BreezeChannelIdentifier:()=>V,ConfigurationManager:()=>C,ConnectionStringParser:()=>d.F,ContextTagKeys:()=>T.o,CtxTagKeys:()=>O.O,DEFAULT_BREEZE_ENDPOINT:()=>p._G,DEFAULT_BREEZE_PATH:()=>p.wc,Data:()=>b.B,DisabledPropertyName:()=>p.xF,DistributedTracingModes:()=>N.uG,Envelope:()=>v.L,Event:()=>m.J,EventPersistence:()=>N.iD,Exception:()=>g.WJ,Extensions:()=>O.F,HttpMethod:()=>p.ym,Metric:()=>y.J,PageView:()=>E.h,PageViewPerformance:()=>_.H,ProcessLegacy:()=>p.jp,PropertiesPluginIdentifier:()=>L,RemoteDependencyData:()=>w.A,RequestHeaders:()=>f.a,SampleRate:()=>p.tU,SeverityLevel:()=>S.O,TelemetryItemCreator:()=>M,ThrottleMgr:()=>h,Trace:()=>P.C,correlationIdCanIncludeCorrelationHeader:()=>r.Rs,correlationIdGetCorrelationContext:()=>r.pg,correlationIdGetCorrelationContextValue:()=>r.mD,correlationIdGetPrefix:()=>r.mp,correlationIdSetPrefix:()=>r.Wt,createDistributedTraceContextFromTrace:()=>r.Ft,createDomEvent:()=>j,createOfflineListener:()=>F.G,createTelemetryItem:()=>k,createTraceParent:()=>D.wk,dataSanitizeException:()=>I.Vt,dataSanitizeId:()=>I.HQ,dataSanitizeInput:()=>I._T,dataSanitizeKey:()=>I.lq,dataSanitizeKeyAndAddUniqueness:()=>I.zx,dataSanitizeMeasurements:()=>I.Vj,dataSanitizeMessage:()=>I.Vk,dataSanitizeProperties:()=>I.xP,dataSanitizeString:()=>I.Rr,dataSanitizeUrl:()=>I.pJ,dateTimeUtilsDuration:()=>r.jj,dateTimeUtilsNow:()=>r.lt,dsPadNumber:()=>I.qW,findAllScripts:()=>D.V5,findW3cTraceParent:()=>D.ef,formatTraceParent:()=>D.L0,getExtensionByName:()=>A.Y8,isBeaconApiSupported:()=>x.Uf,isCrossOriginError:()=>A.vv,isInternalApplicationInsightsEndpoint:()=>r.Qu,isSampledFlag:()=>D.N7,isValidSpanId:()=>D.wN,isValidTraceId:()=>D.hX,isValidTraceParent:()=>D.mJ,msToTimeSpan:()=>A.bb,parseConnectionString:()=>d.H,parseTraceParent:()=>D.ZI,strNotSpecified:()=>p.R2,stringToBoolOrDefault:()=>A.Dt,urlGetAbsoluteUrl:()=>R.wX,urlGetCompleteUrl:()=>R.k6,urlGetPathName:()=>R.Gz,urlParseFullHost:()=>R.M0,urlParseHost:()=>R.PS,urlParseUrl:()=>R.cM,utlCanUseLocalStorage:()=>l.BW,utlCanUseSessionStorage:()=>l.AN,utlDisableStorage:()=>l.Nu,utlEnableStorage:()=>l.iw,utlGetLocalStorage:()=>l.Se,utlGetSessionStorage:()=>l.vH,utlGetSessionStorageKeys:()=>l.T9,utlRemoveSessionStorage:()=>l.v7,utlRemoveStorage:()=>l.tm,utlSetLocalStorage:()=>l._M,utlSetSessionStorage:()=>l.Dt,utlSetStoragePrefix:()=>l.vh});var r=n(2318),i=n(269),a=n(3775),o=n(3673),s=n(9749),c=n(6535),l=n(4658),u=n(5130),h=function(e,t){var n,r,h,d,f,p,v,m=this,g=!1,y=!1;function E(e,t,i,a){if(g){var o=function(e){try{var t=w(e);return(0,c.Z1)(1e6)<=t.limit.samplingRate}catch(e){}return!1}(e);if(!o)return;var s=w(e),l=k(e),h=_(s,n,l),d=!1,p=0,v=M(e);try{h&&!v?(p=Math.min(s.limit.maxSendNumber,l[u.F2]+1),l[u.F2]=0,d=!0,f[e]=!0,l[u.Jm]=new Date):(f[e]=h,l[u.F2]+=1);var m=b(e);C(r,m,l);for(var y=0;y<p;y++)I(e,r,t,i)}catch(e){}return{isThrottled:d,throttleNum:p}}return a&&O(e)[u.y5]({msgID:e,message:t,severity:i}),null}function w(e){return h[e]||h[109]}function P(e,t){var n,r,a,o,s;try{var c=t||{},l={};l[u.Cx]=!!c[u.Cx];var d=c[u.zw]||{};y=(null==d?void 0:d.daysOfMonth)&&(null==d?void 0:d.daysOfMonth[u.oI])>0,l[u.zw]=(o=null===(a=(a=d)||{})||void 0===a?void 0:a.monthInterval,s=null==a?void 0:a.dayInterval,(0,i.hXl)(o)&&(0,i.hXl)(s)&&(a.monthInterval=3,y||(a[u.i9]=[28],y=!0)),a={monthInterval:null==a?void 0:a.monthInterval,dayInterval:null==a?void 0:a.dayInterval,daysOfMonth:null==a?void 0:a.daysOfMonth});var f={samplingRate:(null===(n=c.limit)||void 0===n?void 0:n.samplingRate)||100,maxSendNumber:(null===(r=c.limit)||void 0===r?void 0:r.maxSendNumber)||1};l.limit=f,h[e]=l}catch(e){}}function _(e,t,n){if(e&&!e[u.Cx]&&t&&(0,o.Gh)(n)){var r=S(),a=n[u.C9],s=e[u.zw],c=1;if(null==s?void 0:s.monthInterval){var l=12*(r.getUTCFullYear()-a.getUTCFullYear())+r.getUTCMonth()-a.getUTCMonth();c=T(s.monthInterval,0,l)}var h=1;if(y)h=(0,i.rDm)(s[u.i9],r[u.$e]());else if(null==s?void 0:s.dayInterval){var d=Math.floor((r.getTime()-a.getTime())/864e5);h=T(s.dayInterval,0,d)}return c>=0&&h>=0}return!1}function b(e,t){var n=(0,o.Gh)(t)?t:"";return e?"appInsightsThrottle"+n+"-"+e:null}function S(e){try{if(!e)return new Date;var t=new Date(e);if(!isNaN(t.getDate()))return t}catch(e){}return null}function C(e,t,n){try{return(0,l._M)(e,t,(0,i.EHq)(JSON[u.Jj](n)))}catch(e){}return!1}function T(e,t,n){return e<=0?1:n>=t&&(n-t)%e==0?Math.floor((n-t)/e)+1:-1}function I(e,t,n,r){(0,a.ZP)(t,r||1,e,n)}function k(e){try{var t=d[e];if(!t){var n=b(e,p);t=function(e,t,n){try{var r={date:S(),count:0};if(e){var i=JSON.parse(e);return{date:S(i[u.C9])||r[u.C9],count:i[u.F2]||r[u.F2],preTriggerDate:i.preTriggerDate?S(i[u.Jm]):void 0}}return C(t,n,r),r}catch(e){}return null}((0,l.Se)(r,n),r,n),d[e]=t}return d[e]}catch(e){}return null}function M(e){var t=f[e];if((0,i.hXl)(t)){t=!1;var n=k(e);n&&(t=function(e){try{if(e){var t=new Date;return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e[u.$e]()===t[u.$e]()}}catch(e){}return!1}(n[u.Jm])),f[e]=t}return f[e]}function O(e){return v=v||{},(0,i.hXl)(v[e])&&(v[e]=[]),v[e]}r=(0,a.y0)(e),f={},d={},v={},h={},P(109),p=(0,o.Gh)(t)?t:"",e.addUnloadHook((0,s.a)(e.config,(function(e){var t=e.cfg;n=(0,l.BW)();var r=t.throttleMgrCfg||{};(0,i.zav)(r,(function(e,t){P(parseInt(e),t)}))}))),m._getDbgPlgTargets=function(){return[v]},m.getConfig=function(){return h},m.canThrottle=function(e){var t=k(e);return _(w(e),n,t)},m.isTriggered=function(e){return M(e)},m.isReady=function(){return g},m.flush=function(e){try{var t=O(e);if(t&&t[u.oI]>0){var n=t.slice(0);return v[e]=[],(0,i.Iuo)(n,(function(e){E(e.msgID,e[u.pM],e.severity,!1)})),!0}}catch(e){}return!1},m.flushAll=function(){try{if(v){var e=!0;return(0,i.zav)(v,(function(t){var n=m.flush(parseInt(t));e=e&&n})),e}}catch(e){}return!1},m.onReadyState=function(e,t){return void 0===t&&(t=!0),(g=!!(0,i.hXl)(e)||e)&&t?m.flushAll():null},m.sendMessage=function(e,t,n){return E(e,t,n,!0)}},d=n(4484),f=n(2910),p=n(5025),v=n(1062),m=n(3072),g=n(5397),y=n(5014),E=n(1448),w=n(1365),P=n(2445),_=n(4164),b=n(7358),S=n(9762),C=function(){function e(){}return e.getConfig=function(e,t,n,r){var a;return void 0===r&&(r=!1),a=n&&e[u.up]&&e[u.up][n]&&!(0,i.hXl)(e[u.up][n][t])?e[u.up][n][t]:e[t],(0,i.hXl)(a)?r:a},e}(),T=n(8596),I=n(7975);function k(e,t,n,r,a,s){var c;n=(0,I.Rr)(r,n)||p.R2,((0,i.hXl)(e)||(0,i.hXl)(t)||(0,i.hXl)(n))&&(0,i.$8)("Input doesn't contain all required fields");var l="";e[p.ks]&&(l=e[p.ks],delete e[p.ks]);var h=((c={})[u.RS]=n,c.time=(0,o._u)(new Date),c.iKey=l,c.ext=s||{},c.tags=[],c.data={},c.baseType=t,c.baseData=e,c);return(0,i.hXl)(a)||(0,i.zav)(a,(function(e,t){h.data[e]=t})),h}var M=function(){function e(){}return e.create=k,e}(),O=n(1575),N=n(7374),A=n(87),x=n(7292),D=n(1864);function j(e){var t=null;if((0,i.Tnt)(Event))t=new Event(e);else{var n=(0,i.YEm)();n&&n.createEvent&&(t=n.createEvent("Event")).initEvent(e,!0,!0)}return t}var R=n(9354),F=n(5571),L="AppInsightsPropertiesPlugin",V="AppInsightsChannelPlugin",$="ApplicationInsightsAnalytics"},2475:(e,t,n)=>{"use strict";n.d(t,{DD:()=>c,Lx:()=>s,NU:()=>o});var r=n(269),i=n(6182);function a(e,t,n){return!e&&(0,r.hXl)(e)?t:(0,r.Lmq)(e)?e:"true"===(0,r.oJg)(e)[i.OL]()}function o(e){return{mrg:!0,v:e}}function s(e,t,n){return{fb:n,isVal:e,v:t}}function c(e,t){return{fb:t,set:a,v:!!e}}},991:(e,t,n)=>{"use strict";n.d(t,{q:()=>c});var r=n(269),i=n(6182);function a(e){return e&&(0,r.Gvm)(e)&&(e.isVal||e.fb||(0,r.KhI)(e,"v")||(0,r.KhI)(e,"mrg")||(0,r.KhI)(e,"ref")||e.set)}function o(e,t,n){var a,o=n.dfVal||r.O9V;if(t&&n.fb){var s=n.fb;(0,r.cyL)(s)||(s=[s]);for(var c=0;c<s[i.oI];c++){var l=s[c],u=t[l];if(o(u)?a=u:e&&(o(u=e.cfg[l])&&(a=u),e.set(e.cfg,(0,r.oJg)(l),u)),o(a))break}}return!o(a)&&o(n.v)&&(a=n.v),a}function s(e,t,n){var c,l=n;return n&&a(n)&&(l=o(e,t,n)),l&&(a(l)&&(l=s(e,t,l)),(0,r.cyL)(l)?(c=[])[i.oI]=l[i.oI]:(0,r.QdQ)(l)&&(c={}),c&&((0,r.zav)(l,(function(n,r){r&&a(r)&&(r=s(e,t,r)),c[n]=r})),l=c)),l}function c(e,t,n,l){var u,h,d,f,p,v,m,g,y=l;a(y)?(u=y.isVal,h=y.set,v=y[i.XW],m=y[i.JQ],f=y.mrg,!(p=y.ref)&&(0,r.b07)(p)&&(p=!!f),d=o(e,t,y)):d=l,m&&e[i.JQ](t,n);var E=!0,w=t[n];!w&&(0,r.hXl)(w)||(g=w,E=!1,u&&g!==d&&!u(g)&&(g=d,E=!0),h&&(E=(g=h(g,d,t))===d)),E?g=d?s(e,t,d):d:((0,r.QdQ)(g)||(0,r.cyL)(d))&&f&&d&&((0,r.QdQ)(d)||(0,r.cyL)(d))&&(0,r.zav)(d,(function(t,n){c(e,g,t,n)})),e.set(t,n,g),p&&e.ref(t,n),v&&e[i.XW](t,n)}},9749:(e,t,n)=>{"use strict";n.d(t,{e:()=>E,a:()=>w});var r,i=n(269),a=n(4276),o=n(6492),s=n(6182),c=n(991),l=n(9147),u=["push","pop","shift","unshift","splice"],h=function(e,t,n,r){e&&e[s.ih](3,108,"".concat(n," [").concat(t,"] failed - ")+(0,i.mmD)(r))};function d(e,t){var n=(0,i.kgX)(e,t);return n&&n.get}function f(e,t,n,r){if(t){var a=d(t,n);a&&a[e.prop]?t[n]=r:function(e,t,n,r){var a={n,h:[],trk:function(t){t&&t.fn&&(-1===(0,i.rDm)(a.h,t)&&a.h[s.y5](t),e.trk(t,a))},clr:function(e){var t=(0,i.rDm)(a.h,e);-1!==t&&a.h[s.Ic](t,1)}},c=!0,u=!1;function p(){c&&(u=u||(0,l.hF)(p,e,r),r&&!r[l.nM]&&u&&(r=v(e,r,n,"Converting")),c=!1);var t=e.act;return t&&a.trk(t),r}p[e.prop]={chng:function(){e.add(a)}},(0,i.vF1)(t,a.n,{g:p,s:function(m){if(r!==m){p[e.ro]&&!e.upd&&(0,l.If)("["+n+"] is read-only:"+(0,i.mmD)(t)),c&&(u=u||(0,l.hF)(p,e,r),c=!1);var g=u&&p[e.rf];if(u)if(g){(0,i.zav)(r,(function(e){r[e]=m?m[e]:o.HP}));try{(0,i.zav)(m,(function(t,n){f(e,r,t,n)})),m=r}catch(t){h((e.hdlr||{})[s.Uw],n,"Assigning",t),u=!1}}else r&&r[l.nM]&&(0,i.zav)(r,(function(t){var n=d(r,t);if(n){var i=n[e.prop];i&&i.chng()}}));if(m!==r){var y=m&&(0,l.hF)(p,e,m);!g&&y&&(m=v(e,m,n,"Converting")),r=m,u=y}e.add(a)}}})}(e,t,n,r)}return t}function p(e,t,n,r){if(t){var i=d(t,n),a=i&&!!i[e.prop],o=r&&r[0],c=r&&r[1],u=r&&r[2];if(!a){if(u)try{(0,l.V9)(t)}catch(t){h((e.hdlr||{})[s.Uw],n,"Blocking",t)}try{f(e,t,n,t[n]),i=d(t,n)}catch(t){h((e.hdlr||{})[s.Uw],n,"State",t)}}o&&(i[e.rf]=o),c&&(i[e.ro]=c),u&&(i[e.blkVal]=!0)}return t}function v(e,t,n,r){try{(0,i.zav)(t,(function(n,r){f(e,t,n,r)})),t[l.nM]||((0,i.UxO)(t,l.nM,{get:function(){return e[s.K0]}}),function(e,t,n){(0,i.cyL)(t)&&(0,i.Iuo)(u,(function(r){var i=t[r];t[r]=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var o=i[s.y9](this,r);return v(e,t,n,"Patching"),o}}))}(e,t,n))}catch(t){h((e.hdlr||{})[s.Uw],n,r,t)}return t}var m="[[ai_",g="]]";function y(e,t,n){var o,u=(0,l.QA)(t);if(u)return u;var d,y=(0,a.Z)("dyncfg",!0),E=t&&!1!==n?t:(0,l.Dy)(t),w=((o={uid:null,cfg:E})[s.Uw]=e,o[s.zs]=function(){d[s.zs]()},o.set=function(t,n,r){try{t=f(d,t,n,r)}catch(t){h(e,n,"Setting value",t)}return t[n]},o[s.h0]=function(e,t){return t&&(0,i.zav)(t,(function(t,n){(0,c.q)(w,e,t,n)})),e},o[s.x6]=function(e){return function(e,t){var n={fn:t,rm:function(){n.fn=null,e=null,t=null}};return(0,i.vF1)(n,"toJSON",{v:function(){return"WatcherHandler"+(n.fn?"":"[X]")}}),e.use(n,t),n}(d,e)},o.ref=function(e,t){var n;return p(d,e,t,(n={},n[0]=!0,n))[t]},o[s.XW]=function(e,t){var n;return p(d,e,t,(n={},n[1]=!0,n))[t]},o[s.JQ]=function(e,t){var n;return p(d,e,t,(n={},n[2]=!0,n))[t]},o._block=function(e,t){d.use(null,(function(n){var r=d.upd;try{(0,i.b07)(t)||(d.upd=t),e(n)}finally{d.upd=r}}))},o);return(0,i.vF1)(w,"uid",{c:!1,e:!1,w:!1,v:y}),v(d=function(e){var t,n,a=(0,i.jjc)(m+"get"+e.uid+g),o=(0,i.jjc)(m+"ro"+e.uid+g),c=(0,i.jjc)(m+"rf"+e.uid+g),l=(0,i.jjc)(m+"blkVal"+e.uid+g),u=(0,i.jjc)(m+"dtl"+e.uid+g),h=null,d=null;function f(t,r){var a=n.act;try{n.act=t,t&&t[u]&&((0,i.Iuo)(t[u],(function(e){e.clr(t)})),t[u]=[]),r({cfg:e.cfg,set:e.set.bind(e),setDf:e[s.h0].bind(e),ref:e.ref.bind(e),rdOnly:e[s.XW].bind(e)})}catch(t){var o=e[s.Uw];throw o&&o[s.ih](1,107,(0,i.mmD)(t)),t}finally{n.act=a||null}}function p(){if(h){var e=h;h=null,d&&d[s._w](),d=null;var t=[];if((0,i.Iuo)(e,(function(e){if(e&&(e[u]&&((0,i.Iuo)(e[u],(function(t){t.clr(e)})),e[u]=null),e.fn))try{f(e,e.fn)}catch(e){t[s.y5](e)}})),h)try{p()}catch(e){t[s.y5](e)}t[s.oI]>0&&function(e,t){r||(r=(0,i.aqQ)("AggregationError",(function(e,t){t[s.oI]>1&&(e.errors=t[1])})));var n="Watcher error(s): ";throw(0,i.Iuo)(t,(function(e,t){n+="\n".concat(t," > ").concat((0,i.mmD)(e))})),new r(n,t||[])}(0,t)}}return(t={prop:a,ro:o,rf:c})[s.JQ]=l,t[s.K0]=e,t.add=function(e){if(e&&e.h[s.oI]>0){h||(h=[]),d||(d=(0,i.dRz)((function(){d=null,p()}),0));for(var t=0;t<e.h[s.oI];t++){var n=e.h[t];n&&-1===(0,i.rDm)(h,n)&&h[s.y5](n)}}},t[s.zs]=p,t.use=f,t.trk=function(e,t){if(e){var n=e[u]=e[u]||[];-1===(0,i.rDm)(n,t)&&n[s.y5](t)}},n=t}(w),E,"config","Creating"),w}function E(e,t,n,r){var i=y(n,e||{},r);return t&&i[s.h0](i.cfg,t),i}function w(e,t,n){var r=e[l.nM]||e;return!r.cfg||r.cfg!==e&&r.cfg[l.nM]!==r?(function(e,t){e?(e[s.on](t),e[s.ih](2,108,t)):(0,l.If)(t)}(n,o.xW+(0,i.mmD)(e)),E(e,null,n)[s.x6](t)):r[s.x6](t)}},9147:(e,t,n)=>{"use strict";n.d(t,{Dy:()=>c,Hf:()=>h,If:()=>f,QA:()=>l,V9:()=>u,hF:()=>d,nM:()=>a});var r=n(269),i=n(6182),a=(0,r.eCG)("[[ai_dynCfg_1]]"),o=(0,r.eCG)("[[ai_blkDynCfg_1]]"),s=(0,r.eCG)("[[ai_frcDynCfg_1]]");function c(e){var t;return e&&((0,r.cyL)(e)?(t=[])[i.oI]=e[i.oI]:(0,r.QdQ)(e)&&(t={}),t)?((0,r.zav)(e,(function(e,n){t[e]=c(n)})),t):e}function l(e){if(e){var t=e[a]||e;if(t.cfg&&(t.cfg===e||t.cfg[a]===t))return t}return null}function u(e){if(e&&((0,r.QdQ)(e)||(0,r.cyL)(e)))try{e[o]=!0}catch(e){}return e}function h(e){if(e)try{e[s]=!0}catch(e){}return e}function d(e,t,n){var i=!1;return n&&!e[t.blkVal]&&((i=n[s])||n[o]||(i=(0,r.QdQ)(n)||(0,r.cyL)(n))),i}function f(e){(0,r.zkd)("InvalidAccess:"+e)}},4282:(e,t,n)=>{"use strict";n.d(t,{H:()=>i,o:()=>a});var r=n(269),i=r.WSA,a=r.fn0},3662:(e,t,n)=>{"use strict";n.d(t,{x:()=>i});var r=n(4282),i=(0,r.H)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5});(0,r.H)({Unknown:0,NonRetryableStatus:1,CleanStorage:2,MaxInStorageTimeExceeded:3})},4875:(e,t,n)=>{"use strict";n.d(t,{f:()=>r});var r=(0,n(4282).H)({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2})},2774:(e,t,n)=>{"use strict";n.d(t,{_:()=>x});var r,i=n(659),a=n(8279),o=n(8205),s=n(269),c=n(9749),l=n(4875),u=n(6182),h=n(4013),d=n(7847),f=n(5034),p=n(4276),v=n(7867),m=n(3775),g=n(3673),y=n(6492),E=n(1356),w=n(8156),P=n(2317),_=n(380),b=function(e){function t(){var n,r,i=e.call(this)||this;function o(){n=0,r=[]}return i.identifier="TelemetryInitializerPlugin",i.priority=199,o(),(0,a.A)(t,i,(function(e,t){e.addTelemetryInitializer=function(e){return function(e,t,n){var r={id:t,fn:n};return(0,s.Yny)(e,r),{remove:function(){(0,s.Iuo)(e,(function(t,n){if(t.id===r.id)return e[u.Ic](n,1),-1}))}}}(r,n++,e)},e[y.qT]=function(t,n){(function(e,t,n){for(var r=!1,i=e[u.oI],a=0;a<i;++a){var o=e[a];if(o)try{if(!1===o.fn[u.y9](null,[t])){r=!0;break}}catch(e){(0,m.ZP)(n,2,64,"Telemetry initializer failed: "+(0,g.lL)(e),{exception:(0,s.mmD)(e)},!0)}}return!r})(r,t,n?n[u.e4]():e[u.e4]())&&e[u.$5](t,n)},e[u.tn]=function(){o()}})),i}return(0,i.qU)(t,e),t.__ieDyn=1,t}(n(8257).s),S=n(836),C=n(8969),T="Plugins must provide initialize method",I="SDK is still unloading...",k=(0,s.ZHX)(((r={cookieCfg:{}})[y.jy]={rdOnly:!0,ref:!0,v:[]},r[y.LZ]={rdOnly:!0,ref:!0,v:[]},r[y.Bw]={ref:!0,v:{}},r[y.Yd]=y.HP,r.loggingLevelConsole=0,r.diagnosticLogInterval=y.HP,r));function M(e,t){return new w.NS(t)}function O(e,t){var n=!1;return(0,s.Iuo)(t,(function(t){if(t===e)return n=!0,-1})),n}function N(e,t,n,r){n&&(0,s.zav)(n,(function(n,i){r&&(0,s.QdQ)(i)&&(0,s.QdQ)(t[n])&&N(e,t[n],i,r),r&&(0,s.QdQ)(i)&&(0,s.QdQ)(t[n])?N(e,t[n],i,r):e.set(t,n,i)}))}function A(e,t){var n=null,r=-1;return(0,s.Iuo)(e,(function(e,i){if(e.w===t)return n=e,r=i,-1})),{i:r,l:n}}var x=function(){function e(){var t,n,r,x,D,j,R,F,L,V,$,H,W,B,U,K,Y,q,z,G,X,Q,J,Z,ee,te,ne,re,ie,ae,oe,se;(0,a.A)(e,this,(function(e){function a(){ie=!0,(0,s.hXl)(X)?(te=l.f[u.Yq],(0,m.ZP)(r,1,112,"ikey can't be resolved from promises")):te=l.f.ACTIVE,ce()}function ce(){n&&(e.releaseQueue(),e[u.h4]())}function le(e){return ae&&ae[u.XM]||se||(e||r&&r.queue[u.oI]>0)&&(oe||(oe=!0,_e(t[u.x6]((function(e){var t=e.cfg.diagnosticLogInterval;t&&t>0||(t=1e4);var n=!1;ae&&(n=ae[u.XM],ae[u._w]()),(ae=(0,s.AHH)(ge,t)).unref(),ae[u.XM]=n})))),ae[u.XM]=!0),ae}function ue(){var e={};Z=[];var t=function(t){t&&(0,s.Iuo)(t,(function(t){if(t[u.Ju]&&t[u.s]&&!e[t.identifier]){var n=t[u.Ju]+"="+t[u.s];Z[u.y5](n),e[t.identifier]=t}}))};t(H),$&&(0,s.Iuo)($,(function(e){t(e)})),t(V)}function he(){n=!1,(t=(0,c.e)({},k,e[u.Uw])).cfg[u.Bl]=1,(0,s.vF1)(e,"config",{g:function(){return t.cfg},s:function(t){e.updateCfg(t,!1)}}),(0,s.vF1)(e,"pluginVersionStringArr",{g:function(){return Z||ue(),Z}}),(0,s.vF1)(e,"pluginVersionString",{g:function(){return ee||(Z||ue(),ee=Z.join(";")),ee||y.m5}}),(0,s.vF1)(e,"logger",{g:function(){return r||(r=new m.wq(t.cfg),t[u.Uw]=r),r},s:function(e){t[u.Uw]=e,r!==e&&((0,h.K)(r,!1),r=e)}}),e[u.Uw]=new m.wq(t.cfg),J=[];var i=e.config[y.jy]||[];i.splice(0,i[u.oI]),(0,s.Yny)(i,J),B=new b,x=[],(0,h.K)(D,!1),D=null,j=null,R=null,(0,h.K)(F,!1),F=null,L=null,V=[],$=null,H=null,W=!1,U=null,K=(0,p.Z)("AIBaseCore",!0),Y=(0,S.P)(),G=null,X=null,q=(0,C.w)(),Q=[],ee=null,Z=null,se=!1,ae=null,oe=!1,te=0,ne=null,re=null,ie=!1}function de(){var n=(0,P.i8)(ve(),t.cfg,e);return n[u.by](le),n}function fe(t){var n=function(e,t,n){var r,i=[],a=[],o={};return(0,s.Iuo)(n,(function(n){((0,s.hXl)(n)||(0,s.hXl)(n[u.mE]))&&(0,s.$8)(T);var r=n[y.Vo],c=n[u.Ju];n&&r&&((0,s.hXl)(o[r])?o[r]=c:(0,m.OG)(e,"Two extensions have same priority #"+r+" - "+o[r]+", "+c)),!r||r<t?i[u.y5](n):a[u.y5](n)})),(r={})[y.eT]=i,r[y.LZ]=a,r}(e[u.Uw],d.i,V);L=null,ee=null,Z=null,H=($||[])[0]||[],H=(0,_.Xc)((0,s.Yny)(H,n[y.LZ]));var r=(0,s.Yny)((0,_.Xc)(n[y.eT]),H);J=(0,s.N6t)(r);var i=e.config[y.jy]||[];i.splice(0,i[u.oI]),(0,s.Yny)(i,J);var a=de();H&&H[u.oI]>0&&(0,_.pI)(a[u.$o](H),r),(0,_.pI)(a,r),t&&Ee(t)}function pe(e){var t=null,n=null,r=[];return(0,s.Iuo)(J,(function(t){if(t[u.Ju]===e&&t!==B)return n=t,-1;t.getChannel&&r[u.y5](t)})),!n&&r[u.oI]>0&&(0,s.Iuo)(r,(function(t){if(!(n=t.getChannel(e)))return-1})),n&&(t={plugin:n,setEnabled:function(e){(0,_.Cr)(n)[y.Hr]=!e},isEnabled:function(){var e=(0,_.Cr)(n);return!e[u.Ik]&&!e[y.Hr]},remove:function(e,t){var r;void 0===e&&(e=!0);var i=[n],a=((r={reason:1})[u.tI]=e,r);me(i,a,(function(e){e&&fe({reason:32,removed:i}),t&&t(e)}))}}),t}function ve(){if(!L){var n=(J||[]).slice();-1===(0,s.rDm)(n,B)&&n[u.y5](B),L=(0,P.PV)((0,_.Xc)(n),t.cfg,e)}return L}function me(n,r,i){if(n&&n[u.oI]>0){var a=(0,P.PV)(n,t.cfg,e),o=(0,P.tS)(a,e);o[u.by]((function(){var e=!1,t=[];(0,s.Iuo)(V,(function(r,i){O(r,n)?e=!0:t[u.y5](r)})),V=t,ee=null,Z=null;var r=[];$&&((0,s.Iuo)($,(function(t,i){var a=[];(0,s.Iuo)(t,(function(t){O(t,n)?e=!0:a[u.y5](t)})),r[u.y5](a)})),$=r),i&&i(e),le()})),o[u.$5](r)}else i(!1)}function ge(){if(r&&r.queue){var t=r.queue.slice(0);r.queue[u.oI]=0,(0,s.Iuo)(t,(function(t){var n,r=((n={})[u.RS]=U||"InternalMessageId: "+t[u.JR],n[u.FI]=X,n[u.fA]=(0,g._u)(new Date),n.baseType=m.WD.dataType,n.baseData={message:t[u.pM]},n);e.track(r)}))}}function ye(e,t,n,r){var i=1,a=!1,o=null;function c(){i--,a&&0===i&&(o&&o[u._w](),o=null,t&&t(a),t=null)}return r=r||5e3,H&&H[u.oI]>0&&de()[u.$o](H).iterate((function(t){if(t.flush){i++;var a=!1;t.flush(e,(function(){a=!0,c()}),n)||a||(e&&null==o?o=(0,s.dRz)((function(){o=null,c()}),r):c())}})),a=!0,c(),!0}function Ee(t){var n=(0,P.nU)(ve(),e);n[u.by](le),e._updateHook&&!0===e._updateHook(n,t)||n[u.$5](t)}function we(t){var n=e[u.Uw];n?((0,m.ZP)(n,2,73,t),le()):(0,s.$8)(t)}function Pe(t){var n=e[u.RF]();n&&n[y.Yp]([t],2)}function _e(e){q.add(e)}he(),e._getDbgPlgTargets=function(){return[J,x]},e[u.tZ]=function(){return n},e.activeStatus=function(){return te},e._setPendingStatus=function(){te=3},e[u.mE]=function(h,d,f,p){var E;W&&(0,s.$8)(I),e[u.tZ]()&&(0,s.$8)("Core cannot be initialized more than once"),t=(0,c.e)(h,k,f||e[u.Uw],!1),h=t.cfg,_e(t[u.x6]((function(e){var t=e.cfg;if(3!==te){re=t.initInMemoMaxSize||100;var i=t[u.sl],c=t.endpointUrl;if((0,s.hXl)(i)){X=null,te=l.f[u.Yq];var d="Please provide instrumentation key";n?((0,m.ZP)(r,1,100,d),ce()):(0,s.$8)(d)}else{var f=[];if((0,s.$XS)(i)?(f[u.y5](i),X=null):X=i,(0,s.$XS)(c)?(f[u.y5](c),ne=null):ne=c,f[u.oI]){ie=!1,te=3;var p=(0,g.Gh)(t.initTimeOut)?t.initTimeOut:5e4,v=(0,o.lh)(f);(0,s.dRz)((function(){ie||a()}),p),(0,o.Dv)(v,(function(e){try{if(ie)return;if(!e.rejected){var t=e[u.pF];if(t&&t[u.oI]){var n=t[0];if(X=n&&n[u.pF],t[u.oI]>1){var r=t[1];ne=r&&r[u.pF]}}X&&(h[u.sl]=X,h.endpointUrl=ne)}a()}catch(e){ie||a()}}))}else a();var E=e.ref(e.cfg,y.Bw);(0,s.zav)(E,(function(t){e.ref(E,t)}))}}}))),z=function(e,t,n,r){return t.add(e[u.x6]((function(e){var t=e.cfg.disableDbgExt;!0===t&&r&&(n[u.h3](r),r=null),n&&!r&&!0!==t&&(r=(0,v.M)(e.cfg),n[u.vR](r))}))),r}(t,q,(D=p)&&e[u.RF](),z),_e(t[u.x6]((function(t){if(t.cfg.enablePerfMgr){var n=t.cfg[y.Yd];E===n&&E||(n||(n=M),(0,g.c2)(t.cfg,y.Yd,n),E=n,R=null),j||R||!(0,s.Tnt)(n)||(R=n(e,e[u.RF]()))}else R=null,E=null}))),e[u.Uw]=f;var w=h[y.jy];if((V=[])[u.y5].apply(V,(0,i.vz)((0,i.vz)([],d,!1),w,!1)),$=h[y.LZ],fe(null),H&&0!==H[u.oI]||(0,s.$8)("No "+y.LZ+" available"),$&&$[u.oI]>1){var P=e[u.AP]("TeeChannelController");P&&P.plugin||(0,m.ZP)(r,1,28,"TeeChannel required")}!function(e,t,n){(0,s.Iuo)(t,(function(t){var r=(0,c.a)(e,t.w,n);delete t.w,t.rm=function(){r.rm()}}))}(h,Q,r),Q=null,n=!0,te===l.f.ACTIVE&&ce()},e.getChannels=function(){var e=[];return H&&(0,s.Iuo)(H,(function(t){e[u.y5](t)})),(0,s.N6t)(e)},e.track=function(t){(0,w.r2)(e[y.kI](),(function(){return"AppInsightsCore:track"}),(function(){null===t&&(Pe(t),(0,s.$8)("Invalid telemetry item")),!t[u.RS]&&(0,s.hXl)(t[u.RS])&&(Pe(t),(0,s.$8)("telemetry name required")),t[u.FI]=t[u.FI]||X,t[u.fA]=t[u.fA]||(0,g._u)(new Date),t.ver=t.ver||"4.0",!W&&e[u.tZ]()&&te===l.f.ACTIVE?de()[u.$5](t):te!==l.f[u.Yq]&&x[u.oI]<=re&&x[u.y5](t)}),(function(){return{item:t}}),!t.sync)},e[u.DI]=de,e[u.RF]=function(){return D||(D=new E.h(t.cfg),e._notificationManager=D),D},e[u.vR]=function(t){e.getNotifyMgr()[u.vR](t)},e[u.h3]=function(e){D&&D[u.h3](e)},e.getCookieMgr=function(){return F||(F=(0,f.xN)(t.cfg,e[u.Uw])),F},e.setCookieMgr=function(e){F!==e&&((0,h.K)(F,!1),F=e)},e[y.kI]=function(){return j||R||(0,w.Z4)()},e.setPerfMgr=function(e){j=e},e.eventCnt=function(){return x[u.oI]},e.releaseQueue=function(){if(n&&x[u.oI]>0){var e=x;x=[],2===te?(0,s.Iuo)(e,(function(e){e[u.FI]=e[u.FI]||X,de()[u.$5](e)})):(0,m.ZP)(r,2,20,"core init status is not active")}},e[u.h4]=function(e){return U=e||null,se=!1,ae&&ae[u._w](),le(!0)},e[u.Di]=function(){se=!0,ae&&ae[u._w](),ge()},(0,g.o$)(e,(function(){return B}),["addTelemetryInitializer"]),e[u.M5]=function(t,i,a){var c;void 0===t&&(t=!0),n||(0,s.$8)("SDK is not initialized"),W&&(0,s.$8)(I);var l,d=((c={reason:50})[u.tI]=t,c.flushComplete=!1,c);t&&!i&&(l=(0,o.Qo)((function(e){i=e})));var f=(0,P.tS)(ve(),e);function p(t){d.flushComplete=t,W=!0,Y.run(f,d),e[u.Di](),f[u.$5](d)}return f[u.by]((function(){q.run(e[u.Uw]),(0,h.k)([F,D,r],t,(function(){he(),i&&i(d)}))}),e),ge(),ye(t,p,6,a)||p(!1),l},e[u.AP]=pe,e.addPlugin=function(e,t,n,r){if(!e)return r&&r(!1),void we(T);var i=pe(e[u.Ju]);if(i&&!t)return r&&r(!1),void we("Plugin ["+e[u.Ju]+"] is already loaded!");var a={reason:16};function o(t){V[u.y5](e),a.added=[e],fe(a),r&&r(!0)}if(i){var s=[i.plugin];me(s,{reason:2,isAsync:!!n},(function(e){e?(a.removed=s,a.reason|=32,o()):r&&r(!1)}))}else o()},e.updateCfg=function(n,r){var i;if(void 0===r&&(r=!0),e[u.tZ]()){i={reason:1,cfg:t.cfg,oldCfg:(0,s.zwS)({},t.cfg),newConfig:(0,s.zwS)({},n),merge:r},n=i.newConfig;var a=t.cfg;n[y.jy]=a[y.jy],n[y.LZ]=a[y.LZ]}t._block((function(e){var t=e.cfg;N(e,t,n,r),r||(0,s.zav)(t,(function(r){(0,s.KhI)(n,r)||e.set(t,r,y.HP)})),e[u.h0](t,k)}),!0),t[u.zs](),i&&Ee(i)},e.evtNamespace=function(){return K},e.flush=ye,e.getTraceCtx=function(e){return G||(G=(0,_.u7)()),G},e.setTraceCtx=function(e){G=e||null},e.addUnloadHook=_e,(0,g.RF)(e,"addUnloadCb",(function(){return Y}),"add"),e.onCfgChange=function(r){var i,a,o,l;return n?i=(0,c.a)(t.cfg,r,e[u.Uw]):((l=A(a=Q,o=r).l)||(l={w:o,rm:function(){var e=A(a,o);-1!==e.i&&a[u.Ic](e.i,1)}},a[u.y5](l)),i=l),function(e){return(0,s.vF1)({rm:function(){e.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(e)+">"}})}(i)},e.getWParam=function(){return(0,s.Wtk)()||t.cfg.enableWParam?0:-1}}))}return e.__ieDyn=1,e}()},4013:(e,t,n)=>{"use strict";n.d(t,{K:()=>o,k:()=>s});var r=n(8205),i=n(269),a=n(6182);function o(e,t){if(e&&e[a.M5])return e[a.M5](t)}function s(e,t,n){var a;return n||(a=(0,r.Qo)((function(e){n=e}))),e&&(0,i.R3R)(e)>0?(0,r.Dv)(o(e[0],t),(function(){s((0,i.KVm)(e,1),t,n)})):n(),a}},8257:(e,t,n)=>{"use strict";n.d(t,{s:()=>m});var r,i=n(8279),a=n(269),o=n(9749),s=n(6182),c=n(3775),l=n(3673),u=n(6492),h=n(2317),d=n(836),f=n(8969),p="getPlugin",v=((r={})[u.Bw]={isVal:l.Gh,v:{}},r),m=function(){function e(){var t,n,r,m,g,y=this;function E(e){void 0===e&&(e=null);var t=e;if(!t){var i=n||(0,h.i8)(null,{},y[u.eT]);t=r&&r[p]?i[s.$o](null,r[p]):i[s.$o](null,r)}return t}function w(e,t,i){(0,o.e)(e,v,(0,c.y0)(t)),!i&&t&&(i=t[s.DI]()[s.uR]());var a=r;r&&r[p]&&(a=r[p]()),y[u.eT]=t,n=(0,h.i8)(i,e,t,a)}function P(){t=!1,y[u.eT]=null,n=null,r=null,g=(0,f.w)(),m=(0,d.P)()}P(),(0,i.A)(e,y,(function(e){e[s.mE]=function(e,n,r,i){w(e,n,i),t=!0},e[s.Ik]=function(t,n){var i,a=e[u.eT];if(a&&(!t||a===t[u.eT]())){var o,c=!1,l=t||(0,h.tS)(null,a,r&&r[p]?r[p]():r),d=n||((i={reason:0})[s.tI]=!1,i);return e[s.tn]&&!0===e[s.tn](l,d,f)?o=!0:f(),o}function f(){c||(c=!0,m.run(l,n),g.run(l[s.e4]()),!0===o&&l[s.$5](d),P())}},e[s.HC]=function(t,n){var i=e[u.eT];if(i&&(!t||i===t[u.eT]())){var a,o=!1,c=t||(0,h.nU)(null,i,r&&r[p]?r[p]():r),l=n||{reason:0};return e._doUpdate&&!0===e._doUpdate(c,l,d)?a=!0:d(),a}function d(){o||(o=!0,w(c.getCfg(),c.core(),c[s.uR]()))}},(0,l.RF)(e,"_addUnloadCb",(function(){return m}),"add"),(0,l.RF)(e,"_addHook",(function(){return g}),"add"),(0,a.vF1)(e,"_unloadHooks",{g:function(){return g}})})),y[s.e4]=function(e){return E(e)[s.e4]()},y[s.tZ]=function(){return t},y.setInitialized=function(e){t=e},y[s.YH]=function(e){r=e},y[s.$5]=function(e,t){t?t[s.$5](e):r&&(0,a.Tnt)(r[u.qT])&&r[u.qT](e,null)},y._getTelCtx=E}return e.__ieDyn=1,e}()},7847:(e,t,n)=>{"use strict";n.d(t,{i:()=>r,x:()=>i});var r=500,i="Microsoft_ApplicationInsights_BypassAjaxInstrumentation"},5034:(e,t,n)=>{"use strict";n.d(t,{It:()=>V,gi:()=>x,um:()=>N,xN:()=>A});var r,i,a,o=n(269),s=n(2475),c=n(9749),l=n(6182),u=n(3775),h=n(7292),d=n(3673),f=n(6492),p="toGMTString",v="toUTCString",m="cookie",g="expires",y="isCookieUseDisabled",E="disableCookiesUsage",w="_ckMgr",P=null,_=null,b=null,S={},C={},T=((r={cookieCfg:(0,s.NU)((i={},i[f.Fk]={fb:"cookieDomain",dfVal:d.Gh},i.path={fb:"cookiePath",dfVal:d.Gh},i.enabled=f.HP,i.ignoreCookies=f.HP,i.blockedCookies=f.HP,i)),cookieDomain:f.HP,cookiePath:f.HP})[E]=f.HP,r);function I(){!a&&(a=(0,o.nRs)((function(){return(0,o.YEm)()})))}function k(e){return!e||e.isEnabled()}function M(e,t){return!!(t&&e&&(0,o.cyL)(e.ignoreCookies))&&-1!==(0,o.rDm)(e.ignoreCookies,t)}function O(e,t){var n=t[l.XM];if((0,o.hXl)(n)){var r=void 0;(0,o.b07)(e[y])||(r=!e[y]),(0,o.b07)(e[E])||(r=!e[E]),n=r}return n}function N(e,t){var n;if(e)n=e.getCookieMgr();else if(t){var r=t.cookieCfg;n=r&&r[w]?r[w]:A(t)}return n||(n=function(e,t){var n=A[w]||C[w];return n||(n=A[w]=A(e,t),C[w]=n),n}(t,(e||{})[l.Uw])),n}function A(e,t){var n,r,i,a,s,u,m,y,E;e=(0,c.e)(e||C,null,t).cfg,s=(0,c.a)(e,(function(t){t[l.h0](t.cfg,T),r=t.ref(t.cfg,"cookieCfg"),i=r[f.QW]||"/",a=r[f.Fk],u=!1!==O(e,r),m=r.getCookie||F,y=r.setCookie||L,E=r.delCookie||L}),t);var P=((n={isEnabled:function(){var n=!1!==O(e,r)&&u&&x(t),i=C[w];return n&&i&&P!==i&&(n=k(i)),n},setEnabled:function(e){u=!1!==e,r[l.XM]=e},set:function(e,t,n,s,c){var u=!1;if(k(P)&&!function(e,t){return!!(t&&e&&(0,o.cyL)(e.blockedCookies)&&-1!==(0,o.rDm)(e.blockedCookies,t))||M(e,t)}(r,e)){var m={},E=(0,o.EHq)(t||f.m5),w=(0,o.HzD)(E,";");if(-1!==w&&(E=(0,o.EHq)((0,o.ZWZ)(t,w)),m=D((0,o.P0f)(t,w+1))),(0,d.KY)(m,f.Fk,s||a,o.zzB,o.b07),!(0,o.hXl)(n)){var b=(0,h.lT)();if((0,o.b07)(m[g])){var S=(0,o.f0d)()+1e3*n;if(S>0){var C=new Date;C.setTime(S),(0,d.KY)(m,g,j(C,b?p:v)||j(C,b?p:v)||f.m5,o.zzB)}}b||(0,d.KY)(m,"max-age",f.m5+n,null,o.b07)}var T=(0,h.g$)();T&&"https:"===T[l.Qg]&&((0,d.KY)(m,"secure",null,null,o.b07),null===_&&(_=!V(((0,o.w3n)()||{})[l.tX])),_&&(0,d.KY)(m,"SameSite","None",null,o.b07)),(0,d.KY)(m,f.QW,c||i,null,o.b07),y(e,R(E,m)),u=!0}return u},get:function(e){var t=f.m5;return k(P)&&!M(r,e)&&(t=m(e)),t},del:function(e,t){var n=!1;return k(P)&&(n=P.purge(e,t)),n},purge:function(e,n){var r,i=!1;if(x(t)){var a=((r={})[f.QW]=n||"/",r[g]="Thu, 01 Jan 1970 00:00:01 GMT",r);(0,h.lT)()||(a["max-age"]="0"),E(e,R(f.m5,a)),i=!0}return i}})[l.M5]=function(e){s&&s.rm(),s=null},n);return P[w]=P,P}function x(e){if(null===P){P=!1,!a&&I();try{var t=a.v||{};P=void 0!==t[m]}catch(t){(0,u.ZP)(e,2,68,"Cannot access document.cookie - "+(0,d.lL)(t),{exception:(0,o.mmD)(t)})}}return P}function D(e){var t={};if(e&&e[l.oI]){var n=(0,o.EHq)(e)[l.sY](";");(0,o.Iuo)(n,(function(e){if(e=(0,o.EHq)(e||f.m5)){var n=(0,o.HzD)(e,"=");-1===n?t[e]=null:t[(0,o.EHq)((0,o.ZWZ)(e,n))]=(0,o.EHq)((0,o.P0f)(e,n+1))}}))}return t}function j(e,t){return(0,o.Tnt)(e[t])?e[t]():null}function R(e,t){var n=e||f.m5;return(0,o.zav)(t,(function(e,t){n+="; "+e+((0,o.hXl)(t)?f.m5:"="+t)})),n}function F(e){var t=f.m5;if(!a&&I(),a.v){var n=a.v[m]||f.m5;b!==n&&(S=D(n),b=n),t=(0,o.EHq)(S[e]||f.m5)}return t}function L(e,t){!a&&I(),a.v&&(a.v[m]=e+"="+t)}function V(e){return!(!(0,o.KgX)(e)||!(0,d.Ju)(e,"CPU iPhone OS 12")&&!(0,d.Ju)(e,"iPad; CPU OS 12")&&!((0,d.Ju)(e,"Macintosh; Intel Mac OS X 10_14")&&(0,d.Ju)(e,"Version/")&&(0,d.Ju)(e,"Safari"))&&(!(0,d.Ju)(e,"Macintosh; Intel Mac OS X 10_14")||!(0,o.Cv9)(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)"))&&!(0,d.Ju)(e,"Chrome/5")&&!(0,d.Ju)(e,"Chrome/6")&&(!(0,d.Ju)(e,"UnrealEngine")||(0,d.Ju)(e,"Chrome"))&&!(0,d.Ju)(e,"UCBrowser/12")&&!(0,d.Ju)(e,"UCBrowser/11"))}},9882:(e,t,n)=>{"use strict";n.d(t,{aq:()=>o,cL:()=>s});var r=n(269),i=n(6492),a=n(6535);function o(){var e=s();return(0,r.P0f)(e,0,8)+"-"+(0,r.P0f)(e,8,12)+"-"+(0,r.P0f)(e,12,16)+"-"+(0,r.P0f)(e,16,20)+"-"+(0,r.P0f)(e,20)}function s(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=i.m5,o=0;o<4;o++)n+=t[15&(e=(0,a.VN)())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var s=t[8+(3&(0,a.VN)())|0];return(0,r.hKY)(n,0,8)+(0,r.hKY)(n,9,4)+"4"+(0,r.hKY)(n,13,3)+s+(0,r.hKY)(n,16,3)+(0,r.hKY)(n,19,12)}},4276:(e,t,n)=>{"use strict";n.d(t,{T:()=>f,Z:()=>d});var r=n(269),i=n(6182),a=n(3673),o=n(6492),s=n(6535),c="3.3.4",l="."+(0,s.Si)(6),u=0;function h(e){return 1===e[i.re]||9===e[i.re]||!+e[i.re]}function d(e,t){return void 0===t&&(t=!1),(0,a.cH)(e+u+++(t?"."+c:o.m5)+l)}function f(e){var t={id:d("_aiData-"+(e||o.m5)+"."+c),accept:function(e){return h(e)},get:function(e,n,i,o){var s=e[t.id];return s?s[(0,a.cH)(n)]:(o&&(s=function(e,t){var n=t[e.id];if(!n){n={};try{h(t)&&(0,r.vF1)(t,e.id,{e:!1,v:n})}catch(e){}}return n}(t,e),s[(0,a.cH)(n)]=i),i)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch(e){}}};return t}},7867:(e,t,n)=>{"use strict";n.d(t,{$:()=>u,M:()=>h});var r,i=n(269),a=n(6182),o=n(6492),s=[o.fc,o.Yp,o.dI,o.l0],c=null;function l(e,t){return function(){var n=arguments,r=u(t);if(r){var i=r.listener;i&&i[e]&&i[e][a.y9](i,n)}}}function u(e){var t,n=c;return n||!0===e.disableDbgExt||(n=c||((t=(0,i.zS2)("Microsoft"))&&(c=t.ApplicationInsights),c)),n?n.ChromeDbgExt:null}function h(e){if(!r){r={};for(var t=0;t<s[a.oI];t++)r[s[t]]=l(s[t],e)}return r}},3775:(e,t,n)=>{"use strict";n.d(t,{OG:()=>P,Oc:()=>_,WD:()=>m,ZP:()=>w,wq:()=>y,y0:()=>g});var r,i=n(8279),a=n(269),o=n(9749),s=n(6182),c=n(7867),l=n(7292),u=n(6492),h="warnToConsole",d={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},f=((r={})[0]=null,r[1]="errorToConsole",r[2]=h,r[3]="debugToConsole",r);function p(e){return e?'"'+e[s.W7](/\"/g,u.m5)+'"':u.m5}function v(e,t){var n=(0,l.U5)();if(n){var r="log";n[e]&&(r=e),(0,a.Tnt)(n[r])&&n[r](t)}}var m=function(){function e(e,t,n,r){void 0===n&&(n=!1);var i=this;i[s.JR]=e,i[s.pM]=(n?"AI: ":"AI (Internal): ")+e;var a=u.m5;(0,l.Z)()&&(a=(0,l.hm)().stringify(r));var o=(t?" message:"+p(t):u.m5)+(r?" props:"+p(a):u.m5);i[s.pM]+=o}return e.dataType="MessageData",e}();function g(e,t){return(e||{})[s.Uw]||new y(t)}var y=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n,r,l,u,p,g=0,y={};(0,i.A)(e,this,(function(e){function i(t,n){if(!(g>=l)){var i=!0,a="AITR_"+n[s.JR];if(y[a]?i=!1:y[a]=!0,i&&(t<=r&&(e.queue[s.y5](n),g++,E(1===t?"error":"warn",n)),g===l)){var o="Internal events throttle limit per PageView reached for this app.",c=new m(23,o,!1);e.queue[s.y5](c),1===t?e.errorToConsole(o):e[s.on](o)}}}function E(e,n){var r=(0,c.$)(t||{});r&&r[s.e4]&&r[s.e4](e,n)}p=function(t){return(0,o.a)((0,o.e)(t,d,e).cfg,(function(e){var t=e.cfg;n=t[s.Bl],r=t.loggingLevelTelemetry,l=t.maxMessageLimit,u=t.enableDebug}))}(t||{}),e.consoleLoggingLevel=function(){return n},e[s.ih]=function(t,r,o,c,l){void 0===l&&(l=!1);var d=new m(r,o,l,c);if(u)throw(0,a.mmD)(d);var p=f[t]||h;if((0,a.b07)(d[s.pM]))E("throw"+(1===t?"Critical":"Warning"),d);else{if(l){var v=+d[s.JR];!y[v]&&n>=t&&(e[p](d[s.pM]),y[v]=!0)}else n>=t&&e[p](d[s.pM]);i(t,d)}},e.debugToConsole=function(e){v("debug",e),E("warning",e)},e[s.on]=function(e){v("warn",e),E("warning",e)},e.errorToConsole=function(e){v("error",e),E("error",e)},e.resetInternalMessageCount=function(){g=0,y={}},e[s.sx]=i,e[s.M5]=function(e){p&&p.rm(),p=null}}))}return e.__ieDyn=1,e}();function E(e){return e||new y}function w(e,t,n,r,i,a){void 0===a&&(a=!1),E(e)[s.ih](t,n,r,i,a)}function P(e,t){E(e)[s.on](t)}function _(e,t,n){E(e)[s.sx](t,n)}},7292:(e,t,n)=>{"use strict";n.d(t,{$Z:()=>V,Iu:()=>$,L0:()=>x,MY:()=>M,PV:()=>R,R7:()=>j,U5:()=>T,Uf:()=>D,Z:()=>I,cU:()=>S,g$:()=>C,hm:()=>k,iN:()=>O,lT:()=>A,lV:()=>N,xk:()=>F});var r=n(5664),i=n(269),a=n(6182),o=n(3673),s=n(6492),c="documentMode",l="location",u="console",h="JSON",d="crypto",f="msCrypto",p="ReactNative",v="msie",m="trident/",g="XMLHttpRequest",y=null,E=null,w=!1,P=null,_=null;function b(e,t){var n=!1;if(e){try{if(!(n=t in e)){var a=e[r.vR];a&&(n=t in a)}}catch(e){}if(!n)try{var o=new e;n=!(0,i.b07)(o[t])}catch(e){}}return n}function S(e){w=e}function C(e){if(e&&w){var t=(0,i.zS2)("__mockLocation");if(t)return t}return typeof location===r._1&&location?location:(0,i.zS2)(l)}function T(){return typeof console!==r.bA?console:(0,i.zS2)(u)}function I(){return Boolean(typeof JSON===r._1&&JSON||null!==(0,i.zS2)(h))}function k(){return I()?JSON||(0,i.zS2)(h):null}function M(){return(0,i.zS2)(d)}function O(){return(0,i.zS2)(f)}function N(){var e=(0,i.w3n)();return!(!e||!e.product)&&e.product===p}function A(){var e=(0,i.w3n)();if(e&&(e[a.tX]!==E||null===y)){var t=((E=e[a.tX])||s.m5)[a.OL]();y=(0,o.Ju)(t,v)||(0,o.Ju)(t,m)}return y}function x(e){if(void 0===e&&(e=null),!e){var t=(0,i.w3n)()||{};e=t?(t.userAgent||s.m5)[a.OL]():s.m5}var n=(e||s.m5)[a.OL]();if((0,o.Ju)(n,v)){var r=(0,i.YEm)()||{};return Math.max(parseInt(n[a.sY](v)[1]),r[c]||0)}if((0,o.Ju)(n,m)){var l=parseInt(n[a.sY](m)[1]);if(l)return l+4}return null}function D(e){return null!==_&&!1!==e||(_=(0,i.w9M)()&&Boolean((0,i.w3n)().sendBeacon)),_}function j(e){var t=!1;try{t=!!(0,i.zS2)("fetch");var n=(0,i.zS2)("Request");t&&e&&n&&(t=b(n,"keepalive"))}catch(e){}return t}function R(){return null===P&&(P=typeof XDomainRequest!==r.bA)&&F()&&(P=P&&!b((0,i.zS2)(g),"withCredentials")),P}function F(){var e=!1;try{e=!!(0,i.zS2)(g)}catch(e){}return e}function L(e,t){if(e)for(var n=0;n<e[a.oI];n++){var r=e[n];if(r[a.RS]&&r[a.RS]===t)return r}return{}}function V(e){var t=(0,i.YEm)();return t&&e?L(t.querySelectorAll("meta"),e).content:null}function $(e){var t,n=(0,i.FJj)();if(n){var r=n.getEntriesByType("navigation")||[];t=L((r[a.oI]>0?r[0]:{}).serverTiming,e).description}return t}},6149:(e,t,n)=>{"use strict";n.d(t,{Ds:()=>W,El:()=>I,Fc:()=>B,Hm:()=>N,ML:()=>x,Q3:()=>D,So:()=>R,Wg:()=>$,Ym:()=>j,ee:()=>H,lQ:()=>V,mB:()=>A,oS:()=>K,sq:()=>U,vF:()=>Y,zh:()=>F});var r=n(269),i=n(6182),a=n(4276),o=n(6492),s="on",c="attachEvent",l="addEventListener",u="detachEvent",h="removeEventListener",d="events",f="visibilitychange",p="pagehide",v="pageshow",m="unload",g="beforeunload",y=(0,a.Z)("aiEvtPageHide"),E=(0,a.Z)("aiEvtPageShow"),w=/\.[\.]+/g,P=/[\.]+$/,_=1,b=(0,a.T)("events"),S=/^([^.]*)(?:\.(.+)|)/;function C(e){return e&&e[i.W7]?e[i.W7](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,o.m5):e}function T(e,t){var n;if(t){var a=o.m5;(0,r.cyL)(t)?(a=o.m5,(0,r.Iuo)(t,(function(e){(e=C(e))&&("."!==e[0]&&(e="."+e),a+=e)}))):a=C(t),a&&("."!==a[0]&&(a="."+a),e=(e||o.m5)+a)}var s=S.exec(e||o.m5)||[];return(n={})[i.QM]=s[1],n.ns=(s[2]||o.m5).replace(w,".").replace(P,o.m5)[i.sY](".").sort().join("."),n}function I(e,t,n){var a=[],s=b.get(e,d,{},!1),c=T(t,n);return(0,r.zav)(s,(function(e,t){(0,r.Iuo)(t,(function(e){var t;c[i.QM]&&c[i.QM]!==e.evtName[i.QM]||c.ns&&c.ns!=c.ns||a[i.y5](((t={})[i.RS]=e.evtName[i.QM]+(e.evtName.ns?"."+e.evtName.ns:o.m5),t.handler=e[i.Yo],t))}))})),a}function k(e,t,n){void 0===n&&(n=!0);var r=b.get(e,d,{},n),i=r[t];return i||(i=r[t]=[]),i}function M(e,t,n,r){e&&t&&t[i.QM]&&(e[h]?e[h](t[i.QM],n,r):e[u]&&e[u](s+t[i.QM],n))}function O(e,t,n,r){for(var a=t[i.oI];a--;){var o=t[a];o&&(n.ns&&n.ns!==o.evtName.ns||r&&!r(o)||(M(e,o.evtName,o[i.Yo],o.capture),t[i.Ic](a,1)))}}function N(e,t){return t?T("xx",(0,r.cyL)(t)?[e].concat(t):[e,t]).ns[i.sY]("."):e}function A(e,t,n,r,a){var o;void 0===a&&(a=!1);var u=!1;if(e)try{var h=T(t,r);if(u=function(e,t,n,r){var a=!1;return e&&t&&t[i.QM]&&n&&(e[l]?(e[l](t[i.QM],n,r),a=!0):e[c]&&(e[c](s+t[i.QM],n),a=!0)),a}(e,h,n,a),u&&b.accept(e)){var d=((o={guid:_++,evtName:h})[i.Yo]=n,o.capture=a,o);k(e,h.type)[i.y5](d)}}catch(e){}return u}function x(e,t,n,a,o){if(void 0===o&&(o=!1),e)try{var s=T(t,a),c=!1;!function(e,t,n){if(t[i.QM])O(e,k(e,t[i.QM]),t,n);else{var a=b.get(e,d,{});(0,r.zav)(a,(function(r,i){O(e,i,t,n)})),0===(0,r.cGk)(a)[i.oI]&&b.kill(e,d)}}(e,s,(function(e){return!((!s.ns||n)&&e[i.Yo]!==n||(c=!0,0))})),c||M(e,s,n,o)}catch(e){}}function D(e,t,n,r){return void 0===r&&(r=!1),A(e,t,n,null,r)}function j(e,t,n,r){void 0===r&&(r=!1),x(e,t,n,null,r)}function R(e,t,n){var i=!1,a=(0,r.zkX)();a&&(i=A(a,e,t,n),i=A(a.body,e,t,n)||i);var o=(0,r.YEm)();return o&&(i=A(o,e,t,n)||i),i}function F(e,t,n){var i=(0,r.zkX)();i&&(x(i,e,t,n),x(i.body,e,t,n));var a=(0,r.YEm)();a&&x(a,e,t,n)}function L(e,t,n,a){var o=!1;return t&&e&&e[i.oI]>0&&(0,r.Iuo)(e,(function(e){e&&(n&&-1!==(0,r.rDm)(n,e)||(o=R(e,t,a)||o))})),o}function V(e,t,n,a){var o=!1;return t&&e&&(0,r.cyL)(e)&&!(o=L(e,t,n,a))&&n&&n[i.oI]>0&&(o=L(e,t,null,a)),o}function $(e,t,n){e&&(0,r.cyL)(e)&&(0,r.Iuo)(e,(function(e){e&&F(e,t,n)}))}function H(e,t,n){return V([g,m,p],e,t,n)}function W(e,t){$([g,m,p],e,t)}function B(e,t,n){var i=N(y,n),a=L([p],e,t,i);return t&&-1!==(0,r.rDm)(t,f)||(a=L([f],(function(t){var n=(0,r.YEm)();e&&n&&"hidden"===n.visibilityState&&e(t)}),t,i)||a),!a&&t&&(a=B(e,null,n)),a}function U(e,t){var n=N(y,t);$([p],e,n),$([f],null,n)}function K(e,t,n){var i=N(E,n),a=L([v],e,t,i);return!(a=L([f],(function(t){var n=(0,r.YEm)();e&&n&&"visible"===n.visibilityState&&e(t)}),t,i)||a)&&t&&(a=K(e,null,n)),a}function Y(e,t){var n=N(E,t);$([v],e,n),$([f],null,n)}},3673:(e,t,n)=>{"use strict";n.d(t,{CP:()=>b,Gh:()=>u,H$:()=>N,HU:()=>C,IL:()=>A,Ju:()=>d,KY:()=>v,LU:()=>x,Lo:()=>S,RF:()=>E,SZ:()=>P,_u:()=>f,c2:()=>m,cH:()=>h,hW:()=>_,jL:()=>I,lL:()=>p,o$:()=>w,qz:()=>y,r4:()=>T,w3:()=>F});var r=n(269),i=n(5664),a=n(6182),o=n(6492),s=/-([a-z])/g,c=/([^\w\d_$])/g,l=/^(\d+[\w\d_$])/;function u(e){return!(0,r.hXl)(e)}function h(e){var t=e;return t&&(0,r.KgX)(t)&&(t=(t=(t=t[a.W7](s,(function(e,t){return t.toUpperCase()})))[a.W7](c,"_"))[a.W7](l,(function(e,t){return"_"+t}))),t}function d(e,t){return!(!e||!t)&&-1!==(0,r.HzD)(e,t)}function f(e){return e&&e.toISOString()||""}function p(e){return(0,r.bJ7)(e)?e[a.RS]:o.m5}function v(e,t,n,r,i){var a=n;return e&&((a=e[t])===n||i&&!i(a)||r&&!r(n)||(a=n,e[t]=a)),a}function m(e,t,n){var i;return e?!(i=e[t])&&(0,r.hXl)(i)&&(i=(0,r.b07)(n)?{}:n,e[t]=i):i=(0,r.b07)(n)?{}:n,i}function g(e,t){var n=null,i=null;return(0,r.Tnt)(e)?n=e:i=e,function(){var e=arguments;if(n&&(i=n()),i)return i[t][a.y9](i,e)}}function y(e,t,n){if(e&&t&&(0,r.Gvm)(e)&&(0,r.Gvm)(t)){var i=function(i){if((0,r.KgX)(i)){var a=t[i];(0,r.Tnt)(a)?n&&!n(i,!0,t,e)||(e[i]=g(t,i)):n&&!n(i,!1,t,e)||((0,r.KhI)(e,i)&&delete e[i],(0,r.vF1)(e,i,{g:function(){return t[i]},s:function(e){t[i]=e}}))}};for(var a in t)i(a)}return e}function E(e,t,n,i,a){e&&t&&n&&(!1!==a||(0,r.b07)(e[t]))&&(e[t]=g(n,i))}function w(e,t,n,i){return e&&t&&(0,r.Gvm)(e)&&(0,r.cyL)(n)&&(0,r.Iuo)(n,(function(n){(0,r.KgX)(n)&&E(e,n,t,n,i)})),e}function P(e){return function(){var t=this;e&&(0,r.zav)(e,(function(e,n){t[e]=n}))}}function _(e){return e&&r.vE3&&(e=(0,i.s6)((0,r.vE3)({},e))),e}function b(e,t,n,i,o,s){var c=arguments,l=c[0]||{},u=c[a.oI],h=!1,d=1;for(u>0&&(0,r.Lmq)(l)&&(h=l,l=c[d]||{},d++),(0,r.Gvm)(l)||(l={});d<u;d++){var f=c[d],p=(0,r.cyL)(f),v=(0,r.Gvm)(f);for(var m in f)if(p&&m in f||v&&(0,r.KhI)(f,m)){var g=f[m],y=void 0;if(h&&g&&((y=(0,r.cyL)(g))||(0,r.QdQ)(g))){var E=l[m];y?(0,r.cyL)(E)||(E=[]):(0,r.QdQ)(E)||(E={}),g=b(h,E,g)}void 0!==g&&(l[m]=g)}}return l}function S(e){try{return e.responseText}catch(e){}return null}function C(e,t){return e?"XDomainRequest,Response:"+S(e)||0:t}function T(e,t){return e?"XMLHttpRequest,Status:"+e[a.cV]+",Response:"+S(e)||0:t}function I(e,t){return t&&((0,r.EtT)(t)?e=[t].concat(e):(0,r.cyL)(t)&&(e=t.concat(e))),e}Object.getPrototypeOf;var k="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",M="withCredentials",O="timeout";function N(e,t,n,r,i,a){function o(e,t,n){try{e[t]=n}catch(e){}}void 0===r&&(r=!1),void 0===i&&(i=!1);var s=new XMLHttpRequest;return r&&o(s,k,r),n&&o(s,M,n),s.open(e,t,!i),n&&o(s,M,n),!i&&a&&o(s,O,a),s}function A(e){var t={};if((0,r.KgX)(e)){var n=(0,r.EHq)(e)[a.sY](/[\r\n]+/);(0,r.Iuo)(n,(function(e){if(e){var n=e.indexOf(": ");if(-1!==n){var i=(0,r.EHq)(e.substring(0,n))[a.OL](),o=(0,r.EHq)(e.substring(n+1));t[i]=o}else t[(0,r.EHq)(e)]=1}}))}return t}function x(e,t,n){if(!e[n]&&t&&t[a.Az]){var i=t[a.Az](n);i&&(e[n]=(0,r.EHq)(i))}return e}var D="kill-duration",j="kill-duration-seconds",R="time-delta-millis";function F(e,t){var n={};return e[a.wJ]?n=A(e[a.wJ]()):t&&(n=x(n,e,R),n=x(n,e,D),n=x(n,e,j)),n}},6492:(e,t,n)=>{"use strict";n.d(t,{Bw:()=>l,Ev:()=>E,Fk:()=>P,HP:()=>r,Hr:()=>c,LZ:()=>a,QW:()=>_,Vj:()=>y,Vo:()=>d,Yd:()=>s,Yp:()=>p,dI:()=>v,eT:()=>o,fc:()=>f,jy:()=>u,kI:()=>w,l0:()=>m,m5:()=>i,qT:()=>h,s4:()=>g,xW:()=>b});var r=void 0,i="",a="channels",o="core",s="createPerfMgr",c="disabled",l="extensionConfig",u="extensions",h="processTelemetry",d="priority",f="eventsSent",p="eventsDiscarded",v="eventsSendRequest",m="perfEvent",g="offlineEventsStored",y="offlineBatchSent",E="offlineBatchDrop",w="getPerfMgr",P="domain",_="path",b="Not dynamic - "},1356:(e,t,n)=>{"use strict";n.d(t,{h:()=>d});var r=n(8279),i=n(8205),a=n(269),o=n(9749),s=n(6182),c=n(6492),l={perfEvtsSendAll:!1};function u(e){e.h=null;var t=e.cb;e.cb=[],(0,a.Iuo)(t,(function(e){(0,a.gBW)(e.fn,[e.arg])}))}function h(e,t,n,r){(0,a.Iuo)(e,(function(e){e&&e[t]&&(n?(n.cb[s.y5]({fn:r,arg:e}),n.h=n.h||(0,a.dRz)(u,0,n)):(0,a.gBW)(r,[e]))}))}var d=function(){function e(t){var n,u;this.listeners=[];var d=[],f={h:null,cb:[]},p=(0,o.e)(t,l);u=p[s.x6]((function(e){n=!!e.cfg.perfEvtsSendAll})),(0,r.A)(e,this,(function(e){(0,a.vF1)(e,"listeners",{g:function(){return d}}),e[s.vR]=function(e){d[s.y5](e)},e[s.h3]=function(e){for(var t=(0,a.rDm)(d,e);t>-1;)d[s.Ic](t,1),t=(0,a.rDm)(d,e)},e[c.fc]=function(e){h(d,c.fc,f,(function(t){t[c.fc](e)}))},e[c.Yp]=function(e,t){h(d,c.Yp,f,(function(n){n[c.Yp](e,t)}))},e[c.dI]=function(e,t){h(d,c.dI,t?f:null,(function(n){n[c.dI](e,t)}))},e[c.l0]=function(e){e&&(!n&&e[s.Zu]()||h(d,c.l0,null,(function(t){e[s.tI]?(0,a.dRz)((function(){return t[c.l0](e)}),0):t[c.l0](e)})))},e[c.s4]=function(e){e&&e[s.oI]&&h(d,c.s4,f,(function(t){t[c.s4](e)}))},e[c.Vj]=function(e){e&&e[s.Cd]&&h(d,c.Vj,f,(function(t){t[c.Vj](e)}))},e[c.Ev]=function(e,t){if(e>0){var n=t||0;h(d,c.Ev,f,(function(t){t[c.Ev](e,n)}))}},e[s.M5]=function(e){var t,n=function(){u&&u.rm(),u=null,d=[],f.h&&f.h[s._w](),f.h=null,f.cb=[]};if(h(d,"unload",null,(function(n){var r=n[s.M5](e);r&&(t||(t=[]),t[s.y5](r))})),t)return(0,i.Qo)((function(e){return(0,i.Dv)((0,i.Xf)(t),(function(){n(),e()}))}));n()}}))}return e.__ieDyn=1,e}()},8156:(e,t,n)=>{"use strict";n.d(t,{NS:()=>d,Q6:()=>h,Z4:()=>v,r2:()=>p});var r=n(8279),i=n(269),a=n(6182),o=n(6492),s="ctx",c="ParentContextKey",l="ChildrenContextKey",u=null,h=function(){function e(t,n,r){var o,u=this;u.start=(0,i.f0d)(),u[a.RS]=t,u[a.tI]=r,u[a.Zu]=function(){return!1},(0,i.Tnt)(n)&&(0,i.vF1)(u,"payload",{g:function(){return!o&&(0,i.Tnt)(n)&&(o=n(),n=null),o}}),u[a.O_]=function(t){return t?t===e[c]||t===e[l]?u[t]:(u[s]||{})[t]:null},u[a.e_]=function(t,n){t&&(t===e[c]?(u[t]||(u[a.Zu]=function(){return!0}),u[t]=n):t===e[l]?u[t]=n:(u[s]=u[s]||{})[t]=n)},u[a.Ru]=function(){var t=0,n=u[a.O_](e[l]);if((0,i.cyL)(n))for(var r=0;r<n[a.oI];r++){var o=n[r];o&&(t+=o[a.fA])}u[a.fA]=(0,i.f0d)()-u.start,u.exTime=u[a.fA]-t,u[a.Ru]=function(){}}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),d=function(){function e(t){this.ctx={},(0,r.A)(e,this,(function(e){e.create=function(e,t,n){return new h(e,t,n)},e.fire=function(e){e&&(e[a.Ru](),t&&(0,i.Tnt)(t[o.l0])&&t[o.l0](e))},e[a.e_]=function(t,n){t&&((e[s]=e[s]||{})[t]=n)},e[a.O_]=function(t){return(e[s]||{})[t]}}))}return e.__ieDyn=1,e}(),f="CoreUtils.doPerf";function p(e,t,n,r,i){if(e){var s=e;if(s[o.kI]&&(s=s[o.kI]()),s){var u=void 0,d=s[a.O_](f);try{if(u=s.create(t(),r,i)){if(d&&u[a.e_]&&(u[a.e_](h[c],d),d[a.O_]&&d[a.e_])){var p=d[a.O_](h[l]);p||(p=[],d[a.e_](h[l],p)),p[a.y5](u)}return s[a.e_](f,u),n(u)}}catch(e){u&&u[a.e_]&&u[a.e_]("exception",e)}finally{u&&s.fire(u),s[a.e_](f,d)}}}return n()}function v(){return u}},2317:(e,t,n)=>{"use strict";n.d(t,{PV:()=>w,W0:()=>P,i8:()=>g,nU:()=>E,tS:()=>y});var r=n(269),i=n(991),a=n(9749),o=n(6182),s=n(3775),c=n(3673),l=n(6492),u=n(8156),h=n(380),d="TelemetryPluginChain",f="_hasRun",p="_getTelCtx",v=0;function m(e,t,n,c){var u=null,h=[];t||(t=(0,a.e)({},null,n[o.Uw])),null!==c&&(u=c?function(e,t,n){for(;e;){if(e[o.AP]()===n)return e;e=e[o.uR]()}return w([n],t.config||{},t)}(e,n,c):e);var d={_next:function(){var e=u;if(u=e?e[o.uR]():null,!e){var t=h;t&&t[o.oI]>0&&((0,r.Iuo)(t,(function(e){try{e.func.call(e.self,e.args)}catch(e){(0,s.ZP)(n[o.Uw],2,73,"Unexpected Exception during onComplete - "+(0,r.mmD)(e))}})),h=[])}return e},ctx:{core:function(){return n},diagLog:function(){return(0,s.y0)(n,t.cfg)},getCfg:function(){return t.cfg},getExtCfg:function(e,n){var a=f(e,!0);return n&&(0,r.zav)(n,(function(e,n){if((0,r.hXl)(a[e])){var o=t.cfg[e];!o&&(0,r.hXl)(o)||(a[e]=o)}(0,i.q)(t,a,e,n)})),t[o.h0](a,n)},getConfig:function(e,n,i){void 0===i&&(i=!1);var a,o=f(e,!1),s=t.cfg;return!o||!o[n]&&(0,r.hXl)(o[n])?!s[n]&&(0,r.hXl)(s[n])||(a=s[n]):a=o[n],a||!(0,r.hXl)(a)?a:i},hasNext:function(){return!!u},getNext:function(){return u},setNext:function(e){u=e},iterate:function(e){for(var t;t=d._next();){var n=t[o.AP]();n&&e(n)}},onComplete:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];e&&h[o.y5]({func:e,self:(0,r.b07)(t)?d.ctx:t,args:n})}}};function f(e,n){var r=null,i=t.cfg;if(i&&e){var a=i[l.Bw];!a&&n&&(a={}),i[l.Bw]=a,(a=t.ref(i,l.Bw))&&(!(r=a[e])&&n&&(r={}),a[e]=r,r=t.ref(a,e))}return r}return d}function g(e,t,n,i){var s=(0,a.e)(t),c=m(e,s,n,i),u=c.ctx;return u[o.$5]=function(e){var t=c._next();return t&&t[l.qT](e,u),!t},u[o.$o]=function(e,t){return void 0===e&&(e=null),(0,r.cyL)(e)&&(e=w(e,s.cfg,n,t)),g(e||u[o.uR](),s.cfg,n,t)},u}function y(e,t,n){var i=(0,a.e)(t.config),s=m(e,i,t,n),c=s.ctx;return c[o.$5]=function(e){var t=s._next();return t&&t[o.M5](c,e),!t},c[o.$o]=function(e,n){return void 0===e&&(e=null),(0,r.cyL)(e)&&(e=w(e,i.cfg,t,n)),y(e||c[o.uR](),t,n)},c}function E(e,t,n){var i=(0,a.e)(t.config),s=m(e,i,t,n).ctx;return s[o.$5]=function(e){return s.iterate((function(t){(0,r.Tnt)(t[o.HC])&&t[o.HC](s,e)}))},s[o.$o]=function(e,n){return void 0===e&&(e=null),(0,r.cyL)(e)&&(e=w(e,i.cfg,t,n)),E(e||s[o.uR](),t,n)},s}function w(e,t,n,i){var a=null,c=!i;if((0,r.cyL)(e)&&e[o.oI]>0){var m=null;(0,r.Iuo)(e,(function(e){if(c||i!==e||(c=!0),c&&e&&(0,r.Tnt)(e[l.qT])){var y=function(e,t,n){var i,a=null,c=(0,r.Tnt)(e[l.qT]),m=(0,r.Tnt)(e[o.YH]),y={getPlugin:function(){return e},getNext:function(){return a},processTelemetry:function(i,s){E(s=s||function(){var i;return e&&(0,r.Tnt)(e[p])&&(i=e[p]()),i||(i=g(y,t,n)),i}(),(function(t){if(!e||!c)return!1;var n=(0,h.Cr)(e);return!n[o.Ik]&&!n[l.Hr]&&(m&&e[o.YH](a),e[l.qT](i,t),!0)}),"processTelemetry",(function(){return{item:i}}),!i.sync)||s[o.$5](i)},unload:function(t,n){E(t,(function(){var r=!1;if(e){var i=(0,h.Cr)(e),a=e[l.eT]||i[l.eT];!e||a&&a!==t.core()||i[o.Ik]||(i[l.eT]=null,i[o.Ik]=!0,i[o.tZ]=!1,e[o.Ik]&&!0===e[o.Ik](t,n)&&(r=!0))}return r}),"unload",(function(){}),n[o.tI])||t[o.$5](n)},update:function(t,n){E(t,(function(){var r=!1;if(e){var i=(0,h.Cr)(e),a=e[l.eT]||i[l.eT];!e||a&&a!==t.core()||i[o.Ik]||e[o.HC]&&!0===e[o.HC](t,n)&&(r=!0)}return r}),"update",(function(){}),!1)||t[o.$5](n)},_id:i=e?e[o.Ju]+"-"+e[l.Vo]+"-"+v++:"Unknown-0-"+v++,_setNext:function(e){a=e}};function E(t,n,c,h,p){var v=!1,m=e?e[o.Ju]:d,g=t[f];return g||(g=t[f]={}),t.setNext(a),e&&(0,u.r2)(t[l.eT](),(function(){return m+":"+c}),(function(){g[i]=!0;try{var e=a?a._id:l.m5;e&&(g[e]=!1),v=n(t)}catch(e){var u=!a||g[a._id];u&&(v=!0),a&&u||(0,s.ZP)(t[o.e4](),1,73,"Plugin ["+m+"] failed during "+c+" - "+(0,r.mmD)(e)+", run flags: "+(0,r.mmD)(g))}}),h,p),v}return(0,r.N6t)(y)}(e,t,n);a||(a=y),m&&m._setNext(y),m=y}}))}return i&&!a?w([i],t,n):a}var P=function(e,t,n,i){var a=g(e,t,n,i);(0,c.o$)(this,a,(0,r.cGk)(a))}},6535:(e,t,n)=>{"use strict";n.d(t,{Si:()=>g,VN:()=>m,Z1:()=>v});var r=n(269),i=n(6182),a=n(7292),o=n(6492),s=4294967296,c=4294967295,l=123456789,u=987654321,h=!1,d=l,f=u;function p(){try{var e=2147483647&(0,r.f0d)();(t=(Math.random()*s^e)+e)<0&&(t>>>=0),d=l+t&c,f=u-t&c,h=!0}catch(e){}var t}function v(e){return e>0?Math.floor(m()/c*(e+1))>>>0:0}function m(e){var t=0,n=(0,a.MY)()||(0,a.iN)();return n&&n.getRandomValues&&(t=n.getRandomValues(new Uint32Array(1))[0]&c),0===t&&(0,a.lT)()&&(h||p(),t=function(e){var t=((f=36969*(65535&f)+(f>>16)&c)<<16)+(65535&(d=18e3*(65535&d)+(d>>16)&c))>>>0&c|0;return t>>>=0}()&c),0===t&&(t=Math.floor(s*Math.random()|0)),e||(t>>>=0),t}function g(e){void 0===e&&(e=22);for(var t=m()>>>0,n=0,r=o.m5;r[i.oI]<e;)n++,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===n&&(t=(m()<<2&4294967295|3&t)>>>0,n=0);return r}},1190:(e,t,n)=>{"use strict";n.d(t,{x:()=>s});var r=n(269),i=n(6182),a=n(3775),o=n(7292);function s(e,t){try{if(e&&""!==e){var n=(0,o.hm)().parse(e);if(n&&n[i.cp]&&n[i.cp]>=n.itemsAccepted&&n.itemsReceived-n.itemsAccepted===n.errors[i.oI])return n}}catch(n){(0,a.ZP)(t,1,43,"Cannot parse the response. "+(n[i.RS]||(0,r.mmD)(n)),{response:e})}return null}},856:(e,t,n)=>{"use strict";n.d(t,{v:()=>p});var r=n(8279),i=n(8205),a=n(269),o=n(6182),s=n(7847),c=n(3775),l=n(7292),u=n(3673),h="",d="&NoResponseBody=true",f="POST",p=function(){function e(){var t,n,p,v,m,g,y,E,w,P,_,b,S,C,T=0;(0,r.A)(e,this,(function(e,r){var I=!0;function k(e,t){(0,c.ZP)(p,2,26,"Failed to send telemetry.",{message:e}),O(t,400,{})}function M(e){k("No endpoint url is provided for the batch",e)}function O(e,t,n,r){try{e&&e(t,n,r)}catch(e){}}function N(e,t){var n=(0,a.w3n)(),r=e[o.Vq];if(!r)return M(t),!0;r=e[o.Vq]+(S?d:h);var i=e[o.Cd],s=v?i:new Blob([i],{type:"text/plain;charset=UTF-8"});return n.sendBeacon(r,s)}function A(e,t,n){var r=e[o.Cd];try{if(r)if(N(e,t))O(t,200,{},h);else{var i=m&&m.beaconOnRetry;i&&(0,a.Tnt)(i)?i(e,t,N):(E&&E[o.L](e,t,!0),(0,c.ZP)(p,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(e){v&&(0,c.OG)(p,"Failed to send telemetry using sendBeacon API. Ex:"+(0,a.mmD)(e)),O(t,v?0:400,{},h)}}function x(e,n,r){var s,c,l,d=e[o.c1]||{};!r&&t&&(s=(0,i.Qo)((function(e,t){c=e,l=t}))),v&&r&&e.disableXhrSync&&(r=!1);var p=e[o.Vq];if(!p)return M(n),void(c&&c(!1));var g=(0,u.H$)(f,p,I,!0,r,e[o.do]);function y(t){var r=m&&m.xhrOnComplete;if(r&&(0,a.Tnt)(r))r(t,n,e);else{var i=(0,u.Lo)(t);O(n,t[o.cV],(0,u.w3)(t,v),i)}}return v||g[o.yy]("Content-type","application/json"),(0,a.Iuo)((0,a.cGk)(d),(function(e){g[o.yy](e,d[e])})),g.onreadystatechange=function(){v||(y(g),4===g.readyState&&c&&c(!0))},g.onload=function(){v&&y(g)},g.onerror=function(e){O(n,v?g[o.cV]:400,(0,u.w3)(g,v),v?h:(0,u.r4)(g)),l&&l(e)},g.ontimeout=function(){O(n,v?g[o.cV]:500,(0,u.w3)(g,v),v?h:(0,u.r4)(g)),c&&c(!1)},g.send(e[o.Cd]),s}function D(e,n,r){var c,l,u,p,g=e[o.Vq],E=e[o.Cd],w=v?E:new Blob([E],{type:"application/json"}),P=new Headers,_=E[o.oI],b=!1,k=!1,N=e[o.c1]||{},A=((c={method:f,body:w})[s.x]=!0,c);e.headers&&(0,a.cGk)(e.headers)[o.oI]>0&&((0,a.Iuo)((0,a.cGk)(N),(function(e){P.append(e,N[e])})),A[o.c1]=P),y?A.credentials=y:I&&v&&(A.credentials="include"),r&&(A.keepalive=!0,T+=_,v?2===e._sendReason&&(b=!0,S&&(g+=d)):b=!0);var x=new Request(g,A);try{x[s.x]=!0}catch(e){}if(!r&&t&&(l=(0,i.Qo)((function(e,t){u=e,p=t}))),!g)return M(n),void(u&&u(!1));function D(e){O(n,v?0:400,{},v?h:e)}function j(e,t,r){var i=e[o.cV],s=m.fetchOnComplete;s&&(0,a.Tnt)(s)?s(e,n,r||h,t):O(n,i,{},r||h)}try{(0,i.Dv)(fetch(v?g:x,v?A:null),(function(t){if(r&&(T-=_,_=0),!k)if(k=!0,t.rejected)D(t.reason&&t.reason[o.pM]),p&&p(t.reason);else{var n=t[o.pF];try{v||n.ok?v&&!n.body?(j(n,null,h),u&&u(!0)):(0,i.Dv)(n.text(),(function(t){j(n,e,t[o.pF]),u&&u(!0)})):(D(n.statusText),u&&u(!1))}catch(e){D((0,a.mmD)(e)),p&&p(e)}}}))}catch(e){k||(D((0,a.mmD)(e)),p&&p(e))}return b&&!k&&(k=!0,O(n,200,{}),u&&u(!0)),v&&!k&&e[o.do]>0&&C&&C.set((function(){k||(k=!0,O(n,500,{}),u&&u(!0))}),e[o.do]),l}function j(e,t,n){var r=(0,a.zkX)(),i=new XDomainRequest,s=e[o.Cd];i.onload=function(){var n=(0,u.Lo)(i),r=m&&m.xdrOnComplete;r&&(0,a.Tnt)(r)?r(i,t,e):O(t,200,{},n)},i.onerror=function(){O(t,400,{},v?h:(0,u.HU)(i))},i.ontimeout=function(){O(t,500,{})},i.onprogress=function(){};var l=r&&r.location&&r.location[o.Qg]||"",d=e[o.Vq];if(d){if(!v&&0!==d.lastIndexOf(l,0)){var g="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";return(0,c.ZP)(p,2,40,". "+g),void k(g,t)}var y=v?d:d[o.W7](/^(https?:)/,"");i.open(f,y),e[o.do]&&(i[o.do]=e[o.do]),i.send(s),v&&n?C&&C.set((function(){i.send(s)}),0):i.send(s)}else M(t)}function R(){T=0,n=!1,t=!1,p=null,v=null,m=null,g=null,y=null,E=null,w=!1,P=!1,_=!1,b=!1,S=!1,C=null}R(),e[o.mE]=function(t,r){p=r,n&&(0,c.ZP)(p,1,28,"Sender is already initialized"),e.SetConfig(t),n=!0},e._getDbgPlgTargets=function(){return[n,v,g,t]},e.SetConfig=function(e){try{if(m=e.senderOnCompleteCallBack||{},g=!!e.disableCredentials,y=e.fetchCredentials,v=!!e.isOneDs,t=!!e.enableSendPromise,w=!!e.disableXhr,P=!!e.disableBeacon,_=!!e.disableBeaconSync,C=e.timeWrapper,S=!!e.addNoResponse,b=!!e.disableFetchKeepAlive,E={sendPOST:x},v||(I=!1),g){var n=(0,l.g$)();n&&n.protocol&&"file:"===n.protocol[o.OL]()&&(I=!1)}return!0}catch(e){}return!1},e.getSyncFetchPayload=function(){return T},e.getSenderInst=function(e,t){return e&&e[o.oI]?function(e,t){for(var n,r=0,i=null,a=0;null==i&&a<e[o.oI];)r=e[a],w||1!==r?2!==r||!(0,l.R7)(t)||t&&b?3!==r||!(0,l.Uf)()||(t?_:P)||(i=A):i=D:(0,l.PV)()?i=j:(0,l.xk)()&&(i=x),a++;return i?((n={_transport:r,_isSync:t})[o.L]=i,n):null}(e,t):null},e.getFallbackInst=function(){return E},e[o.tn]=function(e,t){R()}}))}return e.__ieDyn=1,e}()},380:(e,t,n)=>{"use strict";n.d(t,{Cr:()=>l,Xc:()=>h,pI:()=>u,u7:()=>d});var r=n(269),i=n(6182),a=n(4276),o=n(6492),s=n(1864),c=(0,a.T)("plugin");function l(e){return c.get(e,"state",{},!0)}function u(e,t){for(var n,a=[],s=null,c=e[i.uR]();c;){var u=c[i.AP]();if(u){s&&s[i.YH]&&u[o.qT]&&s[i.YH](u);var h=!!(n=l(u))[i.tZ];u[i.tZ]&&(h=u[i.tZ]()),h||a[i.y5](u),s=u,c=c[i.uR]()}}(0,r.Iuo)(a,(function(r){var a=e[o.eT]();r[i.mE](e.getCfg(),a,t,e[i.uR]()),n=l(r),r[o.eT]||n[o.eT]||(n[o.eT]=a),n[i.tZ]=!0,delete n[i.Ik]}))}function h(e){return e.sort((function(e,t){var n=0;if(t){var r=t[o.qT];e[o.qT]?n=r?e[o.Vo]-t[o.Vo]:1:r&&(n=-1)}else n=e?1:-1;return n}))}function d(e){var t={};return{getName:function(){return t[i.RS]},setName:function(n){e&&e.setName(n),t[i.RS]=n},getTraceId:function(){return t[i.P5]},setTraceId:function(n){e&&e.setTraceId(n),(0,s.hX)(n)&&(t[i.P5]=n)},getSpanId:function(){return t[i.wi]},setSpanId:function(n){e&&e.setSpanId(n),(0,s.wN)(n)&&(t[i.wi]=n)},getTraceFlags:function(){return t[i.Rr]},setTraceFlags:function(n){e&&e.setTraceFlags(n),t[i.Rr]=n}}}},836:(e,t,n)=>{"use strict";n.d(t,{P:()=>o});var r=n(269),i=n(6182),a=n(3775);function o(){var e=[];return{add:function(t){t&&e[i.y5](t)},run:function(t,n){(0,r.Iuo)(e,(function(e){try{e(t,n)}catch(e){(0,a.ZP)(t[i.e4](),2,73,"Unexpected error calling unload handler - "+(0,r.mmD)(e))}})),e=[]}}}},8969:(e,t,n)=>{"use strict";n.d(t,{d:()=>c,w:()=>l});var r,i,a=n(269),o=n(6182),s=n(3775);function c(e,t){r=e,i=t}function l(){var e=[];return{run:function(t){var n=e;e=[],(0,a.Iuo)(n,(function(e){try{(e.rm||e.remove).call(e)}catch(e){(0,s.ZP)(t,2,73,"Unloading:"+(0,a.mmD)(e))}})),r&&n[o.oI]>r&&(i?i("doUnload",n):(0,s.ZP)(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected."))},add:function(t){t&&((0,a.Yny)(e,t),r&&e[o.oI]>r&&(i?i("Add",e):(0,s.ZP)(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected.")))}}}},1864:(e,t,n)=>{"use strict";n.d(t,{L0:()=>b,N7:()=>_,V5:()=>C,ZI:()=>y,ef:()=>S,hX:()=>E,mJ:()=>P,wN:()=>w,wk:()=>g});var r=n(269),i=n(6182),a=n(9882),o=n(7292),s=n(6492),c=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,l="00",u="ff",h="00000000000000000000000000000000",d="0000000000000000",f=1;function p(e,t,n){return!(!e||e[i.oI]!==t||e===n||!e.match(/^[\da-f]*$/i))}function v(e,t,n){return p(e,t)?e:n}function m(e){(isNaN(e)||e<0||e>255)&&(e=1);for(var t=e.toString(16);t[i.oI]<2;)t="0"+t;return t}function g(e,t,n,o){var s;return(s={})[i.s]=p(o,2,u)?o:l,s[i.P5]=E(e)?e:(0,a.cL)(),s[i.wi]=w(t)?t:(0,r.ZWZ)((0,a.cL)(),16),s.traceFlags=n>=0&&n<=255?n:1,s}function y(e,t){var n;if(!e)return null;if((0,r.cyL)(e)&&(e=e[0]||""),!e||!(0,r.KgX)(e)||e[i.oI]>8192)return null;if(-1!==e.indexOf(",")){var a=e[i.sY](",");e=a[t>0&&a[i.oI]>t?t:0]}var o=c.exec((0,r.EHq)(e));return o&&o[1]!==u&&o[2]!==h&&o[3]!==d?((n={version:(o[1]||s.m5)[i.OL](),traceId:(o[2]||s.m5)[i.OL](),spanId:(o[3]||s.m5)[i.OL]()})[i.Rr]=parseInt(o[4],16),n):null}function E(e){return p(e,32,h)}function w(e){return p(e,16,d)}function P(e){return!!(e&&p(e[i.s],2,u)&&p(e[i.P5],32,h)&&p(e[i.wi],16,d)&&p(m(e[i.Rr]),2))}function _(e){return!!P(e)&&(e[i.Rr]&f)===f}function b(e){if(e){var t=m(e[i.Rr]);p(t,2)||(t="01");var n=e[i.s]||l;return"00"!==n&&"ff"!==n&&(n=l),"".concat(n.toLowerCase(),"-").concat(v(e.traceId,32,h).toLowerCase(),"-").concat(v(e.spanId,16,d).toLowerCase(),"-").concat(t.toLowerCase())}return""}function S(e){var t="traceparent",n=y((0,o.$Z)(t),e);return n||(n=y((0,o.Iu)(t),e)),n}function C(e){var t=e.getElementsByTagName("script"),n=[];return(0,r.Iuo)(t,(function(e){var t=e[i.NA]("src");if(t){var r=e[i.NA]("crossorigin"),a=!0===e.hasAttribute("async"),o=!0===e.hasAttribute("defer"),s=e[i.NA]("referrerpolicy"),c={url:t};r&&(c.crossOrigin=r),a&&(c.async=a),o&&(c.defer=o),s&&(c.referrerPolicy=s),n[i.y5](c)}})),n}},6182:(e,t,n)=>{"use strict";n.d(t,{$5:()=>N,$o:()=>$,AP:()=>I,Az:()=>ae,Bl:()=>V,Cd:()=>ce,DI:()=>A,Di:()=>j,FI:()=>M,HC:()=>q,Ic:()=>v,Ik:()=>H,JQ:()=>i,JR:()=>W,Ju:()=>E,K0:()=>m,L:()=>pe,M5:()=>R,NA:()=>Pe,OL:()=>r,O_:()=>le,P5:()=>ye,QM:()=>ne,Qg:()=>X,RF:()=>T,RS:()=>k,Rr:()=>we,Ru:()=>he,Uw:()=>d,Vq:()=>fe,W7:()=>ee,XM:()=>D,XW:()=>o,YH:()=>G,Yo:()=>re,Yq:()=>S,Zu:()=>se,_w:()=>g,by:()=>F,c1:()=>ve,cV:()=>ie,cp:()=>de,do:()=>me,e4:()=>K,e_:()=>ue,fA:()=>O,h0:()=>u,h3:()=>w,h4:()=>x,ih:()=>l,mE:()=>y,oI:()=>a,on:()=>c,pF:()=>C,pM:()=>B,re:()=>Z,s:()=>L,sY:()=>J,sl:()=>b,sx:()=>te,tI:()=>U,tX:()=>Q,tZ:()=>_,tn:()=>Y,uR:()=>z,vR:()=>P,wJ:()=>oe,wi:()=>Ee,x6:()=>h,y5:()=>p,y9:()=>f,yy:()=>ge,zs:()=>s});var r="toLowerCase",i="blkVal",a="length",o="rdOnly",s="notify",c="warnToConsole",l="throwInternal",u="setDf",h="watch",d="logger",f="apply",p="push",v="splice",m="hdlr",g="cancel",y="initialize",E="identifier",w="removeNotificationListener",P="addNotificationListener",_="isInitialized",b="instrumentationKey",S="INACTIVE",C="value",T="getNotifyMgr",I="getPlugin",k="name",M="iKey",O="time",N="processNext",A="getProcessTelContext",x="pollInternalLogs",D="enabled",j="stopPollingInternalLogs",R="unload",F="onComplete",L="version",V="loggingLevelConsole",$="createNew",H="teardown",W="messageId",B="message",U="isAsync",K="diagLog",Y="_doTeardown",q="update",z="getNext",G="setNextPlugin",X="protocol",Q="userAgent",J="split",Z="nodeType",ee="replace",te="logInternalMessage",ne="type",re="handler",ie="status",ae="getResponseHeader",oe="getAllResponseHeaders",se="isChildEvt",ce="data",le="getCtx",ue="setCtx",he="complete",de="itemsReceived",fe="urlString",pe="sendPOST",ve="headers",me="timeout",ge="setRequestHeader",ye="traceId",Ee="spanId",we="traceFlags",Pe="getAttribute"},5664:(e,t,n)=>{"use strict";n.d(t,{Wy:()=>c,_1:()=>i,bA:()=>a,hW:()=>r,s6:()=>s,vR:()=>o});var r="function",i="object",a="undefined",o="prototype",s=Object,c=s[o]},659:(e,t,n)=>{"use strict";n.d(t,{Im:()=>o,qU:()=>c,vz:()=>l});var r=n(269),i=n(5664),a=(((0,r.mS$)()||{}).Symbol,((0,r.mS$)()||{}).Reflect,"hasOwnProperty"),o=r.vE3||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])i.Wy[a].call(t,o)&&(e[o]=t[o]);return e},s=function(e,t){return s=i.s6.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[a](n)&&(e[n]=t[n])},s(e,t)};function c(e,t){function n(){this.constructor=e}typeof t!==i.hW&&null!==t&&(0,r.zkd)("Class extends value "+String(t)+" is not a constructor or null"),s(e,t),e[i.vR]=null===t?(0,r.sSX)(t):(n[i.vR]=t[i.vR],new n)}function l(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}},5927:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AppInsightsCore:()=>gt._,ApplicationInsights:()=>kt,Sender:()=>vt,SeverityLevel:()=>Ct.O,arrForEach:()=>P.Iuo,isNullOrUndefined:()=>P.hXl,proxyFunctions:()=>w.o$,throwError:()=>P.$8});var r=n(8279),i=n(659),a=n(5025),o=n(3072),s=n(2445),c=n(1448),l=n(4164),u=n(5397),h=n(5014),d=n(1365),f=n(740),p=n(5571),v=n(4658),m=n(2318),g=n(2910),y=n(2475),E=n(3775),w=n(3673),P=n(269),_=n(6149),b=n(4276),S=n(9749),C=n(2317),T=n(4875),I=n(7292),k=n(856),M=n(4013),O=n(1190),N=n(8257),A=n(1575),x=n(7975),D=n(1062),j=n(7358),R="duration",F="tags",L="deviceType",V="data",$="name",H="traceID",W="length",B="stringify",U="measurements",K="dataType",Y="envelopeType",q="toString",z="_get",G="enqueue",X="count",Q="eventsLimitInMem",J="push",Z="item",ee="emitLineDelimitedJson",te="clear",ne="createNew",re="markAsSent",ie="clearSent",ae="bufferOverride",oe="BUFFER_KEY",se="SENT_BUFFER_KEY",ce="concat",le="MAX_BUFFER_SIZE",ue="triggerSend",he="diagLog",de="initialize",fe="_sender",pe="endpointUrl",ve="instrumentationKey",me="customHeaders",ge="maxBatchSizeInBytes",ye="onunloadDisableBeacon",Ee="isBeaconApiDisabled",we="alwaysUseXhrOverride",Pe="disableXhr",_e="enableSessionStorageBuffer",be="_buffer",Se="onunloadDisableFetch",Ce="disableSendBeaconSplit",Te="enableSendPromise",Ie="getSenderInst",ke="unloadTransports",Me="convertUndefined",Oe="maxBatchInterval",Ne="serialize",Ae="_onError",xe="_onPartialSuccess",De="_onSuccess",je="itemsReceived",Re="itemsAccepted",Fe="oriPayload",Le="baseType",Ve="sampleRate",$e="eventsSendRequest",He="getSamplingScore",We="baseType",Be="baseData",Ue="properties",Ke="true";function Ye(e,t,n){return(0,w.KY)(e,t,n,P.zzB)}function qe(e,t,n){(0,P.hXl)(e)||(0,P.zav)(e,(function(e,r){(0,P.EtT)(r)?n[e]=r:(0,P.KgX)(r)?t[e]=r:(0,I.Z)()&&(t[e]=(0,I.hm)()[B](r))}))}function ze(e,t){(0,P.hXl)(e)||(0,P.zav)(e,(function(n,r){e[n]=r||t}))}function Ge(e,t,n,r){var o=new D.L(e,r,t);Ye(o,"sampleRate",n[a.tU]),(n[Be]||{}).startTime&&(o.time=(0,w._u)(n[Be].startTime)),o.iKey=n.iKey;var s=n.iKey.replace(/-/g,"");return o[$]=o[$].replace("{0}",s),function(e,t,n){var r=n[F]=n[F]||{},a=t.ext=t.ext||{},o=t[F]=t[F]||[],s=a.user;s&&(Ye(r,A.O.userAuthUserId,s.authId),Ye(r,A.O.userId,s.id||s.localId));var c=a.app;c&&Ye(r,A.O.sessionId,c.sesId);var l=a.device;l&&(Ye(r,A.O.deviceId,l.id||l.localId),Ye(r,A.O[L],l.deviceClass),Ye(r,A.O.deviceIp,l.ip),Ye(r,A.O.deviceModel,l.model),Ye(r,A.O[L],l[L]));var u=t.ext.web;if(u){Ye(r,A.O.deviceLanguage,u.browserLang),Ye(r,A.O.deviceBrowserVersion,u.browserVer),Ye(r,A.O.deviceBrowser,u.browser);var h=n[V]=n[V]||{},d=h[Be]=h[Be]||{},f=d[Ue]=d[Ue]||{};Ye(f,"domain",u.domain),Ye(f,"isManual",u.isManual?Ke:null),Ye(f,"screenRes",u.screenRes),Ye(f,"userConsent",u.userConsent?Ke:null)}var p=a.os;p&&(Ye(r,A.O.deviceOS,p[$]),Ye(r,A.O.deviceOSVersion,p.osVer));var v=a.trace;v&&(Ye(r,A.O.operationParentId,v.parentID),Ye(r,A.O.operationName,(0,x.Rr)(e,v[$])),Ye(r,A.O.operationId,v[H]));for(var m={},g=o[W]-1;g>=0;g--){var y=o[g];(0,P.zav)(y,(function(e,t){m[e]=t})),o.splice(g,1)}(0,P.zav)(o,(function(e,t){m[e]=t}));var E=(0,i.Im)((0,i.Im)({},r),m);E[A.O.internalSdkVersion]||(E[A.O.internalSdkVersion]=(0,x.Rr)(e,"javascript:".concat(Qe.Version),64)),n[F]=(0,w.hW)(E)}(e,n,o),n[F]=n[F]||[],(0,w.hW)(o)}function Xe(e,t){(0,P.hXl)(t[Be])&&(0,E.ZP)(e,1,46,"telemetryItem.baseData cannot be null.")}var Qe={Version:"3.3.4"};function Je(e,t,n){Xe(e,t);var r={},i={};t[We]!==o.J[K]&&(r.baseTypeSource=t[We]),t[We]===o.J[K]?(r=t[Be][Ue]||{},i=t[Be][U]||{}):t[Be]&&qe(t[Be],r,i),qe(t[V],r,i),(0,P.hXl)(n)||ze(r,n);var a=t[Be][$],s=new o.J(e,a,r,i),c=new j.B(o.J[K],s);return Ge(e,o.J[Y],t,c)}var Ze,et,tt=function(){function e(t,n){var i=[],a=!1,o=n.maxRetryCnt;this[z]=function(){return i},this._set=function(e){return i=e},(0,r.A)(e,this,(function(e){e[G]=function(r){e[X]()>=n[Q]?a||((0,E.ZP)(t,2,105,"Maximum in-memory buffer size reached: "+e[X](),!0),a=!0):(r.cnt=r.cnt||0,!(0,P.hXl)(o)&&r.cnt>o||i[J](r))},e[X]=function(){return i[W]},e.size=function(){for(var e=i[W],t=0;t<i[W];t++)e+=i[t].item[W];return n[ee]||(e+=2),e},e[te]=function(){i=[],a=!1},e.getItems=function(){return i.slice(0)},e.batchPayloads=function(e){if(e&&e[W]>0){var t=[];return(0,P.Iuo)(e,(function(e){t[J](e[Z])})),n[ee]?t.join("\n"):"["+t.join(",")+"]"}return null},e[ne]=function(e,n,r){var a=i.slice(0);e=e||t,n=n||{};var o=r?new it(e,n):new nt(e,n);return(0,P.Iuo)(a,(function(e){o[G](e)})),o}}))}return e.__ieDyn=1,e}(),nt=function(e){function t(n,i){var a=e.call(this,n,i)||this;return(0,r.A)(t,a,(function(e,t){e[re]=function(e){t[te]()},e[ie]=function(e){}})),a}return(0,i.qU)(t,e),t.__ieDyn=1,t}(tt),rt=["AI_buffer","AI_sentBuffer"],it=function(e){function t(n,i){var a=e.call(this,n,i)||this,o=!1,s=null==i?void 0:i.namePrefix,c=i[ae]||{getItem:v.vH,setItem:v.Dt},l=c.getItem,u=c.setItem,h=i.maxRetryCnt;return(0,r.A)(t,a,(function(e,r){var i=m(t[oe]),a=m(t[se]),c=function(){var e=[];try{return(0,P.Iuo)(rt,(function(t){var n=_(t);if(e=e[ce](n),s){var r=_(s+"_"+t);e=e[ce](r)}})),e}catch(e){(0,E.ZP)(n,2,41,"Transfer events from previous buffers: "+(0,w.lL)(e)+". previous Buffer items can not be removed",{exception:(0,P.mmD)(e)})}return[]}(),d=a[ce](c),f=e._set(i[ce](d));function p(e,t){var n=[],r=[];return(0,P.Iuo)(e,(function(e){r[J](e[Z])})),(0,P.Iuo)(t,(function(e){(0,P.Tnt)(e)||-1!==(0,P.rDm)(r,e[Z])||n[J](e)})),n}function m(e){return g(s?s+"_"+e:e)}function g(e){try{var t=l(n,e);if(t){var r=(0,I.hm)().parse(t);if((0,P.KgX)(r)&&(r=(0,I.hm)().parse(r)),r&&(0,P.cyL)(r))return r}}catch(t){(0,E.ZP)(n,1,42," storage key: "+e+", "+(0,w.lL)(t),{exception:(0,P.mmD)(t)})}return[]}function y(e,t){var r=e;try{r=s?s+"_"+r:r;var i=JSON[B](t);u(n,r,i)}catch(e){u(n,r,JSON[B]([])),(0,E.ZP)(n,2,41," storage key: "+r+", "+(0,w.lL)(e)+". Buffer cleared",{exception:(0,P.mmD)(e)})}}function _(e){try{var t=g(e),r=[];return(0,P.Iuo)(t,(function(e){var t={item:e,cnt:0};r[J](t)})),(0,v.v7)(n,e),r}catch(e){}return[]}f[W]>t[le]&&(f[W]=t[le]),y(t[se],[]),y(t[oe],f),e[G]=function(i){e[X]()>=t[le]?o||((0,E.ZP)(n,2,67,"Maximum buffer size reached: "+e[X](),!0),o=!0):(i.cnt=i.cnt||0,!(0,P.hXl)(h)&&i.cnt>h||(r[G](i),y(t.BUFFER_KEY,e[z]())))},e[te]=function(){r[te](),y(t.BUFFER_KEY,e[z]()),y(t[se],[]),o=!1},e[re]=function(r){y(t[oe],e._set(p(r,e[z]())));var i=m(t[se]);i instanceof Array&&r instanceof Array&&((i=i[ce](r))[W]>t[le]&&((0,E.ZP)(n,1,67,"Sent buffer reached its maximum size: "+i[W],!0),i[W]=t[le]),y(t[se],i))},e[ie]=function(e){var n=m(t[se]);n=p(e,n),y(t[se],n)},e[ne]=function(r,i,a){a=!!a;var o=e[z]().slice(0),s=m(t[se]).slice(0);r=r||n,i=i||{},e[te]();var c=a?new t(r,i):new nt(r,i);return(0,P.Iuo)(o,(function(e){c[G](e)})),a&&c[re](s),c}})),a}var n;return(0,i.qU)(t,e),n=t,t.VERSION="_1",t.BUFFER_KEY="AI_buffer"+n.VERSION,t.SENT_BUFFER_KEY="AI_sentBuffer"+n.VERSION,t.MAX_BUFFER_SIZE=2e3,t}(tt),at=function(){function e(t){(0,r.A)(e,this,(function(e){function n(e,a){var o="__aiCircularRefCheck",s={};if(!e)return(0,E.ZP)(t,1,48,"cannot serialize object because it is null or undefined",{name:a},!0),s;if(e[o])return(0,E.ZP)(t,2,50,"Circular reference detected while serializing object",{name:a},!0),s;if(!e.aiDataContract){if("measurements"===a)s=i(e,"number",a);else if("properties"===a)s=i(e,"string",a);else if("tags"===a)s=i(e,"string",a);else if((0,P.cyL)(e))s=r(e,a);else{(0,E.ZP)(t,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:a},!0);try{(0,I.hm)()[B](e),s=e}catch(e){(0,E.ZP)(t,1,48,e&&(0,P.Tnt)(e[q])?e[q]():"Error serializing object",null,!0)}}return s}return e[o]=!0,(0,P.zav)(e.aiDataContract,(function(i,o){var c=(0,P.Tnt)(o)?1&o():1&o,l=(0,P.Tnt)(o)?4&o():4&o,u=2&o,h=void 0!==e[i],d=(0,P.Gvm)(e[i])&&null!==e[i];if(!c||h||u){if(!l){var f;void 0!==(f=d?u?r(e[i],i):n(e[i],i):e[i])&&(s[i]=f)}}else(0,E.ZP)(t,1,24,"Missing required field specification. The field is required but not present on source",{field:i,name:a})})),delete e[o],s}function r(e,r){var i;if(e)if((0,P.cyL)(e)){i=[];for(var a=0;a<e[W];a++){var o=n(e[a],r+"["+a+"]");i[J](o)}}else(0,E.ZP)(t,1,54,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:r},!0);return i}function i(e,n,r){var i;return e&&(i={},(0,P.zav)(e,(function(e,a){if("string"===n)void 0===a?i[e]="undefined":null===a?i[e]="null":a[q]?i[e]=a[q]():i[e]="invalid field: toString() is not defined.";else if("number"===n)if(void 0===a)i[e]="undefined";else if(null===a)i[e]="null";else{var o=parseFloat(a);i[e]=o}else i[e]="invalid field: "+r+" is of unknown type.",(0,E.ZP)(t,1,i[e],null,!0)}))),i}e[Ne]=function(e){var r=n(e,"root");try{return(0,I.hm)()[B](r)}catch(e){(0,E.ZP)(t,1,48,e&&(0,P.Tnt)(e[q])?e[q]():"Error serializing object",null,!0)}}}))}return e.__ieDyn=1,e}(),ot=n(8596),st=function(){function e(){}return e.prototype.getHashCodeScore=function(t){return this.getHashCode(t)/e.INT_MAX_VALUE*100},e.prototype.getHashCode=function(e){if(""===e)return 0;for(;e[W]<8;)e=e[ce](e);for(var t=5381,n=0;n<e[W];++n)t=(t<<5)+t+e.charCodeAt(n),t&=t;return Math.abs(t)},e.INT_MAX_VALUE=2147483647,e}(),ct=function(){var e=new st,t=new ot.o;this[He]=function(n){return n[F]&&n[F][t.userId]?e.getHashCodeScore(n[F][t.userId]):n.ext&&n.ext.user&&n.ext.user.id?e.getHashCodeScore(n.ext.user.id):n[F]&&n[F][t.operationId]?e.getHashCodeScore(n[F][t.operationId]):n.ext&&n.ext.telemetryTrace&&n.ext.telemetryTrace[H]?e.getHashCodeScore(n.ext.telemetryTrace[H]):100*Math.random()}},lt=function(){function e(e,t){this.INT_MAX_VALUE=2147483647;var n=t||(0,E.y0)(null);(e>100||e<0)&&(n.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this[Ve]=e,this.samplingScoreGenerator=new ct}return e.prototype.isSampledIn=function(e){var t=this[Ve];return null==t||t>=100||e.baseType===h.J[K]||this.samplingScoreGenerator[He](e)<t},e}(),ut=void 0;function ht(e){try{return e.responseText}catch(e){}return null}var dt,ft=(0,P.ZHX)(((Ze={endpointUrl:(0,y.Lx)(P.zzB,a._G+a.wc)})[ee]=(0,y.DD)(),Ze[Oe]=15e3,Ze[ge]=102400,Ze.disableTelemetry=(0,y.DD)(),Ze[_e]=(0,y.DD)(!0),Ze.isRetryDisabled=(0,y.DD)(),Ze[Ee]=(0,y.DD)(!0),Ze[Ce]=(0,y.DD)(!0),Ze[Pe]=(0,y.DD)(),Ze[Se]=(0,y.DD)(),Ze[ye]=(0,y.DD)(),Ze[ve]=ut,Ze.namePrefix=ut,Ze.samplingPercentage=(0,y.Lx)((function(e){return!isNaN(e)&&e>0&&e<=100}),100),Ze[me]=ut,Ze[Me]=ut,Ze[Q]=1e4,Ze[ae]=!1,Ze.httpXHROverride={isVal:function(e){return e&&e.sendPOST},v:ut},Ze[we]=(0,y.DD)(),Ze.transports=ut,Ze.retryCodes=ut,Ze.maxRetryCnt={isVal:P.EtT,v:10},Ze)),pt=((et={})[o.J.dataType]=Je,et[s.C.dataType]=function(e,t,n){Xe(e,t);var r=t[Be].message,i=t[Be].severityLevel,a=t[Be][Ue]||{},o=t[Be][U]||{};qe(t[V],a,o),(0,P.hXl)(n)||ze(a,n);var c=new s.C(e,r,i,a,o),l=new j.B(s.C[K],c);return Ge(e,s.C[Y],t,l)},et[c.h.dataType]=function(e,t,n){var r;Xe(e,t);var i=t[Be];(0,P.hXl)(i)||(0,P.hXl)(i[Ue])||(0,P.hXl)(i[Ue][R])?(0,P.hXl)(t[V])||(0,P.hXl)(t[V][R])||(r=t[V][R],delete t[V][R]):(r=i[Ue][R],delete i[Ue][R]);var a,o=t[Be];((t.ext||{}).trace||{})[H]&&(a=t.ext.trace[H]);var s=o.id||a,l=o[$],u=o.uri,h=o[Ue]||{},d=o[U]||{};if((0,P.hXl)(o.refUri)||(h.refUri=o.refUri),(0,P.hXl)(o.pageType)||(h.pageType=o.pageType),(0,P.hXl)(o.isLoggedIn)||(h.isLoggedIn=o.isLoggedIn[q]()),!(0,P.hXl)(o[Ue])){var f=o[Ue];(0,P.zav)(f,(function(e,t){h[e]=t}))}qe(t[V],h,d),(0,P.hXl)(n)||ze(h,n);var p=new c.h(e,l,u,r,h,d,s),v=new j.B(c.h[K],p);return Ge(e,c.h[Y],t,v)},et[l.H.dataType]=function(e,t,n){Xe(e,t);var r=t[Be],i=r[$],a=r.uri||r.url,o=r[Ue]||{},s=r[U]||{};qe(t[V],o,s),(0,P.hXl)(n)||ze(o,n);var c=new l.H(e,i,a,void 0,o,s,r),u=new j.B(l.H[K],c);return Ge(e,l.H[Y],t,u)},et[u.WJ.dataType]=function(e,t,n){Xe(e,t);var r=t[Be][U]||{},i=t[Be][Ue]||{};qe(t[V],i,r),(0,P.hXl)(n)||ze(i,n);var a=t[Be],o=u.WJ.CreateFromInterface(e,a,i,r),s=new j.B(u.WJ[K],o);return Ge(e,u.WJ[Y],t,s)},et[h.J.dataType]=function(e,t,n){Xe(e,t);var r=t[Be],i=r[Ue]||{},a=r[U]||{};qe(t[V],i,a),(0,P.hXl)(n)||ze(i,n);var o=new h.J(e,r[$],r.average,r.sampleCount,r.min,r.max,r.stdDev,i,a),s=new j.B(h.J[K],o);return Ge(e,h.J[Y],t,s)},et[d.A.dataType]=function(e,t,n){Xe(e,t);var r=t[Be][U]||{},i=t[Be][Ue]||{};qe(t[V],i,r),(0,P.hXl)(n)||ze(i,n);var o=t[Be];if((0,P.hXl)(o))return(0,E.OG)(e,"Invalid input for dependency data"),null;var s=o[Ue]&&o[Ue][a.ym]?o[Ue][a.ym]:"GET",c=new d.A(e,o.id,o.target,o[$],o[R],o.success,o.responseCode,s,o.type,o.correlationContext,i,r),l=new j.B(d.A[K],c);return Ge(e,d.A[Y],t,l)},et),vt=function(e){function t(){var n,i,o,s,c,l,u,h=e.call(this)||this;h.priority=1001,h.identifier=f.BreezeChannelIdentifier;var d,y,N,A,x,D,j,R,L,$,H,B,U,K,Y,q,z,Q,ee,oe,se,ce,le,He,We,Be,Ue,Ke=0;return(0,r.A)(t,h,(function(e,r){function f(t,r){var i=ht(t);if(!t||i+""!="200"&&""!==i){var a=(0,O.x)(i);a&&a[je]&&a[je]>a[Re]&&!K?e[xe](r,a):e[Ae](r,(0,w.HU)(t))}else n=0,e[De](r,0)}function Ye(e,t,n){4===e.readyState&&ot(e.status,t,e.responseURL,n,(0,w.r4)(e),ht(e)||e.response)}function qe(e){try{if(e){var t=e[Fe];return t&&t[W]?t:null}}catch(e){}return null}function ze(t,n){return!(H||(t?t.baseData&&!t[Le]?(n&&(0,E.ZP)(n,1,70,"Cannot send telemetry without baseData and baseType"),1):(t[Le]||(t[Le]="EventData"),e[fe]?(r=t,e._sample.isSampledIn(r)?(t[a.tU]=e._sample[Ve],0):(n&&(0,E.ZP)(n,2,33,"Telemetry item was sampled out and not sent",{SampleRate:e._sample[Ve]}),1)):(n&&(0,E.ZP)(n,1,28,"Sender was not initialized"),1)):(n&&(0,E.ZP)(n,1,7,"Cannot send empty telemetry"),1)));var r}function Ge(e,n){var r=e.iKey||B,i=t.constructEnvelope(e,r,n,U);if(i){var o=!1;if(e[F]&&e[F][a.jp]&&((0,P.Iuo)(e[F][a.jp],(function(e){try{e&&!1===e(i)&&(o=!0,(0,E.OG)(n,"Telemetry processor check returns false"))}catch(e){(0,E.ZP)(n,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,w.lL)(e),{exception:(0,P.mmD)(e)},!0)}})),delete e[F][a.jp]),!o)return i}else(0,E.ZP)(n,1,47,"Unable to create an AppInsights envelope")}function Xe(t){var n="",r=e[he]();try{var i=ze(t,r),a=null;i&&(a=Ge(t,r)),a&&(n=c[Ne](a))}catch(e){}return n}function Qe(e){var t="";return e&&e[W]&&(t="["+e.join(",")+"]"),t}function Je(e){var t,n=tt();return(t={urlString:A})[V]=e,t.headers=n,t}function Ze(t,n,r,i){void 0===i&&(i=!0);var a=et(n),o=t&&t.sendPOST;return o&&a?(i&&e._buffer[re](n),o(a,(function(t,r,i){return function(t,n,r,i){200===n&&t?e._onSuccess(t,t[W]):i&&e[Ae](t,i)}(n,t,0,i)}),!r)):null}function et(t){var n;if((0,P.cyL)(t)&&t[W]>0){var r=e[be].batchPayloads(t),i=tt();return(n={})[V]=r,n.urlString=A,n.headers=i,n.disableXhrSync=se,n.disableFetchKeepAlive=!ce,n[Fe]=t,n}return null}function tt(){try{var e=u||{};return(0,m.Qu)(A)&&(e[g.a[6]]=g.a[7]),e}catch(e){}return null}function rt(t){var n=t?t[W]:0;return e[be].size()+n>D&&(y&&!y.isOnline()||e[ue](!0,null,10),!0)}function ot(t,r,i,a,o,s){var c=null;if(e._appId||(c=(0,O.x)(s))&&c.appId&&(e._appId=c.appId),(t<200||t>=300)&&0!==t){if((301===t||307===t||308===t)&&!st(i))return void e[Ae](r,o);if(y&&!y.isOnline())return void(K||(vt(r,10),(0,E.ZP)(e[he](),2,40,". Offline - Response Code: ".concat(t,". Offline status: ").concat(!y.isOnline(),". Will retry to send ").concat(r.length," items."))));!K&&yt(t)?(vt(r),(0,E.ZP)(e[he](),2,40,". Response code "+t+". Will retry to send "+r[W]+" items.")):e[Ae](r,o)}else st(i),206===t?(c||(c=(0,O.x)(s)),c&&!K?e[xe](r,c):e[Ae](r,o)):(n=0,e[De](r,a))}function st(e){return!(l>=10||(0,P.hXl)(e)||""===e||e===A||(A=e,++l,0))}function ct(e,t){if(!d)return Ze(Be&&Be[Ie]([3],!0),e,t);d(e,!1)}function dt(e){try{if(e&&e[W])return(0,P.KgX)(e[0])}catch(e){}return null}function pt(t,n){var r=null;if((0,P.cyL)(t)){for(var i=t[W],a=0;a<t[W];a++)i+=t[a].item[W];return Be.getSyncFetchPayload()+i<=65e3?r=2:(0,I.Uf)()?r=3:(r=1,(0,E.ZP)(e[he](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender.")),Ze(Be&&Be[Ie]([r],!0),t,n)}return null}function vt(t,r){if(void 0===r&&(r=1),t&&0!==t[W]){var a=e[be];a[ie](t),n++;for(var o=0,s=t;o<s.length;o++){var c=s[o];c.cnt=c.cnt||0,c.cnt++,a[G](c)}!function(e){var t;if(n<=1)t=10;else{var r=(Math.pow(2,n)-1)/2,a=Math.floor(Math.random()*r*10)+1;a*=e,t=Math.max(Math.min(a,3600),10)}var o=(0,P.f0d)()+1e3*t;i=o}(r),mt()}}function mt(){if(!s&&!o){var t=i?Math.max(0,i-(0,P.f0d)()):0,n=Math.max(Y,t);s=(0,P.dRz)((function(){s=null,e[ue](!0,null,1)}),n)}}function gt(){s&&s.cancel(),s=null,i=null}function yt(e){return(0,P.hXl)(Ue)?401===e||408===e||429===e||500===e||502===e||503===e||504===e:Ue[W]&&Ue.indexOf(e)>-1}function Et(){e[fe]=null,e[be]=null,e._appId=null,e._sample=null,u={},y=null,n=0,i=null,o=!1,s=null,c=null,l=0,Ke=0,d=null,N=null,A=null,x=null,D=0,j=!1,$=null,H=!1,B=null,U=ut,K=!1,q=null,Q=ut,se=!1,ce=!1,We=!1,le=null,He=null,Be=null,(0,P.vF1)(e,"_senderConfig",{g:function(){return(0,w.CP)({},ft)}})}Et(),e.pause=function(){gt(),o=!0},e.resume=function(){o&&(o=!1,i=null,rt(),mt())},e.flush=function(t,n,r){if(void 0===t&&(t=!0),!o){gt();try{return e[ue](t,null,r||1)}catch(t){(0,E.ZP)(e[he](),1,22,"flush failed, telemetry will not be collected: "+(0,w.lL)(t),{exception:(0,P.mmD)(t)})}}},e.onunloadFlush=function(){if(!o)if(j||oe)try{return e[ue](!0,ct,2)}catch(t){(0,E.ZP)(e[he](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+(0,w.lL)(t),{exception:(0,P.mmD)(t)})}else e.flush(!1)},e.addHeader=function(e,t){u[e]=t},e[de]=function(t,a,o,s){e.isInitialized()&&(0,E.ZP)(e[he](),1,28,"Sender is already initialized"),r[de](t,a,o,s);var g=e.identifier;c=new at(a.logger),n=0,i=null,e[fe]=null,l=0;var M=e[he]();N=(0,_.Hm)((0,b.Z)("Sender"),a.evtNamespace&&a.evtNamespace()),y=(0,p.G)(N),e._addHook((0,S.a)(t,(function(t){var n=t.cfg;n.storagePrefix&&(0,v.vh)(n.storagePrefix);var r=(0,C.i8)(null,n,a).getExtCfg(g,ft),i=r[pe];if(A&&i===A){var o=n[pe];o&&o!==i&&(r[pe]=o)}(0,P.$XS)(r[ve])&&(r[ve]=n[ve]),(0,P.vF1)(e,"_senderConfig",{g:function(){return r}}),x!==r[pe]&&(A=x=r[pe]),a.activeStatus()===T.f.PENDING?e.pause():a.activeStatus()===T.f.ACTIVE&&e.resume(),$&&$!==r[me]&&(0,P.Iuo)($,(function(e){delete u[e.header]})),D=r[ge],j=(!1===r[ye]||!1===r[Ee])&&(0,I.Uf)(),R=!1===r[ye]&&(0,I.Uf)(),L=!1===r[Ee]&&(0,I.Uf)(),oe=r[we],se=!!r[Pe],Ue=r.retryCodes;var s=r[ae],c=!!r[_e]&&(!!s||(0,v.AN)()),l=r.namePrefix,p=c!==q||c&&Q!==l||c&&z!==s;if(e[be]){if(p)try{e._buffer=e._buffer[ne](M,r,c)}catch(t){(0,E.ZP)(e[he](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+(0,w.lL)(t),{exception:(0,P.mmD)(t)})}rt()}else e[be]=c?new it(M,r):new nt(M,r);Q=l,q=c,z=s,ce=!r[Se]&&(0,I.R7)(!0),We=!!r[Ce],e._sample=new lt(r.samplingPercentage,M),B=r[ve],(0,P.$XS)(B)||function(e,t){var n=t.disableInstrumentationKeyValidation;return!((0,P.hXl)(n)||!n)||new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e)}(B,n)||(0,E.ZP)(M,1,100,"Invalid Instrumentation key "+B),$=r[me],(0,P.KgX)(A)&&!(0,m.Qu)(A)&&$&&$[W]>0?(0,P.Iuo)($,(function(e){h.addHeader(e.header,e.value)})):$=null,ee=r[Te];var y=function(){var t;try{var n={xdrOnComplete:function(e,t,n){var r=qe(n);if(r)return f(e,r)},fetchOnComplete:function(e,t,n,r){var i=qe(r);if(i)return ot(e.status,i,e.url,i[W],e.statusText,n||"")},xhrOnComplete:function(e,t,n){var r=qe(n);if(r)return Ye(e,r,r[W])},beaconOnRetry:function(t,n,r){return function(t,n,r){var i=t&&t[Fe];if(We)He&&He(i,!0),(0,E.ZP)(e[he](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var a=[],o=0;o<i[W];o++){var s=i[o],c=[s];r(et(c),n)?e._onSuccess(c,c[W]):a[J](s)}a[W]>0&&(He&&He(a,!0),(0,E.ZP)(e[he](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}(t,n,r)}};return(t={})[Te]=ee,t.isOneDs=!1,t.disableCredentials=!1,t[Pe]=se,t.disableBeacon=!L,t.disableBeaconSync=!R,t.senderOnCompleteCallBack=n,t}catch(e){}return null}();Be?Be.SetConfig(y):(Be=new k.v)[de](y,M);var _=r.httpXHROverride,b=null,S=null,O=(0,w.jL)([3,1,2],r.transports);b=Be&&Be[Ie](O,!1);var N=Be&&Be.getFallbackInst();le=function(e,t){return Ze(N,e,t)},He=function(e,t){return Ze(N,e,t,!1)},b=oe?_:b||_||N,e[fe]=function(e,t){return Ze(b,e,t)},ce&&(d=pt);var F=(0,w.jL)([3,1],r[ke]);ce||(F=F.filter((function(e){return 2!==e}))),S=Be&&Be[Ie](F,!0),S=oe?_:S||_,(oe||r[ke]||!d)&&S&&(d=function(e,t){return Ze(S,e,t)}),d||(d=le),H=r.disableTelemetry,U=r[Me]||ut,K=r.isRetryDisabled,Y=r[Oe]})))},e.processTelemetry=function(t,n){var r,i=(n=e._getTelCtx(n))[he]();try{if(!ze(t,i))return;var a=Ge(t,i);if(!a)return;var o=c[Ne](a),s=e[be];rt(o);var l=((r={})[Z]=o,r.cnt=0,r);s[G](l),mt()}catch(e){(0,E.ZP)(i,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+(0,w.lL)(e),{exception:(0,P.mmD)(e)})}e.processNext(t,n)},e.isCompletelyIdle=function(){return!o&&0===Ke&&0===e._buffer[X]()},e.getOfflineListener=function(){return y},e._xhrReadyStateChange=function(e,t,n){if(!dt(t))return Ye(e,t,n)},e[ue]=function(t,n,r){var i;if(void 0===t&&(t=!0),!o)try{var a=e[be];if(H)a[te]();else{if(a[X]()>0){var s=a.getItems();!function(t,n){var r,i=(r="getNotifyMgr",e.core[r]?e.core[r]():e.core._notificationManager);if(i&&i[$e])try{i[$e](t,n)}catch(t){(0,E.ZP)(e[he](),1,74,"send request notification failed: "+(0,w.lL)(t),{exception:(0,P.mmD)(t)})}}(r||0,t),i=n?n.call(e,s,t):e[fe](s,t)}new Date}gt()}catch(t){var c=(0,I.L0)();(!c||c>9)&&(0,E.ZP)(e[he](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+(0,w.lL)(t),{exception:(0,P.mmD)(t)})}return i},e.getOfflineSupport=function(){var e;return(e={getUrl:function(){return A},createPayload:Je})[Ne]=Xe,e.batch=Qe,e.shouldProcess=function(e){return!!ze(e)},e},e._doTeardown=function(t,n){e.onunloadFlush(),(0,M.K)(y,!1),Et()},e[Ae]=function(t,n,r){if(!dt(t))return function(t,n,r){(0,E.ZP)(e[he](),2,26,"Failed to send telemetry.",{message:n}),e._buffer&&e._buffer[ie](t)}(t,n)},e[xe]=function(t,n){if(!dt(t))return function(t,n){for(var r=[],i=[],a=0,o=n.errors.reverse();a<o.length;a++){var s=o[a],c=t.splice(s.index,1)[0];yt(s.statusCode)?i[J](c):r[J](c)}t[W]>0&&e[De](t,n[Re]),r[W]>0&&e[Ae](r,(0,w.r4)(null,["partial success",n[Re],"of",n.itemsReceived].join(" "))),i[W]>0&&(vt(i),(0,E.ZP)(e[he](),2,40,"Partial success. Delivered: "+t[W]+", Failed: "+r[W]+". Will retry to send "+i[W]+" our of "+n[je]+" items"))}(t,n)},e[De]=function(t,n){if(!dt(t))return function(t,n){e._buffer&&e._buffer[ie](t)}(t)},e._xdrOnLoad=function(e,t){if(!dt(t))return f(e,t)}})),h}return(0,i.qU)(t,e),t.constructEnvelope=function(e,t,n,r){var a;return a=t===e.iKey||(0,P.hXl)(t)?e:(0,i.Im)((0,i.Im)({},e),{iKey:t}),(pt[a.baseType]||Je)(n,a,r)},t}(N.s),mt=n(4484),gt=n(2774),yt=n(8205),Et="instrumentationKey",wt="connectionString",Pt="instrumentationkey",_t="endpointUrl",bt="ingestionendpoint",St="userOverrideEndpointUrl",Ct=n(9762),Tt=void 0,It=((dt={diagnosticLogInterval:(0,y.Lx)((function(e){return e&&e>0}),1e4)})[wt]=Tt,dt[_t]=Tt,dt[Et]=Tt,dt.extensionConfig={},dt),kt=function(){function e(t){var n,i=new gt._;function o(e){e&&(e.baseData=e.baseData||{},e.baseType=e.baseType||"EventData"),i.track(e)}((0,P.hXl)(t)||(0,P.hXl)(t[Et])&&(0,P.hXl)(t[wt]))&&(0,P.$8)("Invalid input configuration"),(0,r.A)(e,this,(function(e){function r(){var e=(0,S.e)(t||{},It);n=e.cfg,i.addUnloadHook((0,S.a)(e,(function(){var e=n[wt];if((0,P.$XS)(e)){var t=(0,yt.Rf)((function(t,r){(0,yt.Dv)(e,(function(e){var r=e.value,i=n[Et];!e.rejected&&r&&(n[wt]=r,i=(0,mt.H)(r)[Pt]||i),t(i)}))})),r=(0,yt.Rf)((function(t,r){(0,yt.Dv)(e,(function(e){var r=e.value,i=n[_t];if(!e.rejected&&r){var o=(0,mt.H)(r)[bt];i=o?o+a.wc:i}t(i)}))}));n[Et]=t,n[_t]=n[St]||r}if((0,P.KgX)(e)){var i=(0,mt.H)(e),o=i[bt];n[_t]=n[St]?n[St]:o+a.wc,n[Et]=i[Pt]||n[Et]}n[_t]=n[St]?n[St]:n[_t]}))),i.initialize(n,[new vt])}(0,P.vF1)(e,"config",{g:function(){return n}}),r(),e.initialize=r,e.track=o,(0,w.o$)(e,i,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"])}))}return e.__ieDyn=1,e}()},8279:(e,t,n)=>{"use strict";n.d(t,{A:()=>R});var r,i=n(269),a="constructor",o="prototype",s="function",c="_dynInstFuncs",l="_isDynProxy",u="_dynClass",h="_dynCls$",d="_dynInstChk",f=d,p="_dfOpts",v="_unknown_",m="__proto__",g="_dyn"+m,y="__dynProto$Gbl",E="_dynInstProto",w="useBaseInst",P="setInstFuncs",_=Object,b=_.getPrototypeOf,S=_.getOwnPropertyNames,C=(0,i.mS$)(),T=C[y]||(C[y]={o:(r={},r[P]=!0,r[w]=!0,r),n:1e3});function I(e){return e&&(e===_[o]||e===Array[o])}function k(e){return I(e)||e===Function[o]}function M(e){var t;if(e){if(b)return b(e);var n=e[m]||e[o]||(e[a]?e[a][o]:null);t=e[g]||n,(0,i.v0u)(e,g)||(delete e[E],t=e[g]=e[E]||e[g],e[E]=n)}return t}function O(e,t){var n=[];if(S)n=S(e);else for(var r in e)"string"==typeof r&&(0,i.v0u)(e,r)&&n.push(r);if(n&&n.length>0)for(var a=0;a<n.length;a++)t(n[a])}function N(e,t,n){return t!==a&&typeof e[t]===s&&(n||(0,i.v0u)(e,t))&&t!==m&&t!==o}function A(e){(0,i.zkd)("DynamicProto: "+e)}function x(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1}function D(e,t,n,r,a){if(!I(e)){var o=n[c]=n[c]||(0,i.sSX)(null);if(!I(o)){var h=o[t]=o[t]||(0,i.sSX)(null);!1!==o[f]&&(o[f]=!!a),I(h)||O(n,(function(t){N(n,t,!1)&&n[t]!==r[t]&&(h[t]=n[t],delete n[t],(!(0,i.v0u)(e,t)||e[t]&&!e[t][l])&&(e[t]=function(e,t){var n=function(){var r=function(e,t,n,r){var a=null;if(e&&(0,i.v0u)(n,u)){var o=e[c]||(0,i.sSX)(null);if((a=(o[n[u]]||(0,i.sSX)(null))[t])||A("Missing ["+t+"] "+s),!a[d]&&!1!==o[f]){for(var l=!(0,i.v0u)(e,t),h=M(e),p=[];l&&h&&!k(h)&&!x(p,h);){var v=h[t];if(v){l=v===r;break}p.push(h),h=M(h)}try{l&&(e[t]=a),a[d]=1}catch(e){o[f]=!1}}}return a}(this,t,e,n)||function(e,t,n){var r=t[e];return r===n&&(r=M(t)[e]),typeof r!==s&&A("["+e+"] is not a "+s),r}(t,e,n);return r.apply(this,arguments)};return n[l]=1,n}(e,t)))}))}}}function j(e,t){return(0,i.v0u)(e,o)?e.name||t||v:((e||{})[a]||{}).name||t||v}function R(e,t,n,r){(0,i.v0u)(e,o)||A("theClass is an invalid class definition.");var a=e[o];(function(e,t){if(b){for(var n=[],r=M(t);r&&!k(r)&&!x(n,r);){if(r===e)return!0;n.push(r),r=M(r)}return!1}return!0})(a,t)||A("["+j(e)+"] not in hierarchy of ["+j(t)+"]");var s=null;(0,i.v0u)(a,u)?s=a[u]:(s=h+j(e,"_")+"$"+T.n,T.n++,a[u]=s);var d=R[p],v=!!d[w];v&&r&&void 0!==r[w]&&(v=!!r[w]);var m=function(e){var t=(0,i.sSX)(null);return O(e,(function(n){!t[n]&&N(e,n,!1)&&(t[n]=e[n])})),t}(t),g=function(e,t,n,r){function a(e,t,n){var i=t[n];if(i[l]&&r){var a=e[c]||{};!1!==a[f]&&(i=(a[t[u]]||{})[n]||i)}return function(){return i.apply(e,arguments)}}var o=(0,i.sSX)(null);O(n,(function(e){o[e]=a(t,n,e)}));for(var s=M(e),h=[];s&&!k(s)&&!x(h,s);)O(s,(function(e){!o[e]&&N(s,e,!b)&&(o[e]=a(t,s,e))})),h.push(s),s=M(s);return o}(a,t,m,v);n(t,g);var y=!!b&&!!d[P];y&&r&&(y=!!r[P]),D(a,s,t,m,!1!==y)}R[p]=T.o},8205:(e,t,n)=>{"use strict";n.d(t,{Dv:()=>l,Qo:()=>x,Rf:()=>N,Xf:()=>D,lh:()=>A});var r,i,a,o=n(269),s="Promise",c="rejected";function l(e,t){return u(e,(function(e){return t?t({status:"fulfilled",rejected:!1,value:e}):e}),(function(e){return t?t({status:c,rejected:!0,reason:e}):e}))}function u(e,t,n,r){var i=e;try{if((0,o.$XS)(e))(t||n)&&(i=e.then(t,n));else try{t&&(i=t(e))}catch(e){if(!n)throw e;i=n(e)}}finally{r&&function(e,t){var n=e;t&&((0,o.$XS)(e)?n=e.finally?e.finally(t):e.then((function(e){return t(),e}),(function(e){throw t(),e})):t())}(i,r)}return i}var h,d=!1,f=["pending","resolving","resolved",c],p="dispatchEvent";function v(e){var t;return e&&e.createEvent&&(t=e.createEvent("Event")),!!t&&t.initEvent}var m,g,y,E,w="unhandledRejection",P=w.toLowerCase(),_=[],b=0,S=10;function C(e){return(0,o.Tnt)(e)?e.toString():(0,o.mmD)(e)}function T(e,t,n){var c,l,u=(0,o.KVm)(arguments,3),g=0,y=!1,E=[],T=b++,I=_.length>0?_[_.length-1]:void 0,k=!1,M=null;function O(t,n){try{return _.push(T),k=!0,M&&M.cancel(),M=null,e((function(e,r){E.push((function(){try{var i=2===g?t:n,a=(0,o.b07)(i)?c:(0,o.Tnt)(i)?i(c):i;(0,o.$XS)(a)?a.then(e,r):i?e(a):3===g?r(a):e(a)}catch(e){r(e)}})),y&&A()}),u)}finally{_.pop()}}function N(){return f[g]}function A(){if(E.length>0){var e=E.slice();E=[],k=!0,M&&M.cancel(),M=null,t(e)}}function x(e,t){return function(n){if(g===t){if(2===e&&(0,o.$XS)(n))return g=1,void n.then(x(2,1),x(3,1));g=e,y=!0,c=n,A(),k||3!==e||M||(M=(0,o.dRz)(D,S))}}}function D(){if(!k)if(k=!0,(0,o.Lln)())process.emit(w,c,l);else{var e=(0,o.zkX)()||(0,o.mS$)();!m&&(m=(0,o.GuU)((0,o.gBW)(o.zS2,[s+"RejectionEvent"]).v)),function(e,t,n,r){var i=(0,o.YEm)();!h&&(h=(0,o.GuU)(!!(0,o.gBW)(v,[i]).v));var a=h.v?i.createEvent("Event"):r?new Event(t):{};if(n&&n(a),h.v&&a.initEvent(t,!1,!0),a&&e[p])e[p](a);else{var s=e["on"+t];if(s)s(a);else{var c=(0,o.zS2)("console");c&&(c.error||c.log)(t,(0,o.mmD)(a))}}}(e,P,(function(e){return(0,o.vF1)(e,"promise",{g:function(){return l}}),e.reason=c,e}),!!m.v)}}return l={then:O,catch:function(e){return O(void 0,e)},finally:function(e){var t=e,n=e;return(0,o.Tnt)(e)&&(t=function(t){return e&&e(),t},n=function(t){throw e&&e(),t}),O(t,n)}},(0,o.UxO)(l,"state",{get:N}),d&&function(e,t,n,s){i=i||{toString:function(){return"[[PromiseResult]]"}},a=a||{toString:function(){return"[[PromiseIsHandled]]"}};var l={};l[r=r||{toString:function(){return"[[PromiseState]]"}}]={get:t},l[i]={get:function(){return(0,o.SZ2)(c)}},l[a]={get:function(){return k}},(0,o.isD)(e,l)}(l,N),(0,o.Lok)()&&(l[(0,o.Y0g)(11)]="IPromise"),l.toString=function(){return"IPromise"+(d?"["+T+((0,o.b07)(I)?"":":"+I)+"]":"")+" "+N()+(y?" - "+C(c):"")},function(){(0,o.Tnt)(n)||(0,o.zkd)(s+": executor is not a function - "+C(n));var e=x(3,0);try{n.call(l,x(2,0),e)}catch(t){e(t)}}(),l}function I(e){return function(t){var n=(0,o.KVm)(arguments,1);return e((function(e,n){try{var r=[],i=1;(0,o.DA8)(t,(function(t,a){t&&(i++,u(t,(function(t){r[a]=t,0==--i&&e(r)}),n))})),0==--i&&e(r)}catch(e){n(e)}}),n)}}function k(e){(0,o.Iuo)(e,(function(e){try{e()}catch(e){}}))}function M(e,t){return T(M,function(e){var t=(0,o.EtT)(e)?e:0;return function(e){(0,o.dRz)((function(){k(e)}),t)}}(t),e,t)}function O(e,t){!g&&(g=(0,o.GuU)((0,o.gBW)(o.zS2,[s]).v||null));var n=g.v;if(!n)return M(e);(0,o.Tnt)(e)||(0,o.zkd)(s+": executor is not a function - "+(0,o.mmD)(e));var r=0,i=new n((function(t,n){e((function(e){r=2,t(e)}),(function(e){r=3,n(e)}))}));return(0,o.UxO)(i,"state",{get:function(){return f[r]}}),i}function N(e){return T(N,k,e)}function A(e,t){return!y&&(n=N,y=(0,o.GuU)((function(e){var t=(0,o.KVm)(arguments,1);return n((function(t,n){var r=[],i=1;function a(e,n){i++,l(e,(function(e){e.rejected?r[n]={status:c,reason:e.reason}:r[n]={status:"fulfilled",value:e.value},0==--i&&t(r)}))}try{(0,o.cyL)(e)?(0,o.Iuo)(e,a):(0,o.xZI)(e)?(0,o.DA8)(e,a):(0,o.zkd)("Input is not an iterable"),0==--i&&t(r)}catch(e){n(e)}}),t)}))),y.v(e,t);var n}function x(e,t){return!E&&(E=(0,o.GuU)(O)),E.v.call(this,e,t)}var D=I(x);(0,o.Y0g)(11)},269:(e,t,n)=>{"use strict";function r(e,t){return e||t}function i(e,t){return e[t]}n.d(t,{$8:()=>ue,$PY:()=>H,$XS:()=>K,AHH:()=>dn,Cv9:()=>Zt,DA8:()=>Et,EHq:()=>Ht,Edw:()=>x,EtT:()=>W,FJj:()=>Qt,GuU:()=>Ye,Gvm:()=>V,HzD:()=>tn,Iuo:()=>_t,JKf:()=>ct,KTd:()=>Mt,KVm:()=>Ct,KgX:()=>F,KhI:()=>X,Lln:()=>lt,Lmq:()=>B,Lok:()=>dt,N6t:()=>ye,Nq2:()=>kt,O9V:()=>R,P0f:()=>De,QdQ:()=>Wt,R3R:()=>Xt,SZ2:()=>A,Tnt:()=>L,UUD:()=>Jt,UxO:()=>te,Vdv:()=>et,W$7:()=>St,WSA:()=>Pe,Wtk:()=>Je,Y0g:()=>pt,YEm:()=>Ze,Yny:()=>Pt,ZHX:()=>ge,ZWZ:()=>Fe,aqQ:()=>Dt,b07:()=>D,bJ7:()=>U,cGk:()=>me,cyL:()=>$,dRz:()=>un,eCG:()=>mt,f0d:()=>jt,fn0:()=>be,gBW:()=>M,hKY:()=>je,hXl:()=>j,isD:()=>ne,jjc:()=>vt,jsL:()=>Ee,kgX:()=>z,mS$:()=>Xe,mmD:()=>le,nRs:()=>Ke,oJg:()=>se,rDm:()=>bt,raO:()=>re,sSX:()=>Ot,tGl:()=>nn,twz:()=>it,v0u:()=>G,vE3:()=>ve,vF1:()=>ie,vKV:()=>hn,w3n:()=>rt,w9M:()=>nt,woc:()=>Y,xZI:()=>yt,zS2:()=>Qe,zav:()=>J,zkX:()=>tt,zkd:()=>he,zwS:()=>zt,zzB:()=>q});var a,o=void 0,s=null,c="",l="function",u="object",h="prototype",d="__proto__",f="undefined",p="constructor",v="Symbol",m="_polyfill",g="length",y="name",E="call",w="toString",P=r(Object),_=i(P,h),b=r(String),S=i(b,h),C=r(Math),T=r(Array),I=i(T,h),k=i(I,"slice");function M(e,t){try{return{v:e.apply(this,t)}}catch(e){return{e}}}function O(e){return function(t){return typeof t===e}}function N(e){var t="[object "+e+"]";return function(e){return!(!e||A(e)!==t)}}function A(e){return _[w].call(e)}function x(e,t){return typeof e===t}function D(e){return typeof e===f||e===f}function j(e){return e===s||D(e)}function R(e){return!!e||e!==o}var F=O("string"),L=O(l);function V(e){return!(!e&&j(e)||!e||typeof e!==u)}var $=i(T,"isArray"),H=N("Date"),W=O("number"),B=O("boolean"),U=N("Error");function K(e){return!!(e&&e.then&&L(e.then))}function Y(e){return!e||!q(e)}function q(e){return!(!e||(t=function(){return!(e&&0+e)},n=!e,r=M(t),r.e?n:r.v));var t,n,r}var z=i(P,"getOwnPropertyDescriptor");function G(e,t){return!!e&&_.hasOwnProperty[E](e,t)}var X=r(i(P,"hasOwn"),Q);function Q(e,t){return G(e,t)||!!z(e,t)}function J(e,t,n){if(e&&V(e))for(var r in e)if(X(e,r)&&-1===t[E](n||e,r,e[r]))break}var Z={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function ee(e){var t={};if(t[Z.c]=!0,t[Z.e]=!0,e.l){t.get=function(){return e.l.v};var n=z(e.l,"v");n&&n.set&&(t.set=function(t){e.l.v=t})}return J(e,(function(e,n){t[Z[e]]=R(n)?n:t[Z[e]]})),t}var te=i(P,"defineProperty"),ne=i(P,"defineProperties");function re(e,t,n,r,i,a){var o={e:a,c:i};return n&&(o.g=n),r&&(o.s=r),te(e,t,ee(o))}function ie(e,t,n){return te(e,t,ee(n))}function ae(e,t,n,r,i){var a={};return J(e,(function(e,r){oe(a,e,t?r:e,i),oe(a,r,n?r:e,i)})),r?r(a):a}function oe(e,t,n,r){te(e,t,{value:n,enumerable:!0,writable:!!r})}var se=r(b),ce="[object Error]";function le(e,t){var n=c,r=_[w][E](e);r===ce&&(e={stack:se(e.stack),message:se(e.message),name:se(e.name)});try{n=((n=JSON.stringify(e,s,t?"number"==typeof t?t:4:o))?n.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):s)||se(e)}catch(e){n=" - "+le(e,t)}return r+": "+n}function ue(e){throw new Error(e)}function he(e){throw new TypeError(e)}var de=i(P,"freeze");function fe(e){return e}function pe(e){return e[d]||s}var ve=i(P,"assign"),me=i(P,"keys");function ge(e){return de&&J(e,(function(e,t){($(t)||V(t))&&ge(t)})),ye(e)}var ye=r(de,fe),Ee=r(i(P,"seal"),fe),we=r(i(P,"getPrototypeOf"),pe);function Pe(e){return ae(e,1,0,ye)}function _e(e){return ae(e,0,0,ye)}function be(e){return function(e){var t={};return J(e,(function(e,n){oe(t,e,n[1]),oe(t,n[0],n[1])})),ye(t)}(e)}var Se,Ce=_e({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Te="__tsUtils$gblCfg";function Ie(){var e;return typeof globalThis!==f&&(e=globalThis),e||typeof self===f||(e=self),e||typeof window===f||(e=window),e||typeof global===f||(e=global),e}function ke(){if(!Se){var e=M(Ie).v||{};Se=e[Te]=e[Te]||{}}return Se}var Me=Oe;function Oe(e,t,n){var r=t?t[e]:s;return function(t){var i=(t?t[e]:s)||r;if(i||n){var a=arguments;return(i||n).apply(t,i?k[E](a,1):a)}he('"'+se(e)+'" not defined for '+le(t))}}function Ne(e){return function(t){return t[e]}}var Ae=i(C,"max"),xe=Me("slice",S),De=Me("substring",S),je=Oe("substr",S,Re);function Re(e,t,n){return j(e)&&he("Invalid "+le(e)),n<0?c:((t=t||0)<0&&(t=Ae(t+e[g],0)),D(n)?xe(e,t):xe(e,t,t+n))}function Fe(e,t){return De(e,0,t)}var Le,Ve,$e,He="_urid";function We(e){var t={description:se(e),toString:function(){return v+"("+e+")"}};return t[m]=!0,t}function Be(e){var t=function(){if(!Le){var e=ke();Le=e.gblSym=e.gblSym||{k:{},s:{}}}return Le}();if(!X(t.k,e)){var n=We(e),r=me(t.s).length;n[He]=function(){return r+"_"+n[w]()},t.k[e]=n,t.s[n[He]()]=se(e)}return t.k[e]}function Ue(){$e=ke()}function Ke(e){var t={};return!$e&&Ue(),t.b=$e.lzy,te(t,"v",{configurable:!0,get:function(){var n=e();return $e.lzy||te(t,"v",{value:n}),t.b=$e.lzy,n}}),t}function Ye(e){return te({toJSON:function(){return e}},"v",{value:e})}var qe,ze="window";function Ge(e,t){var n;return function(){return!$e&&Ue(),n&&!$e.lzy||(n=Ye(M(e,t).v)),n.v}}function Xe(e){return!$e&&Ue(),qe&&!1!==e&&!$e.lzy||(qe=Ye(M(Ie).v||s)),qe.v}function Qe(e,t){var n;if((n=qe&&!1!==t?qe.v:Xe(t))&&n[e])return n[e];if(e===ze)try{return window}catch(e){}return s}function Je(){return!!Ze()}var Ze=Ge(Qe,["document"]);function et(){return!!tt()}var tt=Ge(Qe,[ze]);function nt(){return!!rt()}var rt=Ge(Qe,["navigator"]);function it(){return!!ct()}var at,ot,st,ct=Ge(Qe,["history"]),lt=Ge((function(){return!!M((function(){return process&&(process.versions||{}).node})).v}));function ut(){return at=Ye(M(Qe,[v]).v)}function ht(e){var t=($e.lzy?0:at)||ut();return t.v?t.v[e]:o}function dt(){return!!ft()}function ft(){return!$e&&Ue(),(($e.lzy?0:at)||ut()).v}function pt(e,t){var n=Ce[e];!$e&&Ue();var r=($e.lzy?0:at)||ut();return r.v?r.v[n||e]:t?o:function(e){var t;!Ve&&(Ve={});var n=Ce[e];return n&&(t=Ve[n]=Ve[n]||We(v+"."+n)),t}(e)}function vt(e,t){!$e&&Ue();var n=($e.lzy?0:at)||ut();return n.v?n.v(e):t?s:We(e)}function mt(e){return!$e&&Ue(),((ot=($e.lzy?0:ot)||Ye(M(ht,["for"]).v)).v||Be)(e)}function gt(e){return!!e&&L(e.next)}function yt(e){return!function(e){return e===s||!R(e)}(e)&&L(e[pt(3)])}function Et(e,t,n){if(e&&(gt(e)||(!st&&(st=Ye(pt(3))),e=e[st.v]?e[st.v]():s),gt(e))){var r=o,i=o;try{for(var a=0;!(i=e.next()).done&&-1!==t[E](n||e,i.value,a,e);)a++}catch(t){r={e:t},e.throw&&(i=s,e.throw(r))}finally{try{i&&!i.done&&e.return&&e.return(i)}finally{if(r)throw r.e}}}}function wt(e,t,n){return e.apply(t,n)}function Pt(e,t){return!D(t)&&e&&($(t)?wt(e.push,e,t):gt(t)||yt(t)?Et(t,(function(t){e.push(t)})):e.push(t)),e}function _t(e,t,n){if(e)for(var r=e[g]>>>0,i=0;i<r&&(!(i in e)||-1!==t[E](n||e,e[i],i,e));i++);}var bt=Me("indexOf",I),St=Me("map",I);function Ct(e,t,n){return((e?e.slice:s)||k).apply(e,k[E](arguments,1))}function Tt(e,t,n){return-1!==bt(e,t,n)}var It,kt=Oe("includes",I,Tt),Mt=Me("reduce",I),Ot=r(i(P,"create"),Nt);function Nt(e){if(!e)return{};var t=typeof e;function n(){}return t!==u&&t!==l&&he("Prototype must be an Object or function: "+le(e)),n[h]=e,new n}function At(e,t){return(P.setPrototypeOf||function(e,t){var n;!It&&(It=Ye(((n={})[d]=[],n instanceof Array))),It.v?e[d]=t:J(t,(function(t,n){return e[t]=n}))})(e,t)}function xt(e,t){t&&(e[y]=t)}function Dt(e,t,n){var r=n||Error,i=r[h][y],a=Error.captureStackTrace;return function(e,t,n){function r(){this[p]=t,M(ie,[this,y,{v:e,c:!0,e:!1}])}return M(ie,[t,y,{v:e,c:!0,e:!1}]),(t=At(t,n))[h]=n===s?Ot(n):(r[h]=n[h],new r),t}(e,(function(){var n=this,o=arguments;try{M(xt,[r,e]);var s=wt(r,n,k[E](o))||n;if(s!==n){var c=we(n);c!==we(s)&&At(s,c)}return a&&a(s,n[p]),t&&t(s,o),s}finally{M(xt,[r,i])}}),r)}function jt(){return(Date.now||Rt)()}function Rt(){return(new Date).getTime()}function Ft(e){return function(t){return j(t)&&he("strTrim called ["+le(t)+"]"),t&&t.replace&&(t=t.replace(e,c)),t}}var Lt,Vt,$t,Ht=Oe("trim",S,Ft(/^\s+|(?=\s)\s+$/g));function Wt(e){if(!e||typeof e!==u)return!1;$t||($t=!et()||tt());var t=!1;if(e!==$t){Vt||(Lt=Function[h][w],Vt=Lt[E](P));try{var n=we(e);(t=!n)||(G(n,p)&&(n=n[p]),t=!(!n||typeof n!==l||Lt[E](n)!==Vt))}catch(e){}}return t}function Bt(e){return e.value&&qt(e),!0}var Ut=[function(e){var t=e.value;if($(t)){var n=e.result=[];return n.length=t.length,e.copyTo(n,t),!0}return!1},qt,function(e){return e.type===l},function(e){var t=e.value;return!!H(t)&&(e.result=new Date(t.getTime()),!0)}];function Kt(e,t,n,r){var i=n.handler,o=n.path?r?n.path.concat(r):n.path:[],c={handler:n.handler,src:n.src,path:o},l=typeof t,h=!1,d=t===s;d||(t&&l===u?h=Wt(t):d=function(e){return!a&&(a=["string","number","boolean",f,"symbol","bigint"]),!(e===u||-1===a.indexOf(e))}(l));var p={type:l,isPrim:d,isPlain:h,value:t,result:t,path:o,origin:n.src,copy:function(t,r){return Kt(e,t,r?c:n,r)},copyTo:function(t,n){return Yt(e,t,n,c)}};return p.isPrim?i&&i[E](n,p)?p.result:t:function(e,t,r,a){var o;return _t(e,(function(e){if(e.k===t)return o=e,-1})),o||(o={k:t,v:t},e.push(o),function(e){ie(p,"result",{g:function(){return e.v},s:function(t){e.v=t}});for(var t=0,r=i;!(r||(t<Ut.length?Ut[t++]:Bt))[E](n,p);)r=s}(o)),o.v}(e,t)}function Yt(e,t,n,r){if(!j(n))for(var i in n)t[i]=Kt(e,n[i],r,i);return t}function qt(e){var t=e.value;if(t&&e.isPlain){var n=e.result={};return e.copyTo(n,t),!0}return!1}function zt(e,t,n,r,i,a,o){return function(e,t){return _t(t,(function(t){!function(e,t,n){Yt([],e,t,{handler:void 0,src:t,path:[]})}(e,t)})),e}(Kt([],s=e,{handler:undefined,src:s})||{},k[E](arguments));var s}var Gt,Xt=Ne(g);function Qt(){return!$e&&Ue(),Gt&&!$e.lzy||(Gt=Ye(M(Qe,["performance"]).v)),Gt.v}function Jt(){var e=Qt();return e&&e.now?e.now():jt()}dt();var Zt=Oe("endsWith",S,en);function en(e,t,n){F(e)||he("'"+le(e)+"' is not a string");var r=F(t)?t:se(t),i=!D(n)&&n<e[g]?n:e[g];return De(e,i-r[g],i)===r}var tn=Me("indexOf",S),nn=Oe("startsWith",S,rn);function rn(e,t,n){F(e)||he("'"+le(e)+"' is not a string");var r=F(t)?t:se(t),i=n>0?n:0;return De(e,i,i+r[g])===r}var an="ref",on="unref",sn="hasRef",cn="enabled";function ln(e,t,n){var r=$(t),i=r?t.length:0,a=(i>0?t[0]:r?o:t)||setTimeout,c=(i>1?t[1]:o)||clearTimeout,l=n[0];n[0]=function(){u.dn(),wt(l,o,k[E](arguments))};var u=function(e,t,n){var r,i=!0,a=e?t(s):s;function o(){return i=!1,a&&a[on]&&a[on](),r}function c(){a&&n(a),a=s}function l(){return a=t(a),i||o(),r}return(r={cancel:c,refresh:l})[sn]=function(){return a&&a[sn]?a[sn]():i},r[an]=function(){return i=!0,a&&a[an]&&a[an](),r},r[on]=o,{h:r=te(r,cn,{get:function(){return!!a},set:function(e){!e&&a&&c(),e&&!a&&l()}}),dn:function(){a=s}}}(e,(function(e){if(e){if(e.refresh)return e.refresh(),e;wt(c,o,[e])}return wt(a,o,n)}),(function(e){wt(c,o,[e])}));return u.h}function un(e,t){return ln(!0,o,k[E](arguments))}function hn(e,t,n){return ln(!0,e,k[E](arguments,1))}function dn(e,t){return ln(!1,o,k[E](arguments))}},5396:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.oneDataSystemClientFactory=void 0,t.oneDataSystemClientFactory=async(e,t,r)=>{let i=await(async(e,t,r)=>{const i=await Promise.resolve().then((()=>a(n(956)))),o=await Promise.resolve().then((()=>a(n(8916)))),s=new i.AppInsightsCore,c=new o.PostChannel,l={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[c]]};if(r){l.extensionConfig={};const e={alwaysUseXhrOverride:!0,httpXHROverride:r};l.extensionConfig[c.identifier]=e}const u=t.workspace.getConfiguration("telemetry").get("internalTesting");return s.initialize(l,[]),s.addTelemetryInitializer((e=>{e.ext=e.ext??{},e.ext.web=e.ext.web??{},e.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',u&&(e.ext.utc=e.ext.utc??{},e.ext.utc.flags=8462029)})),s})(e,t,r);return{logEvent:(e,t)=>{try{i?.track({name:e,baseData:{name:e,properties:t?.properties,measurements:t?.measurements}})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},flush:async()=>{try{return new Promise(((e,t)=>{i?i.flush(!0,(e=>{e||t("Failed to flush app 1DS!")})):e()}))}catch(e){throw new Error("Failed to flush 1DS!\n"+e.message)}},dispose:async()=>new Promise((e=>{i?i.unload(!1,(()=>{e(),i=void 0}),1e3):e()}))}}},2468:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.appInsightsClientFactory=void 0;const o=n(740),s=n(8393);t.appInsightsClientFactory=async(e,t,r,i)=>{let c;try{const t=await Promise.resolve().then((()=>a(n(5927)))),i={};if(r){const e={alwaysUseXhrOverride:!0,httpXHROverride:r};i[o.BreezeChannelIdentifier]=e}c=new t.ApplicationInsights({connectionString:e,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:i})}catch(e){return Promise.reject(e)}return{logEvent:(e,n)=>{const r={...n?.properties,...n?.measurements};i?.length&&s.TelemetryUtil.applyReplacements(r,i),c?.track({name:e,data:r,baseType:"EventData",ext:{user:{id:t,authId:t}},baseData:{name:e,properties:n?.properties,measurements:n?.measurements}})},flush:async()=>{c?.flush(!1)},dispose:async()=>new Promise((e=>{c?.unload(!0,(()=>{e(),c=void 0}),1e3)}))}}},6548:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTelemetryReporter=void 0,t.BaseTelemetryReporter=class{constructor(e,t,n){this.telemetrySender=e,this.vscodeAPI=t,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,n),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates((()=>{this.updateUserOptIn()}))}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,t,n,r){r?this.telemetrySender.sendEventData(e,{properties:t,measurements:n}):this.telemetryLogger.logUsage(e,{properties:t,measurements:n})}sendTelemetryEvent(e,t,n){this.internalSendTelemetryEvent(e,t,n,!1)}sendRawTelemetryEvent(e,t,n){const r={...t};for(const e of Object.keys(r??{})){const t=r[e];"string"==typeof e&&void 0!==t&&(r[e]=new this.vscodeAPI.TelemetryTrustedValue("string"==typeof t?t:t.value))}this.sendTelemetryEvent(e,r,n)}sendDangerousTelemetryEvent(e,t,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,t,n,!0)}internalSendTelemetryErrorEvent(e,t,n,r){r?this.telemetrySender.sendEventData(e,{properties:t,measurements:n}):this.telemetryLogger.logError(e,{properties:t,measurements:n})}sendTelemetryErrorEvent(e,t,n){this.internalSendTelemetryErrorEvent(e,t,n,!1)}sendDangerousTelemetryErrorEvent(e,t,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,t,n,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map((e=>e.dispose())))}}},2396:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTelemetrySender=void 0,function(e){e[e.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",e[e.INSTANTIATING=1]="INSTANTIATING",e[e.INSTANTIATED=2]="INSTANTIATED"}(n||(n={})),t.BaseTelemetrySender=class{constructor(e,t){this._instantiationStatus=n.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e}sendEventData(e,t){this._telemetryClient?this._telemetryClient.logEvent(e,t):this._instantiationStatus!==n.INSTANTIATED&&this._eventQueue.push({eventName:e,data:t})}sendErrorData(e,t){if(!this._telemetryClient)return void(this._instantiationStatus!==n.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:t}));const r={stack:e.stack,message:e.message,name:e.name};if(t){const e=t.properties||t;t.properties={...e,...r}}else t={properties:r};this._telemetryClient.logEvent("unhandlederror",t)}async flush(){return this._telemetryClient?.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach((({eventName:e,data:t})=>this.sendEventData(e,t))),this._eventQueue=[],this._exceptionQueue.forEach((({exception:e,data:t})=>this.sendErrorData(e,t))),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===n.NOT_INSTANTIATED&&(this._instantiationStatus=n.INSTANTIATING,this._clientFactory(this._key).then((e=>{this._telemetryClient=e,this._instantiationStatus=n.INSTANTIATED,this._flushQueues()})).catch((e=>{console.error(e),this._instantiationStatus=n.INSTANTIATED})))}}},8393:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryUtil=void 0;class n{static applyReplacements(e,t){for(const n of Object.keys(e))for(const r of t)r.lookup.test(n)&&(void 0!==r.replacementString?e[n]=r.replacementString:delete e[n])}static shouldUseOneDataSystemSDK(e){return 74===e.length&&"-"===e[32]&&"-"===e[41]&&"-"===e[46]&&"-"===e[51]&&"-"===e[56]&&"-"===e[69]}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.9.7"}}static getInstance(){return n._instance||(n._instance=new n),n._instance}}t.TelemetryUtil=n},1170:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const o=a(n(5692)),s=a(n(857)),c=a(n(1398)),l=n(5396),u=n(2468),h=n(6548),d=n(2396),f=n(8393);function p(){return{sendPOST:(e,t)=>{const n={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{const r=o.request(e.urlString,n,(e=>{e.on("data",(function(n){t(e.statusCode??200,e.headers,n.toString())})),e.on("error",(function(){t(0,{})}))}));r.write(e.data,(e=>{e&&t(0,{})})),r.end()}catch{t(0,{})}}}}class v extends h.BaseTelemetryReporter{constructor(e,t){let n=e=>(0,u.appInsightsClientFactory)(e,c.env.machineId,p(),t);f.TelemetryUtil.shouldUseOneDataSystemSDK(e)&&(n=e=>(0,l.oneDataSystemClientFactory)(e,c,p()));const r={release:s.release(),platform:s.platform(),architecture:s.arch()},i=new d.BaseTelemetrySender(e,n);if(e&&0===e.indexOf("AIF-"))throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(i,c,{additionalCommonProperties:f.TelemetryUtil.getAdditionalCommonProperties(r)})}}t.default=v},998:(e,t,n)=>{const r=n(9896),i=n(6928),a=n(857),o=n(6982),s=n(56).version,c=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;function l(e){console.log(`[dotenv@${s}][DEBUG] ${e}`)}function u(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function h(e,t){let n;try{n=new URL(t)}catch(e){if("ERR_INVALID_URL"===e.code){const e=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw e.code="INVALID_DOTENV_KEY",e}throw e}const r=n.password;if(!r){const e=new Error("INVALID_DOTENV_KEY: Missing key part");throw e.code="INVALID_DOTENV_KEY",e}const i=n.searchParams.get("environment");if(!i){const e=new Error("INVALID_DOTENV_KEY: Missing environment part");throw e.code="INVALID_DOTENV_KEY",e}const a=`DOTENV_VAULT_${i.toUpperCase()}`,o=e.parsed[a];if(!o){const e=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${a} in your .env.vault file.`);throw e.code="NOT_FOUND_DOTENV_ENVIRONMENT",e}return{ciphertext:o,key:r}}function d(e){let t=null;if(e&&e.path&&e.path.length>0)if(Array.isArray(e.path))for(const n of e.path)r.existsSync(n)&&(t=n.endsWith(".vault")?n:`${n}.vault`);else t=e.path.endsWith(".vault")?e.path:`${e.path}.vault`;else t=i.resolve(process.cwd(),".env.vault");return r.existsSync(t)?t:null}function f(e){return"~"===e[0]?i.join(a.homedir(),e.slice(1)):e}const p={configDotenv:function(e){const t=i.resolve(process.cwd(),".env");let n="utf8";const a=Boolean(e&&e.debug);e&&e.encoding?n=e.encoding:a&&l("No encoding is specified. UTF-8 is used by default");let o,s=[t];if(e&&e.path)if(Array.isArray(e.path)){s=[];for(const t of e.path)s.push(f(t))}else s=[f(e.path)];const c={};for(const t of s)try{const i=p.parse(r.readFileSync(t,{encoding:n}));p.populate(c,i,e)}catch(e){a&&l(`Failed to load ${t} ${e.message}`),o=e}let u=process.env;return e&&null!=e.processEnv&&(u=e.processEnv),p.populate(u,c,e),o?{parsed:c,error:o}:{parsed:c}},_configVault:function(e){console.log(`[dotenv@${s}][INFO] Loading env from encrypted .env.vault`);const t=p._parseVault(e);let n=process.env;return e&&null!=e.processEnv&&(n=e.processEnv),p.populate(n,t,e),{parsed:t}},_parseVault:function(e){const t=d(e),n=p.configDotenv({path:t});if(!n.parsed){const e=new Error(`MISSING_DATA: Cannot parse ${t} for an unknown reason`);throw e.code="MISSING_DATA",e}const r=u(e).split(","),i=r.length;let a;for(let e=0;e<i;e++)try{const t=h(n,r[e].trim());a=p.decrypt(t.ciphertext,t.key);break}catch(t){if(e+1>=i)throw t}return p.parse(a)},config:function(e){if(0===u(e).length)return p.configDotenv(e);const t=d(e);return t?p._configVault(e):(n=`You set DOTENV_KEY but you are missing a .env.vault file at ${t}. Did you forget to build it?`,console.log(`[dotenv@${s}][WARN] ${n}`),p.configDotenv(e));var n},decrypt:function(e,t){const n=Buffer.from(t.slice(-64),"hex");let r=Buffer.from(e,"base64");const i=r.subarray(0,12),a=r.subarray(-16);r=r.subarray(12,-16);try{const e=o.createDecipheriv("aes-256-gcm",n,i);return e.setAuthTag(a),`${e.update(r)}${e.final()}`}catch(e){const t=e instanceof RangeError,n="Invalid key length"===e.message,r="Unsupported state or unable to authenticate data"===e.message;if(t||n){const e=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw e.code="INVALID_DOTENV_KEY",e}if(r){const e=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw e.code="DECRYPTION_FAILED",e}throw e}},parse:function(e){const t={};let n,r=e.toString();for(r=r.replace(/\r\n?/gm,"\n");null!=(n=c.exec(r));){const e=n[1];let r=n[2]||"";r=r.trim();const i=r[0];r=r.replace(/^(['"`])([\s\S]*)\1$/gm,"$2"),'"'===i&&(r=r.replace(/\\n/g,"\n"),r=r.replace(/\\r/g,"\r")),t[e]=r}return t},populate:function(e,t,n={}){const r=Boolean(n&&n.debug),i=Boolean(n&&n.override);if("object"!=typeof t){const e=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw e.code="OBJECT_REQUIRED",e}for(const n of Object.keys(t))Object.prototype.hasOwnProperty.call(e,n)?(!0===i&&(e[n]=t[n]),r&&l(!0===i?`"${n}" is already defined and WAS overwritten`:`"${n}" is already defined and was NOT overwritten`)):e[n]=t[n]}};e.exports.configDotenv=p.configDotenv,e.exports._configVault=p._configVault,e.exports._parseVault=p._parseVault,e.exports.config=p.config,e.exports.decrypt=p.decrypt,e.exports.parse=p.parse,e.exports.populate=p.populate,e.exports=p},3876:(e,t,n)=>{"use strict";const r=n(3735),i=n(6928),a=n(3798).mkdirsSync,o=n(7211).utimesMillisSync,s=n(6462);function c(e,t,n,a){const o=(a.dereference?r.statSync:r.lstatSync)(t);if(o.isDirectory())return function(e,t,n,i,a){return t?h(n,i,a):function(e,t,n,i){return r.mkdirSync(n),h(t,n,i),u(n,e)}(e.mode,n,i,a)}(o,e,t,n,a);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return function(e,t,n,i,a){return t?function(e,t,n,i){if(i.overwrite)return r.unlinkSync(n),l(e,t,n,i);if(i.errorOnExist)throw new Error(`'${n}' already exists`)}(e,n,i,a):l(e,n,i,a)}(o,e,t,n,a);if(o.isSymbolicLink())return function(e,t,n,a){let o=r.readlinkSync(t);if(a.dereference&&(o=i.resolve(process.cwd(),o)),e){let e;try{e=r.readlinkSync(n)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return r.symlinkSync(o,n);throw e}if(a.dereference&&(e=i.resolve(process.cwd(),e)),s.isSrcSubdir(o,e))throw new Error(`Cannot copy '${o}' to a subdirectory of itself, '${e}'.`);if(s.isSrcSubdir(e,o))throw new Error(`Cannot overwrite '${e}' with '${o}'.`);return function(e,t){return r.unlinkSync(t),r.symlinkSync(e,t)}(o,n)}return r.symlinkSync(o,n)}(e,t,n,a);if(o.isSocket())throw new Error(`Cannot copy a socket file: ${t}`);if(o.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${t}`);throw new Error(`Unknown file: ${t}`)}function l(e,t,n,i){return r.copyFileSync(t,n),i.preserveTimestamps&&function(e,t,n){(function(e){return 0==(128&e)})(e)&&function(e,t){u(e,128|t)}(n,e),function(e,t){const n=r.statSync(e);o(t,n.atime,n.mtime)}(t,n)}(e.mode,t,n),u(n,e.mode)}function u(e,t){return r.chmodSync(e,t)}function h(e,t,n){r.readdirSync(e).forEach((r=>function(e,t,n,r){const a=i.join(t,e),o=i.join(n,e);if(r.filter&&!r.filter(a,o))return;const{destStat:l}=s.checkPathsSync(a,o,"copy",r);return c(l,a,o,r)}(r,e,t,n)))}e.exports=function(e,t,n){"function"==typeof n&&(n={filter:n}),(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0002");const{srcStat:o,destStat:l}=s.checkPathsSync(e,t,"copy",n);if(s.checkParentPathsSync(e,o,t,"copy"),n.filter&&!n.filter(e,t))return;const u=i.dirname(t);return r.existsSync(u)||a(u),c(l,e,t,n)}},4994:(e,t,n)=>{"use strict";const r=n(8737),i=n(6928),{mkdirs:a}=n(3798),{pathExists:o}=n(9288),{utimesMillis:s}=n(7211),c=n(6462);async function l(e,t,n){return!n.filter||n.filter(e,t)}async function u(e,t,n,a){const o=a.dereference?r.stat:r.lstat,s=await o(t);if(s.isDirectory())return async function(e,t,n,a,o){t||await r.mkdir(a);const s=await r.readdir(n);await Promise.all(s.map((async e=>{const t=i.join(n,e),r=i.join(a,e);if(!await l(t,r,o))return;const{destStat:s}=await c.checkPaths(t,r,"copy",o);return u(s,t,r,o)}))),t||await r.chmod(a,e.mode)}(s,e,t,n,a);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return async function(e,t,n,i,a){if(!t)return h(e,n,i,a);if(a.overwrite)return await r.unlink(i),h(e,n,i,a);if(a.errorOnExist)throw new Error(`'${i}' already exists`)}(s,e,t,n,a);if(s.isSymbolicLink())return async function(e,t,n,a){let o=await r.readlink(t);if(a.dereference&&(o=i.resolve(process.cwd(),o)),!e)return r.symlink(o,n);let s=null;try{s=await r.readlink(n)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return r.symlink(o,n);throw e}if(a.dereference&&(s=i.resolve(process.cwd(),s)),c.isSrcSubdir(o,s))throw new Error(`Cannot copy '${o}' to a subdirectory of itself, '${s}'.`);if(c.isSrcSubdir(s,o))throw new Error(`Cannot overwrite '${s}' with '${o}'.`);return await r.unlink(n),r.symlink(o,n)}(e,t,n,a);if(s.isSocket())throw new Error(`Cannot copy a socket file: ${t}`);if(s.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${t}`);throw new Error(`Unknown file: ${t}`)}async function h(e,t,n,i){if(await r.copyFile(t,n),i.preserveTimestamps){0==(128&e.mode)&&await function(e,t){return r.chmod(e,128|t)}(n,e.mode);const i=await r.stat(t);await s(n,i.atime,i.mtime)}return r.chmod(n,e.mode)}e.exports=async function(e,t,n={}){"function"==typeof n&&(n={filter:n}),n.clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0001");const{srcStat:r,destStat:s}=await c.checkPaths(e,t,"copy",n);if(await c.checkParentPaths(e,r,t,"copy"),!await l(e,t,n))return;const h=i.dirname(t);await o(h)||await a(h),await u(s,e,t,n)}},4423:(e,t,n)=>{"use strict";const r=n(1236).fromPromise;e.exports={copy:r(n(4994)),copySync:n(3876)}},2591:(e,t,n)=>{"use strict";const r=n(1236).fromPromise,i=n(8737),a=n(6928),o=n(3798),s=n(5422),c=r((async function(e){let t;try{t=await i.readdir(e)}catch{return o.mkdirs(e)}return Promise.all(t.map((t=>s.remove(a.join(e,t)))))}));function l(e){let t;try{t=i.readdirSync(e)}catch{return o.mkdirsSync(e)}t.forEach((t=>{t=a.join(e,t),s.removeSync(t)}))}e.exports={emptyDirSync:l,emptydirSync:l,emptyDir:c,emptydir:c}},9616:(e,t,n)=>{"use strict";const r=n(1236).fromPromise,i=n(6928),a=n(8737),o=n(3798);e.exports={createFile:r((async function(e){let t;try{t=await a.stat(e)}catch{}if(t&&t.isFile())return;const n=i.dirname(e);let r=null;try{r=await a.stat(n)}catch(t){if("ENOENT"===t.code)return await o.mkdirs(n),void await a.writeFile(e,"");throw t}r.isDirectory()?await a.writeFile(e,""):await a.readdir(n)})),createFileSync:function(e){let t;try{t=a.statSync(e)}catch{}if(t&&t.isFile())return;const n=i.dirname(e);try{a.statSync(n).isDirectory()||a.readdirSync(n)}catch(e){if(!e||"ENOENT"!==e.code)throw e;o.mkdirsSync(n)}a.writeFileSync(e,"")}}},6288:(e,t,n)=>{"use strict";const{createFile:r,createFileSync:i}=n(9616),{createLink:a,createLinkSync:o}=n(1522),{createSymlink:s,createSymlinkSync:c}=n(5291);e.exports={createFile:r,createFileSync:i,ensureFile:r,ensureFileSync:i,createLink:a,createLinkSync:o,ensureLink:a,ensureLinkSync:o,createSymlink:s,createSymlinkSync:c,ensureSymlink:s,ensureSymlinkSync:c}},1522:(e,t,n)=>{"use strict";const r=n(1236).fromPromise,i=n(6928),a=n(8737),o=n(3798),{pathExists:s}=n(9288),{areIdentical:c}=n(6462);e.exports={createLink:r((async function(e,t){let n,r;try{n=await a.lstat(t)}catch{}try{r=await a.lstat(e)}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}if(n&&c(r,n))return;const l=i.dirname(t);await s(l)||await o.mkdirs(l),await a.link(e,t)})),createLinkSync:function(e,t){let n;try{n=a.lstatSync(t)}catch{}try{const t=a.lstatSync(e);if(n&&c(t,n))return}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const r=i.dirname(t);return a.existsSync(r)||o.mkdirsSync(r),a.linkSync(e,t)}}},3838:(e,t,n)=>{"use strict";const r=n(6928),i=n(8737),{pathExists:a}=n(9288),o=n(1236).fromPromise;e.exports={symlinkPaths:o((async function(e,t){if(r.isAbsolute(e)){try{await i.lstat(e)}catch(e){throw e.message=e.message.replace("lstat","ensureSymlink"),e}return{toCwd:e,toDst:e}}const n=r.dirname(t),o=r.join(n,e);if(await a(o))return{toCwd:o,toDst:e};try{await i.lstat(e)}catch(e){throw e.message=e.message.replace("lstat","ensureSymlink"),e}return{toCwd:e,toDst:r.relative(n,e)}})),symlinkPathsSync:function(e,t){if(r.isAbsolute(e)){if(!i.existsSync(e))throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}const n=r.dirname(t),a=r.join(n,e);if(i.existsSync(a))return{toCwd:a,toDst:e};if(!i.existsSync(e))throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:r.relative(n,e)}}}},7064:(e,t,n)=>{"use strict";const r=n(8737),i=n(1236).fromPromise;e.exports={symlinkType:i((async function(e,t){if(t)return t;let n;try{n=await r.lstat(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"})),symlinkTypeSync:function(e,t){if(t)return t;let n;try{n=r.lstatSync(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}}},5291:(e,t,n)=>{"use strict";const r=n(1236).fromPromise,i=n(6928),a=n(8737),{mkdirs:o,mkdirsSync:s}=n(3798),{symlinkPaths:c,symlinkPathsSync:l}=n(3838),{symlinkType:u,symlinkTypeSync:h}=n(7064),{pathExists:d}=n(9288),{areIdentical:f}=n(6462);e.exports={createSymlink:r((async function(e,t,n){let r;try{r=await a.lstat(t)}catch{}if(r&&r.isSymbolicLink()){const[n,r]=await Promise.all([a.stat(e),a.stat(t)]);if(f(n,r))return}const s=await c(e,t);e=s.toDst;const l=await u(s.toCwd,n),h=i.dirname(t);return await d(h)||await o(h),a.symlink(e,t,l)})),createSymlinkSync:function(e,t,n){let r;try{r=a.lstatSync(t)}catch{}if(r&&r.isSymbolicLink()){const n=a.statSync(e),r=a.statSync(t);if(f(n,r))return}const o=l(e,t);e=o.toDst,n=h(o.toCwd,n);const c=i.dirname(t);return a.existsSync(c)||s(c),a.symlinkSync(e,t,n)}}},8737:(e,t,n)=>{"use strict";const r=n(1236).fromCallback,i=n(3735),a=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter((e=>"function"==typeof i[e]));Object.assign(t,i),a.forEach((e=>{t[e]=r(i[e])})),t.exists=function(e,t){return"function"==typeof t?i.exists(e,t):new Promise((t=>i.exists(e,t)))},t.read=function(e,t,n,r,a,o){return"function"==typeof o?i.read(e,t,n,r,a,o):new Promise(((o,s)=>{i.read(e,t,n,r,a,((e,t,n)=>{if(e)return s(e);o({bytesRead:t,buffer:n})}))}))},t.write=function(e,t,...n){return"function"==typeof n[n.length-1]?i.write(e,t,...n):new Promise(((r,a)=>{i.write(e,t,...n,((e,t,n)=>{if(e)return a(e);r({bytesWritten:t,buffer:n})}))}))},t.readv=function(e,t,...n){return"function"==typeof n[n.length-1]?i.readv(e,t,...n):new Promise(((r,a)=>{i.readv(e,t,...n,((e,t,n)=>{if(e)return a(e);r({bytesRead:t,buffers:n})}))}))},t.writev=function(e,t,...n){return"function"==typeof n[n.length-1]?i.writev(e,t,...n):new Promise(((r,a)=>{i.writev(e,t,...n,((e,t,n)=>{if(e)return a(e);r({bytesWritten:t,buffers:n})}))}))},"function"==typeof i.realpath.native?t.realpath.native=r(i.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")},1605:(e,t,n)=>{"use strict";e.exports={...n(8737),...n(4423),...n(2591),...n(6288),...n(3376),...n(3798),...n(2455),...n(7024),...n(9288),...n(5422)}},3376:(e,t,n)=>{"use strict";const r=n(1236).fromPromise,i=n(2934);i.outputJson=r(n(6426)),i.outputJsonSync=n(2188),i.outputJSON=i.outputJson,i.outputJSONSync=i.outputJsonSync,i.writeJSON=i.writeJson,i.writeJSONSync=i.writeJsonSync,i.readJSON=i.readJson,i.readJSONSync=i.readJsonSync,e.exports=i},2934:(e,t,n)=>{"use strict";const r=n(2909);e.exports={readJson:r.readFile,readJsonSync:r.readFileSync,writeJson:r.writeFile,writeJsonSync:r.writeFileSync}},2188:(e,t,n)=>{"use strict";const{stringify:r}=n(1144),{outputFileSync:i}=n(7024);e.exports=function(e,t,n){const a=r(t,n);i(e,a,n)}},6426:(e,t,n)=>{"use strict";const{stringify:r}=n(1144),{outputFile:i}=n(7024);e.exports=async function(e,t,n={}){const a=r(t,n);await i(e,a,n)}},3798:(e,t,n)=>{"use strict";const r=n(1236).fromPromise,{makeDir:i,makeDirSync:a}=n(4154),o=r(i);e.exports={mkdirs:o,mkdirsSync:a,mkdirp:o,mkdirpSync:a,ensureDir:o,ensureDirSync:a}},4154:(e,t,n)=>{"use strict";const r=n(8737),{checkPath:i}=n(7111),a=e=>"number"==typeof e?e:{mode:511,...e}.mode;e.exports.makeDir=async(e,t)=>(i(e),r.mkdir(e,{mode:a(t),recursive:!0})),e.exports.makeDirSync=(e,t)=>(i(e),r.mkdirSync(e,{mode:a(t),recursive:!0}))},7111:(e,t,n)=>{"use strict";const r=n(6928);e.exports.checkPath=function(e){if("win32"===process.platform&&/[<>:"|?*]/.test(e.replace(r.parse(e).root,""))){const t=new Error(`Path contains invalid characters: ${e}`);throw t.code="EINVAL",t}}},2455:(e,t,n)=>{"use strict";const r=n(1236).fromPromise;e.exports={move:r(n(3314)),moveSync:n(6244)}},6244:(e,t,n)=>{"use strict";const r=n(3735),i=n(6928),a=n(4423).copySync,o=n(5422).removeSync,s=n(3798).mkdirpSync,c=n(6462);function l(e,t,n){try{r.renameSync(e,t)}catch(r){if("EXDEV"!==r.code)throw r;return function(e,t,n){return a(e,t,{overwrite:n,errorOnExist:!0,preserveTimestamps:!0}),o(e)}(e,t,n)}}e.exports=function(e,t,n){const a=(n=n||{}).overwrite||n.clobber||!1,{srcStat:u,isChangingCase:h=!1}=c.checkPathsSync(e,t,"move",n);return c.checkParentPathsSync(e,u,t,"move"),function(e){const t=i.dirname(e);return i.parse(t).root===t}(t)||s(i.dirname(t)),function(e,t,n,i){if(i)return l(e,t,n);if(n)return o(t),l(e,t,n);if(r.existsSync(t))throw new Error("dest already exists.");return l(e,t,n)}(e,t,a,h)}},3314:(e,t,n)=>{"use strict";const r=n(8737),i=n(6928),{copy:a}=n(4423),{remove:o}=n(5422),{mkdirp:s}=n(3798),{pathExists:c}=n(9288),l=n(6462);e.exports=async function(e,t,n={}){const u=n.overwrite||n.clobber||!1,{srcStat:h,isChangingCase:d=!1}=await l.checkPaths(e,t,"move",n);await l.checkParentPaths(e,h,t,"move");const f=i.dirname(t);return i.parse(f).root!==f&&await s(f),async function(e,t,n,i){if(!i)if(n)await o(t);else if(await c(t))throw new Error("dest already exists.");try{await r.rename(e,t)}catch(r){if("EXDEV"!==r.code)throw r;await async function(e,t,n){const r={overwrite:n,errorOnExist:!0,preserveTimestamps:!0};return await a(e,t,r),o(e)}(e,t,n)}}(e,t,u,d)}},7024:(e,t,n)=>{"use strict";const r=n(1236).fromPromise,i=n(8737),a=n(6928),o=n(3798),s=n(9288).pathExists;e.exports={outputFile:r((async function(e,t,n="utf-8"){const r=a.dirname(e);return await s(r)||await o.mkdirs(r),i.writeFile(e,t,n)})),outputFileSync:function(e,...t){const n=a.dirname(e);i.existsSync(n)||o.mkdirsSync(n),i.writeFileSync(e,...t)}}},9288:(e,t,n)=>{"use strict";const r=n(1236).fromPromise,i=n(8737);e.exports={pathExists:r((function(e){return i.access(e).then((()=>!0)).catch((()=>!1))})),pathExistsSync:i.existsSync}},5422:(e,t,n)=>{"use strict";const r=n(3735),i=n(1236).fromCallback;e.exports={remove:i((function(e,t){r.rm(e,{recursive:!0,force:!0},t)})),removeSync:function(e){r.rmSync(e,{recursive:!0,force:!0})}}},6462:(e,t,n)=>{"use strict";const r=n(8737),i=n(6928),a=n(1236).fromPromise;function o(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function s(e,t){const n=i.resolve(e).split(i.sep).filter((e=>e)),r=i.resolve(t).split(i.sep).filter((e=>e));return n.every(((e,t)=>r[t]===e))}function c(e,t,n){return`Cannot ${n} '${e}' to a subdirectory of itself, '${t}'.`}e.exports={checkPaths:a((async function(e,t,n,a){const{srcStat:l,destStat:u}=await function(e,t,n){const i=n.dereference?e=>r.stat(e,{bigint:!0}):e=>r.lstat(e,{bigint:!0});return Promise.all([i(e),i(t).catch((e=>{if("ENOENT"===e.code)return null;throw e}))]).then((([e,t])=>({srcStat:e,destStat:t})))}(e,t,a);if(u){if(o(l,u)){const r=i.basename(e),a=i.basename(t);if("move"===n&&r!==a&&r.toLowerCase()===a.toLowerCase())return{srcStat:l,destStat:u,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(l.isDirectory()&&!u.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!l.isDirectory()&&u.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(l.isDirectory()&&s(e,t))throw new Error(c(e,t,n));return{srcStat:l,destStat:u}})),checkPathsSync:function(e,t,n,a){const{srcStat:l,destStat:u}=function(e,t,n){let i;const a=n.dereference?e=>r.statSync(e,{bigint:!0}):e=>r.lstatSync(e,{bigint:!0}),o=a(e);try{i=a(t)}catch(e){if("ENOENT"===e.code)return{srcStat:o,destStat:null};throw e}return{srcStat:o,destStat:i}}(e,t,a);if(u){if(o(l,u)){const r=i.basename(e),a=i.basename(t);if("move"===n&&r!==a&&r.toLowerCase()===a.toLowerCase())return{srcStat:l,destStat:u,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(l.isDirectory()&&!u.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!l.isDirectory()&&u.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(l.isDirectory()&&s(e,t))throw new Error(c(e,t,n));return{srcStat:l,destStat:u}},checkParentPaths:a((async function e(t,n,a,s){const l=i.resolve(i.dirname(t)),u=i.resolve(i.dirname(a));if(u===l||u===i.parse(u).root)return;let h;try{h=await r.stat(u,{bigint:!0})}catch(e){if("ENOENT"===e.code)return;throw e}if(o(n,h))throw new Error(c(t,a,s));return e(t,n,u,s)})),checkParentPathsSync:function e(t,n,a,s){const l=i.resolve(i.dirname(t)),u=i.resolve(i.dirname(a));if(u===l||u===i.parse(u).root)return;let h;try{h=r.statSync(u,{bigint:!0})}catch(e){if("ENOENT"===e.code)return;throw e}if(o(n,h))throw new Error(c(t,a,s));return e(t,n,u,s)},isSrcSubdir:s,areIdentical:o}},7211:(e,t,n)=>{"use strict";const r=n(8737),i=n(1236).fromPromise;e.exports={utimesMillis:i((async function(e,t,n){const i=await r.open(e,"r+");let a=null;try{await r.futimes(i,t,n)}finally{try{await r.close(i)}catch(e){a=e}}if(a)throw a})),utimesMillisSync:function(e,t,n){const i=r.openSync(e,"r+");return r.futimesSync(i,t,n),r.closeSync(i)}}},1283:e=>{"use strict";e.exports=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var n={__proto__:t(e)};else n=Object.create(null);return Object.getOwnPropertyNames(e).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})),n};var t=Object.getPrototypeOf||function(e){return e.__proto__}},3735:(e,t,n)=>{var r,i,a=n(9896),o=n(9106),s=n(1995),c=n(1283),l=n(9023);function u(e,t){Object.defineProperty(e,r,{get:function(){return t}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(r=Symbol.for("graceful-fs.queue"),i=Symbol.for("graceful-fs.previous")):(r="___graceful-fs.queue",i="___graceful-fs.previous");var h,d=function(){};if(l.debuglog?d=l.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(d=function(){var e=l.format.apply(l,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),!a[r]){var f=global[r]||[];u(a,f),a.close=function(e){function t(t,n){return e.call(a,t,(function(e){e||m(),"function"==typeof n&&n.apply(this,arguments)}))}return Object.defineProperty(t,i,{value:e}),t}(a.close),a.closeSync=function(e){function t(t){e.apply(a,arguments),m()}return Object.defineProperty(t,i,{value:e}),t}(a.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){d(a[r]),n(2613).equal(a[r].length,0)}))}function p(e){o(e),e.gracefulify=p,e.createReadStream=function(t,n){return new e.ReadStream(t,n)},e.createWriteStream=function(t,n){return new e.WriteStream(t,n)};var t=e.readFile;e.readFile=function(e,n,r){return"function"==typeof n&&(r=n,n=null),function e(n,r,i,a){return t(n,r,(function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?"function"==typeof i&&i.apply(this,arguments):v([e,[n,r,i],t,a||Date.now(),Date.now()])}))}(e,n,r)};var n=e.writeFile;e.writeFile=function(e,t,r,i){return"function"==typeof r&&(i=r,r=null),function e(t,r,i,a,o){return n(t,r,i,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?"function"==typeof a&&a.apply(this,arguments):v([e,[t,r,i,a],n,o||Date.now(),Date.now()])}))}(e,t,r,i)};var r=e.appendFile;r&&(e.appendFile=function(e,t,n,i){return"function"==typeof n&&(i=n,n=null),function e(t,n,i,a,o){return r(t,n,i,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?"function"==typeof a&&a.apply(this,arguments):v([e,[t,n,i,a],r,o||Date.now(),Date.now()])}))}(e,t,n,i)});var i=e.copyFile;i&&(e.copyFile=function(e,t,n,r){return"function"==typeof n&&(r=n,n=0),function e(t,n,r,a,o){return i(t,n,r,(function(i){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?"function"==typeof a&&a.apply(this,arguments):v([e,[t,n,r,a],i,o||Date.now(),Date.now()])}))}(e,t,n,r)});var a=e.readdir;e.readdir=function(e,t,n){"function"==typeof t&&(n=t,t=null);var r=c.test(process.version)?function(e,t,n,r){return a(e,i(e,t,n,r))}:function(e,t,n,r){return a(e,t,i(e,t,n,r))};return r(e,t,n);function i(e,t,n,i){return function(a,o){!a||"EMFILE"!==a.code&&"ENFILE"!==a.code?(o&&o.sort&&o.sort(),"function"==typeof n&&n.call(this,a,o)):v([r,[e,t,n],a,i||Date.now(),Date.now()])}}};var c=/^v[0-5]\./;if("v0.8"===process.version.substr(0,4)){var l=s(e);m=l.ReadStream,g=l.WriteStream}var u=e.ReadStream;u&&(m.prototype=Object.create(u.prototype),m.prototype.open=function(){var e=this;E(e.path,e.flags,e.mode,(function(t,n){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=n,e.emit("open",n),e.read())}))});var h=e.WriteStream;h&&(g.prototype=Object.create(h.prototype),g.prototype.open=function(){var e=this;E(e.path,e.flags,e.mode,(function(t,n){t?(e.destroy(),e.emit("error",t)):(e.fd=n,e.emit("open",n))}))}),Object.defineProperty(e,"ReadStream",{get:function(){return m},set:function(e){m=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return g},set:function(e){g=e},enumerable:!0,configurable:!0});var d=m;Object.defineProperty(e,"FileReadStream",{get:function(){return d},set:function(e){d=e},enumerable:!0,configurable:!0});var f=g;function m(e,t){return this instanceof m?(u.apply(this,arguments),this):m.apply(Object.create(m.prototype),arguments)}function g(e,t){return this instanceof g?(h.apply(this,arguments),this):g.apply(Object.create(g.prototype),arguments)}Object.defineProperty(e,"FileWriteStream",{get:function(){return f},set:function(e){f=e},enumerable:!0,configurable:!0});var y=e.open;function E(e,t,n,r){return"function"==typeof n&&(r=n,n=null),function e(t,n,r,i,a){return y(t,n,r,(function(o,s){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?"function"==typeof i&&i.apply(this,arguments):v([e,[t,n,r,i],o,a||Date.now(),Date.now()])}))}(e,t,n,r)}return e.open=E,e}function v(e){d("ENQUEUE",e[0].name,e[1]),a[r].push(e),g()}function m(){for(var e=Date.now(),t=0;t<a[r].length;++t)a[r][t].length>2&&(a[r][t][3]=e,a[r][t][4]=e);g()}function g(){if(clearTimeout(h),h=void 0,0!==a[r].length){var e=a[r].shift(),t=e[0],n=e[1],i=e[2],o=e[3],s=e[4];if(void 0===o)d("RETRY",t.name,n),t.apply(null,n);else if(Date.now()-o>=6e4){d("TIMEOUT",t.name,n);var c=n.pop();"function"==typeof c&&c.call(null,i)}else{var l=Date.now()-s,u=Math.max(s-o,1);l>=Math.min(1.2*u,100)?(d("RETRY",t.name,n),t.apply(null,n.concat([o]))):a[r].push(e)}void 0===h&&(h=setTimeout(g,0))}}global[r]||u(global,a[r]),e.exports=p(c(a)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!a.__patched&&(e.exports=p(a),a.__patched=!0)},1995:(e,t,n)=>{var r=n(2203).Stream;e.exports=function(e){return{ReadStream:function t(n,i){if(!(this instanceof t))return new t(n,i);r.call(this);var a=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,i=i||{};for(var o=Object.keys(i),s=0,c=o.length;s<c;s++){var l=o[s];this[l]=i[l]}if(this.encoding&&this.setEncoding(this.encoding),void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}null===this.fd?e.open(this.path,this.flags,this.mode,(function(e,t){if(e)return a.emit("error",e),void(a.readable=!1);a.fd=t,a.emit("open",t),a._read()})):process.nextTick((function(){a._read()}))},WriteStream:function t(n,i){if(!(this instanceof t))return new t(n,i);r.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var a=Object.keys(i),o=0,s=a.length;o<s;o++){var c=a[o];this[c]=i[c]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}},9106:(e,t,n)=>{var r=n(9140),i=process.cwd,a=null,o=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return a||(a=i.call(process)),a};try{process.cwd()}catch(e){}if("function"==typeof process.chdir){var s=process.chdir;process.chdir=function(e){a=null,s.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,s)}e.exports=function(e){function t(t){return t?function(n,r,i){return t.call(e,n,r,(function(e){l(e)&&(e=null),i&&i.apply(this,arguments)}))}:t}function n(t){return t?function(n,r){try{return t.call(e,n,r)}catch(e){if(!l(e))throw e}}:t}function i(t){return t?function(n,r,i,a){return t.call(e,n,r,i,(function(e){l(e)&&(e=null),a&&a.apply(this,arguments)}))}:t}function a(t){return t?function(n,r,i){try{return t.call(e,n,r,i)}catch(e){if(!l(e))throw e}}:t}function s(t){return t?function(n,r,i){function a(e,t){t&&(t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296)),i&&i.apply(this,arguments)}return"function"==typeof r&&(i=r,r=null),r?t.call(e,n,r,a):t.call(e,n,a)}:t}function c(t){return t?function(n,r){var i=r?t.call(e,n,r):t.call(e,n);return i&&(i.uid<0&&(i.uid+=4294967296),i.gid<0&&(i.gid+=4294967296)),i}:t}function l(e){return!e||"ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code)}var u;r.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(t,n,i){e.open(t,r.O_WRONLY|r.O_SYMLINK,n,(function(t,r){t?i&&i(t):e.fchmod(r,n,(function(t){e.close(r,(function(e){i&&i(t||e)}))}))}))},e.lchmodSync=function(t,n){var i,a=e.openSync(t,r.O_WRONLY|r.O_SYMLINK,n),o=!0;try{i=e.fchmodSync(a,n),o=!1}finally{if(o)try{e.closeSync(a)}catch(e){}else e.closeSync(a)}return i}}(e),e.lutimes||function(e){r.hasOwnProperty("O_SYMLINK")&&e.futimes?(e.lutimes=function(t,n,i,a){e.open(t,r.O_SYMLINK,(function(t,r){t?a&&a(t):e.futimes(r,n,i,(function(t){e.close(r,(function(e){a&&a(t||e)}))}))}))},e.lutimesSync=function(t,n,i){var a,o=e.openSync(t,r.O_SYMLINK),s=!0;try{a=e.futimesSync(o,n,i),s=!1}finally{if(s)try{e.closeSync(o)}catch(e){}else e.closeSync(o)}return a}):e.futimes&&(e.lutimes=function(e,t,n,r){r&&process.nextTick(r)},e.lutimesSync=function(){})}(e),e.chown=i(e.chown),e.fchown=i(e.fchown),e.lchown=i(e.lchown),e.chmod=t(e.chmod),e.fchmod=t(e.fchmod),e.lchmod=t(e.lchmod),e.chownSync=a(e.chownSync),e.fchownSync=a(e.fchownSync),e.lchownSync=a(e.lchownSync),e.chmodSync=n(e.chmodSync),e.fchmodSync=n(e.fchmodSync),e.lchmodSync=n(e.lchmodSync),e.stat=s(e.stat),e.fstat=s(e.fstat),e.lstat=s(e.lstat),e.statSync=c(e.statSync),e.fstatSync=c(e.fstatSync),e.lstatSync=c(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(e,t,n){n&&process.nextTick(n)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(e,t,n,r){r&&process.nextTick(r)},e.lchownSync=function(){}),"win32"===o&&(e.rename="function"!=typeof e.rename?e.rename:function(t){function n(n,r,i){var a=Date.now(),o=0;t(n,r,(function s(c){if(c&&("EACCES"===c.code||"EPERM"===c.code||"EBUSY"===c.code)&&Date.now()-a<6e4)return setTimeout((function(){e.stat(r,(function(e,a){e&&"ENOENT"===e.code?t(n,r,s):i(c)}))}),o),void(o<100&&(o+=10));i&&i(c)}))}return Object.setPrototypeOf&&Object.setPrototypeOf(n,t),n}(e.rename)),e.read="function"!=typeof e.read?e.read:function(t){function n(n,r,i,a,o,s){var c;if(s&&"function"==typeof s){var l=0;c=function(u,h,d){if(u&&"EAGAIN"===u.code&&l<10)return l++,t.call(e,n,r,i,a,o,c);s.apply(this,arguments)}}return t.call(e,n,r,i,a,o,c)}return Object.setPrototypeOf&&Object.setPrototypeOf(n,t),n}(e.read),e.readSync="function"!=typeof e.readSync?e.readSync:(u=e.readSync,function(t,n,r,i,a){for(var o=0;;)try{return u.call(e,t,n,r,i,a)}catch(e){if("EAGAIN"===e.code&&o<10){o++;continue}throw e}})}},2909:(e,t,n)=>{let r;try{r=n(3735)}catch(e){r=n(9896)}const i=n(1236),{stringify:a,stripBom:o}=n(1144),s={readFile:i.fromPromise((async function(e,t={}){"string"==typeof t&&(t={encoding:t});const n=t.fs||r,a=!("throws"in t)||t.throws;let s,c=await i.fromCallback(n.readFile)(e,t);c=o(c);try{s=JSON.parse(c,t?t.reviver:null)}catch(t){if(a)throw t.message=`${e}: ${t.message}`,t;return null}return s})),readFileSync:function(e,t={}){"string"==typeof t&&(t={encoding:t});const n=t.fs||r,i=!("throws"in t)||t.throws;try{let r=n.readFileSync(e,t);return r=o(r),JSON.parse(r,t.reviver)}catch(t){if(i)throw t.message=`${e}: ${t.message}`,t;return null}},writeFile:i.fromPromise((async function(e,t,n={}){const o=n.fs||r,s=a(t,n);await i.fromCallback(o.writeFile)(e,s,n)})),writeFileSync:function(e,t,n={}){const i=n.fs||r,o=a(t,n);return i.writeFileSync(e,o,n)}};e.exports=s},1144:e=>{e.exports={stringify:function(e,{EOL:t="\n",finalEOL:n=!0,replacer:r=null,spaces:i}={}){const a=n?t:"";return JSON.stringify(e,r,i).replace(/\n/g,t)+a},stripBom:function(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}}},5031:(e,t)=>{function n(e){for(var t in e)this[t]=e[t]}t.get=function(e){var n=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var r={},i=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t},Error.captureStackTrace(r,e||t.get);var a=r.stack;return Error.prepareStackTrace=i,Error.stackTraceLimit=n,a},t.parse=function(e){if(!e.stack)return[];var t=this;return e.stack.split("\n").slice(1).map((function(e){if(e.match(/^\s*[-]{4,}$/))return t._createParsedCallSite({fileName:e,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var n=e.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(n){var r=null,i=null,a=null,o=null,s=null,c="native"===n[5];if(n[1]){var l=(a=n[1]).lastIndexOf(".");if("."==a[l-1]&&l--,l>0){r=a.substr(0,l),i=a.substr(l+1);var u=r.indexOf(".Module");u>0&&(a=a.substr(u+1),r=r.substr(0,u))}o=null}i&&(o=r,s=i),"<anonymous>"===i&&(s=null,a=null);var h={fileName:n[2]||null,lineNumber:parseInt(n[3],10)||null,functionName:a,typeName:o,methodName:s,columnNumber:parseInt(n[4],10)||null,native:c};return t._createParsedCallSite(h)}})).filter((function(e){return!!e}))},["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"].forEach((function(e){n.prototype[e]=null,n.prototype["get"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}})),["topLevel","eval","native","constructor"].forEach((function(e){n.prototype[e]=!1,n.prototype["is"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}})),t._createParsedCallSite=function(e){return new n(e)}},4300:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.PackageChangeKind=t.EnvironmentChangeKind=void 0,function(e){e.add="add",e.remove="remove"}(n||(t.EnvironmentChangeKind=n={})),function(e){e.add="add",e.remove="remove"}(r||(t.PackageChangeKind=r={}))},8902:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.spawnProcess=void 0;const o=a(n(5317));t.spawnProcess=function(e,t,n){return o.spawn(e,t,n??{})}},5151:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeCommand=t.registerCommand=void 0;const r=n(1398);t.registerCommand=function(e,t,n){return r.commands.registerCommand(e,t,n)},t.executeCommand=function(e,...t){return r.commands.executeCommand(e,...t)}},8344:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Commands=void 0,function(e){e.viewLogs="python-envs.viewLogs"}(n||(t.Commands=n={}))},5333:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookCellScheme=t.NEW_PROJECT_TEMPLATES_FOLDER=t.KNOWN_TEMPLATE_ENDINGS=t.KNOWN_FILES=t.DEFAULT_ENV_MANAGER_ID=t.DEFAULT_PACKAGE_MANAGER_ID=t.EXTENSION_ROOT_DIR=t.JUPYTER_EXTENSION_ID=t.PYTHON_EXTENSION_ID=t.ENVS_EXTENSION_ID=void 0;const o=a(n(6928));t.ENVS_EXTENSION_ID="ms-python.vscode-python-envs",t.PYTHON_EXTENSION_ID="ms-python.python",t.JUPYTER_EXTENSION_ID="ms-toolsai.jupyter",t.EXTENSION_ROOT_DIR=o.dirname(__dirname),t.DEFAULT_PACKAGE_MANAGER_ID="ms-python.python:pip",t.DEFAULT_ENV_MANAGER_ID="ms-python.python:venv",t.KNOWN_FILES=["requirements.txt","requirements.in",".condarc",".python-version","environment.yml","pyproject.toml","meta.yaml",".flake8",".pep8",".pylintrc",".pypirc","Pipfile","poetry.lock","Pipfile.lock"],t.KNOWN_TEMPLATE_ENDINGS=[".j2",".jinja2"],t.NEW_PROJECT_TEMPLATES_FOLDER=o.join(t.EXTENSION_ROOT_DIR,"files","templates"),t.NotebookCellScheme="vscode-notebook-cell"},5920:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clipboardWriteText=t.launchBrowser=void 0;const r=n(1398);t.launchBrowser=function(e){return r.env.openExternal(e instanceof r.Uri?e:r.Uri.parse(e))},t.clipboardWriteText=function(e){return r.env.clipboard.writeText(e)}},370:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PackageManagerAlreadyRegisteredError=t.EnvironmentManagerAlreadyRegisteredError=void 0;const r=n(2635);class i extends r.BaseError{constructor(e){super("InvalidArgument",e)}}t.EnvironmentManagerAlreadyRegisteredError=i;class a extends r.BaseError{constructor(e){super("InvalidArgument",e)}}t.PackageManagerAlreadyRegisteredError=a},2103:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveEnvironmentNotSupported=t.CreateEnvironmentNotSupported=void 0;const r=n(2635);class i extends r.BaseError{constructor(e){super("NotSupported",e)}}t.CreateEnvironmentNotSupported=i;class a extends r.BaseError{constructor(e){super("NotSupported",e)}}t.RemoveEnvironmentNotSupported=a},2635:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseError=void 0;class n extends Error{constructor(e,t){super(t),this.category=e,this.name=this.constructor.name}}t.BaseError=n},7951:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.showWarningMessageWithLogs=t.showErrorMessageWithLogs=t.parseStack=void 0;const o=a(n(5031)),s=n(1398),c=n(2341),l=n(675);t.parseStack=function(e){if(e.stack&&Array.isArray(e.stack)){const t={...e,stack:e.stack.join("\n")};return o.parse.call(o,t)}return o.parse.call(o,e)},t.showErrorMessageWithLogs=async function(e,t){await(0,l.showErrorMessage)(e,c.Common.viewLogs)===c.Common.viewLogs&&(t?t.show():s.commands.executeCommand("python-envs.viewLogs"))},t.showWarningMessageWithLogs=async function(e,t){await(0,l.showWarningMessage)(e,c.Common.viewLogs)===c.Common.viewLogs&&(t?t.show():s.commands.executeCommand("python-envs.viewLogs"))}},5203:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ensureCorrectVersion=void 0;const r=n(5333),i=n(9066),a=n(853);t.ensureCorrectVersion=function(){const e=(0,i.getExtension)(r.PYTHON_EXTENSION_ID);if(!e)return;const t=e.packageJSON.version.split("."),n=parseInt(t[0]),o=parseInt(t[1]);if(!(n>=2025||2024===n&&o>=23))throw(0,a.traceError)("Incompatible Python extension. Please update `ms-python.python` to version 2024.23 or later."),new Error("Incompatible Python extension. Please update `ms-python.python` to version 2024.23 or later.")}},9066:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allExtensions=t.getExtension=void 0;const r=n(1398);t.getExtension=function(e){return r.extensions.getExtension(e)},t.allExtensions=function(){return r.extensions.all}},2341:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivationStrings=t.EnvViewStrings=t.ProjectCreatorString=t.PoetryStrings=t.PipenvStrings=t.PyenvStrings=t.CondaStrings=t.SysManagerStrings=t.VenvManagerStrings=t.ProjectViews=t.Pickers=t.PackageManagement=t.Interpreter=t.WorkbenchStrings=t.Common=void 0;const r=n(1398),i=n(8344);var a,o,s,c,l,u,h,d,f,p,v,m,g,y,E;!function(e){e.recommended=r.l10n.t("Recommended"),e.install=r.l10n.t("Install"),e.uninstall=r.l10n.t("Uninstall"),e.openInBrowser=r.l10n.t("Open in Browser"),e.openInEditor=r.l10n.t("Open in Editor"),e.browse=r.l10n.t("Browse"),e.selectFolder=r.l10n.t("Select Folder"),e.viewLogs=r.l10n.t("View Logs"),e.yes=r.l10n.t("Yes"),e.no=r.l10n.t("No"),e.ok=r.l10n.t("Ok"),e.quickCreate=r.l10n.t("Quick Create"),e.installPython=r.l10n.t("Install Python")}(a||(t.Common=a={})),function(e){e.installExtension=r.l10n.t("Install Extension")}(o||(t.WorkbenchStrings=o={})),function(e){e.statusBarSelect=r.l10n.t("Select Interpreter"),e.browsePath=r.l10n.t("Browse..."),e.createVirtualEnvironment=r.l10n.t("Create Virtual Environment...")}(s||(t.Interpreter=s={})),function(e){e.install=r.l10n.t("Install"),e.uninstall=r.l10n.t("Uninstall"),e.installed=r.l10n.t("Installed"),e.commonPackages=r.l10n.t("Common Packages"),e.selectPackagesToInstall=r.l10n.t("Select packages to install"),e.enterPackageNames=r.l10n.t("Enter package names"),e.searchCommonPackages=r.l10n.t("Search `PyPI` packages"),e.searchCommonPackagesDescription=r.l10n.t("Search and install popular `PyPI` packages"),e.workspaceDependencies=r.l10n.t("Install project dependencies"),e.workspaceDependenciesDescription=r.l10n.t("Install packages found in dependency files."),e.selectPackagesToUninstall=r.l10n.t("Select packages to uninstall"),e.enterPackagesPlaceHolder=r.l10n.t("Enter package names separated by space"),e.editArguments=r.l10n.t("Edit arguments"),e.skipPackageInstallation=r.l10n.t("Skip package installation")}(c||(t.PackageManagement=c={})),function(e){let t,n,i,a;!function(e){e.selectExecutable=r.l10n.t("Select Python Executable"),e.selectEnvironment=r.l10n.t("Select a Python Environment")}(t=e.Environments||(e.Environments={})),function(e){e.selectOption=r.l10n.t("Select an option")}(n=e.Packages||(e.Packages={})),function(e){e.selectEnvironmentManager=r.l10n.t("Select an environment manager"),e.selectPackageManager=r.l10n.t("Select a package manager"),e.selectProjectCreator=r.l10n.t("Select a project creator")}(i=e.Managers||(e.Managers={})),function(e){e.selectProject=r.l10n.t("Select a project, folder or script"),e.selectProjects=r.l10n.t("Select one or more projects, folders or scripts")}(a=e.Project||(e.Project={}))}(l||(t.Pickers=l={})),function(e){e.noPackageManager=r.l10n.t("No package manager found"),e.waitingForEnvManager=r.l10n.t("Waiting for environment managers to load"),e.noEnvironmentManager=r.l10n.t("Environment manager not found"),e.noEnvironmentManagerDescription=r.l10n.t("Install an environment manager to get started. If you have installed then it might be loading or errored"),e.noEnvironmentProvided=r.l10n.t("No environment provided by:"),e.noPackages=r.l10n.t("No packages found")}(u||(t.ProjectViews=u={})),function(e){e.venvManagerDescription=r.l10n.t("Manages virtual environments created using `venv`"),e.venvInitialize=r.l10n.t("Initializing virtual environments"),e.venvRefreshing=r.l10n.t("Refreshing virtual environments"),e.venvGlobalFolder=r.l10n.t("Select a folder to create a global virtual environment"),e.venvGlobalFoldersSetting=r.l10n.t("Venv Folders Setting"),e.venvErrorNoBasePython=r.l10n.t("No base Python found"),e.venvErrorNoPython3=r.l10n.t("Did not find any base Python 3"),e.venvName=r.l10n.t("Enter a name for the virtual environment"),e.venvNameErrorEmpty=r.l10n.t("Name cannot be empty"),e.venvNameErrorExists=r.l10n.t("A folder with the same name already exists"),e.venvCreateFailed=r.l10n.t("Failed to create virtual environment"),e.venvRemoving=r.l10n.t("Removing virtual environment"),e.venvRemoveFailed=r.l10n.t("Failed to remove virtual environment"),e.installEditable=r.l10n.t("Install project as editable"),e.searchingDependencies=r.l10n.t("Searching for dependencies"),e.selectQuickOrCustomize=r.l10n.t("Select environment creation mode"),e.quickCreate=r.l10n.t("Quick Create"),e.quickCreateDescription=r.l10n.t("Create a virtual environment in the workspace root"),e.customize=r.l10n.t("Custom"),e.customizeDescription=r.l10n.t("Choose python version, location, packages, name, etc.")}(h||(t.VenvManagerStrings=h={})),function(e){e.sysManagerDescription=r.l10n.t("Manages Global Python installs"),e.sysManagerRefreshing=r.l10n.t("Refreshing Global Python interpreters"),e.sysManagerDiscovering=r.l10n.t("Discovering Global Python interpreters"),e.selectInstall=r.l10n.t("Select packages to install"),e.selectUninstall=r.l10n.t("Select packages to uninstall"),e.packageRefreshError=r.l10n.t("Error refreshing packages")}(d||(t.SysManagerStrings=d={})),function(e){e.condaManager=r.l10n.t("Manages Conda environments"),e.condaDiscovering=r.l10n.t("Discovering Conda environments"),e.condaRefreshingEnvs=r.l10n.t("Refreshing Conda environments"),e.condaPackageMgr=r.l10n.t("Manages Conda packages"),e.condaRefreshingPackages=r.l10n.t("Refreshing Conda packages"),e.condaInstallingPackages=r.l10n.t("Installing Conda packages"),e.condaInstallError=r.l10n.t("Error installing Conda packages"),e.condaUninstallingPackages=r.l10n.t("Uninstalling Conda packages"),e.condaUninstallError=r.l10n.t("Error uninstalling Conda packages"),e.condaNamed=r.l10n.t("Named"),e.condaPrefix=r.l10n.t("Prefix"),e.condaNamedDescription=r.l10n.t("Create a named conda environment"),e.condaPrefixDescription=r.l10n.t("Create environment in your workspace"),e.condaSelectEnvType=r.l10n.t("Select the type of conda environment to create"),e.condaNamedInput=r.l10n.t("Enter the name of the conda environment to create"),e.condaCreateFailed=r.l10n.t("Failed to create conda environment"),e.condaRemoveFailed=r.l10n.t("Failed to remove conda environment"),e.condaExists=r.l10n.t("Environment already exists"),e.quickCreateCondaNoEnvRoot=r.l10n.t("No conda environment root found"),e.quickCreateCondaNoName=r.l10n.t("Could not generate a name for env"),e.condaMissingPython=r.l10n.t("No Python found in the selected conda environment"),e.condaMissingPythonNoFix=r.l10n.t("No Python found in the selected conda environment. Please select another environment or install Python manually.")}(f||(t.CondaStrings=f={})),function(e){e.pyenvManager=r.l10n.t("Manages Pyenv Python versions"),e.pyenvDiscovering=r.l10n.t("Discovering Pyenv Python versions"),e.pyenvRefreshing=r.l10n.t("Refreshing Pyenv Python versions")}(p||(t.PyenvStrings=p={})),function(e){e.pipenvManager=r.l10n.t("Manages Pipenv environments"),e.pipenvDiscovering=r.l10n.t("Discovering Pipenv environments"),e.pipenvRefreshing=r.l10n.t("Refreshing Pipenv environments")}(v||(t.PipenvStrings=v={})),function(e){e.poetryManager=r.l10n.t("Manages Poetry environments"),e.poetryDiscovering=r.l10n.t("Discovering Poetry environments"),e.poetryRefreshing=r.l10n.t("Refreshing Poetry environments")}(m||(t.PoetryStrings=m={})),function(e){e.addExistingProjects=r.l10n.t("Add Existing Projects"),e.autoFindProjects=r.l10n.t("Auto Find Projects"),e.selectProjects=r.l10n.t("Select Python projects"),e.selectFilesOrFolders=r.l10n.t("Select Project folders or Python files"),e.autoFindProjectsDescription=r.l10n.t("Automatically find folders with `pyproject.toml` or `setup.py` files."),e.noProjectsFound=r.l10n.t("No projects found")}(g||(t.ProjectCreatorString=g={})),function(e){e.selectedGlobalTooltip=r.l10n.t("This environment is selected for non-workspace files"),e.selectedWorkspaceTooltip=r.l10n.t("This environment is selected for project files")}(y||(t.EnvViewStrings=y={})),function(e){e.envCollectionDescription=r.l10n.t("Environment variables for shell activation"),e.revertedShellStartupScripts=r.l10n.t("Removed shell startup profile code for Python environment activation. See [logs](command:{0})",i.Commands.viewLogs),e.activatingEnvironment=r.l10n.t("Activating environment")}(E||(t.ActivationStrings=E={}))},853:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.traceVerbose=t.traceInfo=t.traceWarn=t.traceError=t.traceLog=t.registerLogger=void 0;const o=a(n(9023));class s{constructor(e){this.channel=e}traceLog(...e){this.channel.appendLine(o.format(...e))}traceError(...e){this.channel.error(o.format(...e))}traceWarn(...e){this.channel.warn(o.format(...e))}traceInfo(...e){this.channel.info(o.format(...e))}traceVerbose(...e){this.channel.debug(o.format(...e))}}let c;t.registerLogger=function(e){return c=new s(e),{dispose:()=>{c=void 0}}},t.traceLog=function(...e){c?.traceLog(...e)},t.traceError=function(...e){c?.traceError(...e)},t.traceWarn=function(...e){c?.traceWarn(...e)},t.traceInfo=function(...e){c?.traceInfo(...e)},t.traceVerbose=function(...e){c?.traceVerbose(...e)}},578:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearPersistentState=t.getGlobalPersistentState=t.getWorkspacePersistentState=t.setPersistentState=void 0;const r=n(853),i=n(4047);class a{constructor(e){this.momento=e,this.clearing=(0,i.createDeferred)(),this.clearing.resolve()}async get(e,t){return await this.clearing.promise,void 0===t?this.momento.get(e):this.momento.get(e,t)}async set(e,t){await this.clearing.promise,await this.momento.update(e,t),JSON.stringify(t)!==JSON.stringify(await this.momento.get(e))&&(await this.momento.update(e,void 0),(0,r.traceError)("Error while updating state for key:",e))}async clear(e){if(this.clearing.completed){this.clearing=(0,i.createDeferred)();const t=e??this.momento.keys();await Promise.all(t.map((e=>this.momento.update(e,void 0)))),this.clearing.resolve()}return this.clearing.promise}}const o=(0,i.createDeferred)(),s=(0,i.createDeferred)();t.setPersistentState=function(e){o.resolve(new a(e.workspaceState)),s.resolve(new a(e.globalState))},t.getWorkspacePersistentState=function(){return o.promise},t.getGlobalPersistentState=function(){return s.promise},t.clearPersistentState=async function(){const[e,t]=await Promise.all([o.promise,s.promise]);await Promise.all([e.clear(),t.clear()])}},8148:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pickEnvironmentFrom=t.pickEnvironment=void 0;const r=n(1398),i=n(2341),a=n(853),o=n(781),s=n(3343),c=n(6682),l=n(4477),u=n(675),h=n(5946);function d(e){return void 0===e||e instanceof r.ThemeIcon||e instanceof r.Uri?e:"string"==typeof e?r.Uri.file(e):{light:e.light instanceof r.Uri?e.light:r.Uri.file(e.light),dark:e.dark instanceof r.Uri?e.dark:r.Uri.file(e.dark)}}async function f(e,t,n){const i=await(0,h.pickEnvironmentManager)(e.filter((e=>e.supportsCreate)),t.filter((e=>e.supportsCreate)));let o,s;if(i?.includes("QuickCreate#")?(o=e.find((e=>e.id===i.split("#")[1])),s={projects:t.map((e=>e)),quickCreate:!0}):o=e.find((e=>e.id===i)),o)try{return await o.create(n.projects.map((e=>e.uri)),s)}catch(i){if(i===r.QuickInputButtons.Back)return f(e,t,n);throw(0,a.traceError)(`Failed to create environment using ${o.id}`,i),i}}async function p(e,t,n,a){const h=await(0,u.showQuickPickWithButtons)(e,{placeHolder:i.Pickers.Environments.selectEnvironment,ignoreFocusOut:!0,showBackButton:a?.showBackButton});if(h&&!Array.isArray(h))return h.label===i.Interpreter.browsePath?async function(e,t){const n=(0,c.isWindows)()?{python:["exe"]}:void 0,a=await(0,u.showOpenDialog)({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:n,title:i.Pickers.Environments.selectExecutable});if(!a||0===a.length)return;const o=a[0];return await(0,u.withProgress)({location:r.ProgressLocation.Notification,cancellable:!1},(async(n,r)=>await(0,l.handlePythonPath)(o,e,t,n,r)))}(t,n):h.label===i.Interpreter.createVirtualEnvironment?((0,s.sendTelemetryEvent)(o.EventNames.CREATE_ENVIRONMENT,void 0,{manager:"none",triggeredLocation:"pickEnv"}),f(t,n,a)):h?.result}t.pickEnvironment=async function(e,t,n){const a=[{label:i.Interpreter.browsePath,iconPath:new r.ThemeIcon("folder")},{label:"",kind:r.QuickPickItemKind.Separator},{label:i.Interpreter.createVirtualEnvironment,iconPath:new r.ThemeIcon("add")}];if(n?.recommended){const e=n.recommended.displayPath,t=n.recommended.description&&n.recommended.description.trim()?`${n.recommended.description} (${e})`:e;a.push({label:i.Common.recommended,kind:r.QuickPickItemKind.Separator},{label:n.recommended.displayName,description:t,result:n.recommended,iconPath:d(n.recommended.iconPath)})}for(const t of e){a.push({label:t.displayName,kind:r.QuickPickItemKind.Separator});const e=await t.getEnvironments("all");a.push(...e.map((e=>{const n=e.displayPath,r=e.description&&e.description.trim()?`${e.description} (${n})`:n;return{label:e.displayName??e.name,description:r,result:e,manager:t,iconPath:d(e.iconPath)}})))}return p(a,e,t,n)},t.pickEnvironmentFrom=async function(e){const t=e.map((e=>{const t=e.displayPath,n=e.description&&e.description.trim()?`${e.description} (${t})`:t;return{label:e.displayName??e.name,description:n,e,iconPath:d(e.iconPath)}})),n=await(0,u.showQuickPick)(t,{placeHolder:i.Pickers.Environments.selectEnvironment,ignoreFocusOut:!0});return n?.e}},5946:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newProjectSelection=t.pickCreator=t.pickWorkspaceFolder=t.pickPackageManager=t.pickEnvironmentManager=void 0;const r=n(1398),i=n(2341),a=n(675);function o(e){if(e.description)return e.description;if(e.tooltip){const t=e.tooltip;return"string"==typeof t?t:t.value}}async function s(e){if(0===e.length)return;if(1===e.length)return e[0];const t=e.find((e=>"autoProjects"===e.name)),n=e.find((e=>"existingProjects"===e.name)),r=[{label:"Auto Find",description:t?.description??"Automatically find Python projects"},{label:"Select Existing",description:n?.description??"Select existing Python projects"},{label:"Create New",description:"Create a Python project from a template"}],o=await(0,a.showQuickPickWithButtons)(r,{placeHolder:i.Pickers.Managers.selectProjectCreator,ignoreFocusOut:!0,showBackButton:!0});if(!o)return;const s=Array.isArray(o)?o[0]:o;if(s)switch(s.label){case"Auto Find":return t;case"Select Existing":return n;case"Create New":return c(e)}}async function c(e){const t=e.filter((e=>"autoProjects"!==e.name&&"existingProjects"!==e.name));if(0===t.length)return;const n=t.map((e=>({label:e.displayName??e.name,description:e.description,c:e})));try{const t=await(0,a.showQuickPickWithButtons)(n,{placeHolder:"Select project type for new project",ignoreFocusOut:!0,showBackButton:!0});if(!t)return;if(-1===t?.kind||!0===t?.back)return s(e);const r=Array.isArray(t)?t[0]:t;return r?.c}catch(e){e===r.QuickInputButtons.Back&&await r.commands.executeCommand("python-envs.addPythonProject")}}t.pickEnvironmentManager=async function(e,t,n){if(0===e.length)return;if(1===e.length&&!e[0].supportsQuickCreate)return e[0].id;const s=[];if(t&&t.length>0){if(s.push({label:i.Common.recommended,kind:r.QuickPickItemKind.Separator}),1===t.length&&t[0].supportsQuickCreate){const e=t[0],n=e.quickCreateConfig();n&&s.push({label:i.Common.quickCreate,description:`${e.displayName}  ${n.description}`,detail:n.detail,id:`QuickCreate#${e.id}`})}s.push(...t.map((e=>({label:e.displayName,description:o(e),id:e.id}))),{label:"",kind:r.QuickPickItemKind.Separator})}s.push(...e.filter((e=>!t?.includes(e))).map((e=>({label:e.displayName,description:o(e),id:e.id}))));const c=await(0,a.showQuickPickWithButtons)(s,{placeHolder:i.Pickers.Managers.selectEnvironmentManager,ignoreFocusOut:!0,showBackButton:n});return c?.id},t.pickPackageManager=async function(e,t){if(0===e.length)return;if(1===e.length)return e[0].id;const n=[];t&&t.length>0&&n.push({label:i.Common.recommended,kind:r.QuickPickItemKind.Separator},...t.map((e=>({label:e.displayName,description:o(e),id:e.id}))),{label:"",kind:r.QuickPickItemKind.Separator}),n.push(...e.filter((e=>!t?.includes(e))).map((e=>({label:e.displayName,description:o(e),id:e.id}))));const s=await(0,a.showQuickPickWithButtons)(n,{placeHolder:i.Pickers.Managers.selectPackageManager,ignoreFocusOut:!0});return s?.id},t.pickWorkspaceFolder=async function(e=!0){const t=r.workspace.workspaceFolders;if(!t||0===t.length)return;if(1===t.length)return t[0];const n=t.map((e=>({label:e.name,description:e.uri.fsPath,folder:e}))),i=await(0,a.showQuickPickWithButtons)(n,{placeHolder:"Select a workspace folder",ignoreFocusOut:!0,showBackButton:e});if(!i)return;const o=Array.isArray(i)?i[0]:i;return o?.folder},t.pickCreator=s,t.newProjectSelection=c},9344:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.pickProjectMany=t.pickProject=void 0;const i=r(n(6928)),a=n(675),o=n(2341);t.pickProject=async function(e){if(e.length>1){const t=e.map((e=>({label:i.default.basename(e.uri.fsPath),description:e.uri.fsPath,project:e}))),n=await(0,a.showQuickPick)(t,{placeHolder:o.Pickers.Project.selectProject,ignoreFocusOut:!0});if(n)return n.project}else if(1===e.length)return e[0]},t.pickProjectMany=async function(e,t){if(e.length>1){const n=e.map((e=>({label:i.default.basename(e.uri.fsPath),description:e.uri.fsPath,project:e}))),r=await(0,a.showQuickPickWithButtons)(n,{placeHolder:o.Pickers.Project.selectProjects,ignoreFocusOut:!0,canPickMany:!0,showBackButton:t});if(Array.isArray(r))return r.map((e=>e.project))}else{if(1===e.length)return[...e];if(0===e.length)return[]}}},9787:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StopWatch=void 0,t.StopWatch=class{constructor(){this.started=(new Date).getTime()}get elapsedTime(){return(new Date).getTime()-this.started}reset(){this.started=(new Date).getTime()}}},5371:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeTask=void 0;const r=n(1398);t.executeTask=async function(e){return r.tasks.executeTask(e)}},781:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.EventNames=void 0,function(e){e.EXTENSION_ACTIVATION_DURATION="EXTENSION.ACTIVATION_DURATION",e.EXTENSION_MANAGER_REGISTRATION_DURATION="EXTENSION.MANAGER_REGISTRATION_DURATION",e.ENVIRONMENT_MANAGER_REGISTERED="ENVIRONMENT_MANAGER.REGISTERED",e.PACKAGE_MANAGER_REGISTERED="PACKAGE_MANAGER.REGISTERED",e.ENVIRONMENT_MANAGER_SELECTED="ENVIRONMENT_MANAGER.SELECTED",e.PACKAGE_MANAGER_SELECTED="PACKAGE_MANAGER.SELECTED",e.VENV_USING_UV="VENV.USING_UV",e.VENV_CREATION="VENV.CREATION",e.PACKAGE_MANAGEMENT="PACKAGE_MANAGEMENT",e.ADD_PROJECT="ADD_PROJECT",e.CREATE_ENVIRONMENT="CREATE_ENVIRONMENT"}(n||(t.EventNames=n={}))},605:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendManagerSelectionTelemetry=void 0;const r=n(8477),i=n(781),a=n(3343);t.sendManagerSelectionTelemetry=function(e){const t=new Set,n=new Set;e.getProjects().forEach((i=>{const a=(0,r.getDefaultEnvManagerSetting)(e,i.uri);a&&t.add(a);const o=(0,r.getDefaultPkgManagerSetting)(e,i.uri);o&&n.add(o)})),t.forEach((e=>{(0,a.sendTelemetryEvent)(i.EventNames.ENVIRONMENT_MANAGER_SELECTED,void 0,{managerId:e})})),n.forEach((e=>{(0,a.sendTelemetryEvent)(i.EventNames.PACKAGE_MANAGER_SELECTED,void 0,{managerId:e})}))}},9911:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTelemetryReporter=void 0;class r{static getTelemetryReporter(){const e=n(1170).default;return r.telemetryReporter=new e("0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255",[{lookup:/(errorName|errorMessage|errorStack)/g}]),r.telemetryReporter}}t.getTelemetryReporter=function(){return r.getTelemetryReporter()}},3343:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendTelemetryWhenDone=t.captureTelemetry=t.sendTelemetryEvent=void 0;const r=n(9787),i=n(5662),a=n(9911),o=n(8253);function s(e,t,r,o){if((0,i.isTestExecution)()||!function(){try{const e=n(1398),t=n(1170);return!!e&&!!t}catch{return!1}}())return;const s=(0,a.getTelemetryReporter)(),c="number"==typeof t?{duration:t}:t,l={},u=e;if(r){const t=r;Object.entries(t).forEach((([t,n])=>{if(null!=n)try{l[t]="object"==typeof n?"object":String(n)}catch(n){console.error(`Failed to serialize ${t} for ${String(e)}`,n)}}))}if(o){const e={errorName:o.name,errorStack:o.stack??""};Object.assign(l,e),s.sendTelemetryErrorEvent(u,l,c)}else s.sendTelemetryEvent(u,l,c)}t.sendTelemetryEvent=s,t.captureTelemetry=function(e,t,n=!0,i,a,c){return function(l,u,h){const d=h.value;return h.value=function(...l){if(!n&&!a&&!c)return s(e,void 0,t),d.apply(this,l);const u=e=>a?{...t,...a(this,e)}:t,h=n?new r.StopWatch:void 0,f=e=>{const t=h?{duration:h.elapsedTime}:void 0;return c?{...t,...c(this,e)}:t},p=d.apply(this,l);return p&&(0,o.isPromise)(p)?p.then((t=>(s(e,f(t),u(t)),t))).catch((t=>{const n={...u(),failed:!0};return s(i||e,f(),n,t),Promise.reject(t)})):(s(e,f(p),u(p)),p)},h}},t.sendTelemetryWhenDone=function(e,t,n=new r.StopWatch,i){if("function"!=typeof t.then)throw new Error("Method is neither a Promise nor a Thenable");t.then((t=>(s(e,n.elapsedTime,i),t)),(t=>(s(e,n.elapsedTime,i,t),Promise.reject(t))))}},933:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timeout=void 0,t.timeout=async function(e){return new Promise((t=>setTimeout(t,e)))}},7079:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSimpleDebounce=void 0;class n{constructor(e,t){this.ms=e,this.callback=t}trigger(){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.callback()}),this.ms)}dispose(){this.timeout&&clearTimeout(this.timeout)}}t.createSimpleDebounce=function(e,t){return new n(e,t)}},4047:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDeferred=void 0;class n{constructor(){this.resolved=!1,this.rejected=!1,this.completed=!1,this.promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}resolve(e){this.completed||(this._resolve(e),this.resolved=!0,this.completed=!0)}reject(e){this.completed||(this._reject(e),this.rejected=!0,this.completed=!0)}}t.createDeferred=function(){return new n}},8680:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getAbsolutePath=t.isPythonProjectFile=void 0;const o=a(n(6928)),s=a(n(1605)),c=n(5333),l=n(1398),u=n(7422);t.isPythonProjectFile=function(e){const t=o.basename(e).toLowerCase(),n=o.normalize(e).toLowerCase();return c.KNOWN_FILES.some((e=>t===e))||c.KNOWN_TEMPLATE_ENDINGS.some((e=>t.endsWith(e)))||t.endsWith(".txt")&&(t.includes("requirements")||t.includes("constraints"))||t.endsWith(".in")&&t.includes("requirements")||n.includes(`requirements${o.sep}`)&&(n.endsWith(".txt")||n.endsWith(".in"))},t.getAbsolutePath=async function(e){if(o.isAbsolute(e))return l.Uri.file(e);const t=(0,u.getWorkspaceFolders)()??[];if(t.length>0)if(1===t.length){const n=o.resolve(t[0].uri.fsPath,e);if(await s.pathExists(n))return l.Uri.file(n)}else{const n=Array.from(t).sort(((e,t)=>e.uri.fsPath.length-t.uri.fsPath.length)).reverse();for(const t of n){const n=o.resolve(t.uri.fsPath,e);if(await s.pathExists(n))return l.Uri.file(n)}}}},1686:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCallingExtension=void 0;const r=n(1398),i=n(5333),a=n(7951),o=n(9066),s=n(6878);function c(e){return e.filePath&&e.filePath.startsWith("file://")?r.Uri.parse(e.filePath).fsPath:e.filePath}t.getCallingExtension=function(){const e=[i.ENVS_EXTENSION_ID,i.PYTHON_EXTENSION_ID],t=(0,o.allExtensions)().filter((t=>!e.includes(t.id))),n=(0,a.parseStack)(new Error).map((e=>({filePath:e.getFileName(),functionName:e.getFunctionName()}))),r=n.findIndex((e=>e.functionName&&(e.functionName.includes("registerEnvironmentManager")||e.functionName.includes("registerPackageManager")))),l=-1!==r?n.slice(r+1):n,u=[];for(const e of l){if(!e||!e.filePath)continue;const n=(0,s.normalizePath)(c(e));if(!n)continue;if(n.toLowerCase().endsWith("extensionhostprocess.js"))continue;if(n.startsWith("node:"))continue;u.push(n);const r=t.find((e=>n.includes(e.id)));if(r)return r.id}const h=(0,o.getExtension)(i.ENVS_EXTENSION_ID),d=(0,o.getExtension)(i.PYTHON_EXTENSION_ID);if(!h||!d)throw new Error("Something went wrong with feature registration");const f=(0,s.normalizePath)(h.extensionPath);if(u.every((e=>e.startsWith(f))))return i.PYTHON_EXTENSION_ID;for(const e of t){const t=(0,s.normalizePath)(e.extensionPath);if(u.some((e=>e.startsWith(t))))return e.id}return i.PYTHON_EXTENSION_ID}},4500:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveVariables=void 0;const r=n(7422);t.resolveVariables=function(e,t,n){const i=new Map,a=process.env.HOME||process.env.USERPROFILE;a&&i.set("${userHome}",a),t&&i.set("${pythonProject}",t.fsPath);const o=t?(0,r.getWorkspaceFolder)(t):void 0;o&&i.set("${workspaceFolder}",o.uri.fsPath),i.set("${cwd}",process.cwd()),((0,r.getWorkspaceFolders)()??[]).forEach((e=>{i.set("${workspaceFolder:"+e.name+"}",e.uri.fsPath)}));const s=n||process.env;if(s)for(const[e,t]of Object.entries(s))t&&e.length>0&&i.set("${env:"+e+"}",t);let c=e;return i.forEach(((e,t)=>{for(;t.length>0&&c.indexOf(t)>=0;)c=c.replace(t,e)})),c}},6878:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.untildifyArray=t.getUserHomeDir=t.untildify=t.getResourceUri=t.normalizePath=t.findCell=t.checkUri=void 0;const o=a(n(857)),s=a(n(6928)),c=n(1398),l=n(6682);function u(e,t){return t.getCells().find((t=>{return(n=t.document.uri)===(r=e)||!(!n||!r)&&h(n)===h(r);var n,r}))}function h(e){return e.with({path:(0,l.isWindows)()?e.path.toLowerCase():e.path,fragment:void 0}).toString()}function d(e){const t=e.replace(/\\/g,"/");return(0,l.isWindows)()?t.toLowerCase():t}function f(e){return e.replace(/^~($|\/|\\)/,`${o.homedir()}$1`)}t.checkUri=function e(t){if(t){if(Array.isArray(t))return t.map((t=>{const n=e(t);if(n instanceof c.Uri)return n;throw new Error("Invalid entry, expected Uri.")}));if(t instanceof c.Uri&&"vscode-notebook-cell"===t.scheme){const e=c.workspace.notebookDocuments.find((e=>u(t,e)));return e?e.uri:t}return t}},t.findCell=u,t.normalizePath=d,t.getResourceUri=function(e,t){try{if(!e)return;const n=d(e);if(n.includes("://"))return c.Uri.parse(n);if(!s.isAbsolute(e)&&t){const n=s.resolve(t,e);return c.Uri.file(n)}return c.Uri.file(e)}catch(e){return}},t.untildify=f,t.getUserHomeDir=function(){return o.homedir()},t.untildifyArray=function(e){return e.map((e=>f(e)))}},6682:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWindows=void 0,t.isWindows=function(){return"win32"===process.platform}},4477:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handlePythonPath=void 0;const r=n(853),i=n(5333),a=n(675),o=[`${i.PYTHON_EXTENSION_ID}:pyenv`,`${i.PYTHON_EXTENSION_ID}:pixi`,`${i.PYTHON_EXTENSION_ID}:conda`,`${i.PYTHON_EXTENSION_ID}:pipenv`,`${i.PYTHON_EXTENSION_ID}:poetry`,`${i.PYTHON_EXTENSION_ID}:activestate`,`${i.PYTHON_EXTENSION_ID}:hatch`,`${i.PYTHON_EXTENSION_ID}:venv`,`${i.PYTHON_EXTENSION_ID}:system`];function s(e){return e.sort(((e,t)=>{const n=o.indexOf(e.id),r=o.indexOf(t.id);return-1===n&&-1===r?0:-1===n?1:-1===r?-1:n-r}))}t.handlePythonPath=async function(e,t,n,i,o){for(const t of s(n)){if(o?.isCancellationRequested)return;i?.report({message:`Checking ${t.displayName}`}),(0,r.traceVerbose)(`Checking ${t.displayName} (${t.id}) for ${e.fsPath}`);const n=await t.resolve(e);if(n)return(0,r.traceVerbose)(`Using ${t.displayName} (${t.id}) to handle ${e.fsPath}`),n;(0,r.traceVerbose)(`Manager ${t.displayName} (${t.id}) cannot handle ${e.fsPath}`)}const c=n.map((e=>e.id)),l=t.filter((e=>!c.includes(e.id)));for(const t of s(l)){if(o?.isCancellationRequested)return;i?.report({message:`Checking ${t.displayName}`}),(0,r.traceVerbose)(`Checking ${t.displayName} (${t.id}) for ${e.fsPath}`);const n=await t.resolve(e);if(n)return(0,r.traceVerbose)(`Using ${t.displayName} (${t.id}) to handle ${e.fsPath}`),n}(0,r.traceError)(`Unable to handle ${e.fsPath}`),(0,a.showErrorMessage)(`Unable to handle ${e.fsPath}`)}},5662:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTestExecution=void 0,t.isTestExecution=function(){return!!process.env.VSC_PYTHON_CI_TEST}},5344:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRunningWorkerPool=t.QueuePosition=void 0;const r=n(853),i=n(4047);var a;!function(e){e[e.back=0]="back",e[e.front=1]="front"}(a||(t.QueuePosition=a={}));class o{constructor(e,t,n,r){this.next=e,this.workFunc=t,this.postResult=n,this.name=r,this.stopProcessing=!1}stop(){this.stopProcessing=!0}async start(){for(;!this.stopProcessing;)try{const e=await this.next();try{const t=await this.workFunc(e);this.postResult(e,t)}catch(t){this.postResult(e,void 0,t)}}catch(e){(0,r.traceError)(`Error while running worker[${this.name}].`,e);continue}}}class s{constructor(){this.items=[],this.results=new Map}add(e,t){const n={item:e};t===a.front?this.items.unshift(n):this.items.push(n);const r=(0,i.createDeferred)();return this.results.set(n,r),r.promise}completed(e,t,n){const r=this.results.get(e);void 0!==r&&(this.results.delete(e),void 0!==n&&r.reject(n),r.resolve(t))}next(){return this.items.shift()}clear(){this.results.forEach(((e,t,n)=>{e.reject(Error("Queue stopped processing")),n.delete(t)}))}}class c{constructor(e,t=2,n="Worker"){this.workerFunc=e,this.numWorkers=t,this.name=n,this.workers=[],this.waitingWorkersUnblockQueue=[],this.queue=new s,this.stopProcessing=!1}addToQueue(e,t){if(this.stopProcessing)throw Error("Queue is stopped");const n=this.queue.add(e,t),i=this.waitingWorkersUnblockQueue.shift();if(i){const e=this.queue.next();void 0!==e?i.unblock(e):(0,r.traceError)("Work queue was empty immediately after adding item.")}return n}start(){this.stopProcessing=!1;let e=this.numWorkers;for(;e>0;)this.workers.push(new o((()=>this.nextWorkItem()),(e=>this.workerFunc(e.item)),((e,t,n)=>this.queue.completed(e,t,n)),`${this.name} ${e}`)),e-=1;this.workers.forEach((async e=>e.start()))}stop(){this.stopProcessing=!0;let e=this.workers.shift();for(;e;)e.stop(),e=this.workers.shift();this.queue.clear();let t=this.waitingWorkersUnblockQueue.shift();for(;t;)t.stop(),t=this.waitingWorkersUnblockQueue.shift()}nextWorkItem(){const e=this.queue.next();return void 0!==e?Promise.resolve(e):new Promise(((e,t)=>{this.waitingWorkersUnblockQueue.push({unblock:n=>{this.stopProcessing&&t(),e(n)},stop:()=>{t()}})}))}}t.createRunningWorkerPool=function(e,t,n){const r=new c(e,t,n);return r.start(),r}},4518:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vscodeShell=void 0;const r=n(1398);t.vscodeShell=function(){return r.env.shell}},675:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onDidChangeWindowState=t.registerFileDecorationProvider=t.createLogOutputChannel=t.createOutputChannel=t.showInputBox=t.showWarningMessage=t.showErrorMessage=t.showInformationMessage=t.showInputBoxWithButtons=t.showQuickPickWithButtons=t.withProgress=t.showQuickPick=t.showTextDocument=t.onDidChangeTerminalState=t.onDidCloseTerminal=t.onDidOpenTerminal=t.onDidEndTerminalShellExecution=t.onDidStartTerminalShellExecution=t.onDidChangeActiveTextEditor=t.onDidChangeActiveTerminal=t.activeTextEditor=t.activeTerminalShellIntegration=t.activeTerminal=t.terminals=t.showOpenDialog=t.onDidWriteTerminalData=t.onDidChangeTerminalShellIntegration=t.createTerminal=t.createStatusBarItem=void 0;const r=n(1398),i=n(4047);t.createStatusBarItem=function(e,t,n){return r.window.createStatusBarItem(e,t,n)},t.createTerminal=function(e){return r.window.createTerminal(e)},t.onDidChangeTerminalShellIntegration=function(e,t,n){return r.window.onDidChangeTerminalShellIntegration(e,t,n)},t.onDidWriteTerminalData=function(e,t,n){return r.window.onDidWriteTerminalData(e,t,n)},t.showOpenDialog=function(e){return r.window.showOpenDialog(e)},t.terminals=function(){return r.window.terminals},t.activeTerminal=function(){return r.window.activeTerminal},t.activeTerminalShellIntegration=function(){return r.window.activeTerminal?.shellIntegration},t.activeTextEditor=function(){return r.window.activeTextEditor},t.onDidChangeActiveTerminal=function(e,t,n){return r.window.onDidChangeActiveTerminal(e,t,n)},t.onDidChangeActiveTextEditor=function(e,t,n){return r.window.onDidChangeActiveTextEditor(e,t,n)},t.onDidStartTerminalShellExecution=function(e,t,n){return r.window.onDidStartTerminalShellExecution(e,t,n)},t.onDidEndTerminalShellExecution=function(e,t,n){return r.window.onDidEndTerminalShellExecution(e,t,n)},t.onDidOpenTerminal=function(e,t,n){return r.window.onDidOpenTerminal(e,t,n)},t.onDidCloseTerminal=function(e,t,n){return r.window.onDidCloseTerminal(e,t,n)},t.onDidChangeTerminalState=function(e,t,n){return r.window.onDidChangeTerminalState(e,t,n)},t.showTextDocument=function(e){return r.window.showTextDocument(e)},t.showQuickPick=function(e,t,n){return r.window.showQuickPick(e,t,n)},t.withProgress=function(e,t){return r.window.withProgress(e,t)},t.showQuickPickWithButtons=async function(e,t,n,a){const o=r.window.createQuickPick(),s=[o],c=(0,i.createDeferred)();o.items=e,o.canSelectMany=t?.canPickMany??!1,o.ignoreFocusOut=t?.ignoreFocusOut??!1,o.matchOnDescription=t?.matchOnDescription??!1,o.matchOnDetail=t?.matchOnDetail??!1,o.placeholder=t?.placeHolder,o.title=t?.title,o.selectedItems=t?.selected??[],t?.showBackButton&&(o.buttons=[r.QuickInputButtons.Back]),t?.buttons&&(o.buttons=[...o.buttons,...t.buttons]),s.push(o.onDidTriggerButton((e=>{e===r.QuickInputButtons.Back?(c.reject(r.QuickInputButtons.Back),o.hide()):t?.buttons?.includes(e)&&(c.reject({item:o.selectedItems,button:e}),o.hide())})),o.onDidAccept((()=>{c.completed||(o.canSelectMany?c.resolve(o.selectedItems.map((e=>e))):c.resolve(o.selectedItems[0]),o.hide())})),o.onDidHide((()=>{c.completed||c.resolve(void 0)})),o.onDidTriggerItemButton((e=>{a&&a(e)}))),n&&s.push(n.onCancellationRequested((()=>{o.hide()}))),o.show();try{return await c.promise}finally{s.forEach((e=>e.dispose()))}},t.showInputBoxWithButtons=async function(e){const t=r.window.createInputBox(),n=[t],a=(0,i.createDeferred)();t.placeholder=e?.placeHolder,t.title=e?.title,t.value=e?.value??"",t.ignoreFocusOut=e?.ignoreFocusOut??!1,t.password=e?.password??!1,t.prompt=e?.prompt,e?.valueSelection&&(t.valueSelection=e?.valueSelection),e?.showBackButton&&(t.buttons=[r.QuickInputButtons.Back]),n.push(t.onDidTriggerButton((e=>{e===r.QuickInputButtons.Back&&(a.reject(r.QuickInputButtons.Back),t.hide())})),t.onDidAccept((async()=>{if(!a.completed){let n=!0;if(e?.validateInput){const r=await e.validateInput(t.value);if(n=null==r,!n)return void(t.validationMessage="string"==typeof r?r:"Invalid input")}a.resolve(t.value),t.hide()}})),t.onDidHide((()=>{a.completed||a.resolve(void 0)})),t.onDidChangeValue((async n=>{if(e?.validateInput){const r=await(e?.validateInput(n));t.validationMessage=null==r?void 0:r}}))),t.show();try{return await a.promise}finally{n.forEach((e=>e.dispose()))}},t.showInformationMessage=function(e,t,...n){return r.window.showInformationMessage(e,t,...n)},t.showErrorMessage=function(e,t,...n){return r.window.showErrorMessage(e,t,...n)},t.showWarningMessage=function(e,...t){return r.window.showWarningMessage(e,...t)},t.showInputBox=function(e,t){return r.window.showInputBox(e,t)},t.createOutputChannel=function(e,t){return r.window.createOutputChannel(e,t)},t.createLogOutputChannel=function(e){return r.window.createOutputChannel(e,{log:!0})},t.registerFileDecorationProvider=function(e){return r.window.registerFileDecorationProvider(e)},t.onDidChangeWindowState=function(e,t,n){return r.window.onDidChangeWindowState(e,t,n)}},4275:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.installExtension=void 0;const r=n(1398);t.installExtension=async function(e,t){await r.commands.executeCommand("workbench.extensions.installExtension",e,t)}},7422:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onDidDeleteFiles=t.createFileSystemWatcher=t.findFiles=t.onDidChangeWorkspaceFolders=t.onDidChangeConfiguration=t.getConfiguration=t.getWorkspaceFile=t.getWorkspaceFolders=t.getWorkspaceFolder=void 0;const r=n(1398);t.getWorkspaceFolder=function(e){return r.workspace.getWorkspaceFolder(e)},t.getWorkspaceFolders=function(){return r.workspace.workspaceFolders},t.getWorkspaceFile=function(){return r.workspace.workspaceFile},t.getConfiguration=function(e,t){return r.workspace.getConfiguration(e,t)},t.onDidChangeConfiguration=function(e){return r.workspace.onDidChangeConfiguration(e)},t.onDidChangeWorkspaceFolders=function(e){return r.workspace.onDidChangeWorkspaceFolders(e)},t.findFiles=function(e,t,n,i){return r.workspace.findFiles(e,t,n,i)},t.createFileSystemWatcher=function(e,t,n,i){return r.workspace.createFileSystemWatcher(e,t,n,i)},t.onDidDeleteFiles=function(e,t,n){return r.workspace.onDidDeleteFiles(e,t,n)}},1305:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stat=t.readFile=void 0;const r=n(1398);t.readFile=function(e){return r.workspace.fs.readFile(e)},t.stat=function(e){return r.workspace.fs.stat(e)}},6688:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDeactivationCommand=t.getActivationCommand=t.isActivatedRunAvailable=t.isActivatableEnvironment=void 0;const r=n(4774),i=n(5158);t.isActivatableEnvironment=function(e){return!!e.execInfo?.activation||!!e.execInfo?.shellActivation},t.isActivatedRunAvailable=function(e){return!!e.execInfo?.activatedRun},t.getActivationCommand=function(e,t){const n=(0,i.identifyTerminalShell)(e),a=(0,r.getShellActivationCommand)(n,t);if(a)return(0,r.getShellCommandAsString)(n,a)},t.getDeactivationCommand=function(e,t){const n=(0,i.identifyTerminalShell)(e),a=(0,r.getShellDeactivationCommand)(n,t);if(a)return(0,r.getShellCommandAsString)(n,a)}},2790:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.waitForPkgManagerId=t.waitForPkgManager=t.waitForAllEnvManagers=t.waitForEnvManagerId=t.waitForEnvManager=t.createManagerReady=void 0;const r=n(1398),i=n(4047),a=n(9066),o=n(853),s=n(675),c=n(8477),l=n(2341),u=n(4275);class h{constructor(e,t){this.pm=t,this.envManagers=new Map,this.pkgManagers=new Map,this.checked=new Set,this.disposables=[],this.disposables.push(e.onDidChangeEnvironmentManager((e=>{if(this.envManagers.has(e.manager.id))this.envManagers.get(e.manager.id)?.resolve();else{const t=(0,i.createDeferred)();this.envManagers.set(e.manager.id,t),t.resolve()}})),e.onDidChangePackageManager((e=>{if(this.pkgManagers.has(e.manager.id))this.pkgManagers.get(e.manager.id)?.resolve();else{const t=(0,i.createDeferred)();this.pkgManagers.set(e.manager.id,t),t.resolve()}})))}checkExtension(e){const t=(0,a.allExtensions)().some((t=>e.startsWith(`${t.id}:`)));if(this.checked.has(e))return;this.checked.add(e);const n=function(e){const t=/^(.*):([a-zA-Z0-9-_]*)$/.exec(e);return t?t[1]:void 0}(e);n?setImmediate((async()=>{if(t){const t=(0,a.getExtension)(n);if(t&&!t.isActive){(0,o.traceInfo)(`Extension for manager ${e} is not active: Activating...`);try{await t.activate(),(0,o.traceInfo)(`Extension for manager ${e} is now active.`)}catch(t){(0,o.traceError)(`Failed to activate extension ${n}, required for: ${e}`,t)}}}else if((0,o.traceError)(`Extension for manager ${e} is not installed.`),await(0,s.showErrorMessage)(r.l10n.t("Do you want to install extension {0} to enable {1} support.",n,e),l.WorkbenchStrings.installExtension)===l.WorkbenchStrings.installExtension){(0,o.traceInfo)(`Installing extension: ${n}`);try{await(0,u.installExtension)(n),(0,o.traceInfo)(`Extension ${n} installed.`)}catch(e){(0,o.traceError)(`Failed to install  extension: ${n}`,e)}try{const t=(0,a.getExtension)(n);t&&!t.isActive&&((0,o.traceInfo)(`Extension for manager ${e} is not active: Activating...`),await t.activate())}catch(t){(0,o.traceError)(`Failed to activate extension ${n}, required for: ${e}`,t)}}})):(0,s.showErrorMessage)(r.l10n.t("Extension for {0} is not installed or enabled for this workspace.",e))}dispose(){this.disposables.forEach((e=>e.dispose())),this.envManagers.clear(),this.pkgManagers.clear()}_waitForEnvManager(e){if(this.envManagers.has(e))return this.envManagers.get(e).promise;const t=(0,i.createDeferred)();return this.envManagers.set(e,t),t.promise}async waitForEnvManager(e){const t=new Set;if(e)e.forEach((e=>{const n=(0,c.getDefaultEnvManagerSetting)(this.pm,e);t.has(n)||t.add(n)}));else{const e=(0,c.getDefaultEnvManagerSetting)(this.pm,void 0);e&&t.add(e)}await this.waitForEnvManagerId(Array.from(t))}async waitForEnvManagerId(e){e.forEach((e=>this.checkExtension(e))),await Promise.all(e.map((e=>this._waitForEnvManager(e))))}async waitForAllEnvManagers(){const e=new Set;this.pm.getProjects().forEach((t=>{const n=(0,c.getDefaultEnvManagerSetting)(this.pm,t.uri);n&&!e.has(n)&&e.add(n)}));const t=(0,c.getDefaultEnvManagerSetting)(this.pm,void 0);t&&e.add(t),await this.waitForEnvManagerId(Array.from(e))}_waitForPkgManager(e){if(this.pkgManagers.has(e))return this.pkgManagers.get(e).promise;const t=(0,i.createDeferred)();return this.pkgManagers.set(e,t),t.promise}async waitForPkgManager(e){const t=new Set;if(e)e.forEach((e=>{const n=(0,c.getDefaultPkgManagerSetting)(this.pm,e);t.has(n)||t.add(n)}));else{const e=(0,c.getDefaultPkgManagerSetting)(this.pm,void 0);e&&t.add(e)}await this.waitForPkgManagerId(Array.from(t))}async waitForPkgManagerId(e){e.forEach((e=>this.checkExtension(e))),await Promise.all(e.map((e=>this._waitForPkgManager(e))))}}let d=(0,i.createDeferred)();t.createManagerReady=function(e,t,n){if(!d.completed){const r=new h(e,t);n.push(r),d.resolve(r)}},t.waitForEnvManager=async function(e){return(await d.promise).waitForEnvManager(e)},t.waitForEnvManagerId=async function(e){return(await d.promise).waitForEnvManagerId(e)},t.waitForAllEnvManagers=async function(){return(await d.promise).waitForAllEnvManagers()},t.waitForPkgManager=async function(e){return(await d.promise).waitForPkgManager(e)},t.waitForPkgManagerId=async function(e){return(await d.promise).waitForPkgManagerId(e)}},11:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ShellConstants=void 0,function(e){e.PWSH="pwsh",e.BASH="bash",e.ZSH="zsh",e.FISH="fish",e.CMD="cmd",e.SH="sh",e.NU="nu",e.GITBASH="gitbash",e.WSL="wsl",e.CSH="csh",e.TCSH="tcsh",e.KSH="ksh",e.XONSH="xonsh"}(n||(t.ShellConstants=n={}))},5158:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.identifyTerminalShell=void 0;const o=a(n(857)),s=n(4518),c=n(7422),l=n(6682),u=n(11),h=new Map([[u.ShellConstants.PWSH,/(powershell$|pwsh$)/i],[u.ShellConstants.GITBASH,/(gitbash$|git.bin.bash$|git-bash$)/i],[u.ShellConstants.BASH,/(bash$)/i],[u.ShellConstants.WSL,/(wsl$)/i],[u.ShellConstants.ZSH,/(zsh$)/i],[u.ShellConstants.KSH,/(ksh$)/i],[u.ShellConstants.CMD,/(cmd$)/i],[u.ShellConstants.FISH,/(fish$)/i],[u.ShellConstants.TCSH,/(tcsh$)/i],[u.ShellConstants.CSH,/(csh$)/i],[u.ShellConstants.NU,/(nu$)/i],[u.ShellConstants.XONSH,/(xonsh$)/i]]);function d(e){const t=e.replace(/\.exe$/i,"");return Array.from(h.keys()).reduce(((e,n)=>{if("unknown"===e){const e=h.get(n);if(e&&e.test(t))return n}return e}),"unknown")}t.identifyTerminalShell=function(e){let t=function(e){try{const t=[u.ShellConstants.BASH,u.ShellConstants.CMD,u.ShellConstants.CSH,u.ShellConstants.FISH,u.ShellConstants.GITBASH,"julia",u.ShellConstants.KSH,"node",u.ShellConstants.NU,u.ShellConstants.PWSH,"python",u.ShellConstants.SH,"wsl",u.ShellConstants.ZSH];if(e.state.shell&&t.includes(e.state.shell.toLowerCase()))return e.state.shell.toLowerCase()}catch{}return"unknown"}(e);return"unknown"===t&&(t=function(e){const t=e?.creationOptions&&"shellPath"in e.creationOptions&&e.creationOptions.shellPath?e.creationOptions.shellPath:(0,s.vscodeShell)();return t?d(t):"unknown"}(e)),"unknown"===t&&(t=function(e){return e.name===u.ShellConstants.SH?u.ShellConstants.BASH:d(e.name)}(e)),"unknown"===t&&(t=function(){const e=(0,c.getConfiguration)("terminal.integrated.shell");let t;switch(process.platform){case"win32":t=e.get("windows");break;case"darwin":t=e.get("osx");break;case"freebsd":case"openbsd":case"linux":t=e.get("linux");break;default:t=void 0}return t?d(t):"unknown"}()),"unknown"===t&&(t=(0,l.isWindows)()?d(function(){const e=parseFloat(o.release())>=10,t=process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432")?"Sysnative":"System32",n=`${process.env.windir??"C:\\Windows"}\\${t}\\WindowsPowerShell\\v1.0\\powershell.exe`;return e?n:process.env.comspec||"cmd.exe"}()):d(process.env.SHELL&&"/bin/false"!==process.env.SHELL?process.env.SHELL:"/bin/bash")),t}},5398:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoFindProjects=void 0;const o=a(n(6928)),s=n(1398),c=n(2341),l=n(853),u=n(675),h=n(7422),d=n(1161);t.AutoFindProjects=class{constructor(e){this.pm=e,this.name="autoProjects",this.displayName=c.ProjectCreatorString.autoFindProjects,this.description=c.ProjectCreatorString.autoFindProjectsDescription,this.supportsQuickCreate=!0}async create(e){const t=await(0,h.findFiles)("**/{pyproject.toml,setup.py}","**/.venv/**");if(!t||0===t.length)return void setImmediate((()=>{(0,u.showErrorMessage)("No projects found")}));const n=t.filter((e=>{const t=this.pm.get(e);if(t){const n=o.normalize(t.uri.fsPath),r=o.normalize(e.fsPath),i=o.dirname(r);return n!==r&&n!==i}return!0}));if(0===n.length)return(0,l.traceInfo)(`All selected resources are already registered in the project manager: ${t.map((e=>e.fsPath)).join(", ")}`),void setImmediate((()=>{1===t.length?(0,u.showWarningMessage)(`${t[0].fsPath} already exists as project.`):(0,u.showWarningMessage)("Selected resources already exist as projects.")}));(0,l.traceInfo)(`Found ${n.length} new potential projects that aren't already registered`);const r=await async function(e){const t=function(e){const t=e.map((e=>e.fsPath)).sort(),n=new Map;return t.forEach((e=>{const t=o.dirname(e);n.has(t)||n.set(t,e)})),Array.from(n.entries()).map((([e,t])=>({label:o.basename(e),description:t,uri:s.Uri.file(e)}))).sort(((e,t)=>e.label.localeCompare(t.label)))}(e),n=await(0,u.showQuickPickWithButtons)(t,{canPickMany:!0,ignoreFocusOut:!0,placeHolder:c.ProjectCreatorString.selectProjects,showBackButton:!0});return Array.isArray(n)?n.map((e=>e.uri)):n?[n.uri]:void 0}(n);if(!r||0===r.length)return void(0,l.traceInfo)("User cancelled project selection.");const i=r.map((e=>new d.PythonProjectsImpl(o.basename(e.fsPath),e)));return this.pm.add(i),i}}},9056:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.manageLaunchJsonFile=t.manageCopilotInstructionsFile=t.replaceInFilesAndNames=t.quickCreateNewVenv=t.promptForCopilotInstructions=t.isCopilotInstalled=t.promptForVenv=void 0;const o=a(n(1605)),s=a(n(6928)),c=n(1398),l=n(853),u=n(675);function h(){return!!c.extensions.getExtension("GitHub.copilot")}t.promptForVenv=async function(e){try{const e=await(0,u.showQuickPickWithButtons)([{label:c.l10n.t("Yes")},{label:c.l10n.t("No")}],{placeHolder:c.l10n.t("Would you like to create a new virtual environment for this project?"),ignoreFocusOut:!0,showBackButton:!0});if(!e)return;return Array.isArray(e)?e.some((e=>"Yes"===e.label)):"Yes"===e.label}catch(t){t===c.QuickInputButtons.Back&&e()}},t.isCopilotInstalled=h,t.promptForCopilotInstructions=async function(){if(!h())return;const e=await(0,u.showQuickPickWithButtons)([{label:"Yes"},{label:"No"}],{placeHolder:"Would you like to create a Copilot instructions file?",ignoreFocusOut:!0,showBackButton:!0});return e?Array.isArray(e)?e.some((e=>"Yes"===e.label)):"Yes"===e.label:void 0},t.quickCreateNewVenv=async function(e,t){const n=e.managers.find((e=>"ms-python.python:venv"===e.id)),r=c.Uri.parse(t);if(n?.supportsQuickCreate){const e={quickCreate:!1};n.supportsQuickCreate&&(e.quickCreate=!0);const t=await n.create(r,e);t?(0,l.traceVerbose)(`Created venv at: ${t?.environmentPath}`):c.window.showErrorMessage("Failed to create virtual environment, please create it manually.")}else c.window.showErrorMessage("Failed to quick create virtual environment, please create it manually.")},t.replaceInFilesAndNames=async function e(t,n,r){const i=await o.stat(t);if(i.isDirectory()){const i=await o.readdir(t,{withFileTypes:!0});for(const a of i){let i=a.name,c=s.join(t,i),l=c;if(i.includes(n)){const e=i.replace(new RegExp(n,"g"),r);l=s.join(t,e),await o.rename(c,l),i=e}await e(l,n,r)}}else if(i.isFile()){let e=await o.readFile(t,"utf8");e.includes(n)&&(e=e.replace(new RegExp(n,"g"),r),await o.writeFile(t,e,"utf8"))}},t.manageCopilotInstructionsFile=async function(e,t,n){let r="\n\n"+await o.readFile(t,"utf-8");for(const{searchValue:e,replaceValue:t}of n)r=r.replace(new RegExp(e,"g"),t);const i=s.join(e,".github"),a=s.join(i,"copilot-instructions.md");await o.pathExists(i)||await o.mkdir(i),await o.pathExists(a)?await o.appendFile(a,r):await o.writeFile(a,r)},t.manageLaunchJsonFile=async function(e,t){const n=s.join(e,".vscode"),r=s.join(n,"launch.json");if(await o.pathExists(n)||await o.mkdir(n),await o.pathExists(r))await async function(e,t){let n=await o.readFile(e,"utf8");const r=JSON.parse(n);if(r&&Array.isArray(r.configurations)){const n=JSON.parse(t);r.configurations.push(n),await o.writeFile(e,JSON.stringify(r,null,4),"utf8")}else(0,l.traceError)("Failed to add Project Launch Config to launch.json.")}(r,t);else{const e={version:"0.2.0",configurations:[JSON.parse(t)]};await o.writeFile(r,JSON.stringify(e,null,4),"utf8")}}},4067:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ExistingProjects=void 0;const o=a(n(6928)),s=n(1398),c=n(2341),l=n(853),u=n(675),h=n(1161);t.ExistingProjects=class{constructor(e){this.pm=e,this.name="existingProjects",this.displayName=c.ProjectCreatorString.addExistingProjects}async create(e){let t;if(e?.rootUri)t=[e.rootUri];else{if(e?.quickCreate)throw new Error("Root URI is required in quickCreate mode.");t=await(0,u.showOpenDialog)({canSelectFiles:!0,canSelectFolders:!0,canSelectMany:!0,filters:{python:["py"]},title:c.ProjectCreatorString.selectFilesOrFolders})}if(!t||0===t.length)return;const n=t.filter((e=>{const t=this.pm.get(e);return!t||o.normalize(t.uri.fsPath)!==o.normalize(e.fsPath)}));if(0===n.length){const e=void 0===t?"None":t.map((e=>e.fsPath)).join(", ");return(0,l.traceInfo)(`All selected resources are already registered in the project manager. Resources selected: ${e}`),void setImmediate((()=>{t&&1===t.length?(0,u.showWarningMessage)("Selected resource already exists as project."):(0,u.showWarningMessage)("Selected resources already exist as projects.")}))}const r=[],i=s.workspace.workspaceFolders?.map((e=>e.uri))||[],a=n.filter((e=>{const t=i.some((t=>e.fsPath.startsWith(t.fsPath)));return t||((0,l.traceLog)(`File ${e.fsPath} is not in the workspace, ignoring it from 'add projects' list.`),r.push(e)),t}));if(0!==a.length){const e=a.map((e=>new h.PythonProjectsImpl(o.basename(e.fsPath),e)));return this.pm.add(e),e}if("Add to Workspace"===await s.window.showErrorMessage("Selected items are not in the current workspace.","Add to Workspace","Cancel"))for(const e of r)await await s.workspace.updateWorkspaceFolders(s.workspace.workspaceFolders?.length||0,0,{uri:e})}}},1233:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.NewPackageProject=void 0;const o=a(n(1605)),s=a(n(6928)),c=n(1398),l=n(5333),u=n(853),h=n(675),d=n(9056);t.NewPackageProject=class{constructor(e,t){this.envManagers=e,this.projectManager=t,this.name=c.l10n.t("newPackage"),this.displayName=c.l10n.t("Package"),this.description=c.l10n.t("Creates a package folder in your current workspace"),this.tooltip=new c.MarkdownString(c.l10n.t("Create a new Python package"))}async create(e){let t,n,r=e?.name;if(!0!==e?.quickCreate){if(!r){try{r=await(0,h.showInputBoxWithButtons)({prompt:c.l10n.t("What is the name of the package? (e.g. my_package)"),ignoreFocusOut:!0,showBackButton:!0,validateInput:e=>/^([a-z_]|[a-z0-9_][a-z0-9._-]*[a-z0-9_])$/i.test(e)?/^[-._0-9]$/i.test(e)?c.l10n.t("Single-character package names cannot be a number, hyphen, or period."):null:c.l10n.t("Invalid package name. Use only letters, numbers, underscores, hyphens, or periods. Must start and end with a letter or number.")})}catch(e){e===c.QuickInputButtons.Back&&await c.commands.executeCommand("python-envs.createNewProjectFromTemplate")}if(!r)return;const i=()=>this.create(e);if(t=await(0,d.promptForVenv)(i),void 0===t)return;(0,d.isCopilotInstalled)()&&(n=!0)}const i=s.join(l.NEW_PROJECT_TEMPLATES_FOLDER,"newPackageTemplate");if(!await o.pathExists(i))return void c.window.showErrorMessage(c.l10n.t("Template folder does not exist, aborting creation."));let a=e?.rootUri.fsPath;if(!a){const e=c.workspace.workspaceFolders;if(!e||0===e.length)return c.window.showErrorMessage(c.l10n.t("No workspace folder is open or provided, aborting creation.")),void(0,u.traceError)(`Template file not found at: ${i}`);a=e[0].uri.fsPath}const f=s.join(a,`${r}_project`);if(await o.pathExists(f))return void c.window.showErrorMessage(c.l10n.t("A project folder by that name already exists, aborting creation. Please retry with a unique package name given your workspace."));await o.copy(i,f),await(0,d.replaceInFilesAndNames)(f,"package_name",r);const p={name:r,uri:c.Uri.file(f)};let v;if(await this.projectManager.add(p),t){const t=this.envManagers.getEnvironmentManager(void 0);if(t?.supportsQuickCreate)v=await t.create(c.Uri.file(f),{quickCreate:!0});else if(!e?.quickCreate&&t?.supportsCreate)v=await t.create(c.Uri.file(f),{});else{const e=this.envManagers.managers.find((e=>"ms-python.python:venv"===e.id||e.supportsQuickCreate));e?v=await e.create(c.Uri.file(f),{quickCreate:!0}):await c.window.showErrorMessage(c.l10n.t('A virtual environment could not be created for the new package "{0}" because your default environment manager does not support this operation and no alternative was available.',r),c.l10n.t("Create custom environment"))===c.l10n.t("Create custom environment")&&(await c.commands.executeCommand("python-envs.createAny",{uri:p.uri,selectEnvironment:!0}),v=await this.envManagers.getEnvironment(p.uri))}}if(v=v||await this.envManagers.getEnvironment(c.Uri.parse(f)),!v)return void c.window.showErrorMessage(c.l10n.t("Project created but unable to be correlated to correct Python environment."));if(this.envManagers.setEnvironment(p?.uri,v),n){const e=s.join(l.NEW_PROJECT_TEMPLATES_FOLDER,"copilot-instructions-text","package-copilot-instructions.md");await(0,d.manageCopilotInstructionsFile)(a,e,[{searchValue:"<package_name>",replaceValue:r}])}const m={name:`Python Package: ${r}`,type:"debugpy",request:"launch",module:r};return await(0,d.manageLaunchJsonFile)(a,JSON.stringify(m)),p}if(!r)throw new Error("Package name is required in quickCreate mode.");t=!0,n=!0}}},6634:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.NewScriptProject=void 0;const o=a(n(1605)),s=a(n(6928)),c=n(1398),l=n(5333),u=n(853),h=n(675),d=n(9056);t.NewScriptProject=class{constructor(e){this.projectManager=e,this.name=c.l10n.t("newScript"),this.displayName=c.l10n.t("Script"),this.description=c.l10n.t("Creates a new script folder in your current workspace"),this.tooltip=new c.MarkdownString(c.l10n.t("Create a new Python script"))}async create(e){let t,n=e?.name;if(!0!==e?.quickCreate){if(!n){try{n=await(0,h.showInputBoxWithButtons)({prompt:c.l10n.t("What is the name of the script? (e.g. my_script.py)"),ignoreFocusOut:!0,showBackButton:!0,validateInput:e=>{if(!e.endsWith(".py"))return c.l10n.t('Script name must end with ".py".');const t=e.replace(/\.py$/,"");return/^([a-z_]|[a-z0-9_][a-z0-9._-]*[a-z0-9_])$/i.test(t)?/^[-._0-9]$/i.test(t)?c.l10n.t("Single-character script names cannot be a number, hyphen, or period."):null:c.l10n.t("Invalid script name. Use only letters, numbers, underscores, hyphens, or periods. Must start and end with a letter or number.")}})}catch(e){e===c.QuickInputButtons.Back&&await c.commands.executeCommand("python-envs.createNewProjectFromTemplate")}if(!n)return;(0,d.isCopilotInstalled)()&&(t=!0)}const r=s.join(l.NEW_PROJECT_TEMPLATES_FOLDER,"new723ScriptTemplate","script.py");if(!await o.pathExists(r))return c.window.showErrorMessage(c.l10n.t("Template file does not exist, aborting creation.")),void(0,u.traceError)(`Template file not found at: ${r}`);let i=e?.rootUri.fsPath;if(!i){const e=c.workspace.workspaceFolders;if(!e||0===e.length)return void c.window.showErrorMessage(c.l10n.t("No workspace folder is open or provided, aborting creation."));i=e[0].uri.fsPath}const a=s.join(i,n);if(await o.pathExists(a))return void c.window.showErrorMessage(c.l10n.t("A script file by that name already exists, aborting creation. Please retry with a unique script name given your workspace."));if(await o.copy(r,a),await(0,d.replaceInFilesAndNames)(a,"script_name",n.replace(/\.py$/,"")),t){const e=s.join(l.NEW_PROJECT_TEMPLATES_FOLDER,"copilot-instructions-text","script-copilot-instructions.md");await(0,d.manageCopilotInstructionsFile)(i,e,[{searchValue:"<script_name>",replaceValue:n}])}const f={name:n,uri:c.Uri.file(a)};return this.projectManager.add(f),await(0,h.showTextDocument)(f.uri),f}if(!n)throw new Error("Script file name is required in quickCreate mode.");t=!0}}},2822:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectCreatorsImpl=void 0;const r=n(1398);t.ProjectCreatorsImpl=class{constructor(){this._creators=[]}registerPythonProjectCreator(e){return this._creators.push(e),new r.Disposable((()=>{this._creators=this._creators.filter((t=>t!==e))}))}getProjectCreators(){return this._creators}dispose(){this._creators=[]}}},6267:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.revealProjectInExplorer=t.copyPathToClipboard=t.runAsTaskCommand=t.runInDedicatedTerminalCommand=t.runInTerminalCommand=t.findParentIfFile=t.createTerminalCommand=t.getPackageCommandOptions=t.removePythonProject=t.addPythonProjectCommand=t.setPackageManagerCommand=t.setEnvManagerCommand=t.setEnvironmentCommand=t.handlePackageUninstall=t.removeEnvironmentCommand=t.createAnyEnvironmentCommand=t.createEnvironmentCommand=t.refreshPackagesCommand=t.refreshManagerCommand=void 0;const o=a(n(1605)),s=a(n(6928)),c=n(1398),l=n(853),u=n(8477),h=n(5920),d=n(8148),f=n(5946),p=n(9344),v=n(675),m=n(1699),g=n(1609),y=n(3080);async function E(e,t,n){let r=[];for(const i of e){const e=await n.getEnvironment(i.uri);e?.envId.id===t.envId.id&&r.push(i)}if(r.length>0){const e=r.length>1?"environments":"environment";(0,v.showInformationMessage)(`"${t.name}" is already selected as the ${e} for: ${r.map((e=>`"${e.name}"`)).join(", ")}`)}const i=e.filter((e=>!r.includes(e))).map((e=>e.uri));0!==i.length&&await n.setEnvironments(i,t)}async function w(e){return(await o.stat(e)).isFile()?s.dirname(e):e}t.refreshManagerCommand=async function(e){if(e instanceof y.EnvManagerTreeItem){const t=e.manager;await t.refresh(void 0)}else(0,l.traceVerbose)(`Invalid context for refresh command: ${e}`)},t.refreshPackagesCommand=async function(e,t){if(e instanceof y.ProjectEnvironment){const n=e;if(t){const e=t.getPackageManager(n.parent.project.uri);e&&await e.refresh(n.environment)}}else if(e instanceof y.PythonEnvTreeItem){const n=e,r=n.parent.kind===y.EnvTreeItemKind.environmentGroup?n.parent.parent.manager:n.parent.manager,i=t?.getPackageManager(r.preferredPackageManagerId);i&&await i.refresh(n.environment)}else(0,l.traceVerbose)(`Invalid context for refresh command: ${e}`)},t.createEnvironmentCommand=async function(e,t,n){if(e instanceof y.EnvManagerTreeItem){const r=e.manager,i=n.getProjects();if(0===i.length){const e=await r.create("global",void 0);return e&&await t.setEnvironments("global",e),e}if(i.length>0){const e=await(0,p.pickProjectMany)(i);if(e){const n=0===e.length?"global":e.map((e=>e.uri)),i=await r.create(n,void 0);return i&&await t.setEnvironmentsIfUnset(n,i),i}(0,l.traceInfo)("No project selected or global condition met for environment creation")}}else if(e instanceof c.Uri){const r=t.getEnvironmentManager(e),i=n.get(e);if(i)return await(r?.create(i.uri,void 0));(0,l.traceError)(`No project found for ${e}`)}else(0,l.traceError)(`Invalid context for create command: ${e}`)},t.createAnyEnvironmentCommand=async function(e,t,n){const r=n?.selectEnvironment,i=t.getProjects(n?.uri?[n?.uri]:void 0);if(0===i.length){const t=await(0,f.pickEnvironmentManager)(e.managers.filter((e=>e.supportsCreate))),i=e.managers.find((e=>e.id===t));if(i){const e=await i.create("global",{...n});return r&&e&&await i.set(void 0,e),e}}else if(i.length>0){const t=await(0,p.pickProjectMany)(i,n?.showBackButton);if(t&&t.length>0){const i=[];t.forEach((t=>{const n=e.getEnvironmentManager(t.uri);n&&n.supportsCreate&&!i.includes(n)&&i.push(n)}));let a,o=n?.quickCreate??!1;if(o&&1===i.length)a=i[0];else{let t=await(0,f.pickEnvironmentManager)(e.managers.filter((e=>e.supportsCreate)),i,n?.showBackButton);t?.startsWith("QuickCreate#")&&(o=!0,t=t.replace("QuickCreate#","")),a=e.managers.find((e=>e.id===t))}if(a){const i=await a.create(t.map((e=>e.uri)),{...n,quickCreate:o});return r&&i&&await e.setEnvironments(t.map((e=>e.uri)),i),i}}}},t.removeEnvironmentCommand=async function(e,t){if(e instanceof y.PythonEnvTreeItem){const t=e,n=t.parent.kind===y.EnvTreeItemKind.environmentGroup?t.parent.parent.manager:t.parent.manager;await n.remove(t.environment)}else if(e instanceof c.Uri){const n=t.getEnvironmentManager(e),r=await(n?.get(e));r&&await(n?.remove(r))}else if(e instanceof y.ProjectEnvironment){const n=e,r=t.getEnvironmentManager(n.parent.project.uri);await(r?.remove(n.environment))}else(0,l.traceError)(`Invalid context for remove command: ${e}`)},t.handlePackageUninstall=async function(e,t){if(e instanceof y.PackageTreeItem||e instanceof y.ProjectPackage){const n=e.pkg.name,r=(y.ProjectPackage,e.parent.environment),i=t.getPackageManager(r);await(i?.manage(r,{uninstall:[n],install:[]}))}else(0,l.traceError)("Invalid context for uninstall command: "+typeof e)},t.setEnvironmentCommand=async function e(t,n,r){if(t instanceof y.PythonEnvTreeItem)try{const e=t,i=r.getProjects();if(i.length>0){const e=await(0,p.pickProjectMany)(i);e&&e.length>0&&await E(e,t.environment,n)}else await n.setEnvironments("global",e.environment)}catch(i){throw i===c.QuickInputButtons.Back&&await e(t,n,r),i}else if(t instanceof y.ProjectItem){const i=t;await e([i.project.uri],n,r)}else if(t instanceof y.GlobalProjectItem)await e(void 0,n,r);else if(t instanceof c.Uri)await e([t],n,r);else if(void 0===t)try{const t=r.getProjects();if(t.length>0){const i=await(0,p.pickProjectMany)(t);if(i&&i.length>0){const t=i.map((e=>e.uri));await e(t,n,r)}}else{const e=n.getEnvironmentManager(void 0),t=e?await e.get(void 0):void 0,r=await(0,d.pickEnvironment)(n.managers,e?[e]:[],{projects:[],recommended:t,showBackButton:!1});r&&await n.setEnvironments("global",r)}}catch(i){throw i===c.QuickInputButtons.Back&&await e(t,n,r),i}else if(Array.isArray(t)&&t.length>0&&t.every((e=>e instanceof c.Uri))){const e=t,i=r.getProjects(e).map((e=>e)),a=n.getProjectEnvManagers(e),o=1===a.length&&1===e.length?await a[0].get(e[0]):void 0,s=await(0,d.pickEnvironment)(n.managers,a,{projects:i,recommended:o,showBackButton:e.length>1});s&&await E(i,s,n)}else(0,l.traceError)(`Invalid context for setting environment command: ${t}`),(0,v.showErrorMessage)("Invalid context for setting environment")},t.setEnvManagerCommand=async function(e,t){const n=await(0,p.pickProjectMany)(t.getProjects());if(n&&n.length>0){const t=await(0,f.pickEnvironmentManager)(e.managers);t&&await(0,u.setEnvironmentManager)(n.map((e=>({project:e,envManager:t}))))}},t.setPackageManagerCommand=async function(e,t){const n=await(0,p.pickProjectMany)(t.getProjects());if(n&&n.length>0){const t=await(0,f.pickPackageManager)(e.packageManagers);t&&await(0,u.setPackageManager)(n.map((e=>({project:e,packageManager:t}))))}},t.addPythonProjectCommand=async function e(t,n,r,i){if(0===n.getProjects().length&&"Open Folder"===await(0,v.showErrorMessage)("Please open a folder/project to create a Python project.",{modal:!0},"Open Folder"))return void await c.commands.executeCommand("vscode.openFolder");if(t instanceof Array)for(const a of t)return void await e(a,n,r,i);if(t instanceof y.ProjectItem)return void n.add(t.project);let a;if(t instanceof c.Uri){a={name:t.fsPath,rootUri:t};const o=i.getProjectCreators().find((e=>"existingProjects"===e.name));if(o)try{return o.supportsQuickCreate&&(a={...a,quickCreate:!0}),await o.create(a),void await Promise.all(r.managers.map((e=>e.refresh(a?.rootUri))))}catch(a){if(a===c.QuickInputButtons.Back)return e(t,n,r,i);throw a}}const o=await(0,f.pickCreator)(i.getProjectCreators());if(!o)return;const s=c.workspace.workspaceFolders;if(!t&&s&&s.length>1)try{const e=await(0,f.pickWorkspaceFolder)(!0);t=e?.uri}catch(a){if(a===c.QuickInputButtons.Back)return e(t,n,r,i);throw a}try{await o.create(a),await Promise.all(r.managers.map((e=>e.refresh(a?.rootUri))))}catch(a){if(a===c.QuickInputButtons.Back)return e(t,n,r,i);throw a}},t.removePythonProject=async function(e,t){await(0,u.removePythonProjectSetting)([{project:e.project}]),t.remove(e.project)},t.getPackageCommandOptions=async function e(t,n,r){if(void 0===t){const t=await(0,p.pickProject)(r.getProjects());if(t)return e(t.uri,n,r)}if(t instanceof y.ProjectEnvironment){const e=t.environment,r=n.getPackageManager(t.parent.project.uri);if(r)return{environment:e,packageManager:r}}if(t instanceof y.PythonEnvTreeItem){const e=t.environment,r=n.getPackageManager(e);if(r)return{environment:e,packageManager:r}}if(t instanceof c.Uri){const e=await(n.getEnvironmentManager(t)?.get(t)),r=n.getPackageManager(t);if(e&&r)return{environment:e,packageManager:r}}throw new Error(`Invalid context for package command: ${t}`)},t.createTerminalCommand=async function(e,t,n){if(void 0===e){const e=await(0,p.pickProject)(t.getPythonProjects());if(e){const r=await t.getEnvironment(e.uri),i=await w(e.uri.fsPath);if(r)return await n.create(r,{cwd:i})}}else if(e instanceof c.Uri){const r=e,i=await t.getEnvironment(r),a=t.getPythonProject(r);if(i&&a){const e=await w(a.uri.fsPath);return await n.create(i,{cwd:e})}}else if(e instanceof y.ProjectItem){const r=e,i=await t.getEnvironment(r.project.uri),a=await w(r.project.uri.fsPath);if(i){const e=await n.create(i,{cwd:a});return e.show(),e}}else if(e instanceof y.GlobalProjectItem){const e=await t.getEnvironment(void 0);if(e){const t=await n.create(e,{cwd:void 0});return t.show(),t}}else if(e instanceof y.PythonEnvTreeItem){const r=e,i=await(0,p.pickProject)(t.getPythonProjects());if(i){const e=await w(i.uri.fsPath),t=await n.create(r.environment,{cwd:e});return t.show(),t}}},t.findParentIfFile=w,t.runInTerminalCommand=async function(e,t,n){if(e instanceof c.Uri){const r=e,i=t.getPythonProject(r),a=await t.getEnvironment(r);if(a&&i){const r=await t.resolveEnvironment(a.environmentPath)??a,o=await n.getProjectTerminal(i,r);await(0,g.runInTerminal)(r,o,{cwd:i.uri,args:[e.fsPath],show:!0})}}throw new Error(`Invalid context for run-in-terminal: ${e}`)},t.runInDedicatedTerminalCommand=async function(e,t,n){if(e instanceof c.Uri){const r=e,i=t.getPythonProject(r),a=await t.getEnvironment(r);if(a&&i){const r=await t.resolveEnvironment(a.environmentPath)??a,o=await n.getDedicatedTerminal(e,i,r);await(0,g.runInTerminal)(r,o,{cwd:i.uri,args:[e.fsPath],show:!0})}}throw new Error(`Invalid context for run-in-terminal: ${e}`)},t.runAsTaskCommand=async function e(t,n){if(t instanceof c.Uri){const e=t,r=n.getPythonProject(e),i=await n.getEnvironment(e);if(i){const e=await n.resolveEnvironment(i.environmentPath)??i;return await(0,m.runAsTask)(e,{project:r,args:[t.fsPath],name:"Python Run"},{reveal:c.TaskRevealKind.Always})}}else if(void 0===t){const t=(0,v.activeTextEditor)()?.document.uri;if(t)return e(t,n)}},t.copyPathToClipboard=async function(e){if(e instanceof y.ProjectItem){const t=e.project.uri.fsPath;await(0,h.clipboardWriteText)(t),(0,l.traceInfo)(`Copied project path to clipboard: ${t}`)}else if(e instanceof y.ProjectEnvironment||e instanceof y.PythonEnvTreeItem){const t=e.environment.execInfo.run.executable;await(0,h.clipboardWriteText)(t),(0,l.traceInfo)(`Copied environment path to clipboard: ${t}`)}else(0,l.traceVerbose)(`Invalid context for copy path to clipboard: ${e}`)},t.revealProjectInExplorer=async function(e){if(e instanceof y.ProjectItem){const t=e.project.uri;await c.commands.executeCommand("revealInExplorer",t)}else(0,l.traceVerbose)(`Invalid context for reveal project in explorer: ${e}`)}},5233:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonEnvironmentManagers=void 0;const r=n(1398),i=n(370),a=n(853),o=n(781),s=n(3343),c=n(1686),l=n(1161),u=n(8477);function h(e){const t=e.toLowerCase().replace(/[^a-zA-Z0-9-_]/g,"_");return e!==t&&(0,a.traceVerbose)(`Environment manager name "${e}"  was normalized to "${t}"`),`${(0,c.getCallingExtension)()}:${t}`}t.PythonEnvironmentManagers=class{constructor(e){this.pm=e,this._environmentManagers=new Map,this._packageManagers=new Map,this._previousEnvironments=new Map,this._onDidChangeEnvironmentManager=new r.EventEmitter,this._onDidChangePackageManager=new r.EventEmitter,this._onDidChangeEnvironments=new r.EventEmitter,this._onDidChangeEnvironment=new r.EventEmitter,this._onDidChangeEnvironmentFiltered=new r.EventEmitter,this._onDidChangePackages=new r.EventEmitter,this.onDidChangeEnvironmentManager=this._onDidChangeEnvironmentManager.event,this.onDidChangePackageManager=this._onDidChangePackageManager.event,this.onDidChangeEnvironments=this._onDidChangeEnvironments.event,this.onDidChangeEnvironment=this._onDidChangeEnvironment.event,this.onDidChangePackages=this._onDidChangePackages.event,this.onDidChangeEnvironmentFiltered=this._onDidChangeEnvironmentFiltered.event}registerEnvironmentManager(e){const t=h(e.name);if(this._environmentManagers.has(t)){const e=new i.EnvironmentManagerAlreadyRegisteredError(`Environment manager with id ${t} already registered`);throw(0,a.traceError)(e),e}const n=[],c=new l.InternalEnvironmentManager(t,e);return n.push(c.onDidChangeEnvironments((e=>{setImmediate((()=>this._onDidChangeEnvironments.fire({manager:c,changes:e})))})),c.onDidChangeEnvironment((e=>{e.old?.envId.id!==e.new?.envId.id&&setImmediate((()=>this._onDidChangeEnvironment.fire(e)))}))),this._environmentManagers.set(t,c),this._onDidChangeEnvironmentManager.fire({kind:"registered",manager:c}),t.toLowerCase().startsWith("undefined_publisher.")||(0,s.sendTelemetryEvent)(o.EventNames.ENVIRONMENT_MANAGER_REGISTERED,void 0,{managerId:t}),new r.Disposable((()=>{this._environmentManagers.delete(t),n.forEach((e=>e.dispose())),setImmediate((()=>this._onDidChangeEnvironmentManager.fire({kind:"unregistered",manager:c})))}))}registerPackageManager(e){const t=h(e.name);if(this._packageManagers.has(t)){const e=new i.PackageManagerAlreadyRegisteredError(`Package manager with id ${t} already registered`);throw(0,a.traceError)(e),e}const n=[],c=new l.InternalPackageManager(t,e);return n.push(c.onDidChangePackages((e=>{setImmediate((()=>this._onDidChangePackages.fire({environment:e.environment,manager:c,changes:e.changes})))}))),this._packageManagers.set(t,c),this._onDidChangePackageManager.fire({kind:"registered",manager:c}),t.toLowerCase().startsWith("undefined_publisher.")||(0,s.sendTelemetryEvent)(o.EventNames.PACKAGE_MANAGER_REGISTERED,void 0,{managerId:t}),new r.Disposable((()=>{this._packageManagers.delete(t),n.forEach((e=>e.dispose())),setImmediate((()=>this._onDidChangePackageManager.fire({kind:"unregistered",manager:c})))}))}dispose(){this._environmentManagers.clear(),this._packageManagers.clear(),this._onDidChangeEnvironmentManager.dispose(),this._onDidChangePackageManager.dispose(),this._onDidChangeEnvironments.dispose(),this._onDidChangePackages.dispose()}getEnvironmentManager(e){if(0!==this._environmentManagers.size){if(void 0===e||e instanceof r.Uri){const t=(0,u.getDefaultEnvManagerSetting)(this.pm,e);if(void 0===t)return;return this._environmentManagers.get(t)}return"string"==typeof e?this._environmentManagers.get(e):this._environmentManagers.get(e.envId.managerId)}(0,a.traceError)("No environment managers registered")}getPackageManager(e){if(0!==this._packageManagers.size)if(void 0===e||e instanceof r.Uri){const t=(0,u.getDefaultPkgManagerSetting)(this.pm,e),n=(0,u.getDefaultEnvManagerSetting)(this.pm,e);if(t)return this._packageManagers.get(t);if(n){const e=this._environmentManagers.get(n)?.preferredPackageManagerId;if(e)return this._packageManagers.get(e)}}else{if("string"==typeof e)return this._packageManagers.get(e);if("pkgId"in e)return this._packageManagers.get(e.pkgId.managerId);{const t=this._environmentManagers.get(e.envId.managerId)?.preferredPackageManagerId;if(t)return this._packageManagers.get(t)}}else(0,a.traceError)("No package managers registered")}get managers(){return Array.from(this._environmentManagers.values())}get packageManagers(){return Array.from(this._packageManagers.values())}setPythonProject(e,t){const n=r.workspace.getConfiguration("python-envs",e.uri),i=n.get("pythonProjects",[]);i.push({path:e.uri.fsPath,envManager:t.id,packageManager:"preferred"}),n.update("pythonProjects",i,r.ConfigurationTarget.Workspace)}async clearCache(e){if(void 0===e)return void await Promise.all(this.managers.map((e=>e.clearCache())));const t=this.getEnvironmentManager(e);t&&await t.clearCache()}async setEnvironment(e,t){if(Array.isArray(e))return this.setEnvironments(e,t);const n=t||e,i=this.getEnvironmentManager(n);if(!i)return(0,a.traceError)(`No environment manager found for scope: ${n instanceof r.Uri?n.fsPath:n?.environmentPath?.fsPath}`),void(0,a.traceError)(this.managers.map((e=>e.id)).join(", "));await i.set(e,t);const o=e?this.pm.get(e):void 0;if(e){const e=this.getPackageManager(t);o&&e&&await(0,u.setAllManagerSettings)([{project:o,envManager:i.id,packageManager:e.id}])}const s=o?o.uri.toString():"global",c=this._previousEnvironments.get(s);c?.envId.id!==t?.envId.id&&(this._previousEnvironments.set(s,t),setImmediate((()=>this._onDidChangeEnvironmentFiltered.fire({uri:o?.uri,new:t,old:c}))))}async setEnvironments(e,t){if(t){const n=this.managers.find((e=>e.id===t.envId.managerId));if(!n)return(0,a.traceError)(`No environment manager found for [${t.envId.managerId}]: ${t.environmentPath?t.environmentPath.fsPath:""}`),void(0,a.traceError)(this.managers.map((e=>e.id)).join(", "));const i=[],o=[],s=[];if(Array.isArray(e)&&e.every((e=>e instanceof r.Uri)))i.push(n.set(e,t)),e.forEach((e=>{const r=this.getEnvironmentManager(e);n.id!==r?.id&&o.push({project:this.pm.get(e),envManager:n.id,packageManager:n.preferredPackageManagerId});const i=this.pm.get(e),a=i?i.uri.toString():"global",c=this._previousEnvironments.get(a);c?.envId.id!==t?.envId.id&&(this._previousEnvironments.set(a,t),s.push({uri:i?.uri,new:t,old:c}))}));else if("string"==typeof e&&"global"===e){const e=this.getEnvironmentManager(void 0);i.push(n.set(void 0,t)),n.id!==e?.id&&o.push({project:void 0,envManager:n.id,packageManager:n.preferredPackageManagerId});const r=this._previousEnvironments.get("global");r?.envId.id!==t?.envId.id&&(this._previousEnvironments.set("global",t),s.push({uri:void 0,new:t,old:r}))}await Promise.all(i),await(0,u.setAllManagerSettings)(o),setImmediate((()=>s.forEach((e=>this._onDidChangeEnvironmentFiltered.fire(e)))))}else{const t=[],n=[];if(Array.isArray(e)&&e.every((e=>e instanceof r.Uri)))e.forEach((e=>{const r=this.getEnvironmentManager(e);if(r){const i=async()=>{await r.set(e);const t=this.pm.get(e),i=await r.get(e),a=t?t.uri.toString():"global",o=this._previousEnvironments.get(a);o?.envId.id!==i?.envId.id&&(this._previousEnvironments.set(a,i),n.push({uri:t?.uri,new:i,old:o}))};t.push(i())}}));else if("string"==typeof e&&"global"===e){const e=this.getEnvironmentManager(void 0);if(e){const r=async()=>{await e.set(void 0);const t=await e.get(void 0),r=this._previousEnvironments.get("global");r?.envId.id!==t?.envId.id&&(this._previousEnvironments.set("global",t),n.push({uri:void 0,new:t,old:r}))};t.push(r())}}await Promise.all(t),setImmediate((()=>n.forEach((e=>this._onDidChangeEnvironmentFiltered.fire(e)))))}}async setEnvironmentsIfUnset(e,t){if(t)if("string"==typeof e&&"global"===e)await this.getEnvironment(void 0)||await this.setEnvironments("global",t);else if(Array.isArray(e)){const n=[];for(const t of e){const e=await this.getEnvironment(t);e&&"ms-python.python:system"!==e.envId.managerId||n.push(t)}n.length>0&&await this.setEnvironments(n,t)}}async getEnvironment(e){const t=this.getEnvironmentManager(e);if(!t)return;const n=e?this.pm.get(e):void 0,r=await t.get(e),i=n?n.uri.toString():"global",a=this._previousEnvironments.get(i);return a?.envId.id!==r?.envId.id&&(this._previousEnvironments.set(i,r),setImmediate((()=>this._onDidChangeEnvironmentFiltered.fire({uri:n?.uri,new:r,old:a})))),r}getProjectEnvManagers(e){const t=[];return e.forEach((e=>{const n=this.getEnvironmentManager(e);n&&!t.includes(n)&&t.push(n)})),t}}},5558:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseEnvFile=t.mergeEnvVariables=void 0;const r=n(1305),i=n(998);t.mergeEnvVariables=function(e,t){const n={};return Object.keys(t).forEach((r=>{let i=t[r];void 0===i||""===i?delete n[r]:(Object.keys(e).forEach((t=>{const n=e[t];n&&(i=i?.replace(`\${${t}}`,n))})),n[r]=i)})),n},t.parseEnvFile=async function(e){const t=await(0,r.readFile)(e),n=Buffer.from(t).toString("utf-8");return(0,i.parse)(n)}},4209:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonEnvVariableManager=void 0;const o=a(n(1605)),s=a(n(6928)),c=n(1398),l=n(4500),u=n(7422),h=n(5558);t.PythonEnvVariableManager=class{constructor(e){this.pm=e,this.disposables=[],this._onDidChangeEnvironmentVariables=new c.EventEmitter,this.onDidChangeEnvironmentVariables=this._onDidChangeEnvironmentVariables.event,this.watcher=(0,u.createFileSystemWatcher)("**/.env"),this.disposables.push(this._onDidChangeEnvironmentVariables,this.watcher,this.watcher.onDidCreate((e=>this._onDidChangeEnvironmentVariables.fire({uri:e,changeType:c.FileChangeType.Created}))),this.watcher.onDidChange((e=>this._onDidChangeEnvironmentVariables.fire({uri:e,changeType:c.FileChangeType.Changed}))),this.watcher.onDidDelete((e=>this._onDidChangeEnvironmentVariables.fire({uri:e,changeType:c.FileChangeType.Deleted}))))}async getEnvironmentVariables(e,t,n){const r=e?this.pm.get(e):void 0;let i=n||{...process.env},a=(0,u.getConfiguration)("python",r?.uri??e).get("envFile");if(a=a?s.normalize((0,l.resolveVariables)(a,e)):void 0,a&&await o.pathExists(a)){const e=await(0,h.parseEnvFile)(c.Uri.file(a));i=(0,h.mergeEnvVariables)(i,e)}let d=r?s.normalize(s.join(r.uri.fsPath,".env")):void 0;if(d&&d?.toLowerCase()!==a?.toLowerCase()&&await o.pathExists(d)){const e=await(0,h.parseEnvFile)(c.Uri.file(d));i=(0,h.mergeEnvVariables)(i,e)}if(t)for(const e of t){const t=e instanceof c.Uri?await(0,h.parseEnvFile)(e):e;i=(0,h.mergeEnvVariables)(i,t)}return i}dispose(){this.disposables.forEach((e=>e.dispose()))}}},2189:(e,t)=>{"use strict";function n(e){return e.startsWith('"')&&e.endsWith('"')||1===e.length&&/[&|<>;()[\]{}$]/.test(e)?e:/[\s&|<>;'"`()\[\]{}$]/.test(e)?`"${e}"`:e}Object.defineProperty(t,"__esModule",{value:!0}),t.quoteArgs=t.quoteStringIfNecessary=void 0,t.quoteStringIfNecessary=n,t.quoteArgs=function(e){return e.map(n)}},1699:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runAsTask=void 0;const r=n(1398),i=n(853),a=n(5371),o=n(7422),s=n(2189);t.runAsTask=async function(e,t,n){const c=(l=t.project?.uri,(l?(0,o.getWorkspaceFolder)(l):void 0)??r.TaskScope.Global);var l;let u=e.execInfo?.activatedRun?.executable??e.execInfo?.run.executable;u||((0,i.traceWarn)('No Python executable found in environment; falling back to "python".'),u="python"),u=(0,s.quoteStringIfNecessary)(u);const h=[...e.execInfo?.activatedRun?.args??e.execInfo?.run.args??[],...t.args];(0,i.traceInfo)(`Running as task: ${u} ${h.join(" ")}`);const d=new r.Task({type:"python"},c,t.name,"Python",new r.ShellExecution(u,h,{cwd:t.cwd,env:t.env}),"$python");return d.presentationOptions={reveal:n?.reveal??r.TaskRevealKind.Silent,echo:!0,panel:r.TaskPanelKind.Shared,close:!1,showReuseMessage:!0},(0,a.executeTask)(d)}},2209:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runInBackground=void 0;const r=n(8902),i=n(853),a=n(2189);t.runInBackground=async function(e,t){let o=e.execInfo?.activatedRun?.executable??e.execInfo?.run.executable;o||((0,i.traceWarn)('No Python executable found in environment; falling back to "python".'),o="python"),o.startsWith('"')&&o.endsWith('"')&&(o=o.substring(1,o.length-1));const s=[...e.execInfo?.activatedRun?.args??e.execInfo?.run.args??[],...t.args];(0,i.traceInfo)(`Running in background: "${o}" ${s.join(" ")}`);try{n(9896).existsSync(o)||((0,i.traceError)(`Python executable does not exist: ${o}. Attempting to quote the path as a workaround...`),o=(0,a.quoteStringIfNecessary)(o))}catch(e){(0,i.traceWarn)(`Error checking if executable exists: ${e instanceof Error?e.message:String(e)}`)}const c=(0,r.spawnProcess)(o,s,{stdio:"pipe",cwd:t.cwd,env:t.env});return{pid:c.pid,stdin:c.stdin,stdout:c.stdout,stderr:c.stderr,kill:()=>{c.killed||c.kill()},onExit:e=>{c.on("exit",((t,n)=>{t&&0!==t&&(0,i.traceError)(`Process exited with error code: ${t}, signal: ${n}`),e(t,n,null)})),c.on("error",(t=>{(0,i.traceError)(`Process error: ${t?.message||t}${t?.stack?"\n"+t.stack:""}`),e(null,null,t)}))}}}},5612:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonProjectManagerImpl=void 0;const o=a(n(6928)),s=n(1398),c=n(5333),l=n(7079),u=n(7422),h=n(1161),d=n(8477);t.PythonProjectManagerImpl=class{constructor(){this.disposables=[],this._projects=new Map,this._onDidChangeProjects=new s.EventEmitter,this.onDidChangeProjects=this._onDidChangeProjects.event,this.updateDebounce=(0,l.createSimpleDebounce)(100,(()=>this.updateProjects()))}initialize(){this.add(this.getInitialProjects()),this.disposables.push(this._onDidChangeProjects,new s.Disposable((()=>this._projects.clear())),(0,u.onDidChangeWorkspaceFolders)((()=>{this.updateDebounce.trigger()})),(0,u.onDidChangeConfiguration)((e=>{(e.affectsConfiguration("python-envs.defaultEnvManager")||e.affectsConfiguration("python-envs.pythonProjects")||e.affectsConfiguration("python-envs.defaultPackageManager"))&&this.updateDebounce.trigger()})))}getInitialProjects(){const e=[],t=(0,u.getWorkspaceFolders)()??[];for(const n of t){const r=(0,u.getConfiguration)("python-envs",n.uri).get("pythonProjects",[]);e.some((e=>e.uri.toString()===n.uri.toString()))||e.push(new h.PythonProjectsImpl(n.name,n.uri));for(const i of r){let r;if(i.workspace){const e=t.find((e=>e.name===i.workspace));if(e){if(e.uri.toString()!==n.uri.toString())continue;r=s.Uri.file(o.resolve(e.uri.fsPath,i.path))}}const a=r||s.Uri.file(o.resolve(n.uri.fsPath,i.path));e.some((e=>e.uri.toString()===a.toString()))||e.push(new h.PythonProjectsImpl(i.path,a))}}return e}updateProjects(){const e=this.getInitialProjects(),t=Array.from(this._projects.values()),n=t.filter((t=>!e.find((e=>e.uri.toString()===t.uri.toString()))));n.forEach((e=>this._projects.delete(e.uri.toString())));const r=e.filter((e=>!t.find((t=>t.uri.toString()===e.uri.toString()))));r.forEach((e=>this._projects.set(e.uri.toString(),e))),(n.length>0||r.length>0)&&this._onDidChangeProjects.fire(Array.from(this._projects.values()))}create(e,t,n){return new h.PythonProjectsImpl(e,t,n)}async add(e){const t=Array.isArray(e)?e:[e];if(0===t.length)return;const n=[],r=(0,d.getDefaultEnvManagerSetting)(this),i=(0,d.getDefaultPkgManagerSetting)(this),a=s.workspace.getConfiguration("python-envs",void 0),o=a.get("defaultEnvManager",c.DEFAULT_ENV_MANAGER_ID),l=a.get("defaultPackageManager",c.DEFAULT_PACKAGE_MANAGER_ID);t.forEach((e=>(((0,u.getWorkspaceFolders)()??[]).some((t=>t.uri.toString()===e.uri.toString()))&&r===o&&i===l||n.push({project:e,envManager:r,packageManager:i}),this._projects.set(e.uri.toString(),e)))),this._onDidChangeProjects.fire(Array.from(this._projects.values())),n.length>0&&await(0,d.addPythonProjectSetting)(n)}remove(e){const t=Array.isArray(e)?e:[e];0!==t.length&&(t.forEach((e=>this._projects.delete(e.uri.toString()))),this._onDidChangeProjects.fire(Array.from(this._projects.values())))}getProjects(e){if(void 0===e)return Array.from(this._projects.values());{const t=[];for(const n of e){const e=this.get(n);void 0===e||t.includes(e)||t.push(e)}return t}}get(e){let t=this._projects.get(e.toString());return t||(t=this.findProjectByUri(e)),t}findProjectByUri(e){const t=Array.from(this._projects.values()).sort(((e,t)=>t.uri.fsPath.length-e.uri.fsPath.length)),n=o.normalize(e.fsPath);for(const e of t){const t=o.normalize(e.uri.fsPath);if(this.isUriMatching(n,t))return e}}isUriMatching(e,t){if(t===e)return!0;let n=o.dirname(e);for(;n!==o.dirname(n);){if(t===n)return!0;n=o.dirname(n)}return!1}dispose(){this.disposables.forEach((e=>e.dispose()))}}},8940:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPythonApi=t.setPythonApi=void 0;const r=n(1398),i=n(1161),a=n(4047),o=n(853),s=n(5946),c=n(4477),l=n(1699),u=n(1609),h=n(2209),d=n(6878),f=n(2790);class p{constructor(e,t,n,i,a,s=[]){this.envManagers=e,this.projectManager=t,this.projectCreators=n,this.terminalManager=i,this.envVarManager=a,this.disposables=s,this._onDidChangeEnvironments=new r.EventEmitter,this._onDidChangeEnvironment=new r.EventEmitter,this._onDidChangePythonProjects=new r.EventEmitter,this._onDidChangePackages=new r.EventEmitter,this._onDidChangeEnvironmentVariables=new r.EventEmitter,this.onDidChangeEnvironments=this._onDidChangeEnvironments.event,this.onDidChangeEnvironment=this._onDidChangeEnvironment.event,this.onDidChangePackages=this._onDidChangePackages.event,this.onDidChangePythonProjects=this._onDidChangePythonProjects.event,this.onDidChangeEnvironmentVariables=this._onDidChangeEnvironmentVariables.event,this.disposables.push(this._onDidChangeEnvironment,this._onDidChangeEnvironments,this._onDidChangePythonProjects,this._onDidChangePackages,this._onDidChangeEnvironmentVariables,this.envManagers.onDidChangeEnvironmentFiltered((e=>{this._onDidChangeEnvironment.fire(e);const t=e.uri?.fsPath??"global";(0,o.traceInfo)(`Python API: Changed environment from ${e.old?.displayName} to ${e.new?.displayName} for: ${t}`)})),this.envVarManager.onDidChangeEnvironmentVariables((e=>this._onDidChangeEnvironmentVariables.fire(e))))}registerEnvironmentManager(e){const t=[];return t.push(this.envManagers.registerEnvironmentManager(e)),e.onDidChangeEnvironments&&t.push(e.onDidChangeEnvironments((e=>this._onDidChangeEnvironments.fire(e)))),e.onDidChangeEnvironment&&t.push(e.onDidChangeEnvironment((e=>{setImmediate((async()=>{await this.envManagers.getEnvironment(e.uri)}))}))),new r.Disposable((()=>t.forEach((e=>e.dispose()))))}createPythonEnvironmentItem(e,t){const n=this.envManagers.managers.find((e=>e.equals(t)));if(!n)throw new Error("Environment manager not found");const r=Math.random().toString(36).substring(2),a={managerId:n.id,id:`${e.name}-${r}`};return new i.PythonEnvironmentImpl(a,e)}async createEnvironment(e,t){if("global"===e||!Array.isArray(e)&&e instanceof r.Uri){await(0,f.waitForEnvManager)("global"===e?void 0:[e]);const n=this.envManagers.getEnvironmentManager("global"===e?void 0:e);if(!n)throw new Error("No environment manager found");if(!n.supportsCreate)throw new Error(`Environment manager does not support creating environments: ${n.id}`);return n.create(e,t)}if(Array.isArray(e)&&1===e.length&&e[0]instanceof r.Uri)return this.createEnvironment(e[0],t);if(Array.isArray(e)&&e.length>0&&e.every((e=>e instanceof r.Uri))){await(0,f.waitForEnvManager)(e);const n=[];if(e.forEach((e=>{const t=this.envManagers.getEnvironmentManager(e);t&&!n.includes(t)&&t.supportsCreate&&n.push(t)})),0===n.length)throw new Error("No environment managers found");const r=await(0,s.pickEnvironmentManager)(n);if(!r)throw new Error("No environment manager selected");const i=n.find((e=>e.id===r));if(!i)throw new Error("No environment manager found");return await i.create(e,t)}}async removeEnvironment(e){await(0,f.waitForEnvManagerId)([e.envId.managerId]);const t=this.envManagers.getEnvironmentManager(e);return t?t.remove(e):Promise.reject(new Error("No environment manager found"))}async refreshEnvironments(e){const t=(0,d.checkUri)(e);if(void 0===t)return await(0,f.waitForAllEnvManagers)(),await Promise.all(this.envManagers.managers.map((e=>e.refresh(t)))),Promise.resolve();await(0,f.waitForEnvManager)([t]);const n=this.envManagers.getEnvironmentManager(t);return n?n.refresh(t):Promise.reject(new Error(`No environment manager found for: ${t.fsPath}`))}async getEnvironments(e){const t=(0,d.checkUri)(e);if("all"===t||"global"===t){await(0,f.waitForAllEnvManagers)();const e=this.envManagers.managers.map((e=>e.getEnvironments(t)));return(await Promise.all(e)).flat()}await(0,f.waitForEnvManager)([t]);const n=this.envManagers.getEnvironmentManager(t);return n?await n.getEnvironments(t):[]}async setEnvironment(e,t){const n=(0,d.checkUri)(e);return await(0,f.waitForEnvManager)(n?n instanceof r.Uri?[n]:n:void 0),this.envManagers.setEnvironment(n,t)}async getEnvironment(e){const t=(0,d.checkUri)(e);return await(0,f.waitForEnvManager)(t?[t]:void 0),this.envManagers.getEnvironment(t)}async resolveEnvironment(e){await(0,f.waitForAllEnvManagers)();const t=this.projectManager.getProjects(),n=[];return t.forEach((e=>{const t=this.envManagers.getEnvironmentManager(e.uri);t&&!n.includes(t)&&n.push(t)})),await(0,c.handlePythonPath)(e,this.envManagers.managers,n)}registerPackageManager(e){const t=[];return t.push(this.envManagers.registerPackageManager(e)),e.onDidChangePackages&&t.push(e.onDidChangePackages((e=>this._onDidChangePackages.fire(e)))),new r.Disposable((()=>t.forEach((e=>e.dispose()))))}async managePackages(e,t){await(0,f.waitForEnvManagerId)([e.envId.managerId]);const n=this.envManagers.getPackageManager(e);return n?n.manage(e,t):Promise.reject(new Error("No package manager found"))}async refreshPackages(e){await(0,f.waitForEnvManagerId)([e.envId.managerId]);const t=this.envManagers.getPackageManager(e);return t?t.refresh(e):Promise.reject(new Error("No package manager found"))}async getPackages(e){await(0,f.waitForEnvManagerId)([e.envId.managerId]);const t=this.envManagers.getPackageManager(e);return t?t.getPackages(e):Promise.resolve(void 0)}createPackageItem(e,t,n){const r=this.envManagers.packageManagers.find((e=>e.equals(n)));if(!r)throw new Error("Package manager not found");const a=Math.random().toString(36).substring(2),o={managerId:r.id,environmentId:t.envId.id,id:`${e.name}-${a}`};return new i.PythonPackageImpl(o,e)}addPythonProject(e){this.projectManager.add(e)}removePythonProject(e){this.projectManager.remove(e)}getPythonProjects(){return this.projectManager.getProjects()}getPythonProject(e){return this.projectManager.get((0,d.checkUri)(e))}registerPythonProjectCreator(e){return this.projectCreators.registerPythonProjectCreator(e)}async createTerminal(e,t){return this.terminalManager.create(e,t)}async runInTerminal(e,t){const n=await this.terminalManager.getProjectTerminal(t.cwd instanceof r.Uri?t.cwd:r.Uri.file(t.cwd),e);return await(0,u.runInTerminal)(e,n,t),n}async runInDedicatedTerminal(e,t,n){const i=await this.terminalManager.getDedicatedTerminal(e,n.cwd instanceof r.Uri?n.cwd:r.Uri.file(n.cwd),t);return await(0,u.runInTerminal)(t,i,n),Promise.resolve(i)}runAsTask(e,t){return(0,l.runAsTask)(e,t)}runInBackground(e,t){return(0,h.runInBackground)(e,t)}getEnvironmentVariables(e,t,n){return this.envVarManager.getEnvironmentVariables((0,d.checkUri)(e),t,n)}}let v=(0,a.createDeferred)();t.setPythonApi=function(e,t,n,r,i){v.resolve(new p(e,t,n,r,i))},t.getPythonApi=function(){return v.promise}},4883:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerCompletionProvider=void 0;const r=n(1398),i=/\s*\"python-envs\.defaultEnvManager\"\s*:\s*\"/gm,a=/\s*\"python-envs\.defaultPackageManager\"\s*:\s*\"/gm,o=/\s*\"envManager\"\s*:\s*\"/gm,s=/\s*\"packageManager\"\s*:\s*\"/gm;function c(e,t,n,i){const a=new r.CompletionItem(e);return a.insertText=t,a.documentation=n,a.kind=r.CompletionItemKind.Value,a.range=i,a}class l{constructor(e){this.em=e}provideCompletionItems(e,t,n,l){const u=e.lineAt(t.line).text,h=u.substring(0,t.character),d=function(e,t){if(!(-1===t||t<e.character))return{inserting:new r.Range(e.line,e.character,e.line,t),replacing:new r.Range(e.line,e.character,e.line,t)}}(t,u.lastIndexOf('"'));let f=[];return i.test(h)||o.test(h)?f=this.em.managers.map((e=>c(e.id,e.id,e.description,d))):(a.test(h)||s.test(h))&&(f=this.em.packageManagers.map((e=>c(e.id,e.id,e.description,d)))),f}}t.registerCompletionProvider=function(e){return r.languages.registerCompletionItemProvider({scheme:"file",language:"jsonc",pattern:"**/settings.json"},new l(e),'"')}},8477:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getSettingUserScope=t.getSettingWorkspaceScope=t.getSettingWindowScope=t.removePythonProjectSetting=t.addPythonProjectSetting=t.setPackageManager=t.setEnvironmentManager=t.setAllManagerSettings=t.getDefaultPkgManagerSetting=t.getDefaultEnvManagerSetting=t.isDefaultEnvManagerBroken=t.setDefaultEnvManagerBroken=void 0;const o=a(n(6928)),s=n(1398),c=n(5333),l=n(853),u=n(7422);function h(e,t,n){const r=t.get("pythonProjects",[]);if(r.length>0&&n instanceof s.Uri){const t=e.get(n),i=s.workspace.getWorkspaceFolder(n);if(t&&i){const e=o.normalize(t.uri.fsPath);return r.find((t=>o.resolve(i.uri.fsPath,t.path)===e))}}}let d=!1,f=!1;function p(){return d}t.setDefaultEnvManagerBroken=function(e){d=e},t.isDefaultEnvManagerBroken=p,t.getDefaultEnvManagerSetting=function(e,t){const n=s.workspace.getConfiguration("python-envs",t),r=h(e,n,t);if(r&&r.envManager.length>0)return r.envManager;if(p())return f||((0,l.traceWarn)(`Default environment manager is broken, using system default: ${c.DEFAULT_ENV_MANAGER_ID}`),f=!0),c.DEFAULT_ENV_MANAGER_ID;const i=n.get("defaultEnvManager");return null==i||""===i?((0,l.traceError)("No default environment manager set. Check setting python-envs.defaultEnvManager"),(0,l.traceWarn)(`Using system default package manager: ${c.DEFAULT_ENV_MANAGER_ID}`),c.DEFAULT_ENV_MANAGER_ID):i},t.getDefaultPkgManagerSetting=function(e,t,n){const r=s.workspace.getConfiguration("python-envs",t),i=h(e,r,t);if(i&&i.packageManager.length>0)return i.packageManager;const a=r.get("defaultPackageManager");return null==a||""===a?n||((0,l.traceError)("No default environment manager set. Check setting python-envs.defaultPackageManager"),(0,l.traceInfo)(`Using system default package manager: ${c.DEFAULT_PACKAGE_MANAGER_ID}`),c.DEFAULT_PACKAGE_MANAGER_ID):a},t.setAllManagerSettings=async function(e){const t=[],n=new Map;e.filter((e=>!!e.project)).map((e=>e)).forEach((e=>{const r=s.workspace.getWorkspaceFolder(e.project.uri);r?n.set(r,[...n.get(r)||[],{project:e.project,envManager:e.envManager,packageManager:e.packageManager}]):t.push({project:e.project,envManager:e.envManager,packageManager:e.packageManager})})),t.forEach((e=>{e.project&&(0,l.traceInfo)(`Unable to find workspace for ${e.project.uri.fsPath}, will use global settings for this.`)}));const r=(0,u.getWorkspaceFile)(),i=[];n.forEach(((e,t)=>{const n=s.workspace.getConfiguration("python-envs",t),a=n.get("pythonProjects",[]);e.forEach((e=>{const c=o.normalize(e.project.uri.fsPath),l=a.findIndex((e=>o.resolve(t.uri.fsPath,e.path)===c));l>=0?(a[l].envManager=e.envManager,a[l].packageManager=e.packageManager):r?a.push({path:o.relative(t.uri.fsPath,c).replace(/\\/g,"/"),envManager:e.envManager,packageManager:e.packageManager}):(n.get("defaultEnvManager")!==e.envManager&&i.push(n.update("defaultEnvManager",e.envManager,s.ConfigurationTarget.Workspace)),n.get("defaultPackageManager")!==e.packageManager&&i.push(n.update("defaultPackageManager",e.packageManager,s.ConfigurationTarget.Workspace)))})),i.push(n.update("pythonProjects",a,r?s.ConfigurationTarget.WorkspaceFolder:s.ConfigurationTarget.Workspace))}));const a=s.workspace.getConfiguration("python-envs",void 0);e.filter((e=>!e.project)).forEach((e=>{a.get("defaultEnvManager")!==e.envManager&&i.push(a.update("defaultEnvManager",e.envManager,s.ConfigurationTarget.Global)),a.get("defaultPackageManager")!==e.packageManager&&i.push(a.update("defaultPackageManager",e.packageManager,s.ConfigurationTarget.Global))})),await Promise.all(i)},t.setEnvironmentManager=async function(e){const t=[],n=new Map;e.filter((e=>!!e.project)).map((e=>e)).forEach((e=>{const r=s.workspace.getWorkspaceFolder(e.project.uri);r?n.set(r,[...n.get(r)||[],{project:e.project,envManager:e.envManager}]):t.push({project:e.project,envManager:e.envManager})})),t.forEach((e=>{e.project&&(0,l.traceError)(`Unable to find workspace for ${e.project.uri.fsPath}`)}));const r=[];n.forEach(((e,t)=>{const n=s.workspace.getConfiguration("python-envs",t.uri),i=n.get("pythonProjects",[]);e.forEach((e=>{const a=o.normalize(e.project.uri.fsPath),c=i.findIndex((e=>o.resolve(t.uri.fsPath,e.path)===a));c>=0?i[c].envManager=e.envManager:n.get("defaultEnvManager")!==e.envManager&&r.push(n.update("defaultEnvManager",e.envManager,s.ConfigurationTarget.Workspace))})),r.push(n.update("pythonProjects",i,s.ConfigurationTarget.Workspace))}));const i=s.workspace.getConfiguration("python-envs",void 0);e.filter((e=>!e.project)).forEach((e=>{i.get("defaultEnvManager")!==e.envManager&&r.push(i.update("defaultEnvManager",e.envManager,s.ConfigurationTarget.Global))})),await Promise.all(r)},t.setPackageManager=async function(e){const t=[],n=new Map;e.filter((e=>!!e.project)).map((e=>e)).forEach((e=>{const r=s.workspace.getWorkspaceFolder(e.project.uri);r?n.set(r,[...n.get(r)||[],{project:e.project,packageManager:e.packageManager}]):t.push({project:e.project,packageManager:e.packageManager})})),t.forEach((e=>{e.project&&(0,l.traceError)(`Unable to find workspace for ${e.project.uri.fsPath}`)}));const r=[];n.forEach(((e,t)=>{const n=s.workspace.getConfiguration("python-envs",t.uri),i=n.get("pythonProjects",[]);e.forEach((e=>{const a=o.normalize(e.project.uri.fsPath),c=i.findIndex((e=>o.resolve(t.uri.fsPath,e.path)===a));c>=0?i[c].packageManager=e.packageManager:n.get("defaultPackageManager")!==e.packageManager&&r.push(n.update("defaultPackageManager",e.packageManager,s.ConfigurationTarget.Workspace))})),r.push(n.update("pythonProjects",i,s.ConfigurationTarget.Workspace))}));const i=s.workspace.getConfiguration("python-envs",void 0);e.filter((e=>!e.project)).forEach((e=>{i.get("defaultPackageManager")!==e.packageManager&&r.push(i.update("defaultPackageManager",e.packageManager,s.ConfigurationTarget.Global))})),await Promise.all(r)},t.addPythonProjectSetting=async function(e){const t=[],n=new Map,r=s.workspace.getConfiguration("python-envs",void 0),i=r.get("defaultEnvManager",c.DEFAULT_ENV_MANAGER_ID),a=r.get("defaultPackageManager",c.DEFAULT_PACKAGE_MANAGER_ID);e.forEach((e=>{const r=s.workspace.getWorkspaceFolder(e.project.uri);r?n.set(r,[...n.get(r)||[],e]):t.push(e)})),t.forEach((e=>{(0,l.traceError)(`Unable to find workspace for ${e.project.uri.fsPath}`)}));const h=((0,u.getWorkspaceFolders)()??[]).length>1,d=[];n.forEach(((e,t)=>{const n=s.workspace.getConfiguration("python-envs",t.uri),r=n.get("pythonProjects",[]);e.forEach((e=>{const n=o.normalize(e.project.uri.fsPath),s=r.findIndex((e=>e.workspace?e.workspace===t.name&&o.resolve(t.uri.fsPath,e.path)===n:o.resolve(t.uri.fsPath,e.path)===n));s>=0?(r[s].envManager=e.envManager??i,r[s].packageManager=e.packageManager??a):r.push({path:o.relative(t.uri.fsPath,n).replace(/\\/g,"/"),envManager:i,packageManager:a,workspace:h?t.name:void 0})})),d.push(n.update("pythonProjects",r,s.ConfigurationTarget.Workspace))})),await Promise.all(d)},t.removePythonProjectSetting=async function(e){const t=[],n=new Map;e.forEach((e=>{const r=s.workspace.getWorkspaceFolder(e.project.uri);r?n.set(r,[...n.get(r)||[],e]):t.push(e)})),t.forEach((e=>{(0,l.traceError)(`Unable to find workspace for ${e.project.uri.fsPath}`)}));const r=[];n.forEach(((e,t)=>{const n=s.workspace.getConfiguration("python-envs",t.uri),i=n.get("pythonProjects",[]);e.forEach((e=>{const n=o.normalize(e.project.uri.fsPath),r=i.findIndex((e=>o.resolve(t.uri.fsPath,e.path)===n));r>=0&&i.splice(r,1)})),0===i.length?r.push(n.update("pythonProjects",void 0,s.ConfigurationTarget.Workspace)):r.push(n.update("pythonProjects",i,s.ConfigurationTarget.Workspace))})),await Promise.all(r)},t.getSettingWindowScope=function(e,t){const n=(0,u.getConfiguration)(e).inspect(t);if(!n)return;const r=n;return"globalRemoteValue"in n&&void 0!==r.globalRemoteValue?r.globalRemoteValue:"globalLocalValue"in n&&void 0!==r.globalLocalValue?r.globalLocalValue:void 0!==n.globalValue?n.globalValue:void 0},t.getSettingWorkspaceScope=function(e,t,n){const r=(0,u.getConfiguration)(e,n).inspect(t);if(r)return void 0!==r.workspaceFolderValue?r.workspaceFolderValue:void 0!==r.workspaceValue?r.workspaceValue:void 0!==r.globalValue?r.globalValue:void 0},t.getSettingUserScope=function(e,t){const n=(0,u.getConfiguration)(e).inspect(t);if(n)return void 0!==n.globalValue?n.globalValue:void 0}},8929:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setActivateMenuButtonContext=void 0;const r=n(6688),i=n(5151),a=n(534);t.setActivateMenuButtonContext=async function(e,t,n){const o=!(0,a.isTaskTerminal)(e)&&(0,r.isActivatableEnvironment)(t);await(0,i.executeCommand)("setContext","pythonTerminalActivation",o),void 0!==n&&await(0,i.executeCommand)("setContext","pythonTerminalActivated",n)}},1609:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runInTerminal=void 0;const r=n(4047),i=n(675),a=n(11),o=n(5158),s=n(2189);t.runInTerminal=async function(e,t,n){n.show&&t.show();let c=e.execInfo?.activatedRun?.executable??e.execInfo?.run.executable??"python";const l=[...e.execInfo?.activatedRun?.args??e.execInfo?.run.args??[],...n.args??[]],u=(0,o.identifyTerminalShell)(t);if(t.shellIntegration){let e;const n=(0,r.createDeferred)(),o=(0,i.onDidEndTerminalShellExecution)((t=>{t.execution===e&&(o.dispose(),n.resolve())}));c.includes(" ")&&!c.startsWith('"')&&!c.endsWith('"')&&(c=`"${c}"`),u!==a.ShellConstants.PWSH||c.startsWith("&")||(c=`& ${c}`),e=t.shellIntegration.executeCommand(c,l),await n.promise}else{let e=(0,s.quoteArgs)([c,...l]).join(" ");u!==a.ShellConstants.PWSH||e.startsWith("&")||(e=`& ${e}`),t.sendText(`${e}\n`)}}},2328:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShellStartupActivationVariablesManagerImpl=void 0;const r=n(2341),i=n(7422),a=n(534);t.ShellStartupActivationVariablesManagerImpl=class{constructor(e,t,n){this.envCollection=e,this.shellEnvsProviders=t,this.api=n,this.disposables=[],this.envCollection.description=r.ActivationStrings.envCollectionDescription,this.disposables.push((0,i.onDidChangeConfiguration)((async e=>{await this.handleConfigurationChange(e)})),this.api.onDidChangeEnvironment((async e=>{await this.handleEnvironmentChange(e)})))}async handleConfigurationChange(e){if(e.affectsConfiguration("python-envs.terminal.autoActivationType"))if((0,a.getAutoActivationType)()===a.ACT_TYPE_SHELL)await this.initializeInternal();else{const e=(0,i.getWorkspaceFolders)()??[];e.length>0?e.forEach((e=>{const t=this.envCollection.getScoped({workspaceFolder:e});this.shellEnvsProviders.forEach((e=>e.removeEnvVariables(t)))})):this.shellEnvsProviders.forEach((e=>e.removeEnvVariables(this.envCollection)))}}async handleEnvironmentChange(e){if((0,a.getAutoActivationType)()===a.ACT_TYPE_SHELL&&e.uri){const t=(0,i.getWorkspaceFolder)(e.uri);if(t){const n=this.envCollection.getScoped({workspaceFolder:t});n&&this.shellEnvsProviders.forEach((t=>{e.new?t.updateEnvVariables(n,e.new):t.removeEnvVariables(n)}))}}}async initializeInternal(){const e=(0,i.getWorkspaceFolders)()??[];if(e.length>0){const t=[];e.forEach((e=>{const n=this.envCollection.getScoped({workspaceFolder:e});t.push(...this.shellEnvsProviders.map((async t=>{const r=await this.api.getEnvironment(e.uri);r?t.updateEnvVariables(n,r):t.removeEnvVariables(n)})))})),await Promise.all(t)}else{const e=await this.api.getEnvironment(void 0);await Promise.all(this.shellEnvsProviders.map((async t=>{e?t.updateEnvVariables(this.envCollection,e):t.removeEnvVariables(this.envCollection)})))}}async initialize(){(0,a.getAutoActivationType)()===a.ACT_TYPE_SHELL&&await this.initializeInternal()}dispose(){this.disposables.forEach((e=>e.dispose()))}}},2278:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cleanupStartupScripts=t.handleSettingUpShellProfile=void 0;const r=n(1398),i=n(5151),a=n(2341),o=n(853),s=n(675),c=n(8331),l=n(534);t.handleSettingUpShellProfile=async function(e,t){const n=e.map((e=>e.shellType)).join(", ");await(0,s.showInformationMessage)(r.l10n.t('To enable "{0}" activation, your shell profile(s) may need to be updated to include the necessary startup scripts. Would you like to proceed with these changes?',l.ACT_TYPE_SHELL),{modal:!0,detail:r.l10n.t("Shells: {0}",n)},a.Common.yes)===a.Common.yes&&((0,o.traceVerbose)(`User chose to set up shell profiles for ${n} shells`),(await(0,s.withProgress)({location:r.ProgressLocation.Notification,title:r.l10n.t("Setting up shell profiles for {0}",n)},(async()=>(await Promise.all(e.map((e=>e.setupScripts())))).filter((e=>e!==c.ShellScriptEditState.NotInstalled))))).every((e=>e===c.ShellScriptEditState.Edited))?(setImmediate((async()=>{await(0,s.showInformationMessage)(r.l10n.t("Shell profiles have been set up successfully. Extension will use shell startup activation next time a new terminal is created."))})),e.forEach((e=>t(e,!0)))):(setImmediate((async()=>{await(0,s.showErrorMessage)(r.l10n.t("Failed to set up shell profiles. Please check the output panel for more details."),a.Common.viewLogs)===a.Common.viewLogs&&await(0,i.executeCommand)("python-envs.viewLogs")})),e.forEach((e=>t(e,!1)))))},t.cleanupStartupScripts=async function(e){await Promise.all(e.map((e=>e.teardownScripts()))),(0,l.getAutoActivationType)()===l.ACT_TYPE_SHELL&&((0,l.setAutoActivationType)(l.ACT_TYPE_COMMAND),(0,o.traceInfo)("Setting `python-envs.terminal.autoActivationType` to `command`, after removing shell startup scripts.")),setImmediate((async()=>await(0,s.showInformationMessage)(a.ActivationStrings.revertedShellStartupScripts)))}},1861:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BASH_SCRIPT_VERSION=t.ZSH_OLD_ENV_KEY=t.BASH_OLD_ENV_KEY=t.ZSH_ENV_KEY=t.BASH_ENV_KEY=void 0,t.BASH_ENV_KEY="VSCODE_PYTHON_BASH_ACTIVATE",t.ZSH_ENV_KEY="VSCODE_PYTHON_ZSH_ACTIVATE",t.BASH_OLD_ENV_KEY="VSCODE_BASH_ACTIVATE",t.ZSH_OLD_ENV_KEY="VSCODE_ZSH_ACTIVATE",t.BASH_SCRIPT_VERSION="0.1.1"},1342:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZshEnvsProvider=t.BashEnvsProvider=void 0;const r=n(853),i=n(11),a=n(4774),o=n(1861);t.BashEnvsProvider=class{constructor(e){this.shellType=e}updateEnvVariables(e,t){try{const n=(0,a.getShellActivationCommand)(this.shellType,t);if(n){const t=(0,a.getShellCommandAsString)(this.shellType,n),r=e.get(o.BASH_ENV_KEY);if(r?.value===t)return;e.replace(o.BASH_ENV_KEY,t)}else e.delete(o.BASH_ENV_KEY)}catch(t){(0,r.traceError)(`Failed to update env variables for ${this.shellType}`,t),e.delete(o.BASH_ENV_KEY)}}removeEnvVariables(e){e.delete(o.BASH_ENV_KEY)}getEnvVariables(e){if(!e)return new Map([[o.BASH_ENV_KEY,void 0]]);try{const t=(0,a.getShellActivationCommand)(this.shellType,e);if(t){const e=(0,a.getShellCommandAsString)(this.shellType,t);return new Map([[o.BASH_ENV_KEY,e]])}return}catch(e){return void(0,r.traceError)(`Failed to get env variables for ${this.shellType}`,e)}}},t.ZshEnvsProvider=class{constructor(){this.shellType=i.ShellConstants.ZSH}updateEnvVariables(e,t){try{const n=(0,a.getShellActivationCommand)(this.shellType,t);if(n){const t=(0,a.getShellCommandAsString)(this.shellType,n),r=e.get(o.ZSH_ENV_KEY);if(r?.value===t)return;e.replace(o.ZSH_ENV_KEY,t)}else e.delete(o.ZSH_ENV_KEY)}catch(t){(0,r.traceError)("Failed to update env variables for zsh",t),e.delete(o.ZSH_ENV_KEY)}}removeEnvVariables(e){e.delete(o.ZSH_ENV_KEY)}getEnvVariables(e){if(!e)return new Map([[o.ZSH_ENV_KEY,void 0]]);try{const t=(0,a.getShellActivationCommand)(this.shellType,e);if(t){const e=(0,a.getShellCommandAsString)(this.shellType,t);return new Map([[o.ZSH_ENV_KEY,e]])}return}catch(e){return void(0,r.traceError)("Failed to get env variables for zsh",e)}}}},4909:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GitBashStartupProvider=t.ZshStartupProvider=t.BashStartupProvider=void 0;const s=a(n(1605)),c=a(n(857)),l=a(n(6928)),u=o(n(7242)),h=n(853),d=n(11),f=n(4056),p=n(4774),v=n(8331),m=n(1861);async function g(){const e=c.homedir();return l.join(e,".bashrc")}async function y(){const e=process.env.ZDOTDIR||c.homedir();return l.join(e,".zshrc")}const E="# >>> vscode python",w="# <<< vscode python";async function P(e,t){if(await s.pathExists(e)){const n=await s.readFile(e,"utf8");if((0,f.hasStartupCode)(n,E,w,[t]))return v.ShellSetupState.Setup}return v.ShellSetupState.NotSetup}async function _(e,t,n){if((await(0,p.getShellIntegrationEnabledCache)()||await(0,p.shellIntegrationForActiveTerminal)(n,e))&&!(0,p.isWsl)())return b(e,t),!0;const r=function(e){return[`# version: ${m.BASH_SCRIPT_VERSION}`,'if [ -z "$VSCODE_PYTHON_AUTOACTIVATE_GUARD" ]; then',"    export VSCODE_PYTHON_AUTOACTIVATE_GUARD=1",`    if [ -n "$${e}" ] && [ "$TERM_PROGRAM" = "vscode" ]; then`,`        eval "$${e}" || true`,"    fi","fi"].join("\n")}(t);try{if(await s.pathExists(e)){const i=await s.readFile(e,"utf8");(0,f.hasStartupCode)(i,E,w,[t])?(0,h.traceInfo)(`SHELL: ${n} profile already contains activation code at: ${e}`):(await s.writeFile(e,(0,f.insertStartupCode)(i,E,w,r)),(0,h.traceInfo)(`SHELL: Updated existing ${n} profile at: ${e}\n${r}`))}else await s.mkdirp(l.dirname(e)),await s.writeFile(e,(0,f.insertStartupCode)("",E,w,r)),(0,h.traceInfo)(`SHELL: Created new ${n} profile at: ${e}\n${r}`);return!0}catch(t){return(0,h.traceError)(`SHELL: Failed to setup startup for profile at: ${e}`,t),!1}}async function b(e,t){if(!await s.pathExists(e))return!0;try{const n=await s.readFile(e,"utf8");return(0,f.hasStartupCode)(n,E,w,[t])?(await s.writeFile(e,(0,f.removeStartupCode)(n,E,w)),(0,h.traceInfo)(`SHELL: Removed activation from profile at: ${e}, for key: ${t}`)):(0,h.traceVerbose)(`Profile at ${e} does not contain activation code, for key: ${t}`),!0}catch(n){return(0,h.traceVerbose)(`Failed to remove ${e} startup, for key: ${t}`,n),!1}}t.BashStartupProvider=class{constructor(){this.name="bash",this.shellType=d.ShellConstants.BASH}async checkShellInstalled(){const e=await async function(){return(await Promise.all([(0,u.default)("bash",{nothrow:!0}),(0,u.default)("sh",{nothrow:!0})])).some((e=>null!==e))}();return e||(0,h.traceInfo)("`bash` or `sh` was not found on the system","If it is installed make sure it is available on `PATH`"),e}async isSetup(){if(!await this.checkShellInstalled())return v.ShellSetupState.NotInstalled;try{const e=await g();return await P(e,m.BASH_ENV_KEY)}catch(e){return(0,h.traceError)("Failed to check bash startup scripts",e),v.ShellSetupState.NotSetup}}async setupScripts(){if(!await this.checkShellInstalled())return v.ShellScriptEditState.NotInstalled;try{const e=await g();return await _(e,m.BASH_ENV_KEY,this.name)?v.ShellScriptEditState.Edited:v.ShellScriptEditState.NotEdited}catch(e){return(0,h.traceError)("Failed to setup bash startup scripts",e),v.ShellScriptEditState.NotEdited}}async teardownScripts(){if(!await this.checkShellInstalled())return v.ShellScriptEditState.NotInstalled;try{const e=await g();return await b(e,m.BASH_OLD_ENV_KEY),await b(e,m.BASH_ENV_KEY)?v.ShellScriptEditState.Edited:v.ShellScriptEditState.NotEdited}catch(e){return(0,h.traceError)("Failed to teardown bash startup scripts",e),v.ShellScriptEditState.NotEdited}}clearCache(){return Promise.resolve()}},t.ZshStartupProvider=class{constructor(){this.name="zsh",this.shellType=d.ShellConstants.ZSH}async checkShellInstalled(){const e=await async function(){return null!==await(0,u.default)("zsh",{nothrow:!0})}();return e||(0,h.traceInfo)("`zsh` was not found on the system","If it is installed make sure it is available on `PATH`"),e}async isSetup(){if(!await this.checkShellInstalled())return v.ShellSetupState.NotInstalled;try{const e=await y();return await P(e,m.ZSH_ENV_KEY)}catch(e){return(0,h.traceError)("Failed to check zsh startup scripts",e),v.ShellSetupState.NotSetup}}async setupScripts(){if(!await this.checkShellInstalled())return v.ShellScriptEditState.NotInstalled;try{const e=await y();return await _(e,m.ZSH_ENV_KEY,this.name)?v.ShellScriptEditState.Edited:v.ShellScriptEditState.NotEdited}catch(e){return(0,h.traceError)("Failed to setup zsh startup scripts",e),v.ShellScriptEditState.NotEdited}}async teardownScripts(){if(!await this.checkShellInstalled())return v.ShellScriptEditState.NotInstalled;try{const e=await y();return await b(e,m.ZSH_OLD_ENV_KEY),await b(e,m.ZSH_ENV_KEY)?v.ShellScriptEditState.Edited:v.ShellScriptEditState.NotEdited}catch(e){return(0,h.traceError)("Failed to teardown zsh startup scripts",e),v.ShellScriptEditState.NotEdited}}clearCache(){return Promise.resolve()}},t.GitBashStartupProvider=class{constructor(){this.name="Git bash",this.shellType=d.ShellConstants.GITBASH}async checkShellInstalled(){const e=await async function(){const e=await(0,u.default)("git",{nothrow:!0});if(e){const t=l.join(l.dirname(l.dirname(e)),"bin","bash.exe");return await s.pathExists(t)}return!1}();return e||(0,h.traceInfo)("Git Bash was not found on the system","If it is installed make sure it is available on `PATH`"),e}async isSetup(){if(!await this.checkShellInstalled())return v.ShellSetupState.NotInstalled;try{const e=await g();return await P(e,m.BASH_ENV_KEY)}catch(e){return(0,h.traceError)("Failed to check git bash startup scripts",e),v.ShellSetupState.NotSetup}}async setupScripts(){if(!await this.checkShellInstalled())return v.ShellScriptEditState.NotInstalled;try{const e=await g();return await _(e,m.BASH_ENV_KEY,this.name)?v.ShellScriptEditState.Edited:v.ShellScriptEditState.NotEdited}catch(e){return(0,h.traceError)("Failed to setup git bash startup scripts",e),v.ShellScriptEditState.NotEdited}}async teardownScripts(){if(!await this.checkShellInstalled())return v.ShellScriptEditState.NotInstalled;try{const e=await g();return await b(e,m.BASH_OLD_ENV_KEY),await b(e,m.BASH_ENV_KEY)?v.ShellScriptEditState.Edited:v.ShellScriptEditState.NotEdited}catch(e){return(0,h.traceError)("Failed to teardown git bash startup scripts",e),v.ShellScriptEditState.NotEdited}}clearCache(){return Promise.resolve()}}},5055:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CMD_SCRIPT_VERSION=t.CMD_ENV_KEY=void 0,t.CMD_ENV_KEY="VSCODE_PYTHON_CMD_ACTIVATE",t.CMD_SCRIPT_VERSION="0.1.0"},6264:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CmdEnvsProvider=void 0;const r=n(853),i=n(11),a=n(4774),o=n(5055);t.CmdEnvsProvider=class{constructor(){this.shellType=i.ShellConstants.CMD}updateEnvVariables(e,t){try{const n=(0,a.getShellActivationCommand)(this.shellType,t);if(n){const t=(0,a.getShellCommandAsString)(this.shellType,n),r=e.get(o.CMD_ENV_KEY);if(r?.value===t)return;e.replace(o.CMD_ENV_KEY,t)}else e.delete(o.CMD_ENV_KEY)}catch(t){(0,r.traceError)("Failed to update CMD environment variables",t),e.delete(o.CMD_ENV_KEY)}}removeEnvVariables(e){e.delete(o.CMD_ENV_KEY)}getEnvVariables(e){if(!e)return new Map([[o.CMD_ENV_KEY,void 0]]);try{const t=(0,a.getShellActivationCommand)(this.shellType,e);return t?new Map([[o.CMD_ENV_KEY,(0,a.getShellCommandAsString)(this.shellType,t)]]):void 0}catch(e){return void(0,r.traceError)("Failed to get CMD environment variables",e)}}}},7351:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CmdStartupProvider=void 0;const s=a(n(5317)),c=a(n(1605)),l=a(n(857)),u=a(n(6928)),h=n(9023),d=o(n(7242)),f=n(853),p=n(6682),v=n(11),m=n(4056),g=n(8331),y=n(5055),E=n(9787);function w(e){const t=new E.StopWatch;return(0,h.promisify)(s.exec)(e,{windowsHide:!0}).finally((()=>(0,f.traceInfo)(`Executed command: ${e} in ${t.elapsedTime}`)))}async function P(){if(!(0,p.isWindows)())return!1;if(process.env.ComSpec&&await c.exists(process.env.ComSpec))return!0;try{return await(0,d.default)("cmd.exe",{nothrow:!0}),!0}catch{return!1}}async function _(){const e=process.env.USERPROFILE??l.homedir(),t=u.join(e,".cmdrc");return await c.ensureDir(t),{mainBatchFile:u.join(t,"cmd_startup.bat"),regMainBatchFile:u.join("%USERPROFILE%",".cmdrc","cmd_startup.bat"),mainName:"cmd_startup.bat",startupFile:u.join(t,"vscode-python.bat"),regStartupFile:u.join("%USERPROFILE%",".cmdrc","vscode-python.bat"),startupName:"vscode-python.bat"}}const b=":: >>> vscode python",S=":: <<< vscode python";t.CmdStartupProvider=class{constructor(){this.name="Command Prompt",this.shellType=v.ShellConstants.CMD}async isSetup(){if(!await P())return(0,f.traceVerbose)("CMD is not installed or not on Windows"),g.ShellSetupState.NotInstalled;try{const e=await _();return await async function(e,t){let n=!1;if(await c.pathExists(e.startupFile)){const r=await c.readFile(e.startupFile,"utf8");n=(0,m.hasStartupCode)(r,b,S,[t])}if(!n)return g.ShellSetupState.NotSetup;let r=!1;if(await c.pathExists(e.mainBatchFile)){const t=await c.readFile(e.mainBatchFile,"utf8");r=(0,m.hasStartupCode)(t,b,S,[e.startupName])}return r&&await async function(e,t){if(!(0,p.isWindows)())return!1;try{const{stdout:n}=await w('reg query "HKCU\\Software\\Microsoft\\Command Processor" /v AutoRun');return n.includes(t)||n.includes(e)}catch{return!1}}(e.regMainBatchFile,e.mainBatchFile)?g.ShellSetupState.Setup:g.ShellSetupState.NotSetup}(e,y.CMD_ENV_KEY)}catch(e){return(0,f.traceError)("Failed to check if CMD startup is setup",e),g.ShellSetupState.NotSetup}}async setupScripts(){if(!await P())return(0,f.traceVerbose)("CMD is not installed or not on Windows"),g.ShellScriptEditState.NotInstalled;try{const e=await _();return await async function(e,t){try{const n=function(e){return[`:: version: ${y.CMD_SCRIPT_VERSION}`,`if defined ${e} (`,`    call %${e}%`,")"].join("\r\n")}(t);if(await c.pathExists(e.startupFile)){const r=await c.readFile(e.startupFile,"utf8");(0,m.hasStartupCode)(r,b,S,[t])?(0,f.traceInfo)(`SHELL: CMD activation file at ${e.startupFile} already contains activation code`):(await c.writeFile(e.startupFile,(0,m.insertStartupCode)(r,b,S,n)),(0,f.traceInfo)(`SHELL: Updated existing CMD activation file at: ${e.startupFile}\r\n${n}`))}else await c.writeFile(e.startupFile,(0,m.insertStartupCode)(function(){const e=[];return e.push("@echo off"),e.push(":: startup used in HKCU\\Software\\Microsoft\\Command Processor key AutoRun"),e.push(""),e.join("\r\n")}(),b,S,n)),(0,f.traceInfo)(`SHELL: Created new CMD activation file at: ${e.startupFile}\r\n${n}`);const r=await async function(){if((0,p.isWindows)())try{const{stdout:e}=await w('reg query "HKCU\\Software\\Microsoft\\Command Processor" /v AutoRun'),t=e.match(/AutoRun\s+REG_SZ\s+(.*)/);if(t&&t[1])return t[1].trim()}catch{}}();if(await c.pathExists(e.mainBatchFile)){const t=await c.readFile(e.mainBatchFile,"utf8");if((0,m.hasStartupCode)(t,b,S,[e.startupName]))(0,f.traceInfo)(`SHELL: CMD main batch file at ${e.mainBatchFile} already contains our startup file`);else{const n=function(e){const t=[];return t.push('if "%TERM_PROGRAM%"=="vscode" ('),t.push("    if not defined VSCODE_PYTHON_AUTOACTIVATE_GUARD ("),t.push('        set "VSCODE_PYTHON_AUTOACTIVATE_GUARD=1"'),t.push(`        if exist "${e}" call "${e}"`),t.push("    )"),t.push(")"),t.join("\r\n")}(e.regStartupFile);await c.writeFile(e.mainBatchFile,(0,m.insertStartupCode)(t,b,S,n)),(0,f.traceInfo)(`SHELL: Updated existing main batch file at: ${e.mainBatchFile}\r\n${n}`)}}return r?.includes(e.regMainBatchFile)||r?.includes(e.mainBatchFile)?((0,f.traceInfo)("SHELL: CMD AutoRun registry key already contains our main batch file"),!0):await async function(e){if(!(0,p.isWindows)())return!1;try{return await w(`reg add "HKCU\\Software\\Microsoft\\Command Processor" /v AutoRun /t REG_SZ /d "if exist \\"${e}\\" call \\"${e}\\"" /f`),(0,f.traceInfo)(`Set CMD AutoRun registry key [HKCU\\Software\\Microsoft\\Command Processor] to call: ${e}`),!0}catch(e){return(0,f.traceError)("Failed to set CMD AutoRun registry key [HKCU\\Software\\Microsoft\\Command Processor]",e),!1}}(e.mainBatchFile)}catch(e){return(0,f.traceVerbose)("Failed to setup CMD startup",e),!1}}(e,y.CMD_ENV_KEY)?g.ShellScriptEditState.Edited:g.ShellScriptEditState.NotEdited}catch(e){return(0,f.traceError)("Failed to setup CMD startup",e),g.ShellScriptEditState.NotEdited}}async teardownScripts(){if(!await P())return(0,f.traceVerbose)("CMD is not installed or not on Windows"),g.ShellScriptEditState.NotInstalled;try{const{startupFile:e}=await _(),t=await async function(e,t){if(await c.pathExists(e))try{const n=await c.readFile(e,"utf8");(0,m.hasStartupCode)(n,b,S,[t])?(await c.writeFile(e,(0,m.removeStartupCode)(n,b,S)),(0,f.traceInfo)(`Removed activation from CMD activation file at: ${e}`)):(0,f.traceInfo)(`CMD activation file at ${e} does not contain activation code`)}catch(e){return(0,f.traceVerbose)("Failed to remove CMD activation file content",e),!1}return!0}(e,y.CMD_ENV_KEY);return t?g.ShellScriptEditState.Edited:g.ShellScriptEditState.NotEdited}catch(e){return(0,f.traceError)("Failed to remove CMD startup",e),g.ShellScriptEditState.NotEdited}}clearCache(){return Promise.resolve()}}},4056:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeStartupCode=t.insertStartupCode=t.hasStartupCode=void 0;const r=n(6682);function i(e){return e.includes("\r\n")?"\r\n":e.includes("\n")?"\n":(0,r.isWindows)()?"\r\n":"\n"}t.hasStartupCode=function(e,t,n,r){const i=e.replace(/\r\n/g,"\n"),a=i.indexOf(t),o=i.indexOf(n);if(-1===a||-1===o||a>=o)return!1;const s=i.substring(a+t.length,o).trim();return s.length>0&&r.every((e=>s.includes(e)))},t.insertStartupCode=function(e,t,n,r){let a=i(e);const o=e.replace(/\r\n/g,"\n"),s=o.indexOf(t),c=o.indexOf(n);let l;return l=-1!==s&&-1!==c&&s<c?o.substring(0,s+t.length)+"\n"+r+"\n"+o.substring(c):-1!==s?o.substring(0,s+t.length)+"\n"+r+"\n"+n+"\n":o+"\n"+t+"\n"+r+"\n"+n+"\n","\r\n"===a&&(l=l.replace(/\n/g,"\r\n")),l},t.removeStartupCode=function(e,t,n){let r=i(e);const a=e.replace(/\r\n/g,"\n"),o=a.indexOf(t),s=a.indexOf(n);if(-1!==o&&-1!==s&&o<s){const e=a.substring(0,o),t=a.substring(s+n.length);let i;return i=""===e?t.startsWith("\n")?t.substring(1):t:""===t||"\n"===t?e.endsWith("\n")?e.substring(0,e.length-1):e:t.startsWith("\n")&&e.endsWith("\n")?e+t.substring(1):e+t,"\r\n"===r&&(i=i.replace(/\n/g,"\r\n")),i}return e}},4774:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getShellIntegrationEnabledCache=t.isWsl=t.shellIntegrationForActiveTerminal=t.extractProfilePath=t.PROFILE_TAG_END=t.PROFILE_TAG_START=t.getShellDeactivationCommand=t.getShellActivationCommand=t.normalizeShellPath=t.getShellCommandAsString=t.SHELL_INTEGRATION_STATE_KEY=void 0;const r=n(853),i=n(578),a=n(933),o=n(6682),s=n(675),c=n(7422),l=n(11),u=n(2189),h=n(534);function d(e,t,n){const r=[];for(const n of e){const e=n.args??[];r.push((0,u.quoteArgs)([f(n.executable,t),...e]).join(" "))}return t===l.ShellConstants.PWSH?1===r.length?r[0]:r.map((e=>`(${e})`)).join(` ${n} `):r.join(` ${n} `)}function f(e,t){return(0,o.isWindows)()&&t&&(t.toLowerCase()===l.ShellConstants.GITBASH||"git-bash"===t.toLowerCase())?e.replace(/\\/g,"/").replace(/^\/([a-zA-Z])/,"$1:"):e}t.SHELL_INTEGRATION_STATE_KEY="shellIntegration.enabled",t.getShellCommandAsString=function(e,t){switch(e){case l.ShellConstants.PWSH:case l.ShellConstants.NU:return d(t,e,";");case l.ShellConstants.FISH:return d(t,e,"; and");case l.ShellConstants.BASH:case l.ShellConstants.SH:case l.ShellConstants.ZSH:case l.ShellConstants.CMD:case l.ShellConstants.GITBASH:default:return d(t,e,"&&")}},t.normalizeShellPath=f,t.getShellActivationCommand=function(e,t){let n;return t.execInfo?.shellActivation&&(n=t.execInfo.shellActivation.get(e),n||(n=t.execInfo.shellActivation.get("unknown"))),n||(n=t.execInfo?.activation),n},t.getShellDeactivationCommand=function(e,t){let n;return t.execInfo?.shellDeactivation&&(n=t.execInfo.shellDeactivation.get(e),n||(n=t.execInfo.shellDeactivation.get("unknown"))),n||(n=t.execInfo?.deactivation),n},t.PROFILE_TAG_START="###PATH_START###",t.PROFILE_TAG_END="###PATH_END###",t.extractProfilePath=function(e){const n=new RegExp(`${t.PROFILE_TAG_START}\\r?\\n(.*?)\\r?\\n${t.PROFILE_TAG_END}`,"s"),r=e?.match(n);if(r&&r[1])return r[1].trim()},t.shellIntegrationForActiveTerminal=async function(e,n){let o=(0,s.activeTerminalShellIntegration)(),c=0;for(;!o&&c<h.SHELL_INTEGRATION_TIMEOUT;)await(0,a.timeout)(h.SHELL_INTEGRATION_POLL_INTERVAL),c+=h.SHELL_INTEGRATION_POLL_INTERVAL,o=(0,s.activeTerminalShellIntegration)();if(o){(0,r.traceInfo)(`SHELL: Shell integration is available on your active terminal, with name ${e} and profile ${n}. Python activate scripts will be evaluated at shell integration level, except in WSL.`);const a=await(0,i.getGlobalPersistentState)();return await a.set(t.SHELL_INTEGRATION_STATE_KEY,!0),!0}return!1},t.isWsl=function(){return!!(process.env.WSL_DISTRO_NAME||process.env.WSL_INTEROP||process.env.WSLENV)},t.getShellIntegrationEnabledCache=async function(){const e=await(0,i.getGlobalPersistentState)(),n=(0,c.getConfiguration)("terminal.integrated").inspect("shellIntegration.enabled");let r=!0;if(n){const e=n;void 0!==n.workspaceFolderValue?r=n.workspaceFolderValue:void 0!==n.workspaceValue?r=n.workspaceValue:"globalRemoteValue"in n&&void 0!==e.globalRemoteValue?r=e.globalRemoteValue:"globalLocalValue"in n&&void 0!==e.globalLocalValue?r=e.globalLocalValue:void 0!==n.globalValue?r=n.globalValue:void 0!==n.defaultValue&&(r=n.defaultValue)}return await e.set(t.SHELL_INTEGRATION_STATE_KEY,r),r}},125:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FISH_SCRIPT_VERSION=t.FISH_OLD_ENV_KEY=t.FISH_ENV_KEY=void 0,t.FISH_ENV_KEY="VSCODE_PYTHON_FISH_ACTIVATE",t.FISH_OLD_ENV_KEY="VSCODE_FISH_ACTIVATE",t.FISH_SCRIPT_VERSION="0.1.1"},9670:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FishEnvsProvider=void 0;const r=n(853),i=n(11),a=n(4774),o=n(125);t.FishEnvsProvider=class{constructor(){this.shellType=i.ShellConstants.FISH}updateEnvVariables(e,t){try{const n=(0,a.getShellActivationCommand)(this.shellType,t);if(n){const t=(0,a.getShellCommandAsString)(this.shellType,n),r=e.get(o.FISH_ENV_KEY);if(r?.value===t)return;e.replace(o.FISH_ENV_KEY,t)}else e.delete(o.FISH_ENV_KEY)}catch(t){(0,r.traceError)("Failed to update Fish environment variables",t),e.delete(o.FISH_ENV_KEY)}}removeEnvVariables(e){e.delete(o.FISH_ENV_KEY)}getEnvVariables(e){if(!e)return new Map([[o.FISH_ENV_KEY,void 0]]);try{const t=(0,a.getShellActivationCommand)(this.shellType,e);return t?new Map([[o.FISH_ENV_KEY,(0,a.getShellCommandAsString)(this.shellType,t)]]):void 0}catch(e){return void(0,r.traceError)("Failed to get Fish environment variables",e)}}}},4981:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FishStartupProvider=void 0;const s=a(n(1605)),c=a(n(857)),l=a(n(6928)),u=o(n(7242)),h=n(853),d=n(11),f=n(4056),p=n(4774),v=n(8331),m=n(125);async function g(){try{return await(0,u.default)("fish"),!0}catch{return(0,h.traceVerbose)("Fish is not installed or not found in PATH"),!1}}async function y(){const e=c.homedir(),t=l.join(e,".config","fish","config.fish");return(0,h.traceInfo)(`SHELL: fish profile found at: ${t}`),t}const E="# >>> vscode python",w="# <<< vscode python";async function P(e,t){if(!await s.pathExists(e))return!0;try{const n=await s.readFile(e,"utf8");return(0,f.hasStartupCode)(n,E,w,[t])&&(await s.writeFile(e,(0,f.removeStartupCode)(n,E,w)),(0,h.traceInfo)(`Removed activation from fish profile at: ${e}, for key: ${t}`)),!0}catch(e){return(0,h.traceVerbose)(`Failed to remove fish startup, for key: ${t}`,e),!1}}t.FishStartupProvider=class{constructor(){this.name="fish",this.shellType=d.ShellConstants.FISH}async isSetup(){if(!await g())return(0,h.traceVerbose)("Fish is not installed"),v.ShellSetupState.NotInstalled;try{const e=await y();return await async function(e,t){if(await s.pathExists(e)){const n=await s.readFile(e,"utf8");if((0,f.hasStartupCode)(n,E,w,[t]))return(0,h.traceInfo)(`SHELL: fish already contains activation code: ${e}`),!0}return(0,h.traceInfo)(`SHELL: fish does not contain activation code: ${e}`),!1}(e,m.FISH_ENV_KEY)?v.ShellSetupState.Setup:v.ShellSetupState.NotSetup}catch(e){return(0,h.traceError)("Failed to check if Fish startup is setup",e),v.ShellSetupState.NotSetup}}async setupScripts(){if(!await g())return(0,h.traceVerbose)("Fish is not installed"),v.ShellScriptEditState.NotInstalled;try{const e=await y();return await async function(e,t){try{if((await(0,p.getShellIntegrationEnabledCache)()||await(0,p.shellIntegrationForActiveTerminal)("fish",e))&&!(0,p.isWsl)())return P(e,t),!0;const n=function(e){return[`# version: ${m.FISH_SCRIPT_VERSION}`,"if not set -q VSCODE_PYTHON_AUTOACTIVATE_GUARD","    set -gx VSCODE_PYTHON_AUTOACTIVATE_GUARD 1",`    if test "$TERM_PROGRAM" = "vscode"; and set -q ${e}`,`        eval $${e}`,"    end","end"].join("\n")}(t);if(await s.mkdirp(l.dirname(e)),await s.pathExists(e)){const r=await s.readFile(e,"utf8");(0,f.hasStartupCode)(r,E,w,[t])?(0,h.traceInfo)(`SHELL: Fish profile at ${e} already contains activation code`):(await s.writeFile(e,(0,f.insertStartupCode)(r,E,w,n)),(0,h.traceInfo)(`SHELL: Updated existing fish profile at: ${e}\n${n}`))}else await s.writeFile(e,(0,f.insertStartupCode)("",E,w,n)),(0,h.traceInfo)(`SHELL: Created new fish profile at: ${e}\n${n}`);return!0}catch(e){return(0,h.traceVerbose)("Failed to setup fish startup",e),!1}}(e,m.FISH_ENV_KEY)?v.ShellScriptEditState.Edited:v.ShellScriptEditState.NotEdited}catch(e){return(0,h.traceError)("Failed to setup Fish startup",e),v.ShellScriptEditState.NotEdited}}async teardownScripts(){if(!await g())return(0,h.traceVerbose)("Fish is not installed"),v.ShellScriptEditState.NotInstalled;try{const e=await y();return await P(e,m.FISH_OLD_ENV_KEY),await P(e,m.FISH_ENV_KEY)?v.ShellScriptEditState.Edited:v.ShellScriptEditState.NotEdited}catch(e){return(0,h.traceError)("Failed to remove Fish startup",e),v.ShellScriptEditState.NotEdited}}clearCache(){return Promise.resolve()}}},6153:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearShellProfileCache=t.createShellEnvProviders=t.createShellStartupProviders=void 0;const r=n(6682),i=n(11),a=n(1342),o=n(4909),s=n(6264),c=n(7351),l=n(9670),u=n(4981),h=n(6962),d=n(6713);t.createShellStartupProviders=function(){return(0,r.isWindows)()?[new d.PwshStartupProvider([i.ShellConstants.PWSH,"powershell"]),new o.GitBashStartupProvider,new c.CmdStartupProvider]:[new d.PwshStartupProvider([i.ShellConstants.PWSH]),new o.BashStartupProvider,new u.FishStartupProvider,new o.ZshStartupProvider]},t.createShellEnvProviders=function(){return(0,r.isWindows)()?[new h.PowerShellEnvsProvider,new a.BashEnvsProvider(i.ShellConstants.GITBASH),new s.CmdEnvsProvider]:[new h.PowerShellEnvsProvider,new a.BashEnvsProvider(i.ShellConstants.BASH),new l.FishEnvsProvider,new a.ZshEnvsProvider]},t.clearShellProfileCache=async function(e){await Promise.all(e.map((e=>e.clearCache())))}},9265:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PWSH_SCRIPT_VERSION=t.POWERSHELL_OLD_ENV_KEY=t.POWERSHELL_ENV_KEY=void 0,t.POWERSHELL_ENV_KEY="VSCODE_PYTHON_PWSH_ACTIVATE",t.POWERSHELL_OLD_ENV_KEY="VSCODE_PWSH_ACTIVATE",t.PWSH_SCRIPT_VERSION="0.1.1"},6962:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PowerShellEnvsProvider=void 0;const r=n(853),i=n(11),a=n(4774),o=n(9265);t.PowerShellEnvsProvider=class{constructor(){this.shellType=i.ShellConstants.PWSH}updateEnvVariables(e,t){try{const n=(0,a.getShellActivationCommand)(this.shellType,t);if(n){const t=(0,a.getShellCommandAsString)(this.shellType,n),r=e.get(o.POWERSHELL_ENV_KEY);if(r?.value===t)return;e.replace(o.POWERSHELL_ENV_KEY,t)}else e.delete(o.POWERSHELL_ENV_KEY)}catch(t){(0,r.traceError)("Failed to update PowerShell environment variables",t),e.delete(o.POWERSHELL_ENV_KEY)}}removeEnvVariables(e){e.delete(o.POWERSHELL_ENV_KEY)}getEnvVariables(e){if(!e)return new Map([[o.POWERSHELL_ENV_KEY,void 0]]);try{const t=(0,a.getShellActivationCommand)(this.shellType,e);return t?new Map([[o.POWERSHELL_ENV_KEY,(0,a.getShellCommandAsString)(this.shellType,t)]]):void 0}catch(e){return void(0,r.traceError)("Failed to get PowerShell environment variables",e)}}}},6713:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PwshStartupProvider=void 0;const s=a(n(1605)),c=a(n(857)),l=a(n(6928)),u=o(n(7242)),h=n(853),d=n(6682),f=n(8331),p=n(1618),v=o(n(2613)),m=n(578),g=n(11),y=n(4056),E=n(4774),w=n(9265);let P,_;async function b(e){const t=function(e){return"powershell"===e?_:P}(e);if(t)return(0,h.traceInfo)(`SHELL: ${e} profile path from cache: ${t}`),t;try{const t=await(0,p.runCommand)((0,d.isWindows)()?`${e} -Command "Write-Output '${E.PROFILE_TAG_START}'; Write-Output $profile; Write-Output '${E.PROFILE_TAG_END}'"`:`${e} -Command "Write-Output '${E.PROFILE_TAG_START}'; Write-Output \\$profile; Write-Output '${E.PROFILE_TAG_END}'"`);if(t){const n=(0,E.extractProfilePath)(t);if(n)return async function(e,t){const n=await(0,m.getWorkspacePersistentState)();"powershell"===e?(_=t,await n.set("PS5_PROFILE_PATH_CACHE",t)):(P=t,await n.set("PWSH_PROFILE_PATH_CACHE",t))}(e,n),(0,h.traceInfo)(`SHELL: ${e} profile found at: ${n}`),n}}catch(t){(0,h.traceError)(`${e} failed to get profile path`,t)}let n;return n=(0,d.isWindows)()?"powershell"===e?l.join(process.env.USERPROFILE||c.homedir(),"Documents","WindowsPowerShell","Microsoft.PowerShell_profile.ps1"):l.join(process.env.USERPROFILE||c.homedir(),"Documents","PowerShell","Microsoft.PowerShell_profile.ps1"):l.join(process.env.HOME||c.homedir(),".config","powershell","Microsoft.PowerShell_profile.ps1"),(0,h.traceInfo)(`SHELL: ${e} profile not found, using default path: ${n}`),n}const S="#region vscode python",C="#endregion vscode python";async function T(e,t){if(await s.pathExists(t)){const n=await s.readFile(t,"utf8");if((0,y.hasStartupCode)(n,S,C,[w.POWERSHELL_ENV_KEY]))return(0,h.traceInfo)(`SHELL: ${e} already contains activation code: ${t}`),!0}return(0,h.traceInfo)(`SHELL: ${e} does not contain activation code: ${t}`),!1}async function I(e,t){if((await(0,E.getShellIntegrationEnabledCache)()||await(0,E.shellIntegrationForActiveTerminal)(e,t))&&!(0,E.isWsl)())return k(e,t,w.POWERSHELL_OLD_ENV_KEY),k(e,t,w.POWERSHELL_ENV_KEY),!0;const n=function(){const e=(0,d.isWindows)()?"\r\n":"\n";return[`#version: ${w.PWSH_SCRIPT_VERSION}`,"if (-not $env:VSCODE_PYTHON_AUTOACTIVATE_GUARD) {","    $env:VSCODE_PYTHON_AUTOACTIVATE_GUARD = '1'",`    if (($env:TERM_PROGRAM -eq 'vscode') -and ($null -ne $env:${w.POWERSHELL_ENV_KEY})) {`,"        try {",`            Invoke-Expression $env:${w.POWERSHELL_ENV_KEY}`,"        } catch {","            $psVersion = $PSVersionTable.PSVersion.Major",'            Write-Error "Failed to activate Python environment (PowerShell $psVersion): $_" -ErrorAction Continue',"        }","    }","}"].join(e)}();try{if(await s.pathExists(t)){const r=await s.readFile(t,"utf8");(0,y.hasStartupCode)(r,S,C,[w.POWERSHELL_ENV_KEY])?(0,h.traceInfo)(`SHELL: ${e} already contains activation code: ${t}`):(await s.writeFile(t,(0,y.insertStartupCode)(r,S,C,n)),(0,h.traceInfo)(`SHELL: Updated existing ${e} profile at: ${t}\r\n${n}`))}else await s.mkdirp(l.dirname(t)),await s.writeFile(t,(0,y.insertStartupCode)("",S,C,n)),(0,h.traceInfo)(`SHELL: Created new ${e} profile at: ${t}\r\n${n}`);return!0}catch(t){return(0,h.traceError)(`Failed to setup ${e} startup`,t),!1}}async function k(e,t,n){if(!await s.pathExists(t))return!0;try{const r=await s.readFile(t,"utf8");return(0,y.hasStartupCode)(r,S,C,[n])?(await s.writeFile(t,(0,y.removeStartupCode)(r,S,C)),(0,h.traceInfo)(`SHELL: Removed activation from ${e} profile at: ${t}, for key: ${n}`)):(0,h.traceInfo)(`SHELL: No activation code found in ${e} profile at: ${t}, for key: ${n}`),!0}catch(r){return(0,h.traceError)(`SHELL: Failed to remove startup code for ${e} profile at: ${t}, for key: ${n}`,r),!1}}t.PwshStartupProvider=class{constructor(e){this.name="PowerShell",this.shellType=g.ShellConstants.PWSH,(0,v.default)(e.length>0,"At least one PowerShell shell must be supported"),this._supportedShells=e}async checkInstallations(){const e=new Map;return await Promise.all(this._supportedShells.map((async t=>{if("pwsh"===t&&void 0!==this._isPwshInstalled)e.set(t,this._isPwshInstalled);else if("powershell"===t&&void 0!==this._isPs5Installed)e.set(t,this._isPs5Installed);else{const n=await async function(e){try{return await(0,u.default)(e),!0}catch{return(0,h.traceVerbose)(`${e} is not installed`),!1}}(t);if(n){const e=await async function(e){try{const t=`${e} -c '$PSVersionTable.PSVersion.Major'`,n=await(0,p.runCommand)(t);return n&&!isNaN(Number(n))?n:void(0,h.traceVerbose)(`Failed to parse PowerShell version from output: ${n}`)}catch(t){return void(0,h.traceVerbose)(`Failed to get PowerShell version for ${e}`,t)}}(t),n=e?` (version ${e})`:" (version unknown)";(0,h.traceInfo)(`SHELL: ${t} is installed${n}`)}"pwsh"===t?this._isPwshInstalled=n:this._isPs5Installed=n,e.set(t,n)}}))),e}async isSetup(){const e=await this.checkInstallations();if(Array.from(e.values()).every((e=>!e)))return f.ShellSetupState.NotInstalled;const t=[];for(const[n,r]of e.entries())if(r)try{const e=await b(n),r=await T(n,e);t.push(r?f.ShellSetupState.Setup:f.ShellSetupState.NotSetup)}catch(e){(0,h.traceError)(`Failed to check if ${n} startup is setup`,e),t.push(f.ShellSetupState.NotSetup)}return t.includes(f.ShellSetupState.NotSetup)?f.ShellSetupState.NotSetup:f.ShellSetupState.Setup}async setupScripts(){const e=await this.checkInstallations();if(Array.from(e.values()).every((e=>!e)))return f.ShellScriptEditState.NotInstalled;const t=[];for(const[n,r]of e.entries())if(r)try{const e=await b(n),r=await I(n,e);t.push(r?f.ShellScriptEditState.Edited:f.ShellScriptEditState.NotEdited)}catch(e){(0,h.traceError)(`Failed to setup ${n} startup`,e)}return t.every((e=>e===f.ShellScriptEditState.Edited))?f.ShellScriptEditState.Edited:f.ShellScriptEditState.NotEdited}async teardownScripts(){const e=await this.checkInstallations();if(Array.from(e.values()).every((e=>!e)))return f.ShellScriptEditState.NotInstalled;const t=[];for(const[n,r]of e.entries())if(r)try{const e=await b(n);await k(n,e,w.POWERSHELL_OLD_ENV_KEY);const r=await k(n,e,w.POWERSHELL_ENV_KEY);t.push(r?f.ShellScriptEditState.Edited:f.ShellScriptEditState.NotEdited)}catch(e){(0,h.traceError)(`Failed to remove ${n} startup`,e)}return t.every((e=>e===f.ShellScriptEditState.Edited))?f.ShellScriptEditState.Edited:f.ShellScriptEditState.NotEdited}async clearCache(){_=void 0,P=void 0,this._isPwshInstalled=void 0,this._isPs5Installed=void 0}}},8331:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.ShellScriptEditState=t.ShellSetupState=void 0,function(e){e[e.NotSetup=0]="NotSetup",e[e.Setup=1]="Setup",e[e.NotInstalled=2]="NotInstalled"}(n||(t.ShellSetupState=n={})),function(e){e[e.NotEdited=0]="NotEdited",e[e.Edited=1]="Edited",e[e.NotInstalled=2]="NotInstalled"}(r||(t.ShellScriptEditState=r={}))},1618:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.runCommand=void 0;const o=a(n(5317)),s=n(853),c=n(9787);t.runCommand=async function(e){return new Promise((t=>{const n=new c.StopWatch;o.exec(e,((r,i)=>{r?((0,s.traceError)(`Error running command: ${e} (${n.elapsedTime})`,r),t(void 0)):((0,s.traceInfo)(`Ran ${e} in ${n.elapsedTime}`),t(i?.trim()))}))}))}},2870:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalActivationImpl=void 0;const r=n(1398),i=n(853),a=n(675),o=n(6688),s=n(534);t.TerminalActivationImpl=class{constructor(){this.disposables=[],this.onTerminalShellExecutionStartEmitter=new r.EventEmitter,this.onTerminalShellExecutionStart=this.onTerminalShellExecutionStartEmitter.event,this.onTerminalShellExecutionEndEmitter=new r.EventEmitter,this.onTerminalShellExecutionEnd=this.onTerminalShellExecutionEndEmitter.event,this.onDidChangeTerminalActivationStateEmitter=new r.EventEmitter,this.onDidChangeTerminalActivationState=this.onDidChangeTerminalActivationStateEmitter.event,this.onTerminalClosedEmitter=new r.EventEmitter,this.onTerminalClosed=this.onTerminalClosedEmitter.event,this.activatedTerminals=new Map,this.activatingTerminals=new Map,this.deactivatingTerminals=new Map,this.disposables.push(this.onDidChangeTerminalActivationStateEmitter,this.onTerminalShellExecutionStartEmitter,this.onTerminalShellExecutionEndEmitter,this.onTerminalClosedEmitter,(0,a.onDidStartTerminalShellExecution)((e=>{this.onTerminalShellExecutionStartEmitter.fire(e)})),(0,a.onDidEndTerminalShellExecution)((e=>{this.onTerminalShellExecutionEndEmitter.fire(e)})),this.onTerminalClosed((e=>{this.activatedTerminals.delete(e),this.activatingTerminals.delete(e),this.deactivatingTerminals.delete(e)})))}isActivated(e,t){if(!t)return this.activatedTerminals.has(e);const n=this.activatedTerminals.get(e);return n?.envId.id===t?.envId.id}getEnvironment(e){return this.activatedTerminals.get(e)}async activate(e,t){if((0,s.isTaskTerminal)(e))return void(0,i.traceVerbose)("Cannot activate environment in a task terminal");if(this.deactivatingTerminals.has(e))return(0,i.traceVerbose)("Terminal is being deactivated, cannot activate."),this.deactivatingTerminals.get(e);if(this.activatingTerminals.has(e))return(0,i.traceVerbose)("Terminal is being activated, skipping."),this.activatingTerminals.get(e);const n=this.activatedTerminals.get(e);if(n){if(n.envId.id===t.envId.id)return void(0,i.traceVerbose)("Terminal is already activated with the same environment");(0,i.traceInfo)(`Terminal is activated with a different environment, deactivating: ${n.environmentPath.fsPath}`),await this.deactivate(e)}try{const n=this.activateInternal(e,t);(0,i.traceVerbose)(`Activating terminal: ${t.environmentPath.fsPath}`),this.activatingTerminals.set(e,n),await n,this.activatingTerminals.delete(e),this.updateActivationState(e,t,!0),(0,i.traceInfo)(`Terminal is activated: ${t.environmentPath.fsPath}`)}catch(t){this.activatingTerminals.delete(e),(0,i.traceError)("Failed to activate environment:\r\n",t)}}async deactivate(e){if((0,s.isTaskTerminal)(e))return void(0,i.traceVerbose)("Cannot deactivate environment in a task terminal");if(this.activatingTerminals.has(e))return(0,i.traceVerbose)("Terminal is being activated, cannot deactivate."),this.activatingTerminals.get(e);if(this.deactivatingTerminals.has(e))return(0,i.traceVerbose)("Terminal is being deactivated, skipping."),this.deactivatingTerminals.get(e);const t=this.activatedTerminals.get(e);if(t)try{const n=this.deactivateInternal(e,t);(0,i.traceVerbose)(`Deactivating terminal: ${t.environmentPath.fsPath}`),this.deactivatingTerminals.set(e,n),await n,this.deactivatingTerminals.delete(e),this.updateActivationState(e,t,!1),(0,i.traceInfo)(`Terminal is deactivated: ${t.environmentPath.fsPath}`)}catch(t){this.deactivatingTerminals.delete(e),(0,i.traceError)("Failed to deactivate environment:\r\n",t)}else(0,i.traceVerbose)("Terminal is not activated")}updateActivationState(e,t,n){n?this.activatedTerminals.set(e,t):this.activatedTerminals.delete(e),setImmediate((()=>{this.onDidChangeTerminalActivationStateEmitter.fire({terminal:e,environment:t,activated:n})}))}dispose(){this.disposables.forEach((e=>e.dispose()))}async activateInternal(e,t){e.shellIntegration?await this.activateUsingShellIntegration(e.shellIntegration,e,t):this.activateLegacy(e,t)}async deactivateInternal(e,t){e.shellIntegration?await this.deactivateUsingShellIntegration(e.shellIntegration,e,t):this.deactivateLegacy(e,t)}activateLegacy(e,t){const n=(0,o.getActivationCommand)(e,t);n&&(e.sendText(n),this.activatedTerminals.set(e,t))}deactivateLegacy(e,t){const n=(0,o.getDeactivationCommand)(e,t);n&&(e.sendText(n),this.activatedTerminals.delete(e))}async activateUsingShellIntegration(e,t,n){const r=(0,o.getActivationCommand)(t,n);if(r)try{await this.executeTerminalShellCommandInternal(e,r),this.activatedTerminals.set(t,n)}catch{(0,i.traceError)("Failed to activate environment using shell integration")}else(0,i.traceVerbose)("No activation commands found for terminal.")}async deactivateUsingShellIntegration(e,t,n){const r=(0,o.getDeactivationCommand)(t,n);if(r)try{await this.executeTerminalShellCommandInternal(e,r),this.activatedTerminals.delete(t)}catch{(0,i.traceError)("Failed to deactivate environment using shell integration")}else(0,i.traceVerbose)("No deactivation commands found for terminal.")}async executeTerminalShellCommandInternal(e,t){const n=e.executeCommand(t),a=[],o=new Promise((e=>{const o=setTimeout((()=>{(0,i.traceError)(`Shell execution timed out: ${t}`),e()}),2e3);a.push(new r.Disposable((()=>clearTimeout(o))),this.onTerminalShellExecutionEnd((t=>{t.execution===n&&e()})),this.onTerminalShellExecutionStart((e=>{e.execution===n&&(0,i.traceVerbose)(`Shell execution started: ${t}`)})))}));try{return await o,!0}catch{return(0,i.traceError)(`Failed to execute shell command: ${t}`),!1}finally{a.forEach((e=>e.dispose()))}}}},5499:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalEnvVarInjector=void 0;const o=a(n(1605)),s=a(n(6928)),c=n(1398),l=n(853),u=n(4500),h=n(7422);t.TerminalEnvVarInjector=class{constructor(e,t){this.envVarCollection=e,this.envVarManager=t,this.disposables=[],this.initialize()}async initialize(){(0,l.traceVerbose)("TerminalEnvVarInjector: Initializing environment variable injection"),this.disposables.push(this.envVarManager.onDidChangeEnvironmentVariables((e=>{if(!e.uri)return void this.updateEnvironmentVariables().catch((e=>{(0,l.traceError)("Failed to update environment variables:",e)}));const t=(0,h.getWorkspaceFolder)(e.uri);if(!t)return void this.updateEnvironmentVariables().catch((e=>{(0,l.traceError)("Failed to update environment variables:",e)}));const n=(0,h.getConfiguration)("python",e.uri),r=n.get("terminal.useEnvFile",!1),i=n.get("envFile");!r&&i&&c.window.showInformationMessage('An environment file is configured but terminal environment injection is disabled. Enable "python.terminal.useEnvFile" to use environment variables from .env files in terminals.'),2===e.changeType?this.clearWorkspaceVariables(t):this.updateEnvironmentVariables(t).catch((e=>{(0,l.traceError)("Failed to update environment variables:",e)}))}))),this.disposables.push(c.workspace.onDidChangeConfiguration((e=>{e.affectsConfiguration("python.envFile")&&((0,l.traceVerbose)("TerminalEnvVarInjector: python.envFile setting changed, updating environment variables"),this.updateEnvironmentVariables().catch((e=>{(0,l.traceError)("Failed to update environment variables:",e)})))}))),await this.updateEnvironmentVariables()}async updateEnvironmentVariables(e){try{if(e)(0,l.traceVerbose)(`TerminalEnvVarInjector: Updating environment variables for workspace: ${e.uri.fsPath}`),await this.injectEnvironmentVariablesForWorkspace(e);else{const e=c.workspace.workspaceFolders;if(!e||0===e.length)return void(0,l.traceVerbose)("TerminalEnvVarInjector: No workspace folders found, skipping env var injection");(0,l.traceVerbose)("TerminalEnvVarInjector: Updating environment variables for all workspaces");for(const t of e)await this.injectEnvironmentVariablesForWorkspace(t)}(0,l.traceVerbose)("TerminalEnvVarInjector: Environment variable injection completed")}catch(e){(0,l.traceError)("TerminalEnvVarInjector: Error updating environment variables:",e)}}async injectEnvironmentVariablesForWorkspace(e){const t=e.uri;try{const n=await this.envVarManager.getEnvironmentVariables(t),r=this.getEnvironmentVariableCollectionScoped({workspaceFolder:e}),i=(0,h.getConfiguration)("python",t),a=i.get("terminal.useEnvFile",!1),c=i.get("envFile");if(!a)return void(0,l.traceVerbose)(`TerminalEnvVarInjector: Env file injection disabled for workspace: ${t.fsPath}`);const d=c?s.resolve((0,u.resolveVariables)(c,t)):void 0,f=s.join(t.fsPath,".env");let p=d||f;if(!p||!await o.pathExists(p))return void(0,l.traceVerbose)(`TerminalEnvVarInjector: No .env file found for workspace: ${t.fsPath}, not injecting environment variables.`);(0,l.traceVerbose)(`TerminalEnvVarInjector: Using env file: ${p}`);for(const[e,t]of Object.entries(n))void 0===t?r.delete(e):r.replace(e,t)}catch(e){(0,l.traceError)(`TerminalEnvVarInjector: Error injecting environment variables for workspace ${t.fsPath}:`,e)}}dispose(){(0,l.traceVerbose)("TerminalEnvVarInjector: Disposing"),this.disposables.forEach((e=>e.dispose())),this.disposables=[],this.envVarCollection.clear()}getEnvironmentVariableCollectionScoped(e={}){return this.envVarCollection.getScoped(e)}clearWorkspaceVariables(e){try{this.getEnvironmentVariableCollectionScoped({workspaceFolder:e}).clear()}catch(t){(0,l.traceError)(`Failed to clear environment variables for workspace ${e.uri.fsPath}:`,t)}}}},7416:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalManagerImpl=void 0;const o=a(n(1605)),s=a(n(6928)),c=n(1398),l=n(2341),u=n(853),h=n(675),d=n(7422),f=n(6688),p=n(5158),v=n(8940),m=n(4774),g=n(8331),y=n(2278),E=n(534);t.TerminalManagerImpl=class{constructor(e,t,n){this.ta=e,this.startupEnvProviders=t,this.startupScriptProviders=n,this.disposables=[],this.skipActivationOnOpen=new Set,this.shellSetup=new Map,this.onTerminalOpenedEmitter=new c.EventEmitter,this.onTerminalOpened=this.onTerminalOpenedEmitter.event,this.onTerminalClosedEmitter=new c.EventEmitter,this.onTerminalClosed=this.onTerminalClosedEmitter.event,this.onDidChangeTerminalActivationStateEmitter=new c.EventEmitter,this.onDidChangeTerminalActivationState=this.onDidChangeTerminalActivationStateEmitter.event,this.hasFocus=!0,this.dedicatedTerminals=new Map,this.projectTerminals=new Map,this.disposables.push(this.onTerminalOpenedEmitter,this.onTerminalClosedEmitter,this.onDidChangeTerminalActivationStateEmitter,(0,h.onDidOpenTerminal)((e=>{this.onTerminalOpenedEmitter.fire(e)})),(0,h.onDidCloseTerminal)((e=>{this.onTerminalClosedEmitter.fire(e)})),this.onTerminalOpened((async e=>{if(this.skipActivationOnOpen.has(e)||e.creationOptions?.hideFromUser)return;let t=this.ta.getEnvironment(e);if(!t){const n=await(0,v.getPythonApi)();t=await(0,E.getEnvironmentForTerminal)(n,e)}t&&await this.autoActivateOnTerminalOpen(e,t)})),this.onTerminalClosed((e=>{this.skipActivationOnOpen.delete(e)})),this.ta.onDidChangeTerminalActivationState((e=>{this.onDidChangeTerminalActivationStateEmitter.fire(e)})),(0,d.onDidChangeConfiguration)((async e=>{if(e.affectsConfiguration("python-envs.terminal.autoActivationType")){const e=(0,E.getAutoActivationType)();if(e===E.ACT_TYPE_SHELL){(0,u.traceInfo)(`Auto activation type changed to ${e}`);const t=new Set((0,h.terminals)().map((e=>(0,p.identifyTerminalShell)(e))).filter((e=>"unknown"!==e)));t.size>0&&await this.handleSetupCheck(t)}else(0,u.traceVerbose)(`Auto activation type changed to ${e}, we are cleaning up shell startup setup`),await Promise.all(this.startupScriptProviders.map((e=>e.teardownScripts()))),this.shellSetup.clear()}if(e.affectsConfiguration("terminal.integrated.shellIntegration.enabled")&&((0,u.traceInfo)("Shell integration setting changed, invalidating cache"),!await(0,m.getShellIntegrationEnabledCache)())){const e=new Set((0,h.terminals)().map((e=>(0,p.identifyTerminalShell)(e))).filter((e=>"unknown"!==e)));e.size>0&&await this.handleSetupCheck(e)}})),(0,h.onDidChangeWindowState)((e=>{this.hasFocus=e.focused})))}async handleSetupCheck(e){const t="string"==typeof e?new Set([e]):e,n=this.startupScriptProviders.filter((e=>t.has(e.shellType)));if(n.length>0){const e=[];if(await Promise.all(n.map((async t=>{const n=await t.isSetup(),r=await(0,m.getShellIntegrationEnabledCache)();(0,u.traceVerbose)(`Checking shell profile for ${t.shellType}, with state: ${n}`),n===g.ShellSetupState.NotSetup?((0,u.traceVerbose)(`WSL detected: ${(0,m.isWsl)()}, Shell integration available from setting, or active terminal: ${r}, or ${await(0,m.shellIntegrationForActiveTerminal)(t.name)}`),!r&&!await(0,m.shellIntegrationForActiveTerminal)(t.name)||(0,m.isWsl)()?(this.shellSetup.set(t.shellType,!1),e.push(t),(0,u.traceVerbose)(`Shell integration is NOT available. Shell profile for ${t.shellType} is not setup.`)):(await t.teardownScripts(),this.shellSetup.set(t.shellType,!0),(0,u.traceVerbose)(`Shell integration available for ${t.shellType} (not WSL), skipping prompt, and profile modification.`))):n===g.ShellSetupState.Setup?(!r&&!await(0,m.shellIntegrationForActiveTerminal)(t.name)||(0,m.isWsl)()||(await t.teardownScripts(),(0,u.traceVerbose)(`Shell integration available for ${t.shellType}, removed profile script in favor of shell integration.`)),this.shellSetup.set(t.shellType,!0),(0,u.traceVerbose)(`Shell profile for ${t.shellType} is setup.`)):n===g.ShellSetupState.NotInstalled&&(this.shellSetup.set(t.shellType,!1),(0,u.traceVerbose)(`Shell profile for ${t.shellType} is not installed.`))}))),0===e.length)return void(0,u.traceVerbose)(`No shell profiles to setup for ${Array.from(t).join(", ")}`);if(!this.hasFocus)return void(0,u.traceVerbose)("Window does not have focus, skipping shell profile setup");setImmediate((async()=>{await(0,y.handleSettingUpShellProfile)(e,((e,t)=>this.shellSetup.set(e.shellType,t)))}))}}getShellActivationType(e){let t=this.shellSetup.get(e);return!0===t?((0,u.traceVerbose)(`Shell profile for ${e} is already setup.`),E.ACT_TYPE_SHELL):!1===t?((0,u.traceVerbose)(`Shell profile for ${e} is not set up, using command fallback.`),E.ACT_TYPE_COMMAND):void 0}async getEffectiveActivationType(e){if(this.startupScriptProviders.filter((t=>t.shellType===e)).length>0){(0,u.traceVerbose)(`Shell startup is supported for ${e}, using shell startup activation`);let t=this.getShellActivationType(e);return void 0!==t?t:(await this.handleSetupCheck(e),this.getShellActivationType(e)??E.ACT_TYPE_COMMAND)}return(0,u.traceInfo)(`Shell startup not supported for ${e}, using command activation as fallback`),E.ACT_TYPE_COMMAND}async autoActivateOnTerminalOpen(e,t){let n=(0,E.getAutoActivationType)();const r=(0,p.identifyTerminalShell)(e);n===E.ACT_TYPE_SHELL&&(await this.handleSetupCheck(r),n=await this.getEffectiveActivationType(r)),n===E.ACT_TYPE_COMMAND?(0,f.isActivatableEnvironment)(t)?await(0,h.withProgress)({location:c.ProgressLocation.Window,title:`${l.ActivationStrings.activatingEnvironment}: ${t.environmentPath.fsPath}`},(async()=>{await(0,E.waitForShellIntegration)(e),await this.activate(e,t)})):(0,u.traceVerbose)(`Environment ${t.environmentPath.fsPath} is not activatable`):n===E.ACT_TYPE_OFF?(0,u.traceInfo)(`"python-envs.terminal.autoActivationType" is set to "${n}", skipping auto activation`):n===E.ACT_TYPE_SHELL&&(0,u.traceInfo)(`"python-envs.terminal.autoActivationType" is set to "${n}", terminal should be activated by shell startup script`)}async create(e,t){const n=(0,E.getAutoActivationType)();let r=t.env;n===E.ACT_TYPE_SHELL&&(await Promise.all(this.startupEnvProviders.map((t=>t.getEnvVariables(e))))).forEach((e=>{e&&e.forEach(((e,t)=>{r={...r,[t]:e}}))}));const i=(0,h.createTerminal)({...t,env:r});if(n===E.ACT_TYPE_COMMAND){if(t.disableActivation)return this.skipActivationOnOpen.add(i),i;this.skipActivationOnOpen.add(i),await this.autoActivateOnTerminalOpen(i,e)}return i}async getDedicatedTerminal(e,t,n,r=!1){const i=e instanceof c.Uri?s.normalize(e.fsPath):e,a=`${n.envId.id}:${i}`;if(!r){const e=this.dedicatedTerminals.get(a);if(e)return e}const l=t instanceof c.Uri?t:t.uri,u=(0,d.getConfiguration)("python",e),f=(await o.stat(l.fsPath)).isDirectory()?l.fsPath:s.dirname(l.fsPath),p=(await o.stat(e.fsPath)).isDirectory()?e.fsPath:s.dirname(e.fsPath),v=u.get("terminal.executeInFileDir",!1)?p:f,m=await this.create(n,{cwd:v});this.dedicatedTerminals.set(a,m);const g=(0,h.onDidCloseTerminal)((e=>{e===m&&(this.dedicatedTerminals.delete(a),g.dispose())}));return m}async getProjectTerminal(e,t,n=!1){const r=e instanceof c.Uri?e:e.uri,i=`${t.envId.id}:${s.normalize(r.fsPath)}`;if(!n){const e=this.projectTerminals.get(i);if(e)return e}const a=(await o.stat(r.fsPath)).isDirectory()?r.fsPath:s.dirname(r.fsPath),l=await this.create(t,{cwd:a});this.projectTerminals.set(i,l);const u=(0,h.onDidCloseTerminal)((e=>{e===l&&(this.projectTerminals.delete(i),u.dispose())}));return l}async activateUsingCommand(e,t){this.skipActivationOnOpen.add(t);const n=this.ta.getEnvironment(t)??await(0,E.getEnvironmentForTerminal)(e,t);n&&(0,f.isActivatableEnvironment)(n)&&await this.activate(t,n)}async initialize(e){const t=(0,E.getAutoActivationType)();if(t===E.ACT_TYPE_COMMAND)await Promise.all((0,h.terminals)().map((async t=>this.activateUsingCommand(e,t))));else if(t===E.ACT_TYPE_SHELL){const t=new Set((0,h.terminals)().map((e=>(0,p.identifyTerminalShell)(e))).filter((e=>"unknown"!==e)));t.size>0&&(await this.handleSetupCheck(t),await Promise.all((0,h.terminals)().map((async t=>{!1===this.shellSetup.get((0,p.identifyTerminalShell)(t))&&await this.activateUsingCommand(e,t)}))))}}getEnvironment(e){return this.ta.getEnvironment(e)}activate(e,t){return this.ta.activate(e,t)}deactivate(e){return this.ta.deactivate(e)}isActivated(e,t){return this.ta.isActivated(e,t)}dispose(){this.disposables.forEach((e=>e.dispose()))}}},534:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.removeAnsiEscapeCodes=t.getAllDistinctProjectEnvironments=t.setAutoActivationType=t.getAutoActivationType=t.ACT_TYPE_OFF=t.ACT_TYPE_COMMAND=t.ACT_TYPE_SHELL=t.getEnvironmentForTerminal=t.getTerminalCwd=t.isTaskTerminal=t.waitForShellIntegration=t.SHELL_INTEGRATION_POLL_INTERVAL=t.SHELL_INTEGRATION_TIMEOUT=void 0;const o=a(n(6928)),s=n(1398),c=n(933),l=n(7079),u=n(675),h=n(7422);function d(e){if(e.shellIntegration?.cwd)return e.shellIntegration.cwd.fsPath;const t=e.creationOptions?.cwd;return t?"string"==typeof t?t:t.fsPath:void 0}async function f(e,t){const n=[];return await Promise.all(t.map((async t=>{const r=await e.getEnvironment(t.uri);r&&!n.find((e=>e.envId.id===r.envId.id))&&n.push(r)}))),n}t.SHELL_INTEGRATION_TIMEOUT=500,t.SHELL_INTEGRATION_POLL_INTERVAL=20,t.waitForShellIntegration=async function(e){if(e.shellIntegration)return!0;const t=(0,h.getConfiguration)("terminal.integrated"),n=t.get("shellIntegration.enabled",!0),r=t.get("shellIntegration.timeout"),i=void 0!==s.env.remoteName;let a;a="number"!=typeof r||r<0?n?5e3:i?3e3:2e3:Math.max(r,500);const o=[];try{return await Promise.race([(0,c.timeout)(a).then((()=>!1)),new Promise((t=>{o.push((0,u.onDidChangeTerminalShellIntegration)((n=>{n.terminal===e&&t(!0)})))})),new Promise((t=>{const n=[],r=(0,l.createSimpleDebounce)(50,(()=>{n&&function(e){if(0===e.trim().length)return!1;const t=v(e);return!!/PS\s+[A-Z]:\\.*>\s*$/.test(t)||(!!/^[A-Z]:\\.*>\s*$/.test(t)||(!!/\$\s*$/.test(t)||(!!/#\s*$/.test(t)||(!!/^>>>\s*$/.test(t)||(!!/\u276f\s*$/.test(t)||!!/[>%]\s*$/.test(t))))))}(n.join(""))&&t(!1)}));o.push(r),o.push((0,u.onDidWriteTerminalData)((t=>{t.terminal===e&&(n.push(t.data),r.trigger())})))}))])}finally{o.forEach((e=>e.dispose()))}},t.isTaskTerminal=function(e){return e.name.toLowerCase().includes("task")},t.getTerminalCwd=d,t.getEnvironmentForTerminal=async function(e,t){let n;const r=e.getPythonProjects();if(0===r.length)n=await e.getEnvironment(void 0);else if(1===r.length)n=await e.getEnvironment(r[0].uri);else{const t=await f(e,r);n=1===t.length?t[0]:void 0}if(n)return n;const i=t?d(t):void 0;if(i)n=await e.getEnvironment(s.Uri.file(o.resolve(i)));else{const t=(0,h.getWorkspaceFolders)()??[];1===t.length&&(n=await e.getEnvironment(t[0].uri))}return n},t.ACT_TYPE_SHELL="shellStartup",t.ACT_TYPE_COMMAND="command",t.ACT_TYPE_OFF="off",t.getAutoActivationType=function(){const e=(0,h.getConfiguration)("python-envs"),n=e.inspect("terminal.autoActivationType");if(n){const e=n;if("globalRemoteValue"in n&&void 0!==e.globalRemoteValue)return e.globalRemoteValue;if("globalLocalValue"in n&&void 0!==e.globalLocalValue)return e.globalLocalValue;if(void 0!==n.globalValue)return n.globalValue}return!1===(0,h.getConfiguration)("python").get("terminal.activateEnvironment",void 0)?(e.update("terminal.autoActivationType",t.ACT_TYPE_OFF),t.ACT_TYPE_OFF):t.ACT_TYPE_COMMAND},t.setAutoActivationType=async function(e){const t=(0,h.getConfiguration)("python-envs");return await t.update("terminal.autoActivationType",e,!0)},t.getAllDistinctProjectEnvironments=async function(e){const t=[],n=e.getPythonProjects();if(0===n.length){const n=await e.getEnvironment(void 0);n&&t.push(n)}else if(1===n.length){const r=await e.getEnvironment(n[0].uri);r&&t.push(r)}else t.push(...await f(e,n));return t.length>0?t:void 0};const p=new RegExp("(?:"+[/(?:\x1b\[|\x9b)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/.source,/(?:\x1b\]|\x9d).*?(?:\x1b\\|\x07|\x9c)/.source,/\x1b(?:[ #%\(\)\*\+\-\.\/]?[a-zA-Z0-9\|}~@])/.source].join("|")+")","g");function v(e){return e&&(e=e.replace(p,"")),e}t.removeAnsiEscapeCodes=v},801:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnvManagerView=void 0;const r=n(1398),i=n(3080),a=n(7079),o=n(2341);t.EnvManagerView=class{constructor(e){this.providers=e,this.treeDataChanged=new r.EventEmitter,this.revealMap=new Map,this.managerViews=new Map,this.selected=new Map,this.disposables=[],this.debouncedFireDataChanged=(0,a.createSimpleDebounce)(500,(()=>this.treeDataChanged.fire(void 0))),this.onDidChangeTreeData=this.treeDataChanged.event,this.treeView=r.window.createTreeView("env-managers",{treeDataProvider:this}),this.disposables.push(new r.Disposable((()=>{this.revealMap.clear(),this.managerViews.clear(),this.selected.clear()})),this.treeView,this.treeDataChanged,this.providers.onDidChangeEnvironments((e=>{this.onDidChangeEnvironments(e)})),this.providers.onDidChangeEnvironmentManager((e=>{this.onDidChangeEnvironmentManager(e)})),this.providers.onDidChangePackages((e=>{this.onDidChangePackages(e)})),this.providers.onDidChangePackageManager((e=>{this.onDidChangePackageManager(e)})))}dispose(){this.disposables.forEach((e=>e.dispose()))}fireDataChanged(e){e?this.treeDataChanged.fire(e):this.debouncedFireDataChanged.trigger()}getTreeItem(e){return e.treeItem}async getChildren(e){if(!e){const e=[];return this.managerViews.clear(),this.providers.managers.forEach((t=>{const n=new i.EnvManagerTreeItem(t);e.push(n),this.managerViews.set(t.id,n)})),e}if(e.kind===i.EnvTreeItemKind.manager){const t=e.manager,n=[],r=await t.getEnvironments("all");r.filter((e=>!e.group)).forEach((t=>{const r=new i.PythonEnvTreeItem(t,e,this.selected.get(t.envId.id));n.push(r),this.revealMap.set(t.envId.id,r)}));const a=[],o=[];return r.filter((e=>e.group)).forEach((e=>{const t=e.group&&"string"==typeof e.group?e.group:e.group.name;t&&!a.includes(t)&&(a.push(t),o.push(e.group))})),o.forEach((t=>{n.push(new i.PythonGroupEnvTreeItem(e,t))})),0===n.length&&n.push(new i.NoPythonEnvTreeItem(e)),n}if(e.kind===i.EnvTreeItemKind.environmentGroup){const t=e,n=t.parent.manager,r=[],a=await n.getEnvironments("all"),o="string"==typeof t.group?t.group:t.group.name;return a.filter((e=>!!e.group&&(e.group&&"string"==typeof e.group?e.group:e.group.name)===o)).forEach((e=>{const n=new i.PythonEnvTreeItem(e,t,this.selected.get(e.envId.id));r.push(n),this.revealMap.set(e.envId.id,n)})),r}if(e.kind===i.EnvTreeItemKind.environment){const t=e,n=t.environment,r=t.parent.kind===i.EnvTreeItemKind.environmentGroup?t.parent.parent.manager:t.parent.manager,a=this.getSupportedPackageManager(r),s=e,c=[];if(a){const e=await a.getPackages(n);e&&e.length>0?c.push(...e.map((e=>new i.PackageTreeItem(e,s,a)))):c.push(new i.EnvInfoTreeItem(s,o.ProjectViews.noPackages))}else c.push(new i.EnvInfoTreeItem(s,o.ProjectViews.noPackageManager));return c}}getParent(e){return e.parent}reveal(e){const t=e?this.revealMap.get(e.envId.id):void 0;t&&this.treeView.visible&&setImmediate((async()=>{await this.treeView.reveal(t)}))}getSupportedPackageManager(e){return this.providers.getPackageManager(e.preferredPackageManagerId)}onDidChangeEnvironmentManager(e){this.fireDataChanged(void 0)}onDidChangeEnvironments(e){this.fireDataChanged(this.managerViews.get(e.manager.id))}onDidChangePackages(e){const t=Array.from(this.revealMap.values()).find((t=>t.environment.envId.id===e.environment.envId.id));t&&this.fireDataChanged(t)}onDidChangePackageManager(e){this.fireDataChanged(void 0)}environmentChanged(e){const t=[];if(e.old){this.selected.delete(e.old.envId.id);const n=this.revealMap.get(e.old.envId.id);n&&t.push(n)}if(e.new){this.selected.set(e.new.envId.id,void 0===e.uri?"global":e.uri.fsPath);const n=this.revealMap.get(e.new.envId.id);n&&!t.includes(n)&&t.push(n)}this.fireDataChanged(t)}}},6191:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectView=void 0;const r=n(1398),i=n(2341),a=n(7079),o=n(7422),s=n(3080);t.ProjectView=class{constructor(e,t){this.envManagers=e,this.projectManager=t,this._treeDataChanged=new r.EventEmitter,this.projectViews=new Map,this.revealMap=new Map,this.packageRoots=new Map,this.disposables=[],this.debouncedUpdateProject=(0,a.createSimpleDebounce)(500,(()=>this.updateProject())),this.onDidChangeTreeData=this._treeDataChanged.event,this.treeView=r.window.createTreeView("python-projects",{treeDataProvider:this}),this.disposables.push(new r.Disposable((()=>{this.packageRoots.clear(),this.revealMap.clear(),this.projectViews.clear()})),this.treeView,this._treeDataChanged,this.projectManager.onDidChangeProjects((()=>{this.debouncedUpdateProject.trigger()})),this.envManagers.onDidChangeEnvironment((()=>{this.debouncedUpdateProject.trigger()})),this.envManagers.onDidChangeEnvironments((()=>{this.debouncedUpdateProject.trigger()})),this.envManagers.onDidChangePackages((e=>{this.updatePackagesForEnvironment(e.environment)})),(0,o.onDidChangeConfiguration)((async e=>{(e.affectsConfiguration("python-envs.defaultEnvManager")||e.affectsConfiguration("python-envs.pythonProjects")||e.affectsConfiguration("python-envs.defaultPackageManager"))&&this.debouncedUpdateProject.trigger()})))}initialize(){this.projectManager.initialize()}updateProject(){this._treeDataChanged.fire(void 0)}updatePackagesForEnvironment(e){const t=[];this.revealMap.forEach((n=>{n.environment.envId.id===e.envId.id&&t.push(n)})),this._treeDataChanged.fire(t)}revealInternal(e){this.treeView.visible&&setImmediate((async()=>{await this.treeView.reveal(e)}))}reveal(e){if(e instanceof r.Uri){const t=this.projectManager.get(e),n=t?t.uri.fsPath:"global",r=this.revealMap.get(n);if(r)return this.revealInternal(r),r.environment}else{const t=Array.from(this.revealMap.values()).find((t=>t.environment.envId.id===e.envId.id));if(t)return this.revealInternal(t),t.environment}}getTreeItem(e){return e.treeItem}async getChildren(e){if(void 0===e){this.projectViews.clear();const e=[],t=this.projectManager.getProjects();return t.forEach((t=>{const n=new s.ProjectItem(t);this.projectViews.set(t.uri.fsPath,n),e.push(n)})),0===t.length&&e.push(new s.GlobalProjectItem),e}if(e.kind===s.ProjectTreeItemKind.project){const t=e;if(0===this.envManagers.managers.length)return[new s.NoProjectEnvironment(t.project,t,i.ProjectViews.waitingForEnvManager,void 0,void 0,"$(loading~spin)")];const n="global"===t.id?void 0:t.project.uri,r=this.envManagers.getEnvironmentManager(n);if(!r)return[new s.NoProjectEnvironment(t.project,t,i.ProjectViews.noEnvironmentManager,i.ProjectViews.noEnvironmentManagerDescription)];const a=await this.envManagers.getEnvironment(n);if(!a)return[new s.NoProjectEnvironment(t.project,t,`${i.ProjectViews.noEnvironmentProvided} ${r.displayName}`)];const o=new s.ProjectEnvironment(t,a);return this.revealMap.set(n?n.fsPath:"global",o),[o]}if(e.kind===s.ProjectTreeItemKind.environment){const t=e,n=t.parent,r="global"===n.id?void 0:n.project.uri,a=this.envManagers.getPackageManager(r),o=t.environment;if(!a)return[new s.ProjectEnvironmentInfo(t,i.ProjectViews.noPackageManager)];let c=await a.getPackages(o);return c?(this.packageRoots.set(r?r.fsPath:"global",t),c.map((e=>new s.ProjectPackage(t,e,a)))):[new s.ProjectEnvironmentInfo(t,i.ProjectViews.noPackages)]}}getParent(e){return e.parent}dispose(){this.disposables.forEach((e=>e.dispose()))}}},1998:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonStatusBarImpl=void 0;const r=n(1398),i=n(675);t.PythonStatusBarImpl=class{constructor(){this.disposables=[],this.statusBarItem=(0,i.createStatusBarItem)("python.interpreterDisplay",r.StatusBarAlignment.Right,100),this.statusBarItem.command="python-envs.set",this.statusBarItem.name="Python Interpreter",this.statusBarItem.tooltip="Select Python Interpreter",this.statusBarItem.text="$(loading~spin)",this.statusBarItem.show(),this.disposables.push(this.statusBarItem)}show(e){e?(this.statusBarItem.text=e.displayName??"Select Python Interpreter",this.statusBarItem.tooltip=e.environmentPath?.fsPath??""):(this.statusBarItem.text="Select Python Interpreter",this.statusBarItem.tooltip="Select Python Interpreter"),this.statusBarItem.backgroundColor=e?void 0:new r.ThemeColor("statusBarItem.warningBackground"),this.statusBarItem.show()}hide(){this.statusBarItem.hide()}dispose(){this.disposables.forEach((e=>e.dispose()))}}},9256:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateViewsAndStatus=void 0;const r=n(8680),i=n(675);t.updateViewsAndStatus=function(e,t,n,a){t.updateProject();const o=(0,i.activeTextEditor)()?.document;!o||o.isUntitled||"file"!==o.uri.scheme||"python"!==o.languageId&&"pip-requirements"!==o.languageId&&!(0,r.isPythonProjectFile)(o.uri.fsPath)?e.hide():(t.reveal(o.uri),setImmediate((async()=>{const t=await a.getEnvironment(o.uri);e.show(t),n.reveal(t)})))}},3080:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectPackageRootInfoTreeItem=t.ProjectPackage=t.ProjectEnvironmentInfo=t.NoPackagesEnvironment=t.NoProjectEnvironment=t.ProjectEnvironment=t.GlobalProjectItem=t.ProjectItem=t.ProjectTreeItemKind=t.PackageRootInfoTreeItem=t.EnvInfoTreeItem=t.PackageTreeItem=t.NoPythonEnvTreeItem=t.PythonEnvTreeItem=t.PythonGroupEnvTreeItem=t.EnvManagerTreeItem=t.EnvTreeItemKind=void 0;const r=n(1398),i=n(2341),a=n(6688),o=n(8422);var s,c;!function(e){e.manager="python-env-manager",e.environment="python-env",e.environmentGroup="python-env-group",e.noEnvironment="python-no-env",e.package="python-package",e.managerInfo="python-env-manager-info",e.environmentInfo="python-env-info",e.packageInfo="python-package-info"}(s||(t.EnvTreeItemKind=s={})),t.EnvManagerTreeItem=class{constructor(e){this.manager=e,this.kind=s.manager;const t=new r.TreeItem(e.displayName,r.TreeItemCollapsibleState.Collapsed);t.contextValue=this.getContextValue(),t.description=e.description,t.tooltip=e.tooltip??e.description,t.iconPath=e.iconPath,this.treeItem=t}getContextValue(){return["pythonEnvManager",this.manager.supportsCreate?"create":"",this.manager.id].filter(Boolean).join(";")+";"}},t.PythonGroupEnvTreeItem=class{constructor(e,t){this.parent=e,this.group=t,this.kind=s.environmentGroup;const n="string"==typeof t?t:t.name,i=new r.TreeItem(n,r.TreeItemCollapsibleState.Collapsed);i.contextValue=`pythonEnvGroup;${this.parent.manager.id}:${n};`,this.treeItem=i,"string"!=typeof t&&(i.description=t.description,i.tooltip=t.tooltip,i.iconPath=t.iconPath)}},t.PythonEnvTreeItem=class{constructor(e,t,n){this.environment=e,this.parent=t,this.selected=n,this.kind=s.environment;let a=e.displayName??e.name,o=e.tooltip??e.description;if(n){const e="global"===n?i.EnvViewStrings.selectedGlobalTooltip:i.EnvViewStrings.selectedWorkspaceTooltip;o=o?`${e}  ${o}`:o}const c=new r.TreeItem(a,r.TreeItemCollapsibleState.Collapsed);c.contextValue=this.getContextValue(),c.description=e.description,c.tooltip=o,c.iconPath=e.iconPath,this.treeItem=c}getContextValue(){const e=(0,a.isActivatableEnvironment)(this.environment)?"activatable":"";let t="";return this.parent.kind===s.environmentGroup?t=this.parent.parent.manager.supportsRemove?"remove":"":this.parent.kind===s.manager&&(t=this.parent.manager.supportsRemove?"remove":""),["pythonEnvironment",t,e].filter(Boolean).join(";")+";"}},t.NoPythonEnvTreeItem=class{constructor(e,t,n,i){this.parent=e,this.description=t,this.tooltip=n,this.iconPath=i,this.kind=s.environment;const a=new r.TreeItem(this.parent.manager.supportsCreate?"No environment found, click to create":"No python environments found.",r.TreeItemCollapsibleState.None);a.contextValue="python-no-environment",a.description=this.description,a.tooltip=this.tooltip,a.iconPath=this.iconPath??new r.ThemeIcon("circle-slash"),this.parent.manager.supportsCreate&&(a.command={command:"python-envs.create",title:"Create Environment",arguments:[this.parent]}),this.treeItem=a}},t.PackageTreeItem=class{constructor(e,t,n){this.pkg=e,this.parent=t,this.manager=n,this.kind=s.package;const i=new r.TreeItem(e.displayName);i.iconPath=e.iconPath,i.contextValue="python-package",i.description=e.description??e.version,i.tooltip=e.tooltip,this.treeItem=i}},t.EnvInfoTreeItem=class{constructor(e,t,n,i,a,o){this.parent=e,this.kind=s.environmentInfo;const c=new r.TreeItem(t,r.TreeItemCollapsibleState.None);c.contextValue="python-env-manager-info",c.description=n,c.tooltip=i,this.treeItem=c,this.treeItem.iconPath=a,this.treeItem.command=o}},t.PackageRootInfoTreeItem=class{constructor(e,t,n,i,a,o){this.parent=e,this.kind=s.packageInfo;const c=new r.TreeItem(t,r.TreeItemCollapsibleState.None);c.contextValue="python-package-root-info",c.description=n,c.tooltip=i,this.treeItem=c,this.treeItem.iconPath=a,this.treeItem.command=o}},function(e){e.project="project",e.environment="project-environment",e.none="project-no-environment",e.environmentInfo="environment-info",e.package="project-package",e.packageRootInfo="project-package-root-info"}(c||(t.ProjectTreeItemKind=c={}));class l{constructor(e){this.project=e,this.kind=c.project,this.id=l.getId(this.project);const t=new r.TreeItem(this.project.name,r.TreeItemCollapsibleState.Expanded);t.contextValue=(0,o.removable)(this.project)?"python-workspace-removable":"python-workspace",t.description=this.project.description,t.tooltip=this.project.tooltip,t.resourceUri=e.uri.fsPath.endsWith(".py")?this.project.uri:void 0,this.treeItem=t}static getId(e){return e.uri.toString()}}t.ProjectItem=l,t.GlobalProjectItem=class{constructor(){this.kind=c.project,this.id="global";const e=new r.TreeItem("Global",r.TreeItemCollapsibleState.Expanded);e.contextValue="python-workspace",e.description="Global Python environment",e.tooltip="Global Python environment",this.treeItem=e}},t.ProjectEnvironment=class{constructor(e,t){this.parent=e,this.environment=t,this.kind=c.environment,this.id=this.getId(e,t);const n=new r.TreeItem(this.environment.displayName??this.environment.name,r.TreeItemCollapsibleState.Collapsed);n.contextValue="python-env",n.description=this.environment.description,n.tooltip=this.environment.tooltip,n.iconPath=this.environment.iconPath,this.treeItem=n}getId(e,t){return`${e.id}>>>${t.envId}`}},t.NoProjectEnvironment=class{constructor(e,t,n,i,a,o){this.project=e,this.parent=t,this.label=n,this.description=i,this.tooltip=a,this.iconPath=o,this.kind=c.none;const s=Math.random().toString(36).substring(2);this.id=`${this.parent.id}>>>none>>>${s}`;const l=new r.TreeItem(this.label,r.TreeItemCollapsibleState.None);l.contextValue="no-environment",l.description=this.description,l.tooltip=this.tooltip,l.iconPath=this.iconPath??new r.ThemeIcon("circle-slash"),l.command={command:"python-envs.set",title:"Set Environment",arguments:this.project?[this.project.uri]:void 0},this.treeItem=l}},t.NoPackagesEnvironment=class{constructor(e,t,n,i,a){this.project=e,this.parent=t,this.description=n,this.tooltip=i,this.iconPath=a,this.kind=c.none;const o=Math.random().toString(36).substring(2);this.id=`${this.parent.id}>>>packages-none>>>${o}`;const s=new r.TreeItem("Please select a package manager",r.TreeItemCollapsibleState.None);s.contextValue="no-packages",s.description=this.description,s.tooltip=this.tooltip,s.iconPath=this.iconPath??new r.ThemeIcon("circle-slash"),s.command={command:"pythonEnvs.setPkgManager",title:"Set Package Manager",arguments:[this.project.uri]},this.treeItem=s}},t.ProjectEnvironmentInfo=class{constructor(e,t,n,i,a,o){this.parent=e,this.label=t,this.description=n,this.tooltip=i,this.iconPath=a,this.command=o,this.kind=c.environmentInfo;const s=Math.random().toString(36).substring(2),l=Math.random().toString(36).substring(2);this.id=`${this.parent.id}>>>info>>>${s}-${l}`;const u=new r.TreeItem(this.label,r.TreeItemCollapsibleState.None);u.contextValue="python-env-manager-info",u.description=this.description,u.tooltip=this.tooltip,u.iconPath=this.iconPath,u.command=this.command,this.treeItem=u}};class u{constructor(e,t,n){this.parent=e,this.pkg=t,this.manager=n,this.kind=c.package,this.id=u.getId(e,t);const i=new r.TreeItem(this.pkg.displayName,r.TreeItemCollapsibleState.None);i.iconPath=this.pkg.iconPath,i.contextValue="python-package",i.description=this.pkg.description??this.pkg.version,i.tooltip=this.pkg.tooltip,this.treeItem=i}static getId(e,t){return`${e.id}>>>${t.pkgId}`}}t.ProjectPackage=u;class h{constructor(e,t,n,i,a,o){this.parent=e,this.kind=c.packageRootInfo;const s=new r.TreeItem(t,r.TreeItemCollapsibleState.None);this.id=h.getId(e,"no-package"),s.contextValue="python-package-root-info",s.description=n,s.tooltip=i,this.treeItem=s,this.treeItem.iconPath=a,this.treeItem.command=o}static getId(e,t){return`${e.id}>>>${t}`}}t.ProjectPackageRootInfoTreeItem=h},8422:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.removable=void 0;const o=a(n(6928)),s=n(7422);t.removable=function(e){const t=(0,s.getWorkspaceFolder)(e.uri);return!t||o.normalize(t?.uri.fsPath).toLowerCase()!==o.normalize(e.uri.fsPath).toLowerCase()}},1673:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveDefaultInterpreter=t.runPetInTerminalImpl=t.getUserConfiguredSetting=t.getEnvManagerAndPackageManagerConfigLevels=t.collectEnvironmentInfo=void 0;const r=n(1398),i=n(853),a=n(6878),o=n(6682),s=n(675),c=n(7422),l=n(534),u=n(2490);function h(e,t){const n=(0,c.getConfiguration)(e).inspect(t);if(n)return void 0!==n.workspaceFolderValue?n.workspaceFolderValue:void 0!==n.workspaceValue?n.workspaceValue:void 0!==n.globalValue?n.globalValue:void 0}t.collectEnvironmentInfo=async function(e,t,n){const i=[];try{const a=e.extension?.packageJSON?.version||"unknown";i.push(`Extension Version: ${a}`);const o=r.extensions.getExtension("ms-python.python"),s=o?.packageJSON?.version||"not installed";i.push(`Python Extension Version: ${s}`);const c=t.managers;i.push(`\nRegistered Environment Managers (${c.length}):`),c.forEach((e=>{i.push(`  - ${e.id} (${e.displayName})`)}));const u=[];for(const e of c)try{const t=await e.getEnvironments("all");u.push(...t)}catch(t){i.push(`  Error getting environments from ${e.id}: ${t}`)}i.push(`\nTotal Available Environments: ${u.length}`),u.length>0&&(i.push("Environment Details:"),u.slice(0,10).forEach(((e,t)=>{i.push(`  ${t+1}. ${e.displayName} (${e.version}) - ${e.displayPath}`)})),u.length>10&&i.push(`  ... and ${u.length-10} more environments`));const h=n.getProjects();i.push(`\nPython Projects (${h.length}):`);for(let e=0;e<h.length;e++){const n=h[e];i.push(`  ${e+1}. ${n.uri.fsPath}`);try{const e=await t.getEnvironment(n.uri);e&&i.push(`     Environment: ${e.displayName}`)}catch(e){i.push(`     Error getting environment: ${e}`)}}const d=r.workspace.getConfiguration("python-envs"),f=r.workspace.getConfiguration("python");i.push("\nExtension Settings:"),i.push(`  Default Environment Manager: ${d.get("defaultEnvManager")}`),i.push(`  Default Package Manager: ${d.get("defaultPackageManager")}`);const p=d.get("terminal.autoActivationType",void 0),v=f.get("terminal.activateEnvironment",void 0);i.push(`Auto-activation is "${(0,l.getAutoActivationType)()}". Activation based on first 'py-env.terminal.autoActivationType' setting which is '${p}' and 'python.terminal.activateEnvironment' if the first is undefined which is '${v}'.\n`)}catch(e){i.push(`\nError collecting environment information: ${e}`)}return i.join("\n")},t.getEnvManagerAndPackageManagerConfigLevels=function(){const e=(0,c.getConfiguration)("python-envs"),t=e.inspect("defaultEnvManager"),n=e.inspect("defaultPackageManager");return{section:"Python Envs Configuration Levels",defaultEnvManager:{workspaceFolderValue:t?.workspaceFolderValue??"undefined",workspaceValue:t?.workspaceValue??"undefined",globalValue:t?.globalValue??"undefined",defaultValue:t?.defaultValue??"undefined"},defaultPackageManager:{workspaceFolderValue:n?.workspaceFolderValue??"undefined",workspaceValue:n?.workspaceValue??"undefined",globalValue:n?.globalValue??"undefined",defaultValue:n?.defaultValue??"undefined"}}},t.getUserConfiguredSetting=h,t.runPetInTerminalImpl=async function e(){const t=await(0,u.getNativePythonToolsPath)(),n=await r.window.showQuickPick([{label:"Find All Environments",description:"Finds all environments and reports them to the standard output",detail:"Runs: pet find --verbose"},{label:"Resolve Environment...",description:"Resolves & reports the details of the environment to the standard output",detail:"Runs: pet resolve <path>"}],{placeHolder:"Select a Python Environment Tool (PET) operation",ignoreFocusOut:!0});if(n)if("Find All Environments"===n.label){const e=(0,s.createTerminal)({name:"Python Environment Tool (PET)"});e.show(),e.sendText(`"${t}" find --verbose`,!0),(0,i.traceInfo)(`Running PET find command: ${t} find --verbose`)}else if("Resolve Environment..."===n.label)try{const e=(0,o.isWindows)()?"C:\\path\\to\\python\\executable":"/path/to/python/executable",n=await(0,s.showInputBoxWithButtons)({prompt:"Enter the path to the Python executable to resolve",placeHolder:e,ignoreFocusOut:!0,showBackButton:!0,validateInput:e=>e&&0!==e.trim().length?null:"Please enter a valid path"});if(n){const e=(0,s.createTerminal)({name:"Python Environment Tool (PET)"});e.show(),e.sendText(`"${t}" resolve "${n.trim()}"`,!0),(0,i.traceInfo)(`Running PET resolve command: ${t} resolve "${n.trim()}"`)}}catch(t){if(t===r.QuickInputButtons.Back)return void await e();throw t}},t.resolveDefaultInterpreter=async function(e,t,n){const o=h("python","defaultInterpreterPath"),s=h("python-envs","defaultEnvManager");if((0,i.traceInfo)(`[resolveDefaultInterpreter] User configured defaultInterpreterPath: ${o} and defaultEnvManager: ${s}`),o&&!s)try{const s=await e.resolve(o);if(s&&s.executable){if((0,a.normalizePath)(s.executable)===(0,a.normalizePath)(o))return;const e=await n.resolveEnvironment(r.Uri.file(s.executable));(0,i.traceInfo)(`[resolveDefaultInterpreter] API resolved environment: ${JSON.stringify(e)}`);let c=t.managers.find((t=>t.id===e?.envId.managerId));c||(c=t.managers.find((e=>"ms-python.python:system"===e.id)));const l=Math.random().toString(36).substring(2,15);if(e){const t={envId:{id:`${o}_${l}`,managerId:e?.envId.managerId??""},name:"defaultInterpreterPath: "+(s.version??""),displayName:"defaultInterpreterPath: "+(s.version??""),version:s.version??"",displayPath:o??"",environmentPath:o?r.Uri.file(o):r.Uri.file(""),sysPrefix:s.arch??"",execInfo:{run:{executable:o??""}}};r.workspace.workspaceFolders?.[0]&&c&&((0,i.traceInfo)(`[resolveDefaultInterpreter] Setting environment for workspace: ${r.workspace.workspaceFolders[0].uri.fsPath}`),await n.setEnvironment(r.workspace.workspaceFolders[0].uri,t))}}else(0,i.traceWarn)(`[resolveDefaultInterpreter] NativeFinder did not resolve an executable for path: ${o}`)}catch(e){(0,i.traceError)(`[resolveDefaultInterpreter] Error resolving default interpreter: ${e}`)}}},1161:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonProjectsImpl=t.PythonPackageImpl=t.PythonEnvironmentImpl=t.InternalPackageManager=t.InternalEnvironmentManager=void 0;const r=n(1398),i=n(2103),a=n(781),o=n(3343);t.InternalEnvironmentManager=class{constructor(e,t){this.id=e,this.manager=t}get name(){return this.manager.name}get displayName(){return this.manager.displayName??this.name}get preferredPackageManagerId(){return this.manager.preferredPackageManagerId}get description(){return this.manager.description}get tooltip(){return this.manager.tooltip}get iconPath(){return this.manager.iconPath}get log(){return this.manager.log}get supportsCreate(){return void 0!==this.manager.create}create(e,t){return this.manager.create?this.manager.create(e,t):Promise.reject(new i.CreateEnvironmentNotSupported(`Create Environment not supported by: ${this.id}`))}get supportsQuickCreate(){return void 0!==this.manager.quickCreateConfig&&void 0!==this.manager.create}quickCreateConfig(){if(this.manager.quickCreateConfig&&this.manager.create)return this.manager.quickCreateConfig();throw new i.CreateEnvironmentNotSupported(`Quick Create Environment not supported by: ${this.id}`)}get supportsRemove(){return void 0!==this.manager.remove}remove(e){return this.manager.remove?this.manager.remove(e):Promise.reject(new i.RemoveEnvironmentNotSupported(`Remove Environment not supported by: ${this.id}`))}refresh(e){return this.manager.refresh(e)}getEnvironments(e){return this.manager.getEnvironments(e)}onDidChangeEnvironments(e){return this.manager.onDidChangeEnvironments?this.manager.onDidChangeEnvironments(e):new r.Disposable((()=>{}))}set(e,t){return this.manager.set(e,t)}get(e){return this.manager.get(e)}onDidChangeEnvironment(e){return this.manager.onDidChangeEnvironment?this.manager.onDidChangeEnvironment(e):new r.Disposable((()=>{}))}resolve(e){return this.manager.resolve(e)}equals(e){return this.manager===e}supportsClearCache(){return void 0!==this.manager.clearCache}clearCache(){return this.manager.clearCache?this.manager.clearCache():Promise.resolve()}},t.InternalPackageManager=class{constructor(e,t){this.id=e,this.manager=t}get name(){return this.manager.name}get displayName(){return this.manager.displayName??this.name}get description(){return this.manager.description}get tooltip(){return this.manager.tooltip}get iconPath(){return this.manager.iconPath}get log(){return this.manager.log}async manage(e,t){try{await this.manager.manage(e,t),(0,o.sendTelemetryEvent)(a.EventNames.PACKAGE_MANAGEMENT,void 0,{managerId:this.id,result:"success"})}catch(e){if(e instanceof r.CancellationError)throw(0,o.sendTelemetryEvent)(a.EventNames.PACKAGE_MANAGEMENT,void 0,{managerId:this.id,result:"cancelled"}),e;throw(0,o.sendTelemetryEvent)(a.EventNames.PACKAGE_MANAGEMENT,void 0,{managerId:this.id,result:"error"}),e}}refresh(e){return this.manager.refresh(e)}getPackages(e){return this.manager.getPackages(e)}onDidChangePackages(e){return this.manager.onDidChangePackages?this.manager.onDidChangePackages(e):new r.Disposable((()=>{}))}equals(e){return this.manager===e}},t.PythonEnvironmentImpl=class{constructor(e,t){this.envId=e,this.name=t.name,this.displayName=t.displayName??this.name,this.shortDisplayName=t.shortDisplayName,this.displayPath=t.displayPath,this.version=t.version,this.environmentPath=t.environmentPath,this.description=t.description,this.tooltip=t.tooltip,this.iconPath=t.iconPath,this.execInfo=t.execInfo,this.sysPrefix=t.sysPrefix,this.group=t.group}},t.PythonPackageImpl=class{constructor(e,t){this.pkgId=e,this.name=t.name,this.displayName=t.displayName??this.name,this.version=t.version,this.description=t.description,this.tooltip=t.tooltip,this.iconPath=t.iconPath,this.uris=t.uris}},t.PythonProjectsImpl=class{constructor(e,t,n){this.name=e,this.uri=t,this.description=n?.description??t.fsPath,this.tooltip=n?.tooltip??t.fsPath,this.iconPath=n?.iconPath}}},5731:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSystemEnvForGlobal=t.getSystemEnvForGlobal=t.setSystemEnvForWorkspaces=t.setSystemEnvForWorkspace=t.getSystemEnvForWorkspace=t.clearSystemEnvCache=t.SYSTEM_GLOBAL_KEY=t.SYSTEM_WORKSPACE_KEY=void 0;const r=n(5333),i=n(578);t.SYSTEM_WORKSPACE_KEY=`${r.ENVS_EXTENSION_ID}:system:WORKSPACE_SELECTED`,t.SYSTEM_GLOBAL_KEY=`${r.ENVS_EXTENSION_ID}:system:GLOBAL_SELECTED`,t.clearSystemEnvCache=async function(){const e=[t.SYSTEM_WORKSPACE_KEY,t.SYSTEM_GLOBAL_KEY],n=await(0,i.getWorkspacePersistentState)();await n.clear(e)},t.getSystemEnvForWorkspace=async function(e){const n=await(0,i.getWorkspacePersistentState)(),r=await n.get(t.SYSTEM_WORKSPACE_KEY);if(r)try{return r[e]}catch{return}},t.setSystemEnvForWorkspace=async function(e,n){const r=await(0,i.getWorkspacePersistentState)(),a=await r.get(t.SYSTEM_WORKSPACE_KEY)??{};n?a[e]=n:delete a[e],await r.set(t.SYSTEM_WORKSPACE_KEY,a)},t.setSystemEnvForWorkspaces=async function(e,n){const r=await(0,i.getWorkspacePersistentState)(),a=await r.get(t.SYSTEM_WORKSPACE_KEY)??{};e.forEach((e=>{n?a[e]=n:delete a[e]})),await r.set(t.SYSTEM_WORKSPACE_KEY,a)},t.getSystemEnvForGlobal=async function(){const e=await(0,i.getWorkspacePersistentState)();return await e.get(t.SYSTEM_GLOBAL_KEY)},t.setSystemEnvForGlobal=async function(e){const n=await(0,i.getWorkspacePersistentState)();await n.set(t.SYSTEM_GLOBAL_KEY,e)}},2192:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runPython=t.runUV=t.shouldUseUv=t.isUvInstalled=t.resetUvInstallationCache=void 0;const r=n(1398),i=n(8902),a=n(781),o=n(3343),s=n(4047),c=n(7422),l=n(9324);let u=(0,s.createDeferred)();async function h(e){if(u.completed)return u.promise;e?.info("Running: uv --version");const t=(0,i.spawnProcess)("uv",["--version"]);return t.on("error",(()=>{u.resolve(!1)})),t.stdout?.on("data",(t=>e?.info(t.toString()))),t.on("exit",(e=>{0===e&&(0,o.sendTelemetryEvent)(a.EventNames.VENV_USING_UV),u.resolve(0===e)})),u.promise}t.resetUvInstallationCache=function(){u=(0,s.createDeferred)()},t.isUvInstalled=h,t.shouldUseUv=async function(e,t){return(t&&(await(0,l.getUvEnvironments)()).includes(t)||!!(0,c.getConfiguration)("python-envs").get("alwaysUseUv",!0))&&await h(e)},t.runUV=async function(e,t,n,a){return n?.info(`Running: uv ${e.join(" ")}`),new Promise(((o,s)=>{const c=(0,i.spawnProcess)("uv",e,{cwd:t});a?.onCancellationRequested((()=>{c.kill(),s(new r.CancellationError)})),c.on("error",(e=>{n?.error(`Error spawning uv: ${e}`),s(new Error(`Error spawning uv: ${e.message}`))}));let l="";c.stdout?.on("data",(e=>{const t=e.toString("utf-8");l+=t,n?.append(t)})),c.stderr?.on("data",(e=>{n?.append(e.toString("utf-8"))})),c.on("close",(()=>{o(l)})),c.on("exit",(t=>{0!==t&&s(new Error(`Failed to run uv ${e.join(" ")}`))}))}))},t.runPython=async function(e,t,n,a,o){return a?.info(`Running: ${e} ${t.join(" ")}`),new Promise(((s,c)=>{const l=(0,i.spawnProcess)(e,t,{cwd:n});o?.onCancellationRequested((()=>{l.kill(),c(new r.CancellationError)})),l.on("error",(e=>{a?.error(`Error spawning python: ${e}`),c(new Error(`Error spawning python: ${e.message}`))}));let u="";l.stdout?.on("data",(e=>{const t=e.toString("utf-8");u+=t,a?.append(`python: ${t}`)})),l.stderr?.on("data",(e=>{const t=e.toString("utf-8");u+=t,a?.append(`python: ${t}`)})),l.on("close",(()=>{s(u)})),l.on("exit",(e=>{0!==e&&c(new Error(`Failed to run python ${t.join(" ")}`))}))}))}},6756:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerSystemPythonFeatures=void 0;const r=n(7079),i=n(675),a=n(7422),o=n(8940),s=n(6081),c=n(4931),l=n(9517);t.registerSystemPythonFeatures=async function(e,t,n,u){const h=await(0,o.getPythonApi)(),d=new l.VenvManager(e,h,u,n),f=new s.PipPackageManager(h,n,d);t.push(h.registerPackageManager(f),h.registerEnvironmentManager(u),h.registerEnvironmentManager(d));const p=(0,r.createSimpleDebounce)(500,(()=>{d.watcherRefresh()})),v=(0,a.createFileSystemWatcher)("{**/activate}",!1,!0,!1);t.push(v,v.onDidCreate((()=>{p.trigger()})),v.onDidDelete((()=>{p.trigger()})),(0,a.onDidDeleteFiles)((()=>{p.trigger()}))),t.push((0,i.onDidEndTerminalShellExecution)((async e=>{const t=e.terminal.shellIntegration?.cwd;if((0,c.isPipInstallCommand)(e.execution.commandLine.value)&&t){const e=await d.get(t);e&&await f.refresh(e)}})))}},2687:(e,t)=>{"use strict";function n(e){return/^([1-9][0-9]*!)?(0|[1-9][0-9]*)(\.(0|[1-9][0-9]*))*((a|b|rc)(0|[1-9][0-9]*))?(\.post(0|[1-9][0-9]*))?(\.dev(0|[1-9][0-9]*))?$/.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.parsePipList=t.isValidVersion=void 0,t.isValidVersion=n,t.parsePipList=function(e){const t=[],r=e.split("\n").splice(2);for(let e of r){if(""===e.trim()||e.startsWith("Package")||e.startsWith("----")||e.startsWith("["))continue;const r=e.split(" ").filter((e=>e));if(2===r.length){const e=r[0].trim(),i=r[1].trim();if(!n(i))continue;const a={name:e,version:i,displayName:e,description:i};t.push(a)}}return t}},6081:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PipPackageManager=void 0;const r=n(1398),i=n(4300),a=n(4931),o=n(8468);function s(e,t){const n=[];return e.forEach((e=>{n.push({kind:i.PackageChangeKind.remove,pkg:e})})),t.forEach((e=>{n.push({kind:i.PackageChangeKind.add,pkg:e})})),n}t.PipPackageManager=class{constructor(e,t,n){this.api=e,this.log=t,this.venv=n,this._onDidChangePackages=new r.EventEmitter,this.onDidChangePackages=this._onDidChangePackages.event,this.packages=new Map,this.name="pip",this.displayName="Pip",this.description="This package manager for python installs using pip.",this.tooltip=new r.MarkdownString("This package manager for python installs using `pip`."),this.iconPath=new r.ThemeIcon("python")}async manage(e,t){let n=[...t.install??[]],i=[...t.uninstall??[]];if(0===n.length&&0===i.length){const r=this.venv.getProjectsByEnvironment(e),o=await(0,a.getWorkspacePackagesToInstall)(this.api,t,r,e,this.log);if(!o)return;n=o.install,i=o.uninstall}const c={...t,install:n,uninstall:i};await r.window.withProgress({location:r.ProgressLocation.Notification,title:"Installing packages",cancellable:!0},(async(t,n)=>{try{const t=this.packages.get(e.envId.id)??[],r=await(0,o.managePackages)(e,c,this.api,this,n),i=s(t,r);this.packages.set(e.envId.id,r),this._onDidChangePackages.fire({environment:e,manager:this,changes:i})}catch(e){if(e instanceof r.CancellationError)throw e;throw this.log.error("Error managing packages",e),setImmediate((async()=>{"View Output"===await r.window.showErrorMessage("Error managing packages","View Output")&&this.log.show()})),e}}))}async refresh(e){await r.window.withProgress({location:r.ProgressLocation.Window,title:"Refreshing packages"},(async()=>{const t=this.packages.get(e.envId.id)??[],n=await(0,o.refreshPackages)(e,this.api,this),r=s(t,n);this.packages.set(e.envId.id,n),r.length>0&&this._onDidChangePackages.fire({environment:e,manager:this,changes:r})}))}async getPackages(e){return this.packages.has(e.envId.id)||await this.refresh(e),this.packages.get(e.envId.id)}dispose(){this._onDidChangePackages.dispose(),this.packages.clear()}}},4931:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isPipInstallCommand=t.getProjectInstallable=t.getWorkspacePackagesToInstall=void 0;const o=a(n(9)),s=a(n(1605)),c=a(n(6928)),l=n(1398),u=n(5333),h=n(2341),d=n(853),f=n(675),p=n(7422),v=n(7712),m=n(8310),g=n(8468);async function y(e,t,n,r){if(0===e.length&&0===t.length)return;const i=[];e.length>0&&i.push({label:h.PackageManagement.workspaceDependencies,description:h.PackageManagement.workspaceDependenciesDescription}),t.length>0&&i.push({label:h.PackageManagement.searchCommonPackages,description:h.PackageManagement.searchCommonPackagesDescription}),n&&i.length>0&&i.push({label:h.PackageManagement.skipPackageInstallation});let a,o=!0;if(1===i.length?(a=i[0],o=!1):a=await(0,f.showQuickPickWithButtons)(i,{placeHolder:h.Pickers.Packages.selectOption,ignoreFocusOut:!0,showBackButton:!0,matchOnDescription:!1,matchOnDetail:!1}),a&&!Array.isArray(a))try{return a.label===h.PackageManagement.workspaceDependencies?await(0,v.selectFromInstallableToInstall)(e,void 0,{showBackButton:o}):a.label===h.PackageManagement.searchCommonPackages?await(0,v.selectFromCommonPackagesToInstall)(t,r,void 0,{showBackButton:o}):a.label===h.PackageManagement.skipPackageInstallation?((0,d.traceInfo)("Package Installer: user selected skip package installation"),{install:[],uninstall:[]}):void 0}catch(i){if(i===l.QuickInputButtons.Back)return y(e,t,n,r)}}async function E(e,t){if(!t)return[];const n="**/{.venv*,.git,.nox,.tox,.conda,site-packages,__pypackages__}/**",r=[];return await(0,f.withProgress)({location:l.ProgressLocation.Notification,title:h.VenvManagerStrings.searchingDependencies},(async(i,a)=>{const l=(await Promise.all([(0,p.findFiles)("**/*requirements*.txt",n,void 0,a),(0,p.findFiles)("*requirements*.txt",n,void 0,a),(0,p.findFiles)("**/requirements/*.txt",n,void 0,a),(0,p.findFiles)("**/pyproject.toml",n,void 0,a)])).flat(),u=Array.from(new Map(l.map((e=>[e.fsPath,e]))).values()),d=t.map((e=>e.uri.fsPath)),f=u.filter((t=>{const n=e.getPythonProject(t)?.uri.fsPath;return n&&d.includes(n)})).sort();await Promise.all(f.map((async e=>{if(e.fsPath.endsWith(".toml")){const t=await async function(e,t){try{const t=await s.readFile(e,"utf-8");return o.parse(t)}catch(e){}return{}}(e.fsPath);r.push(...function(e,t){const n=[],r=c.dirname(t.fsPath);if(function(e){return void 0!==e["build-system"]&&void 0!==e.project}(e)){const e=c.basename(t.fsPath);n.push({name:e,displayName:e,description:h.VenvManagerStrings.installEditable,group:"TOML",args:["-e",r],uri:t})}if(e.project&&e.project["optional-dependencies"]){const i=e.project["optional-dependencies"];for(const e of Object.keys(i))n.push({name:e,displayName:e,group:"TOML",args:["-e",`${r}[${e}]`],uri:t})}return n}(t,e))}else{const t=c.basename(e.fsPath);r.push({name:t,uri:e,displayName:t,group:"Requirements",args:["-r",e.fsPath]})}})))})),r}t.getWorkspacePackagesToInstall=async function(e,t,n,r,i){const a=await E(e,n)??[];let o,h=await async function(){try{const e=c.join(u.EXTENSION_ROOT_DIR,"files","common_pip_packages.json"),t=await s.readFile(e,{encoding:"utf-8"});return JSON.parse(t).map((e=>({name:e.name,displayName:e.name,uri:l.Uri.parse(e.uri)})))}catch{return[]}}();return r&&(o=(await(0,g.refreshPipPackages)(r,i,{showProgress:!0}))?.map((e=>e.name)),h=(0,m.mergePackages)(h,o??[])),y(a,h,!!t.showSkipOption,o??[])},t.getProjectInstallable=E,t.isPipInstallCommand=function(e){return/(?:^|\s)(?:\S+\s+)*(?:pip\d*)\s+(install|uninstall)\b/.test(e)}},9547:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SysPythonManager=void 0;const o=a(n(6928)),s=n(1398),c=n(4300),l=n(2341),u=n(4047),h=n(8310),d=n(5731),f=n(8468);t.SysPythonManager=class{constructor(e,t,n){this.nativeFinder=e,this.api=t,this.log=n,this.collection=[],this.fsPathToEnv=new Map,this._onDidChangeEnvironment=new s.EventEmitter,this.onDidChangeEnvironment=this._onDidChangeEnvironment.event,this._onDidChangeEnvironments=new s.EventEmitter,this.onDidChangeEnvironments=this._onDidChangeEnvironments.event,this.name="system",this.displayName="Global",this.preferredPackageManagerId="ms-python.python:pip",this.description=void 0,this.tooltip=new s.MarkdownString(l.SysManagerStrings.sysManagerDescription,!0),this.iconPath=new s.ThemeIcon("globe")}async initialize(){if(this._initialized)return this._initialized.promise;this._initialized=(0,u.createDeferred)(),await this.internalRefresh(!1,l.SysManagerStrings.sysManagerDiscovering),this._initialized.resolve()}refresh(e){return this.internalRefresh(!0,l.SysManagerStrings.sysManagerRefreshing)}async internalRefresh(e,t){await s.window.withProgress({location:s.ProgressLocation.Window,title:t},(async()=>{const t=this.collection.map((e=>e));this.collection=await(0,f.refreshPythons)(e,this.nativeFinder,this.api,this.log,this),await this.loadEnvMap();const n=[...t.map((e=>({environment:e,kind:c.EnvironmentChangeKind.remove}))),...this.collection.map((e=>({environment:e,kind:c.EnvironmentChangeKind.add})))];this._onDidChangeEnvironments.fire(n)}))}async getEnvironments(e){if(await this.initialize(),"all"===e||"global"===e)return Array.from(this.collection);if(e instanceof s.Uri){const t=this.fsPathToEnv.get(e.fsPath);if(t)return[t]}return[]}async get(e){return await this.initialize(),e instanceof s.Uri?this.fromEnvMap(e)??this.globalEnv:this.globalEnv}async set(e,t){if(void 0===e&&(this.globalEnv=t??(0,h.getLatest)(this.collection),t&&await(0,d.setSystemEnvForGlobal)(t.environmentPath.fsPath)),e instanceof s.Uri){const n=this.api.getPythonProject(e);if(!n)return void this.log.warn(`Unable to set environment for ${e.fsPath}: Not a python project, folder or PEP723 script.`,this.api.getPythonProjects().map((e=>e.uri.fsPath)));t?this.fsPathToEnv.set(n.uri.fsPath,t):this.fsPathToEnv.delete(n.uri.fsPath),await(0,d.setSystemEnvForWorkspace)(n.uri.fsPath,t?.environmentPath.fsPath)}if(Array.isArray(e)&&e.every((e=>e instanceof s.Uri))){const n=[];e.map((e=>this.api.getPythonProject(e))).forEach((e=>{e&&n.push(e)}));const r=new Map;n.forEach((e=>{r.set(e.uri.fsPath,this.fsPathToEnv.get(e.uri.fsPath)),t?this.fsPathToEnv.set(e.uri.fsPath,t):this.fsPathToEnv.delete(e.uri.fsPath)})),await(0,d.setSystemEnvForWorkspaces)(n.map((e=>e.uri.fsPath)),t?.environmentPath.fsPath),n.forEach((e=>{const n=r.get(e.uri.fsPath);n?.envId.id!==t?.envId.id&&this._onDidChangeEnvironment.fire({uri:e.uri,old:n,new:t})}))}}async resolve(e){const t=this.findEnvironmentByPath(e.fsPath);if(t)return t;const n=await(0,f.resolveSystemPythonEnvironmentPath)(e.fsPath,this.nativeFinder,this.api,this);return n&&(this.collection.some((e=>e.environmentPath.toString()===n.environmentPath.toString()))||this.collection.push(n),this._onDidChangeEnvironments.fire([{environment:n,kind:c.EnvironmentChangeKind.add}])),n}async clearCache(){await(0,d.clearSystemEnvCache)()}findEnvironmentByPath(e){const t=o.normalize(e);return this.collection.find((e=>{const n=o.normalize(e.environmentPath.fsPath);return n===t||o.dirname(n)===t||o.dirname(o.dirname(n))===t}))}fromEnvMap(e){const t=this.fsPathToEnv.get(e.fsPath);if(t)return t;const n=this.api.getPythonProject(e);return n?this.fsPathToEnv.get(n.uri.fsPath):this.globalEnv}async loadEnvMap(){this.globalEnv=void 0,this.fsPathToEnv.clear();const e=await(0,d.getSystemEnvForGlobal)();e&&(this.globalEnv=this.findEnvironmentByPath(e),this.globalEnv||(this.globalEnv=await(0,f.resolveSystemPythonEnvironmentPath)(e,this.nativeFinder,this.api,this),this.globalEnv&&this.collection.push(this.globalEnv))),this.globalEnv||(this.globalEnv=(0,h.getLatest)(this.collection));const t=this.api.getPythonProjects().map((e=>e.uri.fsPath));for(const e of t){const t=await(0,d.getSystemEnvForWorkspace)(e);if(t){const n=this.findEnvironmentByPath(t);if(n)this.fsPathToEnv.set(e,n);else{const n=await(0,f.resolveSystemPythonEnvironmentPath)(t,this.nativeFinder,this.api,this);n?(this.fsPathToEnv.set(e,n),this.collection.push(n)):this.log.error(`Failed to resolve python environment: ${t}`)}}}}}},8468:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSystemPythonEnvironmentPath=t.processEditableInstallArgs=t.managePackages=t.refreshPackages=t.refreshPipPackages=t.refreshPythons=t.pickPackages=void 0;const r=n(1398),i=n(7951),a=n(2341),o=n(675),s=n(2490),c=n(8310),l=n(2192),u=n(2687);function h(e,t){return{label:e,description:t}}function d(e){if(e.executable&&e.version&&e.prefix){const t=function(e){switch(e){case s.NativePythonEnvironmentKind.homebrew:return"homebrew";case s.NativePythonEnvironmentKind.macXCode:return"xcode";case s.NativePythonEnvironmentKind.windowsStore:return"store";case s.NativePythonEnvironmentKind.macCommandLineTools:case s.NativePythonEnvironmentKind.macPythonOrg:case s.NativePythonEnvironmentKind.globalPaths:case s.NativePythonEnvironmentKind.linuxGlobal:case s.NativePythonEnvironmentKind.windowsRegistry:default:return}}(e.kind),n=(0,c.shortVersion)(e.version),i=t?`Python ${n} (${t})`:`Python ${n}`,a=t?`Python ${n} (${t})`:`Python ${n}`,o=t?`${n} (${t})`:`${n}`;return{name:e.name??i,displayName:e.displayName??a,shortDisplayName:o,displayPath:e.executable,version:e.version,description:void 0,tooltip:e.executable,environmentPath:r.Uri.file(e.executable),sysPrefix:e.prefix,execInfo:{run:{executable:e.executable,args:[]}}}}throw new Error(`Invalid python info: ${JSON.stringify(e)}`)}async function f(e,t){if(await(0,l.shouldUseUv)(t,e.environmentPath.fsPath))return await(0,l.runUV)(["pip","list","--python",e.execInfo.run.executable],void 0,t);try{return await(0,l.runPython)(e.execInfo.run.executable,["-m","pip","list"],void 0,t)}catch(e){throw t?.error("Error running pip list",e),t?.info("Package list retrieval attempted using pip, action can be done with uv if installed and setting `alwaysUseUv` is enabled."),e}}async function p(e,t,n){let s;try{return s=n?.showProgress?await(0,o.withProgress)({location:r.ProgressLocation.Notification},(async()=>await f(e,t))):await f(e,t),(0,u.parsePipList)(s)}catch(e){return t?.error("Error refreshing packages",e),void(0,i.showErrorMessageWithLogs)(a.SysManagerStrings.packageRefreshError,t)}}async function v(e,t,n){return(await p(e,n.log)??[]).map((r=>t.createPackageItem(r,e,n)))}function m(e){const t=[];let n=0;for(;n<e.length;)if("-e"===e[n]){const r=e[n+1];if(!r){t.push(e[n]),n++;continue}if(n+2<e.length&&"-e"===e[n+2]&&n+3<e.length){const i=e[n+3];if(i.startsWith(".[")&&i.includes("]")){const e=r+i.substring(1);t.push("-e",e),n+=4;continue}}t.push(e[n],r),n+=2}else t.push(e[n]),n++;return t}t.pickPackages=async function(e,t){const n=t.map((e=>"string"==typeof e?h(e):h(e.name,e.version))),i=await r.window.showQuickPick(n,{placeHolder:e?a.SysManagerStrings.selectUninstall:a.SysManagerStrings.selectInstall,canPickMany:!0,ignoreFocusOut:!0});return Array.isArray(i)?i.map((e=>e.label)):[]},t.refreshPythons=async function(e,t,n,r,i,a){const o=[];return(await t.refresh(e,a)).filter((e=>(0,s.isNativeEnvInfo)(e))).map((e=>e)).filter((e=>void 0===e.kind||e.kind&&[s.NativePythonEnvironmentKind.globalPaths,s.NativePythonEnvironmentKind.homebrew,s.NativePythonEnvironmentKind.linuxGlobal,s.NativePythonEnvironmentKind.macCommandLineTools,s.NativePythonEnvironmentKind.macPythonOrg,s.NativePythonEnvironmentKind.macXCode,s.NativePythonEnvironmentKind.windowsRegistry,s.NativePythonEnvironmentKind.windowsStore].includes(e.kind))).forEach((e=>{try{const t=d(e),r=n.createPythonEnvironmentItem(t,i);o.push(r)}catch(e){r.error(e.message)}})),(0,c.sortEnvironments)(o)},t.refreshPipPackages=p,t.refreshPackages=v,t.managePackages=async function(e,t,n,r,i){if(e.version.startsWith("2."))throw new Error("Python 2.* is not supported (deprecated)");const a=await(0,l.shouldUseUv)(r.log,e.environmentPath.fsPath),o=["pip","uninstall"];t.uninstall&&t.uninstall.length>0&&(a?await(0,l.runUV)([...o,"--python",e.execInfo.run.executable,...t.uninstall],void 0,r.log,i):(o.push("--yes"),await(0,l.runPython)(e.execInfo.run.executable,["-m",...o,...t.uninstall],void 0,r.log,i)));const s=["pip","install"];if(t.upgrade&&s.push("--upgrade"),t.install&&t.install.length>0){const n=m(t.install);a?await(0,l.runUV)([...s,"--python",e.execInfo.run.executable,...n],void 0,r.log,i):await(0,l.runPython)(e.execInfo.run.executable,["-m",...s,...n],void 0,r.log,i)}return await v(e,n,r)},t.processEditableInstallArgs=m,t.resolveSystemPythonEnvironmentPath=async function(e,t,n,r){const i=await t.resolve(e);if(i.executable&&i.version&&i.prefix){const e=d(i);return n.createPythonEnvironmentItem(e,r)}}},9324:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearUvEnvironments=t.removeUvEnvironment=t.addUvEnvironment=t.getUvEnvironments=t.UV_ENVS_KEY=void 0;const r=n(5333),i=n(578);async function a(){const e=await(0,i.getWorkspacePersistentState)();return await e.get(t.UV_ENVS_KEY)??[]}t.UV_ENVS_KEY=`${r.ENVS_EXTENSION_ID}:uv:UV_ENVIRONMENTS`,t.getUvEnvironments=a,t.addUvEnvironment=async function(e){const n=await(0,i.getWorkspacePersistentState)(),r=await a();r.includes(e)||(r.push(e),await n.set(t.UV_ENVS_KEY,r))},t.removeUvEnvironment=async function(e){const n=await(0,i.getWorkspacePersistentState)(),r=(await a()).filter((t=>t!==e));await n.set(t.UV_ENVS_KEY,r)},t.clearUvEnvironments=async function(){const e=await(0,i.getWorkspacePersistentState)();await e.set(t.UV_ENVS_KEY,[])}},9517:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.VenvManager=void 0;const o=a(n(1943)),s=a(n(6928)),c=n(1398),l=n(4300),u=n(5333),h=n(2341),d=n(853),f=n(4047),p=n(675),v=n(6267),m=n(8310),g=n(5175);t.VenvManager=class{constructor(e,t,n,r){this.nativeFinder=e,this.api=t,this.baseManager=n,this.log=r,this.collection=[],this.fsPathToEnv=new Map,this.skipWatcherRefresh=!1,this._onDidChangeEnvironment=new c.EventEmitter,this.onDidChangeEnvironment=this._onDidChangeEnvironment.event,this._onDidChangeEnvironments=new c.EventEmitter,this.onDidChangeEnvironments=this._onDidChangeEnvironments.event,this.name="venv",this.displayName="venv",this.description=void 0,this.tooltip=new c.MarkdownString(h.VenvManagerStrings.venvManagerDescription,!0),this.preferredPackageManagerId="ms-python.python:pip",this.iconPath=new c.ThemeIcon("python")}async initialize(){if(this._initialized)return this._initialized.promise;this._initialized=(0,f.createDeferred)();try{await this.internalRefresh(void 0,!1,h.VenvManagerStrings.venvInitialize)}finally{this._initialized.resolve()}}quickCreateConfig(){if(this.globalEnv&&this.globalEnv.version.startsWith("3."))return{description:c.l10n.t("Create a virtual environment in workspace root"),detail:c.l10n.t("Uses Python version {0} and installs workspace dependencies.",(0,m.shortVersion)(this.globalEnv.version))}}async create(e,t){try{this.skipWatcherRefresh=!0;let n,r="global"===e;if(Array.isArray(e)&&e.length>1&&(r=!0),n=r?t?.quickCreate?await(0,g.getDefaultGlobalVenvLocation)():await(0,g.getGlobalVenvLocation)():e instanceof c.Uri?e:e[0],!n)return;const i=c.Uri.file(await(0,v.findParentIfFile)(n.fsPath)),a=await this.baseManager.getEnvironments("global");let l;if(t?.quickCreate){if(!this.globalEnv)throw this.log.error("No base python found"),(0,p.showErrorMessage)(h.VenvManagerStrings.venvErrorNoBasePython),new Error("No base python found");if(!this.globalEnv.version.startsWith("3."))throw this.log.error("Did not find any base python 3.*"),a.forEach(((e,t)=>{this.log.error(`${t}: ${e.version} : ${e.environmentPath.fsPath}`)})),(0,p.showErrorMessage)(h.VenvManagerStrings.venvErrorNoPython3),new Error("Did not find any base python 3.*");this.globalEnv&&this.globalEnv.version.startsWith("3.")&&(l=await(0,g.quickCreateVenv)(this.nativeFinder,this.api,this.log,this,this.globalEnv,i,t?.additionalPackages))}else l=await(0,g.createPythonVenv)(this.nativeFinder,this.api,this.log,this,a,i,{showQuickAndCustomOptions:void 0===t?.quickCreate});if(l?.environment){const e=l.environment;this.addEnvironment(e,!0);try{let t=e.environmentPath.fsPath;try{(await o.stat(t)).isDirectory()||(t=c.Uri.file(s.dirname(s.dirname(t))).fsPath)}catch(e){(0,d.traceWarn)(`Failed to stat environment path: ${t}. Error: ${e instanceof Error?e.message:String(e)}, continuing to attempt to create .gitignore.`)}const n=s.join(t,".gitignore");await o.writeFile(n,"*\n",{flag:"w"})}catch(e){(0,d.traceError)(`Failed to create .gitignore in venv: ${e instanceof Error?e.message:String(e)}, continuing.`)}const t=e.sysPrefix;try{await c.commands.executeCommand("revealInExplorer",c.Uri.file(t))}catch(e){(0,p.showErrorMessage)(c.l10n.t("Failed to reveal venv parent folder in VS Code Explorer: but venv was still created in {0}",t)),(0,d.traceError)(`Failed to reveal venv parent folder in VS Code Explorer: ${e instanceof Error?e.message:String(e)}`)}}else l?.envCreationErr&&(0,p.showErrorMessage)(c.l10n.t("Failed to create virtual environment: {0}",l.envCreationErr));return l?.environment??void 0}finally{this.skipWatcherRefresh=!1}}async remove(e){try{if(this.skipWatcherRefresh=!0,!await(0,g.removeVenv)(e,this.log))return;this.updateCollection(e),this._onDidChangeEnvironments.fire([{environment:e,kind:l.EnvironmentChangeKind.remove}]);const t=this.updateFsPathToEnv(e);for(const n of t){const t=await this.get(n);this._onDidChangeEnvironment.fire({uri:n,old:e,new:t})}this.globalEnv?.envId.id===e.envId.id&&await this.set(void 0,void 0)}finally{this.skipWatcherRefresh=!1}}updateCollection(e){this.collection=this.collection.filter((t=>t.environmentPath.fsPath!==e.environmentPath.fsPath))}updateFsPathToEnv(e){const t=[];return this.fsPathToEnv.forEach(((n,r)=>{n.environmentPath.fsPath===e.environmentPath.fsPath&&(this.fsPathToEnv.delete(r),t.push(c.Uri.file(r)))})),t}async refresh(e){return this.internalRefresh(e,!0,h.VenvManagerStrings.venvRefreshing)}async watcherRefresh(){if(!this.skipWatcherRefresh)return this.internalRefresh(void 0,!0,h.VenvManagerStrings.venvRefreshing)}async internalRefresh(e,t,n,r=c.ProgressLocation.Window){await(0,p.withProgress)({location:r,title:n},(async()=>{const n=this.collection.map((e=>({kind:l.EnvironmentChangeKind.remove,environment:e})));this.collection=await(0,g.findVirtualEnvironments)(t,this.nativeFinder,this.api,this.log,this,e?[e]:void 0),await this.loadEnvMap();const r=this.collection.map((e=>({environment:e,kind:l.EnvironmentChangeKind.add})));this._onDidChangeEnvironments.fire([...n,...r])}))}async getEnvironments(e){if(await this.initialize(),"all"===e)return Array.from(this.collection);if(!(e instanceof c.Uri))return[];const t=this.fsPathToEnv.get(e.fsPath);return t?[t]:[]}async get(e){if(await this.initialize(),!e)return this.globalEnv;const t=this.api.getPythonProject(e);if(!t)return this.globalEnv;let n=this.fsPathToEnv.get(t.uri.fsPath);return n||(n=this.findEnvironmentByPath(t.uri.fsPath)),n??this.globalEnv}async set(e,t){if(void 0===e){const e=this.globalEnv;return this.globalEnv=t,await(0,g.setVenvForGlobal)(t?.environmentPath.fsPath),await this.resetGlobalEnv(),void(e?.envId.id!==this.globalEnv?.envId.id&&this._onDidChangeEnvironment.fire({uri:void 0,old:e,new:this.globalEnv}))}if(e instanceof c.Uri){const n=this.api.getPythonProject(e);if(!n)return;const r=this.fsPathToEnv.get(n.uri.fsPath);t?this.fsPathToEnv.set(n.uri.fsPath,t):this.fsPathToEnv.delete(n.uri.fsPath),await(0,g.setVenvForWorkspace)(n.uri.fsPath,t?.environmentPath.fsPath),r?.envId.id!==t?.envId.id&&this._onDidChangeEnvironment.fire({uri:e,old:r,new:t})}if(Array.isArray(e)&&e.every((e=>e instanceof c.Uri))){const n=[];e.map((e=>this.api.getPythonProject(e))).forEach((e=>{e&&n.push(e)}));const r=new Map;n.forEach((e=>{r.set(e.uri.fsPath,this.fsPathToEnv.get(e.uri.fsPath)),t?this.fsPathToEnv.set(e.uri.fsPath,t):this.fsPathToEnv.delete(e.uri.fsPath)})),await(0,g.setVenvForWorkspaces)(n.map((e=>e.uri.fsPath)),t?.environmentPath.fsPath),n.forEach((e=>{const n=r.get(e.uri.fsPath);n?.envId.id!==t?.envId.id&&this._onDidChangeEnvironment.fire({uri:e.uri,old:n,new:t})}))}}async resolve(e){if(e instanceof c.Uri){const t=this.findEnvironmentByPath(e.fsPath);if(t)return t}const t=await(0,g.resolveVenvPythonEnvironmentPath)(e.fsPath,this.nativeFinder,this.api,this,this.baseManager);if(t&&t.envId.managerId===`${u.PYTHON_EXTENSION_ID}:venv`)return this.addEnvironment(t,!0),t}async clearCache(){await(0,g.clearVenvCache)()}addEnvironment(e,t){if(this.collection.find((t=>t.envId.id===e.envId.id)))return;const n=this.findEnvironmentByPath(e.environmentPath.fsPath);n?(this.collection=this.collection.filter((e=>e.envId.id!==n.envId.id)),this.collection.push(e),t&&this._onDidChangeEnvironments.fire([{environment:n,kind:l.EnvironmentChangeKind.remove},{environment:e,kind:l.EnvironmentChangeKind.add}])):(this.collection.push(e),t&&this._onDidChangeEnvironments.fire([{environment:e,kind:l.EnvironmentChangeKind.add}]))}async resetGlobalEnv(){this.globalEnv=void 0;const e=await this.baseManager.getEnvironments("global");await this.loadGlobalEnv(e)}async loadGlobalEnv(e){this.globalEnv=void 0;const t=await(0,g.getVenvForGlobal)();t&&(this.globalEnv=this.findEnvironmentByPath(t)??this.findEnvironmentByPath(t,e),this.globalEnv||(this.globalEnv=await(0,g.resolveVenvPythonEnvironmentPath)(t,this.nativeFinder,this.api,this,this.baseManager),this.globalEnv&&this.addEnvironment(this.globalEnv,!1))),this.globalEnv||(this.globalEnv=(0,m.getLatest)(e))}async loadEnvMap(){const e=await this.baseManager.getEnvironments("global");await this.loadGlobalEnv(e),this.fsPathToEnv.clear();const t=(0,m.sortEnvironments)(this.collection),n=this.api.getPythonProjects().map((e=>s.normalize(e.uri.fsPath))),r=[];for(const i of n){const n=await(0,g.getVenvForWorkspace)(i);if(n){let a=this.findEnvironmentByPath(n,t)??this.findEnvironmentByPath(n,e);const o=this.fsPathToEnv.get(i),s=this.api.getPythonProject(c.Uri.file(i));if(!a){const e=await(0,g.resolveVenvPythonEnvironmentPath)(n,this.nativeFinder,this.api,this,this.baseManager);if(!e)return void this.log.error(`Failed to resolve python environment: ${n}`);this.addEnvironment(e,!1),a=e}this.fsPathToEnv.set(i,a),s&&o?.envId.id!==a.envId.id&&r.push((()=>this._onDidChangeEnvironment.fire({uri:s.uri,old:void 0,new:a})))}else{const e=t.find((e=>{const t=this.api.getPythonProject(e.environmentPath)?.uri.fsPath;return t&&s.normalize(t)===i}));e&&this.fsPathToEnv.set(i,e)}}r.forEach((e=>e()))}findEnvironmentByPath(e,t){const n=s.normalize(e);return(t??this.collection).find((e=>{const t=s.normalize(e.environmentPath.fsPath);return t===n||s.dirname(t)===n||s.dirname(s.dirname(t))===n}))}getProjectsByEnvironment(e){const t=[];return this.fsPathToEnv.forEach(((n,r)=>{if(n.envId.id===e.envId.id){const e=this.api.getPythonProject(c.Uri.file(r));e&&t.push(e)}})),t}}},3111:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createStepBasedVenvFlow=void 0;const o=a(n(1605)),s=a(n(6928)),c=n(1398),l=n(2341),u=n(781),h=n(3343),d=n(675),f=n(4931),p=n(5175);async function v(e){try{if(!e.sortedEnvs||0===e.sortedEnvs.length)return null;const t=await(0,d.showQuickPickWithButtons)([{label:l.VenvManagerStrings.quickCreate,description:l.VenvManagerStrings.quickCreateDescription,detail:`Uses Python version ${e.sortedEnvs[0].version} and installs workspace dependencies.`},{label:l.VenvManagerStrings.customize,description:l.VenvManagerStrings.customizeDescription}],{placeHolder:l.VenvManagerStrings.selectQuickOrCustomize,ignoreFocusOut:!0,showBackButton:!0});return!t||Array.isArray(t)?null:t.label===l.VenvManagerStrings.quickCreate?(e.isQuickCreate=!0,e.basePython=e.sortedEnvs[0],null):(e.isQuickCreate=!1,m)}catch(e){if(e===c.QuickInputButtons.Back)return null;throw e}}async function m(e){try{if(!e.sortedEnvs||0===e.sortedEnvs.length)return null;const t=e.sortedEnvs.map((e=>{const t=e.displayPath,n=e.description&&e.description.trim()?`${e.description} (${t})`:t;return{label:e.displayName??e.name,description:n,e}})),n=await(0,d.showQuickPickWithButtons)(t,{placeHolder:l.Pickers.Environments.selectEnvironment,ignoreFocusOut:!0,showBackButton:!0});if(!n||Array.isArray(n))return null;const r=n.e;return r&&r.execInfo?(e.basePython=r,g):null}catch(t){if(t===c.QuickInputButtons.Back)return void 0!==e.isQuickCreate?v:null;throw t}}async function g(e){try{const t=await(0,d.showInputBoxWithButtons)({prompt:l.VenvManagerStrings.venvName,value:".venv",ignoreFocusOut:!0,showBackButton:!0,validateInput:async t=>{if(!t)return l.VenvManagerStrings.venvNameErrorEmpty;if(e.venvRoot)try{const n=s.join(e.venvRoot.fsPath,t);if(await o.pathExists(n))return l.VenvManagerStrings.venvNameErrorExists}catch(e){}return null}});return t?(e.venvName=t,y):null}catch(e){if(e===c.QuickInputButtons.Back)return m;throw e}}async function y(e){try{const t={showSkipOption:!0,install:[]};if(e.api){const n=await(0,f.getWorkspacePackagesToInstall)(e.api,t,e.project,void 0);void 0!==n?(e.packageSelectionCompleted=!0,e.packages=n):(e.packageSelectionCompleted=!1,e.packages=null)}else e.packageSelectionCompleted=!0,e.packages={install:[],uninstall:[]};return null}catch(e){if(e===c.QuickInputButtons.Back)return g;throw e}}t.createStepBasedVenvFlow=async function e(t,n,r,i,a,o,l){const d=(0,p.ensureGlobalEnv)(a,r);if(0===d.length)return{envCreationErr:"No suitable Python environments found"};const g={sortedEnvs:d,api:n,project:[n.getPythonProject(o)].filter(Boolean),venvRoot:o};try{let e=l.showQuickAndCustomOptions?v:m;for(;null!==e;)e=await e(g);if(g.isQuickCreate&&g.basePython){(0,h.sendTelemetryEvent)(u.EventNames.VENV_CREATION,void 0,{creationType:"quick"});const e=s.join(o.fsPath,".venv");return await(0,p.createWithProgress)(t,n,r,i,g.basePython,o,e,{install:l.additionalPackages||[],uninstall:[]})}if(!g.isQuickCreate&&g.basePython&&g.venvName&&!1!==g.packageSelectionCompleted){(0,h.sendTelemetryEvent)(u.EventNames.VENV_CREATION,void 0,{creationType:"custom"});const e=n.getPythonProject(o),a=s.join(o.fsPath,g.venvName);let c=g.packages;c||(c=await(0,f.getWorkspacePackagesToInstall)(n,{showSkipOption:!0,install:[]},e?[e]:void 0,void 0,r));const d=[];return c?.install&&d.push(...c.install),l.additionalPackages&&d.push(...l.additionalPackages),await(0,p.createWithProgress)(t,n,r,i,g.basePython,o,a,{install:d,uninstall:[]})}return}catch(s){if(s===c.QuickInputButtons.Back)return await e(t,n,r,i,a,o,l);throw s}}},5175:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.resolveVenvPythonEnvironmentPath=t.removeVenv=t.createPythonVenv=t.quickCreateVenv=t.ensureGlobalEnv=t.createWithProgress=t.getGlobalVenvLocation=t.getDefaultGlobalVenvLocation=t.findVirtualEnvironments=t.setVenvForGlobal=t.getVenvForGlobal=t.setVenvForWorkspaces=t.setVenvForWorkspace=t.getVenvForWorkspace=t.clearVenvCache=t.VENV_GLOBAL_KEY=t.VENV_WORKSPACE_KEY=void 0;const o=a(n(1605)),s=a(n(857)),c=a(n(6928)),l=n(1398),u=n(5333),h=n(2341),d=n(853),f=n(578),p=n(781),v=n(3343),m=n(6878),g=n(675),y=n(7422),E=n(2490),w=n(8310),P=n(2192),_=n(4931),b=n(8468),S=n(9324),C=n(3111);async function T(e,n){const r=await(0,f.getWorkspacePersistentState)(),i=await r.get(t.VENV_WORKSPACE_KEY)??{};n?i[e]=n:delete i[e],await r.set(t.VENV_WORKSPACE_KEY,i)}async function I(e){if(e.executable&&e.version&&e.prefix){const t=e.name??function(e){const t=c.dirname(e);return t.endsWith("bin")||t.endsWith("Scripts")||t.endsWith("scripts")?c.basename(c.dirname(t)):c.basename(t)}(e.executable),n=(0,w.shortVersion)(e.version),r=`${t} (${n})`;let i;e.kind===E.NativePythonEnvironmentKind.venvUv&&(i=l.l10n.t("uv"));const a=c.dirname(e.executable),{shellActivation:o,shellDeactivation:s}=await(0,w.getShellActivationCommands)(a);return{name:r,displayName:r,shortDisplayName:`${n} (${t})`,displayPath:e.executable,version:e.version,description:i,tooltip:e.executable,environmentPath:l.Uri.file(e.executable),iconPath:new l.ThemeIcon("python"),sysPrefix:e.prefix,execInfo:{run:{executable:e.executable},activatedRun:{executable:e.executable},shellActivation:o,shellDeactivation:s}}}throw new Error(`Invalid python info: ${JSON.stringify(e)}`)}async function k(e,t,n,r,i,a,u,h){const d="win32"===s.platform()?c.join(u,"Scripts","python.exe"):c.join(u,"bin","python");return await(0,g.withProgress)({location:l.ProgressLocation.Notification,title:l.l10n.t("Creating virtual environment named {0} using python version {1}.",c.basename(u),i.version)},(async()=>{const s={};try{const c=await(0,P.shouldUseUv)(n,i.environmentPath.fsPath);if(i.execInfo?.run.executable&&(c?await(0,P.runUV)(["venv","--verbose","--seed","--python",i.execInfo?.run.executable,u],a.fsPath,n):await(0,P.runPython)(i.execInfo.run.executable,["-m","venv",u],a.fsPath,r.log),!await o.pathExists(d)))throw new Error("no python executable found in virtual environment");const l=await e.resolve(d),f=t.createPythonEnvironmentItem(await I(l),r);if(c&&l.kind===E.NativePythonEnvironmentKind.venvUv&&await(0,S.addUvEnvironment)(f.environmentPath.fsPath),h&&(h.install.length>0||h.uninstall.length>0))try{await t.managePackages(f,{upgrade:!1,install:h?.install,uninstall:h?.uninstall??[]})}catch(e){s.pkgInstallationErr=e instanceof Error?e.message:String(e)}s.environment=f}catch(e){n.error(`Failed to create virtual environment: ${e}`),s.envCreationErr=`Failed to create virtual environment: ${e}`}return s}))}t.VENV_WORKSPACE_KEY=`${u.ENVS_EXTENSION_ID}:venv:WORKSPACE_SELECTED`,t.VENV_GLOBAL_KEY=`${u.ENVS_EXTENSION_ID}:venv:GLOBAL_SELECTED`,t.clearVenvCache=async function(){const e=[t.VENV_WORKSPACE_KEY,t.VENV_GLOBAL_KEY,S.UV_ENVS_KEY],n=await(0,f.getWorkspacePersistentState)();await n.clear(e)},t.getVenvForWorkspace=async function(e){if(process.env.VIRTUAL_ENV)return process.env.VIRTUAL_ENV;const n=await(0,f.getWorkspacePersistentState)(),r=await n.get(t.VENV_WORKSPACE_KEY);if(r)try{const t=r[e];if(await o.pathExists(t))return t;T(e,void 0)}catch{return}},t.setVenvForWorkspace=T,t.setVenvForWorkspaces=async function(e,n){const r=await(0,f.getWorkspacePersistentState)(),i=await r.get(t.VENV_WORKSPACE_KEY)??{};e.forEach((e=>{n?i[e]=n:delete i[e]})),await r.set(t.VENV_WORKSPACE_KEY,i)},t.getVenvForGlobal=async function(){const e=await(0,f.getWorkspacePersistentState)(),n=await e.get(t.VENV_GLOBAL_KEY);if(n&&await o.pathExists(n))return n},t.setVenvForGlobal=async function(e){const n=await(0,f.getWorkspacePersistentState)();await n.set(t.VENV_GLOBAL_KEY,e)},t.findVirtualEnvironments=async function(e,t,n,r,i,a){const o=[],s=(await t.refresh(e,a)).filter((e=>(0,E.isNativeEnvInfo)(e))).map((e=>e)).filter((e=>e.kind===E.NativePythonEnvironmentKind.venv||e.kind===E.NativePythonEnvironmentKind.venvUv));for(const e of s){if(!(e.prefix&&e.executable&&e.version)){r.warn(`Invalid venv environment: ${JSON.stringify(e)}`);continue}const t=n.createPythonEnvironmentItem(await I(e),i);o.push(t),r.info(`Found venv environment: ${t.name}`),e.kind===E.NativePythonEnvironmentKind.venvUv&&await(0,S.addUvEnvironment)(t.environmentPath.fsPath)}return o},t.getDefaultGlobalVenvLocation=async function(){const e=c.join(s.homedir(),".virtualenvs");return await o.ensureDir(e),l.Uri.file(e)},t.getGlobalVenvLocation=async function(){const e=[{label:h.Common.browse,description:h.VenvManagerStrings.venvGlobalFolder}],t=(0,y.getConfiguration)("python").get("venvFolders",[]);t.length>0&&e.push({label:h.VenvManagerStrings.venvGlobalFoldersSetting,kind:l.QuickPickItemKind.Separator},...t.map((e=>({label:c.basename(e),description:c.resolve(e),uri:l.Uri.file(c.resolve(e))})))),process.env.WORKON_HOME&&e.push({label:"virtualenvwrapper",kind:l.QuickPickItemKind.Separator},{label:"WORKON_HOME (env variable)",description:process.env.WORKON_HOME,uri:l.Uri.file(process.env.WORKON_HOME)});const n=await(0,g.showQuickPick)(e,{placeHolder:h.VenvManagerStrings.venvGlobalFolder,ignoreFocusOut:!0});if(n)if(n.label===h.Common.browse){const e=await(0,g.showOpenDialog)({canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,openLabel:h.Common.selectFolder});if(e&&e.length>0)return e[0]}else if(n.uri)return n.uri},t.createWithProgress=k,t.ensureGlobalEnv=function(e,t){if(0===e.length)throw t.error("No base python found"),(0,g.showErrorMessage)(h.VenvManagerStrings.venvErrorNoBasePython),new Error("No base python found");const n=e.filter((e=>e.version.startsWith("3.")));if(0===n.length)throw t.error("Did not find any base python 3.*"),(0,g.showErrorMessage)(h.VenvManagerStrings.venvErrorNoPython3),e.forEach(((e,n)=>{t.error(`${n}: ${e.version} : ${e.environmentPath.fsPath}`)})),new Error("Did not find any base python 3.*");return(0,w.sortEnvironments)(n)},t.quickCreateVenv=async function(e,t,n,r,i,a,s){const l=t.getPythonProject(a);(0,v.sendTelemetryEvent)(p.EventNames.VENV_CREATION,void 0,{creationType:"quick"});const u=await(0,_.getProjectInstallable)(t,l?[l]:void 0),h=[];h.push(...u?.flatMap((e=>e.args??[]))??[]),s&&h.push(...s);let d=c.join(a.fsPath,".venv");if(await o.pathExists(d)){let e=1;for(;await o.pathExists(`${d}-${e}`);)e++;d=`${d}-${e}`}return await k(e,t,n,r,i,a,d,{install:h,uninstall:[]})},t.createPythonVenv=async function(e,t,n,r,i,a,o){return(0,C.createStepBasedVenvFlow)(e,t,n,r,i,a,o)},t.removeVenv=async function(e,t){const n="win32"===s.platform()?"python.exe":"python",r=e.environmentPath.fsPath.endsWith(n)?c.dirname(c.dirname(e.environmentPath.fsPath)):e.environmentPath.fsPath,i=(0,m.normalizePath)(r),a=await(0,g.showWarningMessage)(l.l10n.t("Are you sure you want to remove {0}?",i),{modal:!0},{title:h.Common.yes},{title:h.Common.no,isCloseAffordance:!0});return a?.title===h.Common.yes?await(0,g.withProgress)({location:l.ProgressLocation.Notification,title:h.VenvManagerStrings.venvRemoving},(async()=>{try{return await o.remove(r),await(0,S.removeUvEnvironment)(e.environmentPath.fsPath),!0}catch(e){return t.error(`Failed to remove virtual environment: ${e}`),(0,g.showErrorMessage)(h.VenvManagerStrings.venvRemoveFailed),!1}})):((0,d.traceInfo)(`User cancelled removal of virtual environment: ${i}`),!1)},t.resolveVenvPythonEnvironmentPath=async function(e,t,n,r,i){const a=await t.resolve(e);if(a.kind===E.NativePythonEnvironmentKind.venv||a.kind===E.NativePythonEnvironmentKind.venvUv){const e=await I(a);return n.createPythonEnvironmentItem(e,r)}return(0,b.resolveSystemPythonEnvironmentPath)(e,t,n,i)}},2490:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createNativePythonFinder=t.clearCacheDirectory=t.getCacheDirectory=t.getAllExtraSearchPaths=t.NativePythonEnvironmentKind=t.isNativeEnvInfo=t.getNativePythonToolsPath=void 0;const o=a(n(5317)),s=a(n(1605)),c=a(n(6928)),l=n(2203),u=n(1398),h=a(n(7123)),d=n(5333),f=n(9066),p=n(853),v=n(6878),m=n(6682),g=n(5344),y=n(7422),E=n(8310);async function w(){const e=(0,f.getExtension)(d.ENVS_EXTENSION_ID);if(e){const t=c.join(e.extensionPath,"python-env-tools","bin",(0,m.isWindows)()?"pet.exe":"pet");if(await s.pathExists(t))return t}const t=(0,f.getExtension)(d.PYTHON_EXTENSION_ID);if(!t)throw new Error("Python extension not found");return c.join(t.extensionPath,"python-env-tools","bin",(0,m.isWindows)()?"pet.exe":"pet")}var P;t.getNativePythonToolsPath=w,t.isNativeEnvInfo=function(e){return!e.tool},function(e){e.conda="Conda",e.homebrew="Homebrew",e.pyenv="Pyenv",e.globalPaths="GlobalPaths",e.pyenvVirtualEnv="PyenvVirtualEnv",e.pipenv="Pipenv",e.poetry="Poetry",e.macPythonOrg="MacPythonOrg",e.macCommandLineTools="MacCommandLineTools",e.linuxGlobal="LinuxGlobal",e.macXCode="MacXCode",e.venv="Venv",e.venvUv="Uv",e.virtualEnv="VirtualEnv",e.virtualEnvWrapper="VirtualEnvWrapper",e.windowsStore="WindowsStore",e.windowsRegistry="WindowsRegistry"}(P||(t.NativePythonEnvironmentKind=P={}));class _{constructor(e,t,n,r){this.outputChannel=e,this.toolPath=t,this.api=n,this.cacheDirectory=r,this.cache=new Map,this.connection=this.start(),this.pool=(0,g.createRunningWorkerPool)((async e=>await this.doRefresh(e)),1,"NativeRefresh-task")}async resolve(e){await this.configure();const t=await this.connection.sendRequest("resolve",{executable:e});return this.outputChannel.info(`Resolved Python Environment ${t.executable}`),t}async refresh(e,t){return e?this.handleHardRefresh(t):this.handleSoftRefresh(t)}getKey(e){return void 0===e?"all":"string"==typeof e?e:Array.isArray(e)?e.map((e=>e.fsPath)).join(","):"all"}async handleHardRefresh(e){const t=this.getKey(e);this.cache.delete(t),e?(0,p.traceVerbose)("Finder - from cache environments",t):(0,p.traceVerbose)("Finder - refreshing all environments");const n=await this.pool.addToQueue(e);return this.cache.set(t,n),n}async handleSoftRefresh(e){const t=this.getKey(e),n=this.cache.get(t);return n?(e?(0,p.traceVerbose)("Finder - from cache environments",t):(0,p.traceVerbose)("Finder - from cache refreshing all environments"),n):this.handleHardRefresh(e)}dispose(){this.connection.dispose()}getRefreshOptions(e){const t=b("venvFolders")??[];if(e){if("string"==typeof e)return{searchKind:e};if(Array.isArray(e)){const n=e.map((e=>e.fsPath));return n.push(...t),{searchPaths:n}}}}start(){this.outputChannel.info(`[pet] Starting Python Locator ${this.toolPath} server`);const e=new l.PassThrough,t=new l.PassThrough,n=[];try{const r=o.spawn(this.toolPath,["server"],{env:process.env});r.stdout.pipe(e,{end:!1}),r.stderr.on("data",(e=>this.outputChannel.error(`[pet] ${e.toString()}`))),t.pipe(r.stdin,{end:!1}),n.push({dispose:()=>{try{null===r.exitCode&&r.kill()}catch(e){this.outputChannel.error("[pet] Error disposing finder",e)}}})}catch(e){this.outputChannel.error(`[pet] Error starting Python Finder ${this.toolPath} server`,e)}const r=h.createMessageConnection(new h.StreamMessageReader(e),new h.StreamMessageWriter(t));return n.push(r,new u.Disposable((()=>{e.end(),t.end()})),r.onError((e=>{this.outputChannel.error("[pet] Connection Error:",e)})),r.onNotification("log",(e=>{const t=`[pet] ${e.message}`;switch(e.level){case"info":this.outputChannel.info(t);break;case"warning":this.outputChannel.warn(t);break;case"error":this.outputChannel.error(t);break;case"debug":this.outputChannel.debug(t);break;default:this.outputChannel.trace(t)}})),r.onNotification("telemetry",(e=>this.outputChannel.info("[pet] Telemetry: ",e))),r.onClose((()=>{n.forEach((e=>e.dispose()))}))),r.listen(),r}async doRefresh(e){const t=[],n=[],r=[];try{await this.configure();const i=this.getRefreshOptions(e);t.push(this.connection.onNotification("environment",(e=>{this.outputChannel.info(`Discovered env: ${e.executable||e.prefix}`),!e.executable||e.version&&e.prefix?r.push(e):n.push(this.connection.sendRequest("resolve",{executable:e.executable}).then((e=>{this.outputChannel.info(`Resolved environment during PET refresh: ${e.executable}`),r.push(e)})).catch((t=>this.outputChannel.error(`Error in Resolving ${JSON.stringify(e)}`,t))))})),this.connection.onNotification("manager",(e=>{this.outputChannel.info(`Discovered manager: (${e.tool}) ${e.executable}`),r.push(e)}))),await this.connection.sendRequest("refresh",i),await Promise.all(n)}catch(e){throw this.outputChannel.error("[pet] Error refreshing",e),e}finally{t.forEach((e=>e.dispose()))}return r}async configure(){const e=await S(),t={workspaceDirectories:this.api.getPythonProjects().map((e=>e.uri.fsPath)),environmentDirectories:e,condaExecutable:b("condaPath"),poetryExecutable:b("poetryPath"),cacheDirectory:this.cacheDirectory?.fsPath};if(JSON.stringify(t)!==JSON.stringify(this.lastConfiguration||{})){this.outputChannel.info("[pet] configure: Sending configuration update:",JSON.stringify(t));try{this.lastConfiguration=t,await this.connection.sendRequest("configure",t)}catch(e){this.outputChannel.error("[pet] configure: Configuration error",e)}}else this.outputChannel.debug("[pet] configure: No changes detected, skipping configuration update.")}}function b(e,t){const n=(0,y.getConfiguration)("python",t).get(e);return"string"==typeof n?n?(0,v.untildify)(n):void 0:n}async function S(){const e=[],t=function(){const e=[],t=b("venvPath");return t&&e.push((0,v.untildify)(t)),(b("venvFolders")??[]).forEach((t=>{e.push(t)})),Array.from(new Set(e))}();e.push(...t);const n=function(){try{const e=(0,y.getConfiguration)("python-env").inspect("globalSearchPaths"),t=e?.globalValue||[];return(0,v.untildifyArray)(t)}catch(e){return(0,p.traceError)("Error getting globalSearchPaths:",e),[]}}().filter((e=>e&&""!==e.trim()));e.push(...n);const r=function(){try{const e=(0,y.getConfiguration)("python-env").inspect("workspaceSearchPaths");return e?.globalValue&&(0,p.traceError)("Error: python-env.workspaceSearchPaths is set at the user/global level, but this setting can only be set at the workspace or workspace folder level."),e?.workspaceFolderValue?e.workspaceFolderValue:e?.workspaceValue?e.workspaceValue:[]}catch(e){return(0,p.traceError)("Error getting workspaceSearchPaths:",e),[]}}();for(const t of r){if(!t||""===t.trim())continue;const n=t.trim();if(c.isAbsolute(n))e.push(n);else{const t=(0,y.getWorkspaceFolders)();if(t)for(const r of t){const t=c.resolve(r.uri.fsPath,n);e.push(t)}else(0,p.traceWarn)("Warning: No workspace folders found for relative path:",n)}}const i=Array.from(new Set(e));return(0,p.traceLog)("getAllExtraSearchPaths completed. Total unique search directories:",i.length,"Paths:",i),i}function C(e){return u.Uri.joinPath(e.globalStorageUri,"pythonLocator")}t.getAllExtraSearchPaths=S,t.getCacheDirectory=C,t.clearCacheDirectory=async function(e){const t=C(e);await s.emptyDir(t.fsPath).catch(E.noop)},t.createNativePythonFinder=async function(e,t,n){return new _(e,await w(),t,C(n))}},7712:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectFromInstallableToInstall=t.selectFromCommonPackagesToInstall=void 0;const r=n(1398),i=n(5920),a=n(2341),o=n(675),s={iconPath:new r.ThemeIcon("globe"),tooltip:a.Common.openInBrowser},c={iconPath:new r.ThemeIcon("go-to-file"),tooltip:a.Common.openInEditor},l={iconPath:new r.ThemeIcon("add"),tooltip:a.PackageManagement.editArguments};function u(e){e&&(e.scheme.toLowerCase().startsWith("http")?(0,i.launchBrowser)(e):(0,o.showTextDocument)(e))}function h(e){if(e.args&&e.args.length>0){if(1===e.args.length&&e.args[0]===e.name)return;return e.args.join(" ")}}function d(e){const t=e.description?h(e):void 0,n=e.description?e.description:h(e),r=e.uri?e.uri.scheme.startsWith("http")?[s]:[c]:void 0;return{label:e.displayName,detail:t,description:n,buttons:r,uri:e.uri,args:e.args,id:e.name}}function f(e,t){const n=e,r=[];return t.forEach((t=>{e.find((e=>t===e))||r.push(t)})),{install:n,uninstall:r}}t.selectFromCommonPackagesToInstall=async function e(t,n,i,s){const{installedItems:c,items:h}=function(e,t){const n=[],i=[];e.forEach((e=>{t?.find((t=>e.id===t))?n.push(e):i.push(e)}));const o={id:"installed-sep",label:a.PackageManagement.installed,kind:r.QuickPickItemKind.Separator},s={id:"common-packages-sep",label:a.PackageManagement.commonPackages,kind:r.QuickPickItemKind.Separator};return{items:[o,...n,s,...i],installedItems:n}}(t.map(d),n),p=h.filter((e=>(i??c).some((t=>t.id===e.id))));let v;try{v=await(0,o.showQuickPickWithButtons)(h,{placeHolder:a.PackageManagement.selectPackagesToInstall,ignoreFocusOut:!0,canPickMany:!0,showBackButton:s?.showBackButton,buttons:[l],selected:p},void 0,(e=>{u(e.item.uri)}))}catch(e){if(e===r.QuickInputButtons.Back)throw e;if(e.button===l&&e.item){const t=Array.isArray(e.item)?e.item:[e.item];v=[{id:a.PackageManagement.enterPackageNames,label:a.PackageManagement.enterPackageNames,alwaysShow:!0},...t]}}if(v&&Array.isArray(v)){if(!v.find((e=>e.label===a.PackageManagement.enterPackageNames)))return f(v.map((e=>e.id)),n);{const i=v.filter((e=>e.label!==a.PackageManagement.enterPackageNames));try{const e=await async function(e){const t=await(0,o.showInputBoxWithButtons)({placeHolder:a.PackageManagement.enterPackagesPlaceHolder,value:void 0,ignoreFocusOut:!0,showBackButton:!0});return t?.split(" ")}();return e?{install:f(e,n).install,uninstall:[]}:void 0}catch(a){return a===r.QuickInputButtons.Back?e(t,n,i):void 0}}}},t.selectFromInstallableToInstall=async function(e,t,n){const i=[];if(!(e&&e.length>0))return;i.push(...function(e){const t=new Map,n=[];e.forEach((e=>{if(e.group){let n=t.get(e.group);n||(n=[],t.set(e.group,n)),n.push(e)}else n.push(e)}));const i=[];return t.forEach(((e,t)=>{i.push({id:t,label:t,kind:r.QuickPickItemKind.Separator}),i.push(...e.map(d))})),n.length>0&&(i.push({id:a.PackageManagement.workspaceDependencies,label:a.PackageManagement.workspaceDependencies,kind:r.QuickPickItemKind.Separator}),i.push(...n.map(d))),i}(e));let s=i.filter((e=>e.kind!==r.QuickPickItemKind.Separator)).filter((e=>t?.find((t=>t.id===e.id&&t.description===e.description&&t.detail===e.detail))));const c=await(0,o.showQuickPickWithButtons)(i,{placeHolder:a.PackageManagement.selectPackagesToInstall,ignoreFocusOut:!0,canPickMany:!0,showBackButton:n?.showBackButton,selected:s},void 0,(e=>{u(e.item.uri)}));return c?Array.isArray(c)?{install:c.flatMap((e=>e.args??[])),uninstall:[]}:{install:c.args??[],uninstall:[]}:void 0}},8310:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.removeFirstDefaultEnvManagerSettingDetailed=t.notifyMissingManagerIfDefault=t.getShellActivationCommands=t.compareVersions=t.pathForGitBash=t.mergePackages=t.getLatest=t.sortEnvironments=t.isGreater=t.shortVersion=t.isNumber=t.noop=void 0;const s=a(n(1605)),c=o(n(6928)),l=n(1398),u=n(853),h=n(6682),d=n(11),f=n(8477);function p(e,t){if(!e&&!t)return!1;if(!e)return!1;if(!t)return!0;try{const n=e.split("."),r=t.split(".");for(let e=0;e<n.length;e++){if(e>=r.length)return!0;const t=parseInt(n[e],10),i=parseInt(r[e],10);if(t>i)return!0;if(t<i)return!1}}catch{return!1}return!1}function v(e){return(0,h.isWindows)()?e.replace(/\\/g,"/").replace(/^([a-zA-Z]):/,"/$1"):e}t.noop=function(){},t.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},t.shortVersion=function(e){const t=/(\d)\.(\d+)(?:\.(\d+)?)?/gm.exec(e);return t?t[3]?`${t[1]}.${t[2]}.${t[3]}`:`${t[1]}.${t[2]}.x`:e},t.isGreater=p,t.sortEnvironments=function(e){return e.sort(((e,t)=>{if(e.version!==t.version)return p(e.version,t.version)?-1:1;const n=e.name.localeCompare(t.name);return 0!==n?n:e.environmentPath.fsPath.localeCompare(t.environmentPath.fsPath)}))},t.getLatest=function(e){if(0===e.length)return;let t=e[0];for(const n of e)p(n.version,t.version)&&(t=n);return t},t.mergePackages=function(e,t){const n=t.filter((t=>!e.some((e=>e.name===t))));return e.concat(n.map((e=>({name:e,displayName:e})))).sort(((e,t)=>e.name.localeCompare(t.name)))},t.pathForGitBash=v,t.compareVersions=function(e,t){const n=e.split(".").map(Number),r=t.split(".").map(Number);for(let e=0;e<Math.max(n.length,r.length);e++){const t=n[e]||0,i=r[e]||0;if(t>i)return 1;if(t<i)return-1}return 0},t.getShellActivationCommands=async function(e){const t=new Map,n=new Map;return(0,h.isWindows)()?(t.set("unknown",[{executable:c.default.join(e,"activate")}]),n.set("unknown",[{executable:c.default.join(e,"deactivate")}])):(t.set("unknown",[{executable:"source",args:[c.default.join(e,"activate")]}]),n.set("unknown",[{executable:"deactivate"}])),t.set(d.ShellConstants.SH,[{executable:"source",args:[c.default.join(e,"activate")]}]),n.set(d.ShellConstants.SH,[{executable:"deactivate"}]),t.set(d.ShellConstants.BASH,[{executable:"source",args:[c.default.join(e,"activate")]}]),n.set(d.ShellConstants.BASH,[{executable:"deactivate"}]),t.set(d.ShellConstants.GITBASH,[{executable:"source",args:[v(c.default.join(e,"activate"))]}]),n.set(d.ShellConstants.GITBASH,[{executable:"deactivate"}]),t.set(d.ShellConstants.ZSH,[{executable:"source",args:[c.default.join(e,"activate")]}]),n.set(d.ShellConstants.ZSH,[{executable:"deactivate"}]),t.set(d.ShellConstants.KSH,[{executable:".",args:[c.default.join(e,"activate")]}]),n.set(d.ShellConstants.KSH,[{executable:"deactivate"}]),await s.pathExists(c.default.join(e,"Activate.ps1"))?(t.set(d.ShellConstants.PWSH,[{executable:"&",args:[c.default.join(e,"Activate.ps1")]}]),n.set(d.ShellConstants.PWSH,[{executable:"deactivate"}])):await s.pathExists(c.default.join(e,"activate.ps1"))&&(t.set(d.ShellConstants.PWSH,[{executable:"&",args:[c.default.join(e,"activate.ps1")]}]),n.set(d.ShellConstants.PWSH,[{executable:"deactivate"}])),await s.pathExists(c.default.join(e,"activate.bat"))&&(t.set(d.ShellConstants.CMD,[{executable:c.default.join(e,"activate.bat")}]),n.set(d.ShellConstants.CMD,[{executable:c.default.join(e,"deactivate.bat")}])),await s.pathExists(c.default.join(e,"activate.csh"))&&(t.set(d.ShellConstants.CSH,[{executable:"source",args:[c.default.join(e,"activate.csh")]}]),n.set(d.ShellConstants.CSH,[{executable:"deactivate"}]),t.set(d.ShellConstants.FISH,[{executable:"source",args:[c.default.join(e,"activate.csh")]}]),n.set(d.ShellConstants.FISH,[{executable:"deactivate"}])),await s.pathExists(c.default.join(e,"activate.fish"))&&(t.set(d.ShellConstants.FISH,[{executable:"source",args:[c.default.join(e,"activate.fish")]}]),n.set(d.ShellConstants.FISH,[{executable:"deactivate"}])),await s.pathExists(c.default.join(e,"activate.xsh"))&&(t.set(d.ShellConstants.XONSH,[{executable:"source",args:[c.default.join(e,"activate.xsh")]}]),n.set(d.ShellConstants.XONSH,[{executable:"deactivate"}])),await s.pathExists(c.default.join(e,"activate.nu"))&&(t.set(d.ShellConstants.NU,[{executable:"overlay",args:["use",c.default.join(e,"activate.nu")]}]),n.set(d.ShellConstants.NU,[{executable:"overlay",args:["hide","activate"]}])),{shellActivation:t,shellDeactivation:n}};let m=!1;async function g(e){const t=l.workspace.getConfiguration("python-envs"),n=t.inspect("defaultEnvManager");return void 0!==n?.workspaceFolderValue&&n.workspaceFolderValue===e?(await t.update("defaultEnvManager",void 0,l.ConfigurationTarget.WorkspaceFolder),(0,u.traceLog)("[python-envs] Removed 'defaultEnvManager' from Workspace Folder settings."),{found:!0,scope:"Workspace Folder"}):void 0!==n?.workspaceValue&&n.workspaceValue===e?(await t.update("defaultEnvManager",void 0,l.ConfigurationTarget.Workspace),(0,u.traceLog)("[python-envs] Removed 'defaultEnvManager' from Workspace settings."),{found:!0,scope:"Workspace"}):void 0!==n?.globalValue&&n.globalValue===e?(await t.update("defaultEnvManager",void 0,l.ConfigurationTarget.Global),(0,u.traceLog)("[python-envs] Removed 'defaultEnvManager' from User/Global settings."),{found:!0,scope:"User/Global"}):((0,u.traceVerbose)(`[python-envs] Could not find 'defaultEnvManager' set to '${e}' in any scope.`),{found:!1})}t.notifyMissingManagerIfDefault=async function(e,t,n){const r=(0,f.getDefaultEnvManagerSetting)(t);if(r===e){if(m)return;m=!0,(0,f.setDefaultEnvManagerBroken)(!0),await n.refreshEnvironments(void 0),l.window.showErrorMessage(l.l10n.t("The default environment manager is set to '{0}', but the {1} executable could not be found.",r,e.split(":")[1]),l.l10n.t("Reset setting"),l.l10n.t("View setting"),l.l10n.t("Close")).then((async t=>{"Reset setting"===t&&((await g(e)).found||l.window.showErrorMessage(l.l10n.t("Could not find a setting for 'defaultEnvManager' set to '{0}' to reset.",e),l.l10n.t("Open settings"),l.l10n.t("Close")).then((e=>{"Open settings"===e&&l.commands.executeCommand("workbench.action.openSettings","python-envs.defaultEnvManager")}))),"View setting"===t&&l.commands.executeCommand("workbench.action.openSettings","python-envs.defaultEnvManager")}))}},t.removeFirstDefaultEnvManagerSettingDetailed=g},4072:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CondaEnvManager=void 0;const o=a(n(1605)),s=a(n(6928)),c=n(1398),l=n(4300),u=n(2341),h=n(853),d=n(4047),f=n(675),p=n(5441);t.CondaEnvManager=class{constructor(e,t,n){this.nativeFinder=e,this.api=t,this.log=n,this.collection=[],this.fsPathToEnv=new Map,this._onDidChangeEnvironment=new c.EventEmitter,this.onDidChangeEnvironment=this._onDidChangeEnvironment.event,this._onDidChangeEnvironments=new c.EventEmitter,this.onDidChangeEnvironments=this._onDidChangeEnvironments.event,this.name="conda",this.displayName="Conda",this.preferredPackageManagerId="ms-python.python:conda",this.tooltip=new c.MarkdownString(u.CondaStrings.condaManager,!0)}dispose(){this.collection=[],this.fsPathToEnv.clear()}async initialize(){if(this._initialized)return this._initialized.promise;this._initialized=(0,d.createDeferred)(),await(0,f.withProgress)({location:c.ProgressLocation.Window,title:u.CondaStrings.condaDiscovering},(async()=>{this.collection=await(0,p.refreshCondaEnvs)(!1,this.nativeFinder,this.api,this.log,this),await this.loadEnvMap(),this._onDidChangeEnvironments.fire(this.collection.map((e=>({environment:e,kind:l.EnvironmentChangeKind.add}))))})),this._initialized.resolve()}async getEnvironments(e){if(await this.initialize(),"all"===e)return Array.from(this.collection);if("global"===e)return this.collection.filter((e=>{e.name}));if(e instanceof c.Uri){const t=this.fromEnvMap(e);if(t)return[t]}return[]}quickCreateConfig(){if(this.globalEnv)return{description:c.l10n.t("Create a conda environment"),detail:c.l10n.t("Uses Python version {0} and installs workspace dependencies.",this.globalEnv.version)}}async create(e,t){try{let n;if(t?.quickCreate){let r,i="./.conda";if("global"===e||Array.isArray(e)&&e.length>1)r=await(0,p.getDefaultCondaPrefix)(),i=await(0,p.generateName)(r);else{const t=this.api.getPythonProject(e instanceof c.Uri?e:e[0]);r=t?.uri.fsPath}if(!r)return void(0,f.showErrorMessage)(u.CondaStrings.quickCreateCondaNoEnvRoot);if(!i)return void(0,f.showErrorMessage)(u.CondaStrings.quickCreateCondaNoName);n=await(0,p.quickCreateConda)(this.api,this.log,this,r,i,t?.additionalPackages)}else n=await(0,p.createCondaEnvironment)(this.api,this.log,this,"global"===e?void 0:e);if(n){this.addEnvironment(n);try{const e=this.api.getPythonProjects().map((e=>e.uri.fsPath)),t=n.environmentPath?.fsPath;if(t&&e.some((e=>t.startsWith(e)))){const e=s.join(t,".gitignore");await o.writeFile(e,"*\n",{flag:"w"})}}catch(e){(0,h.traceError)(`Failed to create .gitignore in conda env: ${e instanceof Error?e.message:String(e)}`)}}return n}catch(e){return this.log.error("Failed to create conda environment:",e),void(0,f.showErrorMessage)(c.l10n.t("Failed to create conda environment: {0}",e instanceof Error?e.message:String(e)))}}addEnvironment(e,t=!0){this.collection.push(e),t&&this._onDidChangeEnvironments.fire([{kind:l.EnvironmentChangeKind.add,environment:e}])}removeEnvironment(e,t=!0){this.collection=this.collection.filter((t=>t.envId.id!==e.envId.id)),Array.from(this.fsPathToEnv.entries()).filter((([,t])=>t.envId.id===e.envId.id)).forEach((([e])=>this.fsPathToEnv.delete(e))),t&&this._onDidChangeEnvironments.fire([{kind:l.EnvironmentChangeKind.remove,environment:e}])}async remove(e){try{const t=this.getProjectsForEnvironment(e);this.removeEnvironment(e,!1),await(0,p.deleteCondaEnvironment)(e,this.log),setImmediate((()=>{this._onDidChangeEnvironments.fire([{kind:l.EnvironmentChangeKind.remove,environment:e}]),t.forEach((t=>this._onDidChangeEnvironment.fire({uri:t.uri,old:e,new:void 0})))}))}catch(e){this.log.error("Failed to delete conda environment:",e)}}async refresh(e){void 0===e&&await(0,f.withProgress)({location:c.ProgressLocation.Window,title:u.CondaStrings.condaRefreshingEnvs},(async()=>{this.log.info("Refreshing Conda Environments");const e=this.collection.map((e=>e));this.collection=await(0,p.refreshCondaEnvs)(!0,this.nativeFinder,this.api,this.log,this),await this.loadEnvMap();const t=[...e.map((e=>({kind:l.EnvironmentChangeKind.remove,environment:e}))),...this.collection.map((e=>({kind:l.EnvironmentChangeKind.add,environment:e})))];this._onDidChangeEnvironments.fire(t)}))}async get(e){if(await this.initialize(),e instanceof c.Uri){let t=this.fsPathToEnv.get(e.fsPath);if(t)return t;const n=this.api.getPythonProject(e);if(n&&(t=this.fsPathToEnv.get(n.uri.fsPath),t))return t}return this.globalEnv}async set(e,t){const n=t?await(0,p.checkForNoPythonCondaEnvironment)(this.nativeFinder,this,t,this.api,this.log):void 0;if(void 0===e)await(0,p.setCondaForGlobal)(n?.environmentPath?.fsPath);else if(e instanceof c.Uri){const t=this.api.getPythonProject(e),r=t?.uri?.fsPath??e.fsPath;r&&(n?this.fsPathToEnv.set(r,n):this.fsPathToEnv.delete(r),await(0,p.setCondaForWorkspace)(r,n?.environmentPath.fsPath))}else if(Array.isArray(e)&&e.every((e=>e instanceof c.Uri))){const t=[];e.map((e=>this.api.getPythonProject(e))).forEach((e=>{e&&t.push(e)}));const r=new Map;t.forEach((e=>{r.set(e.uri.fsPath,this.fsPathToEnv.get(e.uri.fsPath)),n?this.fsPathToEnv.set(e.uri.fsPath,n):this.fsPathToEnv.delete(e.uri.fsPath)})),await(0,p.setCondaForWorkspaces)(t.map((e=>e.uri.fsPath)),n?.environmentPath.fsPath),t.forEach((e=>{const t=r.get(e.uri.fsPath);t?.envId.id!==n?.envId.id&&this._onDidChangeEnvironment.fire({uri:e.uri,old:t,new:n})}))}t&&n&&n.envId.id!==t.envId.id&&(this.removeEnvironment(t,!1),this.addEnvironment(n,!1),setImmediate((()=>{this._onDidChangeEnvironments.fire([{kind:l.EnvironmentChangeKind.remove,environment:t},{kind:l.EnvironmentChangeKind.add,environment:n}]);const r=e?e instanceof c.Uri?e:e[0]:void 0;this._onDidChangeEnvironment.fire({uri:r,old:t,new:n})})))}async resolve(e){if(await this.initialize(),e instanceof c.Uri){const t=await(0,p.resolveCondaPath)(e.fsPath,this.nativeFinder,this.api,this.log,this);if(t){return this.findEnvironmentByPath(t.environmentPath.fsPath)||(this.collection.push(t),this._onDidChangeEnvironments.fire([{kind:l.EnvironmentChangeKind.add,environment:t}]),t)}}}async clearCache(){await(0,p.clearCondaCache)()}async loadEnvMap(){this.globalEnv=void 0,this.fsPathToEnv.clear();const e=await(0,p.getCondaForGlobal)();e&&(this.globalEnv=this.findEnvironmentByPath(e),this.globalEnv||(this.globalEnv=await(0,p.resolveCondaPath)(e,this.nativeFinder,this.api,this.log,this),this.globalEnv&&this.collection.push(this.globalEnv))),this.globalEnv||(this.globalEnv=this.findEnvironmentByName("base"));const t=this.collection.filter((e=>this.api.getPythonProject(e.environmentPath))).sort(((e,t)=>e.environmentPath.fsPath!==t.environmentPath.fsPath?e.environmentPath.fsPath.length-t.environmentPath.fsPath.length:e.environmentPath.fsPath.localeCompare(t.environmentPath.fsPath))),n=this.api.getPythonProjects().map((e=>e.uri.fsPath));for(const e of n){const n=await(0,p.getCondaForWorkspace)(e);if(n){const t=this.findEnvironmentByPath(n);if(t)this.fsPathToEnv.set(e,t);else{const t=await(0,p.resolveCondaPath)(n,this.nativeFinder,this.api,this.log,this);t?(this.fsPathToEnv.set(e,t),this.collection.push(t)):this.log.error(`Failed to resolve conda environment: ${n}`)}}else if(1===t.length)this.fsPathToEnv.set(e,t[0]);else{const n=t.find((t=>{const n=this.api.getPythonProject(t.environmentPath)?.uri.fsPath;return n&&s.normalize(n)===e}));n&&this.fsPathToEnv.set(e,n)}}}fromEnvMap(e){const t=this.fsPathToEnv.get(e.fsPath);if(t)return t;const n=this.api.getPythonProject(e);return n?this.fsPathToEnv.get(n.uri.fsPath):void 0}getProjectsForEnvironment(e){return Array.from(this.fsPathToEnv.entries()).filter((([,t])=>t===e)).map((([e])=>this.api.getPythonProject(c.Uri.file(e)))).filter((e=>void 0!==e))}findEnvironmentByPath(e){const t=s.normalize(e);return this.collection.find((e=>{const n=s.normalize(e.environmentPath.fsPath);return n===t||s.dirname(n)===t||s.dirname(s.dirname(n))===t}))}findEnvironmentByName(e){return this.collection.find((t=>t.name===e))}}},4469:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CondaPackageManager=void 0;const r=n(1398),i=n(4300),a=n(7951),o=n(2341),s=n(675),c=n(5441);function l(e,t){const n=[];return e.forEach((e=>{n.push({kind:i.PackageChangeKind.remove,pkg:e})})),t.forEach((e=>{n.push({kind:i.PackageChangeKind.add,pkg:e})})),n}t.CondaPackageManager=class{constructor(e,t){this.api=e,this.log=t,this._onDidChangePackages=new r.EventEmitter,this.onDidChangePackages=this._onDidChangePackages.event,this.packages=new Map,this.name="conda",this.displayName="Conda",this.description=o.CondaStrings.condaPackageMgr,this.tooltip=o.CondaStrings.condaPackageMgr}async manage(e,t){let n=[...t.install??[]],i=[...t.uninstall??[]];if(0===n.length&&0===i.length){const r=await(0,c.getCommonCondaPackagesToInstall)(e,t,this.api);if(!r)return;n=r.install,i=r.uninstall}const u={...t,install:n,uninstall:i};await(0,s.withProgress)({location:r.ProgressLocation.Notification,title:o.CondaStrings.condaInstallingPackages,cancellable:!0},(async(t,n)=>{try{const t=this.packages.get(e.envId.id)??[],r=await(0,c.managePackages)(e,u,this.api,this,n,this.log),i=l(t,r);this.packages.set(e.envId.id,r),this._onDidChangePackages.fire({environment:e,manager:this,changes:i})}catch(e){if(e instanceof r.CancellationError)throw e;this.log.error("Error installing packages",e),setImmediate((async()=>{await(0,a.showErrorMessageWithLogs)(o.CondaStrings.condaInstallError,this.log)}))}}))}async refresh(e){await(0,s.withProgress)({location:r.ProgressLocation.Window,title:o.CondaStrings.condaRefreshingPackages},(async()=>{const t=this.packages.get(e.envId.id)??[],n=await(0,c.refreshPackages)(e,this.api,this),r=l(t,n);this.packages.set(e.envId.id,n),r.length>0&&this._onDidChangePackages.fire({environment:e,manager:this,changes:r})}))}async getPackages(e){return this.packages.has(e.envId.id)||await this.refresh(e),this.packages.get(e.envId.id)}dispose(){this._onDidChangePackages.dispose(),this.packages.clear()}}},1783:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalActivationScript=t.getCondaHookPs1Path=t.findShellSourcingScripts=t.findGlobalSourcingScript=t.constructCondaSourcingStatus=t.CondaSourcingStatus=void 0;const o=a(n(1605)),s=a(n(6928)),c=n(853),l=n(6682);class u{constructor(e,t,n,r,i){this.condaPath=e,this.condaFolder=t,this.isActiveOnLaunch=n,this.globalSourcingScript=r,this.shellSourcingScripts=i}toString(){const e=[];return e.push("Conda Sourcing Status:"),e.push(` Conda Path: ${this.condaPath}`),e.push(` Conda Folder: ${this.condaFolder}`),e.push(` Active on Launch: ${this.isActiveOnLaunch??"false"}`),this.globalSourcingScript&&e.push(` Global Sourcing Script: ${this.globalSourcingScript}`),this.shellSourcingScripts?.length?(e.push(" Shell-specific Sourcing Scripts:"),this.shellSourcingScripts.forEach(((t,n,r)=>{const i=n===r.length-1;t&&e.push(`   ${i?"":""} ${t}`)}))):e.push(" No Shell-specific Sourcing Scripts Found"),e.join("\n")}}async function h(e){const t=(0,l.isWindows)()?s.join(e,"Scripts","activate.bat"):s.join(e,"bin","activate");return await o.pathExists(t)?((0,c.traceInfo)(`Found global conda sourcing script at: ${t}`),t):void(0,c.traceInfo)(`No global conda sourcing script found.  at: ${t}`)}async function d(e){const t=[];let n,r,i;t.push("=== Conda Sourcing Shell Script Search ===");try{t.push("Searching for PowerShell hook script...");try{n=await f(e.condaFolder),t.push(`  Path: ${n??" Not found"}`)}catch(e){t.push(`  Error during PowerShell script search: ${e instanceof Error?e.message:"Unknown error"}`)}t.push("\nSearching for Shell script...");try{r=await async function(e){return(async()=>{const t=[s.join(e,"etc","profile.d","conda.sh"),s.join(e,"shell","etc","profile.d","conda.sh"),s.join(e,"Library","etc","profile.d","conda.sh")],n=await p(t,"conda.sh");if(n)return n;let r=[];const i=s.join(e,"lib");try{r=(await o.readdir(i)).filter((e=>e.startsWith("python")))}catch(e){(0,c.traceVerbose)(`No lib directory found at ${i}, ${e}`)}const a=[...r.map((t=>s.join(e,"lib",t,"site-packages","conda","shell","etc","profile.d","conda.sh"))),s.join(e,"site-packages","conda","shell","etc","profile.d","conda.sh")],l=await p(a,"conda.sh");return l?((0,c.traceError)("WARNING: conda.sh was found in a pip install location. This is not a supported configuration and may be deprecated in the future. Please install conda in a standard location. See https://docs.conda.io/projects/conda/en/latest/user-guide/install/index.html for proper installation instructions."),l):void 0})()}(e.condaFolder),t.push(`  Path: ${r??" Not found"}`)}catch(e){t.push(`  Error during Shell script search: ${e instanceof Error?e.message:"Unknown error"}`)}t.push("\nSearching for Windows CMD script...");try{i=await async function(e){const t=s.join(s.dirname(e),"activate.bat");if(await o.pathExists(t))return t}(e.condaPath),t.push(`  Path: ${i??" Not found"}`)}catch(e){t.push(`  Error during CMD script search: ${e instanceof Error?e.message:"Unknown error"}`)}}catch(e){t.push(`\nCritical error during script search: ${e instanceof Error?e.message:"Unknown error"}`)}finally{t.push("\nSearch Summary:"),t.push("  PowerShell: "+(n?"":"")),t.push("  Shell: "+(r?"":"")),t.push("  CMD: "+(i?"":"")),t.push("============================"),(0,c.traceVerbose)(t.join("\n"))}return[n,r,i]}async function f(e){return(async()=>{const t=[s.join(e,"shell","condabin"),s.join(e,"Library","shell","condabin"),s.join(e,"condabin"),s.join(e,"etc","profile.d")].map((async e=>{const t=s.join(e,"conda-hook.ps1");if(await o.pathExists(t))return(0,c.traceInfo)(`Conda hook found at: ${t}`),t})),n=(await Promise.all(t)).find(Boolean);if(n)return n})()}async function p(e,t){for(const n of e)if(await o.pathExists(n))return(0,c.traceInfo)(`${t} found in ${n}`),n}t.CondaSourcingStatus=u,t.constructCondaSourcingStatus=async function(e){const t=s.dirname(s.dirname(e));let n=new u(e,t);const r=process.env.CONDA_SHLVL;if(r&&parseInt(r)>=0)return n.isActiveOnLaunch=!0,n;const i=await h(n.condaFolder);return i&&(n.globalSourcingScript=i),n.shellSourcingScripts=await d(n),n},t.findGlobalSourcingScript=h,t.findShellSourcingScripts=d,t.getCondaHookPs1Path=f;const v=[];t.getLocalActivationScript=async function(e){const t=[(0,l.isWindows)()?s.join(e,"Scripts","activate"):s.join(e,"bin","activate"),(0,l.isWindows)()?s.join(s.dirname(e),"Scripts","activate"):s.join(s.dirname(e),"bin","activate"),(0,l.isWindows)()?s.join(s.dirname(s.dirname(e)),"Scripts","activate"):s.join(s.dirname(s.dirname(e)),"bin","activate")];for(const e of t){if(v.includes(e))return(0,c.traceVerbose)(`Found local activation script in cache at: ${e}`),e;try{if(await o.pathExists(e))return(0,c.traceInfo)(`Found local activation script at: ${e}, adding to cache.`),v.push(e),e}catch(t){(0,c.traceError)(`Error checking for local activation script at ${e}: ${t}`);continue}}(0,c.traceVerbose)("No local activation script found in any of the expected locations")}},9181:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createStepBasedCondaFlow=void 0;const o=a(n(1605)),s=a(n(6928)),c=n(1398),l=n(2341),u=n(675),h=n(5441),d="3.11.11";async function f(e){try{if(e.uris&&e.uris.length>1)return e.envType="Named",p;const t=await(0,u.showQuickPickWithButtons)([{label:l.CondaStrings.condaNamed,description:l.CondaStrings.condaNamedDescription},{label:l.CondaStrings.condaPrefix,description:l.CondaStrings.condaPrefixDescription}],{placeHolder:l.CondaStrings.condaSelectEnvType,ignoreFocusOut:!0,showBackButton:!0});return t?(e.envType=t.label,p):null}catch(e){if(e===c.QuickInputButtons.Back)return null;throw e}}async function p(e){try{const t=e.api;if(!t)return null;const n=await t.getEnvironments("global");let r=Array.from(new Set(n.map((e=>e.version)).filter(Boolean).map((e=>(0,h.trimVersionToMajorMinor)(e)))));const i=e=>{const t=e.match(/^(\\d+)(?:\\.(\\d+))?/);return{major:t?Number(t[1]):0,minor:t&&t[2]?Number(t[2]):0}};r=r.sort(((e,t)=>{const n=i(e),r=i(t);return n.major!==r.major?r.major-n.major:r.minor-n.minor})),r&&0!==r.length||(r=["3.13","3.12","3.11","3.10","3.9"]);const a=r.map((e=>({label:e===d?"$(star-full) Python":"Python",description:String(e)}))),o=await(0,u.showQuickPickWithButtons)(a,{placeHolder:c.l10n.t("Select the version of Python to install in the environment"),matchOnDescription:!0,ignoreFocusOut:!0,showBackButton:!0});return o?(e.pythonVersion=o.description,"Named"===e.envType?v:m):null}catch(e){if(e===c.QuickInputButtons.Back)return f;throw e}}async function v(e){try{const t=(0,h.getName)(e.api,e.uris),n=await(0,u.showInputBoxWithButtons)({prompt:l.CondaStrings.condaNamedInput,value:t,ignoreFocusOut:!0,showBackButton:!0});return n?(e.envName=n,null):null}catch(e){if(e===c.QuickInputButtons.Back)return p;throw e}}async function m(e){try{const t=await(0,h.getLocation)(e.api,e.uris||[]);return t?(e.fsPath=t,g):null}catch(e){if(e===c.QuickInputButtons.Back)return p;throw e}}async function g(e){try{if(!e.fsPath)return null;let t="./.conda";if(await o.pathExists(s.join(e.fsPath,".conda"))){const n=await(0,u.showInputBoxWithButtons)({prompt:c.l10n.t('Environment "{0}" already exists. Enter a different name',t),ignoreFocusOut:!0,showBackButton:!0,validateInput:async t=>{if(!t)return c.l10n.t("Name cannot be empty");const n=s.isAbsolute(t)?t:s.join(e.fsPath,t);try{if(await o.pathExists(n))return l.CondaStrings.condaExists}catch(e){}}});if(!n)return null;t=n}return e.prefix=s.isAbsolute(t)?t:s.join(e.fsPath,t),null}catch(e){if(e===c.QuickInputButtons.Back)return m;throw e}}t.createStepBasedCondaFlow=async function e(t,n,r,i){const a={api:t,uris:Array.isArray(i)?i:i?[i]:[]};try{let e=f;for(;null!==e;)e=await e(a);return a.envType===l.CondaStrings.condaNamed&&a.envName?await(0,h.createNamedCondaEnvironment)(t,n,r,a.envName,a.pythonVersion):a.envType===l.CondaStrings.condaPrefix&&a.prefix?await(0,h.createPrefixCondaEnvironment)(t,n,r,a.fsPath,a.pythonVersion):void 0}catch(a){if(a===c.QuickInputButtons.Back)return await e(t,n,r,i);throw a}}},5441:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.checkForNoPythonCondaEnvironment=t.getCommonCondaPackagesToInstall=t.managePackages=t.refreshPackages=t.deleteCondaEnvironment=t.quickCreateConda=t.generateName=t.createPrefixCondaEnvironment=t.createNamedCondaEnvironment=t.createCondaEnvironment=t.pickPythonVersion=t.trimVersionToMajorMinor=t.getLocation=t.getName=t.refreshCondaEnvs=t.resolveCondaPath=t.getPrefixesCondaPythonInfo=t.getNamedCondaPythonInfo=t.getVersion=t.getDefaultCondaPrefix=t.getPrefixes=t.runCondaExecutable=t.getConda=t.setCondaForGlobal=t.getCondaForGlobal=t.setCondaForWorkspaces=t.setCondaForWorkspace=t.getCondaForWorkspace=t.getCondaPathSetting=t.clearCondaCache=t.CONDA_GLOBAL_KEY=t.CONDA_WORKSPACE_KEY=t.CONDA_PREFIXES_KEY=t.CONDA_PATH_KEY=void 0;const s=a(n(5317)),c=a(n(1605)),l=a(n(857)),u=a(n(6928)),h=n(1398),d=o(n(7242)),f=n(5333),p=n(7951),v=n(2341),m=n(853),g=n(578),y=n(9344),E=n(9787),w=n(4047),P=n(6878),_=n(6682),b=n(675),S=n(7422),C=n(11),T=n(2189),I=n(2490),k=n(7712),M=n(8310),O=n(4072),N=n(1783),A=n(9181);let x,D;async function j(e){x=e;const n=await(0,g.getWorkspacePersistentState)();await n.set(t.CONDA_PATH_KEY,e)}function R(){const e=(0,S.getConfiguration)("python").get("condaPath");return e&&"string"==typeof e?(0,P.untildify)(e):e}async function F(e){if(x&&await c.pathExists((0,P.untildify)(x)))return(0,m.traceInfo)(`Using conda from cache: ${x}`),(0,P.untildify)(x);const n=await(0,g.getWorkspacePersistentState)();if(x=await n.get(t.CONDA_PATH_KEY),x&&await c.pathExists((0,P.untildify)(x)))return(0,m.traceInfo)(`Using conda from persistent state: ${x}`),(0,P.untildify)(x);const r=await async function(){try{return await(0,d.default)("conda",{all:!0})}catch{return}}();if(r&&r.length>0)for(let e=0;e<r.length;e++)if(x=r[e],await c.pathExists((0,P.untildify)(x)))return(0,m.traceInfo)(`Using conda from PATH: ${x}`),await n.set(t.CONDA_PATH_KEY,x),x;if(e){const r=(await e.refresh(!1)).filter((e=>!(0,I.isNativeEnvInfo)(e))).map((e=>e)).filter((e=>"conda"===e.tool.toLowerCase()));if(r.length>0)for(let e=0;e<r.length;e++)if(x=r[e].executable,await c.pathExists((0,P.untildify)(x)))return(0,m.traceInfo)(`Using conda from native finder: ${x}`),await n.set(t.CONDA_PATH_KEY,x),x}throw new Error("Conda not found")}async function L(e){const t=R();return t?((0,m.traceInfo)(`Using conda from settings: ${t}`),t):await F(e)}async function V(e,t,n,r){const i=(0,w.createDeferred)();t=(0,T.quoteArgs)(t);const a=new E.StopWatch;i.promise.finally((()=>(0,m.traceInfo)(`Ran conda in ${a.elapsedTime}: ${e} ${t.join(" ")}`)));const o=s.spawn(e,t,{shell:!0});r?.onCancellationRequested((()=>{o.kill(),i.reject(new h.CancellationError)})),o.on("error",(e=>{n?.error(`Error spawning conda: ${e}`),i.reject(new Error(`Error spawning conda: ${e.message}`))}));let c="",l="";return o.stdout?.on("data",(e=>{const t=e.toString("utf-8");c+=t,n?.info(t.trim())})),o.stderr?.on("data",(e=>{const t=e.toString("utf-8");l+=t,n?.error(t.trim())})),o.on("close",(()=>{i.resolve(c)})),o.on("exit",(e=>{0!==e&&i.reject(new Error(`Failed to run "conda ${t.join(" ")}":\n ${l}`))})),i.promise}async function $(e,t,n){const r=await L();return await V(r,e,t,n)}async function H(e,t,n){const r=await F(void 0);return await V(r,e,t,n)}async function W(){if(D)return D;const e=await(0,g.getWorkspacePersistentState)();if(D=await e.get(t.CONDA_PREFIXES_KEY),D)return D;const n=await async function(){const e=await $(["info","--envs","--json"]);return JSON.parse(e)}();return D=n.envs_dirs,await e.set(t.CONDA_PREFIXES_KEY,D),D}async function B(e){const t=await c.readdir(u.join(e,"conda-meta"));for(let n of t)if(n.startsWith("python-3")&&n.endsWith(".json"))return c.readJsonSync(u.join(e,"conda-meta",n)).version;throw new Error("Python version not found")}async function U(e,t,n,r,i,a){const{shellActivation:o,shellDeactivation:s}=await Y(t,a,e),c=(0,M.shortVersion)(r);return{name:e,environmentPath:h.Uri.file(t),displayName:`${e} (${c})`,shortDisplayName:`${e}:${c}`,displayPath:t,description:void 0,tooltip:t,version:r,sysPrefix:t,execInfo:{run:{executable:u.join(n)},activatedRun:{executable:u.join(n),args:[]},activation:[{executable:"conda",args:["activate",e]}],deactivation:[{executable:"conda",args:["deactivate"]}],shellActivation:o,shellDeactivation:s},group:"base"!==e?"Named":void 0}}async function K(e,t,n,r,i){const a=(0,M.shortVersion)(n),{shellActivation:o,shellDeactivation:s}=await Y(e,i),c=u.basename(e);return{name:c,environmentPath:h.Uri.file(e),displayName:`${c} (${a})`,shortDisplayName:`${c}:${a}`,displayPath:e,description:void 0,tooltip:e,version:n,sysPrefix:e,execInfo:{run:{executable:u.join(t)},activatedRun:{executable:u.join(t),args:[]},activation:[{executable:r,args:["activate",e]}],deactivation:[{executable:r,args:["deactivate"]}],shellActivation:o,shellDeactivation:s},group:"Prefix"}}async function Y(e,t,n){const r=[];let i;try{const a=n||e;r.push(`Environment Configuration:\n    - Identifier: "${a}"\n    - Prefix: "${e}"\n    - Name: "${n??"undefined"}"\n`);let o={executable:"conda",args:["activate",a]},s={executable:"conda",args:["deactivate"]};if(!(t instanceof O.CondaEnvManager&&t.sourcingInformation))return r.push("Error: Conda environment manager is not available, using default conda activation paths"),i=await q([o],[s]),i;const{isActiveOnLaunch:c,globalSourcingScript:l}=t.sourcingInformation;if(c)return r.push(" Conda already active on launch, using default activation commands"),i=await q([o],[s]),i;let u;try{u=await(0,N.getLocalActivationScript)(e)}catch(e){r.push(`Error getting local activation script: ${e instanceof Error?e.message:"Unknown error"}`)}r.push(`Local Activation:\n    - Status: ${u?"Found":"Not Found"}\n    - Path: ${u??"N/A"}\n`);const h=u||l;if(r.push(`Preferred Sourcing:\n    - Selected Path: ${h??"none found"}\n    - Source: ${u?"Local":l?"Global":"None"}\n`),!h)return r.push("No sourcing path found, using default conda activation"),i=await q([o],[s]),i;if((0,_.isWindows)())return r.push(" Using Windows-specific activation configuration"),i=await async function(e,t,n){const r=new Map,i=new Map,a=await(0,N.getCondaHookPs1Path)(n);(0,m.traceVerbose)(`PS1 hook path: ${a??"not found"}`);const o=[{executable:a||e},{executable:"conda",args:["activate",t]}],s=[{executable:e},{executable:"conda",args:["activate",t]}],c=[{executable:"source",args:[e.replace(/\\/g,"/"),t]}];(0,m.traceVerbose)(`Windows activation commands: \n        PowerShell: ${JSON.stringify(o)}, \n        CMD: ${JSON.stringify(s)},\n        Bash: ${JSON.stringify(c)}`);let l={executable:"conda",args:["deactivate"]};return r.set(C.ShellConstants.GITBASH,c),i.set(C.ShellConstants.GITBASH,[l]),r.set(C.ShellConstants.CMD,s),i.set(C.ShellConstants.CMD,[l]),r.set(C.ShellConstants.PWSH,o),i.set(C.ShellConstants.PWSH,[l]),{shellActivation:r,shellDeactivation:i}}(h,a,t.sourcingInformation.condaFolder),i;r.push(" Using source command with preferred path");const d={executable:"source",args:[h,a]};return i=await q([d],[s]),i}catch(t){return r.push(`Error in shell activation map generation: ${t instanceof Error?t.message:"Unknown error"}`),i=await q([{executable:"conda",args:["activate",n||e]}],[{executable:"conda",args:["deactivate"]}]),i}finally{(0,m.traceInfo)(["=== Conda Shell Activation Map Generation ===",...r,"=========================================="].join("\n"))}}async function q(e,t){const n=new Map,r=new Map;return n.set(C.ShellConstants.GITBASH,e),r.set(C.ShellConstants.GITBASH,t),n.set(C.ShellConstants.CMD,e),r.set(C.ShellConstants.CMD,t),n.set(C.ShellConstants.BASH,e),r.set(C.ShellConstants.BASH,t),n.set(C.ShellConstants.SH,e),r.set(C.ShellConstants.SH,t),n.set(C.ShellConstants.ZSH,e),r.set(C.ShellConstants.ZSH,t),n.set(C.ShellConstants.PWSH,e),r.set(C.ShellConstants.PWSH,t),{shellActivation:n,shellDeactivation:r}}async function z(e,t,n,r,i,a){if(!(e.prefix&&e.executable&&e.version)){let a=e.name;const o=t.createPythonEnvironmentItem(function(e,t,n){return{name:e,environmentPath:h.Uri.file(t),displayName:`${e} (no-python)`,shortDisplayName:`${e} (no-python)`,displayPath:t,description:t,tooltip:h.l10n.t("Conda environment without Python"),version:"no-python",sysPrefix:t,iconPath:new h.ThemeIcon("stop"),execInfo:{run:{executable:n}},group:e.length>0?"Named":"Prefix"}}(a??"",e.prefix??"",i),n);return r.info(`Found a No-Python conda environment: ${e.executable??e.prefix??"conda-no-python"}`),o}if("base"===e.name){const i=t.createPythonEnvironmentItem(await U("base",e.prefix,e.executable,e.version,0,n),n);return r.info(`Found base environment: ${e.prefix}`),i}if(function(e,t){const n=u.normalize(t);for(let t of e.map((e=>u.normalize(e))))if(n.startsWith(t))return!0;return!1}(a,e.prefix)){const i=u.basename(e.prefix),a=e.name??i,o=t.createPythonEnvironmentItem(await U(a,e.prefix,e.executable,e.version,0,n),n);return r.info(`Found named environment: ${e.prefix}`),o}{const a=t.createPythonEnvironmentItem(await K(e.prefix,e.executable,e.version,i,n),n);return r.info(`Found prefix environment: ${e.prefix}`),a}}function G(e){const t=e.match(/^(\d+\.\d+\.\d+)/);return t?t[1]:e}async function X(e,t,n,r){return(0,A.createStepBasedCondaFlow)(e,t,n,r)}async function Q(e,t,n){let r=["list","-p",e.environmentPath.fsPath];const i=(await H(r)).split(/\r?\n/).filter((e=>!e.startsWith("#"))),a=[];return i.forEach((r=>{const i=r.split(" ").filter((e=>e.length>0));if(i.length>=3){const r=t.createPackageItem({name:i[0],displayName:i[0],version:i[1],description:i[1]},e,n);a.push(r)}})),a}async function J(e,t,n){if(0===e.length)return;const r=[];e.length>0&&r.push({label:v.PackageManagement.searchCommonPackages,description:v.PackageManagement.searchCommonPackagesDescription}),n&&r.length>0&&r.push({label:v.PackageManagement.skipPackageInstallation});let i,a=!0;if(1===r.length?(i=r[0],a=!1):i=await(0,b.showQuickPickWithButtons)(r,{placeHolder:v.Pickers.Packages.selectOption,ignoreFocusOut:!0,showBackButton:!0,matchOnDescription:!1,matchOnDetail:!1}),i&&!Array.isArray(i))try{return i.label===v.PackageManagement.searchCommonPackages?await(0,k.selectFromCommonPackagesToInstall)(e,t,void 0,{showBackButton:a}):void(0,m.traceInfo)("Package Installer: user selected skip package installation")}catch(r){if(r===h.QuickInputButtons.Back)return J(e,t,n)}}t.CONDA_PATH_KEY=`${f.ENVS_EXTENSION_ID}:conda:CONDA_PATH`,t.CONDA_PREFIXES_KEY=`${f.ENVS_EXTENSION_ID}:conda:CONDA_PREFIXES`,t.CONDA_WORKSPACE_KEY=`${f.ENVS_EXTENSION_ID}:conda:WORKSPACE_SELECTED`,t.CONDA_GLOBAL_KEY=`${f.ENVS_EXTENSION_ID}:conda:GLOBAL_SELECTED`,t.clearCondaCache=async function(){x=void 0},t.getCondaPathSetting=R,t.getCondaForWorkspace=async function(e){const n=await(0,g.getWorkspacePersistentState)(),r=await n.get(t.CONDA_WORKSPACE_KEY);if(r)try{return r[e]}catch{return}},t.setCondaForWorkspace=async function(e,n){const r=await(0,g.getWorkspacePersistentState)(),i=await r.get(t.CONDA_WORKSPACE_KEY)??{};n?i[e]=n:delete i[e],await r.set(t.CONDA_WORKSPACE_KEY,i)},t.setCondaForWorkspaces=async function(e,n){const r=await(0,g.getWorkspacePersistentState)(),i=await r.get(t.CONDA_WORKSPACE_KEY)??{};e.forEach((e=>{n?i[e]=n:delete i[e]})),await r.set(t.CONDA_WORKSPACE_KEY,i)},t.getCondaForGlobal=async function(){const e=await(0,g.getWorkspacePersistentState)();return await e.get(t.CONDA_GLOBAL_KEY)},t.setCondaForGlobal=async function(e){const n=await(0,g.getWorkspacePersistentState)();await n.set(t.CONDA_GLOBAL_KEY,e)},t.getConda=L,t.runCondaExecutable=H,t.getPrefixes=W,t.getDefaultCondaPrefix=async function(){const e=await W();return e.length>0?e[0]:u.join(l.homedir(),".conda","envs")},t.getVersion=B,t.getNamedCondaPythonInfo=U,t.getPrefixesCondaPythonInfo=K,t.resolveCondaPath=async function(e,t,n,r,i){try{const a=await t.resolve(e);if(a.kind!==I.NativePythonEnvironmentKind.conda)return;return z(a,n,i,r,await L(),await W())}catch{return}},t.refreshCondaEnvs=async function(e,t,n,r,i){r.info("Refreshing conda environments");const a=await t.refresh(e);let o;try{o=await L()}catch{o=void 0}void 0===o&&(o=a.filter((e=>!(0,I.isNativeEnvInfo)(e))).map((e=>e)).filter((e=>"conda"===e.tool.toLowerCase()))[0].executable,await j(o));const s=o;if(s){const e=await W(),t=a.filter((e=>(0,I.isNativeEnvInfo)(e))).map((e=>e)).filter((e=>e.kind===I.NativePythonEnvironmentKind.conda)),o=[];return await Promise.all(t.map((async t=>{const a=await z(t,n,i,r,s,e);a&&o.push(a)}))),(0,M.sortEnvironments)(o)}return r.error("Conda not found"),[]},t.getName=function(e,t){if(t&&(!Array.isArray(t)||1===t.length))return e.getPythonProject(Array.isArray(t)?t[0]:t)?.name},t.getLocation=async function(e,t){if(!t||Array.isArray(t)&&(0===t.length||t.length>1)){const n=[];if(Array.isArray(t))for(let r of t){const t=e.getPythonProject(r);t&&!n.includes(t)&&n.push(t)}else e.getPythonProjects().forEach((e=>n.push(e)));const r=await(0,y.pickProject)(n);return r?.uri.fsPath}return e.getPythonProject(Array.isArray(t)?t[0]:t)?.uri.fsPath},t.trimVersionToMajorMinor=G,t.pickPythonVersion=async function(e,t){const n=await e.getEnvironments("global");let r=Array.from(new Set(n.map((e=>e.version)).filter(Boolean).map((e=>G(e)))));const i=e=>{const t=e.match(/^(\d+)(?:\.(\d+))?/);return{major:t?Number(t[1]):0,minor:t&&t[2]?Number(t[2]):0}};r=r.sort(((e,t)=>{const n=i(e),r=i(t);return n.major!==r.major?r.major-n.major:r.minor-n.minor})),r&&0!==r.length||(r=["3.13","3.12","3.11","3.10","3.9"]);const a=r.map((e=>({label:"3.11.11"===e?"$(star-full) Python":"Python",description:e}))),o=await(0,b.showQuickPickWithButtons)(a,{placeHolder:h.l10n.t("Select the version of Python to install in the environment"),matchOnDescription:!0,ignoreFocusOut:!0,showBackButton:!0},t);if(o)return o.description},t.createCondaEnvironment=X,t.createNamedCondaEnvironment=async function(e,t,n,r,i){try{if(!(r=await(0,b.showInputBoxWithButtons)({prompt:v.CondaStrings.condaNamedInput,value:r,ignoreFocusOut:!0,showBackButton:!0})))return}catch(r){if(r===h.QuickInputButtons.Back)return await X(e,t,n);throw r}const a=r,o=["create","--yes","--name",a];return i?o.push(`python=${i}`):o.push("python"),await(0,b.withProgress)({location:h.ProgressLocation.Notification,title:h.l10n.t("Creating conda environment: {0}",a)},(async()=>{try{const r="win32"===l.platform()?"python.exe":"python",i=await H(o);t.info(i);const s=await W();let h="";for(let e of s)if(await c.pathExists(u.join(e,a))){h=u.join(e,a);break}const d=await B(h);return e.createPythonEnvironmentItem(await U(a,h,u.join(h,r),d,await L(),n),n)}catch(e){t.error("Failed to create conda environment",e),setImmediate((async()=>{await(0,p.showErrorMessageWithLogs)(v.CondaStrings.condaCreateFailed,t)}))}}))},t.createPrefixCondaEnvironment=async function(e,t,n,r,i){try{if(!r)return;let a="./.conda";if(await c.pathExists(u.join(r,".conda"))){t.warn(`Environment "${u.join(r,".conda")}" already exists`);const e=await(0,b.showInputBoxWithButtons)({prompt:h.l10n.t('Environment "{0}" already exists. Enter a different name',a),ignoreFocusOut:!0,showBackButton:!0,validateInput:e=>{if(e===a)return v.CondaStrings.condaExists}});if(!e)return;a=e}const o=u.isAbsolute(a)?a:u.join(r,a),s=["create","--yes","--prefix",o];return i?s.push(`python=${i}`):s.push("python"),await(0,b.withProgress)({location:h.ProgressLocation.Notification,title:`Creating conda environment: ${a}`},(async()=>{try{const r="win32"===l.platform()?"python.exe":"python",i=await H(s);t.info(i);const a=await B(o);return e.createPythonEnvironmentItem(await K(o,u.join(o,r),a,await L(),n),n)}catch(e){t.error("Failed to create conda environment",e),setImmediate((async()=>{await(0,p.showErrorMessageWithLogs)(v.CondaStrings.condaCreateFailed,t)}))}}))}catch(r){if(r===h.QuickInputButtons.Back)return await X(e,t,n);throw r}},t.generateName=async function(e){for(;;){const t=`env_${Math.random().toString(36).substring(2)}`,n=u.join(e,t);if(!await c.exists(n))return t}},t.quickCreateConda=async function(e,t,n,r,i,a){const o=u.join(r,i),s="win32"===l.platform()?u.join(o,"python.exe"):u.join(o,"bin","python");return await(0,b.withProgress)({location:h.ProgressLocation.Notification,title:`Creating conda environment: ${i}`},(async()=>{try{await H(["create","--yes","--prefix",o,"python"],t),a&&a.length>0&&await $(["install","--yes","--prefix",o,...a],t);const r=await B(o);return e.createPythonEnvironmentItem({name:u.basename(o),environmentPath:h.Uri.file(o),displayName:`${r} (${i})`,displayPath:o,description:o,version:r,execInfo:{run:{executable:s},activatedRun:{executable:s,args:[]},activation:[{executable:"conda",args:["activate",o]}],deactivation:[{executable:"conda",args:["deactivate"]}]},sysPrefix:o,group:"Prefix"},n)}catch(e){t.error("Failed to create conda environment",e),setImmediate((async()=>{await(0,p.showErrorMessageWithLogs)(v.CondaStrings.condaCreateFailed,t)}))}}))},t.deleteCondaEnvironment=async function(e,t){let n=["env","remove","--yes","--prefix",e.environmentPath.fsPath];return await(0,b.withProgress)({location:h.ProgressLocation.Notification,title:h.l10n.t("Deleting conda environment: {0}",e.environmentPath.fsPath)},(async()=>{try{await H(n,t)}catch(e){return t.error(`Failed to delete conda environment: ${e}`),setImmediate((async()=>{await(0,p.showErrorMessageWithLogs)(v.CondaStrings.condaRemoveFailed,t)})),!1}return!0}))},t.refreshPackages=Q,t.managePackages=async function(e,t,n,r,i,a){if(t.uninstall&&t.uninstall.length>0&&await H(["remove","--prefix",e.environmentPath.fsPath,"--yes",...t.uninstall],a,i),t.install&&t.install.length>0){const n=["install","--prefix",e.environmentPath.fsPath,"--yes"];t.upgrade&&n.push("--update-all"),n.push(...t.install),await H(n,a,i)}return Q(e,n,r)},t.getCommonCondaPackagesToInstall=async function(e,t,n){const r=await async function(){try{const e=u.join(f.EXTENSION_ROOT_DIR,"files","conda_packages.json"),t=await c.readFile(e,{encoding:"utf-8"});return JSON.parse(t).map((e=>({name:e.name,displayName:e.name,uri:h.Uri.parse(e.uri),description:e.description})))}catch{return[]}}(),i=(await n.getPackages(e))?.map((e=>e.name));return await J(r,i??[],!!t.showSkipOption)},t.checkForNoPythonCondaEnvironment=async function(e,t,n,r,i){return"no-python"===n.version?""===n.sysPrefix?void await(0,b.showErrorMessage)(v.CondaStrings.condaMissingPythonNoFix,{modal:!0}):await(0,b.showErrorMessage)(`${v.CondaStrings.condaMissingPython}: ${n.displayName}`,{modal:!0},v.Common.installPython)===v.Common.installPython?await async function(e,t,n,r,i){if(""===n.sysPrefix)return;await H(["install","--yes","--prefix",n.sysPrefix,"python"],i),await e.refresh(!0,I.NativePythonEnvironmentKind.conda);const a=await e.resolve(n.sysPrefix);return a.kind===I.NativePythonEnvironmentKind.conda?z(a,r,t,i,await L(),await W()):void 0}(e,t,n,r,i):void 0:n}},104:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerCondaFeatures=void 0;const r=n(853),i=n(8940),a=n(8310),o=n(4072),s=n(4469),c=n(1783),l=n(5441);t.registerCondaFeatures=async function(e,t,n,u){const h=await(0,i.getPythonApi)();try{const i=await(0,l.getConda)(e),a=await(0,c.constructCondaSourcingStatus)(i);(0,r.traceInfo)(a.toString());const u=new o.CondaEnvManager(e,h,n),d=new s.CondaPackageManager(h,n);u.sourcingInformation=a,t.push(u,d,h.registerEnvironmentManager(u),h.registerPackageManager(d))}catch(e){(0,r.traceInfo)("Conda not found, turning off conda features.",e),await(0,a.notifyMissingManagerIfDefault)("ms-python.python:conda",u,h)}}},9825:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerPipenvFeatures=void 0;const r=n(853),i=n(8940),a=n(4433),o=n(5507),s=n(8310);t.registerPipenvFeatures=async function(e,t,n){const c=await(0,i.getPythonApi)();try{if(await(0,o.getPipenv)(e)){const n=new a.PipenvManager(e,c);t.push(n,c.registerEnvironmentManager(n))}else(0,r.traceInfo)("Pipenv not found, turning off pipenv features."),await(0,s.notifyMissingManagerIfDefault)("ms-python.python:pipenv",n,c)}catch(e){(0,r.traceInfo)("Pipenv not found, turning off pipenv features.",e),await(0,s.notifyMissingManagerIfDefault)("ms-python.python:pipenv",n,c)}}},4433:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PipenvManager=void 0;const r=n(1398),i=n(4300),a=n(2341),o=n(4047),s=n(675),c=n(5507);t.PipenvManager=class{constructor(e,t){this.nativeFinder=e,this.api=t,this.collection=[],this.fsPathToEnv=new Map,this._onDidChangeEnvironment=new r.EventEmitter,this.onDidChangeEnvironment=this._onDidChangeEnvironment.event,this._onDidChangeEnvironments=new r.EventEmitter,this.onDidChangeEnvironments=this._onDidChangeEnvironments.event,this.name="pipenv",this.displayName="Pipenv",this.preferredPackageManagerId="ms-python.python:pip",this.tooltip=new r.MarkdownString(a.PipenvStrings.pipenvManager,!0)}dispose(){this.collection=[],this.fsPathToEnv.clear(),this._onDidChangeEnvironment.dispose(),this._onDidChangeEnvironments.dispose()}async initialize(){if(this._initialized)return this._initialized.promise;this._initialized=(0,o.createDeferred)(),await(0,s.withProgress)({location:r.ProgressLocation.Window,title:a.PipenvStrings.pipenvDiscovering},(async()=>{this.collection=await(0,c.refreshPipenv)(!1,this.nativeFinder,this.api,this),await this.loadEnvMap(),this._onDidChangeEnvironments.fire(this.collection.map((e=>({environment:e,kind:i.EnvironmentChangeKind.add}))))})),this._initialized.resolve()}async loadEnvMap(){const e=this.api.getPythonProjects();for(const t of e){const e=await(0,c.getPipenvForWorkspace)(t.uri.fsPath);if(e){const n=this.findEnvironmentByPath(e);n&&this.fsPathToEnv.set(t.uri.fsPath,n)}}const t=await(0,c.getPipenvForGlobal)();t&&(this.globalEnv=this.findEnvironmentByPath(t))}findEnvironmentByPath(e){return this.collection.find((t=>t.environmentPath.fsPath===e||t.execInfo?.run.executable===e))}async refresh(e){const t=void 0===e;await(0,s.withProgress)({location:r.ProgressLocation.Window,title:a.PipenvStrings.pipenvRefreshing},(async()=>{const e=[...this.collection];this.collection=await(0,c.refreshPipenv)(t,this.nativeFinder,this.api,this),await this.loadEnvMap();const n=[];e.forEach((e=>{this.collection.find((t=>t.envId.id===e.envId.id))||n.push({environment:e,kind:i.EnvironmentChangeKind.remove})})),this.collection.forEach((t=>{e.find((e=>e.envId.id===t.envId.id))||n.push({environment:t,kind:i.EnvironmentChangeKind.add})})),n.length>0&&this._onDidChangeEnvironments.fire(n)}))}async getEnvironments(e){if(await this.initialize(),"all"===e)return Array.from(this.collection);if("global"===e)return Array.from(this.collection);if(e instanceof r.Uri){const t=this.api.getPythonProject(e);if(t){const e=this.fsPathToEnv.get(t.uri.fsPath);return e?[e]:[]}}return[]}async set(e,t){if(void 0===e){const e=this.globalEnv;return this.globalEnv=t,await(0,c.setPipenvForGlobal)(t?.environmentPath.fsPath),void(e?.envId.id!==this.globalEnv?.envId.id&&this._onDidChangeEnvironment.fire({uri:void 0,old:e,new:this.globalEnv}))}if(e instanceof r.Uri){const n=this.api.getPythonProject(e);if(!n)return;const r=this.fsPathToEnv.get(n.uri.fsPath);t?this.fsPathToEnv.set(n.uri.fsPath,t):this.fsPathToEnv.delete(n.uri.fsPath),await(0,c.setPipenvForWorkspace)(n.uri.fsPath,t?.environmentPath.fsPath),r?.envId.id!==t?.envId.id&&this._onDidChangeEnvironment.fire({uri:e,old:r,new:t})}if(Array.isArray(e)&&e.every((e=>e instanceof r.Uri))){const n=[];e.map((e=>this.api.getPythonProject(e))).forEach((e=>{e&&n.push(e)}));const r=new Map;n.forEach((e=>{r.set(e.uri.fsPath,this.fsPathToEnv.get(e.uri.fsPath)),t?this.fsPathToEnv.set(e.uri.fsPath,t):this.fsPathToEnv.delete(e.uri.fsPath)})),await(0,c.setPipenvForWorkspaces)(n.map((e=>e.uri.fsPath)),t?.environmentPath.fsPath),n.forEach((e=>{const n=r.get(e.uri.fsPath);n?.envId.id!==t?.envId.id&&this._onDidChangeEnvironment.fire({uri:e.uri,old:n,new:t})}))}}async get(e){if(await this.initialize(),void 0===e)return this.globalEnv;if(e instanceof r.Uri){const t=this.api.getPythonProject(e);if(t)return this.fsPathToEnv.get(t.uri.fsPath)}}async resolve(e){return await this.initialize(),(0,c.resolvePipenvPath)(e.fsPath,this.nativeFinder,this.api,this)}async clearCache(){await(0,c.clearPipenvCache)(),this.collection=[],this.fsPathToEnv.clear(),this.globalEnv=void 0,this._initialized=void 0}}},5507:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setPipenvForWorkspaces=t.setPipenvForWorkspace=t.getPipenvForWorkspace=t.setPipenvForGlobal=t.getPipenvForGlobal=t.resolvePipenvPath=t.refreshPipenv=t.getPipenv=t.clearPipenvCache=t.PIPENV_GLOBAL_KEY=t.PIPENV_WORKSPACE_KEY=t.PIPENV_PATH_KEY=void 0;const s=a(n(6928)),c=n(1398),l=o(n(7242)),u=n(5333),h=n(853),d=n(578),f=n(8477),p=n(2490),v=n(8310);let m;function g(){return(0,f.getSettingWorkspaceScope)("python","pipenvPath")||void 0}async function y(e){if(m)return m;const n=await(0,d.getWorkspacePersistentState)();if(m=await n.get(t.PIPENV_PATH_KEY),m)return(0,h.traceInfo)(`Using pipenv from persistent state: ${m}`),m;const r=g();if(r)return m=r,(0,h.traceInfo)(`Using pipenv from settings: ${r}`),m;const i=await async function(){try{return await(0,l.default)("pipenv")}catch{return}}();if(i)return m=i,(0,h.traceInfo)(`Found pipenv in PATH: ${i}`),i;if(e){const r=(await e.refresh(!1)).filter((e=>!(0,p.isNativeEnvInfo)(e))).map((e=>e)).filter((e=>"pipenv"===e.tool.toLowerCase()));if(r.length>0)return m=r[0].executable,(0,h.traceInfo)(`Using pipenv from native finder: ${m}`),await n.set(t.PIPENV_PATH_KEY,m),m}(0,h.traceInfo)("Pipenv not found")}async function E(e,t,n){if(!(e.prefix&&e.executable&&e.version))return void(0,h.traceError)(`Incomplete pipenv environment info: ${JSON.stringify(e)}`);const r=(0,v.shortVersion)(e.version),i=s.basename(e.prefix),a=e.name||e.displayName||i,o=e.displayName||`${i} (${r})`,l=s.dirname(e.executable);let u=new Map,d=new Map;try{const e=await(0,v.getShellActivationCommands)(l);u=e.shellActivation,d=e.shellDeactivation}catch(e){(0,h.traceError)(`Failed to compute shell activation commands for pipenv at ${l}: ${e}`)}const f={name:a,displayName:o,shortDisplayName:o,displayPath:e.prefix,version:e.version,environmentPath:c.Uri.file(e.prefix),description:void 0,tooltip:e.prefix,execInfo:{run:{executable:e.executable},shellActivation:u,shellDeactivation:d},sysPrefix:e.prefix};return t.createPythonEnvironmentItem(f,n)}t.PIPENV_PATH_KEY=`${u.ENVS_EXTENSION_ID}:pipenv:PIPENV_PATH`,t.PIPENV_WORKSPACE_KEY=`${u.ENVS_EXTENSION_ID}:pipenv:WORKSPACE_SELECTED`,t.PIPENV_GLOBAL_KEY=`${u.ENVS_EXTENSION_ID}:pipenv:GLOBAL_SELECTED`,t.clearPipenvCache=async function(){m=void 0},t.getPipenv=y,t.refreshPipenv=async function(e,n,r,i){(0,h.traceInfo)("Refreshing pipenv environments");const a=g(),o=await n.refresh(e,a?[c.Uri.file(a)]:void 0);let s=await y();if(void 0===s){const e=o.filter((e=>!(0,p.isNativeEnvInfo)(e))).map((e=>e)).filter((e=>"pipenv"===e.tool.toLowerCase()));e.length>0&&(s=e[0].executable,await async function(e){m=e;const n=await(0,d.getWorkspacePersistentState)();await n.set(t.PIPENV_PATH_KEY,e)}(s))}const l=o.filter((e=>(0,p.isNativeEnvInfo)(e))).map((e=>e)).filter((e=>e.kind===p.NativePythonEnvironmentKind.pipenv)),u=[];for(const e of l)if(s){const t=await E(e,r,i);t&&u.push(t)}return(0,h.traceInfo)(`Found ${u.length} pipenv environments`),u},t.resolvePipenvPath=async function(e,t,n,r){const i=await t.resolve(e);if(i.kind===p.NativePythonEnvironmentKind.pipenv&&await y(t))return await E(i,n,r)},t.getPipenvForGlobal=async function(){const e=await(0,d.getWorkspacePersistentState)();return await e.get(t.PIPENV_GLOBAL_KEY)},t.setPipenvForGlobal=async function(e){const n=await(0,d.getWorkspacePersistentState)();await n.set(t.PIPENV_GLOBAL_KEY,e)},t.getPipenvForWorkspace=async function(e){const n=await(0,d.getWorkspacePersistentState)(),r=await n.get(t.PIPENV_WORKSPACE_KEY);if(r)try{return r[e]}catch{return}},t.setPipenvForWorkspace=async function(e,n){const r=await(0,d.getWorkspacePersistentState)(),i=await r.get(t.PIPENV_WORKSPACE_KEY)??{};n?i[e]=n:delete i[e],await r.set(t.PIPENV_WORKSPACE_KEY,i)},t.setPipenvForWorkspaces=async function(e,n){const r=await(0,d.getWorkspacePersistentState)(),i=await r.get(t.PIPENV_WORKSPACE_KEY)??{};e.forEach((e=>{n?i[e]=n:delete i[e]})),await r.set(t.PIPENV_WORKSPACE_KEY,i)}},9546:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerPoetryFeatures=void 0;const r=n(853),i=n(8940),a=n(8310),o=n(9059),s=n(2537),c=n(2357);t.registerPoetryFeatures=async function(e,t,n,l){const u=await(0,i.getPythonApi)();try{const i=await(0,c.getPoetry)(e);if(i){(0,r.traceInfo)("The `shell` command is not available by default in Poetry versions 2.0.0 and above. Therefore all shell activation will be handled by calling `source <path-to-activate>`. If you face any problems with shell activation, please file an issue at https://github.com/microsoft/vscode-python-environments/issues to help us improve this implementation.");const a=await(0,c.getPoetryVersion)(i);(0,r.traceInfo)(`Poetry found at ${i}, version: ${a}`);const l=new o.PoetryManager(e,u),h=new s.PoetryPackageManager(u,n,l);t.push(l,h,u.registerEnvironmentManager(l),u.registerPackageManager(h))}else(0,r.traceInfo)("Poetry not found, turning off poetry features."),await(0,a.notifyMissingManagerIfDefault)("ms-python.python:poetry",l,u)}catch(e){(0,r.traceInfo)("Poetry not found, turning off poetry features.",e),await(0,a.notifyMissingManagerIfDefault)("ms-python.python:poetry",l,u)}}},9059:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PoetryManager=void 0;const o=a(n(6928)),s=n(1398),c=n(4300),l=n(2341),u=n(853),h=n(4047),d=n(675),f=n(8310),p=n(2357);t.PoetryManager=class{constructor(e,t){this.nativeFinder=e,this.api=t,this.collection=[],this.fsPathToEnv=new Map,this._onDidChangeEnvironment=new s.EventEmitter,this.onDidChangeEnvironment=this._onDidChangeEnvironment.event,this._onDidChangeEnvironments=new s.EventEmitter,this.onDidChangeEnvironments=this._onDidChangeEnvironments.event,this.name="poetry",this.displayName="Poetry",this.preferredPackageManagerId="ms-python.python:poetry",this.tooltip=new s.MarkdownString(l.PoetryStrings.poetryManager,!0)}dispose(){this.collection=[],this.fsPathToEnv.clear()}async initialize(){if(this._initialized)return this._initialized.promise;this._initialized=(0,h.createDeferred)(),await(0,d.withProgress)({location:s.ProgressLocation.Window,title:l.PoetryStrings.poetryDiscovering},(async()=>{this.collection=await(0,p.refreshPoetry)(!1,this.nativeFinder,this.api,this),await this.loadEnvMap(),this._onDidChangeEnvironments.fire(this.collection.map((e=>({environment:e,kind:c.EnvironmentChangeKind.add}))))})),this._initialized.resolve()}async getEnvironments(e){if(await this.initialize(),"all"===e)return Array.from(this.collection);if("global"===e)return this.collection.filter((e=>e.group===p.POETRY_GLOBAL));if(e instanceof s.Uri){const t=this.fromEnvMap(e);if(t)return[t]}return[]}async refresh(e){void 0===e&&await(0,d.withProgress)({location:s.ProgressLocation.Window,title:l.PoetryStrings.poetryRefreshing},(async()=>{(0,u.traceInfo)("Refreshing Poetry Environments");const e=this.collection.map((e=>e));this.collection=await(0,p.refreshPoetry)(!0,this.nativeFinder,this.api,this),await this.loadEnvMap();const t=[...e.map((e=>({kind:c.EnvironmentChangeKind.remove,environment:e}))),...this.collection.map((e=>({kind:c.EnvironmentChangeKind.add,environment:e})))];this._onDidChangeEnvironments.fire(t)}))}async get(e){if(await this.initialize(),e instanceof s.Uri){let t=this.fsPathToEnv.get(e.fsPath);if(t)return t;const n=this.api.getPythonProject(e);if(n&&(t=this.fsPathToEnv.get(n.uri.fsPath),t))return t}return this.globalEnv}async set(e,t){if(void 0===e)await(0,p.setPoetryForGlobal)(t?.environmentPath?.fsPath);else if(e instanceof s.Uri){const n=this.api.getPythonProject(e),r=n?.uri?.fsPath??e.fsPath;r&&(t?this.fsPathToEnv.set(r,t):this.fsPathToEnv.delete(r),await(0,p.setPoetryForWorkspace)(r,t?.environmentPath?.fsPath))}else if(Array.isArray(e)&&e.every((e=>e instanceof s.Uri))){const n=[];e.map((e=>this.api.getPythonProject(e))).forEach((e=>{e&&n.push(e)}));const r=new Map;n.forEach((e=>{r.set(e.uri.fsPath,this.fsPathToEnv.get(e.uri.fsPath)),t?this.fsPathToEnv.set(e.uri.fsPath,t):this.fsPathToEnv.delete(e.uri.fsPath)})),await(0,p.setPoetryForWorkspaces)(n.map((e=>e.uri.fsPath)),t?.environmentPath?.fsPath),n.forEach((e=>{const n=r.get(e.uri.fsPath);n?.envId.id!==t?.envId.id&&this._onDidChangeEnvironment.fire({uri:e.uri,old:n,new:t})}))}}async resolve(e){if(await this.initialize(),e instanceof s.Uri){const t=await(0,p.resolvePoetryPath)(e.fsPath,this.nativeFinder,this.api,this);if(t){return this.findEnvironmentByPath(t.environmentPath.fsPath)||(this.collection.push(t),this._onDidChangeEnvironments.fire([{kind:c.EnvironmentChangeKind.add,environment:t}]),t)}}}async clearCache(){await(0,p.clearPoetryCache)()}async loadEnvMap(){this.globalEnv=void 0,this.fsPathToEnv.clear();const e=await(0,p.getPoetryForGlobal)();e&&(this.globalEnv=this.findEnvironmentByPath(e),this.globalEnv||(this.globalEnv=await(0,p.resolvePoetryPath)(e,this.nativeFinder,this.api,this),this.globalEnv&&this.collection.push(this.globalEnv))),this.globalEnv||(this.globalEnv=(0,f.getLatest)(this.collection.filter((e=>e.group===p.POETRY_GLOBAL))));const t=this.collection.filter((e=>this.api.getPythonProject(e.environmentPath))).sort(((e,t)=>e.environmentPath.fsPath!==t.environmentPath.fsPath?e.environmentPath.fsPath.length-t.environmentPath.fsPath.length:e.environmentPath.fsPath.localeCompare(t.environmentPath.fsPath))),n=this.api.getPythonProjects().map((e=>e.uri.fsPath));for(const e of n){const n=await(0,p.getPoetryForWorkspace)(e);if(n){const t=this.findEnvironmentByPath(n);if(t)this.fsPathToEnv.set(e,t);else{const t=await(0,p.resolvePoetryPath)(n,this.nativeFinder,this.api,this);t?(this.fsPathToEnv.set(e,t),this.collection.push(t)):(0,u.traceError)(`Failed to resolve poetry environment: ${n}`)}}else if(1===t.length)this.fsPathToEnv.set(e,t[0]);else{const n=t.find((t=>{const n=this.api.getPythonProject(t.environmentPath)?.uri.fsPath;return n&&o.normalize(n)===e}));n&&this.fsPathToEnv.set(e,n)}}}fromEnvMap(e){const t=this.fsPathToEnv.get(e.fsPath);if(t)return t;const n=this.api.getPythonProject(e);return n?this.fsPathToEnv.get(n.uri.fsPath):void 0}findEnvironmentByPath(e){const t=o.normalize(e);return this.collection.find((e=>{const n=o.normalize(e.environmentPath.fsPath);return n===t||o.dirname(n)===t||o.dirname(o.dirname(n))===t}))}}},2537:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.runPoetry=t.PoetryPackageManager=void 0;const o=a(n(5317)),s=a(n(1605)),c=a(n(6928)),l=n(1398),u=n(4300),h=n(675),d=n(2357);function f(e,t){const n=[];return e.forEach((e=>{n.push({kind:u.PackageChangeKind.remove,pkg:e})})),t.forEach((e=>{n.push({kind:u.PackageChangeKind.add,pkg:e})})),n}async function p(e,t,n,r){const i=await(0,d.getPoetry)();if(!i)throw new Error("Poetry executable not found");return n?.info(`Running: ${i} ${e.join(" ")}`),new Promise(((a,s)=>{const c=o.spawn(i,e,{cwd:t});r?.onCancellationRequested((()=>{c.kill(),s(new l.CancellationError)}));let u="";c.stdout?.on("data",(e=>{const t=e.toString("utf-8");u+=t,n?.append(`poetry: ${t}`)})),c.stderr?.on("data",(e=>{const t=e.toString("utf-8");u+=t,n?.append(`poetry: ${t}`)})),c.on("close",(()=>{a(u)})),c.on("error",(e=>{n?.error(`Error executing poetry command: ${e}`),s(e)})),c.on("exit",(t=>{0!==t&&s(new Error(`Failed to run poetry ${e.join(" ")}`))}))}))}t.PoetryPackageManager=class{constructor(e,t,n){this.api=e,this.log=t,this._onDidChangePackages=new l.EventEmitter,this.onDidChangePackages=this._onDidChangePackages.event,this.packages=new Map,this.name="poetry",this.displayName="Poetry",this.description="This package manager for Python uses Poetry for package management.",this.tooltip=new l.MarkdownString("This package manager for Python uses `poetry` for package management."),this.iconPath=new l.ThemeIcon("package")}async manage(e,t){let n=[...t.install??[]],r=[...t.uninstall??[]];if(0===n.length&&0===r.length){const e=await(0,h.showInputBox)({prompt:"Enter packages to install (comma separated)",placeHolder:"e.g., requests, pytest, black"});if(e&&(n=e.split(",").map((e=>e.trim())).filter((e=>e.length>0))),0===n.length)return}await(0,h.withProgress)({location:l.ProgressLocation.Notification,title:"Managing packages with Poetry",cancellable:!0},(async(t,i)=>{try{const t=this.packages.get(e.envId.id)??[],a=await this.managePackages(e,{install:n,uninstall:r},i),o=f(t,a);this.packages.set(e.envId.id,a),this._onDidChangePackages.fire({environment:e,manager:this,changes:o})}catch(e){if(e instanceof l.CancellationError)throw e;throw this.log.error("Error managing packages with Poetry",e),setImmediate((async()=>{"View Output"===await(0,h.showErrorMessage)("Error managing packages with Poetry","View Output")&&this.log.show()})),e}}))}async refresh(e){await(0,h.withProgress)({location:l.ProgressLocation.Window,title:"Refreshing Poetry packages"},(async()=>{try{const t=this.packages.get(e.envId.id)??[],n=await this.refreshPackages(e),r=f(t,n);this.packages.set(e.envId.id,n),r.length>0&&this._onDidChangePackages.fire({environment:e,manager:this,changes:r})}catch(e){this.log.error(`Failed to refresh packages: ${e}`),setImmediate((async()=>{"View Output"===await(0,h.showErrorMessage)("Error refreshing Poetry packages","View Output")&&this.log.show()}))}}))}async getPackages(e){return this.packages.has(e.envId.id)||await this.refresh(e),this.packages.get(e.envId.id)}dispose(){this._onDidChangePackages.dispose(),this.packages.clear()}async managePackages(e,t,n){if(t.uninstall&&t.uninstall.length>0)try{const e=["remove",...t.uninstall];this.log.info(`Running: poetry ${e.join(" ")}`);const r=await p(e,void 0,this.log,n);this.log.info(r)}catch(e){throw this.log.error(`Error removing packages with Poetry: ${e}`),e}if(t.install&&t.install.length>0)try{const e=["add",...t.install];this.log.info(`Running: poetry ${e.join(" ")}`);const r=await p(e,void 0,this.log,n);this.log.info(r)}catch(e){throw this.log.error(`Error adding packages with Poetry: ${e}`),e}return this.refreshPackages(e)}async refreshPackages(e){let t=process.cwd();const n=this.api.getPythonProjects();if(1===n.length)t=(await s.stat(n[0].uri.fsPath)).isDirectory()?n[0].uri.fsPath:c.dirname(n[0].uri.fsPath);else if(n.length>1){const r=new Set;await Promise.all(n.map((async t=>{const i=await this.api.getEnvironment(t.uri);if(i?.envId.id===e.envId.id){const e=(await s.stat(n[0].uri.fsPath)).isDirectory()?n[0].uri.fsPath:c.dirname(n[0].uri.fsPath);r.has(e)&&r.add(e)}}))),r.size>0&&(t=Array.from(r.values()).sort(((e,t)=>-1*(e.length-t.length)))[0])}const r=[];try{this.log.info(`Running: ${await(0,d.getPoetry)()} show --no-ansi`);const e=(await p(["show","--no-ansi"],t,this.log)).split("\n");for(const t of e){const e=t.match(/^(\S+)(?:\s+\([!]\))?\s+(\S+)\s+(.*)/);if(e){const[,t,n,i]=e;r.push({name:t,version:n,displayName:t,description:`${n} - ${i?.trim()||""}`})}}}catch(e){return this.log.error(`Error refreshing packages with Poetry: ${e}`),[]}return r.map((t=>this.api.createPackageItem(t,e,this)))}},t.runPoetry=p},2357:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.resolvePoetryPath=t.refreshPoetry=t.getPoetryVersion=t.getPoetryVirtualenvsPath=t.getPoetry=t.setPoetryForWorkspaces=t.setPoetryForWorkspace=t.getPoetryForWorkspace=t.setPoetryForGlobal=t.getPoetryForGlobal=t.clearPoetryCache=t.POETRY_VIRTUALENVS_PATH_KEY=t.POETRY_GLOBAL_KEY=t.POETRY_WORKSPACE_KEY=t.POETRY_PATH_KEY=t.POETRY_GLOBAL=void 0;const s=a(n(1605)),c=a(n(6928)),l=n(1398),u=o(n(7242)),h=n(5333),d=n(853),f=n(578),p=n(6878),v=n(6682),m=n(7422),g=n(2490),y=n(8310);let E,w;function P(){const e=(0,m.getConfiguration)("python").get("poetryPath");return e&&"string"==typeof e?(0,p.untildify)(e):e}async function _(e){E=e;const n=await(0,f.getWorkspacePersistentState)();await n.set(t.POETRY_PATH_KEY,e),await S(e)}async function b(e){if(E)return E;const n=await(0,f.getWorkspacePersistentState)();if(E=await n.get(t.POETRY_PATH_KEY),E)return(0,d.traceInfo)(`Using poetry from persistent state: ${E}`),w||S((0,p.untildify)(E)).catch((e=>(0,d.traceError)(`Error getting Poetry virtualenvs path: ${e}`))),(0,p.untildify)(E);const r=P();if(r)return E=r,(0,d.traceInfo)(`Using poetry from settings: ${r}`),E;if(E=await async function(){try{return await(0,u.default)("poetry")}catch{return}}(),E)return await _(E),E;const i=(0,p.getUserHomeDir)();if(i){const e=c.join(i,(0,v.isWindows)()?"AppData\\Roaming\\Python\\Scripts\\poetry.exe":".local/bin/poetry");if(await s.exists(e))return E=e,await _(E),E}if(e){const t=(await e.refresh(!1)).filter((e=>!(0,g.isNativeEnvInfo)(e))).map((e=>e)).filter((e=>"poetry"===e.tool.toLowerCase()));if(t.length>0)return E=t[0].executable,(0,d.traceInfo)(`Using poetry from native finder: ${E}`),await _(E),E}}async function S(e){if(w)return w;const n=await(0,f.getWorkspacePersistentState)();if(w=await n.get(t.POETRY_VIRTUALENVS_PATH_KEY),w)return(0,p.untildify)(w);const r=e||await b();if(r)try{const{stdout:e}=await T(`"${r}" config virtualenvs.path`);if(e){const r=e.trim();if(!c.isAbsolute(r)||r.includes("{")){const e=(0,p.getUserHomeDir)();e&&(w=c.join(e,".cache","pypoetry","virtualenvs"))}else w=r;if(w)return await n.set(t.POETRY_VIRTUALENVS_PATH_KEY,w),w}}catch(e){(0,d.traceError)(`Error getting Poetry virtualenvs path: ${e}`)}const i=(0,p.getUserHomeDir)();return i?(w=c.join(i,".cache","pypoetry","virtualenvs"),await n.set(t.POETRY_VIRTUALENVS_PATH_KEY,w),w):void 0}t.POETRY_GLOBAL="Global",t.POETRY_PATH_KEY=`${h.ENVS_EXTENSION_ID}:poetry:POETRY_PATH`,t.POETRY_WORKSPACE_KEY=`${h.ENVS_EXTENSION_ID}:poetry:WORKSPACE_SELECTED`,t.POETRY_GLOBAL_KEY=`${h.ENVS_EXTENSION_ID}:poetry:GLOBAL_SELECTED`,t.POETRY_VIRTUALENVS_PATH_KEY=`${h.ENVS_EXTENSION_ID}:poetry:VIRTUALENVS_PATH`,t.clearPoetryCache=async function(){E=void 0,w=void 0},t.getPoetryForGlobal=async function(){const e=await(0,f.getWorkspacePersistentState)();return await e.get(t.POETRY_GLOBAL_KEY)},t.setPoetryForGlobal=async function(e){const n=await(0,f.getWorkspacePersistentState)();await n.set(t.POETRY_GLOBAL_KEY,e)},t.getPoetryForWorkspace=async function(e){const n=await(0,f.getWorkspacePersistentState)(),r=await n.get(t.POETRY_WORKSPACE_KEY);if(r)try{return r[e]}catch{return}},t.setPoetryForWorkspace=async function(e,n){const r=await(0,f.getWorkspacePersistentState)(),i=await r.get(t.POETRY_WORKSPACE_KEY)??{};n?i[e]=n:delete i[e],await r.set(t.POETRY_WORKSPACE_KEY,i)},t.setPoetryForWorkspaces=async function(e,n){const r=await(0,f.getWorkspacePersistentState)(),i=await r.get(t.POETRY_WORKSPACE_KEY)??{};e.forEach((e=>{n?i[e]=n:delete i[e]})),await r.set(t.POETRY_WORKSPACE_KEY,i)},t.getPoetry=b,t.getPoetryVirtualenvsPath=S;const C=a(n(5317)),T=(0,n(9023).promisify)(C.exec);async function I(e,n,r,i){if(!(e.prefix&&e.executable&&e.version))return void(0,d.traceError)(`Incomplete poetry environment info: ${JSON.stringify(e)}`);const a=(0,y.shortVersion)(e.version),o=e.name||e.displayName||c.basename(e.prefix),s=e.displayName||`poetry (${a})`,u=c.normalize(e.prefix);let h=!1;const f=w;if(f){const e=c.normalize(f);h=u.startsWith(e)}else{const e=(0,p.getUserHomeDir)();if(e){const t=c.normalize(c.join(e,".cache","pypoetry","virtualenvs"));h=u.startsWith(t),S(i).catch((e=>(0,d.traceError)(`Error getting Poetry virtualenvs path: ${e}`)))}}const v=c.dirname(e.executable),{shellActivation:m,shellDeactivation:g}=await(0,y.getShellActivationCommands)(v),E={name:o,displayName:s,shortDisplayName:s,displayPath:e.prefix,version:e.version,environmentPath:l.Uri.file(e.prefix),description:void 0,tooltip:e.prefix,execInfo:{run:{executable:e.executable},shellActivation:m,shellDeactivation:g},sysPrefix:e.prefix,group:h?t.POETRY_GLOBAL:void 0};return n.createPythonEnvironmentItem(E,r)}t.getPoetryVersion=async function(e){try{const{stdout:t}=await T(`"${e}" --version`);(0,d.traceInfo)(`Poetry version output: ${t.trim()}`);const n=t.match(/Poetry (?:version|[\(\s]+version[\s\)]+)([0-9]+\.[0-9]+\.[0-9]+)/i);return n?n[1]:void 0}catch{return}},t.refreshPoetry=async function(e,t,n,r){(0,d.traceInfo)("Refreshing poetry environments");const i=P(),a=await t.refresh(e,i?[l.Uri.file(i)]:void 0);let o=await b();if(void 0===o){const e=a.filter((e=>!(0,g.isNativeEnvInfo)(e))).map((e=>e)).filter((e=>"poetry"===e.tool.toLowerCase()));e.length>0&&(o=e[0].executable,await _(o))}if(!o)return(0,d.traceInfo)("Poetry executable not found"),[];const s=a.filter((e=>(0,g.isNativeEnvInfo)(e))).map((e=>e)).filter((e=>e.kind===g.NativePythonEnvironmentKind.poetry)),c=[];return await Promise.all(s.map((async e=>{if(o){const t=await I(e,n,r,o);t&&c.push(t)}}))),(0,y.sortEnvironments)(c)},t.resolvePoetryPath=async function(e,t,n,r){try{const i=await t.resolve(e);if(i.kind!==g.NativePythonEnvironmentKind.poetry)return;const a=await b(t);return a?I(i,n,r,a):void(0,d.traceError)("Poetry not found while resolving environment")}catch{return}}},8043:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerPyenvFeatures=void 0;const r=n(853),i=n(8940),a=n(8310),o=n(2223),s=n(6217);t.registerPyenvFeatures=async function(e,t,n){const c=await(0,i.getPythonApi)();try{if(await(0,s.getPyenv)(e)){const n=new o.PyEnvManager(e,c);t.push(n,c.registerEnvironmentManager(n))}else(0,r.traceInfo)("Pyenv not found, turning off pyenv features."),await(0,a.notifyMissingManagerIfDefault)("ms-python.python:pyenv",n,c)}catch(e){(0,r.traceInfo)("Pyenv not found, turning off pyenv features.",e),await(0,a.notifyMissingManagerIfDefault)("ms-python.python:pyenv",n,c)}}},2223:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PyEnvManager=void 0;const o=a(n(6928)),s=n(1398),c=n(4300),l=n(2341),u=n(853),h=n(4047),d=n(675),f=n(8310),p=n(6217);t.PyEnvManager=class{constructor(e,t){this.nativeFinder=e,this.api=t,this.collection=[],this.fsPathToEnv=new Map,this._onDidChangeEnvironment=new s.EventEmitter,this.onDidChangeEnvironment=this._onDidChangeEnvironment.event,this._onDidChangeEnvironments=new s.EventEmitter,this.onDidChangeEnvironments=this._onDidChangeEnvironments.event,this.name="pyenv",this.displayName="PyEnv",this.preferredPackageManagerId="ms-python.python:pip",this.tooltip=new s.MarkdownString(l.PyenvStrings.pyenvManager,!0)}dispose(){this.collection=[],this.fsPathToEnv.clear()}async initialize(){if(this._initialized)return this._initialized.promise;this._initialized=(0,h.createDeferred)(),await(0,d.withProgress)({location:s.ProgressLocation.Window,title:l.PyenvStrings.pyenvDiscovering},(async()=>{this.collection=await(0,p.refreshPyenv)(!1,this.nativeFinder,this.api,this),await this.loadEnvMap(),this._onDidChangeEnvironments.fire(this.collection.map((e=>({environment:e,kind:c.EnvironmentChangeKind.add}))))})),this._initialized.resolve()}async getEnvironments(e){if(await this.initialize(),"all"===e)return Array.from(this.collection);if("global"===e)return this.collection.filter((e=>{e.group,p.PYENV_VERSIONS}));if(e instanceof s.Uri){const t=this.fromEnvMap(e);if(t)return[t]}return[]}async refresh(e){void 0===e&&await(0,d.withProgress)({location:s.ProgressLocation.Window,title:l.PyenvStrings.pyenvRefreshing},(async()=>{(0,u.traceInfo)("Refreshing Pyenv Environments");const e=this.collection.map((e=>e));this.collection=await(0,p.refreshPyenv)(!0,this.nativeFinder,this.api,this),await this.loadEnvMap();const t=[...e.map((e=>({kind:c.EnvironmentChangeKind.remove,environment:e}))),...this.collection.map((e=>({kind:c.EnvironmentChangeKind.add,environment:e})))];this._onDidChangeEnvironments.fire(t)}))}async get(e){if(await this.initialize(),e instanceof s.Uri){let t=this.fsPathToEnv.get(e.fsPath);if(t)return t;const n=this.api.getPythonProject(e);if(n&&(t=this.fsPathToEnv.get(n.uri.fsPath),t))return t}return this.globalEnv}async set(e,t){if(void 0===e)await(0,p.setPyenvForGlobal)(t?.environmentPath?.fsPath);else if(e instanceof s.Uri){const n=this.api.getPythonProject(e),r=n?.uri?.fsPath??e.fsPath;r&&(t?this.fsPathToEnv.set(r,t):this.fsPathToEnv.delete(r),await(0,p.setPyenvForWorkspace)(r,t?.environmentPath?.fsPath))}else if(Array.isArray(e)&&e.every((e=>e instanceof s.Uri))){const n=[];e.map((e=>this.api.getPythonProject(e))).forEach((e=>{e&&n.push(e)}));const r=new Map;n.forEach((e=>{r.set(e.uri.fsPath,this.fsPathToEnv.get(e.uri.fsPath)),t?this.fsPathToEnv.set(e.uri.fsPath,t):this.fsPathToEnv.delete(e.uri.fsPath)})),await(0,p.setPyenvForWorkspaces)(n.map((e=>e.uri.fsPath)),t?.environmentPath?.fsPath),n.forEach((e=>{const n=r.get(e.uri.fsPath);n?.envId.id!==t?.envId.id&&this._onDidChangeEnvironment.fire({uri:e.uri,old:n,new:t})}))}}async resolve(e){if(await this.initialize(),e instanceof s.Uri){const t=await(0,p.resolvePyenvPath)(e.fsPath,this.nativeFinder,this.api,this);if(t){return this.findEnvironmentByPath(t.environmentPath.fsPath)||(this.collection.push(t),this._onDidChangeEnvironments.fire([{kind:c.EnvironmentChangeKind.add,environment:t}]),t)}}}async clearCache(){await(0,p.clearPyenvCache)()}async loadEnvMap(){this.globalEnv=void 0,this.fsPathToEnv.clear();const e=await(0,p.getPyenvForGlobal)();e&&(this.globalEnv=this.findEnvironmentByPath(e),this.globalEnv||(this.globalEnv=await(0,p.resolvePyenvPath)(e,this.nativeFinder,this.api,this),this.globalEnv&&this.collection.push(this.globalEnv))),this.globalEnv||(this.globalEnv=(0,f.getLatest)(this.collection.filter((e=>e.group===p.PYENV_VERSIONS))));const t=this.collection.filter((e=>this.api.getPythonProject(e.environmentPath))).sort(((e,t)=>e.environmentPath.fsPath!==t.environmentPath.fsPath?e.environmentPath.fsPath.length-t.environmentPath.fsPath.length:e.environmentPath.fsPath.localeCompare(t.environmentPath.fsPath))),n=this.api.getPythonProjects().map((e=>e.uri.fsPath));for(const e of n){const n=await(0,p.getPyenvForWorkspace)(e);if(n){const t=this.findEnvironmentByPath(n);if(t)this.fsPathToEnv.set(e,t);else{const t=await(0,p.resolvePyenvPath)(n,this.nativeFinder,this.api,this);t?(this.fsPathToEnv.set(e,t),this.collection.push(t)):(0,u.traceError)(`Failed to resolve pyenv environment: ${n}`)}}else if(1===t.length)this.fsPathToEnv.set(e,t[0]);else{const n=t.find((t=>{const n=this.api.getPythonProject(t.environmentPath)?.uri.fsPath;return n&&o.normalize(n)===e}));n&&this.fsPathToEnv.set(e,n)}}}fromEnvMap(e){const t=this.fsPathToEnv.get(e.fsPath);if(t)return t;const n=this.api.getPythonProject(e);return n?this.fsPathToEnv.get(n.uri.fsPath):void 0}findEnvironmentByPath(e){const t=o.normalize(e);return this.collection.find((e=>{const n=o.normalize(e.environmentPath.fsPath);return n===t||o.dirname(n)===t||o.dirname(o.dirname(n))===t}))}}},6217:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.resolvePyenvPath=t.refreshPyenv=t.getPyenv=t.setPyenvForWorkspaces=t.setPyenvForWorkspace=t.getPyenvForWorkspace=t.setPyenvForGlobal=t.getPyenvForGlobal=t.clearPyenvCache=t.PYENV_GLOBAL_KEY=t.PYENV_WORKSPACE_KEY=t.PYENV_PATH_KEY=t.PYENV_VERSIONS=t.PYENV_ENVIRONMENTS=void 0;const s=a(n(1605)),c=a(n(6928)),l=n(1398),u=o(n(7242)),h=n(5333),d=n(853),f=n(578),p=n(6878),v=n(6682),m=n(2490),g=n(8310);let y;async function E(e){if(y)return y;const n=await(0,f.getWorkspacePersistentState)();if(y=await n.get(t.PYENV_PATH_KEY),y)return(0,d.traceInfo)(`Using pyenv from persistent state: ${y}`),(0,p.untildify)(y);const r=(0,v.isWindows)()?"pyenv.exe":"pyenv",i=process.env.PYENV_ROOT;if(i){const e=c.join(i,"bin",r);if(await s.exists(e))return e}const a=(0,p.getUserHomeDir)();if(a){const e=c.join(a,".pyenv","bin",r);if(await s.exists(e))return e;if((0,v.isWindows)()){const e=c.join(a,".pyenv","pyenv-win","bin",r);if(await s.exists(e))return e}}if(y=await async function(){try{return await(0,u.default)("pyenv")}catch{return}}(),y)return y;if(e){const r=(await e.refresh(!1)).filter((e=>!(0,m.isNativeEnvInfo)(e))).map((e=>e)).filter((e=>"pyenv"===e.tool.toLowerCase()));if(r.length>0)return y=r[0].executable,(0,d.traceInfo)(`Using pyenv from native finder: ${y}`),await n.set(t.PYENV_PATH_KEY,y),y}}function w(e,n,r,i){if(!(e.prefix&&e.executable&&e.version))return void(0,d.traceError)(`Incomplete pyenv environment info: ${JSON.stringify(e)}`);const a=(0,p.normalizePath)(c.join(c.dirname(c.dirname(i)),"versions")),o=(0,p.normalizePath)(c.join(c.dirname(a),"envs"));let s;const u=(0,p.normalizePath)(e.prefix);u.startsWith(a)?s=t.PYENV_VERSIONS:u.startsWith(o)&&(s=t.PYENV_ENVIRONMENTS);const h=(0,g.shortVersion)(e.version),f=e.name||e.displayName||c.basename(e.prefix);let v=e.displayName||`pyenv (${h})`;e.kind===m.NativePythonEnvironmentKind.pyenvVirtualEnv&&(v=`${f} (${h})`);const y=new Map,E=new Map;y.set("unknown",[{executable:"pyenv",args:["shell",f]}]),E.set("unknown",[{executable:"pyenv",args:["shell","--unset"]}]);const w={name:f,displayName:v,shortDisplayName:v,displayPath:e.prefix,version:e.version,environmentPath:l.Uri.file(e.prefix),description:void 0,tooltip:e.prefix,execInfo:{run:{executable:e.executable},shellActivation:y,shellDeactivation:E},sysPrefix:e.prefix,group:s};return n.createPythonEnvironmentItem(w,r)}t.PYENV_ENVIRONMENTS="Environments",t.PYENV_VERSIONS="Versions",t.PYENV_PATH_KEY=`${h.ENVS_EXTENSION_ID}:pyenv:PYENV_PATH`,t.PYENV_WORKSPACE_KEY=`${h.ENVS_EXTENSION_ID}:pyenv:WORKSPACE_SELECTED`,t.PYENV_GLOBAL_KEY=`${h.ENVS_EXTENSION_ID}:pyenv:GLOBAL_SELECTED`,t.clearPyenvCache=async function(){y=void 0},t.getPyenvForGlobal=async function(){const e=await(0,f.getWorkspacePersistentState)();return await e.get(t.PYENV_GLOBAL_KEY)},t.setPyenvForGlobal=async function(e){const n=await(0,f.getWorkspacePersistentState)();await n.set(t.PYENV_GLOBAL_KEY,e)},t.getPyenvForWorkspace=async function(e){const n=await(0,f.getWorkspacePersistentState)(),r=await n.get(t.PYENV_WORKSPACE_KEY);if(r)try{return r[e]}catch{return}},t.setPyenvForWorkspace=async function(e,n){const r=await(0,f.getWorkspacePersistentState)(),i=await r.get(t.PYENV_WORKSPACE_KEY)??{};n?i[e]=n:delete i[e],await r.set(t.PYENV_WORKSPACE_KEY,i)},t.setPyenvForWorkspaces=async function(e,n){const r=await(0,f.getWorkspacePersistentState)(),i=await r.get(t.PYENV_WORKSPACE_KEY)??{};e.forEach((e=>{n?i[e]=n:delete i[e]})),await r.set(t.PYENV_WORKSPACE_KEY,i)},t.getPyenv=E,t.refreshPyenv=async function(e,n,r,i){(0,d.traceInfo)("Refreshing pyenv environments");const a=await n.refresh(e);let o=await E();if(void 0===o){const e=a.filter((e=>!(0,m.isNativeEnvInfo)(e))).map((e=>e)).filter((e=>"pyenv"===e.tool.toLowerCase()));e.length>0&&(o=e[0].executable,await async function(e){y=e;const n=await(0,f.getWorkspacePersistentState)();await n.set(t.PYENV_PATH_KEY,e)}(o))}const s=a.filter((e=>(0,m.isNativeEnvInfo)(e))).map((e=>e)).filter((e=>e.kind===m.NativePythonEnvironmentKind.pyenv||e.kind===m.NativePythonEnvironmentKind.pyenvVirtualEnv)),c=[];return s.forEach((e=>{if(o){const t=w(e,r,i,o);t&&c.push(t)}})),(0,g.sortEnvironments)(c)},t.resolvePyenvPath=async function(e,t,n,r){try{const i=await t.resolve(e);if(i.kind!==m.NativePythonEnvironmentKind.pyenv)return;const a=await E(t);return a?w(i,n,r,a):void(0,d.traceError)("Pyenv not found while resolving environment")}catch{return}}},1236:(e,t)=>{"use strict";t.fromCallback=function(e){return Object.defineProperty((function(...t){if("function"!=typeof t[t.length-1])return new Promise(((n,r)=>{t.push(((e,t)=>null!=e?r(e):n(t))),e.apply(this,t)}));e.apply(this,t)}),"name",{value:e.name})},t.fromPromise=function(e){return Object.defineProperty((function(...t){const n=t[t.length-1];if("function"!=typeof n)return e.apply(this,t);t.pop(),e.apply(this,t).then((e=>n(null,e)),n)}),"name",{value:e.name})}},3281:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressType=t.ProgressToken=t.createMessageConnection=t.NullLogger=t.ConnectionOptions=t.ConnectionStrategy=t.AbstractMessageBuffer=t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=t.SharedArrayReceiverStrategy=t.SharedArraySenderStrategy=t.CancellationToken=t.CancellationTokenSource=t.Emitter=t.Event=t.Disposable=t.LRUCache=t.Touch=t.LinkedMap=t.ParameterStructures=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.ErrorCodes=t.ResponseError=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType0=t.RequestType=t.Message=t.RAL=void 0,t.MessageStrategy=t.CancellationStrategy=t.CancellationSenderStrategy=t.RequestCancellationReceiverStrategy=t.IdCancellationReceiverStrategy=t.CancellationReceiverStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.TraceValue=t.Trace=void 0;const i=n(6177);Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return i.Message}}),Object.defineProperty(t,"RequestType",{enumerable:!0,get:function(){return i.RequestType}}),Object.defineProperty(t,"RequestType0",{enumerable:!0,get:function(){return i.RequestType0}}),Object.defineProperty(t,"RequestType1",{enumerable:!0,get:function(){return i.RequestType1}}),Object.defineProperty(t,"RequestType2",{enumerable:!0,get:function(){return i.RequestType2}}),Object.defineProperty(t,"RequestType3",{enumerable:!0,get:function(){return i.RequestType3}}),Object.defineProperty(t,"RequestType4",{enumerable:!0,get:function(){return i.RequestType4}}),Object.defineProperty(t,"RequestType5",{enumerable:!0,get:function(){return i.RequestType5}}),Object.defineProperty(t,"RequestType6",{enumerable:!0,get:function(){return i.RequestType6}}),Object.defineProperty(t,"RequestType7",{enumerable:!0,get:function(){return i.RequestType7}}),Object.defineProperty(t,"RequestType8",{enumerable:!0,get:function(){return i.RequestType8}}),Object.defineProperty(t,"RequestType9",{enumerable:!0,get:function(){return i.RequestType9}}),Object.defineProperty(t,"ResponseError",{enumerable:!0,get:function(){return i.ResponseError}}),Object.defineProperty(t,"ErrorCodes",{enumerable:!0,get:function(){return i.ErrorCodes}}),Object.defineProperty(t,"NotificationType",{enumerable:!0,get:function(){return i.NotificationType}}),Object.defineProperty(t,"NotificationType0",{enumerable:!0,get:function(){return i.NotificationType0}}),Object.defineProperty(t,"NotificationType1",{enumerable:!0,get:function(){return i.NotificationType1}}),Object.defineProperty(t,"NotificationType2",{enumerable:!0,get:function(){return i.NotificationType2}}),Object.defineProperty(t,"NotificationType3",{enumerable:!0,get:function(){return i.NotificationType3}}),Object.defineProperty(t,"NotificationType4",{enumerable:!0,get:function(){return i.NotificationType4}}),Object.defineProperty(t,"NotificationType5",{enumerable:!0,get:function(){return i.NotificationType5}}),Object.defineProperty(t,"NotificationType6",{enumerable:!0,get:function(){return i.NotificationType6}}),Object.defineProperty(t,"NotificationType7",{enumerable:!0,get:function(){return i.NotificationType7}}),Object.defineProperty(t,"NotificationType8",{enumerable:!0,get:function(){return i.NotificationType8}}),Object.defineProperty(t,"NotificationType9",{enumerable:!0,get:function(){return i.NotificationType9}}),Object.defineProperty(t,"ParameterStructures",{enumerable:!0,get:function(){return i.ParameterStructures}});const a=n(3352);Object.defineProperty(t,"LinkedMap",{enumerable:!0,get:function(){return a.LinkedMap}}),Object.defineProperty(t,"LRUCache",{enumerable:!0,get:function(){return a.LRUCache}}),Object.defineProperty(t,"Touch",{enumerable:!0,get:function(){return a.Touch}});const o=n(4019);Object.defineProperty(t,"Disposable",{enumerable:!0,get:function(){return o.Disposable}});const s=n(2676);Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return s.Event}}),Object.defineProperty(t,"Emitter",{enumerable:!0,get:function(){return s.Emitter}});const c=n(9850);Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return c.CancellationTokenSource}}),Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return c.CancellationToken}});const l=n(4996);Object.defineProperty(t,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return l.SharedArraySenderStrategy}}),Object.defineProperty(t,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return l.SharedArrayReceiverStrategy}});const u=n(9085);Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return u.MessageReader}}),Object.defineProperty(t,"AbstractMessageReader",{enumerable:!0,get:function(){return u.AbstractMessageReader}}),Object.defineProperty(t,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return u.ReadableStreamMessageReader}});const h=n(3193);Object.defineProperty(t,"MessageWriter",{enumerable:!0,get:function(){return h.MessageWriter}}),Object.defineProperty(t,"AbstractMessageWriter",{enumerable:!0,get:function(){return h.AbstractMessageWriter}}),Object.defineProperty(t,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return h.WriteableStreamMessageWriter}});const d=n(9244);Object.defineProperty(t,"AbstractMessageBuffer",{enumerable:!0,get:function(){return d.AbstractMessageBuffer}});const f=n(577);Object.defineProperty(t,"ConnectionStrategy",{enumerable:!0,get:function(){return f.ConnectionStrategy}}),Object.defineProperty(t,"ConnectionOptions",{enumerable:!0,get:function(){return f.ConnectionOptions}}),Object.defineProperty(t,"NullLogger",{enumerable:!0,get:function(){return f.NullLogger}}),Object.defineProperty(t,"createMessageConnection",{enumerable:!0,get:function(){return f.createMessageConnection}}),Object.defineProperty(t,"ProgressToken",{enumerable:!0,get:function(){return f.ProgressToken}}),Object.defineProperty(t,"ProgressType",{enumerable:!0,get:function(){return f.ProgressType}}),Object.defineProperty(t,"Trace",{enumerable:!0,get:function(){return f.Trace}}),Object.defineProperty(t,"TraceValue",{enumerable:!0,get:function(){return f.TraceValue}}),Object.defineProperty(t,"TraceFormat",{enumerable:!0,get:function(){return f.TraceFormat}}),Object.defineProperty(t,"SetTraceNotification",{enumerable:!0,get:function(){return f.SetTraceNotification}}),Object.defineProperty(t,"LogTraceNotification",{enumerable:!0,get:function(){return f.LogTraceNotification}}),Object.defineProperty(t,"ConnectionErrors",{enumerable:!0,get:function(){return f.ConnectionErrors}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return f.ConnectionError}}),Object.defineProperty(t,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return f.CancellationReceiverStrategy}}),Object.defineProperty(t,"IdCancellationReceiverStrategy",{enumerable:!0,get:function(){return f.IdCancellationReceiverStrategy}}),Object.defineProperty(t,"RequestCancellationReceiverStrategy",{enumerable:!0,get:function(){return f.RequestCancellationReceiverStrategy}}),Object.defineProperty(t,"CancellationSenderStrategy",{enumerable:!0,get:function(){return f.CancellationSenderStrategy}}),Object.defineProperty(t,"CancellationStrategy",{enumerable:!0,get:function(){return f.CancellationStrategy}}),Object.defineProperty(t,"MessageStrategy",{enumerable:!0,get:function(){return f.MessageStrategy}}),Object.defineProperty(t,"TraceValues",{enumerable:!0,get:function(){return f.TraceValues}});const p=r(n(9590));t.RAL=p.default},9850:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationTokenSource=t.CancellationToken=void 0;const s=o(n(9590)),c=a(n(8585)),l=n(2676);var u;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:l.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:l.Event.None}),e.is=function(t){const n=t;return n&&(n===e.None||n===e.Cancelled||c.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(u||(t.CancellationToken=u={}));const h=Object.freeze((function(e,t){const n=(0,s.default)().timer.setTimeout(e.bind(t),0);return{dispose(){n.dispose()}}}));class d{_isCancelled=!1;_emitter;cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?h:(this._emitter||(this._emitter=new l.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}t.CancellationTokenSource=class{_token;get token(){return this._token||(this._token=new d),this._token}cancel(){this._token?this._token.cancel():this._token=u.Cancelled}dispose(){this._token?this._token instanceof d&&this._token.dispose():this._token=u.None}}},577:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.ConnectionOptions=t.MessageStrategy=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.RequestCancellationReceiverStrategy=t.IdCancellationReceiverStrategy=t.ConnectionStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.TraceValue=t.Trace=t.NullLogger=t.ProgressType=t.ProgressToken=void 0;const s=o(n(9590)),c=a(n(8585)),l=n(6177),u=n(3352),h=n(2676),d=n(9850);var f,p,v,m,g,y,E,w,P,_,b,S,C,T,I,k,M,O,N;!function(e){e.type=new l.NotificationType("$/cancelRequest")}(f||(f={})),function(e){e.is=function(e){return"string"==typeof e||"number"==typeof e}}(p||(t.ProgressToken=p={})),function(e){e.type=new l.NotificationType("$/progress")}(v||(v={})),t.ProgressType=class{__;_pr;constructor(){}},function(e){e.is=function(e){return c.func(e)}}(m||(m={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose"}(g||(t.Trace=g={})),function(e){e.Off="off",e.Messages="messages",e.Compact="compact",e.Verbose="verbose"}(y||(t.TraceValue=y={})),t.TraceValues=y,function(e){e.fromString=function(t){if(!c.string(t))return e.Off;switch(t=t.toLowerCase()){case"off":default:return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Compact:return"compact";case e.Verbose:return"verbose";default:return"off"}}}(g||(t.Trace=g={})),function(e){e.Text="text",e.JSON="json"}(E||(t.TraceFormat=E={})),function(e){e.fromString=function(t){return c.string(t)&&"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(E||(t.TraceFormat=E={})),function(e){e.type=new l.NotificationType("$/setTrace")}(w||(t.SetTraceNotification=w={})),function(e){e.type=new l.NotificationType("$/logTrace")}(P||(t.LogTraceNotification=P={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(_||(t.ConnectionErrors=_={}));class A extends Error{code;constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,A.prototype)}}t.ConnectionError=A,function(e){e.is=function(e){const t=e;return t&&c.func(t.cancelUndispatched)}}(b||(t.ConnectionStrategy=b={})),function(e){e.is=function(e){const t=e;return t&&(void 0===t.kind||"id"===t.kind)&&c.func(t.createCancellationTokenSource)&&(void 0===t.dispose||c.func(t.dispose))}}(S||(t.IdCancellationReceiverStrategy=S={})),function(e){e.is=function(e){const t=e;return t&&"request"===t.kind&&c.func(t.createCancellationTokenSource)&&(void 0===t.dispose||c.func(t.dispose))}}(C||(t.RequestCancellationReceiverStrategy=C={})),function(e){e.Message=Object.freeze({createCancellationTokenSource:e=>new d.CancellationTokenSource}),e.is=function(e){return S.is(e)||C.is(e)}}(T||(t.CancellationReceiverStrategy=T={})),function(e){e.Message=Object.freeze({sendCancellation:(e,t)=>e.sendNotification(f.type,{id:t}),cleanup(e){}}),e.is=function(e){const t=e;return t&&c.func(t.sendCancellation)&&c.func(t.cleanup)}}(I||(t.CancellationSenderStrategy=I={})),function(e){e.Message=Object.freeze({receiver:T.Message,sender:I.Message}),e.is=function(e){const t=e;return t&&T.is(t.receiver)&&I.is(t.sender)}}(k||(t.CancellationStrategy=k={})),function(e){e.is=function(e){const t=e;return t&&c.func(t.handleMessage)}}(M||(t.MessageStrategy=M={})),function(e){e.is=function(e){const t=e;return t&&(k.is(t.cancellationStrategy)||b.is(t.connectionStrategy)||M.is(t.messageStrategy)||c.number(t.maxParallelism))}}(O||(t.ConnectionOptions=O={})),function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(N||(N={})),t.createMessageConnection=function(e,n,r,i){const a=void 0!==r?r:t.NullLogger;let o=0,y=0,b=0;const C="2.0",T=i?.maxParallelism??-1;let I,O=0;const x=new Map;let D;const j=new Map,R=new Map;let F,L,V=new u.LinkedMap,$=new Map,H=new Set,W=new Map,B=g.Off,U=E.Text,K=N.New;const Y=new h.Emitter,q=new h.Emitter,z=new h.Emitter,G=new h.Emitter,X=new h.Emitter,Q=i&&i.cancellationStrategy?i.cancellationStrategy:k.Message;function J(e){}function Z(){return K===N.Listening}function ee(){return K===N.Closed}function te(){return K===N.Disposed}function ne(){K!==N.New&&K!==N.Listening||(K=N.Closed,q.fire(void 0))}function re(e){if(null===e)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+e.toString()}function ie(){F||0===V.size||-1!==T&&O>=T||(F=(0,s.default)().timer.setImmediate((async()=>{if(F=void 0,0===V.size)return;if(-1!==T&&O>=T)return;const e=V.shift();let t;try{O++;const n=i?.messageStrategy;t=M.is(n)?n.handleMessage(e,ae):ae(e)}catch(e){a.error(`Processing message queue failed: ${e.toString()}`)}finally{t instanceof Promise?t.then((()=>{O--,ie()})).catch((e=>{a.error(`Processing message queue failed: ${e.toString()}`)})):O--,ie()}})))}async function ae(e){return l.Message.isRequest(e)?async function(e){if(te())return Promise.resolve();function t(t,r,i){const a={jsonrpc:C,id:e.id};return t instanceof l.ResponseError?a.error=t.toJson():a.result=void 0===t?null:t,le(a,r,i),n.write(a)}function r(t,r,i){const a={jsonrpc:C,id:e.id,error:t.toJson()};return le(a,r,i),n.write(a)}!function(e){if(B!==g.Off&&L)if(U===E.Text){let t;B!==g.Verbose&&B!==g.Compact||!e.params||(t=`Params: ${ce(e.params)}\n\n`),L.log(`Received request '${e.method} - (${e.id})'.`,t)}else he("receive-request",e)}(e);const i=x.get(e.method);let a,o;i&&(a=i.type,o=i.handler);const s=Date.now();if(o||I){const n=e.id??String(Date.now()),i=S.is(Q.receiver)?Q.receiver.createCancellationTokenSource(n):Q.receiver.createCancellationTokenSource(e);null!==e.id&&H.has(e.id)&&i.cancel(),null!==e.id&&W.set(n,i);try{let n;if(o)if(void 0===e.params){if(void 0!==a&&0!==a.numberOfParams)return r(new l.ResponseError(l.ErrorCodes.InvalidParams,`Request ${e.method} defines ${a.numberOfParams} params but received none.`),e.method,s);n=o(i.token)}else if(Array.isArray(e.params)){if(void 0!==a&&a.parameterStructures===l.ParameterStructures.byName)return r(new l.ResponseError(l.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,s);n=o(...e.params,i.token)}else{if(void 0!==a&&a.parameterStructures===l.ParameterStructures.byPosition)return r(new l.ResponseError(l.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,s);n=o(e.params,i.token)}else I&&(n=I(e.method,e.params,i.token));const c=await n;await t(c,e.method,s)}catch(n){n instanceof l.ResponseError?await t(n,e.method,s):n&&c.string(n.message)?await r(new l.ResponseError(l.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${n.message}`),e.method,s):await r(new l.ResponseError(l.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,s)}finally{W.delete(n)}}else await r(new l.ResponseError(l.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,s)}(e):l.Message.isNotification(e)?async function(e){if(te())return;let t,n;if(e.method===f.type.method){const t=e.params.id;return H.delete(t),void ue(e)}{const r=j.get(e.method);r&&(n=r.handler,t=r.type)}if(n||D)try{if(ue(e),n)if(void 0===e.params)void 0!==t&&0!==t.numberOfParams&&t.parameterStructures!==l.ParameterStructures.byName&&a.error(`Notification ${e.method} defines ${t.numberOfParams} params but received none.`),await n();else if(Array.isArray(e.params)){const r=e.params;e.method===v.type.method&&2===r.length&&p.is(r[0])?await n({token:r[0],value:r[1]}):(void 0!==t&&(t.parameterStructures===l.ParameterStructures.byName&&a.error(`Notification ${e.method} defines parameters by name but received parameters by position`),t.numberOfParams!==e.params.length&&a.error(`Notification ${e.method} defines ${t.numberOfParams} params but received ${r.length} arguments`)),await n(...r))}else void 0!==t&&t.parameterStructures===l.ParameterStructures.byPosition&&a.error(`Notification ${e.method} defines parameters by position but received parameters by name`),await n(e.params);else D&&await D(e.method,e.params)}catch(t){t.message?a.error(`Notification handler '${e.method}' failed with message: ${t.message}`):a.error(`Notification handler '${e.method}' failed unexpectedly.`)}else z.fire(e)}(e):l.Message.isResponse(e)?se(e):function(e){if(!e)return void a.error("Received empty message.");a.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);const t=e;if(c.string(t.id)||c.number(t.id)){const e=t.id,n=$.get(e);n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}e.onClose(ne),e.onError((function(e){Y.fire([e,void 0,void 0])})),n.onClose(ne),n.onError((function(e){Y.fire(e)}));const oe=e=>{try{if(l.Message.isNotification(e)&&e.method===f.type.method){const t=e.params.id,r=re(t),o=V.get(r);if(l.Message.isRequest(o)){const s=i?.connectionStrategy,c=s&&s.cancelUndispatched?s.cancelUndispatched(o,J):void 0;if(c&&(void 0!==c.error||void 0!==c.result))return V.delete(r),W.delete(t),c.id=o.id,le(c,e.method,Date.now()),void n.write(c).catch((()=>a.error("Sending response for canceled message failed.")))}const s=W.get(t);if(void 0!==s)return s.cancel(),void ue(e);H.add(t)}!function(e,t){var n;l.Message.isRequest(t)?e.set(re(t.id),t):l.Message.isResponse(t)?-1===T?e.set(null===(n=t.id)?"res-unknown-"+(++b).toString():"res-"+n.toString(),t):se(t):e.set("not-"+(++y).toString(),t)}(V,e)}finally{ie()}};function se(e){if(!te())if(null===e.id)e.error?a.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):a.error("Received response message without id. No further error information provided.");else{const t=e.id,n=$.get(t);if(function(e,t){if(B!==g.Off&&L)if(U===E.Text){let n;if(B!==g.Verbose&&B!==g.Compact||(e.error&&e.error.data?n=`Error data: ${ce(e.error.data)}\n\n`:e.result?n=`Result: ${ce(e.result)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){const r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";L.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else L.log(`Received response ${e.id} without active response promise.`,n)}else he("receive-response",e)}(e,n),void 0!==n){$.delete(t);try{if(e.error){const t=e.error;n.reject(new l.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");n.resolve(e.result)}}catch(e){e.message?a.error(`Response handler '${n.method}' failed with message: ${e.message}`):a.error(`Response handler '${n.method}' failed unexpectedly.`)}}}}function ce(e){if(null!=e)switch(B){case g.Verbose:return JSON.stringify(e,null,4);case g.Compact:return JSON.stringify(e);default:return}}function le(e,t,n){if(B!==g.Off&&L)if(U===E.Text){let r;B!==g.Verbose&&B!==g.Compact||(e.error&&e.error.data?r=`Error data: ${ce(e.error.data)}\n\n`:e.result?r=`Result: ${ce(e.result)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),L.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else he("send-response",e)}function ue(e){if(B!==g.Off&&L&&e.method!==P.type.method)if(U===E.Text){let t;B!==g.Verbose&&B!==g.Compact||(t=e.params?`Params: ${ce(e.params)}\n\n`:"No parameters provided.\n\n"),L.log(`Received notification '${e.method}'.`,t)}else he("receive-notification",e)}function he(e,t){if(!L||B===g.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};L.log(n)}function de(){if(ee())throw new A(_.Closed,"Connection is closed.");if(te())throw new A(_.Disposed,"Connection is disposed.")}function fe(e){return void 0===e?null:e}function pe(e){return null===e?void 0:e}function ve(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function me(e,t){switch(e){case l.ParameterStructures.auto:return ve(t)?pe(t):[fe(t)];case l.ParameterStructures.byName:if(!ve(t))throw new Error("Received parameters by name but param is not an object literal.");return pe(t);case l.ParameterStructures.byPosition:return[fe(t)];default:throw new Error(`Unknown parameter structure ${e.toString()}`)}}function ge(e,t){let n;const r=e.numberOfParams;switch(r){case 0:n=void 0;break;case 1:n=me(e.parameterStructures,t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(fe(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null)}return n}const ye={sendNotification:(e,...t)=>{let r,i;if(de(),c.string(e)){r=e;const n=t[0];let a=0,o=l.ParameterStructures.auto;l.ParameterStructures.is(n)&&(a=1,o=n);const s=t.length,c=s-a;switch(c){case 0:i=void 0;break;case 1:i=me(o,t[a]);break;default:if(o===l.ParameterStructures.byName)throw new Error(`Received ${c} parameters for 'by Name' notification parameter structure.`);i=t.slice(a,s).map((e=>fe(e)))}}else{const n=t;r=e.method,i=ge(e,n)}const o={jsonrpc:C,method:r,params:i};return function(e){if(B!==g.Off&&L)if(U===E.Text){let t;B!==g.Verbose&&B!==g.Compact||(t=e.params?`Params: ${ce(e.params)}\n\n`:"No parameters provided.\n\n"),L.log(`Sending notification '${e.method}'.`,t)}else he("send-notification",e)}(o),n.write(o).catch((e=>{throw a.error("Sending notification failed."),e}))},onNotification:(e,t)=>{let n;return de(),c.func(e)?D=e:t&&(c.string(e)?(n=e,j.set(e,{type:void 0,handler:t})):(n=e.method,j.set(e.method,{type:e,handler:t}))),{dispose:()=>{void 0!==n?j.delete(n):D=void 0}}},onProgress:(e,t,n)=>{if(R.has(t))throw new Error(`Progress handler for token ${t} already registered`);return R.set(t,n),{dispose:()=>{R.delete(t)}}},sendProgress:(e,t,n)=>ye.sendNotification(v.type,{token:t,value:n}),onUnhandledProgress:G.event,sendRequest:(e,...t)=>{function r(e,t){const n=Q.sender.sendCancellation(e,t);void 0===n?a.log(`Received no promise from cancellation strategy when cancelling id ${t}`):n.catch((()=>{a.log(`Sending cancellation messages for id ${t} failed.`)}))}let i,s,u;if(de(),function(){if(!Z())throw new Error("Call listen() first.")}(),c.string(e)){i=e;const n=t[0],r=t[t.length-1];let a=0,o=l.ParameterStructures.auto;l.ParameterStructures.is(n)&&(a=1,o=n);let c=t.length;d.CancellationToken.is(r)&&(c-=1,u=r);const h=c-a;switch(h){case 0:s=void 0;break;case 1:s=me(o,t[a]);break;default:if(o===l.ParameterStructures.byName)throw new Error(`Received ${h} parameters for 'by Name' request parameter structure.`);s=t.slice(a,c).map((e=>fe(e)))}}else{const n=t;i=e.method,s=ge(e,n);const r=e.numberOfParams;u=d.CancellationToken.is(n[r])?n[r]:void 0}const h=o++;let f,p=!1;void 0!==u&&(u.isCancellationRequested?p=!0:f=u.onCancellationRequested((()=>{r(ye,h)})));const v={jsonrpc:C,id:h,method:i,params:s};return function(e){if(B!==g.Off&&L)if(U===E.Text){let t;B!==g.Verbose&&B!==g.Compact||!e.params||(t=`Params: ${ce(e.params)}\n\n`),L.log(`Sending request '${e.method} - (${e.id})'.`,t)}else he("send-request",e)}(v),"function"==typeof Q.sender.enableCancellation&&Q.sender.enableCancellation(v),new Promise((async(e,t)=>{const o={method:i,timerStart:Date.now(),resolve:t=>{e(t),Q.sender.cleanup(h),f?.dispose()},reject:e=>{t(e),Q.sender.cleanup(h),f?.dispose()}};try{$.set(h,o),await n.write(v),p&&r(ye,h)}catch(e){throw $.delete(h),o.reject(new l.ResponseError(l.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),a.error("Sending request failed."),e}}))},onRequest:(e,t)=>{de();let n=null;return m.is(e)?(n=void 0,I=e):c.string(e)?(n=null,void 0!==t&&(n=e,x.set(e,{handler:t,type:void 0}))):void 0!==t&&(n=e.method,x.set(e.method,{type:e,handler:t})),{dispose:()=>{null!==n&&(void 0!==n?x.delete(n):I=void 0)}}},hasPendingResponse:()=>$.size>0,trace:async(e,t,n)=>{let r=!1,i=E.Text;void 0!==n&&(c.boolean(n)?r=n:(r=n.sendNotification||!1,i=n.traceFormat||E.Text)),B=e,U=i,L=B===g.Off?void 0:t,!r||ee()||te()||await ye.sendNotification(w.type,{value:g.toString(e)})},onError:Y.event,onClose:q.event,onUnhandledNotification:z.event,onDispose:X.event,end:()=>{n.end()},dispose:()=>{if(te())return;K=N.Disposed,X.fire(void 0);const t=new l.ResponseError(l.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const e of $.values())e.reject(t);$=new Map,W=new Map,H=new Set,V=new u.LinkedMap,c.func(n.dispose)&&n.dispose(),c.func(e.dispose)&&e.dispose()},listen:()=>{de(),function(){if(Z())throw new A(_.AlreadyListening,"Connection is already listening")}(),K=N.Listening,e.listen(oe)},inspect:()=>{(0,s.default)().console.log("inspect")}};return ye.onNotification(P.type,(e=>{if(B===g.Off||!L)return;const t=B===g.Verbose||B===g.Compact;L.log(e.message,t?e.verbose:void 0)})),ye.onNotification(v.type,(async e=>{const t=R.get(e.token);t?await t(e.value):G.fire(e)})),ye}},4019:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Disposable=void 0,function(e){e.create=function(e){return{dispose:e}}}(n||(t.Disposable=n={}))},2676:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=t.Event=void 0;const i=r(n(9590));var a;!function(e){const t={dispose(){}};e.None=function(){return t}}(a||(t.Event=a={}));class o{_callbacks;_contexts;add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let r=0,i=this._callbacks.length;r<i;r++)if(this._callbacks[r]===e){if(this._contexts[r]===t)return this._callbacks.splice(r,1),void this._contexts.splice(r,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];const t=[],n=this._callbacks.slice(0),r=this._contexts.slice(0);for(let a=0,o=n.length;a<o;a++)try{t.push(n[a].apply(r[a],e))}catch(e){(0,i.default)().console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class s{_options;static _noop=function(){};_event;_callbacks;constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{this._callbacks||(this._callbacks=new o),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);const r={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),r.dispose=s._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(r),r}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}t.Emitter=s},8585:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function r(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=r,t.stringArray=function(e){return r(e)&&e.every((e=>n(e)))}},3352:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=t.LinkedMap=t.Touch=void 0,function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last}(n||(t.Touch=n={}));class r{[Symbol.toStringTag]="LinkedMap";_map;_head;_tail;_size;_state;constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}before(e){const t=this._map.get(e);return t?t.previous?.value:void 0}after(e){const t=this._map.get(e);return t?t.next?.value:void 0}has(e){return this._map.has(e)}get(e,t=n.None){const r=this._map.get(e);if(r)return t!==n.None&&this.touch(r,t),r.value}set(e,t,r=n.None){let i=this._map.get(e);if(i)i.value=t,r!==n.None&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case n.None:this.addItemLast(i);break;case n.First:this.addItemFirst(i);break;case n.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.key,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}values(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.value,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}entries(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:[t.key,t.value],done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===n.First||t===n.Last)if(t===n.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===n.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach(((t,n)=>{e.push([n,t])})),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}t.LinkedMap=r,t.LRUCache=class extends r{_limit;_ratio;constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=n.AsNew){return super.get(e,t)}peek(e){return super.get(e,n.None)}set(e,t){return super.set(e,t,n.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}},9244:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractMessageBuffer=void 0,t.AbstractMessageBuffer=class{_encoding;_chunks;_totalLength;constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){const t="string"==typeof e?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(e=!1){if(0===this._chunks.length)return;let t=0,n=0,r=0,i=0;e:for(;n<this._chunks.length;){const e=this._chunks[n];for(r=0;r<e.length;){switch(e[r]){case 13:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case 10:switch(t){case 1:t=2;break;case 3:t=4,r++;break e;default:t=0}break;default:t=0}r++}i+=e.byteLength,n++}if(4!==t)return;const a=this._read(i+r),o=new Map,s=this.toString(a,"ascii").split("\r\n");if(s.length<2)return o;for(let t=0;t<s.length-2;t++){const n=s[t],r=n.indexOf(":");if(-1===r)throw new Error(`Message header must separate key and value using ':'\n${n}`);const i=n.substr(0,r),a=n.substr(r+1).trim();o.set(e?i.toLowerCase():i,a)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(0===e)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const t=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(t)}if(this._chunks[0].byteLength>e){const t=this._chunks[0],n=this.asNative(t,e);return this._chunks[0]=t.slice(e),this._totalLength-=e,n}const t=this.allocNative(e);let n=0;for(;e>0;){const r=this._chunks[0];if(r.byteLength>e){const i=r.slice(0,e);t.set(i,n),n+=e,this._chunks[0]=r.slice(e),this._totalLength-=e,e-=e}else t.set(r,n),n+=r.byteLength,this._chunks.shift(),this._totalLength-=r.byteLength,e-=r.byteLength}return t}}},9085:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=void 0;const s=o(n(9590)),c=a(n(8585)),l=n(2676),u=n(4323);var h,d;!function(e){e.is=function(e){const t=e;return t&&c.func(t.listen)&&c.func(t.dispose)&&c.func(t.onError)&&c.func(t.onClose)&&c.func(t.onPartialMessage)}}(h||(t.MessageReader=h={}));class f{errorEmitter;closeEmitter;partialMessageEmitter;constructor(){this.errorEmitter=new l.Emitter,this.closeEmitter=new l.Emitter,this.partialMessageEmitter=new l.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${c.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=f,function(e){e.fromOptions=function(e){let t,n;const r=new Map;let i;const a=new Map;if(void 0===e||"string"==typeof e)t=e??"utf-8";else{if(t=e.charset??"utf-8",void 0!==e.contentDecoder&&(n=e.contentDecoder,r.set(n.name,n)),void 0!==e.contentDecoders)for(const t of e.contentDecoders)r.set(t.name,t);if(void 0!==e.contentTypeDecoder&&(i=e.contentTypeDecoder,a.set(i.name,i)),void 0!==e.contentTypeDecoders)for(const t of e.contentTypeDecoders)a.set(t.name,t)}return void 0===i&&(i=(0,s.default)().applicationJson.decoder,a.set(i.name,i)),{charset:t,contentDecoder:n,contentDecoders:r,contentTypeDecoder:i,contentTypeDecoders:a}}}(d||(d={})),t.ReadableStreamMessageReader=class extends f{readable;options;callback;nextMessageLength;messageToken;buffer;partialMessageTimer;_partialMessageTimeout;readSemaphore;constructor(e,t){super(),this.readable=e,this.options=d.fromOptions(t),this.buffer=(0,s.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new u.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;const t=this.readable.onData((e=>{this.onData(e)}));return this.readable.onError((e=>this.fireError(e))),this.readable.onClose((()=>this.fireClose())),t}onData(e){try{for(this.buffer.append(e);;){if(-1===this.nextMessageLength){const e=this.buffer.tryReadHeaders(!0);if(!e)return;const t=e.get("content-length");if(!t)return void this.fireError(new Error(`Header must provide a Content-Length property.\n${JSON.stringify(Object.fromEntries(e))}`));const n=parseInt(t);if(isNaN(n))return void this.fireError(new Error(`Content-Length value must be a number. Got ${t}`));this.nextMessageLength=n}const e=this.buffer.tryReadBody(this.nextMessageLength);if(void 0===e)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock((async()=>{const t=void 0!==this.options.contentDecoder?await this.options.contentDecoder.decode(e):e,n=await this.options.contentTypeDecoder.decode(t,this.options);this.callback(n)})).catch((e=>{this.fireError(e)}))}}catch(e){this.fireError(e)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=(0,s.default)().timer.setTimeout(((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())}),this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}},3193:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=void 0;const s=o(n(9590)),c=a(n(8585)),l=n(4323),u=n(2676);var h,d;!function(e){e.is=function(e){const t=e;return t&&c.func(t.dispose)&&c.func(t.onClose)&&c.func(t.onError)&&c.func(t.write)}}(h||(t.MessageWriter=h={}));class f{errorEmitter;closeEmitter;constructor(){this.errorEmitter=new u.Emitter,this.closeEmitter=new u.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${c.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=f,function(e){e.fromOptions=function(e){return void 0===e||"string"==typeof e?{charset:e??"utf-8",contentTypeEncoder:(0,s.default)().applicationJson.encoder}:{charset:e.charset??"utf-8",contentEncoder:e.contentEncoder,contentTypeEncoder:e.contentTypeEncoder??(0,s.default)().applicationJson.encoder}}}(d||(d={})),t.WriteableStreamMessageWriter=class extends f{writable;options;errorCount;writeSemaphore;constructor(e,t){super(),this.writable=e,this.options=d.fromOptions(t),this.errorCount=0,this.writeSemaphore=new l.Semaphore(1),this.writable.onError((e=>this.fireError(e))),this.writable.onClose((()=>this.fireClose()))}async write(e){return this.writeSemaphore.lock((async()=>this.options.contentTypeEncoder.encode(e,this.options).then((e=>void 0!==this.options.contentEncoder?this.options.contentEncoder.encode(e):e)).then((t=>{const n=[];return n.push("Content-Length: ",t.byteLength.toString(),"\r\n"),n.push("\r\n"),this.doWrite(e,n,t)}),(e=>{throw this.fireError(e),e}))))}async doWrite(e,t,n){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(n)}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}}},6177:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Message=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType=t.RequestType0=t.AbstractMessageSignature=t.ParameterStructures=t.ResponseError=t.ErrorCodes=void 0;const o=a(n(8585));var s,c;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3}(s||(t.ErrorCodes=s={}));class l extends Error{code;data;constructor(e,t,n){super(t),this.code=o.number(e)?e:s.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,l.prototype)}toJson(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),e}}t.ResponseError=l;class u{kind;static auto=new u("auto");static byPosition=new u("byPosition");static byName=new u("byName");constructor(e){this.kind=e}static is(e){return e===u.auto||e===u.byName||e===u.byPosition}toString(){return this.kind}}t.ParameterStructures=u;class h{method;numberOfParams;constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return u.auto}}t.AbstractMessageSignature=h,t.RequestType0=class extends h{_;constructor(e){super(e,0)}},t.RequestType=class extends h{_parameterStructures;_;constructor(e,t=u.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType1=class extends h{_parameterStructures;_;constructor(e,t=u.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType2=class extends h{_;constructor(e){super(e,2)}},t.RequestType3=class extends h{_;constructor(e){super(e,3)}},t.RequestType4=class extends h{_;constructor(e){super(e,4)}},t.RequestType5=class extends h{_;constructor(e){super(e,5)}},t.RequestType6=class extends h{_;constructor(e){super(e,6)}},t.RequestType7=class extends h{_;constructor(e){super(e,7)}},t.RequestType8=class extends h{_;constructor(e){super(e,8)}},t.RequestType9=class extends h{_;constructor(e){super(e,9)}},t.NotificationType=class extends h{_parameterStructures;_;constructor(e,t=u.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType0=class extends h{_;constructor(e){super(e,0)}},t.NotificationType1=class extends h{_parameterStructures;_;constructor(e,t=u.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType2=class extends h{_;constructor(e){super(e,2)}},t.NotificationType3=class extends h{_;constructor(e){super(e,3)}},t.NotificationType4=class extends h{_;constructor(e){super(e,4)}},t.NotificationType5=class extends h{_;constructor(e){super(e,5)}},t.NotificationType6=class extends h{_;constructor(e){super(e,6)}},t.NotificationType7=class extends h{_;constructor(e){super(e,7)}},t.NotificationType8=class extends h{_;constructor(e){super(e,8)}},t.NotificationType9=class extends h{_;constructor(e){super(e,9)}},function(e){e.isRequest=function(e){const t=e;return t&&o.string(t.method)&&(o.string(t.id)||o.number(t.id))},e.isNotification=function(e){const t=e;return t&&o.string(t.method)&&void 0===e.id},e.isResponse=function(e){const t=e;return t&&(void 0!==t.result||!!t.error)&&(o.string(t.id)||o.number(t.id)||null===t.id)}}(c||(t.Message=c={}))},9590:(e,t)=>{"use strict";let n;function r(){if(void 0===n)throw new Error("No runtime abstraction layer installed");return n}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");n=e}}(r||(r={})),t.default=r},4323:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Semaphore=void 0;const i=r(n(9590));t.Semaphore=class{_capacity;_active;_waiting;constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise(((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()}))}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&(0,i.default)().timer.setImmediate((()=>this.doRunNext()))}doRunNext(){if(0===this._waiting.length||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then((t=>{this._active--,e.resolve(t),this.runNext()}),(t=>{this._active--,e.reject(t),this.runNext()})):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}}},4996:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharedArrayReceiverStrategy=t.SharedArraySenderStrategy=void 0;const r=n(9850);var i;!function(e){e.Continue=0,e.Cancelled=1}(i||(i={})),t.SharedArraySenderStrategy=class{buffers;constructor(){this.buffers=new Map}enableCancellation(e){if(null===e.id)return;const t=new SharedArrayBuffer(4);new Int32Array(t,0,1)[0]=i.Continue,this.buffers.set(e.id,t),e.$cancellationData=t}async sendCancellation(e,t){const n=this.buffers.get(t);if(void 0===n)return;const r=new Int32Array(n,0,1);Atomics.store(r,0,i.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};class a{data;constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===i.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}}class o{token;constructor(e){this.token=new a(e)}cancel(){}dispose(){}}t.SharedArrayReceiverStrategy=class{kind="request";createCancellationTokenSource(e){const t=e.$cancellationData;return void 0===t?new r.CancellationTokenSource:new o(t)}}},7123:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.createServerSocketTransport=t.createClientSocketTransport=t.createServerPipeTransport=t.createClientPipeTransport=t.generateRandomPipeName=t.StreamMessageWriter=t.StreamMessageReader=t.SocketMessageWriter=t.SocketMessageReader=t.PortMessageWriter=t.PortMessageReader=t.IPCMessageWriter=t.IPCMessageReader=void 0;const c=s(n(9571));c.default.install();const l=a(n(6928)),u=a(n(857)),h=a(n(9896)),d=n(6982),f=n(9278),p=n(3281);o(n(3281),t);class v extends p.AbstractMessageReader{process;constructor(e){super(),this.process=e;const t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose()))}listen(e){return this.process.on("message",e),p.Disposable.create((()=>this.process.off("message",e)))}}t.IPCMessageReader=v;class m extends p.AbstractMessageWriter{process;errorCount;constructor(e){super(),this.process=e,this.errorCount=0;const t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose))}write(e){try{return"function"==typeof this.process.send&&this.process.send(e,void 0,void 0,(t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0})),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}}t.IPCMessageWriter=m;class g extends p.AbstractMessageReader{onData;constructor(e){super(),this.onData=new p.Emitter,e.on("close",(()=>this.fireClose)),e.on("error",(e=>this.fireError(e))),e.on("message",(e=>{this.onData.fire(e)}))}listen(e){return this.onData.event(e)}}t.PortMessageReader=g;class y extends p.AbstractMessageWriter{port;errorCount;constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",(()=>this.fireClose())),e.on("error",(e=>this.fireError(e)))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}}t.PortMessageWriter=y;class E extends p.ReadableStreamMessageReader{constructor(e,t="utf-8"){super((0,c.default)().stream.asReadableStream(e),t)}}t.SocketMessageReader=E;class w extends p.WriteableStreamMessageWriter{socket;constructor(e,t){super((0,c.default)().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}}t.SocketMessageWriter=w;class P extends p.ReadableStreamMessageReader{constructor(e,t){super((0,c.default)().stream.asReadableStream(e),t)}}t.StreamMessageReader=P;class _ extends p.WriteableStreamMessageWriter{constructor(e,t){super((0,c.default)().stream.asWritableStream(e),t)}}t.StreamMessageWriter=_;const b=process.env.XDG_RUNTIME_DIR,S=new Map([["linux",107],["darwin",103]]);t.generateRandomPipeName=function(){if("win32"===process.platform)return`\\\\.\\pipe\\lsp-${(0,d.randomBytes)(16).toString("hex")}-sock`;let e=32;const t=h.realpathSync(b??u.tmpdir()),n=S.get(process.platform);if(void 0!==n&&(e=Math.min(n-t.length-9,e)),e<16)throw new Error(`Unable to generate a random pipe name with ${e} characters.`);const r=(0,d.randomBytes)(Math.floor(e/2)).toString("hex");return l.join(t,`lsp-${r}.sock`)},t.createClientPipeTransport=function(e,t="utf-8"){let n;const r=new Promise(((e,t)=>{n=e}));return new Promise(((i,a)=>{const o=(0,f.createServer)((e=>{o.close(),n([new E(e,t),new w(e,t)])}));o.on("error",a),o.listen(e,(()=>{o.removeListener("error",a),i({onConnected:()=>r})}))}))},t.createServerPipeTransport=function(e,t="utf-8"){const n=(0,f.createConnection)(e);return[new E(n,t),new w(n,t)]},t.createClientSocketTransport=function(e,t="utf-8"){let n;const r=new Promise(((e,t)=>{n=e}));return new Promise(((i,a)=>{const o=(0,f.createServer)((e=>{o.close(),n([new E(e,t),new w(e,t)])}));o.on("error",a),o.listen(e,"127.0.0.1",(()=>{o.removeListener("error",a),i({onConnected:()=>r})}))}))},t.createServerSocketTransport=function(e,t="utf-8"){const n=(0,f.createConnection)(e,"127.0.0.1");return[new E(n,t),new w(n,t)]},t.createMessageConnection=function(e,t,n,r){n||(n=p.NullLogger);const i=function(e){const t=e;return void 0!==t.read&&void 0!==t.addListener}(e)?new P(e):e,a=function(e){const t=e;return void 0!==t.write&&void 0!==t.addListener}(t)?new _(t):t;return p.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,p.createMessageConnection)(i,a,n,r)}},9571:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9023),i=n(3281);class a extends i.AbstractMessageBuffer{static emptyBuffer=Buffer.allocUnsafe(0);constructor(e="utf-8"){super(e)}emptyBuffer(){return a.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){return e instanceof Buffer?e.toString(t):new r.TextDecoder(t).decode(e)}asNative(e,t){return void 0===t?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}}class o{stream;constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),i.Disposable.create((()=>this.stream.off("close",e)))}onError(e){return this.stream.on("error",e),i.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){return this.stream.on("end",e),i.Disposable.create((()=>this.stream.off("end",e)))}onData(e){return this.stream.on("data",e),i.Disposable.create((()=>this.stream.off("data",e)))}}class s{stream;constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),i.Disposable.create((()=>this.stream.off("close",e)))}onError(e){return this.stream.on("error",e),i.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){return this.stream.on("end",e),i.Disposable.create((()=>this.stream.off("end",e)))}write(e,t){return new Promise(((n,r)=>{const i=e=>{null==e?n():r(e)};"string"==typeof e?this.stream.write(e,t,i):this.stream.write(e,i)}))}end(){this.stream.end()}}const c=Object.freeze({messageBuffer:Object.freeze({create:e=>new a(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(e){return Promise.reject(e)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new r.TextDecoder(t.charset).decode(e)))}catch(e){return Promise.reject(e)}}})}),stream:Object.freeze({asReadableStream:e=>new o(e),asWritableStream:e=>new s(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){const r=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(e,...t){const n=setImmediate(e,...t);return{dispose:()=>clearImmediate(n)}},setInterval(e,t,...n){const r=setInterval(e,t,...n);return{dispose:()=>clearInterval(r)}}})});function l(){return c}!function(e){e.install=function(){i.RAL.install(c)}}(l||(l={})),t.default=l},7242:(e,t,n)=>{const{isexe:r,sync:i}=n(6262),{join:a,delimiter:o,sep:s,posix:c}=n(6928),l="win32"===process.platform,u=new RegExp(`[${c.sep}${s===c.sep?"":s}]`.replace(/(\\)/g,"\\$1")),h=new RegExp(`^\\.${u.source}`),d=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),f=(e,{path:t=process.env.PATH,pathExt:n=process.env.PATHEXT,delimiter:r=o})=>{const i=e.match(u)?[""]:[...l?[process.cwd()]:[],...(t||"").split(r)];if(l){const t=n||[".EXE",".CMD",".BAT",".COM"].join(r),a=t.split(r).flatMap((e=>[e,e.toLowerCase()]));return e.includes(".")&&""!==a[0]&&a.unshift(""),{pathEnv:i,pathExt:a,pathExtExe:t}}return{pathEnv:i,pathExt:[""]}},p=(e,t)=>{const n=/^".*"$/.test(e)?e.slice(1,-1):e;return(!n&&h.test(t)?t.slice(0,2):"")+a(n,t)},v=async(e,t={})=>{const{pathEnv:n,pathExt:i,pathExtExe:a}=f(e,t),o=[];for(const s of n){const n=p(s,e);for(const e of i){const i=n+e;if(await r(i,{pathExt:a,ignoreErrors:!0})){if(!t.all)return i;o.push(i)}}}if(t.all&&o.length)return o;if(t.nothrow)return null;throw d(e)};e.exports=v,v.sync=(e,t={})=>{const{pathEnv:n,pathExt:r,pathExtExe:a}=f(e,t),o=[];for(const s of n){const n=p(s,e);for(const e of r){const r=n+e;if(i(r,{pathExt:a,ignoreErrors:!0})){if(!t.all)return r;o.push(r)}}}if(t.all&&o.length)return o;if(t.nothrow)return null;throw d(e)}},1398:e=>{"use strict";e.exports=require("vscode")},2613:e=>{"use strict";e.exports=require("assert")},5317:e=>{"use strict";e.exports=require("child_process")},9140:e=>{"use strict";e.exports=require("constants")},6982:e=>{"use strict";e.exports=require("crypto")},9896:e=>{"use strict";e.exports=require("fs")},1943:e=>{"use strict";e.exports=require("fs/promises")},5692:e=>{"use strict";e.exports=require("https")},9278:e=>{"use strict";e.exports=require("net")},857:e=>{"use strict";e.exports=require("os")},6928:e=>{"use strict";e.exports=require("path")},2203:e=>{"use strict";e.exports=require("stream")},9023:e=>{"use strict";e.exports=require("util")},8253:e=>{"use strict";e.exports=require("util/types")},6262:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.sync=t.isexe=t.posix=t.win32=void 0;const s=a(n(1481));t.posix=s;const c=a(n(3381));t.win32=c,o(n(136),t);const l="win32"===(process.env._ISEXE_TEST_PLATFORM_||process.platform)?c:s;t.isexe=l.isexe,t.sync=l.sync},136:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1481:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sync=t.isexe=void 0;const r=n(9896),i=n(1943);t.isexe=async(e,t={})=>{const{ignoreErrors:n=!1}=t;try{return a(await(0,i.stat)(e),t)}catch(e){const t=e;if(n||"EACCES"===t.code)return!1;throw t}},t.sync=(e,t={})=>{const{ignoreErrors:n=!1}=t;try{return a((0,r.statSync)(e),t)}catch(e){const t=e;if(n||"EACCES"===t.code)return!1;throw t}};const a=(e,t)=>e.isFile()&&o(e,t),o=(e,t)=>{const n=t.uid??process.getuid?.(),r=t.groups??process.getgroups?.()??[],i=t.gid??process.getgid?.()??r[0];if(void 0===n||void 0===i)throw new Error("cannot get uid or gid");const a=new Set([i,...r]),o=e.mode,s=e.uid,c=e.gid,l=parseInt("100",8),u=parseInt("010",8),h=l|u;return!!(o&parseInt("001",8)||o&u&&a.has(c)||o&l&&s===n||o&h&&0===n)}},3381:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sync=t.isexe=void 0;const r=n(9896),i=n(1943);t.isexe=async(e,t={})=>{const{ignoreErrors:n=!1}=t;try{return a(await(0,i.stat)(e),e,t)}catch(e){const t=e;if(n||"EACCES"===t.code)return!1;throw t}},t.sync=(e,t={})=>{const{ignoreErrors:n=!1}=t;try{return a((0,r.statSync)(e),e,t)}catch(e){const t=e;if(n||"EACCES"===t.code)return!1;throw t}};const a=(e,t,n)=>e.isFile()&&((e,t)=>{const{pathExt:n=process.env.PATHEXT||""}=t,r=n.split(";");if(-1!==r.indexOf(""))return!0;for(let t=0;t<r.length;t++){const n=r[t].toLowerCase(),i=e.substring(e.length-n.length).toLowerCase();if(n&&i===n)return!0}return!1})(t,n)},56:e=>{"use strict";e.exports=JSON.parse('{"name":"dotenv","version":"16.4.5","description":"Loads environment variables from .env file","main":"lib/main.js","types":"lib/main.d.ts","exports":{".":{"types":"./lib/main.d.ts","require":"./lib/main.js","default":"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},"scripts":{"dts-check":"tsc --project tests/types/tsconfig.json","lint":"standard","lint-readme":"standard-markdown","pretest":"npm run lint && npm run dts-check","test":"tap tests/*.js --100 -Rspec","test:coverage":"tap --coverage-report=lcov","prerelease":"npm test","release":"standard-version"},"repository":{"type":"git","url":"git://github.com/motdotla/dotenv.git"},"funding":"https://dotenvx.com","keywords":["dotenv","env",".env","environment","variables","config","settings"],"readmeFilename":"README.md","license":"BSD-2-Clause","devDependencies":{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3","decache":"^4.6.1","sinon":"^14.0.1","standard":"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0","tap":"^16.3.0","tar":"^6.1.11","typescript":"^4.8.4"},"engines":{"node":">=12"},"browser":{"fs":false}}')},8330:e=>{"use strict";e.exports=JSON.parse('{"name":"vscode-python-envs","displayName":"Python Environments","description":"Provides a unified python environment experience","version":"1.12.0","publisher":"ms-python","preview":true,"engines":{"vscode":"^1.104.0-20250815"},"categories":["Other"],"enabledApiProposals":["terminalShellEnv","terminalDataWriteEvent"],"capabilities":{"untrustedWorkspaces":{"supported":false,"description":"This extension doesn\'t support untrusted workspaces."},"virtualWorkspaces":{"supported":false,"description":"This extension doesn\'t support virtual workspaces."}},"activationEvents":["onLanguage:python"],"homepage":"https://github.com/microsoft/vscode-python-environments","repository":{"type":"git","url":"https://github.com/microsoft/vscode-python-environments.git"},"bugs":{"url":"https://github.com/microsoft/vscode-python-environments/issues"},"main":"./dist/extension.js","l10n":"./l10n","icon":"icon.png","contributes":{"configuration":{"properties":{"python-envs.defaultEnvManager":{"type":"string","description":"%python-envs.defaultEnvManager.description%","default":"ms-python.python:venv","scope":"window"},"python-envs.defaultPackageManager":{"type":"string","description":"%python-envs.defaultPackageManager.description%","default":"ms-python.python:pip","scope":"window"},"python-envs.pythonProjects":{"type":"array","default":[],"description":"%python-envs.pythonProjects.description%","scope":"resource","items":{"type":"object","properties":{"path":{"type":"string","description":"%python-envs.pythonProjects.path.description%"},"envManager":{"type":"string","description":"%python-envs.pythonProjects.envManager.description%","default":"ms-python.python:venv"},"packageManager":{"type":"string","description":"%python-envs.pythonProjects.packageManager.description%","default":"ms-python.python:pip"}}}},"python-envs.terminal.showActivateButton":{"type":"boolean","description":"%python-envs.terminal.showActivateButton.description%","default":false,"scope":"machine","tags":["onExP","preview"]},"python-envs.terminal.autoActivationType":{"type":"string","markdownDescription":"%python-envs.terminal.autoActivationType.description%","default":"command","enum":["command","shellStartup","off"],"markdownEnumDescriptions":["%python-envs.terminal.autoActivationType.command%","%python-envs.terminal.autoActivationType.shellStartup%","%python-envs.terminal.autoActivationType.off%"],"scope":"machine"},"python.terminal.useEnvFile":{"type":"boolean","description":"%python-envs.terminal.useEnvFile.description%","default":false,"scope":"resource"},"python-env.globalSearchPaths":{"type":"array","description":"%python-env.globalSearchPaths.description%","default":[],"scope":"machine","items":{"type":"string"}},"python-env.workspaceSearchPaths":{"type":"array","description":"%python-env.workspaceSearchPaths.description%","default":[],"scope":"resource","items":{"type":"string"}},"python-envs.alwaysUseUv":{"type":"boolean","description":"%python-envs.alwaysUseUv.description%","default":true,"scope":"machine"}}},"commands":[{"command":"python-envs.setEnvManager","title":"%python-envs.setEnvManager.title%","category":"Python","icon":"$(gear)","when":"config.python.useEnvironmentsExtension != false"},{"command":"python-envs.setPkgManager","title":"%python-envs.setPkgManager.title%","category":"Python","icon":"$(package)"},{"command":"python-envs.addPythonProject","title":"%python-envs.addPythonProject.title%","category":"Python","icon":"$(new-folder)"},{"command":"python-envs.addPythonProjectGivenResource","title":"%python-envs.addPythonProjectGivenResource.title%","category":"Python","icon":"$(new-folder)"},{"command":"python-envs.removePythonProject","title":"%python-envs.removePythonProject.title%","category":"Python","icon":"$(remove)"},{"command":"python-envs.create","title":"%python-envs.create.title%","category":"Python","icon":"$(add)"},{"command":"python-envs.createAny","title":"%python-envs.createAny.title%","category":"Python","icon":"$(add)"},{"command":"python-envs.set","title":"%python-envs.set.title%","category":"Python","icon":"$(check)"},{"command":"python-envs.setEnv","title":"%python-envs.setEnv.title%","category":"Python","icon":"$(check)"},{"command":"python-envs.remove","title":"%python-envs.remove.title%","category":"Python","icon":"$(remove)"},{"command":"python-envs.refreshAllManagers","title":"%python-envs.refreshAllManagers.title%","shortTitle":"Refresh All","category":"Python","icon":"$(refresh)"},{"command":"python-envs.refreshPackages","title":"%python-envs.refreshPackages.title%","category":"Python","icon":"$(refresh)"},{"command":"python-envs.packages","title":"%python-envs.packages.title%","category":"Python","icon":"$(package)"},{"command":"python-envs.clearCache","title":"%python-envs.clearCache.title%","category":"Python","icon":"$(trash)"},{"command":"python-envs.runInTerminal","title":"%python-envs.runInTerminal.title%","category":"Python Envs","icon":"$(play)"},{"command":"python-envs.createTerminal","title":"%python-envs.createTerminal.title%","category":"Python Envs","icon":"$(terminal)"},{"command":"python-envs.createNewProjectFromTemplate","title":"%python-envs.createNewProjectFromTemplate.title%","category":"Python Envs","icon":"$(play)"},{"command":"python-envs.runAsTask","title":"%python-envs.runAsTask.title%","category":"Python Envs","icon":"$(play)"},{"command":"python-envs.terminal.activate","title":"%python-envs.terminal.activate.title%","category":"Python Envs","icon":"$(python)"},{"command":"python-envs.terminal.deactivate","title":"%python-envs.terminal.deactivate.title%","category":"Python Envs","icon":"$(circle-slash)"},{"command":"python-envs.uninstallPackage","title":"%python-envs.uninstallPackage.title%","category":"Python Envs","icon":"$(trash)"},{"command":"python-envs.copyEnvPath","title":"%python-envs.copyEnvPath.title%","category":"Python Envs","icon":"$(copy)"},{"command":"python-envs.copyProjectPath","title":"%python-envs.copyProjectPath.title%","category":"Python Envs","icon":"$(copy)"},{"command":"python-envs.terminal.revertStartupScriptChanges","title":"%python-envs.terminal.revertStartupScriptChanges.title%","category":"Python Envs","icon":"$(discard)"},{"command":"python-envs.reportIssue","title":"%python-envs.reportIssue.title%","category":"Python Environments"},{"command":"python-envs.revealProjectInExplorer","title":"%python-envs.revealProjectInExplorer.title%","category":"Python Envs","icon":"$(folder-opened)"},{"command":"python-envs.runPetInTerminal","title":"%python-envs.runPetInTerminal.title%","category":"Python","icon":"$(terminal)","when":"config.python.useEnvironmentsExtension != false"}],"menus":{"commandPalette":[{"command":"python-envs.refreshAllManagers","when":"false"},{"command":"python-envs.refreshPackages","when":"false"},{"command":"python-envs.create","when":"false"},{"command":"python-envs.setEnv","when":"false"},{"command":"python-envs.remove","when":"false"},{"command":"python-envs.addPythonProject","when":"false"},{"command":"python-envs.addPythonProjectGivenResource","when":"false"},{"command":"python-envs.setEnvManager","when":"config.python.useEnvironmentsExtension != false"},{"command":"python-envs.packages","when":"config.python.useEnvironmentsExtension != false"},{"command":"python-envs.set","when":"config.python.useEnvironmentsExtension != false"},{"command":"python-envs.setPkgManager","when":"config.python.useEnvironmentsExtension != false"},{"command":"python-envs.removePythonProject","when":"false"},{"command":"python-envs.createTerminal","when":"false"},{"command":"python-envs.runInTerminal","when":"false"},{"command":"python-envs.runAsTask","when":"config.python.useEnvironmentsExtension != false"},{"command":"python-envs.terminal.activate","when":"pythonTerminalActivation"},{"command":"python-envs.terminal.deactivate","when":"pythonTerminalActivation"},{"command":"python-envs.uninstallPackage","when":"false"},{"command":"python-envs.copyEnvPath","when":"false"},{"command":"python-envs.copyProjectPath","when":"false"},{"command":"python-envs.createAny","when":"false"},{"command":"python-envs.revealProjectInExplorer","when":"false"},{"command":"python-envs.createNewProjectFromTemplate","when":"config.python.useEnvironmentsExtension != false"},{"command":"python-envs.terminal.revertStartupScriptChanges","when":"config.python.useEnvironmentsExtension != false"},{"command":"python-envs.reportIssue","when":"config.python.useEnvironmentsExtension != false"}],"view/item/context":[{"command":"python-envs.create","group":"inline","when":"view == env-managers && viewItem =~ /.*pythonEnvManager.*;create;.*/"},{"command":"python-envs.remove","when":"view == env-managers && viewItem =~ /.*pythonEnvironment.*;remove;.*/"},{"command":"python-envs.setEnv","group":"inline","when":"view == env-managers && viewItem =~ /.*pythonEnvironment.*/"},{"command":"python-envs.createTerminal","group":"inline","when":"view == env-managers && viewItem =~ /.*pythonEnvironment.*;activatable;.*/"},{"command":"python-envs.refreshPackages","when":"view == env-managers && viewItem =~ /.*pythonEnvironment.*/"},{"command":"python-envs.packages","group":"inline","when":"view == env-managers && viewItem =~ /.*pythonEnvironment.*/"},{"command":"python-envs.copyEnvPath","group":"inline","when":"view == env-managers && viewItem =~ /.*pythonEnvironment.*/"},{"command":"python-envs.uninstallPackage","group":"inline","when":"view == env-managers && viewItem == python-package"},{"command":"python-envs.copyEnvPath","group":"inline","when":"view == python-projects && viewItem == python-env"},{"command":"python-envs.remove","when":"view == python-projects && viewItem == python-env"},{"command":"python-envs.removePythonProject","when":"view == python-projects && viewItem == python-workspace-removable"},{"command":"python-envs.set","group":"inline","when":"view == python-projects && viewItem =~ /.*python-workspace.*/"},{"command":"python-envs.createTerminal","group":"inline","when":"view == python-projects && viewItem =~ /.*python-workspace.*/"},{"command":"python-envs.copyProjectPath","group":"inline","when":"view == python-projects && viewItem =~ /.*python-workspace.*/"},{"command":"python-envs.revealProjectInExplorer","when":"view == python-projects && viewItem =~ /.*python-workspace.*/"},{"command":"python-envs.uninstallPackage","group":"inline","when":"view == python-projects && viewItem == python-package"}],"view/title":[{"command":"python-envs.addPythonProject","group":"navigation","when":"view == python-projects"},{"command":"python-envs.createAny","group":"navigation","when":"view == env-managers"},{"command":"python-envs.refreshAllManagers","group":"navigation","when":"view == env-managers"},{"command":"python-envs.terminal.activate","group":"navigation","when":"view == terminal && config.python-envs.terminal.showActivateButton && pythonTerminalActivation && !pythonTerminalActivated"},{"command":"python-envs.terminal.deactivate","group":"navigation","when":"view == terminal && config.python-envs.terminal.showActivateButton && pythonTerminalActivation && pythonTerminalActivated"}],"explorer/context":[{"command":"python-envs.addPythonProjectGivenResource","group":"inline","when":"explorerViewletVisible && explorerResourceIsFolder"},{"command":"python-envs.addPythonProjectGivenResource","group":"inline","when":"explorerViewletVisible && resourceExtname == .py"}],"editor/title":[{"command":"python-envs.terminal.activate","group":"navigation","when":"resourceScheme == vscode-terminal && config.python-envs.terminal.showActivateButton && pythonTerminalActivation && !pythonTerminalActivated"},{"command":"python-envs.terminal.deactivate","group":"navigation","when":"resourceScheme == vscode-terminal && config.python-envs.terminal.showActivateButton && pythonTerminalActivation && pythonTerminalActivated"}],"editor/title/run":[{"command":"python-envs.runAsTask","group":"Python","when":"editorLangId == python"}],"terminal/title/context":[{"command":"python-envs.terminal.activate","when":"pythonTerminalActivation && !pythonTerminalActivated"},{"command":"python-envs.terminal.deactivate","when":"pythonTerminalActivation && pythonTerminalActivated"}]},"viewsContainers":{"activitybar":[{"id":"python","title":"Python","icon":"files/logo.svg","when":"config.python.useEnvironmentsExtension != false"}]},"views":{"python":[{"id":"python-projects","name":"Python Projects","icon":"files/logo.svg","contextualTitle":"Python Projects","when":"config.python.useEnvironmentsExtension != false"},{"id":"env-managers","name":"Environment Managers","icon":"files/logo.svg","contextualTitle":"Environment Managers","when":"config.python.useEnvironmentsExtension != false"}]},"taskDefinitions":[{"type":"python"}]},"scripts":{"vscode:prepublish":"npm run package","compile":"webpack","watch":"webpack --watch","package":"webpack --mode production --devtool source-map --config ./webpack.config.js","compile-tests":"tsc -p . --outDir out","watch-tests":"tsc -p . -w --outDir out","pretest":"npm run compile-tests && npm run compile","lint":"eslint --config=eslint.config.mjs src","unittest":"mocha --config=./build/.mocha.unittests.json","vsce-package":"vsce package -o ms-python-envs-insiders.vsix"},"devDependencies":{"@types/fs-extra":"^11.0.4","@types/glob":"^8.1.0","@types/mocha":"^10.0.1","@types/node":"20.2.5","@types/sinon":"^17.0.3","@types/stack-trace":"0.0.29","@types/vscode":"^1.99.0","@types/which":"^3.0.4","@typescript-eslint/eslint-plugin":"^8.16.0","@typescript-eslint/parser":"^8.16.0","@vscode/test-electron":"^2.3.2","@vscode/vsce":"^2.24.0","eslint":"^9.15.0","glob":"^8.1.0","mocha":"^10.8.2","sinon":"^19.0.2","ts-loader":"^9.4.3","ts-mockito":"^2.6.1","typemoq":"^2.1.0","typescript":"^5.1.3","webpack":"^5.85.0","webpack-cli":"^5.1.1"},"dependencies":{"@iarna/toml":"^2.2.5","@vscode/extension-telemetry":"^0.9.7","@vscode/test-cli":"^0.0.10","dotenv":"^16.4.5","fs-extra":"^11.2.0","stack-trace":"0.0.10","vscode-jsonrpc":"^9.0.0-next.5","which":"^4.0.0"},"enableTelemetry":true}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.disposeAll=e.activate=void 0;const t=__webpack_require__(1398),n=__webpack_require__(8330),r=__webpack_require__(5203),i=__webpack_require__(853),a=__webpack_require__(578),o=__webpack_require__(5946),s=__webpack_require__(9787),c=__webpack_require__(781),l=__webpack_require__(605),u=__webpack_require__(3343),h=__webpack_require__(4047),d=__webpack_require__(675),f=__webpack_require__(7422),p=__webpack_require__(2790),v=__webpack_require__(5398),m=__webpack_require__(4067),g=__webpack_require__(1233),y=__webpack_require__(6634),E=__webpack_require__(2822),w=__webpack_require__(6267),P=__webpack_require__(5233),_=__webpack_require__(4209),b=__webpack_require__(5612),S=__webpack_require__(8940),C=__webpack_require__(4883),T=__webpack_require__(8929),I=__webpack_require__(4774),k=__webpack_require__(6153),M=__webpack_require__(2328),O=__webpack_require__(2278),N=__webpack_require__(2870),A=__webpack_require__(5499),x=__webpack_require__(7416),D=__webpack_require__(534),j=__webpack_require__(801),R=__webpack_require__(6191),F=__webpack_require__(1998),L=__webpack_require__(9256),V=__webpack_require__(3080),$=__webpack_require__(1673),H=__webpack_require__(6756),W=__webpack_require__(9547),B=__webpack_require__(2490),U=__webpack_require__(104),K=__webpack_require__(9825),Y=__webpack_require__(9546),q=__webpack_require__(8043);async function z(e){await Promise.all(e.map((async e=>{try{return Promise.resolve(e.dispose())}catch(e){}return Promise.resolve()})))}async function G(e){await z(e.subscriptions),e.subscriptions.length=0,(0,i.traceInfo)("Python Environments extension deactivated.")}e.activate=async function(e){const z=(0,f.getConfiguration)("python").get("useEnvironmentsExtension",!0);if((0,i.traceInfo)(`Experiment Status: useEnvironmentsExtension setting set to ${z}`),!z)return(0,i.traceWarn)('The Python environments extension has been disabled via a setting. If you would like to opt into using the extension, please add the following to your user settings (note that updating this setting requires a window reload afterwards):\n\n"python.useEnvironmentsExtension": true'),void await G(e);const X=new s.StopWatch,Q=(0,d.createLogOutputChannel)("Python Environments");e.subscriptions.push(Q,(0,i.registerLogger)(Q)),(0,r.ensureCorrectVersion)(),(0,i.traceVerbose)(`Python-envs extension version: ${n.version}`);const J=(0,$.getEnvManagerAndPackageManagerConfigLevels)();(0,i.traceInfo)(`\n=== ${J.section} ===`),(0,i.traceInfo)(JSON.stringify(J,null,2)),(0,a.setPersistentState)(e);const Z=new F.PythonStatusBarImpl;e.subscriptions.push(Z);const ee=new b.PythonProjectManagerImpl;e.subscriptions.push(ee);const te=new _.PythonEnvVariableManager(ee);e.subscriptions.push(te);const ne=new P.PythonEnvironmentManagers(ee);(0,p.createManagerReady)(ne,ee,e.subscriptions),e.subscriptions.push(ne);const re=new N.TerminalActivationImpl,ie=(0,k.createShellEnvProviders)(),ae=(0,k.createShellStartupProviders)(),oe=new x.TerminalManagerImpl(re,ie,ae);e.subscriptions.push(re,oe);const se=new E.ProjectCreatorsImpl;e.subscriptions.push(se,se.registerPythonProjectCreator(new m.ExistingProjects(ee)),se.registerPythonProjectCreator(new v.AutoFindProjects(ee)),se.registerPythonProjectCreator(new g.NewPackageProject(ne,ee)),se.registerPythonProjectCreator(new y.NewScriptProject(ee))),(0,S.setPythonApi)(ne,ee,se,oe,te);const ce=await(0,S.getPythonApi)(),le=(0,h.createDeferred)(),ue=new j.EnvManagerView(ne);e.subscriptions.push(ue);const he=new R.ProjectView(ne,ee);e.subscriptions.push(he),he.initialize();const de=new Map,fe=new M.ShellStartupActivationVariablesManagerImpl(e.environmentVariableCollection,ie,ce),pe=new A.TerminalEnvVarInjector(e.environmentVariableCollection,te);return e.subscriptions.push(pe),e.subscriptions.push(fe,(0,C.registerCompletionProvider)(ne),t.commands.registerCommand("python-envs.terminal.revertStartupScriptChanges",(async()=>{await(0,O.cleanupStartupScripts)(ae)})),t.commands.registerCommand("python-envs.viewLogs",(()=>Q.show())),t.commands.registerCommand("python-envs.refreshAllManagers",(async()=>{await Promise.all(ne.managers.map((e=>e.refresh(void 0))))})),t.commands.registerCommand("python-envs.refreshPackages",(async e=>{await(0,w.refreshPackagesCommand)(e,ne)})),t.commands.registerCommand("python-envs.create",(async e=>{let t="unknown";return e&&e.manager&&e.manager.id&&(t=e.manager.id),(0,u.sendTelemetryEvent)(c.EventNames.CREATE_ENVIRONMENT,void 0,{manager:t,triggeredLocation:"createSpecifiedCommand"}),await(0,w.createEnvironmentCommand)(e,ne,ee)})),t.commands.registerCommand("python-envs.createAny",(async e=>((0,u.sendTelemetryEvent)(c.EventNames.CREATE_ENVIRONMENT,void 0,{manager:"none",triggeredLocation:"createAnyCommand"}),await(0,w.createAnyEnvironmentCommand)(ne,ee,e??{selectEnvironment:!0})))),t.commands.registerCommand("python-envs.remove",(async e=>{await(0,w.removeEnvironmentCommand)(e,ne)})),t.commands.registerCommand("python-envs.packages",(async e=>{const{environment:t,packageManager:n}=await(0,w.getPackageCommandOptions)(e,ne,ee);try{n.manage(t,{install:[]})}catch(e){(0,i.traceError)("Error when running command python-envs.packages",e)}})),t.commands.registerCommand("python-envs.uninstallPackage",(async e=>{await(0,w.handlePackageUninstall)(e,ne)})),t.commands.registerCommand("python-envs.set",(async e=>{await(0,w.setEnvironmentCommand)(e,ne,ee)})),t.commands.registerCommand("python-envs.setEnv",(async e=>{await(0,w.setEnvironmentCommand)(e,ne,ee)})),t.commands.registerCommand("python-envs.setEnvManager",(async()=>{await(0,w.setEnvManagerCommand)(ne,ee)})),t.commands.registerCommand("python-envs.setPkgManager",(async()=>{await(0,w.setPackageManagerCommand)(ne,ee)})),t.commands.registerCommand("python-envs.addPythonProject",(async()=>{await(0,w.addPythonProjectCommand)(void 0,ee,ne,se);const e=ee.getProjects().length+1;(0,u.sendTelemetryEvent)(c.EventNames.ADD_PROJECT,void 0,{template:"none",quickCreate:!1,totalProjectCount:e,triggeredLocation:"add"})})),t.commands.registerCommand("python-envs.addPythonProjectGivenResource",(async e=>{await(0,w.addPythonProjectCommand)(e,ee,ne,se);const t=ee.getProjects().length+1;(0,u.sendTelemetryEvent)(c.EventNames.ADD_PROJECT,void 0,{template:"none",quickCreate:!1,totalProjectCount:t,triggeredLocation:"addGivenResource"})})),t.commands.registerCommand("python-envs.removePythonProject",(async e=>{if(e instanceof V.ProjectItem){const t=e.project.uri,n=ne.getEnvironmentManager(t);n?n.set(t,void 0):(0,i.traceError)(`No environment manager found for ${t.fsPath}`)}await(0,w.removePythonProject)(e,ee)})),t.commands.registerCommand("python-envs.clearCache",(async()=>{await(0,a.clearPersistentState)(),await ne.clearCache(void 0),await(0,k.clearShellProfileCache)(ae)})),t.commands.registerCommand("python-envs.runInTerminal",(e=>(0,w.runInTerminalCommand)(e,ce,oe))),t.commands.registerCommand("python-envs.runInDedicatedTerminal",(e=>(0,w.runInDedicatedTerminalCommand)(e,ce,oe))),t.commands.registerCommand("python-envs.runAsTask",(e=>(0,w.runAsTaskCommand)(e,ce))),t.commands.registerCommand("python-envs.createTerminal",(e=>(0,w.createTerminalCommand)(e,ce,oe))),t.commands.registerCommand("python-envs.copyEnvPath",(async e=>{await(0,w.copyPathToClipboard)(e)})),t.commands.registerCommand("python-envs.copyProjectPath",(async e=>{await(0,w.copyPathToClipboard)(e)})),t.commands.registerCommand("python-envs.revealProjectInExplorer",(async e=>{await(0,w.revealProjectInExplorer)(e)})),t.commands.registerCommand("python-envs.terminal.activate",(async()=>{const e=(0,d.activeTerminal)();if(e){const t=await(0,D.getEnvironmentForTerminal)(ce,e);t&&await oe.activate(e,t)}})),t.commands.registerCommand("python-envs.terminal.deactivate",(async()=>{const e=(0,d.activeTerminal)();e&&await oe.deactivate(e)})),t.commands.registerCommand("python-envs.createNewProjectFromTemplate",(async(e,n,r,i)=>{let a=e||"unknown",s=ee.getProjects().length+1;if(n){if(!e||!r||!i)throw new Error("Project type, name, and path are required for quick create.");const n=se.getProjectCreators();let a;if("python-package"===e&&(a=n.find((e=>"newPackage"===e.name))),"python-script"===e&&(a=n.find((e=>"newScript"===e.name))),!a)throw new Error(`Project creator for type "${e}" not found.`);await a.create({quickCreate:!0,name:r,rootUri:t.Uri.file(i)})}else{const e=await(0,o.newProjectSelection)(se.getProjectCreators());e&&(a=e.name||"unknown",await e.create())}(0,u.sendTelemetryEvent)(c.EventNames.ADD_PROJECT,void 0,{template:a,quickCreate:n,totalProjectCount:s,triggeredLocation:"templateCreate"})})),t.commands.registerCommand("python-envs.reportIssue",(async()=>{try{const n=await(0,$.collectEnvironmentInfo)(e,ne,ee);await t.commands.executeCommand("workbench.action.openIssueReporter",{extensionId:"ms-python.vscode-python-envs",issueTitle:"[Python Environments] ",issueBody:`\x3c!-- Please describe the issue you're experiencing --\x3e\n\n\x3c!-- The following information was automatically generated --\x3e\n\n<details>\n<summary>Environment Information</summary>\n\n\`\`\`\n${n}\n\`\`\`\n\n</details>`})}catch(e){t.window.showErrorMessage(`Failed to open issue reporter: ${e}`)}})),t.commands.registerCommand("python-envs.runPetInTerminal",(async()=>{try{await(0,$.runPetInTerminalImpl)()}catch(e){(0,i.traceError)("Error running PET in terminal",e),t.window.showErrorMessage(`Failed to run Python Environment Tool: ${e}`)}})),re.onDidChangeTerminalActivationState((async e=>{await(0,T.setActivateMenuButtonContext)(e.terminal,e.environment,e.activated)})),(0,d.onDidChangeActiveTerminal)((async e=>{if(e){const t=re.getEnvironment(e)??await(0,D.getEnvironmentForTerminal)(ce,e);t&&await(0,T.setActivateMenuButtonContext)(e,t,re.isActivated(e))}})),t.window.onDidChangeActiveTextEditor((async()=>{(0,L.updateViewsAndStatus)(Z,he,ue,ce)})),ne.onDidChangeEnvironment((async()=>{(0,L.updateViewsAndStatus)(Z,he,ue,ce)})),ne.onDidChangeEnvironments((async()=>{(0,L.updateViewsAndStatus)(Z,he,ue,ce)})),ne.onDidChangeEnvironmentFiltered((async e=>{ue.environmentChanged(e);const t=e.uri?.fsPath??"global";(0,i.traceInfo)(`Internal: Changed environment from ${e.old?.displayName} to ${e.new?.displayName} for: ${t}`),(0,L.updateViewsAndStatus)(Z,he,ue,ce)})),(0,d.onDidChangeTerminalShellIntegration)((async e=>{const n=e.shellIntegration?.env;if(!n)return;const r=n.value;if(r)if(r.VIRTUAL_ENV){const n=(0,I.normalizeShellPath)(r.VIRTUAL_ENV,e.terminal.state.shell),i=await ce.resolveEnvironment(t.Uri.file(n));i&&(de.set(e.terminal,i),re.updateActivationState(e.terminal,i,!0))}else if(de.has(e.terminal)){const t=de.get(e.terminal);t&&re.updateActivationState(e.terminal,t,!1)}}))),setImmediate((async()=>{const t=await(0,B.createNativePythonFinder)(Q,ce,e);e.subscriptions.push(t);const n=new W.SysPythonManager(t,ce,Q);le.resolve(n),await Promise.all([(0,H.registerSystemPythonFeatures)(t,e.subscriptions,Q,n),(0,U.registerCondaFeatures)(t,e.subscriptions,Q,ee),(0,q.registerPyenvFeatures)(t,e.subscriptions,ee),(0,K.registerPipenvFeatures)(t,e.subscriptions,ee),(0,Y.registerPoetryFeatures)(t,e.subscriptions,Q,ee),fe.initialize()]),await(0,$.resolveDefaultInterpreter)(t,ne,ce),(0,u.sendTelemetryEvent)(c.EventNames.EXTENSION_MANAGER_REGISTRATION_DURATION,X.elapsedTime),await oe.initialize(ce),(0,l.sendManagerSelectionTelemetry)(ee)})),(0,u.sendTelemetryEvent)(c.EventNames.EXTENSION_ACTIVATION_DURATION,X.elapsedTime),ce},e.disposeAll=z,e.deactivate=G})(),module.exports=__webpack_exports__})();
//# sourceMappingURL=extension.js.map