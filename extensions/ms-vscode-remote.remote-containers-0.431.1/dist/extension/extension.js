/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var M9=Object.create;var IC=Object.defineProperty;var $9=Object.getOwnPropertyDescriptor;var H9=Object.getOwnPropertyNames;var B9=Object.getPrototypeOf,W9=Object.prototype.hasOwnProperty;var ne=(t,e)=>()=>(t&&(e=t(t=0)),e);var M=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),PC=(t,e)=>{for(var n in e)IC(t,n,{get:e[n],enumerable:!0})},jO=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of H9(e))!W9.call(t,o)&&o!==n&&IC(t,o,{get:()=>e[o],enumerable:!(r=$9(e,o))||r.enumerable});return t};var Y=(t,e,n)=>(n=t!=null?M9(B9(t)):{},jO(e||!t||!t.__esModule?IC(n,"default",{value:t,enumerable:!0}):n,t)),j9=t=>jO(IC({},"__esModule",{value:!0}),t);var Mr=M((Ive,GO)=>{"use strict";var H0=Object.defineProperty,V9=Object.getOwnPropertyDescriptor,Y9=Object.getOwnPropertyNames,q9=Object.prototype.hasOwnProperty,G9=(t,e)=>{for(var n in e)H0(t,n,{get:e[n],enumerable:!0})},z9=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Y9(e))!q9.call(t,o)&&o!==n&&H0(t,o,{get:()=>e[o],enumerable:!(r=V9(e,o))||r.enumerable});return t},K9=t=>z9(H0({},"__esModule",{value:!0}),t),YO={};G9(YO,{config:()=>e7,t:()=>qO});GO.exports=K9(YO);var J9=require("fs"),X9=require("fs/promises");async function Z9(t){if(t.protocol==="file:")return await(0,X9.readFile)(t,"utf8");if(t.protocol==="http:"||t.protocol==="https:"){let e=await fetch(t.toString(),{headers:{"Accept-Encoding":"gzip, deflate",Accept:"application/json"},redirect:"follow"});if(!e.ok){let r=`Unexpected ${e.status} response while trying to read ${t}`;try{r+=`: ${await e.text()}`}catch{}throw new Error(r)}return await e.text()}throw new Error("Unsupported protocol")}function Q9(t){return(0,J9.readFileSync)(t,"utf8")}var sf;function e7(t){if("contents"in t){typeof t.contents=="string"?sf=JSON.parse(t.contents):sf=t.contents;return}if("fsPath"in t){let e=Q9(t.fsPath),n=JSON.parse(e);sf=VO(n)?n.contents.bundle:n;return}if(t.uri){let e=t.uri;return typeof t.uri=="string"&&(e=new URL(t.uri)),new Promise((n,r)=>{Z9(e).then(o=>{try{let i=JSON.parse(o);sf=VO(i)?i.contents.bundle:i,n()}catch(i){r(i)}}).catch(o=>{r(o)})})}}function qO(...t){let e=t[0],n,r,o;if(typeof e=="string")n=e,r=e,t.splice(0,1),o=!t||typeof t[0]!="object"?t:t[0];else if(e instanceof Array){let s=t.slice(1);if(e.length!==s.length+1)throw new Error("expected a string as the first argument to l10n.t");let a=e[0];for(let c=1;c<e.length;c++)a+=`{${c-1}}`+e[c];return qO(a,...s)}else r=e.message,n=r,e.comment&&e.comment.length>0&&(n+=`/${Array.isArray(e.comment)?e.comment.join(""):e.comment}`),o=e.args??{};let i=sf==null?void 0:sf[n];return i?typeof i=="string"?bC(i,o):i.comment?bC(i.message,o):bC(r,o):bC(r,o)}var t7=/{([^}]+)}/g;function bC(t,e){return Object.keys(e).length===0?t:t.replace(t7,(n,r)=>e[r]??n)}function VO(t){var e;return typeof((e=t==null?void 0:t.contents)==null?void 0:e.bundle)=="object"&&typeof(t==null?void 0:t.version)=="string"}});var g1=M((Jve,h1)=>{var Pm=1e3,bm=Pm*60,Tm=bm*60,ff=Tm*24,y7=ff*7,C7=ff*365.25;h1.exports=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return E7(t);if(n==="number"&&isFinite(t))return e.long?x7(t):S7(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function E7(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*C7;case"weeks":case"week":case"w":return n*y7;case"days":case"day":case"d":return n*ff;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Tm;case"minutes":case"minute":case"mins":case"min":case"m":return n*bm;case"seconds":case"second":case"secs":case"sec":case"s":return n*Pm;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function S7(t){var e=Math.abs(t);return e>=ff?Math.round(t/ff)+"d":e>=Tm?Math.round(t/Tm)+"h":e>=bm?Math.round(t/bm)+"m":e>=Pm?Math.round(t/Pm)+"s":t+"ms"}function x7(t){var e=Math.abs(t);return e>=ff?UC(t,e,ff,"day"):e>=Tm?UC(t,e,Tm,"hour"):e>=bm?UC(t,e,bm,"minute"):e>=Pm?UC(t,e,Pm,"second"):t+" ms"}function UC(t,e,n,r){var o=e>=n*1.5;return Math.round(t/n)+" "+r+(o?"s":"")}});var X0=M((Xve,v1)=>{function _7(t){n.debug=n,n.default=n,n.coerce=c,n.disable=s,n.enable=o,n.enabled=a,n.humanize=g1(),n.destroy=l,Object.keys(t).forEach(u=>{n[u]=t[u]}),n.names=[],n.skips=[],n.formatters={};function e(u){let f=0;for(let m=0;m<u.length;m++)f=(f<<5)-f+u.charCodeAt(m),f|=0;return n.colors[Math.abs(f)%n.colors.length]}n.selectColor=e;function n(u){let f,m=null,d,p;function g(...h){if(!g.enabled)return;let v=g,C=Number(new Date),w=C-(f||C);v.diff=w,v.prev=f,v.curr=C,f=C,h[0]=n.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");let y=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,(D,_)=>{if(D==="%%")return"%";y++;let A=n.formatters[_];if(typeof A=="function"){let U=h[y];D=A.call(v,U),h.splice(y,1),y--}return D}),n.formatArgs.call(v,h),(v.log||n.log).apply(v,h)}return g.namespace=u,g.useColors=n.useColors(),g.color=n.selectColor(u),g.extend=r,g.destroy=n.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(d!==n.namespaces&&(d=n.namespaces,p=n.enabled(u)),p),set:h=>{m=h}}),typeof n.init=="function"&&n.init(g),g}function r(u,f){let m=n(this.namespace+(typeof f>"u"?":":f)+u);return m.log=this.log,m}function o(u){n.save(u),n.namespaces=u,n.names=[],n.skips=[];let f=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let m of f)m[0]==="-"?n.skips.push(m.slice(1)):n.names.push(m)}function i(u,f){let m=0,d=0,p=-1,g=0;for(;m<u.length;)if(d<f.length&&(f[d]===u[m]||f[d]==="*"))f[d]==="*"?(p=d,g=m,d++):(m++,d++);else if(p!==-1)d=p+1,g++,m=g;else return!1;for(;d<f.length&&f[d]==="*";)d++;return d===f.length}function s(){let u=[...n.names,...n.skips.map(f=>"-"+f)].join(",");return n.enable(""),u}function a(u){for(let f of n.skips)if(i(u,f))return!1;for(let f of n.names)if(i(u,f))return!0;return!1}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}v1.exports=_7});var w1=M((Po,MC)=>{Po.formatArgs=I7;Po.save=P7;Po.load=b7;Po.useColors=D7;Po.storage=T7();Po.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Po.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function D7(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function I7(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+MC.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(n++,o==="%c"&&(r=n))}),t.splice(r,0,e)}Po.log=console.debug||console.log||(()=>{});function P7(t){try{t?Po.storage.setItem("debug",t):Po.storage.removeItem("debug")}catch{}}function b7(){let t;try{t=Po.storage.getItem("debug")||Po.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function T7(){try{return localStorage}catch{}}MC.exports=X0()(Po);var{formatters:R7}=MC.exports;R7.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var C1=M((Zve,y1)=>{"use strict";y1.exports=(t,e)=>{e=e||process.argv;let n=t.startsWith("-")?"":t.length===1?"-":"--",r=e.indexOf(n+t),o=e.indexOf("--");return r!==-1&&(o===-1?!0:r<o)}});var S1=M((Qve,E1)=>{"use strict";var k7=require("os"),is=C1(),$r=process.env,Rm;is("no-color")||is("no-colors")||is("color=false")?Rm=!1:(is("color")||is("colors")||is("color=true")||is("color=always"))&&(Rm=!0);"FORCE_COLOR"in $r&&(Rm=$r.FORCE_COLOR.length===0||parseInt($r.FORCE_COLOR,10)!==0);function N7(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function L7(t){if(Rm===!1)return 0;if(is("color=16m")||is("color=full")||is("color=truecolor"))return 3;if(is("color=256"))return 2;if(t&&!t.isTTY&&Rm!==!0)return 0;let e=Rm?1:0;if(process.platform==="win32"){let n=k7.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in $r)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(n=>n in $r)||$r.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in $r)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test($r.TEAMCITY_VERSION)?1:0;if($r.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in $r){let n=parseInt(($r.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch($r.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test($r.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test($r.TERM)||"COLORTERM"in $r?1:($r.TERM==="dumb",e)}function Z0(t){let e=L7(t);return N7(e)}E1.exports={supportsColor:Z0,stdout:Z0(process.stdout),stderr:Z0(process.stderr)}});var _1=M((rr,HC)=>{var A7=require("tty"),$C=require("util");rr.init=B7;rr.log=M7;rr.formatArgs=O7;rr.save=$7;rr.load=H7;rr.useColors=F7;rr.destroy=$C.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");rr.colors=[6,2,3,4,5,1];try{let t=S1();t&&(t.stderr||t).level>=2&&(rr.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}rr.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(o,i)=>i.toUpperCase()),r=process.env[e];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),t[n]=r,t},{});function F7(){return"colors"in rr.inspectOpts?!!rr.inspectOpts.colors:A7.isatty(process.stderr.fd)}function O7(t){let{namespace:e,useColors:n}=this;if(n){let r=this.color,o="\x1B[3"+(r<8?r:"8;5;"+r),i=`  ${o};1m${e} \x1B[0m`;t[0]=i+t[0].split(`
`).join(`
`+i),t.push(o+"m+"+HC.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=U7()+e+" "+t[0]}function U7(){return rr.inspectOpts.hideDate?"":new Date().toISOString()+" "}function M7(...t){return process.stderr.write($C.formatWithOptions(rr.inspectOpts,...t)+`
`)}function $7(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function H7(){return process.env.DEBUG}function B7(t){t.inspectOpts={};let e=Object.keys(rr.inspectOpts);for(let n=0;n<e.length;n++)t.inspectOpts[e[n]]=rr.inspectOpts[e[n]]}HC.exports=X0()(rr);var{formatters:x1}=HC.exports;x1.o=function(t){return this.inspectOpts.colors=this.useColors,$C.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};x1.O=function(t){return this.inspectOpts.colors=this.useColors,$C.inspect(t,this.inspectOpts)}});var BC=M((ewe,Q0)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Q0.exports=w1():Q0.exports=_1()});var I1=M((twe,D1)=>{var Fg;D1.exports=function(){if(!Fg){try{Fg=BC()("follow-redirects")}catch{}typeof Fg!="function"&&(Fg=function(){})}Fg.apply(null,arguments)}});var WC=M((nwe,fP)=>{var Ug=require("url"),Og=Ug.URL,W7=require("http"),j7=require("https"),oP=require("stream").Writable,iP=require("assert"),P1=I1();(function(){var e=typeof process<"u",n=typeof window<"u"&&typeof document<"u",r=mf(Error.captureStackTrace);!e&&(n||!r)&&console.warn("The follow-redirects package should be excluded from browser builds.")})();var sP=!1;try{iP(new Og(""))}catch(t){sP=t.code==="ERR_INVALID_URL"}var V7=["auth","host","hostname","href","path","pathname","port","protocol","query","search","hash"],aP=["abort","aborted","connect","error","socket","timeout"],cP=Object.create(null);aP.forEach(function(t){cP[t]=function(e,n,r){this._redirectable.emit(t,e,n,r)}});var tP=Mg("ERR_INVALID_URL","Invalid URL",TypeError),nP=Mg("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),Y7=Mg("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",nP),q7=Mg("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),G7=Mg("ERR_STREAM_WRITE_AFTER_END","write after end"),z7=oP.prototype.destroy||T1;function bo(t,e){oP.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var n=this;this._onNativeResponse=function(r){try{n._processResponse(r)}catch(o){n.emit("error",o instanceof nP?o:new nP({cause:o}))}},this._performRequest()}bo.prototype=Object.create(oP.prototype);bo.prototype.abort=function(){uP(this._currentRequest),this._currentRequest.abort(),this.emit("abort")};bo.prototype.destroy=function(t){return uP(this._currentRequest,t),z7.call(this,t),this};bo.prototype.write=function(t,e,n){if(this._ending)throw new G7;if(!df(t)&&!X7(t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(mf(e)&&(n=e,e=null),t.length===0){n&&n();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,n)):(this.emit("error",new q7),this.abort())};bo.prototype.end=function(t,e,n){if(mf(t)?(n=t,t=e=null):mf(e)&&(n=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,n);else{var r=this,o=this._currentRequest;this.write(t,e,function(){r._ended=!0,o.end(null,null,n)}),this._ending=!0}};bo.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};bo.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};bo.prototype.setTimeout=function(t,e){var n=this;function r(s){s.setTimeout(t),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function o(s){n._timeout&&clearTimeout(n._timeout),n._timeout=setTimeout(function(){n.emit("timeout"),i()},t),r(s)}function i(){n._timeout&&(clearTimeout(n._timeout),n._timeout=null),n.removeListener("abort",i),n.removeListener("error",i),n.removeListener("response",i),n.removeListener("close",i),e&&n.removeListener("timeout",e),n.socket||n._currentRequest.removeListener("socket",o)}return e&&this.on("timeout",e),this.socket?o(this.socket):this._currentRequest.once("socket",o),this.on("socket",r),this.on("abort",i),this.on("error",i),this.on("response",i),this.on("close",i),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){bo.prototype[t]=function(e,n){return this._currentRequest[t](e,n)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(bo.prototype,t,{get:function(){return this._currentRequest[t]}})});bo.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};bo.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e)throw new TypeError("Unsupported protocol "+t);if(this._options.agents){var n=t.slice(0,-1);this._options.agent=this._options.agents[n]}var r=this._currentRequest=e.request(this._options,this._onNativeResponse);r._redirectable=this;for(var o of aP)r.on(o,cP[o]);if(this._currentUrl=/^\//.test(this._options.path)?Ug.format(this._options):this._options.path,this._isRedirect){var i=0,s=this,a=this._requestBodyBuffers;(function c(l){if(r===s._currentRequest)if(l)s.emit("error",l);else if(i<a.length){var u=a[i++];r.finished||r.write(u.data,u.encoding,c)}else s._ended&&r.end()})()}};bo.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var n=t.headers.location;if(!n||this._options.followRedirects===!1||e<300||e>=400){t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[];return}if(uP(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects)throw new Y7;var r,o=this._options.beforeRedirect;o&&(r=Object.assign({Host:t.req.getHeader("host")},this._options.headers));var i=this._options.method;((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],eP(/^content-/i,this._options.headers));var s=eP(/^host$/i,this._options.headers),a=lP(this._currentUrl),c=s||a.host,l=/^\w+:/.test(n)?this._currentUrl:Ug.format(Object.assign(a,{host:c})),u=K7(n,l);if(P1("redirecting to",u.href),this._isRedirect=!0,rP(u,this._options),(u.protocol!==a.protocol&&u.protocol!=="https:"||u.host!==c&&!J7(u.host,c))&&eP(/^(?:(?:proxy-)?authorization|cookie)$/i,this._options.headers),mf(o)){var f={headers:t.headers,statusCode:e},m={url:l,method:i,headers:r};o(this._options,f,m),this._sanitizeOptions(this._options)}this._performRequest()};function b1(t){var e={maxRedirects:21,maxBodyLength:10485760},n={};return Object.keys(t).forEach(function(r){var o=r+":",i=n[o]=t[r],s=e[r]=Object.create(i);function a(l,u,f){return Z7(l)?l=rP(l):df(l)?l=rP(lP(l)):(f=u,u=R1(l),l={protocol:o}),mf(u)&&(f=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},l,u),u.nativeProtocols=n,!df(u.host)&&!df(u.hostname)&&(u.hostname="::1"),iP.equal(u.protocol,o,"protocol mismatch"),P1("options",u),new bo(u,f)}function c(l,u,f){var m=s.request(l,u,f);return m.end(),m}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function T1(){}function lP(t){var e;if(sP)e=new Og(t);else if(e=R1(Ug.parse(t)),!df(e.protocol))throw new tP({input:t});return e}function K7(t,e){return sP?new Og(t,e):lP(Ug.resolve(e,t))}function R1(t){if(/^\[/.test(t.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(t.hostname))throw new tP({input:t.href||t});if(/^\[/.test(t.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(t.host))throw new tP({input:t.href||t});return t}function rP(t,e){var n=e||{};for(var r of V7)n[r]=t[r];return n.hostname.startsWith("[")&&(n.hostname=n.hostname.slice(1,-1)),n.port!==""&&(n.port=Number(n.port)),n.path=n.search?n.pathname+n.search:n.pathname,n}function eP(t,e){var n;for(var r in e)t.test(r)&&(n=e[r],delete e[r]);return n===null||typeof n>"u"?void 0:String(n).trim()}function Mg(t,e,n){function r(o){mf(Error.captureStackTrace)&&Error.captureStackTrace(this,this.constructor),Object.assign(this,o||{}),this.code=t,this.message=this.cause?e+": "+this.cause.message:e}return r.prototype=new(n||Error),Object.defineProperties(r.prototype,{constructor:{value:r,enumerable:!1},name:{value:"Error ["+t+"]",enumerable:!1}}),r}function uP(t,e){for(var n of aP)t.removeListener(n,cP[n]);t.on("error",T1),t.destroy(e)}function J7(t,e){iP(df(t)&&df(e));var n=t.length-e.length-1;return n>0&&t[n]==="."&&t.endsWith(e)}function df(t){return typeof t=="string"||t instanceof String}function mf(t){return typeof t=="function"}function X7(t){return typeof t=="object"&&"length"in t}function Z7(t){return Og&&t instanceof Og}fP.exports=b1({http:W7,https:j7});fP.exports.wrap=b1});var km=M((rwe,N1)=>{"use strict";var k1=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);N1.exports=t=>t?Object.keys(t).map(e=>[k1.has(e)?k1.get(e):e,t[e]]).reduce((e,n)=>(e[n[0]]=n[1],e),Object.create(null)):{}});var KC=M(W1=>{"use strict";var L1=typeof process=="object"&&process?process:{stdout:null,stderr:null},Q7=require("events"),A1=require("stream"),eJ=require("string_decoder"),F1=eJ.StringDecoder,Ga=Symbol("EOF"),za=Symbol("maybeEmitEnd"),ll=Symbol("emittedEnd"),jC=Symbol("emittingEnd"),$g=Symbol("emittedError"),VC=Symbol("closed"),O1=Symbol("read"),YC=Symbol("flush"),U1=Symbol("flushChunk"),To=Symbol("encoding"),Ka=Symbol("decoder"),qC=Symbol("flowing"),Hg=Symbol("paused"),Nm=Symbol("resume"),Cn=Symbol("buffer"),Ys=Symbol("pipes"),or=Symbol("bufferLength"),dP=Symbol("bufferPush"),mP=Symbol("bufferShift"),Er=Symbol("objectMode"),En=Symbol("destroyed"),pP=Symbol("error"),hP=Symbol("emitData"),M1=Symbol("emitEnd"),gP=Symbol("emitEnd2"),Ja=Symbol("async"),vP=Symbol("abort"),GC=Symbol("aborted"),pf=Symbol("signal"),Bg=t=>Promise.resolve().then(t),B1=global._MP_NO_ITERATOR_SYMBOLS_!=="1",$1=B1&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),H1=B1&&Symbol.iterator||Symbol("iterator not implemented"),tJ=t=>t==="end"||t==="finish"||t==="prefinish",nJ=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,rJ=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),zC=class{constructor(e,n,r){this.src=e,this.dest=n,this.opts=r,this.ondrain=()=>e[Nm](),n.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},wP=class extends zC{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,n,r){super(e,n,r),this.proxyErrors=o=>n.emit("error",o),e.on("error",this.proxyErrors)}},yP=class t extends A1{constructor(e){super(),this[qC]=!1,this[Hg]=!1,this[Ys]=[],this[Cn]=[],this[Er]=e&&e.objectMode||!1,this[Er]?this[To]=null:this[To]=e&&e.encoding||null,this[To]==="buffer"&&(this[To]=null),this[Ja]=e&&!!e.async||!1,this[Ka]=this[To]?new F1(this[To]):null,this[Ga]=!1,this[ll]=!1,this[jC]=!1,this[VC]=!1,this[$g]=null,this.writable=!0,this.readable=!0,this[or]=0,this[En]=!1,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Cn]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[Ys]}),this[pf]=e&&e.signal,this[GC]=!1,this[pf]&&(this[pf].addEventListener("abort",()=>this[vP]()),this[pf].aborted&&this[vP]())}get bufferLength(){return this[or]}get encoding(){return this[To]}set encoding(e){if(this[Er])throw new Error("cannot set encoding in objectMode");if(this[To]&&e!==this[To]&&(this[Ka]&&this[Ka].lastNeed||this[or]))throw new Error("cannot change encoding");this[To]!==e&&(this[Ka]=e?new F1(e):null,this[Cn].length&&(this[Cn]=this[Cn].map(n=>this[Ka].write(n)))),this[To]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Er]}set objectMode(e){this[Er]=this[Er]||!!e}get async(){return this[Ja]}set async(e){this[Ja]=this[Ja]||!!e}[vP](){this[GC]=!0,this.emit("abort",this[pf].reason),this.destroy(this[pf].reason)}get aborted(){return this[GC]}set aborted(e){}write(e,n,r){if(this[GC])return!1;if(this[Ga])throw new Error("write after end");if(this[En])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let o=this[Ja]?Bg:i=>i();return!this[Er]&&!Buffer.isBuffer(e)&&(rJ(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):nJ(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Er]?(this.flowing&&this[or]!==0&&this[YC](!0),this.flowing?this.emit("data",e):this[dP](e),this[or]!==0&&this.emit("readable"),r&&o(r),this.flowing):e.length?(typeof e=="string"&&!(n===this[To]&&!this[Ka].lastNeed)&&(e=Buffer.from(e,n)),Buffer.isBuffer(e)&&this[To]&&(e=this[Ka].write(e)),this.flowing&&this[or]!==0&&this[YC](!0),this.flowing?this.emit("data",e):this[dP](e),this[or]!==0&&this.emit("readable"),r&&o(r),this.flowing):(this[or]!==0&&this.emit("readable"),r&&o(r),this.flowing)}read(e){if(this[En])return null;if(this[or]===0||e===0||e>this[or])return this[za](),null;this[Er]&&(e=null),this[Cn].length>1&&!this[Er]&&(this.encoding?this[Cn]=[this[Cn].join("")]:this[Cn]=[Buffer.concat(this[Cn],this[or])]);let n=this[O1](e||null,this[Cn][0]);return this[za](),n}[O1](e,n){return e===n.length||e===null?this[mP]():(this[Cn][0]=n.slice(e),n=n.slice(0,e),this[or]-=e),this.emit("data",n),!this[Cn].length&&!this[Ga]&&this.emit("drain"),n}end(e,n,r){return typeof e=="function"&&(r=e,e=null),typeof n=="function"&&(r=n,n="utf8"),e&&this.write(e,n),r&&this.once("end",r),this[Ga]=!0,this.writable=!1,(this.flowing||!this[Hg])&&this[za](),this}[Nm](){this[En]||(this[Hg]=!1,this[qC]=!0,this.emit("resume"),this[Cn].length?this[YC]():this[Ga]?this[za]():this.emit("drain"))}resume(){return this[Nm]()}pause(){this[qC]=!1,this[Hg]=!0}get destroyed(){return this[En]}get flowing(){return this[qC]}get paused(){return this[Hg]}[dP](e){this[Er]?this[or]+=1:this[or]+=e.length,this[Cn].push(e)}[mP](){return this[Er]?this[or]-=1:this[or]-=this[Cn][0].length,this[Cn].shift()}[YC](e){do;while(this[U1](this[mP]())&&this[Cn].length);!e&&!this[Cn].length&&!this[Ga]&&this.emit("drain")}[U1](e){return this.emit("data",e),this.flowing}pipe(e,n){if(this[En])return;let r=this[ll];return n=n||{},e===L1.stdout||e===L1.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&e.end():(this[Ys].push(n.proxyErrors?new wP(this,e,n):new zC(this,e,n)),this[Ja]?Bg(()=>this[Nm]()):this[Nm]()),e}unpipe(e){let n=this[Ys].find(r=>r.dest===e);n&&(this[Ys].splice(this[Ys].indexOf(n),1),n.unpipe())}addListener(e,n){return this.on(e,n)}on(e,n){let r=super.on(e,n);return e==="data"&&!this[Ys].length&&!this.flowing?this[Nm]():e==="readable"&&this[or]!==0?super.emit("readable"):tJ(e)&&this[ll]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[$g]&&(this[Ja]?Bg(()=>n.call(this,this[$g])):n.call(this,this[$g])),r}get emittedEnd(){return this[ll]}[za](){!this[jC]&&!this[ll]&&!this[En]&&this[Cn].length===0&&this[Ga]&&(this[jC]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[VC]&&this.emit("close"),this[jC]=!1)}emit(e,n,...r){if(e!=="error"&&e!=="close"&&e!==En&&this[En])return;if(e==="data")return!this[Er]&&!n?!1:this[Ja]?Bg(()=>this[hP](n)):this[hP](n);if(e==="end")return this[M1]();if(e==="close"){if(this[VC]=!0,!this[ll]&&!this[En])return;let i=super.emit("close");return this.removeAllListeners("close"),i}else if(e==="error"){this[$g]=n,super.emit(pP,n);let i=!this[pf]||this.listeners("error").length?super.emit("error",n):!1;return this[za](),i}else if(e==="resume"){let i=super.emit("resume");return this[za](),i}else if(e==="finish"||e==="prefinish"){let i=super.emit(e);return this.removeAllListeners(e),i}let o=super.emit(e,n,...r);return this[za](),o}[hP](e){for(let r of this[Ys])r.dest.write(e)===!1&&this.pause();let n=super.emit("data",e);return this[za](),n}[M1](){this[ll]||(this[ll]=!0,this.readable=!1,this[Ja]?Bg(()=>this[gP]()):this[gP]())}[gP](){if(this[Ka]){let n=this[Ka].end();if(n){for(let r of this[Ys])r.dest.write(n);super.emit("data",n)}}for(let n of this[Ys])n.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Er]||(e.dataLength=0);let n=this.promise();return this.on("data",r=>{e.push(r),this[Er]||(e.dataLength+=r.length)}),n.then(()=>e)}concat(){return this[Er]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Er]?Promise.reject(new Error("cannot concat in objectMode")):this[To]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,n)=>{this.on(En,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>e())})}[$1](){let e=!1,n=()=>(this.pause(),e=!0,Promise.resolve({done:!0}));return{next:()=>{if(e)return n();let o=this.read();if(o!==null)return Promise.resolve({done:!1,value:o});if(this[Ga])return n();let i=null,s=null,a=f=>{this.removeListener("data",c),this.removeListener("end",l),this.removeListener(En,u),n(),s(f)},c=f=>{this.removeListener("error",a),this.removeListener("end",l),this.removeListener(En,u),this.pause(),i({value:f,done:!!this[Ga]})},l=()=>{this.removeListener("error",a),this.removeListener("data",c),this.removeListener(En,u),n(),i({done:!0})},u=()=>a(new Error("stream destroyed"));return new Promise((f,m)=>{s=m,i=f,this.once(En,u),this.once("error",a),this.once("end",l),this.once("data",c)})},throw:n,return:n,[$1](){return this}}}[H1](){let e=!1,n=()=>(this.pause(),this.removeListener(pP,n),this.removeListener(En,n),this.removeListener("end",n),e=!0,{done:!0}),r=()=>{if(e)return n();let o=this.read();return o===null?n():{value:o}};return this.once("end",n),this.once(pP,n),this.once(En,n),{next:r,throw:n,return:n,[H1](){return this}}}destroy(e){return this[En]?(e?this.emit("error",e):this.emit(En),this):(this[En]=!0,this[Cn].length=0,this[or]=0,typeof this.close=="function"&&!this[VC]&&this.close(),e?this.emit("error",e):this.emit(En),this)}static isStream(e){return!!e&&(e instanceof t||e instanceof A1||e instanceof Q7&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}};W1.Minipass=yP});var V1=M((iwe,j1)=>{var oJ=require("zlib").constants||{ZLIB_VERNUM:4736};j1.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},oJ))});var eU=M((swe,Q1)=>{"use strict";var Y1=typeof process=="object"&&process?process:{stdout:null,stderr:null},iJ=require("events"),q1=require("stream"),G1=require("string_decoder").StringDecoder,Xa=Symbol("EOF"),Za=Symbol("maybeEmitEnd"),ul=Symbol("emittedEnd"),JC=Symbol("emittingEnd"),Wg=Symbol("emittedError"),XC=Symbol("closed"),z1=Symbol("read"),ZC=Symbol("flush"),K1=Symbol("flushChunk"),Ro=Symbol("encoding"),Qa=Symbol("decoder"),QC=Symbol("flowing"),jg=Symbol("paused"),Lm=Symbol("resume"),ir=Symbol("bufferLength"),CP=Symbol("bufferPush"),EP=Symbol("bufferShift"),Hr=Symbol("objectMode"),Br=Symbol("destroyed"),SP=Symbol("emitData"),J1=Symbol("emitEnd"),xP=Symbol("emitEnd2"),ec=Symbol("async"),Vg=t=>Promise.resolve().then(t),X1=global._MP_NO_ITERATOR_SYMBOLS_!=="1",sJ=X1&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),aJ=X1&&Symbol.iterator||Symbol("iterator not implemented"),cJ=t=>t==="end"||t==="finish"||t==="prefinish",lJ=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,uJ=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),eE=class{constructor(e,n,r){this.src=e,this.dest=n,this.opts=r,this.ondrain=()=>e[Lm](),n.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},_P=class extends eE{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,n,r){super(e,n,r),this.proxyErrors=o=>n.emit("error",o),e.on("error",this.proxyErrors)}};Q1.exports=class Z1 extends q1{constructor(e){super(),this[QC]=!1,this[jg]=!1,this.pipes=[],this.buffer=[],this[Hr]=e&&e.objectMode||!1,this[Hr]?this[Ro]=null:this[Ro]=e&&e.encoding||null,this[Ro]==="buffer"&&(this[Ro]=null),this[ec]=e&&!!e.async||!1,this[Qa]=this[Ro]?new G1(this[Ro]):null,this[Xa]=!1,this[ul]=!1,this[JC]=!1,this[XC]=!1,this[Wg]=null,this.writable=!0,this.readable=!0,this[ir]=0,this[Br]=!1}get bufferLength(){return this[ir]}get encoding(){return this[Ro]}set encoding(e){if(this[Hr])throw new Error("cannot set encoding in objectMode");if(this[Ro]&&e!==this[Ro]&&(this[Qa]&&this[Qa].lastNeed||this[ir]))throw new Error("cannot change encoding");this[Ro]!==e&&(this[Qa]=e?new G1(e):null,this.buffer.length&&(this.buffer=this.buffer.map(n=>this[Qa].write(n)))),this[Ro]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Hr]}set objectMode(e){this[Hr]=this[Hr]||!!e}get async(){return this[ec]}set async(e){this[ec]=this[ec]||!!e}write(e,n,r){if(this[Xa])throw new Error("write after end");if(this[Br])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let o=this[ec]?Vg:i=>i();return!this[Hr]&&!Buffer.isBuffer(e)&&(uJ(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):lJ(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Hr]?(this.flowing&&this[ir]!==0&&this[ZC](!0),this.flowing?this.emit("data",e):this[CP](e),this[ir]!==0&&this.emit("readable"),r&&o(r),this.flowing):e.length?(typeof e=="string"&&!(n===this[Ro]&&!this[Qa].lastNeed)&&(e=Buffer.from(e,n)),Buffer.isBuffer(e)&&this[Ro]&&(e=this[Qa].write(e)),this.flowing&&this[ir]!==0&&this[ZC](!0),this.flowing?this.emit("data",e):this[CP](e),this[ir]!==0&&this.emit("readable"),r&&o(r),this.flowing):(this[ir]!==0&&this.emit("readable"),r&&o(r),this.flowing)}read(e){if(this[Br])return null;if(this[ir]===0||e===0||e>this[ir])return this[Za](),null;this[Hr]&&(e=null),this.buffer.length>1&&!this[Hr]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[ir])]);let n=this[z1](e||null,this.buffer[0]);return this[Za](),n}[z1](e,n){return e===n.length||e===null?this[EP]():(this.buffer[0]=n.slice(e),n=n.slice(0,e),this[ir]-=e),this.emit("data",n),!this.buffer.length&&!this[Xa]&&this.emit("drain"),n}end(e,n,r){return typeof e=="function"&&(r=e,e=null),typeof n=="function"&&(r=n,n="utf8"),e&&this.write(e,n),r&&this.once("end",r),this[Xa]=!0,this.writable=!1,(this.flowing||!this[jg])&&this[Za](),this}[Lm](){this[Br]||(this[jg]=!1,this[QC]=!0,this.emit("resume"),this.buffer.length?this[ZC]():this[Xa]?this[Za]():this.emit("drain"))}resume(){return this[Lm]()}pause(){this[QC]=!1,this[jg]=!0}get destroyed(){return this[Br]}get flowing(){return this[QC]}get paused(){return this[jg]}[CP](e){this[Hr]?this[ir]+=1:this[ir]+=e.length,this.buffer.push(e)}[EP](){return this.buffer.length&&(this[Hr]?this[ir]-=1:this[ir]-=this.buffer[0].length),this.buffer.shift()}[ZC](e){do;while(this[K1](this[EP]()));!e&&!this.buffer.length&&!this[Xa]&&this.emit("drain")}[K1](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,n){if(this[Br])return;let r=this[ul];return n=n||{},e===Y1.stdout||e===Y1.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&e.end():(this.pipes.push(n.proxyErrors?new _P(this,e,n):new eE(this,e,n)),this[ec]?Vg(()=>this[Lm]()):this[Lm]()),e}unpipe(e){let n=this.pipes.find(r=>r.dest===e);n&&(this.pipes.splice(this.pipes.indexOf(n),1),n.unpipe())}addListener(e,n){return this.on(e,n)}on(e,n){let r=super.on(e,n);return e==="data"&&!this.pipes.length&&!this.flowing?this[Lm]():e==="readable"&&this[ir]!==0?super.emit("readable"):cJ(e)&&this[ul]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Wg]&&(this[ec]?Vg(()=>n.call(this,this[Wg])):n.call(this,this[Wg])),r}get emittedEnd(){return this[ul]}[Za](){!this[JC]&&!this[ul]&&!this[Br]&&this.buffer.length===0&&this[Xa]&&(this[JC]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[XC]&&this.emit("close"),this[JC]=!1)}emit(e,n,...r){if(e!=="error"&&e!=="close"&&e!==Br&&this[Br])return;if(e==="data")return n?this[ec]?Vg(()=>this[SP](n)):this[SP](n):!1;if(e==="end")return this[J1]();if(e==="close"){if(this[XC]=!0,!this[ul]&&!this[Br])return;let i=super.emit("close");return this.removeAllListeners("close"),i}else if(e==="error"){this[Wg]=n;let i=super.emit("error",n);return this[Za](),i}else if(e==="resume"){let i=super.emit("resume");return this[Za](),i}else if(e==="finish"||e==="prefinish"){let i=super.emit(e);return this.removeAllListeners(e),i}let o=super.emit(e,n,...r);return this[Za](),o}[SP](e){for(let r of this.pipes)r.dest.write(e)===!1&&this.pause();let n=super.emit("data",e);return this[Za](),n}[J1](){this[ul]||(this[ul]=!0,this.readable=!1,this[ec]?Vg(()=>this[xP]()):this[xP]())}[xP](){if(this[Qa]){let n=this[Qa].end();if(n){for(let r of this.pipes)r.dest.write(n);super.emit("data",n)}}for(let n of this.pipes)n.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Hr]||(e.dataLength=0);let n=this.promise();return this.on("data",r=>{e.push(r),this[Hr]||(e.dataLength+=r.length)}),n.then(()=>e)}concat(){return this[Hr]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Hr]?Promise.reject(new Error("cannot concat in objectMode")):this[Ro]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,n)=>{this.on(Br,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>e())})}[sJ](){return{next:()=>{let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[Xa])return Promise.resolve({done:!0});let r=null,o=null,i=l=>{this.removeListener("data",s),this.removeListener("end",a),o(l)},s=l=>{this.removeListener("error",i),this.removeListener("end",a),this.pause(),r({value:l,done:!!this[Xa]})},a=()=>{this.removeListener("error",i),this.removeListener("data",s),r({done:!0})},c=()=>i(new Error("stream destroyed"));return new Promise((l,u)=>{o=u,r=l,this.once(Br,c),this.once("error",i),this.once("end",a),this.once("data",s)})}}}[aJ](){return{next:()=>{let n=this.read();return{value:n,done:n===null}}}}destroy(e){return this[Br]?(e?this.emit("error",e):this.emit(Br),this):(this[Br]=!0,this.buffer.length=0,this[ir]=0,typeof this.close=="function"&&!this[XC]&&this.close(),e?this.emit("error",e):this.emit(Br),this)}static isStream(e){return!!e&&(e instanceof Z1||e instanceof q1||e instanceof iJ&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var HP=M(Zo=>{"use strict";var TP=require("assert"),fl=require("buffer").Buffer,rU=require("zlib"),hf=Zo.constants=V1(),fJ=eU(),tU=fl.concat,gf=Symbol("_superWrite"),Fm=class extends Error{constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},dJ=Symbol("opts"),Yg=Symbol("flushFlag"),nU=Symbol("finishFlushFlag"),$P=Symbol("fullFlushFlag"),Tt=Symbol("handle"),tE=Symbol("onError"),Am=Symbol("sawError"),DP=Symbol("level"),IP=Symbol("strategy"),PP=Symbol("ended"),awe=Symbol("_defaultFullFlush"),nE=class extends fJ{constructor(e,n){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e),this[Am]=!1,this[PP]=!1,this[dJ]=e,this[Yg]=e.flush,this[nU]=e.finishFlush;try{this[Tt]=new rU[n](e)}catch(r){throw new Fm(r)}this[tE]=r=>{this[Am]||(this[Am]=!0,this.close(),this.emit("error",r))},this[Tt].on("error",r=>this[tE](new Fm(r))),this.once("end",()=>this.close)}close(){this[Tt]&&(this[Tt].close(),this[Tt]=null,this.emit("close"))}reset(){if(!this[Am])return TP(this[Tt],"zlib binding closed"),this[Tt].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[$P]),this.write(Object.assign(fl.alloc(0),{[Yg]:e})))}end(e,n,r){return e&&this.write(e,n),this.flush(this[nU]),this[PP]=!0,super.end(null,null,r)}get ended(){return this[PP]}write(e,n,r){if(typeof n=="function"&&(r=n,n="utf8"),typeof e=="string"&&(e=fl.from(e,n)),this[Am])return;TP(this[Tt],"zlib binding closed");let o=this[Tt]._handle,i=o.close;o.close=()=>{};let s=this[Tt].close;this[Tt].close=()=>{},fl.concat=l=>l;let a;try{let l=typeof e[Yg]=="number"?e[Yg]:this[Yg];a=this[Tt]._processChunk(e,l),fl.concat=tU}catch(l){fl.concat=tU,this[tE](new Fm(l))}finally{this[Tt]&&(this[Tt]._handle=o,o.close=i,this[Tt].close=s,this[Tt].removeAllListeners("error"))}this[Tt]&&this[Tt].on("error",l=>this[tE](new Fm(l)));let c;if(a)if(Array.isArray(a)&&a.length>0){c=this[gf](fl.from(a[0]));for(let l=1;l<a.length;l++)c=this[gf](a[l])}else c=this[gf](fl.from(a));return r&&r(),c}[gf](e){return super.write(e)}},tc=class extends nE{constructor(e,n){e=e||{},e.flush=e.flush||hf.Z_NO_FLUSH,e.finishFlush=e.finishFlush||hf.Z_FINISH,super(e,n),this[$P]=hf.Z_FULL_FLUSH,this[DP]=e.level,this[IP]=e.strategy}params(e,n){if(!this[Am]){if(!this[Tt])throw new Error("cannot switch params when binding is closed");if(!this[Tt].params)throw new Error("not supported in this implementation");if(this[DP]!==e||this[IP]!==n){this.flush(hf.Z_SYNC_FLUSH),TP(this[Tt],"zlib binding closed");let r=this[Tt].flush;this[Tt].flush=(o,i)=>{this.flush(o),i()};try{this[Tt].params(e,n)}finally{this[Tt].flush=r}this[Tt]&&(this[DP]=e,this[IP]=n)}}}},RP=class extends tc{constructor(e){super(e,"Deflate")}},kP=class extends tc{constructor(e){super(e,"Inflate")}},bP=Symbol("_portable"),NP=class extends tc{constructor(e){super(e,"Gzip"),this[bP]=e&&!!e.portable}[gf](e){return this[bP]?(this[bP]=!1,e[9]=255,super[gf](e)):super[gf](e)}},LP=class extends tc{constructor(e){super(e,"Gunzip")}},AP=class extends tc{constructor(e){super(e,"DeflateRaw")}},FP=class extends tc{constructor(e){super(e,"InflateRaw")}},OP=class extends tc{constructor(e){super(e,"Unzip")}},rE=class extends nE{constructor(e,n){e=e||{},e.flush=e.flush||hf.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||hf.BROTLI_OPERATION_FINISH,super(e,n),this[$P]=hf.BROTLI_OPERATION_FLUSH}},UP=class extends rE{constructor(e){super(e,"BrotliCompress")}},MP=class extends rE{constructor(e){super(e,"BrotliDecompress")}};Zo.Deflate=RP;Zo.Inflate=kP;Zo.Gzip=NP;Zo.Gunzip=LP;Zo.DeflateRaw=AP;Zo.InflateRaw=FP;Zo.Unzip=OP;typeof rU.BrotliCompress=="function"?(Zo.BrotliCompress=UP,Zo.BrotliDecompress=MP):Zo.BrotliCompress=Zo.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var Om=M((uwe,oU)=>{var mJ=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;oU.exports=mJ!=="win32"?t=>t:t=>t&&t.replace(/\\/g,"/")});var oE=M((dwe,iU)=>{"use strict";var{Minipass:pJ}=KC(),BP=Om(),WP=Symbol("slurp");iU.exports=class extends pJ{constructor(e,n,r){switch(super(),this.pause(),this.extended=n,this.globalExtended=r,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=BP(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=BP(e.linkpath),this.uname=e.uname,this.gname=e.gname,n&&this[WP](n),r&&this[WP](r,!0)}write(e){let n=e.length;if(n>this.blockRemain)throw new Error("writing more to entry than is appropriate");let r=this.remain,o=this.blockRemain;return this.remain=Math.max(0,r-n),this.blockRemain=Math.max(0,o-n),this.ignore?!0:r>=n?super.write(e):super.write(e.slice(0,r))}[WP](e,n){for(let r in e)e[r]!==null&&e[r]!==void 0&&!(n&&r==="path")&&(this[r]=r==="path"||r==="linkpath"?BP(e[r]):e[r])}}});var jP=M(iE=>{"use strict";iE.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);iE.code=new Map(Array.from(iE.name).map(t=>[t[1],t[0]]))});var lU=M((pwe,cU)=>{"use strict";var hJ=(t,e)=>{if(Number.isSafeInteger(t))t<0?vJ(t,e):gJ(t,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},gJ=(t,e)=>{e[0]=128;for(var n=e.length;n>1;n--)e[n-1]=t&255,t=Math.floor(t/256)},vJ=(t,e)=>{e[0]=255;var n=!1;t=t*-1;for(var r=e.length;r>1;r--){var o=t&255;t=Math.floor(t/256),n?e[r-1]=sU(o):o===0?e[r-1]=0:(n=!0,e[r-1]=aU(o))}},wJ=t=>{let e=t[0],n=e===128?CJ(t.slice(1,t.length)):e===255?yJ(t):null;if(n===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(n))throw Error("parsed number outside of javascript safe integer range");return n},yJ=t=>{for(var e=t.length,n=0,r=!1,o=e-1;o>-1;o--){var i=t[o],s;r?s=sU(i):i===0?s=i:(r=!0,s=aU(i)),s!==0&&(n-=s*Math.pow(256,e-o-1))}return n},CJ=t=>{for(var e=t.length,n=0,r=e-1;r>-1;r--){var o=t[r];o!==0&&(n+=o*Math.pow(256,e-r-1))}return n},sU=t=>(255^t)&255,aU=t=>(255^t)+1&255;cU.exports={encode:hJ,parse:wJ}});var Mm=M((hwe,fU)=>{"use strict";var VP=jP(),Um=require("path").posix,uU=lU(),YP=Symbol("slurp"),Qo=Symbol("type"),zP=class{constructor(e,n,r,o){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[Qo]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,n||0,r,o):e&&this.set(e)}decode(e,n,r,o){if(n||(n=0),!e||!(e.length>=n+512))throw new Error("need 512 bytes for header");if(this.path=vf(e,n,100),this.mode=dl(e,n+100,8),this.uid=dl(e,n+108,8),this.gid=dl(e,n+116,8),this.size=dl(e,n+124,12),this.mtime=qP(e,n+136,12),this.cksum=dl(e,n+148,12),this[YP](r),this[YP](o,!0),this[Qo]=vf(e,n+156,1),this[Qo]===""&&(this[Qo]="0"),this[Qo]==="0"&&this.path.slice(-1)==="/"&&(this[Qo]="5"),this[Qo]==="5"&&(this.size=0),this.linkpath=vf(e,n+157,100),e.slice(n+257,n+265).toString()==="ustar\x0000")if(this.uname=vf(e,n+265,32),this.gname=vf(e,n+297,32),this.devmaj=dl(e,n+329,8),this.devmin=dl(e,n+337,8),e[n+475]!==0){let s=vf(e,n+345,155);this.path=s+"/"+this.path}else{let s=vf(e,n+345,130);s&&(this.path=s+"/"+this.path),this.atime=qP(e,n+476,12),this.ctime=qP(e,n+488,12)}let i=256;for(let s=n;s<n+148;s++)i+=e[s];for(let s=n+156;s<n+512;s++)i+=e[s];this.cksumValid=i===this.cksum,this.cksum===null&&i===256&&(this.nullBlock=!0)}[YP](e,n){for(let r in e)e[r]!==null&&e[r]!==void 0&&!(n&&r==="path")&&(this[r]=e[r])}encode(e,n){if(e||(e=this.block=Buffer.alloc(512),n=0),n||(n=0),!(e.length>=n+512))throw new Error("need 512 bytes for header");let r=this.ctime||this.atime?130:155,o=EJ(this.path||"",r),i=o[0],s=o[1];this.needPax=o[2],this.needPax=wf(e,n,100,i)||this.needPax,this.needPax=ml(e,n+100,8,this.mode)||this.needPax,this.needPax=ml(e,n+108,8,this.uid)||this.needPax,this.needPax=ml(e,n+116,8,this.gid)||this.needPax,this.needPax=ml(e,n+124,12,this.size)||this.needPax,this.needPax=GP(e,n+136,12,this.mtime)||this.needPax,e[n+156]=this[Qo].charCodeAt(0),this.needPax=wf(e,n+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",n+257,8),this.needPax=wf(e,n+265,32,this.uname)||this.needPax,this.needPax=wf(e,n+297,32,this.gname)||this.needPax,this.needPax=ml(e,n+329,8,this.devmaj)||this.needPax,this.needPax=ml(e,n+337,8,this.devmin)||this.needPax,this.needPax=wf(e,n+345,r,s)||this.needPax,e[n+475]!==0?this.needPax=wf(e,n+345,155,s)||this.needPax:(this.needPax=wf(e,n+345,130,s)||this.needPax,this.needPax=GP(e,n+476,12,this.atime)||this.needPax,this.needPax=GP(e,n+488,12,this.ctime)||this.needPax);let a=256;for(let c=n;c<n+148;c++)a+=e[c];for(let c=n+156;c<n+512;c++)a+=e[c];return this.cksum=a,ml(e,n+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let n in e)e[n]!==null&&e[n]!==void 0&&(this[n]=e[n])}get type(){return VP.name.get(this[Qo])||this[Qo]}get typeKey(){return this[Qo]}set type(e){VP.code.has(e)?this[Qo]=VP.code.get(e):this[Qo]=e}},EJ=(t,e)=>{let r=t,o="",i,s=Um.parse(t).root||".";if(Buffer.byteLength(r)<100)i=[r,o,!1];else{o=Um.dirname(r),r=Um.basename(r);do Buffer.byteLength(r)<=100&&Buffer.byteLength(o)<=e?i=[r,o,!1]:Buffer.byteLength(r)>100&&Buffer.byteLength(o)<=e?i=[r.slice(0,99),o,!0]:(r=Um.join(Um.basename(o),r),o=Um.dirname(o));while(o!==s&&!i);i||(i=[t.slice(0,99),"",!0])}return i},vf=(t,e,n)=>t.slice(e,e+n).toString("utf8").replace(/\0.*/,""),qP=(t,e,n)=>SJ(dl(t,e,n)),SJ=t=>t===null?null:new Date(t*1e3),dl=(t,e,n)=>t[e]&128?uU.parse(t.slice(e,e+n)):_J(t,e,n),xJ=t=>isNaN(t)?null:t,_J=(t,e,n)=>xJ(parseInt(t.slice(e,e+n).toString("utf8").replace(/\0.*$/,"").trim(),8)),DJ={12:8589934591,8:2097151},ml=(t,e,n,r)=>r===null?!1:r>DJ[n]||r<0?(uU.encode(r,t.slice(e,e+n)),!0):(IJ(t,e,n,r),!1),IJ=(t,e,n,r)=>t.write(PJ(r,n),e,n,"ascii"),PJ=(t,e)=>bJ(Math.floor(t).toString(8),e),bJ=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",GP=(t,e,n,r)=>r===null?!1:ml(t,e,n,r.getTime()/1e3),TJ=new Array(156).join("\0"),wf=(t,e,n,r)=>r===null?!1:(t.write(r+TJ,e,n,"utf8"),r.length!==Buffer.byteLength(r)||r.length>n);fU.exports=zP});var sE=M((gwe,dU)=>{"use strict";var RJ=Mm(),kJ=require("path"),qg=class{constructor(e,n){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=n||!1}encode(){let e=this.encodeBody();if(e==="")return null;let n=Buffer.byteLength(e),r=512*Math.ceil(1+n/512),o=Buffer.allocUnsafe(r);for(let i=0;i<512;i++)o[i]=0;new RJ({path:("PaxHeader/"+kJ.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:n,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(o),o.write(e,512,n,"utf8");for(let i=n+512;i<o.length;i++)o[i]=0;return o}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let n=this[e]instanceof Date?this[e].getTime()/1e3:this[e],r=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+n+`
`,o=Buffer.byteLength(r),i=Math.floor(Math.log(o)/Math.log(10))+1;return o+i>=Math.pow(10,i)&&(i+=1),i+o+r}};qg.parse=(t,e,n)=>new qg(NJ(LJ(t),e),n);var NJ=(t,e)=>e?Object.keys(t).reduce((n,r)=>(n[r]=t[r],n),e):t,LJ=t=>t.replace(/\n$/,"").split(`
`).reduce(AJ,Object.create(null)),AJ=(t,e)=>{let n=parseInt(e,10);if(n!==Buffer.byteLength(e)+1)return t;e=e.slice((n+" ").length);let r=e.split("="),o=r.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!o)return t;let i=r.join("=");return t[o]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(o)?new Date(i*1e3):/^[0-9]+$/.test(i)?+i:i,t};dU.exports=qg});var $m=M((vwe,mU)=>{mU.exports=t=>{let e=t.length-1,n=-1;for(;e>-1&&t.charAt(e)==="/";)n=e,e--;return n===-1?t:t.slice(0,n)}});var aE=M((wwe,pU)=>{"use strict";pU.exports=t=>class extends t{warn(e,n,r={}){this.file&&(r.file=this.file),this.cwd&&(r.cwd=this.cwd),r.code=n instanceof Error&&n.code||e,r.tarCode=e,!this.strict&&r.recoverable!==!1?(n instanceof Error&&(r=Object.assign(n,r),n=n.message),this.emit("warn",r.tarCode,n,r)):n instanceof Error?this.emit("error",Object.assign(n,r)):this.emit("error",Object.assign(new Error(`${e}: ${n}`),r))}}});var JP=M((Cwe,hU)=>{"use strict";var cE=["|","<",">","?",":"],KP=cE.map(t=>String.fromCharCode(61440+t.charCodeAt(0))),FJ=new Map(cE.map((t,e)=>[t,KP[e]])),OJ=new Map(KP.map((t,e)=>[t,cE[e]]));hU.exports={encode:t=>cE.reduce((e,n)=>e.split(n).join(FJ.get(n)),t),decode:t=>KP.reduce((e,n)=>e.split(n).join(OJ.get(n)),t)}});var XP=M((Ewe,vU)=>{var{isAbsolute:UJ,parse:gU}=require("path").win32;vU.exports=t=>{let e="",n=gU(t);for(;UJ(t)||n.root;){let r=t.charAt(0)==="/"&&t.slice(0,4)!=="//?/"?"/":n.root;t=t.slice(r.length),e+=r,n=gU(t)}return[e,t]}});var yU=M((Swe,wU)=>{"use strict";wU.exports=(t,e,n)=>(t&=4095,n&&(t=(t|384)&-19),e&&(t&256&&(t|=64),t&32&&(t|=8),t&4&&(t|=1)),t)});var ab=M((Dwe,LU)=>{"use strict";var{Minipass:IU}=KC(),PU=sE(),bU=Mm(),Gs=require("fs"),CU=require("path"),qs=Om(),MJ=$m(),TU=(t,e)=>e?(t=qs(t).replace(/^\.(\/|$)/,""),MJ(e)+"/"+t):qs(t),$J=16*1024*1024,EU=Symbol("process"),SU=Symbol("file"),xU=Symbol("directory"),QP=Symbol("symlink"),_U=Symbol("hardlink"),Gg=Symbol("header"),lE=Symbol("read"),eb=Symbol("lstat"),uE=Symbol("onlstat"),tb=Symbol("onread"),nb=Symbol("onreadlink"),rb=Symbol("openfile"),ob=Symbol("onopenfile"),pl=Symbol("close"),fE=Symbol("mode"),ib=Symbol("awaitDrain"),ZP=Symbol("ondrain"),zs=Symbol("prefix"),DU=Symbol("hadError"),RU=aE(),HJ=JP(),kU=XP(),NU=yU(),dE=RU(class extends IU{constructor(e,n){if(n=n||{},super(n),typeof e!="string")throw new TypeError("path is required");this.path=qs(e),this.portable=!!n.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=n.maxReadSize||$J,this.linkCache=n.linkCache||new Map,this.statCache=n.statCache||new Map,this.preservePaths=!!n.preservePaths,this.cwd=qs(n.cwd||process.cwd()),this.strict=!!n.strict,this.noPax=!!n.noPax,this.noMtime=!!n.noMtime,this.mtime=n.mtime||null,this.prefix=n.prefix?qs(n.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof n.onwarn=="function"&&this.on("warn",n.onwarn);let r=!1;if(!this.preservePaths){let[o,i]=kU(this.path);o&&(this.path=i,r=o)}this.win32=!!n.win32||process.platform==="win32",this.win32&&(this.path=HJ.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=qs(n.absolute||CU.resolve(this.cwd,e)),this.path===""&&(this.path="./"),r&&this.warn("TAR_ENTRY_INFO",`stripping ${r} from absolute path`,{entry:this,path:r+this.path}),this.statCache.has(this.absolute)?this[uE](this.statCache.get(this.absolute)):this[eb]()}emit(e,...n){return e==="error"&&(this[DU]=!0),super.emit(e,...n)}[eb](){Gs.lstat(this.absolute,(e,n)=>{if(e)return this.emit("error",e);this[uE](n)})}[uE](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=WJ(e),this.emit("stat",e),this[EU]()}[EU](){switch(this.type){case"File":return this[SU]();case"Directory":return this[xU]();case"SymbolicLink":return this[QP]();default:return this.end()}}[fE](e){return NU(e,this.type==="Directory",this.portable)}[zs](e){return TU(e,this.prefix)}[Gg](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new bU({path:this[zs](this.path),linkpath:this.type==="Link"?this[zs](this.linkpath):this.linkpath,mode:this[fE](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new PU({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[zs](this.path),linkpath:this.type==="Link"?this[zs](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[xU](){this.path.slice(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[Gg](),this.end()}[QP](){Gs.readlink(this.absolute,(e,n)=>{if(e)return this.emit("error",e);this[nb](n)})}[nb](e){this.linkpath=qs(e),this[Gg](),this.end()}[_U](e){this.type="Link",this.linkpath=qs(CU.relative(this.cwd,e)),this.stat.size=0,this[Gg](),this.end()}[SU](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let n=this.linkCache.get(e);if(n.indexOf(this.cwd)===0)return this[_U](n)}this.linkCache.set(e,this.absolute)}if(this[Gg](),this.stat.size===0)return this.end();this[rb]()}[rb](){Gs.open(this.absolute,"r",(e,n)=>{if(e)return this.emit("error",e);this[ob](n)})}[ob](e){if(this.fd=e,this[DU])return this[pl]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let n=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(n),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[lE]()}[lE](){let{fd:e,buf:n,offset:r,length:o,pos:i}=this;Gs.read(e,n,r,o,i,(s,a)=>{if(s)return this[pl](()=>this.emit("error",s));this[tb](a)})}[pl](e){Gs.close(this.fd,e)}[tb](e){if(e<=0&&this.remain>0){let o=new Error("encountered unexpected EOF");return o.path=this.absolute,o.syscall="read",o.code="EOF",this[pl](()=>this.emit("error",o))}if(e>this.remain){let o=new Error("did not encounter expected EOF");return o.path=this.absolute,o.syscall="read",o.code="EOF",this[pl](()=>this.emit("error",o))}if(e===this.remain)for(let o=e;o<this.length&&e<this.blockRemain;o++)this.buf[o+this.offset]=0,e++,this.remain++;let n=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(n)?this[ZP]():this[ib](()=>this[ZP]())}[ib](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let n=new Error("writing more data than expected");return n.path=this.absolute,this.emit("error",n)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[ZP](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[pl](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[lE]()}}),sb=class extends dE{[eb](){this[uE](Gs.lstatSync(this.absolute))}[QP](){this[nb](Gs.readlinkSync(this.absolute))}[rb](){this[ob](Gs.openSync(this.absolute,"r"))}[lE](){let e=!0;try{let{fd:n,buf:r,offset:o,length:i,pos:s}=this,a=Gs.readSync(n,r,o,i,s);this[tb](a),e=!1}finally{if(e)try{this[pl](()=>{})}catch{}}}[ib](e){e()}[pl](e){Gs.closeSync(this.fd),e()}},BJ=RU(class extends IU{constructor(e,n){n=n||{},super(n),this.preservePaths=!!n.preservePaths,this.portable=!!n.portable,this.strict=!!n.strict,this.noPax=!!n.noPax,this.noMtime=!!n.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=n.prefix||null,this.path=qs(e.path),this.mode=this[fE](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:n.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=qs(e.linkpath),typeof n.onwarn=="function"&&this.on("warn",n.onwarn);let r=!1;if(!this.preservePaths){let[o,i]=kU(this.path);o&&(this.path=i,r=o)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new bU({path:this[zs](this.path),linkpath:this.type==="Link"?this[zs](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),r&&this.warn("TAR_ENTRY_INFO",`stripping ${r} from absolute path`,{entry:this,path:r+this.path}),this.header.encode()&&!this.noPax&&super.write(new PU({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[zs](this.path),linkpath:this.type==="Link"?this[zs](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[zs](e){return TU(e,this.prefix)}[fE](e){return NU(e,this.type==="Directory",this.portable)}write(e){let n=e.length;if(n>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=n,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});dE.Sync=sb;dE.Tar=BJ;var WJ=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";LU.exports=dE});var FU=M((Iwe,AU)=>{"use strict";AU.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var lb=M((Pwe,OU)=>{"use strict";OU.exports=ft;ft.Node=yf;ft.create=ft;function ft(t){var e=this;if(e instanceof ft||(e=new ft),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(o){e.push(o)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)e.push(arguments[n]);return e}ft.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e};ft.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};ft.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};ft.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)VJ(this,arguments[t]);return this.length};ft.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)YJ(this,arguments[t]);return this.length};ft.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};ft.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};ft.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;n!==null;r++)t.call(e,n.value,r,this),n=n.next};ft.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;n!==null;r--)t.call(e,n.value,r,this),n=n.prev};ft.prototype.get=function(t){for(var e=0,n=this.head;n!==null&&e<t;e++)n=n.next;if(e===t&&n!==null)return n.value};ft.prototype.getReverse=function(t){for(var e=0,n=this.tail;n!==null&&e<t;e++)n=n.prev;if(e===t&&n!==null)return n.value};ft.prototype.map=function(t,e){e=e||this;for(var n=new ft,r=this.head;r!==null;)n.push(t.call(e,r.value,this)),r=r.next;return n};ft.prototype.mapReverse=function(t,e){e=e||this;for(var n=new ft,r=this.tail;r!==null;)n.push(t.call(e,r.value,this)),r=r.prev;return n};ft.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=0;r!==null;o++)n=t(n,r.value,o),r=r.next;return n};ft.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=this.length-1;r!==null;o--)n=t(n,r.value,o),r=r.prev;return n};ft.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;n!==null;e++)t[e]=n.value,n=n.next;return t};ft.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;n!==null;e++)t[e]=n.value,n=n.prev;return t};ft.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new ft;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,o=this.head;o!==null&&r<t;r++)o=o.next;for(;o!==null&&r<e;r++,o=o.next)n.push(o.value);return n};ft.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new ft;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,o=this.tail;o!==null&&r>e;r--)o=o.prev;for(;o!==null&&r>t;r--,o=o.prev)n.push(o.value);return n};ft.prototype.splice=function(t,e,...n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,o=this.head;o!==null&&r<t;r++)o=o.next;for(var i=[],r=0;o&&r<e;r++)i.push(o.value),o=this.removeNode(o);o===null&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(var r=0;r<n.length;r++)o=jJ(this,o,n[r]);return i};ft.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};function jJ(t,e,n){var r=e===t.head?new yf(n,null,e,t):new yf(n,e,e.next,t);return r.next===null&&(t.tail=r),r.prev===null&&(t.head=r),t.length++,r}function VJ(t,e){t.tail=new yf(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function YJ(t,e){t.head=new yf(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function yf(t,e,n,r){if(!(this instanceof yf))return new yf(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{FU()(ft)}catch{}});var EE=M((Twe,VU)=>{"use strict";var yE=class{constructor(e,n){this.path=e||"./",this.absolute=n,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},{Minipass:qJ}=KC(),UU=HP(),GJ=oE(),wb=ab(),zJ=wb.Sync,KJ=wb.Tar,JJ=lb(),MU=Buffer.alloc(1024),hE=Symbol("onStat"),mE=Symbol("ended"),Ks=Symbol("queue"),Hm=Symbol("current"),Cf=Symbol("process"),pE=Symbol("processing"),$U=Symbol("processJob"),Js=Symbol("jobs"),ub=Symbol("jobDone"),gE=Symbol("addFSEntry"),HU=Symbol("addTarEntry"),pb=Symbol("stat"),hb=Symbol("readdir"),vE=Symbol("onreaddir"),wE=Symbol("pipe"),BU=Symbol("entry"),fb=Symbol("entryOpt"),gb=Symbol("writeEntryClass"),jU=Symbol("write"),db=Symbol("ondrain"),CE=require("fs"),WU=require("path"),XJ=aE(),mb=Om(),yb=XJ(class extends qJ{constructor(e){if(super(e),e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=mb(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[gb]=wb,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip||e.brotli){if(e.gzip&&e.brotli)throw new TypeError("gzip and brotli are mutually exclusive");e.gzip&&(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new UU.Gzip(e.gzip)),e.brotli&&(typeof e.brotli!="object"&&(e.brotli={}),this.zip=new UU.BrotliCompress(e.brotli)),this.zip.on("data",n=>super.write(n)),this.zip.on("end",n=>super.end()),this.zip.on("drain",n=>this[db]()),this.on("resume",n=>this.zip.resume())}else this.on("drain",this[db]);this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:n=>!0,this[Ks]=new JJ,this[Js]=0,this.jobs=+e.jobs||4,this[pE]=!1,this[mE]=!1}[jU](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[mE]=!0,this[Cf](),this}write(e){if(this[mE])throw new Error("write after end");return e instanceof GJ?this[HU](e):this[gE](e),this.flowing}[HU](e){let n=mb(WU.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let r=new yE(e.path,n,!1);r.entry=new KJ(e,this[fb](r)),r.entry.on("end",o=>this[ub](r)),this[Js]+=1,this[Ks].push(r)}this[Cf]()}[gE](e){let n=mb(WU.resolve(this.cwd,e));this[Ks].push(new yE(e,n)),this[Cf]()}[pb](e){e.pending=!0,this[Js]+=1;let n=this.follow?"stat":"lstat";CE[n](e.absolute,(r,o)=>{e.pending=!1,this[Js]-=1,r?this.emit("error",r):this[hE](e,o)})}[hE](e,n){this.statCache.set(e.absolute,n),e.stat=n,this.filter(e.path,n)||(e.ignore=!0),this[Cf]()}[hb](e){e.pending=!0,this[Js]+=1,CE.readdir(e.absolute,(n,r)=>{if(e.pending=!1,this[Js]-=1,n)return this.emit("error",n);this[vE](e,r)})}[vE](e,n){this.readdirCache.set(e.absolute,n),e.readdir=n,this[Cf]()}[Cf](){if(!this[pE]){this[pE]=!0;for(let e=this[Ks].head;e!==null&&this[Js]<this.jobs;e=e.next)if(this[$U](e.value),e.value.ignore){let n=e.next;this[Ks].removeNode(e),e.next=n}this[pE]=!1,this[mE]&&!this[Ks].length&&this[Js]===0&&(this.zip?this.zip.end(MU):(super.write(MU),super.end()))}}get[Hm](){return this[Ks]&&this[Ks].head&&this[Ks].head.value}[ub](e){this[Ks].shift(),this[Js]-=1,this[Cf]()}[$U](e){if(!e.pending){if(e.entry){e===this[Hm]&&!e.piped&&this[wE](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[hE](e,this.statCache.get(e.absolute)):this[pb](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[vE](e,this.readdirCache.get(e.absolute)):this[hb](e),!e.readdir))){if(e.entry=this[BU](e),!e.entry){e.ignore=!0;return}e===this[Hm]&&!e.piped&&this[wE](e)}}}[fb](e){return{onwarn:(n,r,o)=>this.warn(n,r,o),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[BU](e){this[Js]+=1;try{return new this[gb](e.path,this[fb](e)).on("end",()=>this[ub](e)).on("error",n=>this.emit("error",n))}catch(n){this.emit("error",n)}}[db](){this[Hm]&&this[Hm].entry&&this[Hm].entry.resume()}[wE](e){e.piped=!0,e.readdir&&e.readdir.forEach(o=>{let i=e.path,s=i==="./"?"":i.replace(/\/*$/,"/");this[gE](s+o)});let n=e.entry,r=this.zip;r?n.on("data",o=>{r.write(o)||n.pause()}):n.on("data",o=>{super.write(o)||n.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),vb=class extends yb{constructor(e){super(e),this[gb]=zJ}pause(){}resume(){}[pb](e){let n=this.follow?"statSync":"lstatSync";this[hE](e,CE[n](e.absolute))}[hb](e,n){this[vE](e,CE.readdirSync(e.absolute))}[wE](e){let n=e.entry,r=this.zip;e.readdir&&e.readdir.forEach(o=>{let i=e.path,s=i==="./"?"":i.replace(/\/*$/,"/");this[gE](s+o)}),r?n.on("data",o=>{r.write(o)}):n.on("data",o=>{super[jU](o)})}};yb.Sync=vb;VU.exports=yb});var eM=M((Rwe,QU)=>{"use strict";var YU=typeof process=="object"&&process?process:{stdout:null,stderr:null},ZJ=require("events"),qU=require("stream"),GU=require("string_decoder").StringDecoder,nc=Symbol("EOF"),rc=Symbol("maybeEmitEnd"),hl=Symbol("emittedEnd"),SE=Symbol("emittingEnd"),zg=Symbol("emittedError"),xE=Symbol("closed"),zU=Symbol("read"),_E=Symbol("flush"),KU=Symbol("flushChunk"),ko=Symbol("encoding"),oc=Symbol("decoder"),DE=Symbol("flowing"),Kg=Symbol("paused"),Bm=Symbol("resume"),sr=Symbol("bufferLength"),Cb=Symbol("bufferPush"),Eb=Symbol("bufferShift"),Wr=Symbol("objectMode"),jr=Symbol("destroyed"),Sb=Symbol("emitData"),JU=Symbol("emitEnd"),xb=Symbol("emitEnd2"),ic=Symbol("async"),Jg=t=>Promise.resolve().then(t),XU=global._MP_NO_ITERATOR_SYMBOLS_!=="1",QJ=XU&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),eX=XU&&Symbol.iterator||Symbol("iterator not implemented"),tX=t=>t==="end"||t==="finish"||t==="prefinish",nX=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,rX=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),IE=class{constructor(e,n,r){this.src=e,this.dest=n,this.opts=r,this.ondrain=()=>e[Bm](),n.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},_b=class extends IE{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,n,r){super(e,n,r),this.proxyErrors=o=>n.emit("error",o),e.on("error",this.proxyErrors)}};QU.exports=class ZU extends qU{constructor(e){super(),this[DE]=!1,this[Kg]=!1,this.pipes=[],this.buffer=[],this[Wr]=e&&e.objectMode||!1,this[Wr]?this[ko]=null:this[ko]=e&&e.encoding||null,this[ko]==="buffer"&&(this[ko]=null),this[ic]=e&&!!e.async||!1,this[oc]=this[ko]?new GU(this[ko]):null,this[nc]=!1,this[hl]=!1,this[SE]=!1,this[xE]=!1,this[zg]=null,this.writable=!0,this.readable=!0,this[sr]=0,this[jr]=!1}get bufferLength(){return this[sr]}get encoding(){return this[ko]}set encoding(e){if(this[Wr])throw new Error("cannot set encoding in objectMode");if(this[ko]&&e!==this[ko]&&(this[oc]&&this[oc].lastNeed||this[sr]))throw new Error("cannot change encoding");this[ko]!==e&&(this[oc]=e?new GU(e):null,this.buffer.length&&(this.buffer=this.buffer.map(n=>this[oc].write(n)))),this[ko]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Wr]}set objectMode(e){this[Wr]=this[Wr]||!!e}get async(){return this[ic]}set async(e){this[ic]=this[ic]||!!e}write(e,n,r){if(this[nc])throw new Error("write after end");if(this[jr])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let o=this[ic]?Jg:i=>i();return!this[Wr]&&!Buffer.isBuffer(e)&&(rX(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):nX(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Wr]?(this.flowing&&this[sr]!==0&&this[_E](!0),this.flowing?this.emit("data",e):this[Cb](e),this[sr]!==0&&this.emit("readable"),r&&o(r),this.flowing):e.length?(typeof e=="string"&&!(n===this[ko]&&!this[oc].lastNeed)&&(e=Buffer.from(e,n)),Buffer.isBuffer(e)&&this[ko]&&(e=this[oc].write(e)),this.flowing&&this[sr]!==0&&this[_E](!0),this.flowing?this.emit("data",e):this[Cb](e),this[sr]!==0&&this.emit("readable"),r&&o(r),this.flowing):(this[sr]!==0&&this.emit("readable"),r&&o(r),this.flowing)}read(e){if(this[jr])return null;if(this[sr]===0||e===0||e>this[sr])return this[rc](),null;this[Wr]&&(e=null),this.buffer.length>1&&!this[Wr]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[sr])]);let n=this[zU](e||null,this.buffer[0]);return this[rc](),n}[zU](e,n){return e===n.length||e===null?this[Eb]():(this.buffer[0]=n.slice(e),n=n.slice(0,e),this[sr]-=e),this.emit("data",n),!this.buffer.length&&!this[nc]&&this.emit("drain"),n}end(e,n,r){return typeof e=="function"&&(r=e,e=null),typeof n=="function"&&(r=n,n="utf8"),e&&this.write(e,n),r&&this.once("end",r),this[nc]=!0,this.writable=!1,(this.flowing||!this[Kg])&&this[rc](),this}[Bm](){this[jr]||(this[Kg]=!1,this[DE]=!0,this.emit("resume"),this.buffer.length?this[_E]():this[nc]?this[rc]():this.emit("drain"))}resume(){return this[Bm]()}pause(){this[DE]=!1,this[Kg]=!0}get destroyed(){return this[jr]}get flowing(){return this[DE]}get paused(){return this[Kg]}[Cb](e){this[Wr]?this[sr]+=1:this[sr]+=e.length,this.buffer.push(e)}[Eb](){return this.buffer.length&&(this[Wr]?this[sr]-=1:this[sr]-=this.buffer[0].length),this.buffer.shift()}[_E](e){do;while(this[KU](this[Eb]()));!e&&!this.buffer.length&&!this[nc]&&this.emit("drain")}[KU](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,n){if(this[jr])return;let r=this[hl];return n=n||{},e===YU.stdout||e===YU.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&e.end():(this.pipes.push(n.proxyErrors?new _b(this,e,n):new IE(this,e,n)),this[ic]?Jg(()=>this[Bm]()):this[Bm]()),e}unpipe(e){let n=this.pipes.find(r=>r.dest===e);n&&(this.pipes.splice(this.pipes.indexOf(n),1),n.unpipe())}addListener(e,n){return this.on(e,n)}on(e,n){let r=super.on(e,n);return e==="data"&&!this.pipes.length&&!this.flowing?this[Bm]():e==="readable"&&this[sr]!==0?super.emit("readable"):tX(e)&&this[hl]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[zg]&&(this[ic]?Jg(()=>n.call(this,this[zg])):n.call(this,this[zg])),r}get emittedEnd(){return this[hl]}[rc](){!this[SE]&&!this[hl]&&!this[jr]&&this.buffer.length===0&&this[nc]&&(this[SE]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[xE]&&this.emit("close"),this[SE]=!1)}emit(e,n,...r){if(e!=="error"&&e!=="close"&&e!==jr&&this[jr])return;if(e==="data")return n?this[ic]?Jg(()=>this[Sb](n)):this[Sb](n):!1;if(e==="end")return this[JU]();if(e==="close"){if(this[xE]=!0,!this[hl]&&!this[jr])return;let i=super.emit("close");return this.removeAllListeners("close"),i}else if(e==="error"){this[zg]=n;let i=super.emit("error",n);return this[rc](),i}else if(e==="resume"){let i=super.emit("resume");return this[rc](),i}else if(e==="finish"||e==="prefinish"){let i=super.emit(e);return this.removeAllListeners(e),i}let o=super.emit(e,n,...r);return this[rc](),o}[Sb](e){for(let r of this.pipes)r.dest.write(e)===!1&&this.pause();let n=super.emit("data",e);return this[rc](),n}[JU](){this[hl]||(this[hl]=!0,this.readable=!1,this[ic]?Jg(()=>this[xb]()):this[xb]())}[xb](){if(this[oc]){let n=this[oc].end();if(n){for(let r of this.pipes)r.dest.write(n);super.emit("data",n)}}for(let n of this.pipes)n.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Wr]||(e.dataLength=0);let n=this.promise();return this.on("data",r=>{e.push(r),this[Wr]||(e.dataLength+=r.length)}),n.then(()=>e)}concat(){return this[Wr]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Wr]?Promise.reject(new Error("cannot concat in objectMode")):this[ko]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,n)=>{this.on(jr,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>e())})}[QJ](){return{next:()=>{let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[nc])return Promise.resolve({done:!0});let r=null,o=null,i=l=>{this.removeListener("data",s),this.removeListener("end",a),o(l)},s=l=>{this.removeListener("error",i),this.removeListener("end",a),this.pause(),r({value:l,done:!!this[nc]})},a=()=>{this.removeListener("error",i),this.removeListener("data",s),r({done:!0})},c=()=>i(new Error("stream destroyed"));return new Promise((l,u)=>{o=u,r=l,this.once(jr,c),this.once("error",i),this.once("end",a),this.once("data",s)})}}}[eX](){return{next:()=>{let n=this.read();return{value:n,done:n===null}}}}destroy(e){return this[jr]?(e?this.emit("error",e):this.emit(jr),this):(this[jr]=!0,this.buffer.length=0,this[sr]=0,typeof this.close=="function"&&!this[xE]&&this.close(),e?this.emit("error",e):this.emit(jr),this)}static isStream(e){return!!e&&(e instanceof ZU||e instanceof qU||e instanceof ZJ&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var Km=M(Zg=>{"use strict";var oX=eM(),iX=require("events").EventEmitter,No=require("fs"),Pb=No.writev;if(!Pb){let t=process.binding("fs"),e=t.FSReqWrap||t.FSReqCallback;Pb=(n,r,o,i)=>{let s=(c,l)=>i(c,l,r),a=new e;a.oncomplete=s,t.writeBuffers(n,r,o,a)}}var Gm=Symbol("_autoClose"),ss=Symbol("_close"),Xg=Symbol("_ended"),Et=Symbol("_fd"),tM=Symbol("_finished"),vl=Symbol("_flags"),Db=Symbol("_flush"),bb=Symbol("_handleChunk"),Tb=Symbol("_makeBuf"),kE=Symbol("_mode"),PE=Symbol("_needDrain"),Ym=Symbol("_onerror"),zm=Symbol("_onopen"),Ib=Symbol("_onread"),jm=Symbol("_onwrite"),wl=Symbol("_open"),sc=Symbol("_path"),Ef=Symbol("_pos"),Xs=Symbol("_queue"),Vm=Symbol("_read"),nM=Symbol("_readSize"),gl=Symbol("_reading"),bE=Symbol("_remain"),rM=Symbol("_size"),TE=Symbol("_write"),Wm=Symbol("_writing"),RE=Symbol("_defaultFlag"),qm=Symbol("_errored"),NE=class extends oX{constructor(e,n){if(n=n||{},super(n),this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[qm]=!1,this[Et]=typeof n.fd=="number"?n.fd:null,this[sc]=e,this[nM]=n.readSize||16*1024*1024,this[gl]=!1,this[rM]=typeof n.size=="number"?n.size:1/0,this[bE]=this[rM],this[Gm]=typeof n.autoClose=="boolean"?n.autoClose:!0,typeof this[Et]=="number"?this[Vm]():this[wl]()}get fd(){return this[Et]}get path(){return this[sc]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[wl](){No.open(this[sc],"r",(e,n)=>this[zm](e,n))}[zm](e,n){e?this[Ym](e):(this[Et]=n,this.emit("open",n),this[Vm]())}[Tb](){return Buffer.allocUnsafe(Math.min(this[nM],this[bE]))}[Vm](){if(!this[gl]){this[gl]=!0;let e=this[Tb]();if(e.length===0)return process.nextTick(()=>this[Ib](null,0,e));No.read(this[Et],e,0,e.length,null,(n,r,o)=>this[Ib](n,r,o))}}[Ib](e,n,r){this[gl]=!1,e?this[Ym](e):this[bb](n,r)&&this[Vm]()}[ss](){if(this[Gm]&&typeof this[Et]=="number"){let e=this[Et];this[Et]=null,No.close(e,n=>n?this.emit("error",n):this.emit("close"))}}[Ym](e){this[gl]=!0,this[ss](),this.emit("error",e)}[bb](e,n){let r=!1;return this[bE]-=e,e>0&&(r=super.write(e<n.length?n.slice(0,e):n)),(e===0||this[bE]<=0)&&(r=!1,this[ss](),super.end()),r}emit(e,n){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[Et]=="number"&&this[Vm]();break;case"error":return this[qm]?void 0:(this[qm]=!0,super.emit(e,n));default:return super.emit(e,n)}}},Rb=class extends NE{[wl](){let e=!0;try{this[zm](null,No.openSync(this[sc],"r")),e=!1}finally{e&&this[ss]()}}[Vm](){let e=!0;try{if(!this[gl]){this[gl]=!0;do{let n=this[Tb](),r=n.length===0?0:No.readSync(this[Et],n,0,n.length,null);if(!this[bb](r,n))break}while(!0);this[gl]=!1}e=!1}finally{e&&this[ss]()}}[ss](){if(this[Gm]&&typeof this[Et]=="number"){let e=this[Et];this[Et]=null,No.closeSync(e),this.emit("close")}}},LE=class extends iX{constructor(e,n){n=n||{},super(n),this.readable=!1,this.writable=!0,this[qm]=!1,this[Wm]=!1,this[Xg]=!1,this[PE]=!1,this[Xs]=[],this[sc]=e,this[Et]=typeof n.fd=="number"?n.fd:null,this[kE]=n.mode===void 0?438:n.mode,this[Ef]=typeof n.start=="number"?n.start:null,this[Gm]=typeof n.autoClose=="boolean"?n.autoClose:!0;let r=this[Ef]!==null?"r+":"w";this[RE]=n.flags===void 0,this[vl]=this[RE]?r:n.flags,this[Et]===null&&this[wl]()}emit(e,n){if(e==="error"){if(this[qm])return;this[qm]=!0}return super.emit(e,n)}get fd(){return this[Et]}get path(){return this[sc]}[Ym](e){this[ss](),this[Wm]=!0,this.emit("error",e)}[wl](){No.open(this[sc],this[vl],this[kE],(e,n)=>this[zm](e,n))}[zm](e,n){this[RE]&&this[vl]==="r+"&&e&&e.code==="ENOENT"?(this[vl]="w",this[wl]()):e?this[Ym](e):(this[Et]=n,this.emit("open",n),this[Db]())}end(e,n){return e&&this.write(e,n),this[Xg]=!0,!this[Wm]&&!this[Xs].length&&typeof this[Et]=="number"&&this[jm](null,0),this}write(e,n){return typeof e=="string"&&(e=Buffer.from(e,n)),this[Xg]?(this.emit("error",new Error("write() after end()")),!1):this[Et]===null||this[Wm]||this[Xs].length?(this[Xs].push(e),this[PE]=!0,!1):(this[Wm]=!0,this[TE](e),!0)}[TE](e){No.write(this[Et],e,0,e.length,this[Ef],(n,r)=>this[jm](n,r))}[jm](e,n){e?this[Ym](e):(this[Ef]!==null&&(this[Ef]+=n),this[Xs].length?this[Db]():(this[Wm]=!1,this[Xg]&&!this[tM]?(this[tM]=!0,this[ss](),this.emit("finish")):this[PE]&&(this[PE]=!1,this.emit("drain"))))}[Db](){if(this[Xs].length===0)this[Xg]&&this[jm](null,0);else if(this[Xs].length===1)this[TE](this[Xs].pop());else{let e=this[Xs];this[Xs]=[],Pb(this[Et],e,this[Ef],(n,r)=>this[jm](n,r))}}[ss](){if(this[Gm]&&typeof this[Et]=="number"){let e=this[Et];this[Et]=null,No.close(e,n=>n?this.emit("error",n):this.emit("close"))}}},kb=class extends LE{[wl](){let e;if(this[RE]&&this[vl]==="r+")try{e=No.openSync(this[sc],this[vl],this[kE])}catch(n){if(n.code==="ENOENT")return this[vl]="w",this[wl]();throw n}else e=No.openSync(this[sc],this[vl],this[kE]);this[zm](null,e)}[ss](){if(this[Gm]&&typeof this[Et]=="number"){let e=this[Et];this[Et]=null,No.closeSync(e),this.emit("close")}}[TE](e){let n=!0;try{this[jm](null,No.writeSync(this[Et],e,0,e.length,this[Ef])),n=!1}finally{if(n)try{this[ss]()}catch{}}}};Zg.ReadStream=NE;Zg.ReadStreamSync=Rb;Zg.WriteStream=LE;Zg.WriteStreamSync=kb});var HE=M((Lwe,mM)=>{"use strict";var sX=aE(),oM=Mm(),aX=require("events"),cX=lb(),lX=1024*1024,uX=oE(),iM=sE(),sM=HP(),{nextTick:fX}=require("process"),Nb=Buffer.from([31,139]),Ii=Symbol("state"),Sf=Symbol("writeEntry"),ac=Symbol("readEntry"),Lb=Symbol("nextEntry"),aM=Symbol("processEntry"),Pi=Symbol("extendedHeader"),Qg=Symbol("globalExtendedHeader"),yl=Symbol("meta"),cM=Symbol("emitMeta"),Rt=Symbol("buffer"),cc=Symbol("queue"),Cl=Symbol("ended"),lM=Symbol("emittedEnd"),xf=Symbol("emit"),ar=Symbol("unzip"),AE=Symbol("consumeChunk"),FE=Symbol("consumeChunkSub"),Ab=Symbol("consumeBody"),uM=Symbol("consumeMeta"),fM=Symbol("consumeHeader"),OE=Symbol("consuming"),Fb=Symbol("bufferConcat"),Ob=Symbol("maybeEnd"),ev=Symbol("writing"),El=Symbol("aborted"),UE=Symbol("onDone"),_f=Symbol("sawValidEntry"),ME=Symbol("sawNullBlock"),$E=Symbol("sawEOF"),dM=Symbol("closeStream"),dX=t=>!0;mM.exports=sX(class extends aX{constructor(e){e=e||{},super(e),this.file=e.file||"",this[_f]=null,this.on(UE,r=>{(this[Ii]==="begin"||this[_f]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(UE,e.ondone):this.on(UE,r=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||lX,this.filter=typeof e.filter=="function"?e.filter:dX;let n=e.file&&(e.file.endsWith(".tar.br")||e.file.endsWith(".tbr"));this.brotli=!e.gzip&&e.brotli!==void 0?e.brotli:n?void 0:!1,this.writable=!0,this.readable=!1,this[cc]=new cX,this[Rt]=null,this[ac]=null,this[Sf]=null,this[Ii]="begin",this[yl]="",this[Pi]=null,this[Qg]=null,this[Cl]=!1,this[ar]=null,this[El]=!1,this[ME]=!1,this[$E]=!1,this.on("end",()=>this[dM]()),typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[fM](e,n){this[_f]===null&&(this[_f]=!1);let r;try{r=new oM(e,n,this[Pi],this[Qg])}catch(o){return this.warn("TAR_ENTRY_INVALID",o)}if(r.nullBlock)this[ME]?(this[$E]=!0,this[Ii]==="begin"&&(this[Ii]="header"),this[xf]("eof")):(this[ME]=!0,this[xf]("nullBlock"));else if(this[ME]=!1,!r.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:r});else if(!r.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:r});else{let o=r.type;if(/^(Symbolic)?Link$/.test(o)&&!r.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:r});else if(!/^(Symbolic)?Link$/.test(o)&&r.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:r});else{let i=this[Sf]=new uX(r,this[Pi],this[Qg]);if(!this[_f])if(i.remain){let s=()=>{i.invalid||(this[_f]=!0)};i.on("end",s)}else this[_f]=!0;i.meta?i.size>this.maxMetaEntrySize?(i.ignore=!0,this[xf]("ignoredEntry",i),this[Ii]="ignore",i.resume()):i.size>0&&(this[yl]="",i.on("data",s=>this[yl]+=s),this[Ii]="meta"):(this[Pi]=null,i.ignore=i.ignore||!this.filter(i.path,i),i.ignore?(this[xf]("ignoredEntry",i),this[Ii]=i.remain?"ignore":"header",i.resume()):(i.remain?this[Ii]="body":(this[Ii]="header",i.end()),this[ac]?this[cc].push(i):(this[cc].push(i),this[Lb]())))}}}[dM](){fX(()=>this.emit("close"))}[aM](e){let n=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[ac]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",r=>this[Lb]()),n=!1)):(this[ac]=null,n=!1),n}[Lb](){do;while(this[aM](this[cc].shift()));if(!this[cc].length){let e=this[ac];!e||e.flowing||e.size===e.remain?this[ev]||this.emit("drain"):e.once("drain",r=>this.emit("drain"))}}[Ab](e,n){let r=this[Sf],o=r.blockRemain,i=o>=e.length&&n===0?e:e.slice(n,n+o);return r.write(i),r.blockRemain||(this[Ii]="header",this[Sf]=null,r.end()),i.length}[uM](e,n){let r=this[Sf],o=this[Ab](e,n);return this[Sf]||this[cM](r),o}[xf](e,n,r){!this[cc].length&&!this[ac]?this.emit(e,n,r):this[cc].push([e,n,r])}[cM](e){switch(this[xf]("meta",this[yl]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[Pi]=iM.parse(this[yl],this[Pi],!1);break;case"GlobalExtendedHeader":this[Qg]=iM.parse(this[yl],this[Qg],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[Pi]=this[Pi]||Object.create(null),this[Pi].path=this[yl].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[Pi]=this[Pi]||Object.create(null),this[Pi].linkpath=this[yl].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[El]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[El])return;if((this[ar]===null||this.brotli===void 0&&this[ar]===!1)&&e){if(this[Rt]&&(e=Buffer.concat([this[Rt],e]),this[Rt]=null),e.length<Nb.length)return this[Rt]=e,!0;for(let i=0;this[ar]===null&&i<Nb.length;i++)e[i]!==Nb[i]&&(this[ar]=!1);let o=this.brotli===void 0;if(this[ar]===!1&&o)if(e.length<512)if(this[Cl])this.brotli=!0;else return this[Rt]=e,!0;else try{new oM(e.slice(0,512)),this.brotli=!1}catch{this.brotli=!0}if(this[ar]===null||this[ar]===!1&&this.brotli){let i=this[Cl];this[Cl]=!1,this[ar]=this[ar]===null?new sM.Unzip:new sM.BrotliDecompress,this[ar].on("data",a=>this[AE](a)),this[ar].on("error",a=>this.abort(a)),this[ar].on("end",a=>{this[Cl]=!0,this[AE]()}),this[ev]=!0;let s=this[ar][i?"end":"write"](e);return this[ev]=!1,s}}this[ev]=!0,this[ar]?this[ar].write(e):this[AE](e),this[ev]=!1;let r=this[cc].length?!1:this[ac]?this[ac].flowing:!0;return!r&&!this[cc].length&&this[ac].once("drain",o=>this.emit("drain")),r}[Fb](e){e&&!this[El]&&(this[Rt]=this[Rt]?Buffer.concat([this[Rt],e]):e)}[Ob](){if(this[Cl]&&!this[lM]&&!this[El]&&!this[OE]){this[lM]=!0;let e=this[Sf];if(e&&e.blockRemain){let n=this[Rt]?this[Rt].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${n} available)`,{entry:e}),this[Rt]&&e.write(this[Rt]),e.end()}this[xf](UE)}}[AE](e){if(this[OE])this[Fb](e);else if(!e&&!this[Rt])this[Ob]();else{if(this[OE]=!0,this[Rt]){this[Fb](e);let n=this[Rt];this[Rt]=null,this[FE](n)}else this[FE](e);for(;this[Rt]&&this[Rt].length>=512&&!this[El]&&!this[$E];){let n=this[Rt];this[Rt]=null,this[FE](n)}this[OE]=!1}(!this[Rt]||this[Cl])&&this[Ob]()}[FE](e){let n=0,r=e.length;for(;n+512<=r&&!this[El]&&!this[$E];)switch(this[Ii]){case"begin":case"header":this[fM](e,n),n+=512;break;case"ignore":case"body":n+=this[Ab](e,n);break;case"meta":n+=this[uM](e,n);break;default:throw new Error("invalid state: "+this[Ii])}n<r&&(this[Rt]?this[Rt]=Buffer.concat([e.slice(n),this[Rt]]):this[Rt]=e.slice(n))}end(e){this[El]||(this[ar]?this[ar].end(e):(this[Cl]=!0,this.brotli===void 0&&(e=e||Buffer.alloc(0)),this.write(e)))}})});var BE=M((Awe,vM)=>{"use strict";var mX=km(),hM=HE(),Jm=require("fs"),pX=Km(),pM=require("path"),Ub=$m();vM.exports=(t,e,n)=>{typeof t=="function"?(n=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(n=e,e=null),e?e=Array.from(e):e=[];let r=mX(t);if(r.sync&&typeof n=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof n=="function")throw new TypeError("callback only supported with file option");return e.length&&gX(r,e),r.noResume||hX(r),r.file&&r.sync?vX(r):r.file?wX(r,n):gM(r)};var hX=t=>{let e=t.onentry;t.onentry=e?n=>{e(n),n.resume()}:n=>n.resume()},gX=(t,e)=>{let n=new Map(e.map(i=>[Ub(i),!0])),r=t.filter,o=(i,s)=>{let a=s||pM.parse(i).root||".",c=i===a?!1:n.has(i)?n.get(i):o(pM.dirname(i),a);return n.set(i,c),c};t.filter=r?(i,s)=>r(i,s)&&o(Ub(i)):i=>o(Ub(i))},vX=t=>{let e=gM(t),n=t.file,r=!0,o;try{let i=Jm.statSync(n),s=t.maxReadSize||16*1024*1024;if(i.size<s)e.end(Jm.readFileSync(n));else{let a=0,c=Buffer.allocUnsafe(s);for(o=Jm.openSync(n,"r");a<i.size;){let l=Jm.readSync(o,c,0,s,a);a+=l,e.write(c.slice(0,l))}e.end()}r=!1}finally{if(r&&o)try{Jm.closeSync(o)}catch{}}},wX=(t,e)=>{let n=new hM(t),r=t.maxReadSize||16*1024*1024,o=t.file,i=new Promise((s,a)=>{n.on("error",a),n.on("end",s),Jm.stat(o,(c,l)=>{if(c)a(c);else{let u=new pX.ReadStream(o,{readSize:r,size:l.size});u.on("error",a),u.pipe(n)}})});return e?i.then(e,e):i},gM=t=>new hM(t)});var xM=M((Fwe,SM)=>{"use strict";var yX=km(),WE=EE(),wM=Km(),yM=BE(),CM=require("path");SM.exports=(t,e,n)=>{if(typeof e=="function"&&(n=e),Array.isArray(t)&&(e=t,t={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let r=yX(t);if(r.sync&&typeof n=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof n=="function")throw new TypeError("callback only supported with file option");return r.file&&r.sync?CX(r,e):r.file?EX(r,e,n):r.sync?SX(r,e):xX(r,e)};var CX=(t,e)=>{let n=new WE.Sync(t),r=new wM.WriteStreamSync(t.file,{mode:t.mode||438});n.pipe(r),EM(n,e)},EX=(t,e,n)=>{let r=new WE(t),o=new wM.WriteStream(t.file,{mode:t.mode||438});r.pipe(o);let i=new Promise((s,a)=>{o.on("error",a),o.on("close",s),r.on("error",a)});return Mb(r,e),n?i.then(n,n):i},EM=(t,e)=>{e.forEach(n=>{n.charAt(0)==="@"?yM({file:CM.resolve(t.cwd,n.slice(1)),sync:!0,noResume:!0,onentry:r=>t.add(r)}):t.add(n)}),t.end()},Mb=(t,e)=>{for(;e.length;){let n=e.shift();if(n.charAt(0)==="@")return yM({file:CM.resolve(t.cwd,n.slice(1)),noResume:!0,onentry:r=>t.add(r)}).then(r=>Mb(t,e));t.add(n)}t.end()},SX=(t,e)=>{let n=new WE.Sync(t);return EM(n,e),n},xX=(t,e)=>{let n=new WE(t);return Mb(n,e),n}});var $b=M((Owe,RM)=>{"use strict";var _X=km(),_M=EE(),ei=require("fs"),DM=Km(),IM=BE(),PM=require("path"),bM=Mm();RM.exports=(t,e,n)=>{let r=_X(t);if(!r.file)throw new TypeError("file is required");if(r.gzip||r.brotli||r.file.endsWith(".br")||r.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),r.sync?DX(r,e):PX(r,e,n)};var DX=(t,e)=>{let n=new _M.Sync(t),r=!0,o,i;try{try{o=ei.openSync(t.file,"r+")}catch(c){if(c.code==="ENOENT")o=ei.openSync(t.file,"w+");else throw c}let s=ei.fstatSync(o),a=Buffer.alloc(512);e:for(i=0;i<s.size;i+=512){for(let u=0,f=0;u<512;u+=f){if(f=ei.readSync(o,a,u,a.length-u,i+u),i===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!f)break e}let c=new bM(a);if(!c.cksumValid)break;let l=512*Math.ceil(c.size/512);if(i+l+512>s.size)break;i+=l,t.mtimeCache&&t.mtimeCache.set(c.path,c.mtime)}r=!1,IX(t,n,i,o,e)}finally{if(r)try{ei.closeSync(o)}catch{}}},IX=(t,e,n,r,o)=>{let i=new DM.WriteStreamSync(t.file,{fd:r,start:n});e.pipe(i),bX(e,o)},PX=(t,e,n)=>{e=Array.from(e);let r=new _M(t),o=(s,a,c)=>{let l=(p,g)=>{p?ei.close(s,h=>c(p)):c(null,g)},u=0;if(a===0)return l(null,0);let f=0,m=Buffer.alloc(512),d=(p,g)=>{if(p)return l(p);if(f+=g,f<512&&g)return ei.read(s,m,f,m.length-f,u+f,d);if(u===0&&m[0]===31&&m[1]===139)return l(new Error("cannot append to compressed archives"));if(f<512)return l(null,u);let h=new bM(m);if(!h.cksumValid)return l(null,u);let v=512*Math.ceil(h.size/512);if(u+v+512>a||(u+=v+512,u>=a))return l(null,u);t.mtimeCache&&t.mtimeCache.set(h.path,h.mtime),f=0,ei.read(s,m,0,512,u,d)};ei.read(s,m,0,512,u,d)},i=new Promise((s,a)=>{r.on("error",a);let c="r+",l=(u,f)=>{if(u&&u.code==="ENOENT"&&c==="r+")return c="w+",ei.open(t.file,c,l);if(u)return a(u);ei.fstat(f,(m,d)=>{if(m)return ei.close(f,()=>a(m));o(f,d.size,(p,g)=>{if(p)return a(p);let h=new DM.WriteStream(t.file,{fd:f,start:g});r.pipe(h),h.on("error",a),h.on("close",s),TM(r,e)})})};ei.open(t.file,c,l)});return n?i.then(n,n):i},bX=(t,e)=>{e.forEach(n=>{n.charAt(0)==="@"?IM({file:PM.resolve(t.cwd,n.slice(1)),sync:!0,noResume:!0,onentry:r=>t.add(r)}):t.add(n)}),t.end()},TM=(t,e)=>{for(;e.length;){let n=e.shift();if(n.charAt(0)==="@")return IM({file:PM.resolve(t.cwd,n.slice(1)),noResume:!0,onentry:r=>t.add(r)}).then(r=>TM(t,e));t.add(n)}t.end()}});var NM=M((Uwe,kM)=>{"use strict";var TX=km(),RX=$b();kM.exports=(t,e,n)=>{let r=TX(t);if(!r.file)throw new TypeError("file is required");if(r.gzip||r.brotli||r.file.endsWith(".br")||r.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),kX(r),RX(r,e,n)};var kX=t=>{let e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(n,r)=>e(n,r)&&!(t.mtimeCache.get(n)>r.mtime):(n,r)=>!(t.mtimeCache.get(n)>r.mtime)}});var FM=M((Mwe,AM)=>{var{promisify:LM}=require("util"),Sl=require("fs"),NX=t=>{if(!t)t={mode:511,fs:Sl};else if(typeof t=="object")t={mode:511,fs:Sl,...t};else if(typeof t=="number")t={mode:t,fs:Sl};else if(typeof t=="string")t={mode:parseInt(t,8),fs:Sl};else throw new TypeError("invalid options argument");return t.mkdir=t.mkdir||t.fs.mkdir||Sl.mkdir,t.mkdirAsync=LM(t.mkdir),t.stat=t.stat||t.fs.stat||Sl.stat,t.statAsync=LM(t.stat),t.statSync=t.statSync||t.fs.statSync||Sl.statSync,t.mkdirSync=t.mkdirSync||t.fs.mkdirSync||Sl.mkdirSync,t};AM.exports=NX});var UM=M(($we,OM)=>{var LX=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:AX,parse:FX}=require("path"),OX=t=>{if(/\0/.test(t))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:t,code:"ERR_INVALID_ARG_VALUE"});if(t=AX(t),LX==="win32"){let e=/[*|"<>?:]/,{root:n}=FX(t);if(e.test(t.substr(n.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};OM.exports=OX});var WM=M((Hwe,BM)=>{var{dirname:MM}=require("path"),$M=(t,e,n=void 0)=>n===e?Promise.resolve():t.statAsync(e).then(r=>r.isDirectory()?n:void 0,r=>r.code==="ENOENT"?$M(t,MM(e),e):void 0),HM=(t,e,n=void 0)=>{if(n!==e)try{return t.statSync(e).isDirectory()?n:void 0}catch(r){return r.code==="ENOENT"?HM(t,MM(e),e):void 0}};BM.exports={findMade:$M,findMadeSync:HM}});var Wb=M((Bwe,VM)=>{var{dirname:jM}=require("path"),Hb=(t,e,n)=>{e.recursive=!1;let r=jM(t);return r===t?e.mkdirAsync(t,e).catch(o=>{if(o.code!=="EISDIR")throw o}):e.mkdirAsync(t,e).then(()=>n||t,o=>{if(o.code==="ENOENT")return Hb(r,e).then(i=>Hb(t,e,i));if(o.code!=="EEXIST"&&o.code!=="EROFS")throw o;return e.statAsync(t).then(i=>{if(i.isDirectory())return n;throw o},()=>{throw o})})},Bb=(t,e,n)=>{let r=jM(t);if(e.recursive=!1,r===t)try{return e.mkdirSync(t,e)}catch(o){if(o.code!=="EISDIR")throw o;return}try{return e.mkdirSync(t,e),n||t}catch(o){if(o.code==="ENOENT")return Bb(t,e,Bb(r,e,n));if(o.code!=="EEXIST"&&o.code!=="EROFS")throw o;try{if(!e.statSync(t).isDirectory())throw o}catch{throw o}}};VM.exports={mkdirpManual:Hb,mkdirpManualSync:Bb}});var GM=M((Wwe,qM)=>{var{dirname:YM}=require("path"),{findMade:UX,findMadeSync:MX}=WM(),{mkdirpManual:$X,mkdirpManualSync:HX}=Wb(),BX=(t,e)=>(e.recursive=!0,YM(t)===t?e.mkdirAsync(t,e):UX(e,t).then(r=>e.mkdirAsync(t,e).then(()=>r).catch(o=>{if(o.code==="ENOENT")return $X(t,e);throw o}))),WX=(t,e)=>{if(e.recursive=!0,YM(t)===t)return e.mkdirSync(t,e);let r=MX(e,t);try{return e.mkdirSync(t,e),r}catch(o){if(o.code==="ENOENT")return HX(t,e);throw o}};qM.exports={mkdirpNative:BX,mkdirpNativeSync:WX}});var XM=M((jwe,JM)=>{var zM=require("fs"),jX=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,jb=jX.replace(/^v/,"").split("."),KM=+jb[0]>10||+jb[0]==10&&+jb[1]>=12,VX=KM?t=>t.mkdir===zM.mkdir:()=>!1,YX=KM?t=>t.mkdirSync===zM.mkdirSync:()=>!1;JM.exports={useNative:VX,useNativeSync:YX}});var r$=M((Vwe,n$)=>{var Xm=FM(),Zm=UM(),{mkdirpNative:ZM,mkdirpNativeSync:QM}=GM(),{mkdirpManual:e$,mkdirpManualSync:t$}=Wb(),{useNative:qX,useNativeSync:GX}=XM(),Qm=(t,e)=>(t=Zm(t),e=Xm(e),qX(e)?ZM(t,e):e$(t,e)),zX=(t,e)=>(t=Zm(t),e=Xm(e),GX(e)?QM(t,e):t$(t,e));Qm.sync=zX;Qm.native=(t,e)=>ZM(Zm(t),Xm(e));Qm.manual=(t,e)=>e$(Zm(t),Xm(e));Qm.nativeSync=(t,e)=>QM(Zm(t),Xm(e));Qm.manualSync=(t,e)=>t$(Zm(t),Xm(e));n$.exports=Qm});var u$=M((Ywe,l$)=>{"use strict";var bi=require("fs"),Df=require("path"),KX=bi.lchown?"lchown":"chown",JX=bi.lchownSync?"lchownSync":"chownSync",i$=bi.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),o$=(t,e,n)=>{try{return bi[JX](t,e,n)}catch(r){if(r.code!=="ENOENT")throw r}},XX=(t,e,n)=>{try{return bi.chownSync(t,e,n)}catch(r){if(r.code!=="ENOENT")throw r}},ZX=i$?(t,e,n,r)=>o=>{!o||o.code!=="EISDIR"?r(o):bi.chown(t,e,n,r)}:(t,e,n,r)=>r,Vb=i$?(t,e,n)=>{try{return o$(t,e,n)}catch(r){if(r.code!=="EISDIR")throw r;XX(t,e,n)}}:(t,e,n)=>o$(t,e,n),QX=process.version,s$=(t,e,n)=>bi.readdir(t,e,n),eZ=(t,e)=>bi.readdirSync(t,e);/^v4\./.test(QX)&&(s$=(t,e,n)=>bi.readdir(t,n));var jE=(t,e,n,r)=>{bi[KX](t,e,n,ZX(t,e,n,o=>{r(o&&o.code!=="ENOENT"?o:null)}))},a$=(t,e,n,r,o)=>{if(typeof e=="string")return bi.lstat(Df.resolve(t,e),(i,s)=>{if(i)return o(i.code!=="ENOENT"?i:null);s.name=e,a$(t,s,n,r,o)});if(e.isDirectory())Yb(Df.resolve(t,e.name),n,r,i=>{if(i)return o(i);let s=Df.resolve(t,e.name);jE(s,n,r,o)});else{let i=Df.resolve(t,e.name);jE(i,n,r,o)}},Yb=(t,e,n,r)=>{s$(t,{withFileTypes:!0},(o,i)=>{if(o){if(o.code==="ENOENT")return r();if(o.code!=="ENOTDIR"&&o.code!=="ENOTSUP")return r(o)}if(o||!i.length)return jE(t,e,n,r);let s=i.length,a=null,c=l=>{if(!a){if(l)return r(a=l);if(--s===0)return jE(t,e,n,r)}};i.forEach(l=>a$(t,l,e,n,c))})},tZ=(t,e,n,r)=>{if(typeof e=="string")try{let o=bi.lstatSync(Df.resolve(t,e));o.name=e,e=o}catch(o){if(o.code==="ENOENT")return;throw o}e.isDirectory()&&c$(Df.resolve(t,e.name),n,r),Vb(Df.resolve(t,e.name),n,r)},c$=(t,e,n)=>{let r;try{r=eZ(t,{withFileTypes:!0})}catch(o){if(o.code==="ENOENT")return;if(o.code==="ENOTDIR"||o.code==="ENOTSUP")return Vb(t,e,n);throw o}return r&&r.length&&r.forEach(o=>tZ(t,o,e,n)),Vb(t,e,n)};l$.exports=Yb;Yb.sync=c$});var p$=M((qwe,qb)=>{"use strict";var f$=r$(),Ti=require("fs"),VE=require("path"),d$=u$(),as=Om(),YE=class extends Error{constructor(e,n){super("Cannot extract through symbolic link"),this.path=n,this.symlink=e}get name(){return"SylinkError"}},qE=class extends Error{constructor(e,n){super(n+": Cannot cd into '"+e+"'"),this.path=e,this.code=n}get name(){return"CwdError"}},GE=(t,e)=>t.get(as(e)),tv=(t,e,n)=>t.set(as(e),n),nZ=(t,e)=>{Ti.stat(t,(n,r)=>{(n||!r.isDirectory())&&(n=new qE(t,n&&n.code||"ENOTDIR")),e(n)})};qb.exports=(t,e,n)=>{t=as(t);let r=e.umask,o=e.mode|448,i=(o&r)!==0,s=e.uid,a=e.gid,c=typeof s=="number"&&typeof a=="number"&&(s!==e.processUid||a!==e.processGid),l=e.preserve,u=e.unlink,f=e.cache,m=as(e.cwd),d=(h,v)=>{h?n(h):(tv(f,t,!0),v&&c?d$(v,s,a,C=>d(C)):i?Ti.chmod(t,o,n):n())};if(f&&GE(f,t)===!0)return d();if(t===m)return nZ(t,d);if(l)return f$(t,{mode:o}).then(h=>d(null,h),d);let g=as(VE.relative(m,t)).split("/");zE(m,g,o,f,u,m,null,d)};var zE=(t,e,n,r,o,i,s,a)=>{if(!e.length)return a(null,s);let c=e.shift(),l=as(VE.resolve(t+"/"+c));if(GE(r,l))return zE(l,e,n,r,o,i,s,a);Ti.mkdir(l,n,m$(l,e,n,r,o,i,s,a))},m$=(t,e,n,r,o,i,s,a)=>c=>{c?Ti.lstat(t,(l,u)=>{if(l)l.path=l.path&&as(l.path),a(l);else if(u.isDirectory())zE(t,e,n,r,o,i,s,a);else if(o)Ti.unlink(t,f=>{if(f)return a(f);Ti.mkdir(t,n,m$(t,e,n,r,o,i,s,a))});else{if(u.isSymbolicLink())return a(new YE(t,t+"/"+e.join("/")));a(c)}}):(s=s||t,zE(t,e,n,r,o,i,s,a))},rZ=t=>{let e=!1,n="ENOTDIR";try{e=Ti.statSync(t).isDirectory()}catch(r){n=r.code}finally{if(!e)throw new qE(t,n)}};qb.exports.sync=(t,e)=>{t=as(t);let n=e.umask,r=e.mode|448,o=(r&n)!==0,i=e.uid,s=e.gid,a=typeof i=="number"&&typeof s=="number"&&(i!==e.processUid||s!==e.processGid),c=e.preserve,l=e.unlink,u=e.cache,f=as(e.cwd),m=h=>{tv(u,t,!0),h&&a&&d$.sync(h,i,s),o&&Ti.chmodSync(t,r)};if(u&&GE(u,t)===!0)return m();if(t===f)return rZ(f),m();if(c)return m(f$.sync(t,r));let p=as(VE.relative(f,t)).split("/"),g=null;for(let h=p.shift(),v=f;h&&(v+="/"+h);h=p.shift())if(v=as(VE.resolve(v)),!GE(u,v))try{Ti.mkdirSync(v,r),g=g||v,tv(u,v,!0)}catch{let w=Ti.lstatSync(v);if(w.isDirectory()){tv(u,v,!0);continue}else if(l){Ti.unlinkSync(v),Ti.mkdirSync(v,r),g=g||v,tv(u,v,!0);continue}else if(w.isSymbolicLink())return new YE(v,v+"/"+p.join("/"))}return m(g)}});var zb=M((Gwe,h$)=>{var Gb=Object.create(null),{hasOwnProperty:oZ}=Object.prototype;h$.exports=t=>(oZ.call(Gb,t)||(Gb[t]=t.normalize("NFD")),Gb[t])});var y$=M((zwe,w$)=>{var g$=require("assert"),iZ=zb(),sZ=$m(),{join:v$}=require("path"),aZ=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,cZ=aZ==="win32";w$.exports=()=>{let t=new Map,e=new Map,n=l=>l.split("/").slice(0,-1).reduce((f,m)=>(f.length&&(m=v$(f[f.length-1],m)),f.push(m||"/"),f),[]),r=new Set,o=l=>{let u=e.get(l);if(!u)throw new Error("function does not have any path reservations");return{paths:u.paths.map(f=>t.get(f)),dirs:[...u.dirs].map(f=>t.get(f))}},i=l=>{let{paths:u,dirs:f}=o(l);return u.every(m=>m[0]===l)&&f.every(m=>m[0]instanceof Set&&m[0].has(l))},s=l=>r.has(l)||!i(l)?!1:(r.add(l),l(()=>a(l)),!0),a=l=>{if(!r.has(l))return!1;let{paths:u,dirs:f}=e.get(l),m=new Set;return u.forEach(d=>{let p=t.get(d);g$.equal(p[0],l),p.length===1?t.delete(d):(p.shift(),typeof p[0]=="function"?m.add(p[0]):p[0].forEach(g=>m.add(g)))}),f.forEach(d=>{let p=t.get(d);g$(p[0]instanceof Set),p[0].size===1&&p.length===1?t.delete(d):p[0].size===1?(p.shift(),m.add(p[0])):p[0].delete(l)}),r.delete(l),m.forEach(d=>s(d)),!0};return{check:i,reserve:(l,u)=>{l=cZ?["win32 parallelization disabled"]:l.map(m=>sZ(v$(iZ(m))).toLowerCase());let f=new Set(l.map(m=>n(m)).reduce((m,d)=>m.concat(d)));return e.set(u,{dirs:f,paths:l}),l.forEach(m=>{let d=t.get(m);d?d.push(u):t.set(m,[u])}),f.forEach(m=>{let d=t.get(m);d?d[d.length-1]instanceof Set?d[d.length-1].add(u):d.push(new Set([u])):t.set(m,[new Set([u])])}),s(u)}}}});var S$=M((Kwe,E$)=>{var lZ=process.env.__FAKE_PLATFORM__||process.platform,uZ=lZ==="win32",fZ=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:dZ,O_TRUNC:mZ,O_WRONLY:pZ,UV_FS_O_FILEMAP:C$=0}=fZ.constants,hZ=uZ&&!!C$,gZ=512*1024,vZ=C$|mZ|dZ|pZ;E$.exports=hZ?t=>t<gZ?vZ:"w":()=>"w"});var rT=M((Jwe,O$)=>{"use strict";var wZ=require("assert"),yZ=HE(),dt=require("fs"),CZ=Km(),lc=require("path"),L$=p$(),x$=JP(),EZ=y$(),SZ=XP(),Ri=Om(),xZ=$m(),_Z=zb(),_$=Symbol("onEntry"),Xb=Symbol("checkFs"),D$=Symbol("checkFs2"),XE=Symbol("pruneCache"),Zb=Symbol("isReusable"),ki=Symbol("makeFs"),Qb=Symbol("file"),eT=Symbol("directory"),ZE=Symbol("link"),I$=Symbol("symlink"),P$=Symbol("hardlink"),b$=Symbol("unsupported"),T$=Symbol("checkPath"),xl=Symbol("mkdir"),Vr=Symbol("onError"),KE=Symbol("pending"),R$=Symbol("pend"),ep=Symbol("unpend"),Kb=Symbol("ended"),Jb=Symbol("maybeClose"),tT=Symbol("skip"),nv=Symbol("doChown"),rv=Symbol("uid"),ov=Symbol("gid"),iv=Symbol("checkedCwd"),A$=require("crypto"),F$=S$(),DZ=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,sv=DZ==="win32",IZ=1024,PZ=(t,e)=>{if(!sv)return dt.unlink(t,e);let n=t+".DELETE."+A$.randomBytes(16).toString("hex");dt.rename(t,n,r=>{if(r)return e(r);dt.unlink(n,e)})},bZ=t=>{if(!sv)return dt.unlinkSync(t);let e=t+".DELETE."+A$.randomBytes(16).toString("hex");dt.renameSync(t,e),dt.unlinkSync(e)},k$=(t,e,n)=>t===t>>>0?t:e===e>>>0?e:n,N$=t=>xZ(Ri(_Z(t))).toLowerCase(),TZ=(t,e)=>{e=N$(e);for(let n of t.keys()){let r=N$(n);(r===e||r.indexOf(e+"/")===0)&&t.delete(n)}},RZ=t=>{for(let e of t.keys())t.delete(e)},av=class extends yZ{constructor(e){if(e||(e={}),e.ondone=n=>{this[Kb]=!0,this[Jb]()},super(e),this[iv]=!1,this.reservations=EZ(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[KE]=0,this[Kb]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.maxDepth=typeof e.maxDepth=="number"?e.maxDepth:IZ,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||sv,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=Ri(lc.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",n=>this[_$](n))}warn(e,n,r={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(r.recoverable=!1),super.warn(e,n,r)}[Jb](){this[Kb]&&this[KE]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[T$](e){let n=Ri(e.path),r=n.split("/");if(this.strip){if(r.length<this.strip)return!1;if(e.type==="Link"){let o=Ri(e.linkpath).split("/");if(o.length>=this.strip)e.linkpath=o.slice(this.strip).join("/");else return!1}r.splice(0,this.strip),e.path=r.join("/")}if(isFinite(this.maxDepth)&&r.length>this.maxDepth)return this.warn("TAR_ENTRY_ERROR","path excessively deep",{entry:e,path:n,depth:r.length,maxDepth:this.maxDepth}),!1;if(!this.preservePaths){if(r.includes("..")||sv&&/^[a-z]:\.\.$/i.test(r[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:n}),!1;let[o,i]=SZ(n);o&&(e.path=i,this.warn("TAR_ENTRY_INFO",`stripping ${o} from absolute path`,{entry:e,path:n}))}if(lc.isAbsolute(e.path)?e.absolute=Ri(lc.resolve(e.path)):e.absolute=Ri(lc.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:Ri(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:o}=lc.win32.parse(e.absolute);e.absolute=o+x$.encode(e.absolute.slice(o.length));let{root:i}=lc.win32.parse(e.path);e.path=i+x$.encode(e.path.slice(i.length))}return!0}[_$](e){if(!this[T$](e))return e.resume();switch(wZ.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[Xb](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[b$](e)}}[Vr](e,n){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:n}),this[ep](),n.resume())}[xl](e,n,r){L$(Ri(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:n,noChmod:this.noChmod},r)}[nv](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[rv](e){return k$(this.uid,e.uid,this.processUid)}[ov](e){return k$(this.gid,e.gid,this.processGid)}[Qb](e,n){let r=e.mode&4095||this.fmode,o=new CZ.WriteStream(e.absolute,{flags:F$(e.size),mode:r,autoClose:!1});o.on("error",c=>{o.fd&&dt.close(o.fd,()=>{}),o.write=()=>!0,this[Vr](c,e),n()});let i=1,s=c=>{if(c){o.fd&&dt.close(o.fd,()=>{}),this[Vr](c,e),n();return}--i===0&&dt.close(o.fd,l=>{l?this[Vr](l,e):this[ep](),n()})};o.on("finish",c=>{let l=e.absolute,u=o.fd;if(e.mtime&&!this.noMtime){i++;let f=e.atime||new Date,m=e.mtime;dt.futimes(u,f,m,d=>d?dt.utimes(l,f,m,p=>s(p&&d)):s())}if(this[nv](e)){i++;let f=this[rv](e),m=this[ov](e);dt.fchown(u,f,m,d=>d?dt.chown(l,f,m,p=>s(p&&d)):s())}s()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",c=>{this[Vr](c,e),n()}),e.pipe(a)),a.pipe(o)}[eT](e,n){let r=e.mode&4095||this.dmode;this[xl](e.absolute,r,o=>{if(o){this[Vr](o,e),n();return}let i=1,s=a=>{--i===0&&(n(),this[ep](),e.resume())};e.mtime&&!this.noMtime&&(i++,dt.utimes(e.absolute,e.atime||new Date,e.mtime,s)),this[nv](e)&&(i++,dt.chown(e.absolute,this[rv](e),this[ov](e),s)),s()})}[b$](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[I$](e,n){this[ZE](e,e.linkpath,"symlink",n)}[P$](e,n){let r=Ri(lc.resolve(this.cwd,e.linkpath));this[ZE](e,r,"link",n)}[R$](){this[KE]++}[ep](){this[KE]--,this[Jb]()}[tT](e){this[ep](),e.resume()}[Zb](e,n){return e.type==="File"&&!this.unlink&&n.isFile()&&n.nlink<=1&&!sv}[Xb](e){this[R$]();let n=[e.path];e.linkpath&&n.push(e.linkpath),this.reservations.reserve(n,r=>this[D$](e,r))}[XE](e){e.type==="SymbolicLink"?RZ(this.dirCache):e.type!=="Directory"&&TZ(this.dirCache,e.absolute)}[D$](e,n){this[XE](e);let r=a=>{this[XE](e),n(a)},o=()=>{this[xl](this.cwd,this.dmode,a=>{if(a){this[Vr](a,e),r();return}this[iv]=!0,i()})},i=()=>{if(e.absolute!==this.cwd){let a=Ri(lc.dirname(e.absolute));if(a!==this.cwd)return this[xl](a,this.dmode,c=>{if(c){this[Vr](c,e),r();return}s()})}s()},s=()=>{dt.lstat(e.absolute,(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>e.mtime)){this[tT](e),r();return}if(a||this[Zb](e,c))return this[ki](null,e,r);if(c.isDirectory()){if(e.type==="Directory"){let l=!this.noChmod&&e.mode&&(c.mode&4095)!==e.mode,u=f=>this[ki](f,e,r);return l?dt.chmod(e.absolute,e.mode,u):u()}if(e.absolute!==this.cwd)return dt.rmdir(e.absolute,l=>this[ki](l,e,r))}if(e.absolute===this.cwd)return this[ki](null,e,r);PZ(e.absolute,l=>this[ki](l,e,r))})};this[iv]?i():o()}[ki](e,n,r){if(e){this[Vr](e,n),r();return}switch(n.type){case"File":case"OldFile":case"ContiguousFile":return this[Qb](n,r);case"Link":return this[P$](n,r);case"SymbolicLink":return this[I$](n,r);case"Directory":case"GNUDumpDir":return this[eT](n,r)}}[ZE](e,n,r,o){dt[r](n,e.absolute,i=>{i?this[Vr](i,e):(this[ep](),e.resume()),o()})}},JE=t=>{try{return[null,t()]}catch(e){return[e,null]}},nT=class extends av{[ki](e,n){return super[ki](e,n,()=>{})}[Xb](e){if(this[XE](e),!this[iv]){let i=this[xl](this.cwd,this.dmode);if(i)return this[Vr](i,e);this[iv]=!0}if(e.absolute!==this.cwd){let i=Ri(lc.dirname(e.absolute));if(i!==this.cwd){let s=this[xl](i,this.dmode);if(s)return this[Vr](s,e)}}let[n,r]=JE(()=>dt.lstatSync(e.absolute));if(r&&(this.keep||this.newer&&r.mtime>e.mtime))return this[tT](e);if(n||this[Zb](e,r))return this[ki](null,e);if(r.isDirectory()){if(e.type==="Directory"){let s=!this.noChmod&&e.mode&&(r.mode&4095)!==e.mode,[a]=s?JE(()=>{dt.chmodSync(e.absolute,e.mode)}):[];return this[ki](a,e)}let[i]=JE(()=>dt.rmdirSync(e.absolute));this[ki](i,e)}let[o]=e.absolute===this.cwd?[]:JE(()=>bZ(e.absolute));this[ki](o,e)}[Qb](e,n){let r=e.mode&4095||this.fmode,o=a=>{let c;try{dt.closeSync(i)}catch(l){c=l}(a||c)&&this[Vr](a||c,e),n()},i;try{i=dt.openSync(e.absolute,F$(e.size),r)}catch(a){return o(a)}let s=this.transform&&this.transform(e)||e;s!==e&&(s.on("error",a=>this[Vr](a,e)),e.pipe(s)),s.on("data",a=>{try{dt.writeSync(i,a,0,a.length)}catch(c){o(c)}}),s.on("end",a=>{let c=null;if(e.mtime&&!this.noMtime){let l=e.atime||new Date,u=e.mtime;try{dt.futimesSync(i,l,u)}catch(f){try{dt.utimesSync(e.absolute,l,u)}catch{c=f}}}if(this[nv](e)){let l=this[rv](e),u=this[ov](e);try{dt.fchownSync(i,l,u)}catch(f){try{dt.chownSync(e.absolute,l,u)}catch{c=c||f}}}o(c)})}[eT](e,n){let r=e.mode&4095||this.dmode,o=this[xl](e.absolute,r);if(o){this[Vr](o,e),n();return}if(e.mtime&&!this.noMtime)try{dt.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[nv](e))try{dt.chownSync(e.absolute,this[rv](e),this[ov](e))}catch{}n(),e.resume()}[xl](e,n){try{return L$.sync(Ri(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:n})}catch(r){return r}}[ZE](e,n,r,o){try{dt[r+"Sync"](n,e.absolute),o(),e.resume()}catch(i){return this[Vr](i,e)}}};av.Sync=nT;O$.exports=av});var B$=M((Xwe,H$)=>{"use strict";var kZ=km(),QE=rT(),M$=require("fs"),$$=Km(),U$=require("path"),oT=$m();H$.exports=(t,e,n)=>{typeof t=="function"?(n=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(n=e,e=null),e?e=Array.from(e):e=[];let r=kZ(t);if(r.sync&&typeof n=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof n=="function")throw new TypeError("callback only supported with file option");return e.length&&NZ(r,e),r.file&&r.sync?LZ(r):r.file?AZ(r,n):r.sync?FZ(r):OZ(r)};var NZ=(t,e)=>{let n=new Map(e.map(i=>[oT(i),!0])),r=t.filter,o=(i,s)=>{let a=s||U$.parse(i).root||".",c=i===a?!1:n.has(i)?n.get(i):o(U$.dirname(i),a);return n.set(i,c),c};t.filter=r?(i,s)=>r(i,s)&&o(oT(i)):i=>o(oT(i))},LZ=t=>{let e=new QE.Sync(t),n=t.file,r=M$.statSync(n),o=t.maxReadSize||16*1024*1024;new $$.ReadStreamSync(n,{readSize:o,size:r.size}).pipe(e)},AZ=(t,e)=>{let n=new QE(t),r=t.maxReadSize||16*1024*1024,o=t.file,i=new Promise((s,a)=>{n.on("error",a),n.on("close",s),M$.stat(o,(c,l)=>{if(c)a(c);else{let u=new $$.ReadStream(o,{readSize:r,size:l.size});u.on("error",a),u.pipe(n)}})});return e?i.then(e,e):i},FZ=t=>new QE.Sync(t),OZ=t=>new QE(t)});var eS=M(jn=>{"use strict";jn.c=jn.create=xM();jn.r=jn.replace=$b();jn.t=jn.list=BE();jn.u=jn.update=NM();jn.x=jn.extract=B$();jn.Pack=EE();jn.Unpack=rT();jn.Parse=HE();jn.ReadEntry=oE();jn.WriteEntry=ab();jn.Header=Mm();jn.Pax=sE();jn.types=jP()});var cv=M((Qwe,W$)=>{"use strict";var UZ="2.0.0",MZ=Number.MAX_SAFE_INTEGER||9007199254740991,$Z=16,HZ=250,BZ=["major","premajor","minor","preminor","patch","prepatch","prerelease"];W$.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:$Z,MAX_SAFE_BUILD_LENGTH:HZ,MAX_SAFE_INTEGER:MZ,RELEASE_TYPES:BZ,SEMVER_SPEC_VERSION:UZ,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var lv=M((eye,j$)=>{"use strict";var WZ=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};j$.exports=WZ});var tp=M((Zs,V$)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:iT,MAX_SAFE_BUILD_LENGTH:jZ,MAX_LENGTH:VZ}=cv(),YZ=lv();Zs=V$.exports={};var qZ=Zs.re=[],GZ=Zs.safeRe=[],he=Zs.src=[],zZ=Zs.safeSrc=[],ge=Zs.t={},KZ=0,sT="[a-zA-Z0-9-]",JZ=[["\\s",1],["\\d",VZ],[sT,jZ]],XZ=t=>{for(let[e,n]of JZ)t=t.split(`${e}*`).join(`${e}{0,${n}}`).split(`${e}+`).join(`${e}{1,${n}}`);return t},je=(t,e,n)=>{let r=XZ(e),o=KZ++;YZ(t,o,e),ge[t]=o,he[o]=e,zZ[o]=r,qZ[o]=new RegExp(e,n?"g":void 0),GZ[o]=new RegExp(r,n?"g":void 0)};je("NUMERICIDENTIFIER","0|[1-9]\\d*");je("NUMERICIDENTIFIERLOOSE","\\d+");je("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${sT}*`);je("MAINVERSION",`(${he[ge.NUMERICIDENTIFIER]})\\.(${he[ge.NUMERICIDENTIFIER]})\\.(${he[ge.NUMERICIDENTIFIER]})`);je("MAINVERSIONLOOSE",`(${he[ge.NUMERICIDENTIFIERLOOSE]})\\.(${he[ge.NUMERICIDENTIFIERLOOSE]})\\.(${he[ge.NUMERICIDENTIFIERLOOSE]})`);je("PRERELEASEIDENTIFIER",`(?:${he[ge.NONNUMERICIDENTIFIER]}|${he[ge.NUMERICIDENTIFIER]})`);je("PRERELEASEIDENTIFIERLOOSE",`(?:${he[ge.NONNUMERICIDENTIFIER]}|${he[ge.NUMERICIDENTIFIERLOOSE]})`);je("PRERELEASE",`(?:-(${he[ge.PRERELEASEIDENTIFIER]}(?:\\.${he[ge.PRERELEASEIDENTIFIER]})*))`);je("PRERELEASELOOSE",`(?:-?(${he[ge.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${he[ge.PRERELEASEIDENTIFIERLOOSE]})*))`);je("BUILDIDENTIFIER",`${sT}+`);je("BUILD",`(?:\\+(${he[ge.BUILDIDENTIFIER]}(?:\\.${he[ge.BUILDIDENTIFIER]})*))`);je("FULLPLAIN",`v?${he[ge.MAINVERSION]}${he[ge.PRERELEASE]}?${he[ge.BUILD]}?`);je("FULL",`^${he[ge.FULLPLAIN]}$`);je("LOOSEPLAIN",`[v=\\s]*${he[ge.MAINVERSIONLOOSE]}${he[ge.PRERELEASELOOSE]}?${he[ge.BUILD]}?`);je("LOOSE",`^${he[ge.LOOSEPLAIN]}$`);je("GTLT","((?:<|>)?=?)");je("XRANGEIDENTIFIERLOOSE",`${he[ge.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);je("XRANGEIDENTIFIER",`${he[ge.NUMERICIDENTIFIER]}|x|X|\\*`);je("XRANGEPLAIN",`[v=\\s]*(${he[ge.XRANGEIDENTIFIER]})(?:\\.(${he[ge.XRANGEIDENTIFIER]})(?:\\.(${he[ge.XRANGEIDENTIFIER]})(?:${he[ge.PRERELEASE]})?${he[ge.BUILD]}?)?)?`);je("XRANGEPLAINLOOSE",`[v=\\s]*(${he[ge.XRANGEIDENTIFIERLOOSE]})(?:\\.(${he[ge.XRANGEIDENTIFIERLOOSE]})(?:\\.(${he[ge.XRANGEIDENTIFIERLOOSE]})(?:${he[ge.PRERELEASELOOSE]})?${he[ge.BUILD]}?)?)?`);je("XRANGE",`^${he[ge.GTLT]}\\s*${he[ge.XRANGEPLAIN]}$`);je("XRANGELOOSE",`^${he[ge.GTLT]}\\s*${he[ge.XRANGEPLAINLOOSE]}$`);je("COERCEPLAIN",`(^|[^\\d])(\\d{1,${iT}})(?:\\.(\\d{1,${iT}}))?(?:\\.(\\d{1,${iT}}))?`);je("COERCE",`${he[ge.COERCEPLAIN]}(?:$|[^\\d])`);je("COERCEFULL",he[ge.COERCEPLAIN]+`(?:${he[ge.PRERELEASE]})?(?:${he[ge.BUILD]})?(?:$|[^\\d])`);je("COERCERTL",he[ge.COERCE],!0);je("COERCERTLFULL",he[ge.COERCEFULL],!0);je("LONETILDE","(?:~>?)");je("TILDETRIM",`(\\s*)${he[ge.LONETILDE]}\\s+`,!0);Zs.tildeTrimReplace="$1~";je("TILDE",`^${he[ge.LONETILDE]}${he[ge.XRANGEPLAIN]}$`);je("TILDELOOSE",`^${he[ge.LONETILDE]}${he[ge.XRANGEPLAINLOOSE]}$`);je("LONECARET","(?:\\^)");je("CARETTRIM",`(\\s*)${he[ge.LONECARET]}\\s+`,!0);Zs.caretTrimReplace="$1^";je("CARET",`^${he[ge.LONECARET]}${he[ge.XRANGEPLAIN]}$`);je("CARETLOOSE",`^${he[ge.LONECARET]}${he[ge.XRANGEPLAINLOOSE]}$`);je("COMPARATORLOOSE",`^${he[ge.GTLT]}\\s*(${he[ge.LOOSEPLAIN]})$|^$`);je("COMPARATOR",`^${he[ge.GTLT]}\\s*(${he[ge.FULLPLAIN]})$|^$`);je("COMPARATORTRIM",`(\\s*)${he[ge.GTLT]}\\s*(${he[ge.LOOSEPLAIN]}|${he[ge.XRANGEPLAIN]})`,!0);Zs.comparatorTrimReplace="$1$2$3";je("HYPHENRANGE",`^\\s*(${he[ge.XRANGEPLAIN]})\\s+-\\s+(${he[ge.XRANGEPLAIN]})\\s*$`);je("HYPHENRANGELOOSE",`^\\s*(${he[ge.XRANGEPLAINLOOSE]})\\s+-\\s+(${he[ge.XRANGEPLAINLOOSE]})\\s*$`);je("STAR","(<|>)?=?\\s*\\*");je("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");je("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var tS=M((tye,Y$)=>{"use strict";var ZZ=Object.freeze({loose:!0}),QZ=Object.freeze({}),eQ=t=>t?typeof t!="object"?ZZ:t:QZ;Y$.exports=eQ});var aT=M((nye,z$)=>{"use strict";var q$=/^[0-9]+$/,G$=(t,e)=>{if(typeof t=="number"&&typeof e=="number")return t===e?0:t<e?-1:1;let n=q$.test(t),r=q$.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},tQ=(t,e)=>G$(e,t);z$.exports={compareIdentifiers:G$,rcompareIdentifiers:tQ}});var Yr=M((rye,J$)=>{"use strict";var nS=lv(),{MAX_LENGTH:K$,MAX_SAFE_INTEGER:rS}=cv(),{safeRe:oS,t:iS}=tp(),nQ=tS(),{compareIdentifiers:cT}=aT(),lT=class t{constructor(e,n){if(n=nQ(n),e instanceof t){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>K$)throw new TypeError(`version is longer than ${K$} characters`);nS("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=e.trim().match(n.loose?oS[iS.LOOSE]:oS[iS.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>rS||this.major<0)throw new TypeError("Invalid major version");if(this.minor>rS||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>rS||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){let i=+o;if(i>=0&&i<rS)return i}return o}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(nS("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],o=e.prerelease[n];if(nS("prerelease compare",n,r,o),r===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(r===void 0)return-1;if(r===o)continue;return cT(r,o)}while(++n)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let n=0;do{let r=this.build[n],o=e.build[n];if(nS("build compare",n,r,o),r===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(r===void 0)return-1;if(r===o)continue;return cT(r,o)}while(++n)}inc(e,n,r){if(e.startsWith("pre")){if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(n){let o=`-${n}`.match(this.options.loose?oS[iS.PRERELEASELOOSE]:oS[iS.PRERELEASE]);if(!o||o[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let o=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[o];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(o)}}if(n){let i=[n,o];r===!1&&(i=[n]),cT(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};J$.exports=lT});var If=M((oye,Z$)=>{"use strict";var X$=Yr(),rQ=(t,e,n=!1)=>{if(t instanceof X$)return t;try{return new X$(t,e)}catch(r){if(!n)return null;throw r}};Z$.exports=rQ});var eH=M((iye,Q$)=>{"use strict";var oQ=If(),iQ=(t,e)=>{let n=oQ(t,e);return n?n.version:null};Q$.exports=iQ});var nH=M((sye,tH)=>{"use strict";var sQ=If(),aQ=(t,e)=>{let n=sQ(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null};tH.exports=aQ});var iH=M((aye,oH)=>{"use strict";var rH=Yr(),cQ=(t,e,n,r,o)=>{typeof n=="string"&&(o=r,r=n,n=void 0);try{return new rH(t instanceof rH?t.version:t,n).inc(e,r,o).version}catch{return null}};oH.exports=cQ});var cH=M((cye,aH)=>{"use strict";var sH=If(),lQ=(t,e)=>{let n=sH(t,null,!0),r=sH(e,null,!0),o=n.compare(r);if(o===0)return null;let i=o>0,s=i?n:r,a=i?r:n,c=!!s.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(s)===0)return a.minor&&!a.patch?"minor":"patch"}let u=c?"pre":"";return n.major!==r.major?u+"major":n.minor!==r.minor?u+"minor":n.patch!==r.patch?u+"patch":"prerelease"};aH.exports=lQ});var uH=M((lye,lH)=>{"use strict";var uQ=Yr(),fQ=(t,e)=>new uQ(t,e).major;lH.exports=fQ});var dH=M((uye,fH)=>{"use strict";var dQ=Yr(),mQ=(t,e)=>new dQ(t,e).minor;fH.exports=mQ});var pH=M((fye,mH)=>{"use strict";var pQ=Yr(),hQ=(t,e)=>new pQ(t,e).patch;mH.exports=hQ});var gH=M((dye,hH)=>{"use strict";var gQ=If(),vQ=(t,e)=>{let n=gQ(t,e);return n&&n.prerelease.length?n.prerelease:null};hH.exports=vQ});var Ni=M((mye,wH)=>{"use strict";var vH=Yr(),wQ=(t,e,n)=>new vH(t,n).compare(new vH(e,n));wH.exports=wQ});var CH=M((pye,yH)=>{"use strict";var yQ=Ni(),CQ=(t,e,n)=>yQ(e,t,n);yH.exports=CQ});var SH=M((hye,EH)=>{"use strict";var EQ=Ni(),SQ=(t,e)=>EQ(t,e,!0);EH.exports=SQ});var sS=M((gye,_H)=>{"use strict";var xH=Yr(),xQ=(t,e,n)=>{let r=new xH(t,n),o=new xH(e,n);return r.compare(o)||r.compareBuild(o)};_H.exports=xQ});var IH=M((vye,DH)=>{"use strict";var _Q=sS(),DQ=(t,e)=>t.sort((n,r)=>_Q(n,r,e));DH.exports=DQ});var bH=M((wye,PH)=>{"use strict";var IQ=sS(),PQ=(t,e)=>t.sort((n,r)=>IQ(r,n,e));PH.exports=PQ});var uv=M((yye,TH)=>{"use strict";var bQ=Ni(),TQ=(t,e,n)=>bQ(t,e,n)>0;TH.exports=TQ});var aS=M((Cye,RH)=>{"use strict";var RQ=Ni(),kQ=(t,e,n)=>RQ(t,e,n)<0;RH.exports=kQ});var uT=M((Eye,kH)=>{"use strict";var NQ=Ni(),LQ=(t,e,n)=>NQ(t,e,n)===0;kH.exports=LQ});var fT=M((Sye,NH)=>{"use strict";var AQ=Ni(),FQ=(t,e,n)=>AQ(t,e,n)!==0;NH.exports=FQ});var cS=M((xye,LH)=>{"use strict";var OQ=Ni(),UQ=(t,e,n)=>OQ(t,e,n)>=0;LH.exports=UQ});var lS=M((_ye,AH)=>{"use strict";var MQ=Ni(),$Q=(t,e,n)=>MQ(t,e,n)<=0;AH.exports=$Q});var dT=M((Dye,FH)=>{"use strict";var HQ=uT(),BQ=fT(),WQ=uv(),jQ=cS(),VQ=aS(),YQ=lS(),qQ=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return HQ(t,n,r);case"!=":return BQ(t,n,r);case">":return WQ(t,n,r);case">=":return jQ(t,n,r);case"<":return VQ(t,n,r);case"<=":return YQ(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};FH.exports=qQ});var UH=M((Iye,OH)=>{"use strict";var GQ=Yr(),zQ=If(),{safeRe:uS,t:fS}=tp(),KQ=(t,e)=>{if(t instanceof GQ)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let n=null;if(!e.rtl)n=t.match(e.includePrerelease?uS[fS.COERCEFULL]:uS[fS.COERCE]);else{let c=e.includePrerelease?uS[fS.COERCERTLFULL]:uS[fS.COERCERTL],l;for(;(l=c.exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||l.index+l[0].length!==n.index+n[0].length)&&(n=l),c.lastIndex=l.index+l[1].length+l[2].length;c.lastIndex=-1}if(n===null)return null;let r=n[2],o=n[3]||"0",i=n[4]||"0",s=e.includePrerelease&&n[5]?`-${n[5]}`:"",a=e.includePrerelease&&n[6]?`+${n[6]}`:"";return zQ(`${r}.${o}.${i}${s}${a}`,e)};OH.exports=KQ});var $H=M((Pye,MH)=>{"use strict";var mT=class{constructor(){this.max=1e3,this.map=new Map}get(e){let n=this.map.get(e);if(n!==void 0)return this.map.delete(e),this.map.set(e,n),n}delete(e){return this.map.delete(e)}set(e,n){if(!this.delete(e)&&n!==void 0){if(this.map.size>=this.max){let o=this.map.keys().next().value;this.delete(o)}this.map.set(e,n)}return this}};MH.exports=mT});var Li=M((bye,jH)=>{"use strict";var JQ=/\s+/g,pT=class t{constructor(e,n){if(n=ZQ(n),e instanceof t)return e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease?e:new t(e.raw,n);if(e instanceof hT)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=e.trim().replace(JQ," "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(o=>!BH(o[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let o of this.set)if(o.length===1&&iee(o[0])){this.set=[o];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let n=this.set[e];for(let r=0;r<n.length;r++)r>0&&(this.formatted+=" "),this.formatted+=n[r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let r=((this.options.includePrerelease&&ree)|(this.options.loose&&oee))+":"+e,o=HH.get(r);if(o)return o;let i=this.options.loose,s=i?oo[qr.HYPHENRANGELOOSE]:oo[qr.HYPHENRANGE];e=e.replace(s,hee(this.options.includePrerelease)),Ft("hyphen replace",e),e=e.replace(oo[qr.COMPARATORTRIM],eee),Ft("comparator trim",e),e=e.replace(oo[qr.TILDETRIM],tee),Ft("tilde trim",e),e=e.replace(oo[qr.CARETTRIM],nee),Ft("caret trim",e);let a=e.split(" ").map(f=>see(f,this.options)).join(" ").split(/\s+/).map(f=>pee(f,this.options));i&&(a=a.filter(f=>(Ft("loose invalid filter",f,this.options),!!f.match(oo[qr.COMPARATORLOOSE])))),Ft("range list",a);let c=new Map,l=a.map(f=>new hT(f,this.options));for(let f of l){if(BH(f))return[f];c.set(f.value,f)}c.size>1&&c.has("")&&c.delete("");let u=[...c.values()];return HH.set(r,u),u}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(r=>WH(r,n)&&e.set.some(o=>WH(o,n)&&r.every(i=>o.every(s=>i.intersects(s,n)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new QQ(e,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(gee(this.set[n],e,this.options))return!0;return!1}};jH.exports=pT;var XQ=$H(),HH=new XQ,ZQ=tS(),hT=fv(),Ft=lv(),QQ=Yr(),{safeRe:oo,t:qr,comparatorTrimReplace:eee,tildeTrimReplace:tee,caretTrimReplace:nee}=tp(),{FLAG_INCLUDE_PRERELEASE:ree,FLAG_LOOSE:oee}=cv(),BH=t=>t.value==="<0.0.0-0",iee=t=>t.value==="",WH=(t,e)=>{let n=!0,r=t.slice(),o=r.pop();for(;n&&r.length;)n=r.every(i=>o.intersects(i,e)),o=r.pop();return n},see=(t,e)=>(t=t.replace(oo[qr.BUILD],""),Ft("comp",t,e),t=lee(t,e),Ft("caret",t),t=aee(t,e),Ft("tildes",t),t=fee(t,e),Ft("xrange",t),t=mee(t,e),Ft("stars",t),t),io=t=>!t||t.toLowerCase()==="x"||t==="*",aee=(t,e)=>t.trim().split(/\s+/).map(n=>cee(n,e)).join(" "),cee=(t,e)=>{let n=e.loose?oo[qr.TILDELOOSE]:oo[qr.TILDE];return t.replace(n,(r,o,i,s,a)=>{Ft("tilde",t,r,o,i,s,a);let c;return io(o)?c="":io(i)?c=`>=${o}.0.0 <${+o+1}.0.0-0`:io(s)?c=`>=${o}.${i}.0 <${o}.${+i+1}.0-0`:a?(Ft("replaceTilde pr",a),c=`>=${o}.${i}.${s}-${a} <${o}.${+i+1}.0-0`):c=`>=${o}.${i}.${s} <${o}.${+i+1}.0-0`,Ft("tilde return",c),c})},lee=(t,e)=>t.trim().split(/\s+/).map(n=>uee(n,e)).join(" "),uee=(t,e)=>{Ft("caret",t,e);let n=e.loose?oo[qr.CARETLOOSE]:oo[qr.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(o,i,s,a,c)=>{Ft("caret",t,o,i,s,a,c);let l;return io(i)?l="":io(s)?l=`>=${i}.0.0${r} <${+i+1}.0.0-0`:io(a)?i==="0"?l=`>=${i}.${s}.0${r} <${i}.${+s+1}.0-0`:l=`>=${i}.${s}.0${r} <${+i+1}.0.0-0`:c?(Ft("replaceCaret pr",c),i==="0"?s==="0"?l=`>=${i}.${s}.${a}-${c} <${i}.${s}.${+a+1}-0`:l=`>=${i}.${s}.${a}-${c} <${i}.${+s+1}.0-0`:l=`>=${i}.${s}.${a}-${c} <${+i+1}.0.0-0`):(Ft("no pr"),i==="0"?s==="0"?l=`>=${i}.${s}.${a}${r} <${i}.${s}.${+a+1}-0`:l=`>=${i}.${s}.${a}${r} <${i}.${+s+1}.0-0`:l=`>=${i}.${s}.${a} <${+i+1}.0.0-0`),Ft("caret return",l),l})},fee=(t,e)=>(Ft("replaceXRanges",t,e),t.split(/\s+/).map(n=>dee(n,e)).join(" ")),dee=(t,e)=>{t=t.trim();let n=e.loose?oo[qr.XRANGELOOSE]:oo[qr.XRANGE];return t.replace(n,(r,o,i,s,a,c)=>{Ft("xRange",t,r,o,i,s,a,c);let l=io(i),u=l||io(s),f=u||io(a),m=f;return o==="="&&m&&(o=""),c=e.includePrerelease?"-0":"",l?o===">"||o==="<"?r="<0.0.0-0":r="*":o&&m?(u&&(s=0),a=0,o===">"?(o=">=",u?(i=+i+1,s=0,a=0):(s=+s+1,a=0)):o==="<="&&(o="<",u?i=+i+1:s=+s+1),o==="<"&&(c="-0"),r=`${o+i}.${s}.${a}${c}`):u?r=`>=${i}.0.0${c} <${+i+1}.0.0-0`:f&&(r=`>=${i}.${s}.0${c} <${i}.${+s+1}.0-0`),Ft("xRange return",r),r})},mee=(t,e)=>(Ft("replaceStars",t,e),t.trim().replace(oo[qr.STAR],"")),pee=(t,e)=>(Ft("replaceGTE0",t,e),t.trim().replace(oo[e.includePrerelease?qr.GTE0PRE:qr.GTE0],"")),hee=t=>(e,n,r,o,i,s,a,c,l,u,f,m)=>(io(r)?n="":io(o)?n=`>=${r}.0.0${t?"-0":""}`:io(i)?n=`>=${r}.${o}.0${t?"-0":""}`:s?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,io(l)?c="":io(u)?c=`<${+l+1}.0.0-0`:io(f)?c=`<${l}.${+u+1}.0-0`:m?c=`<=${l}.${u}.${f}-${m}`:t?c=`<${l}.${u}.${+f+1}-0`:c=`<=${c}`,`${n} ${c}`.trim()),gee=(t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let r=0;r<t.length;r++)if(Ft(t[r].semver),t[r].semver!==hT.ANY&&t[r].semver.prerelease.length>0){let o=t[r].semver;if(o.major===e.major&&o.minor===e.minor&&o.patch===e.patch)return!0}return!1}return!0}});var fv=M((Tye,KH)=>{"use strict";var dv=Symbol("SemVer ANY"),wT=class t{static get ANY(){return dv}constructor(e,n){if(n=VH(n),e instanceof t){if(e.loose===!!n.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),vT("comparator",e,n),this.options=n,this.loose=!!n.loose,this.parse(e),this.semver===dv?this.value="":this.value=this.operator+this.semver.version,vT("comp",this)}parse(e){let n=this.options.loose?YH[qH.COMPARATORLOOSE]:YH[qH.COMPARATOR],r=e.match(n);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new GH(r[2],this.options.loose):this.semver=dv}toString(){return this.value}test(e){if(vT("Comparator.test",e,this.options.loose),this.semver===dv||e===dv)return!0;if(typeof e=="string")try{e=new GH(e,this.options)}catch{return!1}return gT(e,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new zH(e.value,n).test(this.value):e.operator===""?e.value===""?!0:new zH(this.value,n).test(e.semver):(n=VH(n),n.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||gT(this.semver,"<",e.semver,n)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||gT(this.semver,">",e.semver,n)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};KH.exports=wT;var VH=tS(),{safeRe:YH,t:qH}=tp(),gT=dT(),vT=lv(),GH=Yr(),zH=Li()});var mv=M((Rye,JH)=>{"use strict";var vee=Li(),wee=(t,e,n)=>{try{e=new vee(e,n)}catch{return!1}return e.test(t)};JH.exports=wee});var ZH=M((kye,XH)=>{"use strict";var yee=Li(),Cee=(t,e)=>new yee(t,e).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));XH.exports=Cee});var e2=M((Nye,QH)=>{"use strict";var Eee=Yr(),See=Li(),xee=(t,e,n)=>{let r=null,o=null,i=null;try{i=new See(e,n)}catch{return null}return t.forEach(s=>{i.test(s)&&(!r||o.compare(s)===-1)&&(r=s,o=new Eee(r,n))}),r};QH.exports=xee});var n2=M((Lye,t2)=>{"use strict";var _ee=Yr(),Dee=Li(),Iee=(t,e,n)=>{let r=null,o=null,i=null;try{i=new Dee(e,n)}catch{return null}return t.forEach(s=>{i.test(s)&&(!r||o.compare(s)===1)&&(r=s,o=new _ee(r,n))}),r};t2.exports=Iee});var i2=M((Aye,o2)=>{"use strict";var yT=Yr(),Pee=Li(),r2=uv(),bee=(t,e)=>{t=new Pee(t,e);let n=new yT("0.0.0");if(t.test(n)||(n=new yT("0.0.0-0"),t.test(n)))return n;n=null;for(let r=0;r<t.set.length;++r){let o=t.set[r],i=null;o.forEach(s=>{let a=new yT(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||r2(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),i&&(!n||r2(n,i))&&(n=i)}return n&&t.test(n)?n:null};o2.exports=bee});var a2=M((Fye,s2)=>{"use strict";var Tee=Li(),Ree=(t,e)=>{try{return new Tee(t,e).range||"*"}catch{return null}};s2.exports=Ree});var dS=M((Oye,f2)=>{"use strict";var kee=Yr(),u2=fv(),{ANY:Nee}=u2,Lee=Li(),Aee=mv(),c2=uv(),l2=aS(),Fee=lS(),Oee=cS(),Uee=(t,e,n,r)=>{t=new kee(t,r),e=new Lee(e,r);let o,i,s,a,c;switch(n){case">":o=c2,i=Fee,s=l2,a=">",c=">=";break;case"<":o=l2,i=Oee,s=c2,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Aee(t,e,r))return!1;for(let l=0;l<e.set.length;++l){let u=e.set[l],f=null,m=null;if(u.forEach(d=>{d.semver===Nee&&(d=new u2(">=0.0.0")),f=f||d,m=m||d,o(d.semver,f.semver,r)?f=d:s(d.semver,m.semver,r)&&(m=d)}),f.operator===a||f.operator===c||(!m.operator||m.operator===a)&&i(t,m.semver))return!1;if(m.operator===c&&s(t,m.semver))return!1}return!0};f2.exports=Uee});var m2=M((Uye,d2)=>{"use strict";var Mee=dS(),$ee=(t,e,n)=>Mee(t,e,">",n);d2.exports=$ee});var h2=M((Mye,p2)=>{"use strict";var Hee=dS(),Bee=(t,e,n)=>Hee(t,e,"<",n);p2.exports=Bee});var w2=M(($ye,v2)=>{"use strict";var g2=Li(),Wee=(t,e,n)=>(t=new g2(t,n),e=new g2(e,n),t.intersects(e,n));v2.exports=Wee});var C2=M((Hye,y2)=>{"use strict";var jee=mv(),Vee=Ni();y2.exports=(t,e,n)=>{let r=[],o=null,i=null,s=t.sort((u,f)=>Vee(u,f,n));for(let u of s)jee(u,e,n)?(i=u,o||(o=u)):(i&&r.push([o,i]),i=null,o=null);o&&r.push([o,null]);let a=[];for(let[u,f]of r)u===f?a.push(u):!f&&u===s[0]?a.push("*"):f?u===s[0]?a.push(`<=${f}`):a.push(`${u} - ${f}`):a.push(`>=${u}`);let c=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e}});var I2=M((Bye,D2)=>{"use strict";var E2=Li(),ET=fv(),{ANY:CT}=ET,pv=mv(),ST=Ni(),Yee=(t,e,n={})=>{if(t===e)return!0;t=new E2(t,n),e=new E2(e,n);let r=!1;e:for(let o of t.set){for(let i of e.set){let s=Gee(o,i,n);if(r=r||s!==null,s)continue e}if(r)return!1}return!0},qee=[new ET(">=0.0.0-0")],S2=[new ET(">=0.0.0")],Gee=(t,e,n)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===CT){if(e.length===1&&e[0].semver===CT)return!0;n.includePrerelease?t=qee:t=S2}if(e.length===1&&e[0].semver===CT){if(n.includePrerelease)return!0;e=S2}let r=new Set,o,i;for(let d of t)d.operator===">"||d.operator===">="?o=x2(o,d,n):d.operator==="<"||d.operator==="<="?i=_2(i,d,n):r.add(d.semver);if(r.size>1)return null;let s;if(o&&i){if(s=ST(o.semver,i.semver,n),s>0)return null;if(s===0&&(o.operator!==">="||i.operator!=="<="))return null}for(let d of r){if(o&&!pv(d,String(o),n)||i&&!pv(d,String(i),n))return null;for(let p of e)if(!pv(d,String(p),n))return!1;return!0}let a,c,l,u,f=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1,m=o&&!n.includePrerelease&&o.semver.prerelease.length?o.semver:!1;f&&f.prerelease.length===1&&i.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let d of e){if(u=u||d.operator===">"||d.operator===">=",l=l||d.operator==="<"||d.operator==="<=",o){if(m&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===m.major&&d.semver.minor===m.minor&&d.semver.patch===m.patch&&(m=!1),d.operator===">"||d.operator===">="){if(a=x2(o,d,n),a===d&&a!==o)return!1}else if(o.operator===">="&&!pv(o.semver,String(d),n))return!1}if(i){if(f&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===f.major&&d.semver.minor===f.minor&&d.semver.patch===f.patch&&(f=!1),d.operator==="<"||d.operator==="<="){if(c=_2(i,d,n),c===d&&c!==i)return!1}else if(i.operator==="<="&&!pv(i.semver,String(d),n))return!1}if(!d.operator&&(i||o)&&s!==0)return!1}return!(o&&l&&!i&&s!==0||i&&u&&!o&&s!==0||m||f)},x2=(t,e,n)=>{if(!t)return e;let r=ST(t.semver,e.semver,n);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},_2=(t,e,n)=>{if(!t)return e;let r=ST(t.semver,e.semver,n);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t};D2.exports=Yee});var _T=M((Wye,T2)=>{"use strict";var xT=tp(),P2=cv(),zee=Yr(),b2=aT(),Kee=If(),Jee=eH(),Xee=nH(),Zee=iH(),Qee=cH(),ete=uH(),tte=dH(),nte=pH(),rte=gH(),ote=Ni(),ite=CH(),ste=SH(),ate=sS(),cte=IH(),lte=bH(),ute=uv(),fte=aS(),dte=uT(),mte=fT(),pte=cS(),hte=lS(),gte=dT(),vte=UH(),wte=fv(),yte=Li(),Cte=mv(),Ete=ZH(),Ste=e2(),xte=n2(),_te=i2(),Dte=a2(),Ite=dS(),Pte=m2(),bte=h2(),Tte=w2(),Rte=C2(),kte=I2();T2.exports={parse:Kee,valid:Jee,clean:Xee,inc:Zee,diff:Qee,major:ete,minor:tte,patch:nte,prerelease:rte,compare:ote,rcompare:ite,compareLoose:ste,compareBuild:ate,sort:cte,rsort:lte,gt:ute,lt:fte,eq:dte,neq:mte,gte:pte,lte:hte,cmp:gte,coerce:vte,Comparator:wte,Range:yte,satisfies:Cte,toComparators:Ete,maxSatisfying:Ste,minSatisfying:xte,minVersion:_te,validRange:Dte,outside:Ite,gtr:Pte,ltr:bte,intersects:Tte,simplifyRange:Rte,subset:kte,SemVer:zee,re:xT.re,src:xT.src,tokens:xT.t,SEMVER_SPEC_VERSION:P2.SEMVER_SPEC_VERSION,RELEASE_TYPES:P2.RELEASE_TYPES,compareIdentifiers:b2.compareIdentifiers,rcompareIdentifiers:b2.rcompareIdentifiers}});var DT=M((jye,R2)=>{R2.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}});var mS=M(N2=>{var k2={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",DESCRIPTOR_NOT_EXIST:"No descriptor present",DESCRIPTOR_UNKNOWN:"Unknown descriptor format",DESCRIPTOR_FAULTY:"Descriptor data is malformed",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed {0}",FILE_IN_THE_WAY:"There is a file in the way: {0}",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",DISK_ENTRY_TOO_LARGE:"Number of disk entries is too large",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:'File not found: "{0}"',NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found",INVALID_PASS_PARAM:"Incompatible password parameter",WRONG_PASSWORD:"Wrong Password",COMMENT_TOO_LONG:"Comment is too long",EXTRA_FIELD_PARSE_ERROR:"Extra field parsing error"};function Nte(t){return function(...e){return e.length&&(t=t.replace(/\{(\d)\}/g,(n,r)=>e[r]||"")),new Error("ADM-ZIP: "+t)}}for(let t of Object.keys(k2))N2[t]=Nte(k2[t])});var U2=M((Yye,O2)=>{var Lte=require("fs"),Vn=require("path"),L2=DT(),Ate=mS(),Fte=typeof process=="object"&&process.platform==="win32",A2=t=>typeof t=="object"&&t!==null,F2=new Uint32Array(256).map((t,e)=>{for(let n=0;n<8;n++)(e&1)!==0?e=3988292384^e>>>1:e>>>=1;return e>>>0});function an(t){this.sep=Vn.sep,this.fs=Lte,A2(t)&&A2(t.fs)&&typeof t.fs.statSync=="function"&&(this.fs=t.fs)}O2.exports=an;an.prototype.makeDir=function(t){let e=this;function n(r){let o=r.split(e.sep)[0];r.split(e.sep).forEach(function(i){if(!(!i||i.substr(-1,1)===":")){o+=e.sep+i;var s;try{s=e.fs.statSync(o)}catch{e.fs.mkdirSync(o)}if(s&&s.isFile())throw Ate.FILE_IN_THE_WAY(`"${o}"`)}})}n(t)};an.prototype.writeFileTo=function(t,e,n,r){let o=this;if(o.fs.existsSync(t)){if(!n)return!1;var i=o.fs.statSync(t);if(i.isDirectory())return!1}var s=Vn.dirname(t);o.fs.existsSync(s)||o.makeDir(s);var a;try{a=o.fs.openSync(t,"w",438)}catch{o.fs.chmodSync(t,438),a=o.fs.openSync(t,"w",438)}if(a)try{o.fs.writeSync(a,e,0,e.length,0)}finally{o.fs.closeSync(a)}return o.fs.chmodSync(t,r||438),!0};an.prototype.writeFileToAsync=function(t,e,n,r,o){typeof r=="function"&&(o=r,r=void 0);let i=this;i.fs.exists(t,function(s){if(s&&!n)return o(!1);i.fs.stat(t,function(a,c){if(s&&c.isDirectory())return o(!1);var l=Vn.dirname(t);i.fs.exists(l,function(u){u||i.makeDir(l),i.fs.open(t,"w",438,function(f,m){f?i.fs.chmod(t,438,function(){i.fs.open(t,"w",438,function(d,p){i.fs.write(p,e,0,e.length,0,function(){i.fs.close(p,function(){i.fs.chmod(t,r||438,function(){o(!0)})})})})}):m?i.fs.write(m,e,0,e.length,0,function(){i.fs.close(m,function(){i.fs.chmod(t,r||438,function(){o(!0)})})}):i.fs.chmod(t,r||438,function(){o(!0)})})})})})};an.prototype.findFiles=function(t){let e=this;function n(r,o,i){typeof o=="boolean"&&(i=o,o=void 0);let s=[];return e.fs.readdirSync(r).forEach(function(a){let c=Vn.join(r,a),l=e.fs.statSync(c);(!o||o.test(c))&&s.push(Vn.normalize(c)+(l.isDirectory()?e.sep:"")),l.isDirectory()&&i&&(s=s.concat(n(c,o,i)))}),s}return n(t,void 0,!0)};an.prototype.findFilesAsync=function(t,e){let n=this,r=[];n.fs.readdir(t,function(o,i){if(o)return e(o);let s=i.length;if(!s)return e(null,r);i.forEach(function(a){a=Vn.join(t,a),n.fs.stat(a,function(c,l){if(c)return e(c);l&&(r.push(Vn.normalize(a)+(l.isDirectory()?n.sep:"")),l.isDirectory()?n.findFilesAsync(a,function(u,f){if(u)return e(u);r=r.concat(f),--s||e(null,r)}):--s||e(null,r))})})})};an.prototype.getAttributes=function(){};an.prototype.setAttributes=function(){};an.crc32update=function(t,e){return F2[(t^e)&255]^t>>>8};an.crc32=function(t){typeof t=="string"&&(t=Buffer.from(t,"utf8"));let e=t.length,n=-1;for(let r=0;r<e;)n=an.crc32update(n,t[r++]);return~n>>>0};an.methodToString=function(t){switch(t){case L2.STORED:return"STORED ("+t+")";case L2.DEFLATED:return"DEFLATED ("+t+")";default:return"UNSUPPORTED ("+t+")"}};an.canonical=function(t){if(!t)return"";let e=Vn.posix.normalize("/"+t.split("\\").join("/"));return Vn.join(".",e)};an.zipnamefix=function(t){if(!t)return"";let e=Vn.posix.normalize("/"+t.split("\\").join("/"));return Vn.posix.join(".",e)};an.findLast=function(t,e){if(!Array.isArray(t))throw new TypeError("arr is not array");let n=t.length>>>0;for(let r=n-1;r>=0;r--)if(e(t[r],r,t))return t[r]};an.sanitize=function(t,e){t=Vn.resolve(Vn.normalize(t));for(var n=e.split("/"),r=0,o=n.length;r<o;r++){var i=Vn.normalize(Vn.join(t,n.slice(r,o).join(Vn.sep)));if(i.indexOf(t)===0)return i}return Vn.normalize(Vn.join(t,Vn.basename(e)))};an.toBuffer=function(e,n){return Buffer.isBuffer(e)?e:e instanceof Uint8Array?Buffer.from(e):typeof e=="string"?n(e):Buffer.alloc(0)};an.readBigUInt64LE=function(t,e){var n=Buffer.from(t.slice(e,e+8));return n.swap64(),parseInt(`0x${n.toString("hex")}`)};an.fromDOS2Date=function(t){return new Date((t>>25&127)+1980,Math.max((t>>21&15)-1,0),Math.max(t>>16&31,1),t>>11&31,t>>5&63,(t&31)<<1)};an.fromDate2DOS=function(t){let e=0,n=0;return t.getFullYear()>1979&&(e=(t.getFullYear()-1980&127)<<9|t.getMonth()+1<<5|t.getDate(),n=t.getHours()<<11|t.getMinutes()<<5|t.getSeconds()>>1),e<<16|n};an.isWin=Fte;an.crcTable=F2});var $2=M((qye,M2)=>{var Ote=require("path");M2.exports=function(t,{fs:e}){var n=t||"",r=i(),o=null;function i(){return{directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0}}return n&&e.existsSync(n)?(o=e.statSync(n),r.directory=o.isDirectory(),r.mtime=o.mtime,r.atime=o.atime,r.executable=(73&o.mode)!==0,r.readonly=(128&o.mode)===0,r.hidden=Ote.basename(n)[0]==="."):console.warn("Invalid path: "+n),{get directory(){return r.directory},get readOnly(){return r.readonly},get hidden(){return r.hidden},get mtime(){return r.mtime},get atime(){return r.atime},get executable(){return r.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:n,isDirectory:r.directory,isReadOnly:r.readonly,isHidden:r.hidden,isExecutable:r.executable,mTime:r.mtime,aTime:r.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var B2=M((Gye,H2)=>{H2.exports={efs:!0,encode:t=>Buffer.from(t,"utf8"),decode:t=>t.toString("utf8")}});var rp=M((zye,np)=>{np.exports=U2();np.exports.Constants=DT();np.exports.Errors=mS();np.exports.FileAttr=$2();np.exports.decoder=B2()});var j2=M((Kye,W2)=>{var _l=rp(),de=_l.Constants;W2.exports=function(){var t=20,e=10,n=0,r=0,o=0,i=0,s=0,a=0,c=0,l=0,u=0,f=0,m=0,d=0,p=0;t|=_l.isWin?2560:768,n|=de.FLG_EFS;let g={extraLen:0},h=w=>Math.max(0,w)>>>0,v=w=>Math.max(0,w)&65535,C=w=>Math.max(0,w)&255;return o=_l.fromDate2DOS(new Date),{get made(){return t},set made(w){t=w},get version(){return e},set version(w){e=w},get flags(){return n},set flags(w){n=w},get flags_efs(){return(n&de.FLG_EFS)>0},set flags_efs(w){w?n|=de.FLG_EFS:n&=~de.FLG_EFS},get flags_desc(){return(n&de.FLG_DESC)>0},set flags_desc(w){w?n|=de.FLG_DESC:n&=~de.FLG_DESC},get method(){return r},set method(w){switch(w){case de.STORED:this.version=10;case de.DEFLATED:default:this.version=20}r=w},get time(){return _l.fromDOS2Date(this.timeval)},set time(w){this.timeval=_l.fromDate2DOS(w)},get timeval(){return o},set timeval(w){o=h(w)},get timeHighByte(){return C(o>>>8)},get crc(){return i},set crc(w){i=h(w)},get compressedSize(){return s},set compressedSize(w){s=h(w)},get size(){return a},set size(w){a=h(w)},get fileNameLength(){return c},set fileNameLength(w){c=w},get extraLength(){return l},set extraLength(w){l=w},get extraLocalLength(){return g.extraLen},set extraLocalLength(w){g.extraLen=w},get commentLength(){return u},set commentLength(w){u=w},get diskNumStart(){return f},set diskNumStart(w){f=h(w)},get inAttr(){return m},set inAttr(w){m=h(w)},get attr(){return d},set attr(w){d=h(w)},get fileAttr(){return(d||0)>>16&4095},get offset(){return p},set offset(w){p=h(w)},get encrypted(){return(n&de.FLG_ENC)===de.FLG_ENC},get centralHeaderSize(){return de.CENHDR+c+l+u},get realDataOffset(){return p+de.LOCHDR+g.fnameLen+g.extraLen},get localHeader(){return g},loadLocalHeaderFromBinary:function(w){var y=w.slice(p,p+de.LOCHDR);if(y.readUInt32LE(0)!==de.LOCSIG)throw _l.Errors.INVALID_LOC();g.version=y.readUInt16LE(de.LOCVER),g.flags=y.readUInt16LE(de.LOCFLG),g.method=y.readUInt16LE(de.LOCHOW),g.time=y.readUInt32LE(de.LOCTIM),g.crc=y.readUInt32LE(de.LOCCRC),g.compressedSize=y.readUInt32LE(de.LOCSIZ),g.size=y.readUInt32LE(de.LOCLEN),g.fnameLen=y.readUInt16LE(de.LOCNAM),g.extraLen=y.readUInt16LE(de.LOCEXT);let S=p+de.LOCHDR+g.fnameLen,D=S+g.extraLen;return w.slice(S,D)},loadFromBinary:function(w){if(w.length!==de.CENHDR||w.readUInt32LE(0)!==de.CENSIG)throw _l.Errors.INVALID_CEN();t=w.readUInt16LE(de.CENVEM),e=w.readUInt16LE(de.CENVER),n=w.readUInt16LE(de.CENFLG),r=w.readUInt16LE(de.CENHOW),o=w.readUInt32LE(de.CENTIM),i=w.readUInt32LE(de.CENCRC),s=w.readUInt32LE(de.CENSIZ),a=w.readUInt32LE(de.CENLEN),c=w.readUInt16LE(de.CENNAM),l=w.readUInt16LE(de.CENEXT),u=w.readUInt16LE(de.CENCOM),f=w.readUInt16LE(de.CENDSK),m=w.readUInt16LE(de.CENATT),d=w.readUInt32LE(de.CENATX),p=w.readUInt32LE(de.CENOFF)},localHeaderToBinary:function(){var w=Buffer.alloc(de.LOCHDR);return w.writeUInt32LE(de.LOCSIG,0),w.writeUInt16LE(e,de.LOCVER),w.writeUInt16LE(n,de.LOCFLG),w.writeUInt16LE(r,de.LOCHOW),w.writeUInt32LE(o,de.LOCTIM),w.writeUInt32LE(i,de.LOCCRC),w.writeUInt32LE(s,de.LOCSIZ),w.writeUInt32LE(a,de.LOCLEN),w.writeUInt16LE(c,de.LOCNAM),w.writeUInt16LE(g.extraLen,de.LOCEXT),w},centralHeaderToBinary:function(){var w=Buffer.alloc(de.CENHDR+c+l+u);return w.writeUInt32LE(de.CENSIG,0),w.writeUInt16LE(t,de.CENVEM),w.writeUInt16LE(e,de.CENVER),w.writeUInt16LE(n,de.CENFLG),w.writeUInt16LE(r,de.CENHOW),w.writeUInt32LE(o,de.CENTIM),w.writeUInt32LE(i,de.CENCRC),w.writeUInt32LE(s,de.CENSIZ),w.writeUInt32LE(a,de.CENLEN),w.writeUInt16LE(c,de.CENNAM),w.writeUInt16LE(l,de.CENEXT),w.writeUInt16LE(u,de.CENCOM),w.writeUInt16LE(f,de.CENDSK),w.writeUInt16LE(m,de.CENATT),w.writeUInt32LE(d,de.CENATX),w.writeUInt32LE(p,de.CENOFF),w},toJSON:function(){let w=function(y){return y+" bytes"};return{made:t,version:e,flags:n,method:_l.methodToString(r),time:this.time,crc:"0x"+i.toString(16).toUpperCase(),compressedSize:w(s),size:w(a),fileNameLength:w(c),extraLength:w(l),commentLength:w(u),diskNumStart:f,inAttr:m,attr:d,offset:p,centralHeaderSize:w(de.CENHDR+c+l+u)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var Y2=M((Jye,V2)=>{var op=rp(),Zt=op.Constants;V2.exports=function(){var t=0,e=0,n=0,r=0,o=0;return{get diskEntries(){return t},set diskEntries(i){t=e=i},get totalEntries(){return e},set totalEntries(i){e=t=i},get size(){return n},set size(i){n=i},get offset(){return r},set offset(i){r=i},get commentLength(){return o},set commentLength(i){o=i},get mainHeaderSize(){return Zt.ENDHDR+o},loadFromBinary:function(i){if((i.length!==Zt.ENDHDR||i.readUInt32LE(0)!==Zt.ENDSIG)&&(i.length<Zt.ZIP64HDR||i.readUInt32LE(0)!==Zt.ZIP64SIG))throw op.Errors.INVALID_END();i.readUInt32LE(0)===Zt.ENDSIG?(t=i.readUInt16LE(Zt.ENDSUB),e=i.readUInt16LE(Zt.ENDTOT),n=i.readUInt32LE(Zt.ENDSIZ),r=i.readUInt32LE(Zt.ENDOFF),o=i.readUInt16LE(Zt.ENDCOM)):(t=op.readBigUInt64LE(i,Zt.ZIP64SUB),e=op.readBigUInt64LE(i,Zt.ZIP64TOT),n=op.readBigUInt64LE(i,Zt.ZIP64SIZE),r=op.readBigUInt64LE(i,Zt.ZIP64OFF),o=0)},toBinary:function(){var i=Buffer.alloc(Zt.ENDHDR+o);return i.writeUInt32LE(Zt.ENDSIG,0),i.writeUInt32LE(0,4),i.writeUInt16LE(t,Zt.ENDSUB),i.writeUInt16LE(e,Zt.ENDTOT),i.writeUInt32LE(n,Zt.ENDSIZ),i.writeUInt32LE(r,Zt.ENDOFF),i.writeUInt16LE(o,Zt.ENDCOM),i.fill(" ",Zt.ENDHDR),i},toJSON:function(){let i=function(s,a){let c=s.toString(16).toUpperCase();for(;c.length<a;)c="0"+c;return"0x"+c};return{diskEntries:t,totalEntries:e,size:n+" bytes",offset:i(r,4),commentLength:o}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var PT=M(IT=>{IT.EntryHeader=j2();IT.MainHeader=Y2()});var G2=M((Zye,q2)=>{q2.exports=function(t){var e=require("zlib"),n={chunkSize:(parseInt(t.length/1024)+1)*1024};return{deflate:function(){return e.deflateRawSync(t,n)},deflateAsync:function(r){var o=e.createDeflateRaw(n),i=[],s=0;o.on("data",function(a){i.push(a),s+=a.length}),o.on("end",function(){var a=Buffer.alloc(s),c=0;a.fill(0);for(var l=0;l<i.length;l++){var u=i[l];u.copy(a,c),c+=u.length}r&&r(a)}),o.end(t)}}}});var K2=M((Qye,z2)=>{var Ute=+(process.versions?process.versions.node:"").split(".")[0]||0;z2.exports=function(t,e){var n=require("zlib");let r=Ute>=15&&e>0?{maxOutputLength:e}:{};return{inflate:function(){return n.inflateRawSync(t,r)},inflateAsync:function(o){var i=n.createInflateRaw(r),s=[],a=0;i.on("data",function(c){s.push(c),a+=c.length}),i.on("end",function(){var c=Buffer.alloc(a),l=0;c.fill(0);for(var u=0;u<s.length;u++){var f=s[u];f.copy(c,l),l+=f.length}o&&o(c)}),i.end(t)}}}});var eB=M((eCe,Q2)=>{"use strict";var{randomFillSync:J2}=require("crypto"),Mte=mS(),$te=new Uint32Array(256).map((t,e)=>{for(let n=0;n<8;n++)(e&1)!==0?e=e>>>1^3988292384:e>>>=1;return e>>>0}),Z2=(t,e)=>Math.imul(t,e)>>>0,X2=(t,e)=>$te[(t^e)&255]^t>>>8,hv=()=>typeof J2=="function"?J2(Buffer.alloc(12)):hv.node();hv.node=()=>{let t=Buffer.alloc(12),e=t.length;for(let n=0;n<e;n++)t[n]=Math.random()*256&255;return t};var pS={genSalt:hv};function hS(t){let e=Buffer.isBuffer(t)?t:Buffer.from(t);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let n=0;n<e.length;n++)this.updateKeys(e[n])}hS.prototype.updateKeys=function(t){let e=this.keys;return e[0]=X2(e[0],t),e[1]+=e[0]&255,e[1]=Z2(e[1],134775813)+1,e[2]=X2(e[2],e[1]>>>24),t};hS.prototype.next=function(){let t=(this.keys[2]|2)>>>0;return Z2(t,t^1)>>8&255};function Hte(t){let e=new hS(t);return function(n){let r=Buffer.alloc(n.length),o=0;for(let i of n)r[o++]=e.updateKeys(i^e.next());return r}}function Bte(t){let e=new hS(t);return function(n,r,o=0){r||(r=Buffer.alloc(n.length));for(let i of n){let s=e.next();r[o++]=i^s,e.updateKeys(i)}return r}}function Wte(t,e,n){if(!t||!Buffer.isBuffer(t)||t.length<12)return Buffer.alloc(0);let r=Hte(n),o=r(t.slice(0,12)),i=(e.flags&8)===8?e.timeHighByte:e.crc>>>24;if(o[11]!==i)throw Mte.WRONG_PASSWORD();return r(t.slice(12))}function jte(t){Buffer.isBuffer(t)&&t.length>=12?pS.genSalt=function(){return t.slice(0,12)}:t==="node"?pS.genSalt=hv.node:pS.genSalt=hv}function Vte(t,e,n,r=!1){t==null&&(t=Buffer.alloc(0)),Buffer.isBuffer(t)||(t=Buffer.from(t.toString()));let o=Bte(n),i=pS.genSalt();i[11]=e.crc>>>24&255,r&&(i[10]=e.crc>>>16&255);let s=Buffer.alloc(t.length+12);return o(i,s),o(t,s,12)}Q2.exports={decrypt:Wte,encrypt:Vte,_salter:jte}});var tB=M(gS=>{gS.Deflater=G2();gS.Inflater=K2();gS.ZipCrypto=eB()});var TT=M((nCe,nB)=>{var Ct=rp(),Yte=PT(),cn=Ct.Constants,bT=tB();nB.exports=function(t,e){var n=new Yte.EntryHeader,r=Buffer.alloc(0),o=Buffer.alloc(0),i=!1,s=null,a=Buffer.alloc(0),c=Buffer.alloc(0),l=!0;let u=t,f=typeof u.decoder=="object"?u.decoder:Ct.decoder;l=f.hasOwnProperty("efs")?f.efs:!1;function m(){return!e||!(e instanceof Uint8Array)?Buffer.alloc(0):(c=n.loadLocalHeaderFromBinary(e),e.slice(n.realDataOffset,n.realDataOffset+n.compressedSize))}function d(w){if(n.flags_desc){let y={},S=n.realDataOffset+n.compressedSize;if(e.readUInt32LE(S)==cn.LOCSIG||e.readUInt32LE(S)==cn.CENSIG)throw Ct.Errors.DESCRIPTOR_NOT_EXIST();if(e.readUInt32LE(S)==cn.EXTSIG)y.crc=e.readUInt32LE(S+cn.EXTCRC),y.compressedSize=e.readUInt32LE(S+cn.EXTSIZ),y.size=e.readUInt32LE(S+cn.EXTLEN);else if(e.readUInt16LE(S+12)===19280)y.crc=e.readUInt32LE(S+cn.EXTCRC-4),y.compressedSize=e.readUInt32LE(S+cn.EXTSIZ-4),y.size=e.readUInt32LE(S+cn.EXTLEN-4);else throw Ct.Errors.DESCRIPTOR_UNKNOWN();if(y.compressedSize!==n.compressedSize||y.size!==n.size||y.crc!==n.crc)throw Ct.Errors.DESCRIPTOR_FAULTY();if(Ct.crc32(w)!==y.crc)return!1}else if(Ct.crc32(w)!==n.localHeader.crc)return!1;return!0}function p(w,y,S){if(typeof y>"u"&&typeof w=="string"&&(S=w,w=void 0),i)return w&&y&&y(Buffer.alloc(0),Ct.Errors.DIRECTORY_CONTENT_ERROR()),Buffer.alloc(0);var D=m();if(D.length===0)return w&&y&&y(D),D;if(n.encrypted){if(typeof S!="string"&&!Buffer.isBuffer(S))throw Ct.Errors.INVALID_PASS_PARAM();D=bT.ZipCrypto.decrypt(D,n,S)}var _=Buffer.alloc(n.size);switch(n.method){case Ct.Constants.STORED:if(D.copy(_),d(_))return w&&y&&y(_),_;throw w&&y&&y(_,Ct.Errors.BAD_CRC()),Ct.Errors.BAD_CRC();case Ct.Constants.DEFLATED:var A=new bT.Inflater(D,n.size);if(w)A.inflateAsync(function(U){U.copy(U,0),y&&(d(U)?y(U):y(U,Ct.Errors.BAD_CRC()))});else{if(A.inflate(_).copy(_,0),!d(_))throw Ct.Errors.BAD_CRC(`"${f.decode(r)}"`);return _}break;default:throw w&&y&&y(Buffer.alloc(0),Ct.Errors.UNKNOWN_METHOD()),Ct.Errors.UNKNOWN_METHOD()}}function g(w,y){if((!s||!s.length)&&Buffer.isBuffer(e))return w&&y&&y(m()),m();if(s.length&&!i){var S;switch(n.method){case Ct.Constants.STORED:return n.compressedSize=n.size,S=Buffer.alloc(s.length),s.copy(S),w&&y&&y(S),S;default:case Ct.Constants.DEFLATED:var D=new bT.Deflater(s);if(w)D.deflateAsync(function(A){S=Buffer.alloc(A.length),n.compressedSize=A.length,A.copy(S),y&&y(S)});else{var _=D.deflate();return n.compressedSize=_.length,_}D=null;break}}else if(w&&y)y(Buffer.alloc(0));else return Buffer.alloc(0)}function h(w,y){return(w.readUInt32LE(y+4)<<4)+w.readUInt32LE(y)}function v(w){try{for(var y=0,S,D,_;y+4<w.length;)S=w.readUInt16LE(y),y+=2,D=w.readUInt16LE(y),y+=2,_=w.slice(y,y+D),y+=D,cn.ID_ZIP64===S&&C(_)}catch{throw Ct.Errors.EXTRA_FIELD_PARSE_ERROR()}}function C(w){var y,S,D,_;w.length>=cn.EF_ZIP64_SCOMP&&(y=h(w,cn.EF_ZIP64_SUNCOMP),n.size===cn.EF_ZIP64_OR_32&&(n.size=y)),w.length>=cn.EF_ZIP64_RHO&&(S=h(w,cn.EF_ZIP64_SCOMP),n.compressedSize===cn.EF_ZIP64_OR_32&&(n.compressedSize=S)),w.length>=cn.EF_ZIP64_DSN&&(D=h(w,cn.EF_ZIP64_RHO),n.offset===cn.EF_ZIP64_OR_32&&(n.offset=D)),w.length>=cn.EF_ZIP64_DSN+4&&(_=w.readUInt32LE(cn.EF_ZIP64_DSN),n.diskNumStart===cn.EF_ZIP64_OR_16&&(n.diskNumStart=_))}return{get entryName(){return f.decode(r)},get rawEntryName(){return r},set entryName(w){r=Ct.toBuffer(w,f.encode);var y=r[r.length-1];i=y===47||y===92,n.fileNameLength=r.length},get efs(){return typeof l=="function"?l(this.entryName):l},get extra(){return a},set extra(w){a=w,n.extraLength=w.length,v(w)},get comment(){return f.decode(o)},set comment(w){if(o=Ct.toBuffer(w,f.encode),n.commentLength=o.length,o.length>65535)throw Ct.Errors.COMMENT_TOO_LONG()},get name(){var w=f.decode(r);return i?w.substr(w.length-1).split("/").pop():w.split("/").pop()},get isDirectory(){return i},getCompressedData:function(){return g(!1,null)},getCompressedDataAsync:function(w){g(!0,w)},setData:function(w){s=Ct.toBuffer(w,Ct.decoder.encode),!i&&s.length?(n.size=s.length,n.method=Ct.Constants.DEFLATED,n.crc=Ct.crc32(w),n.changed=!0):n.method=Ct.Constants.STORED},getData:function(w){return n.changed?s:p(!1,null,w)},getDataAsync:function(w,y){n.changed?w(s):p(!0,w,y)},set attr(w){n.attr=w},get attr(){return n.attr},set header(w){n.loadFromBinary(w)},get header(){return n},packCentralHeader:function(){n.flags_efs=this.efs,n.extraLength=a.length;var w=n.centralHeaderToBinary(),y=Ct.Constants.CENHDR;return r.copy(w,y),y+=r.length,a.copy(w,y),y+=n.extraLength,o.copy(w,y),w},packLocalHeader:function(){let w=0;n.flags_efs=this.efs,n.extraLocalLength=c.length;let y=n.localHeaderToBinary(),S=Buffer.alloc(y.length+r.length+n.extraLocalLength);return y.copy(S,w),w+=y.length,r.copy(S,w),w+=r.length,c.copy(S,w),w+=c.length,S},toJSON:function(){let w=function(y){return"<"+(y&&y.length+" bytes buffer"||"null")+">"};return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:n.toJSON(),compressedData:w(e),data:w(s)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var iB=M((rCe,oB)=>{var rB=TT(),qte=PT(),Sr=rp();oB.exports=function(t,e){var n=[],r={},o=Buffer.alloc(0),i=new qte.MainHeader,s=!1,a=null;let c=new Set,l=e,{noSort:u,decoder:f}=l;t?p(l.readEntries):s=!0;function m(){let h=new Set;for(let v of Object.keys(r)){let C=v.split("/");if(C.pop(),!!C.length)for(let w=0;w<C.length;w++){let y=C.slice(0,w+1).join("/")+"/";h.add(y)}}for(let v of h)if(!(v in r)){let C=new rB(l);C.entryName=v,C.attr=16,C.temporary=!0,n.push(C),r[C.entryName]=C,c.add(C)}}function d(){if(s=!0,r={},i.diskEntries>(t.length-i.offset)/Sr.Constants.CENHDR)throw Sr.Errors.DISK_ENTRY_TOO_LARGE();n=new Array(i.diskEntries);for(var h=i.offset,v=0;v<n.length;v++){var C=h,w=new rB(l,t);w.header=t.slice(C,C+=Sr.Constants.CENHDR),w.entryName=t.slice(C,C+=w.header.fileNameLength),w.header.extraLength&&(w.extra=t.slice(C,C+=w.header.extraLength)),w.header.commentLength&&(w.comment=t.slice(C,C+w.header.commentLength)),h+=w.header.centralHeaderSize,n[v]=w,r[w.entryName]=w}c.clear(),m()}function p(h){var v=t.length-Sr.Constants.ENDHDR,C=Math.max(0,v-65535),w=C,y=t.length,S=-1,D=0;for((typeof l.trailingSpace=="boolean"?l.trailingSpace:!1)&&(C=0),v;v>=w;v--)if(t[v]===80){if(t.readUInt32LE(v)===Sr.Constants.ENDSIG){S=v,D=v,y=v+Sr.Constants.ENDHDR,w=v-Sr.Constants.END64HDR;continue}if(t.readUInt32LE(v)===Sr.Constants.END64SIG){w=C;continue}if(t.readUInt32LE(v)===Sr.Constants.ZIP64SIG){S=v,y=v+Sr.readBigUInt64LE(t,v+Sr.Constants.ZIP64SIZE)+Sr.Constants.ZIP64LEAD;break}}if(S==-1)throw Sr.Errors.INVALID_FORMAT();i.loadFromBinary(t.slice(S,y)),i.commentLength&&(o=t.slice(D+Sr.Constants.ENDHDR)),h&&d()}function g(){n.length>1&&!u&&n.sort((h,v)=>h.entryName.toLowerCase().localeCompare(v.entryName.toLowerCase()))}return{get entries(){return s||d(),n.filter(h=>!c.has(h))},get comment(){return f.decode(o)},set comment(h){o=Sr.toBuffer(h,f.encode),i.commentLength=o.length},getEntryCount:function(){return s?n.length:i.diskEntries},forEach:function(h){this.entries.forEach(h)},getEntry:function(h){return s||d(),r[h]||null},setEntry:function(h){s||d(),n.push(h),r[h.entryName]=h,i.totalEntries=n.length},deleteFile:function(h,v=!0){s||d();let C=r[h];this.getEntryChildren(C,v).map(y=>y.entryName).forEach(this.deleteEntry)},deleteEntry:function(h){s||d();let v=r[h],C=n.indexOf(v);C>=0&&(n.splice(C,1),delete r[h],i.totalEntries=n.length)},getEntryChildren:function(h,v=!0){if(s||d(),typeof h=="object")if(h.isDirectory&&v){let C=[],w=h.entryName;for(let y of n)y.entryName.startsWith(w)&&C.push(y);return C}else return[h];return[]},getChildCount:function(h){if(h&&h.isDirectory){let v=this.getEntryChildren(h);return v.includes(h)?v.length-1:v.length}return 0},compressToBuffer:function(){s||d(),g();let h=[],v=[],C=0,w=0;i.size=0,i.offset=0;let y=0;for(let _ of this.entries){let A=_.getCompressedData();_.header.offset=w;let U=_.packLocalHeader(),k=U.length+A.length;w+=k,h.push(U),h.push(A);let E=_.packCentralHeader();v.push(E),i.size+=E.length,C+=k+E.length,y++}C+=i.mainHeaderSize,i.offset=w,i.totalEntries=y,w=0;let S=Buffer.alloc(C);for(let _ of h)_.copy(S,w),w+=_.length;for(let _ of v)_.copy(S,w),w+=_.length;let D=i.toBinary();return o&&o.copy(D,Sr.Constants.ENDHDR),D.copy(S,w),t=S,s=!1,S},toAsyncBuffer:function(h,v,C,w){try{s||d(),g();let y=[],S=[],D=0,_=0,A=0;i.size=0,i.offset=0;let U=function(k){if(k.length>0){let E=k.shift(),x=E.entryName+E.extra.toString();C&&C(x),E.getCompressedDataAsync(function(b){w&&w(x),E.header.offset=_;let I=E.packLocalHeader(),T=I.length+b.length;_+=T,y.push(I),y.push(b);let R=E.packCentralHeader();S.push(R),i.size+=R.length,D+=T+R.length,A++,U(k)})}else{D+=i.mainHeaderSize,i.offset=_,i.totalEntries=A,_=0;let E=Buffer.alloc(D);y.forEach(function(b){b.copy(E,_),_+=b.length}),S.forEach(function(b){b.copy(E,_),_+=b.length});let x=i.toBinary();o&&o.copy(x,Sr.Constants.ENDHDR),x.copy(E,_),t=E,s=!1,h(E)}};U(Array.from(this.entries))}catch(y){v(y)}}}}});var cB=M((oCe,aB)=>{var Qt=rp(),ln=require("path"),Gte=TT(),zte=iB(),Pf=(...t)=>Qt.findLast(t,e=>typeof e=="boolean"),sB=(...t)=>Qt.findLast(t,e=>typeof e=="string"),Kte=(...t)=>Qt.findLast(t,e=>typeof e=="function"),Jte={noSort:!1,readEntries:!1,method:Qt.Constants.NONE,fs:null};aB.exports=function(t,e){let n=null,r=Object.assign(Object.create(null),Jte);t&&typeof t=="object"&&(t instanceof Uint8Array||(Object.assign(r,t),t=r.input?r.input:void 0,r.input&&delete r.input),Buffer.isBuffer(t)&&(n=t,r.method=Qt.Constants.BUFFER,t=void 0)),Object.assign(r,e);let o=new Qt(r);if((typeof r.decoder!="object"||typeof r.decoder.encode!="function"||typeof r.decoder.decode!="function")&&(r.decoder=Qt.decoder),t&&typeof t=="string")if(o.fs.existsSync(t))r.method=Qt.Constants.FILE,r.filename=t,n=o.fs.readFileSync(t);else throw Qt.Errors.INVALID_FILENAME();let i=new zte(n,r),{canonical:s,sanitize:a,zipnamefix:c}=Qt;function l(d){if(d&&i){var p;if(typeof d=="string"&&(p=i.getEntry(ln.posix.normalize(d))),typeof d=="object"&&typeof d.entryName<"u"&&typeof d.header<"u"&&(p=i.getEntry(d.entryName)),p)return p}return null}function u(d){let{join:p,normalize:g,sep:h}=ln.posix;return p(".",g(h+d.split("\\").join(h)+h))}function f(d){return d instanceof RegExp?(function(p){return function(g){return p.test(g)}})(d):typeof d!="function"?()=>!0:d}let m=(d,p)=>{let g=p.slice(-1);return g=g===o.sep?o.sep:"",ln.relative(d,p)+g};return{readFile:function(d,p){var g=l(d);return g&&g.getData(p)||null},childCount:function(d){let p=l(d);if(p)return i.getChildCount(p)},readFileAsync:function(d,p){var g=l(d);g?g.getDataAsync(p):p(null,"getEntry failed for:"+d)},readAsText:function(d,p){var g=l(d);if(g){var h=g.getData();if(h&&h.length)return h.toString(p||"utf8")}return""},readAsTextAsync:function(d,p,g){var h=l(d);h?h.getDataAsync(function(v,C){if(C){p(v,C);return}v&&v.length?p(v.toString(g||"utf8")):p("")}):p("")},deleteFile:function(d,p=!0){var g=l(d);g&&i.deleteFile(g.entryName,p)},deleteEntry:function(d){var p=l(d);p&&i.deleteEntry(p.entryName)},addZipComment:function(d){i.comment=d},getZipComment:function(){return i.comment||""},addZipEntryComment:function(d,p){var g=l(d);g&&(g.comment=p)},getZipEntryComment:function(d){var p=l(d);return p&&p.comment||""},updateFile:function(d,p){var g=l(d);g&&g.setData(p)},addLocalFile:function(d,p,g,h){if(o.fs.existsSync(d)){p=p?u(p):"";let v=ln.win32.basename(ln.win32.normalize(d));p+=g||v;let C=o.fs.statSync(d),w=C.isFile()?o.fs.readFileSync(d):Buffer.alloc(0);C.isDirectory()&&(p+=o.sep),this.addFile(p,w,h,C)}else throw Qt.Errors.FILE_NOT_FOUND(d)},addLocalFileAsync:function(d,p){d=typeof d=="object"?d:{localPath:d};let g=ln.resolve(d.localPath),{comment:h}=d,{zipPath:v,zipName:C}=d,w=this;o.fs.stat(g,function(y,S){if(y)return p(y,!1);v=v?u(v):"";let D=ln.win32.basename(ln.win32.normalize(g));if(v+=C||D,S.isFile())o.fs.readFile(g,function(_,A){return _?p(_,!1):(w.addFile(v,A,h,S),setImmediate(p,void 0,!0))});else if(S.isDirectory())return v+=o.sep,w.addFile(v,Buffer.alloc(0),h,S),setImmediate(p,void 0,!0)})},addLocalFolder:function(d,p,g){if(g=f(g),p=p?u(p):"",d=ln.normalize(d),o.fs.existsSync(d)){let h=o.findFiles(d),v=this;if(h.length)for(let C of h){let w=ln.join(p,m(d,C));g(w)&&v.addLocalFile(C,ln.dirname(w))}}else throw Qt.Errors.FILE_NOT_FOUND(d)},addLocalFolderAsync:function(d,p,g,h){h=f(h),g=g?u(g):"",d=ln.normalize(d);var v=this;o.fs.open(d,"r",function(C){if(C&&C.code==="ENOENT")p(void 0,Qt.Errors.FILE_NOT_FOUND(d));else if(C)p(void 0,C);else{var w=o.findFiles(d),y=-1,S=function(){if(y+=1,y<w.length){var D=w[y],_=m(d,D).split("\\").join("/");_=_.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),h(_)?o.fs.stat(D,function(A,U){A&&p(void 0,A),U.isFile()?o.fs.readFile(D,function(k,E){k?p(void 0,k):(v.addFile(g+_,E,"",U),S())}):(v.addFile(g+_+"/",Buffer.alloc(0),"",U),S())}):process.nextTick(()=>{S()})}else p(!0,void 0)};S()}})},addLocalFolderAsync2:function(d,p){let g=this;d=typeof d=="object"?d:{localPath:d},localPath=ln.resolve(u(d.localPath));let{zipPath:h,filter:v,namefix:C}=d;v instanceof RegExp?v=(function(S){return function(D){return S.test(D)}})(v):typeof v!="function"&&(v=function(){return!0}),h=h?u(h):"",C=="latin1"&&(C=S=>S.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,"")),typeof C!="function"&&(C=S=>S);let w=S=>ln.join(h,C(m(localPath,S))),y=S=>ln.win32.basename(ln.win32.normalize(C(S)));o.fs.open(localPath,"r",function(S){S&&S.code==="ENOENT"?p(void 0,Qt.Errors.FILE_NOT_FOUND(localPath)):S?p(void 0,S):o.findFilesAsync(localPath,function(D,_){if(D)return p(D);_=_.filter(A=>v(w(A))),_.length||p(void 0,!1),setImmediate(_.reverse().reduce(function(A,U){return function(k,E){if(k||E===!1)return setImmediate(A,k,!1);g.addLocalFileAsync({localPath:U,zipPath:ln.dirname(w(U)),zipName:y(U)},A)}},p))})})},addLocalFolderPromise:function(d,p){return new Promise((g,h)=>{this.addLocalFolderAsync2(Object.assign({localPath:d},p),(v,C)=>{v&&h(v),C&&g(this)})})},addFile:function(d,p,g,h){d=c(d);let v=l(d),C=v!=null;C||(v=new Gte(r),v.entryName=d),v.comment=g||"";let w=typeof h=="object"&&h instanceof o.fs.Stats;w&&(v.header.time=h.mtime);var y=v.isDirectory?16:0;let S=v.isDirectory?16384:32768;return w?S|=4095&h.mode:typeof h=="number"?S|=4095&h:S|=v.isDirectory?493:420,y=(y|S<<16)>>>0,v.attr=y,v.setData(p),C||i.setEntry(v),v},getEntries:function(d){return i.password=d,i?i.entries:[]},getEntry:function(d){return l(d)},getEntryCount:function(){return i.getEntryCount()},forEach:function(d){return i.forEach(d)},extractEntryTo:function(d,p,g,h,v,C){h=Pf(!1,h),v=Pf(!1,v),g=Pf(!0,g),C=sB(v,C);var w=l(d);if(!w)throw Qt.Errors.NO_ENTRY();var y=s(w.entryName),S=a(p,C&&!w.isDirectory?C:g?y:ln.basename(y));if(w.isDirectory){var D=i.getEntryChildren(w);return D.forEach(function(U){if(U.isDirectory)return;var k=U.getData();if(!k)throw Qt.Errors.CANT_EXTRACT_FILE();var E=s(U.entryName),x=a(p,g?E:ln.basename(E));let b=v?U.header.fileAttr:void 0;o.writeFileTo(x,k,h,b)}),!0}var _=w.getData(i.password);if(!_)throw Qt.Errors.CANT_EXTRACT_FILE();if(o.fs.existsSync(S)&&!h)throw Qt.Errors.CANT_OVERRIDE();let A=v?d.header.fileAttr:void 0;return o.writeFileTo(S,_,h,A),!0},test:function(d){if(!i)return!1;for(var p in i.entries)try{if(p.isDirectory)continue;var g=i.entries[p].getData(d);if(!g)return!1}catch{return!1}return!0},extractAllTo:function(d,p,g,h){if(g=Pf(!1,g),h=sB(g,h),p=Pf(!1,p),!i)throw Qt.Errors.NO_ZIP();i.entries.forEach(function(v){var C=a(d,s(v.entryName));if(v.isDirectory){o.makeDir(C);return}var w=v.getData(h);if(!w)throw Qt.Errors.CANT_EXTRACT_FILE();let y=g?v.header.fileAttr:void 0;o.writeFileTo(C,w,p,y);try{o.fs.utimesSync(C,v.header.time,v.header.time)}catch{throw Qt.Errors.CANT_EXTRACT_FILE()}})},extractAllToAsync:function(d,p,g,h){if(h=Kte(p,g,h),g=Pf(!1,g),p=Pf(!1,p),!h)return new Promise((S,D)=>{this.extractAllToAsync(d,p,g,function(_){_?D(_):S(this)})});if(!i){h(Qt.Errors.NO_ZIP());return}d=ln.resolve(d);let v=S=>a(d,ln.normalize(s(S.entryName))),C=(S,D)=>new Error(S+': "'+D+'"'),w=[],y=[];i.entries.forEach(S=>{S.isDirectory?w.push(S):y.push(S)});for(let S of w){let D=v(S),_=g?S.header.fileAttr:void 0;try{o.makeDir(D),_&&o.fs.chmodSync(D,_),o.fs.utimesSync(D,S.header.time,S.header.time)}catch{h(C("Unable to create folder",D))}}y.reverse().reduce(function(S,D){return function(_){if(_)S(_);else{let A=ln.normalize(s(D.entryName)),U=a(d,A);D.getDataAsync(function(k,E){if(E)S(E);else if(!k)S(Qt.Errors.CANT_EXTRACT_FILE());else{let x=g?D.header.fileAttr:void 0;o.writeFileToAsync(U,k,p,x,function(b){b||S(C("Unable to write file",U)),o.fs.utimes(U,D.header.time,D.header.time,function(I){I?S(C("Unable to set times",U)):S()})})}})}}},h)()},writeZip:function(d,p){if(arguments.length===1&&typeof d=="function"&&(p=d,d=""),!d&&r.filename&&(d=r.filename),!!d){var g=i.compressToBuffer();if(g){var h=o.writeFileTo(d,g,!0);typeof p=="function"&&p(h?null:new Error("failed"),"")}}},writeZipPromise:function(d,p){let{overwrite:g,perm:h}=Object.assign({overwrite:!0},p);return new Promise((v,C)=>{!d&&r.filename&&(d=r.filename),d||C("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then(w=>{let y=S=>S?v(S):C("ADM-ZIP: Wasn't able to write zip file");o.writeFileToAsync(d,w,g,h,y)},C)})},toBufferPromise:function(){return new Promise((d,p)=>{i.toAsyncBuffer(d,p)})},toBuffer:function(d,p,g,h){return typeof d=="function"?(i.toAsyncBuffer(d,p,g,h),null):i.compressToBuffer()}}}});var uB=M((sCe,lB)=>{lB.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var RT=M((cCe,dB)=>{var fB=uB();dB.exports=class{constructor(e){this.hwm=e||16,this.head=new fB(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(e){if(this.length++,!this.head.push(e)){let n=this.head;this.head=n.next=new fB(2*this.head.buffer.length),this.head.push(e)}}shift(){this.length!==0&&this.length--;let e=this.tail.shift();if(e===void 0&&this.tail.next){let n=this.tail.next;return this.tail.next=null,this.tail=n,this.tail.shift()}return e}peek(){let e=this.tail.peek();return e===void 0&&this.tail.next?this.tail.next.peek():e}isEmpty(){return this.length===0}}});var ip=M((lCe,mB)=>{function Xte(t){return Buffer.isBuffer(t)||t instanceof Uint8Array}function Zte(t){return Buffer.isEncoding(t)}function Qte(t,e,n){return Buffer.alloc(t,e,n)}function ene(t){return Buffer.allocUnsafe(t)}function tne(t){return Buffer.allocUnsafeSlow(t)}function nne(t,e){return Buffer.byteLength(t,e)}function rne(t,e){return Buffer.compare(t,e)}function one(t,e){return Buffer.concat(t,e)}function ine(t,e,n,r,o){return St(t).copy(e,n,r,o)}function sne(t,e){return St(t).equals(e)}function ane(t,e,n,r,o){return St(t).fill(e,n,r,o)}function cne(t,e,n){return Buffer.from(t,e,n)}function lne(t,e,n,r){return St(t).includes(e,n,r)}function une(t,e,n,r){return St(t).indexOf(e,n,r)}function fne(t,e,n,r){return St(t).lastIndexOf(e,n,r)}function dne(t){return St(t).swap16()}function mne(t){return St(t).swap32()}function pne(t){return St(t).swap64()}function St(t){return Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength)}function hne(t,e,n,r){return St(t).toString(e,n,r)}function gne(t,e,n,r,o){return St(t).write(e,n,r,o)}function vne(t,e,n){return St(t).writeDoubleLE(e,n)}function wne(t,e,n){return St(t).writeFloatLE(e,n)}function yne(t,e,n){return St(t).writeUInt32LE(e,n)}function Cne(t,e,n){return St(t).writeInt32LE(e,n)}function Ene(t,e){return St(t).readDoubleLE(e)}function Sne(t,e){return St(t).readFloatLE(e)}function xne(t,e){return St(t).readUInt32LE(e)}function _ne(t,e){return St(t).readInt32LE(e)}function Dne(t,e,n){return St(t).writeDoubleBE(e,n)}function Ine(t,e,n){return St(t).writeFloatBE(e,n)}function Pne(t,e,n){return St(t).writeUInt32BE(e,n)}function bne(t,e,n){return St(t).writeInt32BE(e,n)}function Tne(t,e){return St(t).readDoubleBE(e)}function Rne(t,e){return St(t).readFloatBE(e)}function kne(t,e){return St(t).readUInt32BE(e)}function Nne(t,e){return St(t).readInt32BE(e)}mB.exports={isBuffer:Xte,isEncoding:Zte,alloc:Qte,allocUnsafe:ene,allocUnsafeSlow:tne,byteLength:nne,compare:rne,concat:one,copy:ine,equals:sne,fill:ane,from:cne,includes:lne,indexOf:une,lastIndexOf:fne,swap16:dne,swap32:mne,swap64:pne,toBuffer:St,toString:hne,write:gne,writeDoubleLE:vne,writeFloatLE:wne,writeUInt32LE:yne,writeInt32LE:Cne,readDoubleLE:Ene,readFloatLE:Sne,readUInt32LE:xne,readInt32LE:_ne,writeDoubleBE:Dne,writeFloatBE:Ine,writeUInt32BE:Pne,writeInt32BE:bne,readDoubleBE:Tne,readFloatBE:Rne,readUInt32BE:kne,readInt32BE:Nne}});var hB=M((fCe,pB)=>{var Lne=ip();pB.exports=class{constructor(e){this.encoding=e}get remaining(){return 0}decode(e){return Lne.toString(e,this.encoding)}flush(){return""}}});var vB=M((mCe,gB)=>{var Ane=ip();gB.exports=class{constructor(){this.codePoint=0,this.bytesSeen=0,this.bytesNeeded=0,this.lowerBoundary=128,this.upperBoundary=191}get remaining(){return this.bytesSeen}decode(e){if(this.bytesNeeded===0){let r=!0;for(let o=Math.max(0,e.byteLength-4),i=e.byteLength;o<i&&r;o++)r=e[o]<=127;if(r)return Ane.toString(e,"utf8")}let n="";for(let r=0,o=e.byteLength;r<o;r++){let i=e[r];if(this.bytesNeeded===0){i<=127?n+=String.fromCharCode(i):(this.bytesSeen=1,i>=194&&i<=223?(this.bytesNeeded=2,this.codePoint=i&31):i>=224&&i<=239?(i===224?this.lowerBoundary=160:i===237&&(this.upperBoundary=159),this.bytesNeeded=3,this.codePoint=i&15):i>=240&&i<=244?(i===240&&(this.lowerBoundary=144),i===244&&(this.upperBoundary=143),this.bytesNeeded=4,this.codePoint=i&7):n+="\uFFFD");continue}if(i<this.lowerBoundary||i>this.upperBoundary){this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,n+="\uFFFD";continue}this.lowerBoundary=128,this.upperBoundary=191,this.codePoint=this.codePoint<<6|i&63,this.bytesSeen++,this.bytesSeen===this.bytesNeeded&&(n+=String.fromCodePoint(this.codePoint),this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0)}return n}flush(){let e=this.bytesNeeded>0?"\uFFFD":"";return this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,e}}});var yB=M((hCe,wB)=>{var Fne=hB(),One=vB();wB.exports=class{constructor(e="utf8"){switch(this.encoding=Une(e),this.encoding){case"utf8":this.decoder=new One;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new Fne(this.encoding)}}get remaining(){return this.decoder.remaining}push(e){return typeof e=="string"?e:this.decoder.decode(e)}write(e){return this.push(e)}end(e){let n="";return e&&(n=this.push(e)),n+=this.decoder.flush(),n}};function Une(t){switch(t=t.toLowerCase(),t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:throw new Error("Unknown encoding: "+t)}}});var YT=M((gCe,WB)=>{var{EventEmitter:Mne}=require("events"),SS=new Error("Stream was destroyed"),kT=new Error("Premature close"),DB=RT(),$ne=yB(),en=(1<<29)-1,Qs=1,MT=2,bf=4,gv=8,IB=en^Qs,Hne=en^MT,Ev=16,sp=32,lp=64,Il=128,Sv=256,$T=512,Tf=1024,NT=2048,HT=4096,BT=8192,cs=16384,Dl=32768,xS=65536,Rf=131072,PB=Sv|$T,Bne=Ev|xS,Wne=lp|Ev,jne=HT|Il,WT=Sv|Rf,Vne=en^Ev,Yne=en^lp,qne=en^(lp|xS),CB=en^xS,Gne=en^Sv,zne=en^(Il|BT),Kne=en^Tf,EB=en^PB,bB=en^Dl,Jne=en^sp,TB=en^Rf,Xne=en^WT,uc=1<<18,cp=2<<18,xv=4<<18,kf=8<<18,_v=16<<18,Pl=32<<18,LT=64<<18,ap=128<<18,jT=256<<18,Nf=512<<18,_S=1024<<18,Zne=en^(uc|jT),RB=en^xv,Qne=en^(uc|Nf),ere=en^_v,tre=en^kf,kB=en^ap,nre=en^cp,NB=en^_S,vv=Ev|uc,LB=en^vv,VT=cs|Pl,ea=bf|gv|MT,ti=ea|Qs,AB=ea|VT,rre=RB&Yne,DS=ap|Dl,ore=DS&LB,FB=ti|ore,ire=ti|Tf|cs,SB=ti|cs|Il,sre=ti|Tf|Il,are=ti|HT|Il|BT,cre=ti|Ev|Tf|cs|xS|Rf,lre=ea|Tf|cs,ure=sp|ti|Dl|lp,fre=Dl|Qs,dre=ti|Nf|Pl,mre=kf|_v,OB=kf|uc,pre=kf|_v|ti|uc,xB=ti|uc|kf|_S,hre=xv|uc,gre=uc|jT,vre=ti|Nf|OB|Pl,wre=_v|ea|Nf|Pl,yre=cp|ti|ap|xv,Cre=Nf|Pl|ea,vS=Symbol.asyncIterator||Symbol("asyncIterator"),wS=class{constructor(e,{highWaterMark:n=16384,map:r=null,mapWritable:o,byteLength:i,byteLengthWritable:s}={}){this.stream=e,this.queue=new DB,this.highWaterMark=n,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=s||i||BB,this.map=o||r,this.afterWrite=xre.bind(this),this.afterUpdateNextTick=Ire.bind(this)}get ended(){return(this.stream._duplexState&Pl)!==0}push(e){return(this.stream._duplexState&Cre)!==0?!1:(this.map!==null&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),this.buffered<this.highWaterMark?(this.stream._duplexState|=kf,!0):(this.stream._duplexState|=mre,!1))}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=tre),e}end(e){typeof e=="function"?this.stream.once("finish",e):e!=null&&this.push(e),this.stream._duplexState=(this.stream._duplexState|Nf)&RB}autoBatch(e,n){let r=[],o=this.stream;for(r.push(e);(o._duplexState&xB)===OB;)r.push(o._writableState.shift());if((o._duplexState&ti)!==0)return n(null);o._writev(r,n)}update(){let e=this.stream;e._duplexState|=cp;do{for(;(e._duplexState&xB)===kf;){let n=this.shift();e._duplexState|=gre,e._write(n,this.afterWrite)}(e._duplexState&hre)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=nre}updateNonPrimary(){let e=this.stream;if((e._duplexState&vre)===Nf){e._duplexState=e._duplexState|uc,e._final(Sre.bind(this));return}if((e._duplexState&ea)===bf){(e._duplexState&DS)===0&&(e._duplexState|=vv,e._destroy(UB.bind(this)));return}(e._duplexState&FB)===Qs&&(e._duplexState=(e._duplexState|vv)&IB,e._open(MB.bind(this)))}continueUpdate(){return(this.stream._duplexState&ap)===0?!1:(this.stream._duplexState&=kB,!0)}updateCallback(){(this.stream._duplexState&yre)===xv?this.update():this.updateNextTick()}updateNextTick(){(this.stream._duplexState&ap)===0&&(this.stream._duplexState|=ap,(this.stream._duplexState&cp)===0&&queueMicrotask(this.afterUpdateNextTick))}},AT=class{constructor(e,{highWaterMark:n=16384,map:r=null,mapReadable:o,byteLength:i,byteLengthReadable:s}={}){this.stream=e,this.queue=new DB,this.highWaterMark=n===0?1:n,this.buffered=0,this.readAhead=n>0,this.error=null,this.pipeline=null,this.byteLength=s||i||BB,this.map=o||r,this.pipeTo=null,this.afterRead=_re.bind(this),this.afterUpdateNextTick=Dre.bind(this)}get ended(){return(this.stream._duplexState&cs)!==0}pipe(e,n){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof n!="function"&&(n=null),this.stream._duplexState|=$T,this.pipeTo=e,this.pipeline=new OT(this.stream,e,n),n&&this.stream.on("error",_B),Cv(e))e._writableState.pipeline=this.pipeline,n&&e.on("error",_B),e.on("finish",this.pipeline.finished.bind(this.pipeline));else{let r=this.pipeline.done.bind(this.pipeline,e),o=this.pipeline.done.bind(this.pipeline,e,null);e.on("error",r),e.on("close",o),e.on("finish",this.pipeline.finished.bind(this.pipeline))}e.on("drain",Ere.bind(this)),this.stream.emit("piping",e),e.emit("pipe",this.stream)}push(e){let n=this.stream;return e===null?(this.highWaterMark=0,n._duplexState=(n._duplexState|Tf)&qne,!1):this.map!==null&&(e=this.map(e),e===null)?(n._duplexState&=CB,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(e),this.queue.push(e),n._duplexState=(n._duplexState|Il)&CB,this.buffered<this.highWaterMark)}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=zne),e}unshift(e){let n=[this.map!==null?this.map(e):e];for(;this.buffered>0;)n.push(this.shift());for(let r=0;r<n.length-1;r++){let o=n[r];this.buffered+=this.byteLength(o),this.queue.push(o)}this.push(n[n.length-1])}read(){let e=this.stream;if((e._duplexState&SB)===Il){let n=this.shift();return this.pipeTo!==null&&this.pipeTo.write(n)===!1&&(e._duplexState&=EB),(e._duplexState&NT)!==0&&e.emit("data",n),n}return this.readAhead===!1&&(e._duplexState|=Rf,this.updateNextTick()),null}drain(){let e=this.stream;for(;(e._duplexState&SB)===Il&&(e._duplexState&PB)!==0;){let n=this.shift();this.pipeTo!==null&&this.pipeTo.write(n)===!1&&(e._duplexState&=EB),(e._duplexState&NT)!==0&&e.emit("data",n)}}update(){let e=this.stream;e._duplexState|=sp;do{for(this.drain();this.buffered<this.highWaterMark&&(e._duplexState&cre)===Rf;)e._duplexState|=Bne,e._read(this.afterRead),this.drain();(e._duplexState&are)===jne&&(e._duplexState|=BT,e.emit("readable")),(e._duplexState&Wne)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=Jne}updateNonPrimary(){let e=this.stream;if((e._duplexState&sre)===Tf&&(e._duplexState=(e._duplexState|cs)&Kne,e.emit("end"),(e._duplexState&AB)===VT&&(e._duplexState|=bf),this.pipeTo!==null&&this.pipeTo.end()),(e._duplexState&ea)===bf){(e._duplexState&DS)===0&&(e._duplexState|=vv,e._destroy(UB.bind(this)));return}(e._duplexState&FB)===Qs&&(e._duplexState=(e._duplexState|vv)&IB,e._open(MB.bind(this)))}continueUpdate(){return(this.stream._duplexState&Dl)===0?!1:(this.stream._duplexState&=bB,!0)}updateCallback(){(this.stream._duplexState&ure)===lp?this.update():this.updateNextTick()}updateNextTickIfOpen(){(this.stream._duplexState&fre)===0&&(this.stream._duplexState|=Dl,(this.stream._duplexState&sp)===0&&queueMicrotask(this.afterUpdateNextTick))}updateNextTick(){(this.stream._duplexState&Dl)===0&&(this.stream._duplexState|=Dl,(this.stream._duplexState&sp)===0&&queueMicrotask(this.afterUpdateNextTick))}},FT=class{constructor(e){this.data=null,this.afterTransform=bre.bind(e),this.afterFinal=null}},OT=class{constructor(e,n,r){this.from=e,this.to=n,this.afterPipe=r,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(e,n){if(n&&(this.error=n),e===this.to&&(this.to=null,this.from!==null)){((this.from._duplexState&cs)===0||!this.pipeToFinished)&&this.from.destroy(this.error||new Error("Writable stream closed prematurely"));return}if(e===this.from&&(this.from=null,this.to!==null)){(e._duplexState&cs)===0&&this.to.destroy(this.error||new Error("Readable stream closed before ending"));return}this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null}};function Ere(){this.stream._duplexState|=$T,this.updateCallback()}function Sre(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&ea)===0&&(e._duplexState|=Pl,e.emit("finish")),(e._duplexState&AB)===VT&&(e._duplexState|=bf),e._duplexState&=Qne,(e._duplexState&cp)===0?this.update():this.updateNextTick()}function UB(t){let e=this.stream;!t&&this.error!==SS&&(t=this.error),t&&e.emit("error",t),e._duplexState|=gv,e.emit("close");let n=e._readableState,r=e._writableState;if(n!==null&&n.pipeline!==null&&n.pipeline.done(e,t),r!==null){for(;r.drains!==null&&r.drains.length>0;)r.drains.shift().resolve(!1);r.pipeline!==null&&r.pipeline.done(e,t)}}function xre(t){let e=this.stream;t&&e.destroy(t),e._duplexState&=Zne,this.drains!==null&&Pre(this.drains),(e._duplexState&pre)===_v&&(e._duplexState&=ere,(e._duplexState&LT)===LT&&e.emit("drain")),this.updateCallback()}function _re(t){t&&this.stream.destroy(t),this.stream._duplexState&=Vne,this.readAhead===!1&&(this.stream._duplexState&Sv)===0&&(this.stream._duplexState&=TB),this.updateCallback()}function Dre(){(this.stream._duplexState&sp)===0&&(this.stream._duplexState&=bB,this.update())}function Ire(){(this.stream._duplexState&cp)===0&&(this.stream._duplexState&=kB,this.update())}function Pre(t){for(let e=0;e<t.length;e++)--t[e].writes===0&&(t.shift().resolve(!0),e--)}function MB(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&bf)===0&&((e._duplexState&ire)===0&&(e._duplexState|=lp),(e._duplexState&dre)===0&&(e._duplexState|=xv),e.emit("open")),e._duplexState&=LB,e._writableState!==null&&e._writableState.updateCallback(),e._readableState!==null&&e._readableState.updateCallback()}function bre(t,e){e!=null&&this.push(e),this._writableState.afterWrite(t)}function Tre(t){this._readableState!==null&&(t==="data"&&(this._duplexState|=NT|WT,this._readableState.updateNextTick()),t==="readable"&&(this._duplexState|=HT,this._readableState.updateNextTick())),this._writableState!==null&&t==="drain"&&(this._duplexState|=LT,this._writableState.updateNextTick())}var wv=class extends Mne{constructor(e){super(),this._duplexState=0,this._readableState=null,this._writableState=null,e&&(e.open&&(this._open=e.open),e.destroy&&(this._destroy=e.destroy),e.predestroy&&(this._predestroy=e.predestroy),e.signal&&e.signal.addEventListener("abort",$re.bind(this))),this.on("newListener",Tre)}_open(e){e(null)}_destroy(e){e(null)}_predestroy(){}get readable(){return this._readableState!==null?!0:void 0}get writable(){return this._writableState!==null?!0:void 0}get destroyed(){return(this._duplexState&gv)!==0}get destroying(){return(this._duplexState&ea)!==0}destroy(e){(this._duplexState&ea)===0&&(e||(e=SS),this._duplexState=(this._duplexState|bf)&rre,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=e),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=e),this._duplexState|=MT,this._predestroy(),this._duplexState&=Hne,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}},yS=class t extends wv{constructor(e){super(e),this._duplexState|=Qs|Pl|Rf,this._readableState=new AT(this,e),e&&(this._readableState.readAhead===!1&&(this._duplexState&=TB),e.read&&(this._read=e.read),e.eagerOpen&&this._readableState.updateNextTick(),e.encoding&&this.setEncoding(e.encoding))}setEncoding(e){let n=new $ne(e),r=this._readableState.map||Nre;return this._readableState.map=o,this;function o(i){let s=n.push(i);return s===""&&(i.byteLength!==0||n.remaining>0)?null:r(s)}}_read(e){e(null)}pipe(e,n){return this._readableState.updateNextTick(),this._readableState.pipe(e,n),e}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(e){return this._readableState.updateNextTickIfOpen(),this._readableState.push(e)}unshift(e){return this._readableState.updateNextTickIfOpen(),this._readableState.unshift(e)}resume(){return this._duplexState|=WT,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?Xne:Gne,this}static _fromAsyncIterator(e,n){let r,o=new t({...n,read(s){e.next().then(i).then(s.bind(null,null)).catch(s)},predestroy(){r=e.return()},destroy(s){if(!r)return s(null);r.then(s.bind(null,null)).catch(s)}});return o;function i(s){s.done?o.push(null):o.push(s.value)}}static from(e,n){if(Ore(e))return e;if(e[vS])return this._fromAsyncIterator(e[vS](),n);Array.isArray(e)||(e=e===void 0?[]:[e]);let r=0;return new t({...n,read(o){this.push(r===e.length?null:e[r++]),o(null)}})}static isBackpressured(e){return(e._duplexState&lre)!==0||e._readableState.buffered>=e._readableState.highWaterMark}static isPaused(e){return(e._duplexState&Sv)===0}[vS](){let e=this,n=null,r=null,o=null;return this.on("error",l=>{n=l}),this.on("readable",i),this.on("close",s),{[vS](){return this},next(){return new Promise(function(l,u){r=l,o=u;let f=e.read();f!==null?a(f):(e._duplexState&gv)!==0&&a(null)})},return(){return c(null)},throw(l){return c(l)}};function i(){r!==null&&a(e.read())}function s(){r!==null&&a(null)}function a(l){o!==null&&(n?o(n):l===null&&(e._duplexState&cs)===0?o(SS):r({value:l,done:l===null}),o=r=null)}function c(l){return e.destroy(l),new Promise((u,f)=>{if(e._duplexState&gv)return u({value:void 0,done:!0});e.once("close",function(){l?f(l):u({value:void 0,done:!0})})})}}},CS=class extends wv{constructor(e){super(e),this._duplexState|=Qs|cs,this._writableState=new wS(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final),e.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=_S}uncork(){this._duplexState&=NB,this._writableState.updateNextTick()}_writev(e,n){n(null)}_write(e,n){this._writableState.autoBatch(e,n)}_final(e){e(null)}static isBackpressured(e){return(e._duplexState&wre)!==0}static drained(e){if(e.destroyed)return Promise.resolve(!1);let n=e._writableState,o=(Hre(e)?Math.min(1,n.queue.length):n.queue.length)+(e._duplexState&jT?1:0);return o===0?Promise.resolve(!0):(n.drains===null&&(n.drains=[]),new Promise(i=>{n.drains.push({writes:o,resolve:i})}))}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},yv=class extends yS{constructor(e){super(e),this._duplexState=Qs|this._duplexState&Rf,this._writableState=new wS(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final))}cork(){this._duplexState|=_S}uncork(){this._duplexState&=NB,this._writableState.updateNextTick()}_writev(e,n){n(null)}_write(e,n){this._writableState.autoBatch(e,n)}_final(e){e(null)}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},ES=class extends yv{constructor(e){super(e),this._transformState=new FT(this),e&&(e.transform&&(this._transform=e.transform),e.flush&&(this._flush=e.flush))}_write(e,n){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=e:this._transform(e,this._transformState.afterTransform)}_read(e){if(this._transformState.data!==null){let n=this._transformState.data;this._transformState.data=null,e(null),this._transform(n,this._transformState.afterTransform)}else e(null)}destroy(e){super.destroy(e),this._transformState.data!==null&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(e,n){n(null,e)}_flush(e){e(null)}_final(e){this._transformState.afterFinal=e,this._flush(Rre.bind(this))}},UT=class extends ES{};function Rre(t,e){let n=this._transformState.afterFinal;if(t)return n(t);e!=null&&this.push(e),this.push(null),n(null)}function kre(...t){return new Promise((e,n)=>$B(...t,r=>{if(r)return n(r);e()}))}function $B(t,...e){let n=Array.isArray(t)?[...t,...e]:[t,...e],r=n.length&&typeof n[n.length-1]=="function"?n.pop():null;if(n.length<2)throw new Error("Pipeline requires at least 2 streams");let o=n[0],i=null,s=null;for(let l=1;l<n.length;l++)i=n[l],Cv(o)?o.pipe(i,c):(a(o,!0,l>1,c),o.pipe(i)),o=i;if(r){let l=!1,u=Cv(i)||!!(i._writableState&&i._writableState.autoDestroy);i.on("error",f=>{s===null&&(s=f)}),i.on("finish",()=>{l=!0,u||r(s)}),u&&i.on("close",()=>r(s||(l?null:kT)))}return i;function a(l,u,f,m){l.on("error",m),l.on("close",d);function d(){if(u&&l._readableState&&!l._readableState.ended||f&&l._writableState&&!l._writableState.ended)return m(kT)}}function c(l){if(!(!l||s)){s=l;for(let u of n)u.destroy(l)}}}function Nre(t){return t}function HB(t){return!!t._readableState||!!t._writableState}function Cv(t){return typeof t._duplexState=="number"&&HB(t)}function Lre(t){return!!t._readableState&&t._readableState.ended}function Are(t){return!!t._writableState&&t._writableState.ended}function Fre(t,e={}){let n=t._readableState&&t._readableState.error||t._writableState&&t._writableState.error;return!e.all&&n===SS?null:n}function Ore(t){return Cv(t)&&t.readable}function Ure(t){return(t._duplexState&Qs)!==Qs||(t._duplexState&DS)!==0}function Mre(t){return typeof t=="object"&&t!==null&&typeof t.byteLength=="number"}function BB(t){return Mre(t)?t.byteLength:1024}function _B(){}function $re(){this.destroy(new Error("Stream aborted."))}function Hre(t){return t._writev!==CS.prototype._writev&&t._writev!==yv.prototype._writev}WB.exports={pipeline:$B,pipelinePromise:kre,isStream:HB,isStreamx:Cv,isEnded:Lre,isFinished:Are,isDisturbed:Ure,getStreamError:Fre,Stream:wv,Writable:CS,Readable:yS,Duplex:yv,Transform:ES,PassThrough:UT}});var zT=M(fp=>{var ct=ip(),Bre="0000000000000000000",Wre="7777777777777777777",IS=48,jB=ct.from([117,115,116,97,114,0]),jre=ct.from([IS,IS]),Vre=ct.from([117,115,116,97,114,32]),Yre=ct.from([32,0]),qre=4095,Dv=257,GT=263;fp.decodeLongPath=function(e,n){return up(e,0,e.length,n)};fp.encodePax=function(e){let n="";e.name&&(n+=qT(" path="+e.name+`
`)),e.linkname&&(n+=qT(" linkpath="+e.linkname+`
`));let r=e.pax;if(r)for(let o in r)n+=qT(" "+o+"="+r[o]+`
`);return ct.from(n)};fp.decodePax=function(e){let n={};for(;e.length;){let r=0;for(;r<e.length&&e[r]!==32;)r++;let o=parseInt(ct.toString(e.subarray(0,r)),10);if(!o)return n;let i=ct.toString(e.subarray(r+1,o-1)),s=i.indexOf("=");if(s===-1)return n;n[i.slice(0,s)]=i.slice(s+1),e=e.subarray(o)}return n};fp.encode=function(e){let n=ct.alloc(512),r=e.name,o="";if(e.typeflag===5&&r[r.length-1]!=="/"&&(r+="/"),ct.byteLength(r)!==r.length)return null;for(;ct.byteLength(r)>100;){let i=r.indexOf("/");if(i===-1)return null;o+=o?"/"+r.slice(0,i):r.slice(0,i),r=r.slice(i+1)}return ct.byteLength(r)>100||ct.byteLength(o)>155||e.linkname&&ct.byteLength(e.linkname)>100?null:(ct.write(n,r),ct.write(n,Tl(e.mode&qre,6),100),ct.write(n,Tl(e.uid,6),108),ct.write(n,Tl(e.gid,6),116),Qre(e.size,n,124),ct.write(n,Tl(e.mtime.getTime()/1e3|0,11),136),n[156]=IS+Xre(e.type),e.linkname&&ct.write(n,e.linkname,157),ct.copy(jB,n,Dv),ct.copy(jre,n,GT),e.uname&&ct.write(n,e.uname,265),e.gname&&ct.write(n,e.gname,297),ct.write(n,Tl(e.devmajor||0,6),329),ct.write(n,Tl(e.devminor||0,6),337),o&&ct.write(n,o,345),ct.write(n,Tl(YB(n),6),148),n)};fp.decode=function(e,n,r){let o=e[156]===0?0:e[156]-IS,i=up(e,0,100,n),s=bl(e,100,8),a=bl(e,108,8),c=bl(e,116,8),l=bl(e,124,12),u=bl(e,136,12),f=Jre(o),m=e[157]===0?null:up(e,157,100,n),d=up(e,265,32),p=up(e,297,32),g=bl(e,329,8),h=bl(e,337,8),v=YB(e);if(v===256)return null;if(v!==bl(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(Gre(e))e[345]&&(i=up(e,345,155,n)+"/"+i);else if(!zre(e)){if(!r)throw new Error("Invalid tar header: unknown format.")}return o===0&&i&&i[i.length-1]==="/"&&(o=5),{name:i,mode:s,uid:a,gid:c,size:l,mtime:new Date(1e3*u),type:f,linkname:m,uname:d,gname:p,devmajor:g,devminor:h,pax:null}};function Gre(t){return ct.equals(jB,t.subarray(Dv,Dv+6))}function zre(t){return ct.equals(Vre,t.subarray(Dv,Dv+6))&&ct.equals(Yre,t.subarray(GT,GT+2))}function Kre(t,e,n){return typeof t!="number"?n:(t=~~t,t>=e?e:t>=0||(t+=e,t>=0)?t:0)}function Jre(t){switch(t){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}function Xre(t){switch(t){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}function VB(t,e,n,r){for(;n<r;n++)if(t[n]===e)return n;return r}function YB(t){let e=256;for(let n=0;n<148;n++)e+=t[n];for(let n=156;n<512;n++)e+=t[n];return e}function Tl(t,e){return t=t.toString(8),t.length>e?Wre.slice(0,e)+" ":Bre.slice(0,e-t.length)+t+" "}function Zre(t,e,n){e[n]=128;for(let r=11;r>0;r--)e[n+r]=t&255,t=Math.floor(t/256)}function Qre(t,e,n){t.toString(8).length>11?Zre(t,e,n):ct.write(e,Tl(t,11),n)}function eoe(t){let e;if(t[0]===128)e=!0;else if(t[0]===255)e=!1;else return null;let n=[],r;for(r=t.length-1;r>0;r--){let s=t[r];e?n.push(s):n.push(255-s)}let o=0,i=n.length;for(r=0;r<i;r++)o+=n[r]*Math.pow(256,r);return e?o:-1*o}function bl(t,e,n){if(t=t.subarray(e,e+n),e=0,t[e]&128)return eoe(t);{for(;e<t.length&&t[e]===32;)e++;let r=Kre(VB(t,32,e,t.length),t.length,t.length);for(;e<r&&t[e]===0;)e++;return r===e?0:parseInt(ct.toString(t.subarray(e,r)),8)}}function up(t,e,n,r){return ct.toString(t.subarray(e,VB(t,0,e,e+n)),r)}function qT(t){let e=ct.byteLength(t),n=Math.floor(Math.log(e)/Math.log(10))+1;return e+n>=Math.pow(10,n)&&n++,e+n+t}});var JB=M((wCe,KB)=>{var{Writable:toe,Readable:noe,getStreamError:qB}=YT(),roe=RT(),GB=ip(),dp=zT(),ooe=GB.alloc(0),JT=class{constructor(){this.buffered=0,this.shifted=0,this.queue=new roe,this._offset=0}push(e){this.buffered+=e.byteLength,this.queue.push(e)}shiftFirst(e){return this._buffered===0?null:this._next(e)}shift(e){if(e>this.buffered)return null;if(e===0)return ooe;let n=this._next(e);if(e===n.byteLength)return n;let r=[n];for(;(e-=n.byteLength)>0;)n=this._next(e),r.push(n);return GB.concat(r)}_next(e){let n=this.queue.peek(),r=n.byteLength-this._offset;if(e>=r){let o=this._offset?n.subarray(this._offset,n.byteLength):n;return this.queue.shift(),this._offset=0,this.buffered-=r,this.shifted+=r,o}return this.buffered-=e,this.shifted+=e,n.subarray(this._offset,this._offset+=e)}},XT=class extends noe{constructor(e,n,r){super(),this.header=n,this.offset=r,this._parent=e}_read(e){this.header.size===0&&this.push(null),this._parent._stream===this&&this._parent._update(),e(null)}_predestroy(){this._parent.destroy(qB(this))}_detach(){this._parent._stream===this&&(this._parent._stream=null,this._parent._missing=zB(this.header.size),this._parent._update())}_destroy(e){this._detach(),e(null)}},ZT=class extends toe{constructor(e){super(e),e||(e={}),this._buffer=new JT,this._offset=0,this._header=null,this._stream=null,this._missing=0,this._longHeader=!1,this._callback=KT,this._locked=!1,this._finished=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null,this._filenameEncoding=e.filenameEncoding||"utf-8",this._allowUnknownFormat=!!e.allowUnknownFormat,this._unlockBound=this._unlock.bind(this)}_unlock(e){if(this._locked=!1,e){this.destroy(e),this._continueWrite(e);return}this._update()}_consumeHeader(){if(this._locked)return!1;this._offset=this._buffer.shifted;try{this._header=dp.decode(this._buffer.shift(512),this._filenameEncoding,this._allowUnknownFormat)}catch(e){return this._continueWrite(e),!1}if(!this._header)return!0;switch(this._header.type){case"gnu-long-path":case"gnu-long-link-path":case"pax-global-header":case"pax-header":return this._longHeader=!0,this._missing=this._header.size,!0}return this._locked=!0,this._applyLongHeaders(),this._header.size===0||this._header.type==="directory"?(this.emit("entry",this._header,this._createStream(),this._unlockBound),!0):(this._stream=this._createStream(),this._missing=this._header.size,this.emit("entry",this._header,this._stream,this._unlockBound),!0)}_applyLongHeaders(){this._gnuLongPath&&(this._header.name=this._gnuLongPath,this._gnuLongPath=null),this._gnuLongLinkPath&&(this._header.linkname=this._gnuLongLinkPath,this._gnuLongLinkPath=null),this._pax&&(this._pax.path&&(this._header.name=this._pax.path),this._pax.linkpath&&(this._header.linkname=this._pax.linkpath),this._pax.size&&(this._header.size=parseInt(this._pax.size,10)),this._header.pax=this._pax,this._pax=null)}_decodeLongHeader(e){switch(this._header.type){case"gnu-long-path":this._gnuLongPath=dp.decodeLongPath(e,this._filenameEncoding);break;case"gnu-long-link-path":this._gnuLongLinkPath=dp.decodeLongPath(e,this._filenameEncoding);break;case"pax-global-header":this._paxGlobal=dp.decodePax(e);break;case"pax-header":this._pax=this._paxGlobal===null?dp.decodePax(e):Object.assign({},this._paxGlobal,dp.decodePax(e));break}}_consumeLongHeader(){this._longHeader=!1,this._missing=zB(this._header.size);let e=this._buffer.shift(this._header.size);try{this._decodeLongHeader(e)}catch(n){return this._continueWrite(n),!1}return!0}_consumeStream(){let e=this._buffer.shiftFirst(this._missing);if(e===null)return!1;this._missing-=e.byteLength;let n=this._stream.push(e);return this._missing===0?(this._stream.push(null),n&&this._stream._detach(),n&&this._locked===!1):n}_createStream(){return new XT(this,this._header,this._offset)}_update(){for(;this._buffer.buffered>0&&!this.destroying;){if(this._missing>0){if(this._stream!==null){if(this._consumeStream()===!1)return;continue}if(this._longHeader===!0){if(this._missing>this._buffer.buffered)break;if(this._consumeLongHeader()===!1)return!1;continue}let e=this._buffer.shiftFirst(this._missing);e!==null&&(this._missing-=e.byteLength);continue}if(this._buffer.buffered<512)break;if(this._stream!==null||this._consumeHeader()===!1)return}this._continueWrite(null)}_continueWrite(e){let n=this._callback;this._callback=KT,n(e)}_write(e,n){this._callback=n,this._buffer.push(e),this._update()}_final(e){this._finished=this._missing===0&&this._buffer.buffered===0,e(this._finished?null:new Error("Unexpected end of data"))}_predestroy(){this._continueWrite(null)}_destroy(e){this._stream&&this._stream.destroy(qB(this)),e(null)}[Symbol.asyncIterator](){let e=null,n=null,r=null,o=null,i=null,s=this;return this.on("entry",l),this.on("error",m=>{e=m}),this.on("close",u),{[Symbol.asyncIterator](){return this},next(){return new Promise(c)},return(){return f(null)},throw(m){return f(m)}};function a(m){if(!i)return;let d=i;i=null,d(m)}function c(m,d){if(e)return d(e);if(o){m({value:o,done:!1}),o=null;return}n=m,r=d,a(null),s._finished&&n&&(n({value:void 0,done:!0}),n=r=null)}function l(m,d,p){i=p,d.on("error",KT),n?(n({value:d,done:!1}),n=r=null):o=d}function u(){a(e),n&&(e?r(e):n({value:void 0,done:!0}),n=r=null)}function f(m){return s.destroy(m),a(m),new Promise((d,p)=>{if(s.destroyed)return d({value:void 0,done:!0});s.once("close",function(){m?p(m):d({value:void 0,done:!0})})})}}};KB.exports=function(e){return new ZT(e)};function KT(){}function zB(t){return t&=511,t&&512-t}});var ZB=M((yCe,QT)=>{var XB={S_IFMT:61440,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960};try{QT.exports=require("fs").constants||XB}catch{QT.exports=XB}});var rW=M((CCe,nW)=>{var{Readable:ioe,Writable:soe,getStreamError:QB}=YT(),Lf=ip(),mp=ZB(),PS=zT(),aoe=493,coe=420,eW=Lf.alloc(1024),tR=class extends soe{constructor(e,n,r){super({mapWritable:uoe,eagerOpen:!0}),this.written=0,this.header=n,this._callback=r,this._linkname=null,this._isLinkname=n.type==="symlink"&&!n.linkname,this._isVoid=n.type!=="file"&&n.type!=="contiguous-file",this._finished=!1,this._pack=e,this._openCallback=null,this._pack._stream===null?this._pack._stream=this:this._pack._pending.push(this)}_open(e){this._openCallback=e,this._pack._stream===this&&this._continueOpen()}_continuePack(e){if(this._callback===null)return;let n=this._callback;this._callback=null,n(e)}_continueOpen(){this._pack._stream===null&&(this._pack._stream=this);let e=this._openCallback;if(this._openCallback=null,e!==null){if(this._pack.destroying)return e(new Error("pack stream destroyed"));if(this._pack._finalized)return e(new Error("pack stream is already finalized"));this._pack._stream=this,this._isLinkname||this._pack._encode(this.header),this._isVoid&&(this._finish(),this._continuePack(null)),e(null)}}_write(e,n){if(this._isLinkname)return this._linkname=this._linkname?Lf.concat([this._linkname,e]):e,n(null);if(this._isVoid)return e.byteLength>0?n(new Error("No body allowed for this entry")):n();if(this.written+=e.byteLength,this._pack.push(e))return n();this._pack._drain=n}_finish(){this._finished||(this._finished=!0,this._isLinkname&&(this.header.linkname=this._linkname?Lf.toString(this._linkname,"utf-8"):"",this._pack._encode(this.header)),tW(this._pack,this.header.size),this._pack._done(this))}_final(e){if(this.written!==this.header.size)return e(new Error("Size mismatch"));this._finish(),e(null)}_getError(){return QB(this)||new Error("tar entry destroyed")}_predestroy(){this._pack.destroy(this._getError())}_destroy(e){this._pack._done(this),this._continuePack(this._finished?null:this._getError()),e()}},nR=class extends ioe{constructor(e){super(e),this._drain=eR,this._finalized=!1,this._finalizing=!1,this._pending=[],this._stream=null}entry(e,n,r){if(this._finalized||this.destroying)throw new Error("already finalized or destroyed");typeof n=="function"&&(r=n,n=null),r||(r=eR),(!e.size||e.type==="symlink")&&(e.size=0),e.type||(e.type=loe(e.mode)),e.mode||(e.mode=e.type==="directory"?aoe:coe),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),typeof n=="string"&&(n=Lf.from(n));let o=new tR(this,e,r);return Lf.isBuffer(n)?(e.size=n.byteLength,o.write(n),o.end(),o):(o._isVoid,o)}finalize(){if(this._stream||this._pending.length>0){this._finalizing=!0;return}this._finalized||(this._finalized=!0,this.push(eW),this.push(null))}_done(e){e===this._stream&&(this._stream=null,this._finalizing&&this.finalize(),this._pending.length&&this._pending.shift()._continueOpen())}_encode(e){if(!e.pax){let n=PS.encode(e);if(n){this.push(n);return}}this._encodePax(e)}_encodePax(e){let n=PS.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),r={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:n.byteLength,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(PS.encode(r)),this.push(n),tW(this,n.byteLength),r.size=e.size,r.type=e.type,this.push(PS.encode(r))}_doDrain(){let e=this._drain;this._drain=eR,e()}_predestroy(){let e=QB(this);for(this._stream&&this._stream.destroy(e);this._pending.length;){let n=this._pending.shift();n.destroy(e),n._continueOpen()}this._doDrain()}_read(e){this._doDrain(),e()}};nW.exports=function(e){return new nR(e)};function loe(t){switch(t&mp.S_IFMT){case mp.S_IFBLK:return"block-device";case mp.S_IFCHR:return"character-device";case mp.S_IFDIR:return"directory";case mp.S_IFIFO:return"fifo";case mp.S_IFLNK:return"symlink"}return"file"}function eR(){}function tW(t,e){e&=511,e&&t.push(eW.subarray(0,512-e))}function uoe(t){return Lf.isBuffer(t)?t:Lf.from(t)}});var oW=M(rR=>{rR.extract=JB();rR.pack=rW()});var oR=M((ICe,aW)=>{aW.exports=function(e,n,r){e(n),r&&r(n===!0?null:n)}});var TS=M((PCe,lW)=>{"use strict";var cW=oR();lW.exports=function(e,n){if(!e)return function(o,i){return o?cW(i,o,n):i(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(o){return e[o]}));var r=0;return function(o,i){if(o)return cW(i,o,n);r>=e.length?i(!0):i(null,e[r++])}}});var fW=M((bCe,uW)=>{"use strict";var moe=TS();uW.exports=function(t){return moe(Object.keys(t))}});var iR=M((TCe,dW)=>{"use strict";var poe=oR();dW.exports=function(e,n){return function(r,o){if(r)return poe(o,r,n);if(e!=null){var i=e;e=null,o(null,i)}else o(!0)}}});var pW=M((RCe,mW)=>{"use strict";mW.exports=function(e){var n=0;return e=e||1/0,function(r,o){if(r)return o&&o(r);if(n>e)return o(!0);o(null,n++)}}});var gW=M((kCe,hW)=>{"use strict";hW.exports=function(e){return e=e||Math.random,function(n,r){return n?r&&r(n):r(null,e())}}});var wW=M((NCe,vW)=>{"use strict";vW.exports=function(){return function(e,n){n(!0)}}});var CW=M((LCe,yW)=>{"use strict";yW.exports=function(e){return function(n,r){r(e)}}});var SW=M((ACe,EW)=>{"use strict";EW.exports={keys:fW(),once:iR(),values:TS(),count:pW(),infinite:gW(),empty:wW(),error:CW()}});var pp=M((FCe,xW)=>{"use strict";xW.exports=function(e,n){var r,o,i;n||(i=new Error("no done callback supplied"));function s(a){if(r=a,o)return s.abort();(function c(){for(var l=!0,u=!1;l;)if(u=!1,r(null,function(f,m){if(u=!0,f=f||o){if(l=!1,n)n(f===!0?null:f);else if(f&&f!==!0)throw console.warn(i),f}else e&&e(m)===!1||o?(l=!1,r(o||!0,n||function(){})):l||c()}),!u){l=!1;return}})()}return s.abort=function(a,c){if(typeof a=="function"&&(c=a,a=!0),o=a||!0,r)return r(o,c||function(){})},s}});var DW=M((OCe,_W)=>{"use strict";var hoe=pp();_W.exports=function(e){return hoe(null,e)}});var PW=M((UCe,IW)=>{"use strict";var goe=pp();IW.exports=function(e){return goe(function(n){console.log(n)},e)}});var hp=M((MCe,bW)=>{bW.exports=function(e){return e&&(typeof e=="string"?function(n){return n[e]}:typeof e=="object"&&typeof e.exec=="function"?function(n){var r=e.exec(n);return r&&r[0]}:e)}});var kW=M(($Ce,RW)=>{"use strict";function TW(t){return t}var voe=hp(),woe=pp();RW.exports=function(e,n){var r=!1;return n?e=voe(e)||TW:(n=e,e=TW),woe(function(o){if(e(o))return r=!0,n(null,o),!1},function(o){r||n(o===!0?null:o,null)})}});var RS=M((HCe,NW)=>{"use strict";var yoe=pp();NW.exports=function(e,n,r){r||(r=n,n=null);var o=yoe(function(i){n=e(n,i)},function(i){r(i,n)});return arguments.length===2?function(i){i(null,function(s,a){if(s)return r(s===!0?null:s);n=a,o(i)})}:o}});var sR=M((BCe,LW)=>{"use strict";var Coe=RS();LW.exports=function(e){return Coe(function(n,r){return n.push(r),n},[],e)}});var FW=M((WCe,AW)=>{"use strict";var Eoe=sR();AW.exports=function(){return e=>{let n,r,o=new Promise((i,s)=>{n=i,r=s});return Eoe((i,s)=>{i?r(i):n(s)})(e),o}}});var UW=M((jCe,OW)=>{"use strict";var Soe=RS();OW.exports=function(e){return Soe(function(n,r){return n+r},"",e)}});var $W=M((VCe,MW)=>{"use strict";MW.exports={drain:pp(),onEnd:DW(),log:PW(),find:kW(),reduce:RS(),collect:sR(),collectAsPromise:FW(),concat:UW()}});var BW=M((YCe,HW)=>{"use strict";function xoe(t){return t}var _oe=hp();HW.exports=function(e){return e?(e=_oe(e),function(n){return function(r,o){n(r,function(i,s){try{s=i?null:e(s)}catch(a){return n(a,function(){return o(a)})}o(i,s)})}}):xoe}});var jW=M((qCe,WW)=>{"use strict";function Doe(t){return t}var Ioe=hp();WW.exports=function(e){if(!e)return Doe;e=Ioe(e);var n=!1,r,o;return function(i){return function s(a,c){if(o)return c(o);a?(o=a,n?i(a,function(l){n?r=c:c(a)}):i(a,function(l){c(a)})):i(null,function(l,u){l?c(l):o?c(o):(n=!0,e(u,function(f,m){n=!1,o?(c(o),r&&r(o)):f?s(f,c):c(null,m)}))})}}}});var aR=M((GCe,VW)=>{var Poe=hp();function boe(t){return t}VW.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(n){return e.test(n)}:Poe(e)||boe}});var kS=M((zCe,YW)=>{"use strict";var Toe=aR();YW.exports=function(e){return e=Toe(e),function(n){return function r(o,i){for(var s,a=!0;a;)a=!1,s=!0,n(o,function(c,l){if(!c&&!e(l))return s?a=!0:r(c,i);i(c,l)}),s=!1}}}});var GW=M((KCe,qW)=>{"use strict";var Roe=aR(),koe=kS();qW.exports=function(e){return e=Roe(e),koe(function(n){return!e(n)})}});var KW=M((JCe,zW)=>{"use strict";zW.exports=function(e,n){var r=!1;function o(i){r||!n||(r=!0,n(i===!0?null:i))}return function(i){return function(s,a){return s&&o(s),i(s,function(c,l){c?o(c):e&&e(l),a(c,l)})}}}});var XW=M((XCe,JW)=>{"use strict";JW.exports=function(e,n){n=n||{};var r=n.last||!1,o=!1;if(typeof e=="number"){r=!0;var i=e;e=function(){return--i}}return function(s){function a(c){s(!0,function(l){r=!1,c(l||!0)})}return function(c,l){o&&!c?r?a(l):l(o):(o=c)?s(o,l):s(null,function(u,f){(o=o||u)?l(o):e(f)?l(null,f):(o=!0,r?l(null,f):a(l))})}}}});var cR=M((ZCe,ZW)=>{"use strict";function Noe(t){return t}var Loe=hp(),Aoe=kS();ZW.exports=function(e,n){e=Loe(e)||Noe;var r={};return Aoe(function(o){var i=e(o);return r[i]?!!n:(r[i]=!0,!n)})}});var ej=M((QCe,QW)=>{"use strict";var Foe=cR();QW.exports=function(e){return Foe(e,!0)}});var nj=M((eEe,tj)=>{"use strict";var Ooe=TS(),Uoe=iR();tj.exports=function(){return function(e){var n;return function(r,o){r?n?n(r,function(a){e(a||r,o)}):e(r,o):n?i():s();function i(){n(null,function(a,c){a?a===!0?s():e(!0,function(l){o(a)}):o(null,c)})}function s(){n=null,e(null,function(a,c){if(a)return o(a);c&&typeof c=="object"?c=Ooe(c):typeof c!="function"&&(c=Uoe(c)),n=c,i()})}}}}});var oj=M((tEe,rj)=>{"use strict";rj.exports={map:BW(),asyncMap:jW(),filter:kS(),filterNot:GW(),through:KW(),take:XW(),unique:cR(),nonUnique:ej(),flatten:nj()}});var lR=M((nEe,ij)=>{"use strict";ij.exports=function t(e){var n=arguments.length;if(typeof e=="function"&&e.length===1){for(var r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return function(a){if(r==null)throw new TypeError("partial sink should only be called once!");var c=r;switch(r=null,n){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var i=e;i&&typeof i.source=="function"&&(i=i.source);for(var o=1;o<n;o++){var s=arguments[o];typeof s=="function"?i=s(i):s&&typeof s=="object"&&(s.sink(i),i=s.source)}return i}});var Pv=M((Af,lj)=>{"use strict";var sj=SW(),aj=$W(),cj=oj();Af=lj.exports=lR();Af.pull=Af;for(ls in sj)Af[ls]=sj[ls];var ls;for(ls in cj)Af[ls]=cj[ls];var ls;for(ls in aj)Af[ls]=aj[ls];var ls});var CR=M((kEe,kj)=>{var REe=kj.exports=function(t){(function e(){var n=!0,r=!1,o=!1;do o=!0,n=!1,t.call(this,function(){o?n=!0:e()}),o=!1;while(n)})()}});var Lj=M((NEe,Nj)=>{var eie=CR();Nj.exports=function(t,e){return function(n){var r=[],o,i;function s(l){r.push(l)}t=t||function(l){this.queue(l)},e=e||function(){this.queue(null)};var a={emit:function(l,u){l=="data"&&s(u),l=="end"&&(o=!0,s(null)),l=="error"&&(i=u)},queue:s},c;return function(l,u){if(o=o||l,l)return n(l,function(){if(c){var f=c;c=null,f(l)}u(l)});c=u,eie(function f(m){if(c)if(u=c,i)c=null,u(i);else if(r.length){var d=r.shift();c=null,u(d===null,d)}else n(o,function(p,g){if(p&&p!==!0)return i=p,m();if(o=o||p)e.call(a);else if(g!==null&&(t.call(a,g),i||o))return n(i||o,function(){c=null,u(i||o)});m(f)})})}}}});var Fj=M((LEe,Aj)=>{Aj.exports=function(){var t=[],e=0;function n(){return t.reduce(function(r,o){return r+o.length},0)}return{length:e,data:this,add:function(r){if(!Buffer.isBuffer(r))throw new Error("data must be a buffer, was: "+JSON.stringify(r));return this.length=e=e+r.length,t.push(r),this},has:function(r){return r==null?e>0:e>=r},get:function(r){var o;if(r==null||r===e){e=0;var i=t;return t=[],i.length==1?i[0]:Buffer.concat(i)}else if(t.length>1&&r<=(o=t[0].length)){var s=t[0].slice(0,r);return r===o?t.shift():t[0]=t[0].slice(r,o),e-=r,s}else if(r<e){for(var a=[],c=0;c+t[0].length<r;){var l=t.shift();c+=l.length,a.push(l)}return c<r&&(a.push(t[0].slice(0,r-c)),t[0]=t[0].slice(r-c,t[0].length),this.length=e=e-r),Buffer.concat(a)}else throw new Error("could not get "+r+" bytes")}}}});var $j=M((AEe,Mj)=>{"use strict";var tie=Fj();function nie(t){return Number.isFinite(t)}function Oj(t){return typeof t=="function"}function Uj(t,e){return e?function(n,r){var o=setTimeout(function(){t(new Error("pull-reader: read exceeded timeout"),r)},e);t(n,function(i,s){clearTimeout(o),r(i,s)})}:t}Mj.exports=function(t){var e=[],n,r,o=!1,i=tie(),s,a,c;function l(){for(;e.length;)if(e[0].length==null&&i.has(1))e.shift().cb(null,i.get());else if(i.has(e[0].length)){var m=e.shift();m.cb(null,i.get(m.length))}else if(s==!0&&e[0].length&&i.length<e[0].length){var d="stream ended with:"+i.length+" but wanted:"+e[0].length;e.shift().cb(new Error(d))}else if(s)e.shift().cb(s);else return!!e.length;return e.length||!i.has(1)||c}function u(){var m=l();m&&!o&&n&&!o&&!a&&(o=!0,r(null,function(d,p){if(o=!1,d)return s=d,l();i.add(p),u()}))}function f(m){if(c){for(;e.length;)e.shift().cb(c);return cb&&cb(c)}r=Uj(m,t),n=m,u()}return f.abort=function(m,d){c=m||!0,n?(o=!0,n(c,function(){for(;e.length;)e.shift().cb(c);d&&d(c)})):d()},f.read=function(m,d,p){if(Oj(d)&&(p=d,d=t),Oj(p))e.push({length:nie(m)?m:null,cb:p}),u();else return a=!0,function(g,h){if(o||i.has(1)){if(g)return n(g,h);e.push({length:null,cb:h}),u()}else Uj(n,d)(g,function(v,C){h(v,C)})}},f}});var Xj=M((Of,Jj)=>{var rie=Lj(),oie=$j(),Hj=BC(),Bj=0,Wj=1,jj=2,Vj="GOODBYE";function Yj(t){let e=Buffer.alloc(9),n=0,r=t.value!==void 0?t.value:t.end;return typeof t=="string"&&t===Vj?(e.fill(0),[e,null]):(typeof r=="string"?(n=Wj,r=Buffer.from(r,"utf-8")):Buffer.isBuffer(r)?n=Bj:(n=jj,r=Buffer.from(JSON.stringify(r),"utf-8")),n=t.stream<<3|t.end<<2|n,e[0]=n,e.writeUInt32BE(r.length,1),e.writeInt32BE(t.req||0,5),[e,r])}function qj(t){if(t.length!==9)throw new Error("expected header to be 9 bytes long");let e=t[0],n=t.readUInt32BE(1);return{req:t.readInt32BE(5),stream:!!(e&8),end:!!(e&4),value:null,length:n,type:e&3}}function Gj(t,e){if(t.length!==e.length)throw new Error("incorrect length, expected:"+e.length+" found:"+t.length);if(e.type===Bj)e.value=t;else if(e.type===Wj)e.value=t.toString();else if(e.type===jj)e.value=JSON.parse(t.toString());else throw new Error("unknown message type");return e}function zj(t){return rie(function(n){t&&t("encoded: %o",n);let[r,o]=Yj(n);this.queue(r),o!==null&&this.queue(o)})}function Kj(t){let e=oie(),n=!1;return function(o){return e(o),function(s,a){if(n)return a(!0);if(s)return e.abort(s,a);e.read(9,function(l,u){if(l)return a(l);let f=qj(u);if(f.length===0)return n=!0,a(null,Vj);e.read(f.length,function(d,p){if(d)return a(d);try{Gj(p,f)}catch(g){return a(g)}t&&t("decoded: %o",f),a(null,f)})})}}}Of=Jj.exports=function(e,n){let r=n===!0?Hj("packet-stream-codec"):typeof n=="string"?Hj(n):null;return{source:zj(r)(e.source),sink(o){return e.sink(Kj(r)(o))}}};Of.encodePair=Yj;Of.decodeHead=qj;Of.decodeBody=Gj;Of.encode=zj;Of.decode=Kj});var ER=M((FEe,Zj)=>{function iie(t){return t&&(t===!0?!0:{message:t.message,name:t.name,stack:t.stack})}function sie(t){console.error("packet-stream asked to read after closed",t)}Zj.exports={flat:iie,closedread:sie}});var tV=M((OEe,eV)=>{var{flat:Qj,closedread:aie}=ER();function FS(t,e,n){this.id=t,this.read=null,this.writeEnd=null,this.readEnd=null,this._ps=e,this._remove=n}FS.prototype.write=function(t,e){let n=this._ps;e?(this.writeEnd=e,n&&(n.read({req:this.id,stream:!0,end:!0,value:Qj(e)}),this.readEnd&&this.destroy(e),n._maybedone(e))):n&&n.read({req:this.id,stream:!0,end:!1,value:t})};FS.prototype.end=function(t){this.write(null,Qj(t||!0))};FS.prototype.destroy=function(t){if(this.writeEnd){if(!this.readEnd){this.readEnd=!0;try{this.read&&this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}}else{if(this.writeEnd=!0,!this.readEnd){this.readEnd=!0;try{this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}this.write(null,t)}this._ps&&(this._remove(),this._remove=null,this.read=aie,this._ps=null)};eV.exports=FS});var oV=M((UEe,rV)=>{var nV=tV(),{flat:SR,closedread:cie}=ER();function Ui(t){this.ended=!1,this.opts=t,this._req_counter=1,this._requests=new Map,this._instreams=new Map,this._outstreams=new Map,this._closecbs=[],this._closing=!1,this._closed=!1,t.close&&this._closecbs.push(t.close)}Ui.prototype.message=function(t){this.read({req:0,stream:!1,end:!1,value:t})};Ui.prototype.request=function(t,e){if(this._closing)return e(new Error("parent stream is closing"));let n=this._req_counter++;this._requests.set(n,(r,o)=>{this._requests.delete(n),e(r,o),this._maybedone(r)}),this.read({req:n,stream:!1,end:!1,value:t})};Ui.prototype.stream=function(){if(this._closing)throw new Error("parent stream is closing");let t=this._req_counter++,e=new nV(t,this,()=>{this._outstreams.delete(t)});return this._outstreams.set(t,e),e};Ui.prototype.close=function(t){if(!t)throw new Error("packet-stream.close *must* have callback");if(this._closed)return t();this._closecbs.push(t),this._closing=!0,this._maybedone()};Ui.prototype.destroy=function(t){t=t||SR(t),this.ended=t,this._closing=!0;let e=t===!0?new Error("unexpected end of parent stream"):t,n=0;this._requests.forEach(r=>{n++,r(e)}),this._instreams.forEach(r=>{n++,r.writeEnd=!0,r.destroy(e)}),this._outstreams.forEach(r=>{n++,r.writeEnd=!0,r.destroy(e)}),n===0&&t===!0&&(e=null),this._maybedone(e)};Ui.prototype._maybedone=function(t){this._closed||!this._closing||this._requests.size!==0||this._instreams.size!==0||this._outstreams.size!==0||(this.read(null,t||!0),this._closed=!0,this._closecbs.forEach(e=>{e(t)}),this.opts=null,this._closecbs.length=0,this.read=cie,this._requests.clear(),this._instreams.clear(),this._outstreams.clear())};Ui.prototype.read=function(t){console.error("please overwrite read method to do IO",t)};Ui.prototype.write=function(t,e){this.ended||(e?this.destroy(e):t.req&&!t.stream?this._onrequest(t):t.req&&t.stream?this._onstream(t):this._onmessage(t))};Ui.prototype._onmessage=function(t){this.opts&&typeof this.opts.message=="function"&&this.opts.message(t.value)};Ui.prototype._onrequest=function(t){let e=t.req*-1;if(t.req<0)this._requests.has(e)&&this._requests.get(e)(t.end?t.value:null,t.end?null:t.value);else if(this.opts&&typeof this.opts.request=="function"){let n=!1;this.opts.request(t.value,(r,o)=>{if(n)throw new Error("cb called twice from local api");n=!0,r?this.read({value:SR(r),end:!0,req:e}):this.read({value:o,end:!1,req:e}),this._maybedone()})}else{if(this.ended){let n=this.ended===!0?new Error("unexpected end of parent stream"):this.ended;this.read({value:SR(n),end:!0,stream:!1,req:e})}else this.read({value:{message:"Unable to handle requests",name:"NO_REQUEST_HANDLER",stack:null},end:!0,stream:!1,req:e});this._maybedone()}};Ui.prototype._onstream=function(t){if(t.req<0){let e=t.req*-1,n=this._outstreams.get(e);if(!n)return console.error("no stream for incoming msg",t);t.end?(n.writeEnd&&this._outstreams.delete(e),n.readEnd=!0,n.read(null,t.value),this._maybedone()):n.read(t.value)}else{let e=t.req,n=this._instreams.get(e);n||(n=new nV(e*-1,this,()=>{this._instreams.delete(e)}),this._instreams.set(e,n),this.opts&&typeof this.opts.stream=="function"&&this.opts.stream(n)),t.end?(n.writeEnd&&this._instreams.delete(e),n.readEnd=!0,n.read&&n.read(null,t.value),this._maybedone()):n.read?n.read(t.value):console.error("no .read for stream:",n.id,"dropped:",t)}};rV.exports=t=>new Ui(t)});var sV=M((MEe,kv)=>{"use strict";var lie=Pv();function uie(t){let e=!1;return(n,r)=>{e||(e=!0,t(n,r))}}function xR(t,e){let n=[],r=!1,o=!1,i,s,a=uie((c,l)=>{e&&e(c,l),t=null,e=null,i=null,s&&s(c||!0,()=>{})});return t.read=function(c,l){if(r=r||l,i){let u=i;i=null,u(r,c)}else!r&&!o&&n.push(c);r&&a(r!==!0?r:null)},{source(c,l){c?(t&&t.write(null,c),l(c),n.length=0,o=!0,a(c!==!0?c:null)):n.length?l(null,n.shift()):r?l(r):i=l},sink(c){if(r)return s=null,c(r,()=>{});s=c,lie.drain(l=>{if(r)return!1;t.write(l)},l=>{t&&!t.writeEnd&&t.write(null,l||!0),a&&a(l)})(c)}}}function iV(t,e){return xR(t,n=>{t.writeEnd||t.write(null,n||!0),e&&e(n)})}function fie(t){return iV(t).source}function die(t,e){return iV(t,e).sink}kv.exports=xR;kv.exports.source=fie;kv.exports.sink=die;kv.exports.duplex=xR});var cV=M(($Ee,aV)=>{aV.exports=function(e){var n,r,o;function i(s){return function(a,c){s(a,function(l,u){if(l&&!o)return o=!0,c(null,e);l&&n?c(l):l?r=c:c(null,u)})}}return i.end=function(){return n=!0,r&&r(n),i},i}});var uV=M((HEe,lV)=>{var mie=cV(),_R=Pv();lV.exports=function(t,e){e=e||"GOODBYE";var n=mie(e);return{source:_R(t.source,n),sink:_R(_R.filter(function(r){if(r!==e)return!0;n.end()}),t.sink)}}});var Nv=M(fs=>{"use strict";var OS=Pv();function pie(t){return t?Object.keys(t).length===0:!0}fs.set=function(e,n,r){let o,i;for(let s=0;s<n.length;s++){let a=n[s];e[a]=e[a]||{},o=e,i=a,e=e[a]}o[i]=r};fs.get=function(e,n){if(typeof n=="string")return e[n];let r;for(let o=0;o<n.length;o++){let i=n[o];if(r=e=e[i],e==null)return e}return r};fs.prefix=function(e,n){let r;for(let o=0;o<n.length;o++){let i=n[o];if(r=e=e[i],typeof e!="object")return e}return typeof r!="object"?!!r:!1};function hie(t,e){for(let n in e){let r=e[n];t[r]||(t[r]={}),t=t[r]}return t}function gie(t,e){(function n(r,o){let i=e[o];if(r)e.length-1===o?delete r[i]:o<e.length&&n(r[i],o+1);else return;pie(r[i])&&delete r[i]})(t,0)}function vie(t,e){for(let n in e)t[n]=e[n];return t}fs.mount=function(e,n,r){if(!Array.isArray(n))throw new Error("path must be array of strings");return vie(hie(e,n),r)};fs.unmount=function(e,n){return gie(e,n)};var US=t=>t==="source",MS=t=>t==="sink",DR=t=>t==="duplex",wie=t=>t==="sync",yie=t=>t==="async",fV=t=>wie(t)||yie(t),Cie=t=>US(t)||MS(t)||DR(t);fs.isRequest=fV;fs.isStream=Cie;function IR(t){return function(e){e(t||!0,()=>{})}}function dV(t){return{source:OS.error(t),sink:IR(t)}}fs.errorAsStream=function(e,n){return US(e)?OS.error(n):MS(e)?IR(n):dV(n)};fs.errorAsStreamOrCb=function(e,n,r){return fV(e)?r(n):DR(e)?dV(n):US(e)?OS.error(n):MS(e)?IR(n):r(n)};fs.pipeToStream=function(e,n,r){US(e)?n(r):MS(e)?r(n):DR(e)&&OS(n,r,n)}});var PR=M((WEe,mV)=>{"use strict";function Eie(t){return typeof t=="string"?[`Error: ${t}`]:t.stack?t.stack.split(`
`):[`${t.name}: ${t.message}`]}mV.exports=function(e,n){let r=new Error(n),o=r.stack.split(`
`);o.splice(1,1);let i=Eie(e);i[0]="  "+i[0];for(let s=1;s<o.length;s++)if(i.includes(o[s])){o.splice(s);break}return r.stack=o.concat(i).join(`
`),r}});var vV=M((jEe,gV)=>{"use strict";var Sie=oV(),bR=sV(),xie=uV(),wp=Nv(),pV=PR(),hV=BC()("muxrpc:psc");gV.exports=function(e,n,r){let o=Sie({message(){},request(s,a){if(!Array.isArray(s.args))return a(new Error(`invalid request, args should be array, was: ${JSON.stringify(s)}`));let c=s.name,l=s.args,u=!1,f=!1;l.push((m,d)=>{f=!0,u=!0,a(m,d)});try{e("async",c,l)}catch(m){if(u||f)throw pV(m,"no callback provided to muxrpc async funtion");a(m)}},stream(s){s.read=function(c,l){if(l)return s.write(null,l);let{name:u,type:f,args:m}=c,d,p;if(s.read=null,!wp.isStream(f))return s.write(null,new Error(`unsupported stream type: ${f}`));try{p=e(f,u,m)}catch(v){d=v}let h=bR[f==="source"?"sink":f==="sink"?"source":"duplex"](s);return wp.pipeToStream(f,h,d?wp.errorAsStream(f,d):p)}},close(s){if(o=null,i.ended=!0,!i.closed&&(i.closed=!0,r)){let a=r;r=null,a(s)}}}),i=xie(bR(o,()=>{}));return i=n?n(i,hV.enabled?hV.namespace:!1):i,i.remoteCall=function(s,a,c,l){if(a==="emit")return o.message(c);if(!(wp.isRequest(s)||wp.isStream(s)))throw new Error(`unsupported type: ${JSON.stringify(s)}`);if(wp.isRequest(s))return o.request({name:a,args:c},l);let u=o.stream(),f=bR[s](u,l);return u.write({name:a,args:c,type:s}),f},i.isOpen=function(){return!o.ended},i.close=function(s,a){if(typeof s=="function"&&(a=s,s=!1),!o){a&&a();return}if(s){o.destroy(s),a&&a();return}return o.close(c=>{if(a)a(c);else if(c)throw pV(c,"no callback provided for muxrpc close")}),this},i.closed=!1,i}});var yV=M((VEe,wV)=>{"use strict";var _ie=PR(),Die=Nv();function TR(t,e,n,r){for(let o in e){let i=e[o],s=n?n.concat(o):[o];if(i&&typeof i=="object"){let a=i;t[o]=TR({},a,s,r)}else{let a=i;t[o]=(...c)=>r(a,s,c)}}return t}function Iie(t){if(t)throw _ie(t,"callback not provided")}function Pie(t,e,n,r){t=t||{};function o(i,s,a){let c=typeof a[a.length-1]=="function"?a.pop():i==="sync"||i==="async"?null:Iie;if(typeof c=="function"){let l;try{l=n(i,s,a,c)}catch(u){return Die.errorAsStreamOrCb(i,u,c)}return l}else return new Promise((l,u)=>{n(i,s,a,(f,m)=>{f?u(f):l(m)})})}return r?o("async","manifest",[function(i,s){if(i)return r(i);TR(t,s,null,o),r(null,s,t)}]):TR(t,e,null,o),t}wV.exports=Pie});var SV=M((YEe,EV)=>{"use strict";var $S=Nv();function CV(t){return Array.isArray(t)?t:t.split(".")}function bie(t){return t&&typeof t.pre=="function"&&typeof t.test=="function"&&typeof t.post=="function"}EV.exports=function(e){if(bie(e))return e;if(typeof e=="function")return{pre:e};let n=null,r={};function o(i){if(i.allow){n={};for(let s of i.allow)$S.set(n,CV(s),!0)}else n=null;if(i.deny)for(let s of i.deny)$S.set(r,CV(s),!0);else r={};return this}return e&&o(e),o.pre=i=>{if(i=Array.isArray(i)?i:[i],n&&!$S.prefix(n,i))return new Error(`method:${i} is not in list of allowed methods`);if(r&&$S.prefix(r,i))return new Error(`method:${i} is on list of disallowed methods`)},o.post=()=>{},o.test=i=>o.pre(i),o.get=()=>({allow:n,deny:r}),o}});var _V=M((qEe,xV)=>{"use strict";var Tie=SV(),RR=Nv();xV.exports=function(e,n,r){r=Tie(r);function o(s,a){return s===RR.get(n,a)}function i(s,a,c){if(a==="emit")throw new Error("emit has been removed");if(s==="async"&&o("sync",a)){let l=c.pop(),u;try{u=RR.get(e,a).apply(this,c)}catch(f){return l(f)}return l(null,u)}if(!o(s,a))throw new Error(`no ${s}:${a}`);return RR.get(e,a).apply(this,c)}return function(a,c,l){let u=r.pre(c,l);if(u)throw u;return i.call(this,a,c,l)}}});var PV=M((GEe,IV)=>{"use strict";var Rie=Xj(),kie=require("events").EventEmitter,Nie=vV(),Lie=yV(),Aie=_V();function DV(t,e,n,r,o,i,s){let a;typeof t=="function"&&(a=t,t={}),e=e||{},t=t||{};let c=new kie;i||(i=Rie);let l,u={_emit(m,d){return c&&c._emit(m,d),u},id:r},f=Nie(Aie(n,e,o).bind(u),i,m=>{if(!c.closed&&(c.closed=!0,c.emit("closed"),l)){let d=l;l=null,d(m)}});if(Lie(c,t,(m,d,p,g)=>{if(f.closed)throw new Error("stream is closed");return f.remoteCall(m,d,p,g)},a),c._emit=c.emit,s){Object.__defineGetter__.call(c,"id",()=>u.id),Object.__defineSetter__.call(c,"id",d=>{u.id=d});let m=!0;c.createStream=d=>{if(l=d,m)return m=!1,f;throw new Error("one stream per rpc")}}else c.stream=f;return c.closed=!1,c.close=function(m,d){return f.close(m,d),this},c}IV.exports=function(t,e,n){return arguments.length>3?DV.apply(this,arguments):function(r,o,i){return DV(t,e,r,i,o,n,!0)}}});var jS=M((fc,RV)=>{var zEe=lR(),Fie=CR();function bV(t){t.destroy?t.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function TV(t,e,n){var r,o=!1,i;function s(){i||(i=!0,n&&n(r===!0?null:r))}function a(){o||(o=!0,l(),r?s():t(r=!0,s))}function c(u){l(),r||t(r=u,s)}function l(){e.on("finish",a),e.removeListener("close",a),e.removeListener("error",c)}e.on("close",a),e.on("finish",a),e.on("error",c),process.nextTick(function(){Fie(function(u){t(null,function(f,m){if(r=r||f,f===!0)return e._isStdio?s():e.end();if(r=r||f)return bV(e),s(r);if(e._isStdio)e.write(m,function(){u()});else{var d=e.write(m);d===!1?e.once("drain",u):u()}})})})}function Oie(t){var e=!1,n=!1,r;function o(){var i=t.read();if(i!==null&&r){var s=r;r=null,s(null,i)}}return t.on("readable",function(){n=!0,r&&o()}).on("end",function(){e=!0,r&&r(e)}).on("error",function(i){e=i,r&&r(e)}),function(i,s){r=s,e?s(e):n&&o()}}function HS(t){var e=[],n=[],r,o=!1,i;function s(){for(;(e.length||r)&&n.length;)n.shift()(e.length?null:r,e.shift());!e.length&&o&&(o=!1,t.resume())}return t.on("data",function(a){e.push(a),s(),e.length&&t.pause&&(o=!0,t.pause())}),t.on("end",function(){r=!0,s()}),t.on("close",function(){r=!0,s()}),t.on("error",function(a){r=a,s()}),function(a,c){if(!c)throw new Error("*must* provide cb");if(a){let u=function(){for(;n.length;)n.shift()(a);c(a)};var l=u;if(r)return u();t.once("close",u),bV(t)}else n.push(c),s()}}var Uie=HS,BS=function(t,e){return function(n){return TV(n,t,e)}},WS=function(t){return HS(t)};fc=RV.exports=function(t,e){return t.writable&&t.write?t.readable?function(n){return TV(n,t,e),HS(t)}:BS(t,e):WS(t)};fc.sink=BS;fc.source=WS;fc.read=Uie;fc.read1=HS;fc.read2=Oie;fc.duplex=function(t,e){return{source:WS(t),sink:BS(t,e)}};fc.transform=function(t){return function(e){var n=WS(t);return BS(t)(e),n}}});var NV=M((KEe,VS)=>{var Mie=require("stream");VS.exports=kR;VS.exports.source=function(t){return kR(null,t)};VS.exports.sink=function(t){return kR(t,null)};var kV=typeof setImmediate>"u"?process.nextTick:setImmediate;function kR(t,e){t&&typeof t=="object"&&(e=t.source,t=t.sink);var n=[],r=[],o,i,s=new Mie;s.writable=s.readable=!0,s.write=function(h){return n.length?n.shift()(null,h):r.push(h),n.length||(i=!0),!!n.length},s.end=function(){e?r.length?g():e(o=!0,n.length?n.shift():function(){}):n.length&&n.shift()(!0)},s.source=function(h,v){r.length?(v(null,r.shift()),r.length||s.emit("drain")):((o=o||h)?v(o):n.push(v),i&&(i=!1,s.emit("drain")))};var a;t&&(a=t(s.source)),a&&!e&&(e=a);var c=[],l=[],u=!1,f=!1,m=!1;if(s.sink=function(h){e=h,kV(g)},e){s.sink(e),s.paused=!0;var d=s.on.bind(s);s.on=(h,v)=>{var C=d(h,v);return h==="data"&&s.paused&&kV(s.resume.bind(s)),C};var p=s.pipe.bind(s);s.pipe=function(h,v){var C=p(h,v);return s.paused&&s.resume(),C}}function g(){if(f=!1,!(!e||m)){for(;c.length&&!s.paused;)s.emit("data",c.shift());if(!s.paused){if(u)return s.emit("end");m=!0,e(null,function h(v,C){m=!1,s.paused?(v===!0?u=v:v?s.emit("error",v):c.push(C),f=!0):v&&(o=v)!==!0?s.emit("error",v):(o=o||v)?s.emit("end"):(s.emit("data",C),m=!0,e(null,h))})}}}return s.pause=function(){return s.paused=!0,s},s.resume=function(){return s.paused=!1,g(),s},s.destroy=function(){!o&&e&&e(o=!0,function(){}),o=!0,n.length&&n.shift()(!0),s.emit("close")},s}});var AV=M((JEe,LV)=>{LV.exports=$ie;function $ie(t,e){typeof t=="function"&&(e=t,t=!1);var n=[],r,o;function i(f,m){f&&(r=f,o&&u(r)),o=m,l()}var s;function a(f){s=s||f||!0,l()}function c(f){if(!s){if(o){u(r,f);return}n.push(f)}}if(t)return{push:c,end:a,source:i,buffer:n};return i.push=c,i.end=a,i.buffer=n,i;function l(){o&&(r?u(r):!n.length&&s?u(s):n.length&&u(null,n.shift()))}function u(f,m){var d=o;if(f&&e){var p=e;e=null,p(f===!0?null:f)}o=null,d(f,m)}}});var KR=M(zR=>{"use strict";Object.defineProperty(zR,"__esModule",{value:!0});var uY=require("child_process"),yse=1024*1024,fY={exec(t,e){let n={maxBuffer:2*yse,windowsHide:!0};(0,uY.exec)(t,n,e)},spawn(t,e,n){return(0,uY.spawn)(t,e,n)},stripLine(t,e){let n=0;for(;e-- >0;){let r=t.indexOf(`
`,n);r>=0&&(n=r+1)}return n>0?t.substring(n):t},split(t,e){let n=t.trim().split(/\s+/);return n.length>e&&(n[e-1]=n.slice(e-1).join(" ")),n},extractColumns(t,e,n){let r=t.split(/(\r\n|\n|\r)/),o=[];return n||(n=Math.max.apply(null,e)+1),r.forEach(i=>{let s=fY.split(i,n),a=[];e.forEach(c=>{a.push(s[c]||"")}),o.push(a)}),o},parseTable(t){let e=t.split(/(\r\n\r\n|\r\n\n|\n\r\n|\n\n)/).filter(n=>n&&n.trim().length>0).map(n=>n.split(/(\r\n|\n|\r)/).filter(r=>r.trim().length>0));return e.forEach(n=>{for(let r=0;n[r];){let o=n[r];o.startsWith(" ")?(n[r-1]+=o.trimLeft(),n.splice(r,1)):r+=1}}),e.map(n=>{let r={};return n.forEach(o=>{let i=o.indexOf(":"),s=o.slice(0,i).trim();r[s]=o.slice(i+1).trim()}),r})}};zR.default=fY});var mY=M((dY,mx)=>{(function(t,e){"use strict";typeof define=="function"&&define.amd?define(e):typeof mx=="object"&&mx.exports?mx.exports=e():t.log=e()})(dY,function(){"use strict";var t=function(){},e="undefined",n=typeof window!==e&&typeof window.navigator!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],o={},i=null;function s(p,g){var h=p[g];if(typeof h.bind=="function")return h.bind(p);try{return Function.prototype.bind.call(h,p)}catch{return function(){return Function.prototype.apply.apply(h,[p,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(p){return p==="debug"&&(p="log"),typeof console===e?!1:p==="trace"&&n?a:console[p]!==void 0?s(console,p):console.log!==void 0?s(console,"log"):t}function l(){for(var p=this.getLevel(),g=0;g<r.length;g++){var h=r[g];this[h]=g<p?t:this.methodFactory(h,p,this.name)}if(this.log=this.debug,typeof console===e&&p<this.levels.SILENT)return"No console available for logging"}function u(p){return function(){typeof console!==e&&(l.call(this),this[p].apply(this,arguments))}}function f(p,g,h){return c(p)||u.apply(this,arguments)}function m(p,g){var h=this,v,C,w,y="loglevel";typeof p=="string"?y+=":"+p:typeof p=="symbol"&&(y=void 0);function S(k){var E=(r[k]||"silent").toUpperCase();if(!(typeof window===e||!y)){try{window.localStorage[y]=E;return}catch{}try{window.document.cookie=encodeURIComponent(y)+"="+E+";"}catch{}}}function D(){var k;if(!(typeof window===e||!y)){try{k=window.localStorage[y]}catch{}if(typeof k===e)try{var E=window.document.cookie,x=encodeURIComponent(y),b=E.indexOf(x+"=");b!==-1&&(k=/^([^;]+)/.exec(E.slice(b+x.length+1))[1])}catch{}return h.levels[k]===void 0&&(k=void 0),k}}function _(){if(!(typeof window===e||!y)){try{window.localStorage.removeItem(y)}catch{}try{window.document.cookie=encodeURIComponent(y)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function A(k){var E=k;if(typeof E=="string"&&h.levels[E.toUpperCase()]!==void 0&&(E=h.levels[E.toUpperCase()]),typeof E=="number"&&E>=0&&E<=h.levels.SILENT)return E;throw new TypeError("log.setLevel() called with invalid level: "+k)}h.name=p,h.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},h.methodFactory=g||f,h.getLevel=function(){return w??C??v},h.setLevel=function(k,E){return w=A(k),E!==!1&&S(w),l.call(h)},h.setDefaultLevel=function(k){C=A(k),D()||h.setLevel(k,!1)},h.resetLevel=function(){w=null,_(),l.call(h)},h.enableAll=function(k){h.setLevel(h.levels.TRACE,k)},h.disableAll=function(k){h.setLevel(h.levels.SILENT,k)},h.rebuild=function(){if(i!==h&&(v=A(i.getLevel())),l.call(h),i===h)for(var k in o)o[k].rebuild()},v=A(i?i.getLevel():"WARN");var U=D();U!=null&&(w=A(U)),l.call(h)}i=new m,i.getLogger=function(g){if(typeof g!="symbol"&&typeof g!="string"||g==="")throw new TypeError("You must supply a name when creating a logger.");var h=o[g];return h||(h=o[g]=new m(g,i.methodFactory)),h};var d=typeof window!==e?window.log:void 0;return i.noConflict=function(){return typeof window!==e&&window.log===i&&(window.log=d),i},i.getLoggers=function(){return o},i.default=i,i})});var JR=M(jv=>{"use strict";var Cse=jv&&jv.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jv,"__esModule",{value:!0});var Ese=Cse(mY());jv.default=Ese.default});var gY=M(ms=>{"use strict";var Sse=ms&&ms.__createBinding||(Object.create?(function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]})),xse=ms&&ms.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),pY=ms&&ms.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(n){var r=[];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[r.length]=o);return r},t(e)};return function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var r=t(e),o=0;o<r.length;o++)r[o]!=="default"&&Sse(n,e,r[o]);return xse(n,e),n}})(),hY=ms&&ms.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ms,"__esModule",{value:!0});var _se=pY(require("os")),px=pY(require("fs")),oi=hY(KR()),Dse=hY(JR()),Ise=t=>new Promise((e,n)=>{px.existsSync(t)?e():px.mkdir(t,r=>{r?n(r):e()})}),bp={darwin(t){return new Promise((e,n)=>{oi.default.exec("netstat -anv -p TCP && netstat -anv -p UDP",function(r,o,i){if(r)n(r);else{let s=i.toString().trim();if(s){n(new Error(s));return}let a=oi.default.stripLine(o.toString(),1),c=a.slice(0,a.indexOf(`
`)),l=oi.default.stripLine(a,1),u=c.indexOf("rxbytes")>=0?10:8,f=oi.default.extractColumns(l,[0,3,u],10).filter(m=>!!String(m[0]).match(/^(udp|tcp)/)).find(m=>{let d=String(m[1]).match(/\.(\d+)$/);return!!(d&&d[1]===String(t))});f&&f[2].length?e(parseInt(f[2],10)):n(new Error(`pid of port (${t}) not found`))}})})},linux(t){return new Promise((e,n)=>{oi.default.exec("netstat -tunlp",function(o,i,s){if(o)n(o);else{let a=s.toString().trim();a&&Dse.default.warn(a);let c=oi.default.stripLine(i.toString(),2),l=oi.default.extractColumns(c,[3,6],7).find(u=>{let f=String(u[0]).match(/:(\d+)$/);return!!(f&&f[1]===String(t))});if(l&&l[1]){let u=l[1].split("/",1)[0];u.length?e(parseInt(u,10)):n(new Error(`pid of port (${t}) not found`))}else n(new Error(`pid of port (${t}) not found`))}})})},win32(t){return new Promise((e,n)=>{oi.default.exec("netstat -ano",function(r,o,i){if(r)n(r);else{let s=i.toString().trim();if(s){n(new Error(s));return}let a=oi.default.stripLine(o.toString(),4),c=oi.default.extractColumns(a,[1,4],5).find(l=>{let u=String(l[0]).match(/:(\d+)$/);return!!(u&&u[1]===String(t))});c&&c[1].length&&parseInt(c[1],10)>0?e(parseInt(c[1],10)):n(new Error(`pid of port (${t}) not found`))}})})},android(t){return new Promise((e,n)=>{let r=_se.tmpdir()+"/.find-process",o=r+"/"+process.pid,i='netstat -tunp >> "'+o+'"';Ise(r).then(()=>{oi.default.exec(i,()=>{px.readFile(o,"utf8",(s,a)=>{if(px.unlink(o,()=>{}),s)n(s);else{a=oi.default.stripLine(a,2);let c=oi.default.extractColumns(a,[3,6],7).find(l=>{let u=String(l[0]).match(/:(\d+)$/);return!!(u&&u[1]===String(t))});if(c&&c[1]){let l=c[1].split("/",1)[0];l.length?e(parseInt(l,10)):n(new Error(`pid of port (${t}) not found`))}else n(new Error(`pid of port (${t}) not found`))}})})})})}};bp.freebsd=bp.darwin;bp.sunos=bp.darwin;function Pse(t){let e=process.platform;return new Promise((n,r)=>{if(!(e in bp))return r(new Error(`platform ${e} is unsupported`));let o=bp[e];o(t).then(n,r)})}ms.default=Pse});var yY=M(ps=>{"use strict";var bse=ps&&ps.__createBinding||(Object.create?(function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]})),Tse=ps&&ps.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Rse=ps&&ps.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(n){var r=[];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[r.length]=o);return r},t(e)};return function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var r=t(e),o=0;o<r.length;o++)r[o]!=="default"&&bse(n,e,r[o]);return Tse(n,e),n}})(),kse=ps&&ps.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ps,"__esModule",{value:!0});var hx=Rse(require("path")),$l=kse(KR());function XR(t,e){return e?t&&t.match?t.match(e)!==null:!1:!0}function vY(t){let e=t.split(hx.sep),n=e[e.length-1];n&&(e[e.length-1]=n.split(" ")[0]);let r=[];for(let o of e){let i=o.indexOf(" -");if(i>=0){r.push(o.substring(0,i).trim());break}else if(o.endsWith(" ")){r.push(o.trim());break}r.push(o)}return r.join(hx.sep)}function wY(t){if(process.platform==="darwin"){let e=t.indexOf(".app/");if(e>=0)return hx.basename(t.substring(0,e))}return hx.basename(t)}var Vf={darwin(t){return new Promise((e,n)=>{let r;"pid"in t&&t.pid!==void 0?r=`ps -p ${t.pid} -ww -o pid,ppid,uid,gid,args`:r="ps ax -ww -o pid,ppid,uid,gid,args",$l.default.exec(r,function(o,i,s){if(o)"pid"in t&&t.pid!==void 0?e([]):n(o);else{let a=s.toString().trim();if(a){n(new Error(a));return}let c=$l.default.stripLine(i.toString(),1),u=$l.default.extractColumns(c,[0,1,2,3,4],5).filter(f=>f[0]&&t.pid!==void 0?f[0]===String(t.pid):f[4]&&t.name?XR(f[4],t.name):!!f[0]).map(f=>{let m=String(f[4]),d=vY(m);return{pid:parseInt(f[0],10),ppid:parseInt(f[1],10),uid:parseInt(f[2],10),gid:parseInt(f[3],10),name:wY(d),bin:d,cmd:f[4]}});t.config.strict&&t.name&&(u=u.filter(f=>f.name===t.name)),e(u)}})})},win32(t){return new Promise((e,n)=>{let r="[Console]::OutputEncoding = [System.Text.Encoding]::UTF8; Get-CimInstance -className win32_process | select Name,ProcessId,ParentProcessId,CommandLine,ExecutablePath",o=[],i=$l.default.spawn("powershell.exe",["/c",r],{detached:!1,windowsHide:!0});i.stdout.on("data",s=>{o.push(s.toString())}),i.on("error",s=>{n(new Error("Command '"+r+"' failed with reason: "+s.toString()))}),i.on("close",s=>{if(s!==0)return n(new Error("Command '"+r+"' terminated with code: "+s));let a=$l.default.parseTable(o.join("")).filter(c=>{if(t.pid!==void 0)return c.ProcessId===String(t.pid);if(t.name){let l=c.Name||"";return t.config.strict?l===t.name||l.endsWith(".exe")&&l.slice(0,-4)===t.name:XR(c.CommandLine||l,t.name)}else return!0}).map(c=>({pid:parseInt(c.ProcessId,10),ppid:parseInt(c.ParentProcessId,10),bin:c.ExecutablePath,name:c.Name||"",cmd:c.CommandLine}));e(a)})})},android(t){return new Promise((e,n)=>{$l.default.exec("ps",function(o,i,s){if(o)t.pid!==void 0?e([]):n(o);else{let a=s.toString().trim();if(a){n(new Error(a));return}let c=$l.default.stripLine(i.toString(),1),u=$l.default.extractColumns(c,[0,3],4).filter(f=>f[0]&&t.pid!==void 0?f[0]===String(t.pid):f[1]&&t.name?XR(f[1],t.name):!!f[0]).map(f=>{let m=String(f[1]),d=vY(m);return{pid:parseInt(f[0],10),ppid:0,name:wY(d),bin:d,cmd:f[1]}});t.config.strict&&t.name&&(u=u.filter(f=>f.name===t.name)),e(u)}})})}};Vf.linux=Vf.darwin;Vf.sunos=Vf.darwin;Vf.freebsd=Vf.darwin;function Nse(t){let e=process.platform,n=Vf[e];return n?n(t):Promise.reject(new Error(`Platform "${e}" is not supported`))}ps.default=Nse});var EY=M(Vv=>{"use strict";var QR=Vv&&Vv.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vv,"__esModule",{value:!0});var Lse=QR(gY()),CY=QR(yY()),Ase=QR(JR()),ZR={port(t,e){return(0,Lse.default)(t).then(n=>ZR.pid(n,e),()=>[])},pid(t,e){return(0,CY.default)({pid:t,config:e})},name(t,e){return(0,CY.default)({name:t,config:e,skipSelf:!0})}};function Fse(t,e,n){let r=Object.assign({logLevel:"warn",strict:typeof n=="boolean"?n:!1},typeof n=="object"?n:{});return r.logLevel&&Ase.default.setLevel(r.logLevel),new Promise((o,i)=>{if(!(t in ZR))i(new Error(`do not support find by "${t}"`));else{let s=/^\d+$/.test(String(e));t==="pid"&&!s?i(new Error("pid must be a number")):t==="port"&&!s?i(new Error("port must be a number")):ZR[t](e,r).then(o,i)}})}Vv.default=Fse});var xY=M(SY=>{"use strict";Object.defineProperty(SY,"__esModule",{value:!0})});var _Y=M(hs=>{"use strict";var Ose=hs&&hs.__createBinding||(Object.create?(function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]})),Use=hs&&hs.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Ose(e,t,n)},Mse=hs&&hs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hs,"__esModule",{value:!0});hs.default=void 0;var $se=EY();Object.defineProperty(hs,"default",{enumerable:!0,get:function(){return Mse($se).default}});Use(xY(),hs)});var Yp,Cc,sa,Ss,qp,hw,tN=ne(()=>{Yp="function",Cc="object",sa="undefined",Ss="prototype",qp=Object,hw=qp[Ss]});function aa(t,e){return t||e}function Ln(t,e){return t[e]}function Gn(t,e){try{return{v:t.apply(this,e)}}catch(n){return{e:n}}}function zue(t,e){var n=Gn(t);return n.e?e:n.v}function v_(t){return function(e){return typeof e===t}}function cG(t){var e="[object "+t+"]";return function(n){return!!(n&&w_(n)===e)}}function w_(t){return wN[g_].call(t)}function yN(t,e){return typeof t===e}function Ve(t){return typeof t===od||t===od}function Kue(t){return!y_(t)}function ae(t){return t===kn||Ve(t)}function Jue(t){return t===kn||!y_(t)}function y_(t){return!!t||t!==Mo}function Xue(t){return!nN&&(nN=["string","number","boolean",od,"symbol","bigint"]),t!==vw&&nN.indexOf(t)!==-1}function tn(t){return!t&&ae(t)?!1:!!t&&typeof t===vw}function fo(t){return!!(t&&t.then&&Re(t.then))}function CN(t){return!t||!xs(t)}function xs(t){return!(!t||zue(function(){return!(t&&0+t)},!t))}function mr(t,e){return!!t&&wN.hasOwnProperty[Dr](t,e)}function Zue(t,e){return mr(t,e)||!!E_(t,e)}function Ie(t,e,n){if(t&&tn(t)){for(var r in t)if(_s(t,r)&&e[Dr](n||t,r,t[r])===-1)break}}function lG(t){var e={};if(e[c_.c]=!0,e[c_.e]=!0,t.l){e.get=function(){return t.l.v};var n=E_(t.l,"v");n&&n.set&&(e.set=function(r){t.l.v=r})}return Ie(t,function(r,o){e[c_[r]]=Kue(o)?e[c_[r]]:o}),e}function EN(t,e,n,r,o,i){var s={e:i,c:o};return n&&(s.g=n),r&&(s.s=r),$o(t,e,lG(s))}function gt(t,e,n){return $o(t,e,lG(n))}function fG(t,e,n,r,o){var i={};return Ie(t,function(s,a){m_(i,s,e?a:s),m_(i,a,n?a:s)}),r?r(i):i}function m_(t,e,n,r){$o(t,e,{value:n,enumerable:!0,writable:!1})}function Ee(t,e){var n=gN,r=wN[g_][Dr](t);r===Que&&(t={stack:Sn(t.stack),message:Sn(t.message),name:Sn(t.name)});try{n=JSON.stringify(t,kn,e?typeof e=="number"?e:4:Mo),n=(n?n.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):kn)||Sn(t)}catch(o){n=" - "+Ee(o,e)}return r+": "+n}function An(t){throw new Error(t)}function Pr(t){throw new TypeError(t)}function mG(t){return t}function efe(t){return t[pN]||kn}function Ds(t){return dG&&Ie(t,function(e,n){(we(n)||tn(n))&&Ds(n)}),mo(t)}function pG(t){return fG(t,1,0,mo)}function tfe(t){return fG(t,0,0,mo)}function nfe(t){var e={};return Ie(t,function(n,r){m_(e,n,r[1]),m_(e,r[0],r[1])}),mo(e)}function hG(t){return nfe(t)}function vG(){var t;return typeof globalThis!==od&&(t=globalThis),!t&&typeof self!==od&&(t=self),!t&&typeof window!==od&&(t=window),!t&&typeof global!==od&&(t=global),t}function wG(){if(!rN){var t=Gn(vG).v||{};rN=t[tG]=t[tG]||{}}return rN}function Xp(t,e,n){var r=e?e[t]:kn;return function(o){var i=(o?o[t]:kn)||r;if(i||n){var s=arguments;return(i||n).apply(o,i?Sc[Dr](s,1):s)}Pr('"'+Sn(t)+'" not defined for '+Ee(o))}}function rfe(t){return function(e){return e[t]}}function ofe(t,e,n){return ae(t)&&Pr("Invalid "+Ee(t)),n<0?gN:(e=e||0,e<0&&(e=la(e+t[id],0)),Ve(n)?nG(t,e):nG(t,e,e+n))}function cd(t,e){return zn(t,0,e)}function ife(){if(!oN){var t=wG();oN=t.gblSym=t.gblSym||{k:{},s:{}}}return oN}function xN(t){var e={description:Sn(t),toString:function(){return vN+"("+t+")"}};return e[Gue]=!0,e}function sfe(t){var e=ife();if(!_s(e.k,t)){var n=xN(t),r=br(e.s).length;n[rG]=function(){return r+"_"+n[g_]()},e.k[t]=n,e.s[n[rG]()]=Sn(t)}return e.k[t]}function afe(t){!l_&&(l_={});var e,n=gG[t];return n&&(e=l_[n]=l_[n]||xN(vN+"."+n)),e}function au(){Nn=wG()}function yG(t){var e={};return!Nn&&au(),e.b=Nn.lzy,$o(e,"v",{configurable:!0,get:function(){var n=t();return Nn.lzy||$o(e,"v",{value:n}),e.b=Nn.lzy,n}}),e}function fi(t){return $o({toJSON:function(){return t}},"v",{value:t})}function Cw(t,e){var n;return function(){return!Nn&&au(),(!n||Nn.lzy)&&(n=fi(Gn(t,e).v)),n.v}}function po(t){return!Nn&&au(),(!gw||t===!1||Nn.lzy)&&(gw=fi(Gn(vG).v||kn)),gw.v}function vt(t,e){var n;if(!gw||e===!1?n=po(e):n=gw.v,n&&n[t])return n[t];if(t===CG)try{return window}catch{}return kn}function ld(){return!!Fn()}function Zp(){return!!On()}function Ew(){return!!Kn()}function _N(){return!!S_()}function x_(){return zp=fi(Gn(vt,[vN]).v),zp}function cfe(t){var e=(Nn.lzy?0:zp)||x_();return e.v?e.v[t]:Mo}function SG(){return!!lfe()}function lfe(){return!Nn&&au(),((Nn.lzy?0:zp)||x_()).v}function Sw(t,e){var n=gG[t];!Nn&&au();var r=(Nn.lzy?0:zp)||x_();return r.v?r.v[n||t]:e?Mo:afe(t)}function Qp(t,e){!Nn&&au();var n=(Nn.lzy?0:zp)||x_();return n.v?n.v(t):e?kn:xN(t)}function __(t){return!Nn&&au(),iN=(Nn.lzy?0:iN)||fi(Gn(cfe,["for"]).v),(iN.v||sfe)(t)}function p_(t){return!!t&&Re(t.next)}function DN(t){return!Jue(t)&&Re(t[Sw(3)])}function D_(t,e,n){if(t&&(p_(t)||(!u_&&(u_=fi(Sw(3))),t=t[u_.v]?t[u_.v]():kn),p_(t))){var r=Mo,o=Mo;try{for(var i=0;!(o=t.next()).done&&e[Dr](n||t,o.value,i,t)!==-1;)i++}catch(s){r={e:s},t.throw&&(o=kn,t.throw(r))}finally{try{o&&!o.done&&t.return&&t.return(o)}finally{if(r)throw r.e}}}}function Gp(t,e,n){return t.apply(e,n)}function Is(t,e){return!Ve(e)&&t&&(we(e)?Gp(t.push,t,e):p_(e)||DN(e)?D_(e,function(n){t.push(n)}):t.push(e)),t}function ee(t,e,n){if(t)for(var r=t[id]>>>0,o=0;o<r&&!(o in t&&e[Dr](n||t,t[o],o,t)===-1);o++);}function eh(t,e,n){return((t?t.slice:kn)||Sc).apply(t,Sc[Dr](arguments,1))}function ufe(t,e,n){return wt(t,e,n)!==-1}function ffe(t){if(!t)return{};var e=typeof t;e!==vw&&e!==h_&&Pr("Prototype must be an Object or function: "+Ee(t));function n(){}return n[Ec]=t,new n}function xG(t,e){var n=ui.setPrototypeOf||function(r,o){var i;!sN&&(sN=fi((i={},i[pN]=[],i instanceof Array))),sN.v?r[pN]=o:Ie(o,function(s,a){return r[s]=a})};return n(t,e)}function dfe(t,e,n){Gn(gt,[e,d_,{v:t,c:!0,e:!1}]),e=xG(e,n);function r(){this[f_]=e,Gn(gt,[this,d_,{v:t,c:!0,e:!1}])}return e[Ec]=n===kn?fa(n):(r[Ec]=n[Ec],new r),e}function oG(t,e){e&&(t[d_]=e)}function PN(t,e,n){var r=n||Error,o=r[Ec][d_],i=Error.captureStackTrace;return dfe(t,function(){var s=this,a=arguments;try{Gn(oG,[r,t]);var c=Gp(r,s,Sc[Dr](a))||s;if(c!==s){var l=hN(s);l!==hN(c)&&xG(c,l)}return i&&i(c,s[f_]),e&&e(c,a),c}finally{Gn(oG,[r,o])}},r)}function xn(){return(Date.now||mfe)()}function mfe(){return new Date().getTime()}function pfe(t){return function(n){return ae(n)&&Pr("strTrim called ["+Ee(n)+"]"),n&&n.replace&&(n=n.replace(t,gN)),n}}function Tr(t){if(!t||typeof t!==vw)return!1;lN||(lN=Zp()?On():!0);var e=!1;if(t!==lN){cN||(aN=Function[Ec][g_],cN=aN[Dr](ui));try{var n=hN(t);e=!n,e||(mr(n,f_)&&(n=n[f_]),e=!!(n&&typeof n===h_&&aN[Dr](n)===cN))}catch{}}return e}function gfe(t){return t.value&&IG(t),!0}function vfe(t,e,n,r){var o;return ee(t,function(i){if(i.k===e)return o=i,-1}),o||(o={k:e,v:e},t.push(o),r(o)),o.v}function bN(t,e,n,r){var o=n.handler,i=n.path?r?n.path.concat(r):n.path:[],s={handler:n.handler,src:n.src,path:i},a=typeof e,c=!1,l=e===kn;l||(e&&a===vw?c=Tr(e):l=Xue(a));var u={type:a,isPrim:l,isPlain:c,value:e,result:e,path:i,origin:n.src,copy:function(f,m){return bN(t,f,m?s:n,m)},copyTo:function(f,m){return DG(t,f,m,s)}};return u.isPrim?o&&o[Dr](n,u)?u.result:e:vfe(t,e,i,function(f){gt(u,"result",{g:function(){return f.v},s:function(p){f.v=p}});for(var m=0,d=o;!(d||(m<iG.length?iG[m++]:gfe))[Dr](n,u);)d=kn})}function DG(t,e,n,r){if(!ae(n))for(var o in n)e[o]=bN(t,n[o],r,o);return e}function wfe(t,e,n){var r={handler:n,src:e,path:[]};return DG([],t,e,r)}function yfe(t,e){var n={handler:e,src:t};return bN([],t,n)}function Cfe(t){var e=t.value;if(we(e)){var n=t.result=[];return n.length=e.length,t.copyTo(n,e),!0}return!1}function Efe(t){var e=t.value;return C_(e)?(t.result=new Date(e.getTime()),!0):!1}function Sfe(t){return t.type===h_}function IG(t){var e=t.value;if(e&&t.isPlain){var n=t.result={};return t.copyTo(n,e),!0}return!1}function xfe(t,e){return ee(e,function(n){wfe(t,n)}),t}function TN(t,e,n,r,o,i,s){return xfe(yfe(t)||{},Sc[Dr](arguments))}function ud(){return!Nn&&au(),(!uN||Nn.lzy)&&(uN=fi(Gn(vt,["performance"]).v)),uN.v}function _w(){var t=ud();return t&&t.now?t.now():xn()}function _fe(t,e,n){ke(t)||Pr("'"+Ee(t)+"' is not a string");var r=ke(e)?e:Sn(e),o=!Ve(n)&&n<t[id]?n:t[id];return zn(t,o-r[id],o)===r}function Dfe(t,e,n){ke(t)||Pr("'"+Ee(t)+"' is not a string");var r=ke(e)?e:Sn(e),o=n>0?n:0;return zn(t,o,o+r[id])===r}function Pfe(t,e,n){var r=!0,o=t?e(kn):kn,i;function s(){return r=!1,o&&o[dN]&&o[dN](),i}function a(){o&&n(o),o=kn}function c(){return o=e(o),r||s(),i}function l(u){!u&&o&&a(),u&&!o&&c()}return i={cancel:a,refresh:c},i[mN]=function(){return o&&o[mN]?o[mN]():r},i[fN]=function(){return r=!0,o&&o[fN]&&o[fN](),i},i[dN]=s,i=$o(i,Ife,{get:function(){return!!o},set:l}),{h:i,dn:function(){o=kn}}}function RN(t,e,n){var r=we(e),o=r?e.length:0,i=(o>0?e[0]:r?Mo:e)||setTimeout,s=(o>1?e[1]:Mo)||clearTimeout,a=n[0];n[0]=function(){c.dn(),Gp(a,Mo,Sc[Dr](arguments))};var c=Pfe(t,function(l){if(l){if(l.refresh)return l.refresh(),l;Gp(s,Mo,[l])}return Gp(i,Mo,n)},function(l){Gp(s,Mo,[l])});return c.h}function di(t,e){return RN(!0,Mo,Sc[Dr](arguments))}function bG(t,e,n){return RN(!0,t,Sc[Dr](arguments,1))}function TG(t,e){return RN(!1,Mo,Sc[Dr](arguments))}var Mo,kn,gN,h_,vw,Ec,pN,od,f_,vN,Gue,id,d_,Dr,g_,ui,wN,sG,sd,ww,aG,yw,Sc,nN,ke,Re,we,C_,Ir,ca,ad,E_,_s,c_,$o,uG,Sn,Que,dG,Kp,br,mo,SN,hN,gG,tG,rN,Jp,su,la,nG,zn,ua,rG,oN,l_,Nn,CG,gw,Fn,On,Kn,S_,EG,zp,iN,u_,wt,xc,IN,xw,fa,sN,hfe,tt,ji,_G,aN,cN,lN,iG,th,uN,PG,fd,Vi,nh,fN,dN,mN,Ife,Ne=ne(()=>{Mo=void 0,kn=null,gN="",h_="function",vw="object",Ec="prototype",pN="__proto__",od="undefined",f_="constructor",vN="Symbol",Gue="_polyfill",id="length",d_="name",Dr="call",g_="toString",ui=aa(Object),wN=Ln(ui,Ec),sG=aa(String),sd=Ln(sG,Ec),ww=aa(Math),aG=aa(Array),yw=Ln(aG,Ec),Sc=Ln(yw,"slice");ke=v_("string"),Re=v_(h_);we=Ln(aG,"isArray"),C_=cG("Date"),Ir=v_("number"),ca=v_("boolean"),ad=cG("Error");E_=Ln(ui,"getOwnPropertyDescriptor");_s=aa(Ln(ui,"hasOwn"),Zue);c_={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};$o=Ln(ui,"defineProperty"),uG=Ln(ui,"defineProperties");Sn=aa(sG),Que="[object Error]";dG=Ln(ui,"freeze");Kp=Ln(ui,"assign"),br=Ln(ui,"keys");mo=aa(dG,mG),SN=aa(Ln(ui,"seal"),mG),hN=aa(Ln(ui,"getPrototypeOf"),efe);gG=tfe({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),tG="__tsUtils$gblCfg";Jp=Xp;su=Ln(ww,"min"),la=Ln(ww,"max"),nG=Jp("slice",sd),zn=Jp("substring",sd),ua=Xp("substr",sd,ofe);rG="_urid";CG="window";Fn=Cw(vt,["document"]);On=Cw(vt,[CG]);Kn=Cw(vt,["navigator"]);S_=Cw(vt,["history"]),EG=Cw(function(){return!!Gn(function(){return process&&(process.versions||{}).node}).v});wt=Jp("indexOf",yw),xc=Jp("map",yw);IN=Xp("includes",yw,ufe),xw=Jp("reduce",yw),fa=aa(Ln(ui,"create"),ffe);hfe=pfe(/^\s+|(?=\s)\s+$/g),tt=Xp("trim",sd,hfe),ji=Ln(ww,"floor"),_G=Ln(ww,"ceil");iG=[Cfe,IG,Sfe,Efe];th=rfe(id);PG=Ln(ww,"round"),fd=Xp("endsWith",sd,_fe);Vi=Jp("indexOf",sd),nh=Xp("startsWith",sd,Dfe);fN="ref",dN="unref",mN="hasRef",Ife="enabled"});function Ho(t,e){typeof e!==Yp&&e!==null&&Pr("Class extends value "+String(e)+" is not a constructor or null"),kN(t,e);function n(){this.constructor=t}t[Ss]=e===null?fa(e):(n[Ss]=e[Ss],new n)}function I_(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t}var gbe,vbe,RG,Tfe,Yi,kN,kG=ne(()=>{Ne();tN();gbe=(po()||{}).Symbol,vbe=(po()||{}).Reflect,RG="hasOwnProperty",Tfe=function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)hw[RG].call(e,o)&&(t[o]=e[o])}return t},Yi=Kp||Tfe,kN=function(t,e){return kN=qp.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r[RG](o)&&(n[o]=r[o])},kN(t,e)}});var NG=ne(()=>{});var Bo=ne(()=>{tN();kG();NG();Ne()});function R_(t){return t&&(t===$N[_c]||t===Array[_c])}function HN(t){return R_(t)||t===Function[_c]}function dd(t){var e;if(t){if(Iw)return Iw(t);var n=t[MN]||t[_c]||(t[k_]?t[k_][_c]:null);e=t[b_]||n,mr(t,b_)||(delete t[NN],e=t[b_]=t[NN]||t[b_],t[NN]=n)}return e}function A_(t,e){var n=[];if(FG)n=FG(t);else for(var r in t)typeof r=="string"&&mr(t,r)&&n.push(r);if(n&&n.length>0)for(var o=0;o<n.length;o++)e(n[o])}function BN(t,e,n){return e!==k_&&typeof t[e]===N_&&(n||mr(t,e))&&e!==MN&&e!==_c}function F_(t){Pr("DynamicProto: "+t)}function kfe(t){var e=fa(null);return A_(t,function(n){!e[n]&&BN(t,n,!1)&&(e[n]=t[n])}),e}function WN(t,e){for(var n=t.length-1;n>=0;n--)if(t[n]===e)return!0;return!1}function Nfe(t,e,n,r){function o(c,l,u){var f=l[u];if(f[AN]&&r){var m=c[L_]||{};m[Dw]!==!1&&(f=(m[l[rh]]||{})[u]||f)}return function(){return f.apply(c,arguments)}}var i=fa(null);A_(n,function(c){i[c]=o(e,n,c)});for(var s=dd(t),a=[];s&&!HN(s)&&!WN(a,s);)A_(s,function(c){!i[c]&&BN(s,c,!Iw)&&(i[c]=o(e,s,c))}),a.push(s),s=dd(s);return i}function Lfe(t,e,n,r){var o=null;if(t&&mr(n,rh)){var i=t[L_]||fa(null);if(o=(i[n[rh]]||fa(null))[e],o||F_("Missing ["+e+"] "+N_),!o[FN]&&i[Dw]!==!1){for(var s=!mr(t,e),a=dd(t),c=[];s&&a&&!HN(a)&&!WN(c,a);){var l=a[e];if(l){s=l===r;break}c.push(a),a=dd(a)}try{s&&(t[e]=o),o[FN]=1}catch{i[Dw]=!1}}}return o}function Afe(t,e,n){var r=e[t];return r===n&&(r=dd(e)[t]),typeof r!==N_&&F_("["+t+"] is not a "+N_),r}function Ffe(t,e,n,r,o){function i(c,l){var u=function(){var f=Lfe(this,l,c,u)||Afe(l,c,u);return f.apply(this,arguments)};return u[AN]=1,u}if(!R_(t)){var s=n[L_]=n[L_]||fa(null);if(!R_(s)){var a=s[e]=s[e]||fa(null);s[Dw]!==!1&&(s[Dw]=!!o),R_(a)||A_(n,function(c){BN(n,c,!1)&&n[c]!==r[c]&&(a[c]=n[c],delete n[c],(!mr(t,c)||t[c]&&!t[c][AN])&&(t[c]=i(t,c)))})}}}function Ofe(t,e){if(Iw){for(var n=[],r=dd(e);r&&!HN(r)&&!WN(n,r);){if(r===t)return!0;n.push(r),r=dd(r)}return!1}return!0}function LN(t,e){return mr(t,_c)?t.name||e||LG:((t||{})[k_]||{}).name||e||LG}function Je(t,e,n,r){mr(t,_c)||F_("theClass is an invalid class definition.");var o=t[_c];Ofe(o,e)||F_("["+LN(t)+"] not in hierarchy of ["+LN(e)+"]");var i=null;mr(o,rh)?i=o[rh]:(i=Rfe+LN(t,"_")+"$"+UN.n,UN.n++,o[rh]=i);var s=Je[UG],a=!!s[T_];a&&r&&r[T_]!==void 0&&(a=!!r[T_]);var c=kfe(e),l=Nfe(o,e,c,a);n(e,l);var u=!!Iw&&!!s[ON];u&&r&&(u=!!r[ON]),Ffe(o,i,e,c,u!==!1)}var P_,k_,_c,N_,L_,AN,rh,Rfe,FN,Dw,UG,LG,MN,b_,AG,NN,T_,ON,$N,Iw,FG,OG,UN,pr=ne(()=>{Ne();k_="constructor",_c="prototype",N_="function",L_="_dynInstFuncs",AN="_isDynProxy",rh="_dynClass",Rfe="_dynCls$",FN="_dynInstChk",Dw=FN,UG="_dfOpts",LG="_unknown_",MN="__proto__",b_="_dyn"+MN,AG="__dynProto$Gbl",NN="_dynInstProto",T_="useBaseInst",ON="setInstFuncs",$N=Object,Iw=$N.getPrototypeOf,FG=$N.getOwnPropertyNames,OG=po(),UN=OG[AG]||(OG[AG]={o:(P_={},P_[ON]=!0,P_[T_]=!0,P_),n:1e3});Je[UG]=UN.o});var jN,MG=ne(()=>{jN=100});var fn,VN,Pw=ne(()=>{Ne();fn=pG,VN=hG});var Ps,Ufe,$G=ne(()=>{Pw();Ps=fn({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),Ufe=fn({Unknown:0,NonRetryableStatus:1,CleanStorage:2,MaxInStorageTimeExceeded:3})});var mi,YN=ne(()=>{Pw();mi=fn({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2})});var Wo,me,oh,Dc,da,cu,Ge,ma,kt,Ic,Pc,pa,ih,sh,jo,md,bw,lu,ho,Jn,O_,uu,qN,qi,Tw,ah,U_,ha,pi,ch,ga,Vo,fu,pd,hi,du,Rw,Gi,bs,gi,lh,hd,GN,kw,mu,gd,Ts,zN,uh,M_,vd,wd,xt=ne(()=>{Wo="toLowerCase",me="length",oh="warnToConsole",Dc="throwInternal",da="watch",cu="apply",Ge="push",ma="splice",kt="logger",Ic="cancel",Pc="initialize",pa="identifier",ih="removeNotificationListener",sh="addNotificationListener",jo="isInitialized",md="value",bw="getNotifyMgr",lu="getPlugin",ho="name",Jn="processNext",O_="getProcessTelContext",uu="enabled",qN="stopPollingInternalLogs",qi="unload",Tw="onComplete",ah="version",U_="loggingLevelConsole",ha="createNew",pi="teardown",ch="messageId",ga="message",Vo="diagLog",fu="_doTeardown",pd="update",hi="getNext",du="setNextPlugin",Rw="userAgent",Gi="split",bs="replace",gi="type",lh="evtName",hd="status",GN="getAllResponseHeaders",kw="isChildEvt",mu="data",gd="getCtx",Ts="setCtx",zN="itemsReceived",uh="urlString",M_="headers",vd="timeout",wd="traceFlags"});function HG(t,e){KN||(KN=PN("AggregationError",function(r,o){o[me]>1&&(r.errors=o[1])}));var n=t||"One or more errors occurred.";throw ee(e,function(r,o){n+=`
`.concat(o," > ").concat(Ee(r))}),new KN(n,e||[])}var KN,BG=ne(()=>{Ne();xt()});function vi(t,e){return YG(t,function(n){return e?e({status:"fulfilled",rejected:!1,value:n}):n},function(n){return e?e({status:rL,rejected:!0,reason:n}):n})}function YG(t,e,n,r){var o=t;try{if(fo(t))(e||n)&&(o=t.then(e,n));else try{e&&(o=e(t))}catch(i){if(n)o=n(i);else throw i}}finally{r&&Mfe(o,r)}return o}function Mfe(t,e){var n=t;return e&&(fo(t)?t.finally?n=t.finally(e):n=t.then(function(r){return e(),r},function(r){throw e(),r}):e()),n}function $fe(t,e,n,r){JN=JN||{toString:function(){return"[[PromiseState]]"}},XN=XN||{toString:function(){return"[[PromiseResult]]"}},ZN=ZN||{toString:function(){return"[[PromiseIsHandled]]"}};var o={};o[JN]={get:e},o[XN]={get:n},o[ZN]={get:r},uG(t,o)}function Hfe(t){var e;return t&&t.createEvent&&(e=t.createEvent("Event")),!!e&&e.initEvent}function Bfe(t,e,n,r){var o=Fn();!$_&&($_=fi(!!Gn(Hfe,[o]).v));var i=$_.v?o.createEvent("Event"):r?new Event(e):{};if(n&&n(i),$_.v&&i.initEvent(e,!1,!0),i&&t[jG])t[jG](i);else{var s=t["on"+e];if(s)s(i);else{var a=vt("console");a&&(a.error||a.log)(e,Ee(i))}}}function VG(t){return Re(t)?t.toString():Ee(t)}function zG(t,e,n){var r=eh(arguments,3),o=0,i=!1,s,a=[],c=jfe++,l=Nw.length>0?Nw[Nw.length-1]:void 0,u=!1,f=null,m;function d(S,D){try{Nw.push(c),u=!0,f&&f.cancel(),f=null;var _=t(function(A,U){a.push(function(){try{var k=o===2?S:D,E=Ve(k)?s:Re(k)?k(s):k;fo(E)?E.then(A,U):k?A(E):o===3?U(E):A(E)}catch(x){U(x)}}),i&&v()},r);return _}finally{Nw.pop()}}function p(S){return d(void 0,S)}function g(S){var D=S,_=S;return Re(S)&&(D=function(A){return S&&S(),A},_=function(A){throw S&&S(),A}),d(D,_)}function h(){return qG[o]}function v(){if(a.length>0){var S=a.slice();a=[],u=!0,f&&f.cancel(),f=null,e(S)}}function C(S,D){return function(_){if(o===D){if(S===2&&fo(_)){o=1,_.then(C(2,1),C(3,1));return}o=S,i=!0,s=_,v(),!u&&S===3&&!f&&(f=di(w,Vfe))}}}function w(){if(!u)if(u=!0,EG())process.emit(GG,s,m);else{var S=On()||po();!QN&&(QN=fi(Gn(vt,[H_+"RejectionEvent"]).v)),Bfe(S,Wfe,function(D){return gt(D,"promise",{g:function(){return m}}),D.reason=s,D},!!QN.v)}}m={then:d,catch:p,finally:g},$o(m,"state",{get:h}),WG&&$fe(m,h,function(){return w_(s)},function(){return u}),SG()&&(m[Sw(11)]="IPromise");function y(){return"IPromise"+(WG?"["+c+(Ve(l)?"":":"+l)+"]":"")+" "+h()+(i?" - "+VG(s):"")}return m.toString=y,(function(){Re(n)||Pr(H_+": executor is not a function - "+VG(n));var D=C(3,0);try{n.call(m,C(2,0),D)}catch(_){D(_)}})(),m}function Yfe(t){return function(e){var n=eh(arguments,1);return t(function(r,o){try{var i=[],s=1;D_(e,function(a,c){a&&(s++,YG(a,function(l){i[c]=l,--s===0&&r(i)},o))}),s--,s===0&&r(i)}catch(a){o(a)}},n)}}function qfe(t){return fi(function(e){var n=eh(arguments,1);return t(function(r,o){var i=[],s=1;function a(c,l){s++,vi(c,function(u){u.rejected?i[l]={status:rL,reason:u.reason}:i[l]={status:"fulfilled",value:u.value},--s===0&&r(i)})}try{we(e)?ee(e,a):DN(e)?D_(e,a):Pr("Input is not an iterable"),s--,s===0&&r(i)}catch(c){o(c)}},n)})}function KG(t){ee(t,function(e){try{e()}catch{}})}function Gfe(t){var e=Ir(t)?t:0;return function(n){di(function(){KG(n)},e)}}function JG(t,e){return zG(JG,Gfe(e),t,e)}function zfe(t,e){!eL&&(eL=fi(Gn(vt,[H_]).v||null));var n=eL.v;if(!n)return JG(t);Re(t)||Pr(H_+": executor is not a function - "+Ee(t));var r=0;function o(){return qG[r]}var i=new n(function(s,a){function c(u){r=2,s(u)}function l(u){r=3,a(u)}t(c,l)});return $o(i,"state",{get:o}),i}function Lw(t){return zG(Lw,KG,t)}function XG(t,e){return!tL&&(tL=qfe(Lw)),tL.v(t,e)}function zi(t,e){return!nL&&(nL=fi(zfe)),nL.v.call(this,t,e)}var H_,rL,JN,XN,ZN,WG,qG,jG,$_,GG,Wfe,Nw,jfe,Vfe,QN,eL,tL,nL,ZG,eTe,yd=ne(()=>{Ne();H_="Promise",rL="rejected";WG=!1;qG=["pending","resolving","resolved",rL],jG="dispatchEvent";GG="unhandledRejection",Wfe=GG.toLowerCase(),Nw=[],jfe=0,Vfe=10;ZG=Yfe(zi),eTe=Sw(11)});var wi,Le,Cd,dn,B_,Aw,bc,Ed,Yo,Sd,fh,pu,dh,va,W_,j_,V_,mh,Y_,q_,QG,Un=ne(()=>{wi=void 0,Le="",Cd="channels",dn="core",B_="createPerfMgr",Aw="disabled",bc="extensionConfig",Ed="extensions",Yo="processTelemetry",Sd="priority",fh="eventsSent",pu="eventsDiscarded",dh="eventsSendRequest",va="perfEvent",W_="offlineEventsStored",j_="offlineBatchSent",V_="offlineBatchDrop",mh="getPerfMgr",Y_="domain",q_="path",QG="Not dynamic - "});function hu(t){return!ae(t)}function xd(t){var e=t;return e&&ke(e)&&(e=e[bs](Jfe,function(n,r){return r.toUpperCase()}),e=e[bs](Xfe,"_"),e=e[bs](Zfe,function(n,r){return"_"+r})),e}function _n(t,e){return t&&e?Vi(t,e)!==-1:!1}function Rs(t){return t&&t.toISOString()||""}function nn(t){return ad(t)?t[ho]:Le}function Ki(t,e,n,r,o){var i=n;return t&&(i=t[e],i!==n&&(!o||o(i))&&(!r||r(n))&&(i=n,t[e]=i)),i}function Fw(t,e,n){var r;return t?(r=t[e],!r&&ae(r)&&(r=Ve(n)?{}:n,t[e]=r)):r=Ve(n)?{}:n,r}function tz(t,e){var n=null,r=null;return Re(t)?n=t:r=t,function(){var o=arguments;if(n&&(r=n()),r)return r[e][cu](r,o)}}function oL(t,e,n){if(t&&e&&tn(t)&&tn(e)){var r=function(i){if(ke(i)){var s=e[i];Re(s)?(!n||n(i,!0,e,t))&&(t[i]=tz(e,i)):(!n||n(i,!1,e,t))&&(_s(t,i)&&delete t[i],gt(t,i,{g:function(){return e[i]},s:function(a){e[i]=a}}))}};for(var o in e)r(o)}return t}function Tc(t,e,n,r,o){t&&e&&n&&(o!==!1||Ve(t[e]))&&(t[e]=tz(n,r))}function yi(t,e,n,r){return t&&e&&tn(t)&&we(n)&&ee(n,function(o){ke(o)&&Tc(t,o,e,o,r)}),t}function iL(t){return(function(){function e(){var n=this;t&&Ie(t,function(r,o){n[r]=o})}return e})()}function qo(t){return t&&Kp&&(t=qp(Kp({},t))),t}function G_(t,e,n,r,o,i){var s=arguments,a=s[0]||{},c=s[me],l=!1,u=1;for(c>0&&ca(a)&&(l=a,a=s[u]||{},u++),tn(a)||(a={});u<c;u++){var f=s[u],m=we(f),d=tn(f);for(var p in f){var g=m&&p in f||d&&_s(f,p);if(g){var h=f[p],v=void 0;if(l&&h&&((v=we(h))||Tr(h))){var C=a[p];v?we(C)||(C=[]):Tr(C)||(C={}),h=G_(l,C,h)}h!==void 0&&(a[p]=h)}}}return a}function ks(t){try{return t.responseText}catch{}return null}function _d(t,e){return t?"XDomainRequest,Response:"+ks(t)||"":e}function Rc(t,e){return t?"XMLHttpRequest,Status:"+t[hd]+",Response:"+ks(t)||t.response||"":e}function kc(t,e){return e&&(Ir(e)?t=[e].concat(t):we(e)&&(t=e.concat(t))),t}function sL(t,e,n,r,o,i){r===void 0&&(r=!1),o===void 0&&(o=!1);function s(c,l,u){try{c[l]=u}catch{}}var a=new XMLHttpRequest;return r&&s(a,Qfe,r),n&&s(a,ez,n),a.open(t,e,!o),n&&s(a,ez,n),!o&&i&&s(a,ede,i),a}function z_(t){var e={};if(ke(t)){var n=tt(t)[Gi](/[\r\n]+/);ee(n,function(r){if(r){var o=r.indexOf(": ");if(o!==-1){var i=tt(r.substring(0,o))[Wo](),s=tt(r.substring(o+1));e[i]=s}else e[tt(r)]=1}})}return e}function ph(t,e,n){if(!t[n]&&e&&e.getResponseHeader){var r=e.getResponseHeader(n);r&&(t[n]=tt(r))}return t}function Nc(t,e){var n={};return t[GN]?n=z_(t[GN]()):e&&(n=ph(n,t,rde),n=ph(n,t,tde),n=ph(n,t,nde)),n}var Kfe,Jfe,Xfe,Zfe,aTe,Qfe,ez,ede,tde,nde,rde,wa=ne(()=>{Bo();Ne();xt();Un();Kfe="getPrototypeOf",Jfe=/-([a-z])/g,Xfe=/([^\w\d_$])/g,Zfe=/^(\d+[\w\d_$])/,aTe=Object[Kfe];Qfe="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",ez="withCredentials",ede="timeout";tde="kill-duration",nde="kill-duration-seconds",rde="time-delta-millis"});function iz(t,e){var n=!1;if(t){try{if(n=e in t,!n){var r=t[Ss];r&&(n=e in r)}}catch{}if(!n)try{var o=new t;n=!Ve(o[e])}catch{}}return n}function dL(t){oz=t}function Dd(t){if(t&&oz){var e=vt("__mockLocation");if(e)return e}return typeof location===Cc&&location?location:vt(ide)}function Ow(){return typeof console!==sa?console:vt(sde)}function ya(){return!!(typeof JSON===Cc&&JSON||vt(nz)!==null)}function Rr(){return ya()?JSON||vt(nz):null}function Uw(){return vt(ade)}function Mw(){return vt(cde)}function gu(){var t=Kn();return t&&t.product?t.product===lde:!1}function vu(){var t=Kn();if(t&&(t[Rw]!==cL||aL===null)){cL=t[Rw];var e=(cL||Le)[Wo]();aL=_n(e,uL)||_n(e,fL)}return aL}function $w(t){if(t===void 0&&(t=null),!t){var e=Kn()||{};t=e?(e.userAgent||Le)[Wo]():Le}var n=(t||Le)[Wo]();if(_n(n,uL)){var r=Fn()||{};return la(parseInt(n[Gi](uL)[1]),r[ode]||0)}else if(_n(n,fL)){var o=parseInt(n[Gi](fL)[1]);if(o)return o+4}return null}function Ji(t){return(lL===null||t===!1)&&(lL=Ew()&&!!Kn().sendBeacon),lL}function Lc(t){var e=!1;try{e=!!vt("fetch");var n=vt("Request");e&&t&&n&&(e=iz(n,"keepalive"))}catch{}return e}function Hw(){return hh===null&&(hh=typeof XDomainRequest!==sa,hh&&gh()&&(hh=hh&&!iz(vt(rz),"withCredentials"))),hh}function gh(){var t=!1;try{var e=vt(rz);t=!!e}catch{}return t}function sz(t,e){if(t)for(var n=0;n<t[me];n++){var r=t[n];if(r[ho]&&r[ho]===e)return r}return{}}function mL(t){var e=Fn();return e&&t?sz(e.querySelectorAll("meta"),t).content:null}function pL(t){var e,n=ud();if(n){var r=n.getEntriesByType("navigation")||[];e=sz((r[me]>0?r[0]:{}).serverTiming,t).description}return e}var ode,ide,sde,nz,ade,cde,lde,uL,fL,rz,aL,cL,oz,hh,lL,wu=ne(()=>{"use strict";Bo();Ne();xt();wa();Un();ode="documentMode",ide="location",sde="console",nz="JSON",ade="crypto",cde="msCrypto",lde="ReactNative",uL="msie",fL="trident/",rz="XMLHttpRequest",aL=null,cL=null,oz=!1,hh=null,lL=null});function ude(t){t<0&&(t>>>=0),Bw=cz+t&yu,Ww=lz-t&yu,uz=!0}function fde(){try{var t=xn()&2147483647;ude((Math.random()*az^t)+t)}catch{}}function hL(t){return t>0?ji(Ac()/yu*(t+1))>>>0:0}function Ac(t){var e=0,n=Uw()||Mw();return n&&n.getRandomValues&&(e=n.getRandomValues(new Uint32Array(1))[0]&yu),e===0&&vu()&&(uz||fde(),e=fz()&yu),e===0&&(e=ji(az*Math.random()|0)),t||(e>>>=0),e}function fz(t){Ww=36969*(Ww&65535)+(Ww>>16)&yu,Bw=18e3*(Bw&65535)+(Bw>>16)&yu;var e=(Ww<<16)+(Bw&65535)>>>0&yu|0;return t||(e>>>=0),e}function jw(t){t===void 0&&(t=22);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=Ac()>>>0,r=0,o=Le;o[me]<t;)r++,o+=e.charAt(n&63),n>>>=6,r===5&&(n=(Ac()<<2&4294967295|n&3)>>>0,r=0);return o}var az,yu,cz,lz,uz,Bw,Ww,K_=ne(()=>{Ne();xt();wu();Un();az=4294967296,yu=4294967295,cz=123456789,lz=987654321,uz=!1,Bw=cz,Ww=lz});function mz(t){return t.nodeType===1||t.nodeType===9||!+t.nodeType}function pde(t,e){var n=e[t.id];if(!n){n={};try{mz(e)&&gt(e,t.id,{e:!1,v:n})}catch{}}return n}function kr(t,e){return e===void 0&&(e=!1),xd(t+mde+++(e?"."+dz:Le)+dde)}function J_(t){var e={id:kr("_aiData-"+(t||Le)+"."+dz),accept:function(n){return mz(n)},get:function(n,r,o,i){var s=n[e.id];return s?s[xd(r)]:(i&&(s=pde(e,n),s[xd(r)]=o),o)},kill:function(n,r){if(n&&n[r])try{delete n[r]}catch{}}};return e}var dz,dde,mde,vh=ne(()=>{Ne();wa();Un();K_();dz="3.3.6",dde="."+jw(6),mde=0});function X_(t){return t&&tn(t)&&(t.isVal||t.fb||_s(t,"v")||_s(t,"mrg")||_s(t,"ref")||t.set)}function pz(t,e,n){var r,o=n.dfVal||y_;if(e&&n.fb){var i=n.fb;we(i)||(i=[i]);for(var s=0;s<i[me];s++){var a=i[s],c=e[a];if(o(c)?r=c:t&&(c=t.cfg[a],o(c)&&(r=c),t.set(t.cfg,Sn(a),c)),o(r))break}}return!o(r)&&o(n.v)&&(r=n.v),r}function gL(t,e,n){var r=n;if(n&&X_(n)&&(r=pz(t,e,n)),r){X_(r)&&(r=gL(t,e,r));var o;we(r)?(o=[],o[me]=r[me]):Tr(r)&&(o={}),o&&(Ie(r,function(i,s){s&&X_(s)&&(s=gL(t,e,s)),o[i]=s}),r=o)}return r}function Vw(t,e,n,r){var o,i,s,a=r,c,l,u,f;X_(a)?(o=a.isVal,i=a.set,u=a.rdOnly,f=a.blkVal,c=a.mrg,l=a.ref,!l&&Ve(l)&&(l=!!c),s=pz(t,e,a)):s=r,f&&t.blkVal(e,n);var m,d=!0,p=e[n];(p||!ae(p))&&(m=p,d=!1,o&&m!==s&&!o(m)&&(m=s,d=!0),i&&(m=i(m,s,e),d=m===s)),d?s?m=gL(t,e,s):m=s:(Tr(m)||we(s))&&c&&s&&(Tr(s)||we(s))&&Ie(s,function(g,h){Vw(t,m,g,h)}),t.set(e,n,m),l&&t.ref(e,n),u&&t.rdOnly(e,n)}var vL=ne(()=>{Ne();xt()});function wL(t){if(t){var e;if(we(t)?(e=[],e[me]=t[me]):Tr(t)&&(e={}),e)return Ie(t,function(n,r){e[n]=wL(r)}),e}return t}function Yw(t){if(t){var e=t[Ca]||t;if(e.cfg&&(e.cfg===t||e.cfg[Ca]===e))return e}return null}function qw(t){if(t&&(Tr(t)||we(t)))try{t[hz]=!0}catch{}return t}function yL(t){if(t)try{t[gz]=!0}catch{}return t}function Z_(t,e,n){var r=!1;return n&&!t[e.blkVal]&&(r=n[gz],!r&&!n[hz]&&(r=Tr(n)||we(n))),r}function Q_(t){Pr("InvalidAccess:"+t)}var Ca,hz,gz,eD=ne(()=>{Ne();xt();Ca=__("[[ai_dynCfg_1]]"),hz=__("[[ai_blkDynCfg_1]]"),gz=__("[[ai_frcDynCfg_1]]")});function gde(t,e,n){we(e)&&ee(hde,function(r){var o=e[r];e[r]=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=o[cu](this,i);return Gw(t,e,n,"Patching"),a}})}function tD(t,e){var n=E_(t,e);return n&&n.get}function vde(t,e,n,r){var o={n,h:[],trk:function(l){l&&l.fn&&(wt(o.h,l)===-1&&o.h[Ge](l),t.trk(l,o))},clr:function(l){var u=wt(o.h,l);u!==-1&&o.h[ma](u,1)}},i=!0,s=!1;function a(){i&&(s=s||Z_(a,t,r),r&&!r[Ca]&&s&&(r=Gw(t,r,n,"Converting")),i=!1);var l=t.act;return l&&o.trk(l),r}a[t.prop]={chng:function(){t.add(o)}};function c(l){if(r!==l){a[t.ro]&&!t.upd&&Q_("["+n+"] is read-only:"+Ee(e)),i&&(s=s||Z_(a,t,r),i=!1);var u=s&&a[t.rf];if(s)if(u){Ie(r,function(m){r[m]=l?l[m]:wi});try{Ie(l,function(m,d){zw(t,r,m,d)}),l=r}catch(m){wh((t.hdlr||{})[kt],n,"Assigning",m),s=!1}}else r&&r[Ca]&&Ie(r,function(m){var d=tD(r,m);if(d){var p=d[t.prop];p&&p.chng()}});if(l!==r){var f=l&&Z_(a,t,l);!u&&f&&(l=Gw(t,l,n,"Converting")),r=l,s=f}t.add(o)}}gt(e,o.n,{g:a,s:c})}function zw(t,e,n,r){if(e){var o=tD(e,n),i=o&&!!o[t.prop];i?e[n]=r:vde(t,e,n,r)}return e}function nD(t,e,n,r){if(e){var o=tD(e,n),i=o&&!!o[t.prop],s=r&&r[0],a=r&&r[1],c=r&&r[2];if(!i){if(c)try{qw(e)}catch(l){wh((t.hdlr||{})[kt],n,"Blocking",l)}try{zw(t,e,n,e[n]),o=tD(e,n)}catch(l){wh((t.hdlr||{})[kt],n,"State",l)}}s&&(o[t.rf]=s),a&&(o[t.ro]=a),c&&(o[t.blkVal]=!0)}return e}function Gw(t,e,n,r){try{Ie(e,function(o,i){zw(t,e,o,i)}),e[Ca]||($o(e,Ca,{get:function(){return t.hdlr}}),gde(t,e,n))}catch(o){wh((t.hdlr||{})[kt],n,r,o)}return e}var hde,wh,vz=ne(()=>{Ne();Un();xt();eD();hde=["push","pop","shift","unshift","splice"],wh=function(t,e,n,r){t&&t[Dc](3,108,"".concat(n," [").concat(e,"] failed - ")+Ee(r))}});function wz(t){var e=Qp(Kw+"get"+t.uid+Jw),n=Qp(Kw+"ro"+t.uid+Jw),r=Qp(Kw+"rf"+t.uid+Jw),o=Qp(Kw+"blkVal"+t.uid+Jw),i=Qp(Kw+"dtl"+t.uid+Jw),s=null,a=null,c;function l(d,p){var g=c.act;try{c.act=d,d&&d[i]&&(ee(d[i],function(v){v.clr(d)}),d[i]=[]),p({cfg:t.cfg,set:t.set.bind(t),setDf:t.setDf.bind(t),ref:t.ref.bind(t),rdOnly:t.rdOnly.bind(t)})}catch(v){var h=t[kt];throw h&&h[Dc](1,107,Ee(v)),v}finally{c.act=g||null}}function u(){if(s){var d=s;s=null,a&&a[Ic](),a=null;var p=[];if(ee(d,function(g){if(g&&(g[i]&&(ee(g[i],function(h){h.clr(g)}),g[i]=null),g.fn))try{l(g,g.fn)}catch(h){p[Ge](h)}}),s)try{u()}catch(g){p[Ge](g)}p[me]>0&&HG("Watcher error(s): ",p)}}function f(d){if(d&&d.h[me]>0){s||(s=[]),a||(a=di(function(){a=null,u()},0));for(var p=0;p<d.h[me];p++){var g=d.h[p];g&&wt(s,g)===-1&&s[Ge](g)}}}function m(d,p){if(d){var g=d[i]=d[i]||[];wt(g,p)===-1&&g[Ge](p)}}return c={prop:e,ro:n,rf:r,blkVal:o,hdlr:t,add:f,notify:u,use:l,trk:m},c}var Kw,Jw,yz=ne(()=>{Ne();BG();xt();Kw="[[ai_",Jw="]]"});function wde(t,e){var n={fn:e,rm:function(){n.fn=null,t=null,e=null}};return gt(n,"toJSON",{v:function(){return"WatcherHandler"+(n.fn?"":"[X]")}}),t.use(n,e),n}function yde(t,e,n){var r=Yw(e);if(r)return r;var o=kr("dyncfg",!0),i=e&&n!==!1?e:wL(e),s;function a(){s.notify()}function c(h,v,C){try{h=zw(s,h,v,C)}catch(w){wh(t,v,"Setting value",w)}return h[v]}function l(h){return wde(s,h)}function u(h,v){s.use(null,function(C){var w=s.upd;try{Ve(v)||(s.upd=v),h(C)}finally{s.upd=w}})}function f(h,v){var C;return nD(s,h,v,(C={},C[0]=!0,C))[v]}function m(h,v){var C;return nD(s,h,v,(C={},C[1]=!0,C))[v]}function d(h,v){var C;return nD(s,h,v,(C={},C[2]=!0,C))[v]}function p(h,v){return v&&Ie(v,function(C,w){Vw(g,h,C,w)}),h}var g={uid:null,cfg:i,logger:t,notify:a,set:c,setDf:p,watch:l,ref:f,rdOnly:m,blkVal:d,_block:u};return gt(g,"uid",{c:!1,e:!1,w:!1,v:o}),s=wz(g),Gw(s,i,"config","Creating"),g}function Cde(t,e){t?(t[oh](e),t[Dc](2,108,e)):Q_(e)}function jt(t,e,n,r){var o=yde(n,t||{},r);return e&&o.setDf(o.cfg,e),o}function hr(t,e,n){var r=t[Ca]||t;return r.cfg&&(r.cfg===t||r.cfg[Ca]===r)?r[da](e):(Cde(n,QG+Ee(t)),jt(t,null,n)[da](e))}var Cu=ne(()=>{Ne();vh();Un();xt();vL();vz();yz();eD()});function Fc(t,e){if(t&&t[qi])return t[qi](e)}function rD(t,e,n){var r;return n||(r=zi(function(o){n=o})),t&&th(t)>0?vi(Fc(t[0],e),function(){rD(eh(t,1),e,n)}):n(),r}var CL=ne(()=>{yd();Ne();xt()});var Cz,EL,SL=ne(()=>{Cz=500,EL="Microsoft_ApplicationInsights_BypassAjaxInstrumentation"});function Ede(t,e,n){return!t&&ae(t)?e:ca(t)?t:Sn(t)[Wo]()==="true"}function xL(t){return{mrg:!0,v:t}}function yh(t,e,n){return{fb:n,isVal:t,v:e}}function Xi(t,e){return{fb:e,set:Ede,v:!!t}}var _L=ne(()=>{Ne();xt()});function Sde(t,e){return function(){var n=arguments,r=IL(e);if(r){var o=r.listener;o&&o[t]&&o[t][cu](o,n)}}}function xde(){var t=vt("Microsoft");return t&&(iD=t.ApplicationInsights),iD}function IL(t){var e=iD;return!e&&t.disableDbgExt!==!0&&(e=iD||xde()),e?e.ChromeDbgExt:null}function Ez(t){if(!oD){oD={};for(var e=0;e<DL[me];e++)oD[DL[e]]=Sde(DL[e],t)}return oD}var DL,iD,oD,PL=ne(()=>{Ne();xt();Un();DL=[fh,pu,dh,va],iD=null});function Sz(t){return t?'"'+t[bs](/\"/g,Le)+'"':Le}function bL(t,e){var n=Ow();if(n){var r="log";n[t]&&(r=t),Re(n[r])&&n[r](e)}}function Oc(t,e){return(t||{})[kt]||new Eu(e)}function TL(t){return t||new Eu}function se(t,e,n,r,o,i){i===void 0&&(i=!1),TL(t)[Dc](e,n,r,o,i)}function go(t,e){TL(t)[oh](e)}function RL(t,e,n){TL(t).logInternalMessage(e,n)}var Ch,xz,_de,Dde,Ide,Pde,bde,Id,Eu,Ns=ne(()=>{"use strict";pr();Ne();Cu();xt();PL();wu();Un();xz="warnToConsole",_de="AI (Internal): ",Dde="AI: ",Ide="AITR_",Pde={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},bde=(Ch={},Ch[0]=null,Ch[1]="errorToConsole",Ch[2]=xz,Ch[3]="debugToConsole",Ch);Id=(function(){function t(e,n,r,o){r===void 0&&(r=!1);var i=this;i[ch]=e,i[ga]=(r?Dde:_de)+e;var s=Le;ya()&&(s=Rr().stringify(o));var a=(n?" message:"+Sz(n):Le)+(o?" props:"+Sz(s):Le);i[ga]+=a}return t.dataType="MessageData",t})();Eu=(function(){function t(e){this.identifier="DiagnosticLogger",this.queue=[];var n=0,r={},o,i,s,a,c;Je(t,this,function(l){c=f(e||{}),l.consoleLoggingLevel=function(){return o},l[Dc]=function(p,g,h,v,C){C===void 0&&(C=!1);var w=new Id(g,h,C,v);if(a)throw Ee(w);var y=bde[p]||xz;if(Ve(w[ga]))d("throw"+(p===1?"Critical":"Warning"),w);else{if(C){var S=+w[ch];!r[S]&&o>=p&&(l[y](w[ga]),r[S]=!0)}else o>=p&&l[y](w[ga]);u(p,w)}},l.debugToConsole=function(p){bL("debug",p),d("warning",p)},l[oh]=function(p){bL("warn",p),d("warning",p)},l.errorToConsole=function(p){bL("error",p),d("error",p)},l.resetInternalMessageCount=function(){n=0,r={}},l.logInternalMessage=u,l[qi]=function(p){c&&c.rm(),c=null};function u(p,g){if(!m()){var h=!0,v=Ide+g[ch];if(r[v]?h=!1:r[v]=!0,h&&(p<=i&&(l.queue[Ge](g),n++,d(p===1?"error":"warn",g)),n===s)){var C="Internal events throttle limit per PageView reached for this app.",w=new Id(23,C,!1);l.queue[Ge](w),p===1?l.errorToConsole(C):l[oh](C)}}}function f(p){return hr(jt(p,Pde,l).cfg,function(g){var h=g.cfg;o=h[U_],i=h.loggingLevelTelemetry,s=h.maxMessageLimit,a=h.enableDebug})}function m(){return n>=s}function d(p,g){var h=IL(e||{});h&&h[Vo]&&h[Vo](p,g)}})}return t.__ieDyn=1,t})()});function OL(){!Ea&&(Ea=yG(function(){return Fn()}))}function Rde(t,e){var n=Uc[Su]||cD[Su];return n||(n=Uc[Su]=Uc(t,e),cD[Su]=n),n}function aD(t){return t?t.isEnabled():!0}function Lz(t,e){return e&&t&&we(t.ignoreCookies)?wt(t.ignoreCookies,e)!==-1:!1}function kde(t,e){return e&&t&&we(t.blockedCookies)&&wt(t.blockedCookies,e)!==-1?!0:Lz(t,e)}function Tz(t,e){var n=e[uu];if(ae(n)){var r=void 0;Ve(t[Iz])||(r=!t[Iz]),Ve(t[AL])||(r=!t[AL]),n=r}return n}function UL(t,e){var n;if(t)n=t.getCookieMgr();else if(e){var r=e.cookieCfg;r&&r[Su]?n=r[Su]:n=Uc(e)}return n||(n=Rde(e,(t||{})[kt])),n}function Uc(t,e){var n,r,o,i,s,a,c,l;t=jt(t||cD,null,e).cfg,i=hr(t,function(f){f.setDf(f.cfg,Tde),n=f.ref(f.cfg,"cookieCfg"),r=n[q_]||"/",o=n[Y_],s=Tz(t,n)!==!1,a=n.getCookie||Nde,c=n.setCookie||Nz,l=n.delCookie||Nz},e);var u={isEnabled:function(){var f=Tz(t,n)!==!1&&s&&Eh(e),m=cD[Su];return f&&m&&u!==m&&(f=aD(m)),f},setEnabled:function(f){s=f!==!1,n[uu]=f},set:function(f,m,d,p,g){var h=!1;if(aD(u)&&!kde(n,f)){var v={},C=tt(m||Le),w=Vi(C,";");if(w!==-1&&(C=tt(cd(m,w)),v=Az(zn(m,w+1))),Ki(v,Y_,p||o,xs,Ve),!ae(d)){var y=vu();if(Ve(v[NL])){var S=xn(),D=S+d*1e3;if(D>0){var _=new Date;_.setTime(D),Ki(v,NL,Rz(_,y?_z:Dz)||Rz(_,y?_z:Dz)||Le,xs)}}y||Ki(v,"max-age",Le+d,null,Ve)}var A=Dd();A&&A.protocol==="https:"&&(Ki(v,"secure",null,null,Ve),LL===null&&(LL=!lD((Kn()||{})[Rw])),LL&&Ki(v,"SameSite","None",null,Ve)),Ki(v,q_,g||r,null,Ve),c(f,kz(C,v)),h=!0}return h},get:function(f){var m=Le;return aD(u)&&!Lz(n,f)&&(m=a(f)),m},del:function(f,m){var d=!1;return aD(u)&&(d=u.purge(f,m)),d},purge:function(f,m){var d,p=!1;if(Eh(e)){var g=(d={},d[q_]=m||"/",d[NL]="Thu, 01 Jan 1970 00:00:01 GMT",d);vu()||(g["max-age"]="0"),l(f,kz(Le,g)),p=!0}return p},unload:function(f){i&&i.rm(),i=null}};return u[Su]=u,u}function Eh(t){if(sD===null){sD=!1,!Ea&&OL();try{var e=Ea.v||{};sD=e[FL]!==void 0}catch(n){se(t,2,68,"Cannot access document.cookie - "+nn(n),{exception:Ee(n)})}}return sD}function Az(t){var e={};if(t&&t[me]){var n=tt(t)[Gi](";");ee(n,function(r){if(r=tt(r||Le),r){var o=Vi(r,"=");o===-1?e[r]=null:e[tt(cd(r,o))]=tt(zn(r,o+1))}})}return e}function Rz(t,e){return Re(t[e])?t[e]():null}function kz(t,e){var n=t||Le;return Ie(e,function(r,o){n+="; "+r+(ae(o)?Le:"="+o)}),n}function Nde(t){var e=Le;if(!Ea&&OL(),Ea.v){var n=Ea.v[FL]||Le;Pz!==n&&(bz=Az(n),Pz=n),e=tt(bz[t]||Le)}return e}function Nz(t,e){!Ea&&OL(),Ea.v&&(Ea.v[FL]=t+"="+e)}function lD(t){return ke(t)?!!(_n(t,"CPU iPhone OS 12")||_n(t,"iPad; CPU OS 12")||_n(t,"Macintosh; Intel Mac OS X 10_14")&&_n(t,"Version/")&&_n(t,"Safari")||_n(t,"Macintosh; Intel Mac OS X 10_14")&&fd(t,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||_n(t,"Chrome/5")||_n(t,"Chrome/6")||_n(t,"UnrealEngine")&&!_n(t,"Chrome")||_n(t,"UCBrowser/12")||_n(t,"UCBrowser/11")):!1}var kL,Pd,_z,Dz,FL,NL,Iz,AL,Su,sD,LL,Pz,Ea,bz,cD,Tde,ML=ne(()=>{Ne();_L();Cu();xt();Ns();wu();wa();Un();_z="toGMTString",Dz="toUTCString",FL="cookie",NL="expires",Iz="isCookieUseDisabled",AL="disableCookiesUsage",Su="_ckMgr",sD=null,LL=null,Pz=null,bz={},cD={},Tde=(kL={cookieCfg:xL((Pd={},Pd[Y_]={fb:"cookieDomain",dfVal:hu},Pd.path={fb:"cookiePath",dfVal:hu},Pd.enabled=wi,Pd.ignoreCookies=wi,Pd.blockedCookies=wi,Pd)),cookieDomain:wi,cookiePath:wi},kL[AL]=wi,kL)});function Ade(t){t.h=null;var e=t.cb;t.cb=[],ee(e,function(n){Gn(n.fn,[n.arg])})}function xu(t,e,n,r){ee(t,function(o){o&&o[e]&&(n?(n.cb[Ge]({fn:r,arg:o}),n.h=n.h||di(Ade,0,n)):Gn(r,[o]))})}var Lde,Xw,$L=ne(()=>{pr();yd();Ne();Cu();xt();Un();Lde={perfEvtsSendAll:!1};Xw=(function(){function t(e){this.listeners=[];var n,r,o=[],i={h:null,cb:[]},s=jt(e,Lde);r=s[da](function(a){n=!!a.cfg.perfEvtsSendAll}),Je(t,this,function(a){gt(a,"listeners",{g:function(){return o}}),a[sh]=function(c){o[Ge](c)},a[ih]=function(c){for(var l=wt(o,c);l>-1;)o[ma](l,1),l=wt(o,c)},a[fh]=function(c){xu(o,fh,i,function(l){l[fh](c)})},a[pu]=function(c,l){xu(o,pu,i,function(u){u[pu](c,l)})},a[dh]=function(c,l){xu(o,dh,l?i:null,function(u){u[dh](c,l)})},a[va]=function(c){c&&(n||!c[kw]())&&xu(o,va,null,function(l){c.isAsync?di(function(){return l[va](c)},0):l[va](c)})},a[W_]=function(c){c&&c[me]&&xu(o,W_,i,function(l){l[W_](c)})},a[j_]=function(c){c&&c[mu]&&xu(o,j_,i,function(l){l[j_](c)})},a[V_]=function(c,l){if(c>0){var u=l||0;xu(o,V_,i,function(f){f[V_](c,u)})}},a[qi]=function(c){var l=function(){r&&r.rm(),r=null,o=[],i.h&&i.h[Ic](),i.h=null,i.cb=[]},u;if(xu(o,"unload",null,function(f){var m=f[qi](c);m&&(u||(u=[]),u[Ge](m))}),u)return zi(function(f){return vi(ZG(u),function(){l(),f()})});l()}})}return t.__ieDyn=1,t})()});function mn(t,e,n,r,o){if(t){var i=t;if(i[mh]&&(i=i[mh]()),i){var s=void 0,a=i[gd](HL);try{if(s=i.create(e(),r,o),s){if(a&&s[Ts]&&(s[Ts](bd[BL],a),a[gd]&&a[Ts])){var c=a[gd](bd[Zw]);c||(c=[],a[Ts](bd[Zw],c)),c[Ge](s)}return i[Ts](HL,s),n(s)}}catch(l){s&&s[Ts]&&s[Ts]("exception",l)}finally{s&&i.fire(s),i[Ts](HL,a)}}}return n()}function WL(){return Fde}var Sh,BL,Zw,Fde,bd,Qw,HL,uD=ne(()=>{pr();Ne();xt();Un();Sh="ctx",BL="ParentContextKey",Zw="ChildrenContextKey",Fde=null,bd=(function(){function t(e,n,r){var o=this;if(o.start=xn(),o[ho]=e,o.isAsync=r,o[kw]=function(){return!1},Re(n)){var i;gt(o,"payload",{g:function(){return!i&&Re(n)&&(i=n(),n=null),i}})}o[gd]=function(s){return s?s===t[BL]||s===t[Zw]?o[s]:(o[Sh]||{})[s]:null},o[Ts]=function(s,a){if(s)if(s===t[BL])o[s]||(o[kw]=function(){return!0}),o[s]=a;else if(s===t[Zw])o[s]=a;else{var c=o[Sh]=o[Sh]||{};c[s]=a}},o.complete=function(){var s=0,a=o[gd](t[Zw]);if(we(a))for(var c=0;c<a[me];c++){var l=a[c];l&&(s+=l.time)}o.time=xn()-o.start,o.exTime=o.time-s,o.complete=function(){}}}return t.ParentContextKey="parent",t.ChildrenContextKey="childEvts",t})(),Qw=(function(){function t(e){this.ctx={},Je(t,this,function(n){n.create=function(r,o,i){return new bd(r,o,i)},n.fire=function(r){r&&(r.complete(),e&&Re(e[va])&&e[va](r))},n[Ts]=function(r,o){if(r){var i=n[Sh]=n[Sh]||{};i[r]=o}},n[gd]=function(r){return(n[Sh]||{})[r]}})}return t.__ieDyn=1,t})(),HL="CoreUtils.doPerf"});function ey(){var t=Td();return zn(t,0,8)+"-"+zn(t,8,12)+"-"+zn(t,12,16)+"-"+zn(t,16,20)+"-"+zn(t,20)}function Td(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],e=Le,n,r=0;r<4;r++)n=Ac(),e+=t[n&15]+t[n>>4&15]+t[n>>8&15]+t[n>>12&15]+t[n>>16&15]+t[n>>20&15]+t[n>>24&15]+t[n>>28&15];var o=t[8+(Ac()&3)|0];return ua(e,0,8)+ua(e,9,4)+"4"+ua(e,13,3)+o+ua(e,16,3)+ua(e,19,12)}var jL=ne(()=>{"use strict";Ne();Un();K_()});function Mc(t,e,n){return t&&t[me]===e&&t!==n?!!t.match(/^[\da-f]*$/i):!1}function Oz(t,e,n){return Mc(t,e)?t:n}function Uz(t){(isNaN(t)||t<0||t>255)&&(t=1);for(var e=t.toString(16);e[me]<2;)e="0"+e;return e}function qL(t,e,n,r){return{version:Mc(r,2,YL)?r:VL,traceId:Rd(t)?t:Td(),spanId:kd(e)?e:cd(Td(),16),traceFlags:n>=0&&n<=255?n:1}}function ty(t,e){if(!t||(we(t)&&(t=t[0]||""),!t||!ke(t)||t[me]>8192))return null;if(t.indexOf(",")!==-1){var n=t[Gi](",");t=n[e>0&&n[me]>e?e:0]}var r=Ode.exec(tt(t));return!r||r[1]===YL||r[2]===fD||r[3]===dD?null:{version:(r[1]||Le)[Wo](),traceId:(r[2]||Le)[Wo](),spanId:(r[3]||Le)[Wo](),traceFlags:parseInt(r[4],16)}}function Rd(t){return Mc(t,32,fD)}function kd(t){return Mc(t,16,dD)}function mD(t){return!(!t||!Mc(t[ah],2,YL)||!Mc(t.traceId,32,fD)||!Mc(t.spanId,16,dD)||!Mc(Uz(t[wd]),2))}function GL(t){return mD(t)?(t[wd]&Fz)===Fz:!1}function zL(t){if(t){var e=Uz(t[wd]);Mc(e,2)||(e="01");var n=t[ah]||VL;return n!=="00"&&n!=="ff"&&(n=VL),"".concat(n.toLowerCase(),"-").concat(Oz(t.traceId,32,fD).toLowerCase(),"-").concat(Oz(t.spanId,16,dD).toLowerCase(),"-").concat(e.toLowerCase())}return""}function KL(t){var e="traceparent",n=ty(mL(e),t);return n||(n=ty(pL(e),t)),n}var Ode,VL,YL,fD,dD,Fz,JL=ne(()=>{Ne();xt();jL();wu();Un();Ode=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,VL="00",YL="ff",fD="00000000000000000000000000000000",dD="0000000000000000",Fz=1});function $c(t){return Ude.get(t,"state",{},!0)}function XL(t,e){for(var n=[],r=null,o=t[hi](),i;o;){var s=o[lu]();if(s){r&&r[du]&&s[Yo]&&r[du](s),i=$c(s);var a=!!i[jo];s[jo]&&(a=s[jo]()),a||n[Ge](s),r=s,o=o[hi]()}}ee(n,function(c){var l=t[dn]();c[Pc](t.getCfg(),l,e,t[hi]()),i=$c(c),!c[dn]&&!i[dn]&&(i[dn]=l),i[jo]=!0,delete i[pi]})}function pD(t){return t.sort(function(e,n){var r=0;if(n){var o=n[Yo];e[Yo]?r=o?e[Sd]-n[Sd]:1:o&&(r=-1)}else r=e?1:-1;return r})}function Mz(t){var e={};return{getName:function(){return e[ho]},setName:function(n){t&&t.setName(n),e[ho]=n},getTraceId:function(){return e.traceId},setTraceId:function(n){t&&t.setTraceId(n),Rd(n)&&(e.traceId=n)},getSpanId:function(){return e.spanId},setSpanId:function(n){t&&t.setSpanId(n),kd(n)&&(e.spanId=n)},getTraceFlags:function(){return e[wd]},setTraceFlags:function(n){t&&t.setTraceFlags(n),e[wd]=n}}}var Ude,ZL=ne(()=>{"use strict";Ne();xt();vh();Un();JL();Ude=J_("plugin")});function $de(t,e,n){for(;t;){if(t[lu]()===n)return t;t=t[hi]()}return _u([n],e.config||{},e)}function QL(t,e,n,r){var o=null,i=[];e||(e=jt({},null,n[kt])),r!==null&&(o=r?$de(t,n,r):t);var s={_next:c,ctx:{core:function(){return n},diagLog:function(){return Oc(n,e.cfg)},getCfg:function(){return e.cfg},getExtCfg:u,getConfig:f,hasNext:function(){return!!o},getNext:function(){return o},setNext:function(d){o=d},iterate:m,onComplete:a}};function a(d,p){for(var g=[],h=2;h<arguments.length;h++)g[h-2]=arguments[h];d&&i[Ge]({func:d,self:Ve(p)?s.ctx:p,args:g})}function c(){var d=o;if(o=d?d[hi]():null,!d){var p=i;p&&p[me]>0&&(ee(p,function(g){try{g.func.call(g.self,g.args)}catch(h){se(n[kt],2,73,"Unexpected Exception during onComplete - "+Ee(h))}}),i=[])}return d}function l(d,p){var g=null,h=e.cfg;if(h&&d){var v=h[bc];!v&&p&&(v={}),h[bc]=v,v=e.ref(h,bc),v&&(g=v[d],!g&&p&&(g={}),v[d]=g,g=e.ref(v,d))}return g}function u(d,p){var g=l(d,!0);return p&&Ie(p,function(h,v){if(ae(g[h])){var C=e.cfg[h];(C||!ae(C))&&(g[h]=C)}Vw(e,g,h,v)}),e.setDf(g,p)}function f(d,p,g){g===void 0&&(g=!1);var h,v=l(d,!1),C=e.cfg;return v&&(v[p]||!ae(v[p]))?h=v[p]:(C[p]||!ae(C[p]))&&(h=C[p]),h||!ae(h)?h:g}function m(d){for(var p;p=s._next();){var g=p[lu]();g&&d(g)}}return s}function vo(t,e,n,r){var o=jt(e),i=QL(t,o,n,r),s=i.ctx;function a(l){var u=i._next();return u&&u[Yo](l,s),!u}function c(l,u){return l===void 0&&(l=null),we(l)&&(l=_u(l,o.cfg,n,u)),vo(l||s[hi](),o.cfg,n,u)}return s[Jn]=a,s[ha]=c,s}function xh(t,e,n){var r=jt(e.config),o=QL(t,r,e,n),i=o.ctx;function s(c){var l=o._next();return l&&l[qi](i,c),!l}function a(c,l){return c===void 0&&(c=null),we(c)&&(c=_u(c,r.cfg,e,l)),xh(c||i[hi](),e,l)}return i[Jn]=s,i[ha]=a,i}function ny(t,e,n){var r=jt(e.config),o=QL(t,r,e,n),i=o.ctx;function s(c){return i.iterate(function(l){Re(l[pd])&&l[pd](i,c)})}function a(c,l){return c===void 0&&(c=null),we(c)&&(c=_u(c,r.cfg,e,l)),ny(c||i[hi](),e,l)}return i[Jn]=s,i[ha]=a,i}function _u(t,e,n,r){var o=null,i=!r;if(we(t)&&t[me]>0){var s=null;ee(t,function(a){if(!i&&r===a&&(i=!0),i&&a&&Re(a[Yo])){var c=Hde(a,e,n);o||(o=c),s&&s._setNext(c),s=c}})}return r&&!o?_u([r],e,n):o}function Hde(t,e,n){var r=null,o=Re(t[Yo]),i=Re(t[du]),s;t?s=t[pa]+"-"+t[Sd]+"-"+Bz++:s="Unknown-0-"+Bz++;var a={getPlugin:function(){return t},getNext:function(){return r},processTelemetry:u,unload:f,update:m,_id:s,_setNext:function(d){r=d}};function c(){var d;return t&&Re(t[Hz])&&(d=t[Hz]()),d||(d=vo(a,e,n)),d}function l(d,p,g,h,v){var C=!1,w=t?t[pa]:Mde,y=d[$z];return y||(y=d[$z]={}),d.setNext(r),t&&mn(d[dn](),function(){return w+":"+g},function(){y[s]=!0;try{var S=r?r._id:Le;S&&(y[S]=!1),C=p(d)}catch(_){var D=r?y[r._id]:!0;D&&(C=!0),(!r||!D)&&se(d[Vo](),1,73,"Plugin ["+w+"] failed during "+g+" - "+Ee(_)+", run flags: "+Ee(y))}},h,v),C}function u(d,p){p=p||c();function g(h){if(!t||!o)return!1;var v=$c(t);return v[pi]||v[Aw]?!1:(i&&t[du](r),t[Yo](d,h),!0)}l(p,g,"processTelemetry",function(){return{item:d}},!d.sync)||p[Jn](d)}function f(d,p){function g(){var h=!1;if(t){var v=$c(t),C=t[dn]||v[dn];t&&(!C||C===d.core())&&!v[pi]&&(v[dn]=null,v[pi]=!0,v[jo]=!1,t[pi]&&t[pi](d,p)===!0&&(h=!0))}return h}l(d,g,"unload",function(){},p.isAsync)||d[Jn](p)}function m(d,p){function g(){var h=!1;if(t){var v=$c(t),C=t[dn]||v[dn];t&&(!C||C===d.core())&&!v[pi]&&t[pd]&&t[pd](d,p)===!0&&(h=!0)}return h}l(d,g,"update",function(){},!1)||d[Jn](p)}return mo(a)}var Mde,$z,Hz,Bz,eA,hD=ne(()=>{"use strict";Ne();vL();Cu();xt();Ns();wa();Un();uD();ZL();Mde="TelemetryPluginChain",$z="_hasRun",Hz="_getTelCtx",Bz=0;eA=(function(){function t(e,n,r,o){var i=this,s=vo(e,n,r,o);yi(i,s,br(s))}return t})()});function Nd(){var t=[];function e(r){r&&t[Ge](r)}function n(r,o){ee(t,function(i){try{i(r,o)}catch(s){se(r[Vo](),2,73,"Unexpected error calling unload handler - "+Ee(s))}}),t=[]}return{add:e,run:n}}var gD=ne(()=>{Ne();xt();Ns()});function tA(t,e){ry=t,oy=e}function iy(){var t=[];function e(r){var o=t;t=[],ee(o,function(i){try{(i.rm||i.remove).call(i)}catch(s){se(r,2,73,"Unloading:"+Ee(s))}}),ry&&o[me]>ry&&(oy?oy("doUnload",o):se(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected."))}function n(r){r&&(Is(t,r),ry&&t[me]>ry&&(oy?oy("Add",t):se(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected.")))}return{run:e,add:n}}var ry,oy,vD=ne(()=>{Ne();xt();Ns()});var nA,Du,Bde,Hc,rA=ne(()=>{"use strict";pr();Ne();Cu();xt();Ns();wa();Un();hD();gD();vD();Du="getPlugin",Bde=(nA={},nA[bc]={isVal:hu,v:{}},nA),Hc=(function(){function t(){var e=this,n,r,o,i,s;l(),Je(t,e,function(u){u[Pc]=function(f,m,d,p){c(f,m,p),n=!0},u[pi]=function(f,m){var d=u[dn];if(!d||f&&d!==f[dn]())return;var p,g=!1,h=f||xh(null,d,o&&o[Du]?o[Du]():o),v=m||{reason:0,isAsync:!1};function C(){g||(g=!0,i.run(h,m),s.run(h[Vo]()),p===!0&&h[Jn](v),l())}return!u[fu]||u[fu](h,v,C)!==!0?C():p=!0,p},u[pd]=function(f,m){var d=u[dn];if(!d||f&&d!==f[dn]())return;var p,g=!1,h=f||ny(null,d,o&&o[Du]?o[Du]():o),v=m||{reason:0};function C(){g||(g=!0,c(h.getCfg(),h.core(),h[hi]()))}return!u._doUpdate||u._doUpdate(h,v,C)!==!0?C():p=!0,p},Tc(u,"_addUnloadCb",function(){return i},"add"),Tc(u,"_addHook",function(){return s},"add"),gt(u,"_unloadHooks",{g:function(){return s}})}),e[Vo]=function(u){return a(u)[Vo]()},e[jo]=function(){return n},e.setInitialized=function(u){n=u},e[du]=function(u){o=u},e[Jn]=function(u,f){f?f[Jn](u):o&&Re(o[Yo])&&o[Yo](u,null)},e._getTelCtx=a;function a(u){u===void 0&&(u=null);var f=u;if(!f){var m=r||vo(null,{},e[dn]);o&&o[Du]?f=m[ha](null,o[Du]):f=m[ha](null,o)}return f}function c(u,f,m){jt(u,Bde,Oc(f)),!m&&f&&(m=f[O_]()[hi]());var d=o;o&&o[Du]&&(d=o[Du]()),e[dn]=f,r=vo(m,u,f,d)}function l(){n=!1,e[dn]=null,r=null,o=null,s=iy(),i=Nd()}}return t.__ieDyn=1,t})()});function Wde(t,e,n){var r={id:e,fn:n};Is(t,r);var o={remove:function(){ee(t,function(i,s){if(i.id===r.id)return t[ma](s,1),-1})}};return o}function jde(t,e,n){for(var r=!1,o=t[me],i=0;i<o;++i){var s=t[i];if(s)try{if(s.fn[cu](null,[e])===!1){r=!0;break}}catch(a){se(n,2,64,"Telemetry initializer failed: "+nn(a),{exception:Ee(a)},!0)}}return!r}var Wz,jz=ne(()=>{Bo();pr();Ne();xt();rA();Ns();wa();Un();Wz=(function(t){Ho(e,t);function e(){var n=t.call(this)||this;n.identifier="TelemetryInitializerPlugin",n.priority=199;var r,o;i(),Je(e,n,function(s,a){s.addTelemetryInitializer=function(c){return Wde(o,r++,c)},s[Yo]=function(c,l){jde(o,c,l?l[Vo]():s[Vo]())&&s[Jn](c,l)},s[fu]=function(){i()}});function i(){r=0,o=[]}return n}return e.__ieDyn=1,e})(Hc)});function zde(t,e){return new Qw(e)}function Kde(t,e,n){var r=[],o=[],i={};return ee(n,function(s){(ae(s)||ae(s[Pc]))&&An(Gz);var a=s[Sd],c=s[pa];s&&a&&(ae(i[a])?i[a]=c:go(t,"Two extensions have same priority #"+a+" - "+i[a]+", "+c)),!a||a<e?r[Ge](s):o[Ge](s)}),{core:r,channels:o}}function Yz(t,e){var n=!1;return ee(e,function(r){if(r===t)return n=!0,-1}),n}function iA(t,e,n,r){n&&Ie(n,function(o,i){r&&Tr(i)&&Tr(e[o])&&iA(t,e[o],i,r),r&&Tr(i)&&Tr(e[o])?iA(t,e[o],i,r):t.set(e,o,i)})}function qz(t,e){var n=null,r=-1;return ee(t,function(o,i){if(o.w===e)return n=o,r=i,-1}),{i:r,l:n}}function Jde(t,e){var n=qz(t,e).l;return n||(n={w:e,rm:function(){var r=qz(t,e);r.i!==-1&&t[ma](r.i,1)}},t[Ge](n)),n}function Xde(t,e,n){ee(e,function(r){var o=hr(t,r.w,n);delete r.w,r.rm=function(){o.rm()}})}function Zde(t,e,n,r){return e.add(t[da](function(o){var i=o.cfg.disableDbgExt;i===!0&&r&&(n[ih](r),r=null),n&&!r&&i!==!0&&(r=Ez(o.cfg),n[sh](r))})),r}function Qde(t){return gt({rm:function(){t.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(t)+">"}})}var Iu,Gz,Vde,Vz,Yde,qde,Gde,oA,Bc,zz=ne(()=>{"use strict";Bo();pr();yd();Ne();Cu();YN();xt();CL();SL();ML();vh();PL();Ns();wa();Un();$L();uD();hD();ZL();jz();gD();vD();Gz="Plugins must provide initialize method",Vde="_notificationManager",Vz="SDK is still unloading...",Yde="SDK is not initialized",qde=100,Gde=5e4,oA=Ds((Iu={cookieCfg:{}},Iu[Ed]={rdOnly:!0,ref:!0,v:[]},Iu[Cd]={rdOnly:!0,ref:!0,v:[]},Iu[bc]={ref:!0,v:{}},Iu[B_]=wi,Iu.loggingLevelConsole=0,Iu.diagnosticLogInterval=wi,Iu));Bc=(function(){function t(){var e,n,r,o,i,s,a,c,l,u,f,m,d,p,g,h,v,C,w,y,S,D,_,A,U,k,E,x,b,I,T,R,L;Je(t,this,function(N){q(),N._getDbgPlgTargets=function(){return[_,o]},N[jo]=function(){return n},N.activeStatus=function(){return k},N._setPendingStatus=function(){k=3},N[Pc]=function(j,oe,xe,le){d&&An(Vz),N[jo]()&&An("Core cannot be initialized more than once"),e=jt(j,oA,xe||N[kt],!1),j=e.cfg,yt(e[da](function(rt){var ht=rt.cfg,wn=k===3;if(!wn){x=ht.initInMemoMaxSize||qde;var Wn=ht.instrumentationKey,Or=ht.endpointUrl;if(ae(Wn)){S=null,k=mi.INACTIVE;var Ur="Please provide instrumentation key";n?(se(r,1,100,Ur),W()):An(Ur);return}var Di=[];if(fo(Wn)?(Di[Ge](Wn),S=null):S=Wn,fo(Or)?(Di[Ge](Or),E=null):E=Or,Di[me]){b=!1,k=3;var tr=hu(ht.initTimeOut)?ht.initTimeOut:Gde,Ya=XG(Di);I=di(function(){I=null,b||B()},tr),vi(Ya,function(Q){try{if(b)return;if(!Q.rejected){var ie=Q[md];if(ie&&ie[me]){var ve=ie[0];if(S=ve&&ve[md],ie[me]>1){var be=ie[1];E=be&&be[md]}}S&&(j.instrumentationKey=S,j.endpointUrl=E)}B()}catch{b||B()}})}else B();var $=rt.ref(rt.cfg,bc);Ie($,function(Q){rt.ref($,Q)})}})),i=le,w=Zde(e,C,i&&N[bw](),w),Xt(),N[kt]=xe;var De=j[Ed];if(u=[],u[Ge].apply(u,I_(I_([],oe,!1),De,!1)),f=j[Cd],Be(null),(!m||m[me]===0)&&An("No "+Cd+" available"),f&&f[me]>1){var Qe=N[lu]("TeeChannelController");(!Qe||!Qe.plugin)&&se(r,1,28,"TeeChannel required")}Xde(j,D,r),D=null,n=!0,k===mi.ACTIVE&&W()},N.getChannels=function(){var j=[];return m&&ee(m,function(oe){j[Ge](oe)}),mo(j)},N.track=function(j){mn(N[mh](),function(){return"AppInsightsCore:track"},function(){j===null&&(Dt(j),An("Invalid telemetry item")),!j[ho]&&ae(j[ho])&&(Dt(j),An("telemetry name required")),j.iKey=j.iKey||S,j.time=j.time||Rs(new Date),j.ver=j.ver||"4.0",!d&&N[jo]()&&k===mi.ACTIVE?ce()[Jn](j):k!==mi.INACTIVE&&o[me]<=x&&o[Ge](j)},function(){return{item:j}},!j.sync)},N[O_]=ce,N[bw]=function(){return i||(i=new Xw(e.cfg),N[Vde]=i),i},N[sh]=function(j){N.getNotifyMgr()[sh](j)},N[ih]=function(j){i&&i[ih](j)},N.getCookieMgr=function(){return c||(c=Uc(e.cfg,N[kt])),c},N.setCookieMgr=function(j){c!==j&&(Fc(c,!1),c=j)},N[mh]=function(){return s||a||WL()},N.setPerfMgr=function(j){s=j},N.eventCnt=function(){return o[me]},N.releaseQueue=function(){if(n&&o[me]>0){var j=o;o=[],k===2?ee(j,function(oe){oe.iKey=oe.iKey||S,ce()[Jn](oe)}):se(r,2,20,"core init status is not active")}},N.pollInternalLogs=function(j){return g=j||null,L=!1,T&&T[Ic](),z(!0)};function B(){b=!0,ae(S)?(k=mi.INACTIVE,se(r,1,112,"ikey can't be resolved from promises")):k=mi.ACTIVE,W()}function W(){n&&(N.releaseQueue(),N.pollInternalLogs())}function z(j){if((!T||!T[uu])&&!L){var oe=j||r&&r.queue[me]>0;oe&&(R||(R=!0,yt(e[da](function(xe){var le=xe.cfg.diagnosticLogInterval;(!le||!(le>0))&&(le=1e4);var De=!1;T&&(De=T[uu],T[Ic]()),T=TG(Pn,le),T.unref(),T[uu]=De}))),T[uu]=!0)}return T}N[qN]=function(){L=!0,T&&T[Ic](),Pn()},yi(N,function(){return p},["addTelemetryInitializer"]),N[qi]=function(j,oe,xe){j===void 0&&(j=!0),n||An(Yde),d&&An(Vz);var le={reason:50,isAsync:j,flushComplete:!1},De;j&&!oe&&(De=zi(function(ht){oe=ht}));var Qe=xh($t(),N);Qe[Tw](function(){C.run(N[kt]),rD([c,i,r],j,function(){q(),oe&&oe(le)})},N);function rt(ht){le.flushComplete=ht,d=!0,v.run(Qe,le),N[qN](),Qe[Jn](le)}return Pn(),vn(j,rt,6,xe)||rt(!1),De},N[lu]=mt,N.addPlugin=function(j,oe,xe,le){if(!j){le&&le(!1),nt(Gz);return}var De=mt(j[pa]);if(De&&!oe){le&&le(!1),nt("Plugin ["+j[pa]+"] is already loaded!");return}var Qe={reason:16};function rt(Wn){u[Ge](j),Qe.added=[j],Be(Qe),le&&le(!0)}if(De){var ht=[De.plugin],wn={reason:2,isAsync:!!xe};xo(ht,wn,function(Wn){Wn?(Qe.removed=ht,Qe.reason|=32,rt(!0)):le&&le(!1)})}else rt(!1)},N.updateCfg=function(j,oe){oe===void 0&&(oe=!0);var xe;if(N[jo]()){xe={reason:1,cfg:e.cfg,oldCfg:TN({},e.cfg),newConfig:TN({},j),merge:oe},j=xe.newConfig;var le=e.cfg;j[Ed]=le[Ed],j[Cd]=le[Cd]}e._block(function(De){var Qe=De.cfg;iA(De,Qe,j,oe),oe||Ie(Qe,function(rt){_s(j,rt)||De.set(Qe,rt,wi)}),De.setDf(Qe,oA)},!0),e.notify(),xe&&pt(xe)},N.evtNamespace=function(){return h},N.flush=vn,N.getTraceCtx=function(j){return y||(y=Mz()),y},N.setTraceCtx=function(j){y=j||null},N.addUnloadHook=yt,Tc(N,"addUnloadCb",function(){return v},"add"),N.onCfgChange=function(j){var oe;return n?oe=hr(e.cfg,j,N[kt]):oe=Jde(D,j),Qde(oe)},N.getWParam=function(){return ld()||e.cfg.enableWParam?0:-1};function V(){var j={};A=[];var oe=function(xe){xe&&ee(xe,function(le){if(le[pa]&&le[ah]&&!j[le.identifier]){var De=le[pa]+"="+le[ah];A[Ge](De),j[le.identifier]=le}})};oe(m),f&&ee(f,function(xe){oe(xe)}),oe(u)}function q(){n=!1,e=jt({},oA,N[kt]),e.cfg[U_]=1,gt(N,"config",{g:function(){return e.cfg},s:function(oe){N.updateCfg(oe,!1)}}),gt(N,"pluginVersionStringArr",{g:function(){return A||V(),A}}),gt(N,"pluginVersionString",{g:function(){return U||(A||V(),U=A.join(";")),U||Le}}),gt(N,"logger",{g:function(){return r||(r=new Eu(e.cfg),e[kt]=r),r},s:function(oe){e[kt]=oe,r!==oe&&(Fc(r,!1),r=oe)}}),N[kt]=new Eu(e.cfg),_=[];var j=N.config[Ed]||[];j.splice(0,j[me]),Is(j,_),p=new Wz,o=[],Fc(i,!1),i=null,s=null,a=null,Fc(c,!1),c=null,l=null,u=[],f=null,m=null,d=!1,g=null,h=kr("AIBaseCore",!0),v=Nd(),y=null,S=null,C=iy(),D=[],U=null,A=null,L=!1,T=null,R=!1,k=0,E=null,x=null,b=!1,I=null}function ce(){var j=vo($t(),e.cfg,N);return j[Tw](z),j}function Be(j){var oe=Kde(N[kt],Cz,u);l=null,U=null,A=null,m=(f||[])[0]||[],m=pD(Is(m,oe[Cd]));var xe=Is(pD(oe[dn]),m);_=mo(xe);var le=N.config[Ed]||[];le.splice(0,le[me]),Is(le,_);var De=ce();m&&m[me]>0&&XL(De[ha](m),xe),XL(De,xe),j&&pt(j)}function mt(j){var oe=null,xe=null,le=[];return ee(_,function(De){if(De[pa]===j&&De!==p)return xe=De,-1;De.getChannel&&le[Ge](De)}),!xe&&le[me]>0&&ee(le,function(De){if(xe=De.getChannel(j),!xe)return-1}),xe&&(oe={plugin:xe,setEnabled:function(De){$c(xe)[Aw]=!De},isEnabled:function(){var De=$c(xe);return!De[pi]&&!De[Aw]},remove:function(De,Qe){De===void 0&&(De=!0);var rt=[xe],ht={reason:1,isAsync:De};xo(rt,ht,function(wn){wn&&Be({reason:32,removed:rt}),Qe&&Qe(wn)})}}),oe}function $t(){if(!l){var j=(_||[]).slice();wt(j,p)===-1&&j[Ge](p),l=_u(pD(j),e.cfg,N)}return l}function xo(j,oe,xe){if(j&&j[me]>0){var le=_u(j,e.cfg,N),De=xh(le,N);De[Tw](function(){var Qe=!1,rt=[];ee(u,function(wn,Wn){Yz(wn,j)?Qe=!0:rt[Ge](wn)}),u=rt,U=null,A=null;var ht=[];f&&(ee(f,function(wn,Wn){var Or=[];ee(wn,function(Ur){Yz(Ur,j)?Qe=!0:Or[Ge](Ur)}),ht[Ge](Or)}),f=ht),xe&&xe(Qe),z()}),De[Jn](oe)}else xe(!1)}function Pn(){if(r&&r.queue){var j=r.queue.slice(0);r.queue[me]=0,ee(j,function(oe){var xe={name:g||"InternalMessageId: "+oe[ch],iKey:S,time:Rs(new Date),baseType:Id.dataType,baseData:{message:oe[ga]}};N.track(xe)})}}function vn(j,oe,xe,le){var De=1,Qe=!1,rt=null;le=le||5e3;function ht(){De--,Qe&&De===0&&(rt&&rt[Ic](),rt=null,oe&&oe(Qe),oe=null)}if(m&&m[me]>0){var wn=ce()[ha](m);wn.iterate(function(Wn){if(Wn.flush){De++;var Or=!1;Wn.flush(j,function(){Or=!0,ht()},xe)||Or||(j&&rt==null?rt=di(function(){rt=null,ht()},le):ht())}})}return Qe=!0,ht(),!0}function Xt(){var j;yt(e[da](function(oe){var xe=oe.cfg.enablePerfMgr;if(xe){var le=oe.cfg[B_];(j!==le||!j)&&(le||(le=zde),Fw(oe.cfg,B_,le),j=le,a=null),!s&&!a&&Re(le)&&(a=le(N,N[bw]()))}else a=null,j=null}))}function pt(j){var oe=ny($t(),N);oe[Tw](z),(!N._updateHook||N._updateHook(oe,j)!==!0)&&oe[Jn](j)}function nt(j){var oe=N[kt];oe?(se(oe,2,73,j),z()):An(j)}function Dt(j){var oe=N[bw]();oe&&oe[pu]([j],2)}function yt(j){C.add(j)}})}return t.__ieDyn=1,t})()});function Ld(t,e){try{if(t&&t!==""){var n=Rr().parse(t);if(n&&n[zN]&&n[zN]>=n.itemsAccepted&&n.itemsReceived-n.itemsAccepted===n.errors[me])return n}}catch(r){se(e,1,43,"Cannot parse the response. "+(r[ho]||Ee(r)),{response:t})}return null}var Kz=ne(()=>{Ne();xt();Ns();wu()});var Sa,eme,Jz,sA,Ad,Xz=ne(()=>{pr();yd();Ne();xt();SL();Ns();wu();wa();Sa="",eme="NoResponseBody",Jz="&"+eme+"=true",sA="POST",Ad=(function(){function t(){var e=0,n,r,o,i,s,a,c,l,u,f,m,d,p,g;Je(t,this,function(h,v){var C=!0;b(),h[Pc]=function(I,T){o=T,r&&se(o,1,28,"Sender is already initialized"),h.SetConfig(I),r=!0},h._getDbgPlgTargets=function(){return[r,i,a,n]},h.SetConfig=function(I){try{if(s=I.senderOnCompleteCallBack||{},a=!!I.disableCredentials,c=I.fetchCredentials,i=!!I.isOneDs,n=!!I.enableSendPromise,u=!!I.disableXhr,f=!!I.disableBeacon,m=!!I.disableBeaconSync,g=I.timeWrapper,p=!!I.addNoResponse,d=!!I.disableFetchKeepAlive,l={sendPOST:k},i||(C=!1),a){var T=Dd();T&&T.protocol&&T.protocol[Wo]()==="file:"&&(C=!1)}return!0}catch{}return!1},h.getSyncFetchPayload=function(){return e},h.getSenderInst=function(I,T){return I&&I[me]?D(I,T):null},h.getFallbackInst=function(){return l},h[fu]=function(I,T){b()};function w(I,T){_(T,200,{},I)}function y(I,T){se(o,2,26,"Failed to send telemetry.",{message:I}),_(T,400,{})}function S(I){y("No endpoint url is provided for the batch",I)}function D(I,T){for(var R=0,L=null,N=0;L==null&&N<I[me];)R=I[N],!u&&R===1?Hw()?L=x:gh()&&(L=k):R===2&&Lc(T)&&(!T||!d)?L=E:R===3&&Ji()&&(T?!m:!f)&&(L=U),N++;return L?{_transport:R,_isSync:T,sendPOST:L}:null}function _(I,T,R,L){try{I&&I(T,R,L)}catch{}}function A(I,T){var R=Kn(),L=I[uh];if(!L)return S(T),!0;L=I[uh]+(p?Jz:Sa);var N=I[mu],B=i?N:new Blob([N],{type:"text/plain;charset=UTF-8"}),W=R.sendBeacon(L,B);return W}function U(I,T,R){var L=I[mu];try{if(L)if(A(I,T))w(Sa,T);else{var N=s&&s.beaconOnRetry;N&&Re(N)?N(I,T,A):(l&&l.sendPOST(I,T,!0),se(o,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(B){i&&go(o,"Failed to send telemetry using sendBeacon API. Ex:"+Ee(B)),_(T,i?0:400,{},Sa)}}function k(I,T,R){var L,N,B,W=I[M_]||{};!R&&n&&(L=zi(function(ce,Be){N=ce,B=Be})),i&&R&&I.disableXhrSync&&(R=!1);var z=I[uh];if(!z){S(T),N&&N(!1);return}var V=sL(sA,z,C,!0,R,I[vd]);i||V.setRequestHeader("Content-type","application/json"),ee(br(W),function(ce){V.setRequestHeader(ce,W[ce])}),V.onreadystatechange=function(){i||(q(V),V.readyState===4&&N&&N(!0))},V.onload=function(){i&&q(V)};function q(ce){var Be=s&&s.xhrOnComplete,mt=Be&&Re(Be);if(mt)Be(ce,T,I);else{var $t=ks(ce);_(T,ce[hd],Nc(ce,i),$t)}}return V.onerror=function(ce){_(T,i?V[hd]:400,Nc(V,i),i?Sa:Rc(V)),B&&B(ce)},V.ontimeout=function(){_(T,i?V[hd]:500,Nc(V,i),i?Sa:Rc(V)),N&&N(!1)},V.send(I[mu]),L}function E(I,T,R){var L,N=I[uh],B=I[mu],W=i?B:new Blob([B],{type:"application/json"}),z,V,q,ce=new Headers,Be=B[me],mt=!1,$t=!1,xo=I[M_]||{},Pn=(L={method:sA,body:W},L[EL]=!0,L);I.headers&&br(I.headers)[me]>0&&(ee(br(xo),function(nt){ce.append(nt,xo[nt])}),Pn[M_]=ce),c?Pn.credentials=c:C&&i&&(Pn.credentials="include"),R&&(Pn.keepalive=!0,e+=Be,i?I._sendReason===2&&(mt=!0,p&&(N+=Jz)):mt=!0);var vn=new Request(N,Pn);try{vn[EL]=!0}catch{}if(!R&&n&&(z=zi(function(nt,Dt){V=nt,q=Dt})),!N){S(T),V&&V(!1);return}function Xt(nt){_(T,i?0:400,{},i?Sa:nt)}function pt(nt,Dt,yt){var j=nt[hd],oe=s.fetchOnComplete;oe&&Re(oe)?oe(nt,T,yt||Sa,Dt):_(T,j,{},yt||Sa)}try{vi(fetch(i?N:vn,i?Pn:null),function(nt){if(R&&(e-=Be,Be=0),!$t)if($t=!0,nt.rejected)Xt(nt.reason&&nt.reason[ga]),q&&q(nt.reason);else{var Dt=nt[md];try{!i&&!Dt.ok?(Xt(Dt.statusText),V&&V(!1)):i&&!Dt.body?(pt(Dt,null,Sa),V&&V(!0)):vi(Dt.text(),function(yt){pt(Dt,I,yt[md]),V&&V(!0)})}catch(yt){Xt(Ee(yt)),q&&q(yt)}}})}catch(nt){$t||(Xt(Ee(nt)),q&&q(nt))}return mt&&!$t&&($t=!0,_(T,200,{}),V&&V(!0)),i&&!$t&&I[vd]>0&&g&&g.set(function(){$t||($t=!0,_(T,500,{}),V&&V(!0))},I[vd]),z}function x(I,T,R){var L=On(),N=new XDomainRequest,B=I[mu];N.onload=function(){var ce=ks(N),Be=s&&s.xdrOnComplete;Be&&Re(Be)?Be(N,T,I):_(T,200,{},ce)},N.onerror=function(){_(T,400,{},i?Sa:_d(N))},N.ontimeout=function(){_(T,500,{})},N.onprogress=function(){};var W=L&&L.location&&L.location.protocol||"",z=I[uh];if(!z){S(T);return}if(!i&&z.lastIndexOf(W,0)!==0){var V="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";se(o,2,40,". "+V),y(V,T);return}var q=i?z:z[bs](/^(https?:)/,"");N.open(sA,q),I[vd]&&(N[vd]=I[vd]),N.send(B),i&&R?g&&g.set(function(){N.send(B)},0):N.send(B)}function b(){e=0,r=!1,n=!1,o=null,i=null,s=null,a=null,c=null,l=null,u=!1,f=!1,m=!1,d=!1,p=!1,g=null}})}return t.__ieDyn=1,t})()});function n4(t){return t&&t[bs]?t[bs](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Le):t}function CD(t,e){if(e){var n=Le;we(e)?(n=Le,ee(e,function(o){o=n4(o),o&&(o[0]!=="."&&(o="."+o),n+=o)})):n=n4(e),n&&(n[0]!=="."&&(n="."+n),t=(t||Le)+n)}var r=ome.exec(t||Le)||[];return{type:r[1],ns:(r[2]||Le).replace(tme,".").replace(nme,Le)[Gi](".").sort().join(".")}}function aA(t,e,n){var r=[],o=ay.get(t,wD,{},!1),i=CD(e,n);return Ie(o,function(s,a){ee(a,function(c){(!i[gi]||i[gi]===c[lh][gi])&&(!i.ns||i.ns===i.ns)&&r[Ge]({name:c.evtName[gi]+(c[lh].ns?"."+c[lh].ns:Le),handler:c.handler})})}),r}function u4(t,e,n){n===void 0&&(n=!0);var r=ay.get(t,wD,{},n),o=r[e];return o||(o=r[e]=[]),o}function f4(t,e,n,r){t&&e&&e[gi]&&(t[t4]?t[t4](e[gi],n,r):t[e4]&&t[e4](o4+e[gi],n))}function ime(t,e,n,r){var o=!1;return t&&e&&e[gi]&&n&&(t[Qz]?(t[Qz](e[gi],n,r),o=!0):t[Zz]&&(t[Zz](o4+e[gi],n),o=!0)),o}function r4(t,e,n,r){for(var o=e[me];o--;){var i=e[o];i&&(!n.ns||n.ns===i[lh].ns)&&(!r||r(i))&&(f4(t,i[lh],i.handler,i.capture),e[ma](o,1))}}function sme(t,e,n){if(e[gi])r4(t,u4(t,e[gi]),e,n);else{var r=ay.get(t,wD,{});Ie(r,function(o,i){r4(t,i,e,n)}),br(r)[me]===0&&ay.kill(t,wD)}}function Ci(t,e){var n;return e?(we(e)?n=[t].concat(e):n=[t,e],n=CD("xx",n).ns[Gi](".")):n=t,n}function xa(t,e,n,r,o){o===void 0&&(o=!1);var i=!1;if(t)try{var s=CD(e,r);if(i=ime(t,s,n,o),i&&ay.accept(t)){var a={guid:rme++,evtName:s,handler:n,capture:o};u4(t,s.type)[Ge](a)}}catch{}return i}function Wc(t,e,n,r,o){if(o===void 0&&(o=!1),t)try{var i=CD(e,r),s=!1;sme(t,i,function(a){return i.ns&&!n||a.handler===n?(s=!0,!0):!1}),s||f4(t,i,n,o)}catch{}}function cA(t,e,n,r){return r===void 0&&(r=!1),xa(t,e,n,null,r)}function lA(t,e,n,r){r===void 0&&(r=!1),Wc(t,e,n,null,r)}function ED(t,e,n){var r=!1,o=On();o&&(r=xa(o,t,e,n),r=xa(o.body,t,e,n)||r);var i=Fn();return i&&(r=xa(i,t,e,n)||r),r}function SD(t,e,n){var r=On();r&&(Wc(r,t,e,n),Wc(r.body,t,e,n));var o=Fn();o&&Wc(o,t,e,n)}function _h(t,e,n,r){var o=!1;return e&&t&&t[me]>0&&ee(t,function(i){i&&(!n||wt(n,i)===-1)&&(o=ED(i,e,r)||o)}),o}function xD(t,e,n,r){var o=!1;return e&&t&&we(t)&&(o=_h(t,e,n,r),!o&&n&&n[me]>0&&(o=_h(t,e,null,r))),o}function Pu(t,e,n){t&&we(t)&&ee(t,function(r){r&&SD(r,e,n)})}function cy(t,e,n){return xD([a4,s4,yD],t,e,n)}function ly(t,e){Pu([a4,s4,yD],t,e)}function Dh(t,e,n){function r(s){var a=Fn();t&&a&&a.visibilityState==="hidden"&&t(s)}var o=Ci(c4,n),i=_h([yD],t,e,o);return(!e||wt(e,sy)===-1)&&(i=_h([sy],r,e,o)||i),!i&&e&&(i=Dh(t,null,n)),i}function uy(t,e){var n=Ci(c4,e);Pu([yD],t,n),Pu([sy],null,n)}function Ih(t,e,n){function r(s){var a=Fn();t&&a&&a.visibilityState==="visible"&&t(s)}var o=Ci(l4,n),i=_h([i4],t,e,o);return i=_h([sy],r,e,o)||i,!i&&e&&(i=Ih(t,null,n)),i}function fy(t,e){var n=Ci(l4,e);Pu([i4],t,n),Pu([sy],null,n)}var o4,Zz,Qz,e4,t4,wD,sy,yD,i4,s4,a4,c4,l4,tme,nme,rme,ay,ome,d4=ne(()=>{Ne();xt();vh();Un();o4="on",Zz="attachEvent",Qz="addEventListener",e4="detachEvent",t4="removeEventListener",wD="events",sy="visibilitychange",yD="pagehide",i4="pageshow",s4="unload",a4="beforeunload",c4=kr("aiEvtPageHide"),l4=kr("aiEvtPageShow"),tme=/\.[\.]+/g,nme=/[\.]+$/,rme=1,ay=J_("events"),ome=/^([^.]*)(?:\.(.+)|)/});var uA,m4=ne(()=>{Pw();uA=fn({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3})});var Ot=ne(()=>{MG();$G();YN();zz();rA();K_();jL();CL();wa();Kz();Xz();Ne();Pw();d4();wu();Bo();$L();uD();Ns();hD();m4();ML();vh();gD();vD();JL();Cu();eD();_L()});var _a,p4,fA,_D,DD=ne(()=>{_a="",p4="https://browser.events.data.microsoft.com/OneCollector/1.0/",fA="version",_D="properties"});var dA,Ph,Da,mA,Vt,jc,ID,PD,bD,TD,dy,RD=ne(()=>{dA="initialize",Ph="indexOf",Da="timings",mA="pollInternalLogs",Vt="value",jc="length",ID="processTelemetryStart",PD="handleField",bD="rmSanitizer",TD="rmFieldSanitizer",dy="canHandle"});function gr(t){return!(t===_a||ae(t))}function kD(t){if(t){var e=Vi(t,"-");if(e>-1)return cd(t,e)}return _a}function y4(){return pA===null&&(pA=!Ve(Uint8Array)&&!fme()&&!gu()),pA}function ND(t){return!!(t&&Ir(t)&&t>=1&&t<=4)}function LD(t,e,n){if(!e&&!gr(e)||typeof t!="string")return null;var r=typeof e;if(r==="string"||r==="number"||r==="boolean"||we(e))e={value:e};else if(r==="object"&&!g4.call(e,"value"))e={value:n?JSON.stringify(e):e};else if(ae(e[Vt])||e[Vt]===_a||!ke(e[Vt])&&!Ir(e[Vt])&&!ca(e[Vt])&&!we(e[Vt]))return null;if(we(e[Vt])&&!gA(e[Vt]))return null;if(!ae(e.kind)){if(we(e[Vt])||!my(e.kind))return null;e[Vt]=e[Vt].toString()}return e}function Th(t,e,n){var r=-1;if(!Ve(t))if(e>0&&(e===32?r=8192:e<=13&&(r=e<<5)),ume(n))r===-1&&(r=0),r|=n;else{var o=lme[Ia(t)]||-1;r!==-1&&o!==-1?r|=o:o===6&&(r=o)}return r}function C4(t,e,n){n===void 0&&(n=!0);var r;return t&&(r=t.get(e),n&&r&&decodeURIComponent&&(r=decodeURIComponent(r))),r||_a}function E4(t){t===void 0&&(t="D");var e=ey();return t==="B"?e="{"+e+"}":t==="P"?e="("+e+")":t==="N"&&(e=e.replace(/-/g,_a)),e}function Fd(t,e,n,r,o){var i={},s=!1,a=0,c=arguments[jc],l=arguments;for(ca(l[0])&&(s=l[0],a++);a<c;a++){var t=l[a];Ie(t,function(f,m){s&&m&&tn(m)?we(m)?(i[f]=i[f]||[],ee(m,function(d,p){d&&tn(d)?i[f][p]=Fd(!0,i[f][p],d):i[f][p]=d})):i[f]=Fd(!0,i[f],m):i[f]=m})}return i}function my(t){return t===0||t>0&&t<=13||t===32}function ume(t){return t>=0&&t<=9}function fme(){var t=Kn();if(!Ve(t)&&t.userAgent){var e=t.userAgent.toLowerCase();if((e[Ph]("safari")>=0||e[Ph]("firefox")>=0)&&e[Ph]("chrome")<0)return!0}return!1}function gA(t){return t[jc]>0}function py(t,e){var n=t;n[Da]=n[Da]||{},n[Da][ID]=n[Da][ID]||{},n[Da][ID][e]=Go()}function Ia(t){var e=0;if(t!=null){var n=typeof t;n==="string"?e=1:n==="number"?e=2:n==="boolean"?e=3:n===Cc&&(e=4,we(t)?(e=4096,t[jc]>0&&(e|=Ia(t[0]))):g4.call(t,"value")&&(e=8192|Ia(t[Vt])))}return e}function AD(){return!!vt("chrome")}function S4(t,e,n,r,o,i){r===void 0&&(r=!1),o===void 0&&(o=!1);function s(c,l,u){try{c[l]=u}catch{}}var a=new XMLHttpRequest;return r&&s(a,ame,r),n&&s(a,h4,n),a.open(t,e,!o),n&&s(a,h4,n),!o&&i&&s(a,cme,i),a}function bu(t){return t>0}var Vc,hA,bh,g4,ame,h4,cme,lme,pA,v4,w4,Go,FD=ne(()=>{Ot();Bo();Ne();DD();RD();hA="4.3.6",bh="1DS-Web-JS-"+hA,g4=hw.hasOwnProperty,ame="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",h4="withCredentials",cme="timeout",lme=(Vc={},Vc[0]=0,Vc[2]=6,Vc[1]=1,Vc[3]=7,Vc[4098]=6,Vc[4097]=1,Vc[4099]=7,Vc),pA=null,v4=ld(),w4=Zp();Go=_w});function mme(t){return t&&(!t.getProperty||!t.setProperty)&&An("Invalid property storage override passed."),!0}var dme,x4,_4=ne(()=>{Bo();pr();Ot();Ne();DD();FD();RD();dme=Ds({endpointUrl:p4,propertyStorageOverride:{isVal:mme}});x4=(function(t){Ho(e,t);function e(){var n=t.call(this)||this;return Je(e,n,function(r,o){r[dA]=function(i,s,a,c){mn(r,function(){return"AppInsightsCore.initialize"},function(){try{o[dA](jt(i,dme,a||r.logger,!1).cfg,s,a,c)}catch(f){var l=r.logger,u=Ee(f);u[Ph]("channels")!==-1&&(u+=`
 - Channels must be provided through config.channels only!`),se(l,1,514,"SDK Initialization Failed - no telemetry will be sent: "+u)}},function(){return{config:i,extensions:s,logger:a,notificationManager:c}})},r.track=function(i){mn(r,function(){return"AppInsightsCore.track"},function(){var s=i;if(s){s[Da]=s[Da]||{},s[Da].trackStart=Go(),ND(s.latency)||(s.latency=1);var a=s.ext=s.ext||{};a.sdk=a.sdk||{},a.sdk.ver=bh;var c=s.baseData=s.baseData||{};c[_D]=c[_D]||{};var l=c[_D];l[fA]=l[fA]||r.pluginVersionString||_a}o.track(s)},function(){return{item:i}},!i.sync)},r[mA]=function(i){return o[mA](i||"InternalLog")}}),n}return e.__ieDyn=1,e})(Bc)});var D4,I4,P4,b4,T4,R4=ne(()=>{Ot();D4=fn({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,Pii_IPv6ScrubLastHextets:14,Pii_DropValue:15,CustomerContent_GenericContent:32}),I4=fn({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),P4=fn({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),b4=fn({Normal:1,Critical:2}),T4=fn({NONE:0,ERROR:1,WARNING:2,INFORMATION:3})});function k4(t){return t=="__proto__"||t=="constructor"||t=="prototype"}var N4,L4=ne(()=>{Ot();Ne();DD();FD();RD();N4=(function(){function t(e){var n=this,r={},o=[],i=[];e&&i.push(e);function s(u,f){var m,d=r[u];if(d&&(m=d[f]),!m&&m!==null){if(ke(u)&&ke(f))if(i[jc]>0){for(var p=0;p<i[jc];p++)if(i[p][PD](u,f)){m={canHandle:!0,fieldHandler:i[p]};break}}else o[jc]===0&&(m={canHandle:!0});if(!m&&m!==null){m=null;for(var p=0;p<o[jc];p++)if(o[p][PD](u,f)){m={canHandle:!0,handler:o[p],fieldHandler:null};break}}if(!d){if(k4(u))return null;d=r[u]={}}if(k4(f))return null;d[f]=m}return m}n.clearCache=function(){r={}},n.addSanitizer=function(u){u&&(IN(o,u)||o.push(u),r={})},n.addFieldSanitizer=function(u){u&&(IN(i,u)||i.push(u),r={})},n[bD]=function(u){if(u){var f=wt(o,u);f!==-1&&(o.splice(f,1),r={}),ee(o,function(m){m&&m[bD]&&m[bD](u)})}},n[TD]=function(u){if(u){var f=wt(i,u);f!==-1&&(i.splice(f,1),r={}),ee(o,function(m){m&&m[TD]&&m[TD](u)})}},n.isEmpty=function(){return th(o)+th(i)===0},n[PD]=function(u,f){var m=s(u,f);return m?m[dy]:!1},n[Vt]=function(u,f,m,d){var p=s(u,f);if(p&&p[dy]){if(!p[dy])return null;if(p.handler)return p.handler[Vt](u,f,m,d);if(!ke(f)||ae(m)||m===_a)return null;var g=null,h=Ia(m);if((h&8192)===8192){var v=h&-8193;if(g=m,!gr(g[Vt])||v!==1&&v!==2&&v!==3&&(v&4096)!==4096)return null}else h===1||h===2||h===3||(h&4096)===4096?g=c(u,f,m):h===4&&(g=c(u,f,d?JSON.stringify(m):m));if(g)return a(p,u,f,h,g,d)}return null},n.property=function(u,f,m,d){var p=s(u,f);if(!p||!p[dy]||!ke(f)||ae(m)||!gr(m[Vt]))return null;var g=Ia(m[Vt]);return g===0?null:a(p,u,f,g,m,d)};function a(u,f,m,d,p,g){if(u.handler)return u.handler.property(f,m,p,g);if(!ae(p.kind)){if((d&4096)===4096||!my(p.kind))return null;p[Vt]=p[Vt].toString()}return l(u.fieldHandler,f,m,d,p)}function c(u,f,m){return gr(m)?{value:m}:null}function l(u,f,m,d,p){if(p&&u){var g=u.getSanitizer(f,m,d,p.kind,p.propertyType);if(g)if(d===4){var h={},v=p[Vt];Ie(v,function(w,y){var S=f+"."+m;if(gr(y)){var D=c(S,w,y);D=l(u,S,w,Ia(y),D),D&&(h[w]=D[Vt])}}),p[Vt]=h}else{var C={path:f,name:m,type:d,prop:p,sanitizer:n};p=g.call(n,C)}}return p}}return t.getFieldType=Ia,t})()});var A4={};PC(A4,{ActiveStatus:()=>mi,AppInsightsCore:()=>x4,BaseTelemetryPlugin:()=>Hc,DiagnosticLogger:()=>Eu,EventLatency:()=>I4,EventPersistence:()=>b4,EventPropertyType:()=>P4,EventsDiscardedReason:()=>Ps,FullVersionString:()=>bh,InternalAppInsightsCore:()=>Bc,LoggingSeverity:()=>uA,MinChannelPriorty:()=>jN,NotificationManager:()=>Xw,PerfEvent:()=>bd,PerfManager:()=>Qw,ProcessTelemetryContext:()=>eA,SenderPostManager:()=>Ad,TraceLevel:()=>T4,Undefined:()=>sa,ValueKind:()=>D4,ValueSanitizer:()=>N4,Version:()=>hA,_InternalLogMessage:()=>Id,__getRegisteredEvents:()=>aA,_appendHeader:()=>ph,_getAllResponseHeaders:()=>Nc,_logInternalMessage:()=>RL,_testHookMaxUnloadHooksCb:()=>tA,_throwInternal:()=>se,_warnToConsole:()=>go,addEventHandler:()=>ED,addEventListeners:()=>xD,addPageHideEventListener:()=>Dh,addPageShowEventListener:()=>Ih,addPageUnloadEventListener:()=>cy,areCookiesSupported:()=>Eh,arrForEach:()=>ee,arrIndexOf:()=>wt,arrMap:()=>xc,arrReduce:()=>xw,attachEvent:()=>cA,blockDynamicConversion:()=>qw,convertAllHeadersToMap:()=>z_,cookieAvailable:()=>Eh,createCookieMgr:()=>Uc,createDynamicConfig:()=>jt,createEnumStyle:()=>fn,createGuid:()=>E4,createProcessTelemetryContext:()=>vo,createTraceParent:()=>qL,createUniqueNamespace:()=>kr,createUnloadHandlerContainer:()=>Nd,dateNow:()=>xn,detachEvent:()=>lA,disallowsSameSiteNone:()=>lD,doPerf:()=>mn,dumpObj:()=>Ee,eventOff:()=>Wc,eventOn:()=>xa,extend:()=>Fd,findW3cTraceParent:()=>KL,forceDynamicConversion:()=>yL,formatErrorMessageXdr:()=>_d,formatErrorMessageXhr:()=>Rc,formatTraceParent:()=>zL,generateW3CId:()=>Td,getCommonSchemaMetaData:()=>Th,getConsole:()=>Ow,getCookieValue:()=>C4,getCrypto:()=>Uw,getDocument:()=>Fn,getDynamicConfigHandler:()=>Yw,getExceptionName:()=>nn,getFieldValueType:()=>Ia,getGlobal:()=>po,getGlobalInst:()=>vt,getHistory:()=>S_,getIEVersion:()=>$w,getISOString:()=>Rs,getJSON:()=>Rr,getLocation:()=>Dd,getMsCrypto:()=>Mw,getNavigator:()=>Kn,getPerformance:()=>ud,getResponseText:()=>ks,getSetValue:()=>Fw,getTenantId:()=>kD,getTime:()=>Go,getWindow:()=>On,hasDocument:()=>ld,hasHistory:()=>_N,hasJSON:()=>ya,hasNavigator:()=>Ew,hasOwnProperty:()=>mr,hasWindow:()=>Zp,isArray:()=>we,isArrayValid:()=>gA,isBeaconsSupported:()=>Ji,isBoolean:()=>ca,isChromium:()=>AD,isDate:()=>C_,isDocumentObjectAvailable:()=>v4,isError:()=>ad,isFetchSupported:()=>Lc,isFunction:()=>Re,isGreaterThanZero:()=>bu,isIE:()=>vu,isLatency:()=>ND,isNotTruthy:()=>CN,isNullOrUndefined:()=>ae,isNumber:()=>Ir,isObject:()=>tn,isReactNative:()=>gu,isSampledFlag:()=>GL,isString:()=>ke,isTruthy:()=>xs,isTypeof:()=>yN,isUint8ArrayAvailable:()=>y4,isUndefined:()=>Ve,isValidSpanId:()=>kd,isValidTraceId:()=>Rd,isValidTraceParent:()=>mD,isValueAssigned:()=>gr,isValueKind:()=>my,isWindowObjectAvailable:()=>w4,isXhrSupported:()=>gh,mergeEvtNamespace:()=>Ci,newGuid:()=>ey,newId:()=>jw,normalizeJsName:()=>xd,objDefineAccessors:()=>EN,objForEachKey:()=>Ie,objFreeze:()=>mo,objKeys:()=>br,objSeal:()=>SN,onConfigChange:()=>hr,openXhr:()=>S4,optimizeObject:()=>qo,parseResponse:()=>Ld,parseTraceParent:()=>ty,perfNow:()=>_w,prependTransports:()=>kc,proxyAssign:()=>oL,proxyFunctionAs:()=>Tc,proxyFunctions:()=>yi,random32:()=>Ac,randomValue:()=>hL,removeEventHandler:()=>SD,removeEventListeners:()=>Pu,removePageHideEventListener:()=>uy,removePageShowEventListener:()=>fy,removePageUnloadEventListener:()=>ly,safeGetCookieMgr:()=>UL,safeGetLogger:()=>Oc,sanitizeProperty:()=>LD,setEnableEnvMocks:()=>dL,setProcessTelemetryTimings:()=>py,setValue:()=>Ki,strContains:()=>_n,strEndsWith:()=>fd,strFunction:()=>Yp,strObject:()=>Cc,strPrototype:()=>Ss,strStartsWith:()=>nh,strTrim:()=>tt,strUndefined:()=>sa,throwError:()=>An,toISOString:()=>Rs,useXDomainRequest:()=>Hw});var Od=ne(()=>{_4();R4();L4();Ot();FD()});var Ud,OD,UD,vA=ne(()=>{Ud="REAL_TIME",OD="NEAR_REAL_TIME",UD="BEST_EFFORT"});var Ls,MD,F4,wA,O4,U4,yA,$D,hy,Rh,M4,$4,H4,HD,CA,BD,WD,jD,gy,EA,SA,B4,kh,xA,VD,vy=ne(()=>{Ls="",MD="drop",F4="send",wA="requeue",O4="rspFail",U4="oth",yA="no-cache, no-store",$D="application/x-json-stream",hy="cache-control",Rh="content-type",M4="kill-tokens",$4="kill-duration",H4="time-delta-millis",HD="client-version",CA="client-id",BD="time-delta-to-apply-millis",WD="upload-time",jD="apikey",gy="AuthMsaDeviceTicket",EA="WebAuthToken",SA="AuthXToken",B4="NoResponseBody",kh="msfpc",xA="trace",VD="user"});var wy,YD,qD,yy,ze,Pa,Ei,pn,ba,Xn,Ta,GD,Md,zD,$d,KD,JD,W4,_A,DA,j4,XD,IA,PA,V4,bA,TA,RA,ZD,QD,eI,Cy,kA,As,Nh,Zr,zo,Ey,Lh,Sy,Y4,tI,nI,Ah,NA,xy,rI,oI,iI,sI,_y,q4,LA,G4,z4,Dy,Tu,Hd,Fh=ne(()=>{wy="allowRequestSending",YD="shouldAddClockSkewHeaders",qD="getClockSkewHeaderValue",yy="setClockSkew",ze="length",Pa="concat",Ei="iKey",pn="count",ba="events",Xn="push",Ta="split",GD="toLowerCase",Md="hdrs",zD="useHdrs",$d="initialize",KD="setTimeoutOverride",JD="clearTimeoutOverride",W4="payloadPreprocessor",_A="overrideEndpointUrl",DA="avoidOptions",j4="disableEventTimings",XD="enableCompoundKey",IA="disableXhrSync",PA="disableFetchKeepAlive",V4="addNoResponse",bA="useSendBeacon",TA="fetchCredentials",RA="alwaysUseXhrOverride",ZD="serializeOfflineEvt",QD="getOfflineRequestDetails",eI="createPayload",Cy="createOneDSPayload",kA="payloadBlob",As="headers",Nh="_thePayload",Zr="batches",zo="sendType",Ey="canSendRequest",Lh="sendQueuedRequests",Sy="setUnloading",Y4="isTenantKilled",tI="sendSynchronousBatch",nI="_transport",Ah="getWParam",NA="isBeacon",xy="timings",rI="isTeardown",oI="_sendReason",iI="setKillSwitchTenants",sI="_backOffTransmission",_y="identifier",q4="ignoreMc1Ms0CookieProcessing",LA="autoFlushEventsLimit",G4="disableAutoBatchFlushLimit",z4="overrideInstrumentationKey",Dy="sendAttempt",Tu="latency",Hd="sync"});function J4(t){var e=(t.ext||{}).intweb;return e&&gr(e[kh])?e[kh]:null}function K4(t){for(var e=null,n=0;e===null&&n<t[ze];n++)e=J4(t[n]);return e}var Ru,aI=ne(()=>{Od();vy();Fh();Ru=(function(){function t(e,n){var r=n?[][Pa](n):[],o=this,i=K4(r);o[Ei]=function(){return e},o.Msfpc=function(){return i||Ls},o[pn]=function(){return r[ze]},o[ba]=function(){return r},o.addEvent=function(s){return s?(r[Xn](s),i||(i=J4(s)),!0):!1},o[Ta]=function(s,a){var c;if(s<r[ze]){var l=r[ze]-s;ae(a)||(l=a<l?a:l),c=r.splice(s,l),i=K4(r)}return new t(e,c)}}return t.create=function(e,n){return new t(e,n)},t})()});var X4,Z4=ne(()=>{pr();Fh();X4=(function(){function t(){var e=!0,n=!0,r=!0,o="use-collector-delta",i=!1;Je(t,this,function(s){s[wy]=function(){return e},s.firstRequestSent=function(){r&&(r=!1,i||(e=!1))},s[YD]=function(){return n},s[qD]=function(){return o},s[yy]=function(a){i||(a?(o=a,n=!0,i=!0):n=!1,e=!0)}})}return t.__ieDyn=1,t})()});var pme,Q4,e6=ne(()=>{pr();Od();Fh();pme=1e3,Q4=(function(){function t(){var e={};function n(r){var o=[];return r&&ee(r,function(i){o[Xn](tt(i))}),o}Je(t,this,function(r){r[iI]=function(o,i){if(o&&i)try{var s=n(o[Ta](","));if(i==="this-request-only")return s;for(var a=parseInt(i,10)*pme,c=0;c<s[ze];++c)e[s[c]]=xn()+a}catch{return[]}return[]},r[Y4]=function(o){var i=e,s=tt(o);return i[s]!==void 0&&i[s]>xn()?!0:(delete i[s],!1)}})}return t.__ieDyn=1,t})()});function n6(t){return!(t>=300&&t<500&&t!=429||t==501||t==505)}function cI(t){var e=0,n=t6*hme,r=t6*gme,o=ji(Math.random()*(r-n))+n;return e=Math.pow(2,t)*o,su(e,vme)}var hme,gme,t6,vme,AA=ne(()=>{Ne();hme=.8,gme=1.2,t6=3e3,vme=6e5});function Sme(t,e,n,r,o){if(o&&e){var i=t(o.value,o.kind,o.propertyType);if(i>-1){var s=e[r6];s||(s=e[r6]={f:{}});var a=s[lI];if(a||(a=s[lI]={}),n)for(var c=0;c<n.length;c++){var l=n[c];a[l]||(a[l]={f:{}});var u=a[l][lI];u||(u=a[l][lI]={}),a=u}a=a[r]={},we(o.value)?a.a={t:i}:a.t=i}}}var wme,yme,o6,i6,Cme,r6,lI,Eme,s6,a6=ne(()=>{pr();Od();aI();vy();Ne();wme=20,yme=3984588,o6=65e3,i6=2e6,Cme=su(i6,o6),r6="metadata",lI="f",Eme=/\./,s6=(function(){function t(e,n,r,o,i,s){var a="data",c="baseData",l="ext",u=!!o,f=!0,m=n,d={},p=!!s,g=i||Th;Je(t,this,function(h){h.createPayload=function(w,y,S,D,_,A){return{apiKeys:[],payloadBlob:Ls,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:w,isTeardown:y,isSync:S,isBeacon:D,sendType:A,sendReason:_}},h.appendPayload=function(w,y,S){var D=w&&y&&!w.overflow;return D&&mn(e,function(){return"Serializer:appendPayload"},function(){for(var _=y.events(),A=w.payloadBlob,U=w.numEvents,k=!1,E=[],x=[],b=w.isBeacon,I=b?o6:yme,T=b?Cme:i6,R=0,L=0;R<_.length;){var N=_[R];if(N){if(U>=S){w.overflow=y.split(R);break}var B=h.getEventBlob(N);if(B&&B.length<=T){var W=B.length,z=A.length;if(z+W>I){w.overflow=y.split(R);break}A&&(A+=`
`),A+=B,L++,L>wme&&(ua(A,0,1),L=0),k=!0,U++}else B?E.push(N):x.push(N),_.splice(R,1),R--}R++}if(E.length>0&&w.sizeExceed.push(Ru.create(y.iKey(),E)),x.length>0&&w.failedEvts.push(Ru.create(y.iKey(),x)),k){w.batches.push(y),w.payloadBlob=A,w.numEvents=U;var V=y.iKey();wt(w.apiKeys,V)===-1&&w.apiKeys.push(V)}},function(){return{payload:w,theBatch:{iKey:y.iKey(),evts:y.events()},max:S}}),D},h.getEventBlob=function(w){try{return mn(e,function(){return"Serializer.getEventBlob"},function(){var y={};y.name=w.name,y.time=w.time,y.ver=w.ver,y.iKey="o:"+kD(w.iKey);var S={},D;p||(D=function(k,E,x){Sme(g,S,k,E,x)});var _=w[l];_&&(y[l]=S,Ie(_,function(k,E){var x=S[k]={};C(E,x,"ext."+k,!0,null,null,!0)}));var A=y[a]={};A.baseType=w.baseType;var U=A[c]={};return C(w.baseData,U,c,!1,[c],D,f),C(w.data,A,a,!1,[],D,f),JSON.stringify(y)},function(){return{item:w}})}catch{return null}};function v(w,y){var S=d[w];return S===void 0&&(w.length>=7&&(S=nh(w,"ext.metadata")||nh(w,"ext.web")),d[w]=S),S}function C(w,y,S,D,_,A,U){Ie(w,function(k,E){var x=null;if(E||gr(E)){var b=S,I=k,T=_,R=y;if(u&&!D&&Eme.test(k)){var L=k.split("."),N=L.length;if(N>1){T&&(T=T.slice());for(var B=0;B<N-1;B++){var W=L[B];R=R[W]=R[W]||{},b+="."+W,T&&T.push(W)}I=L[N-1]}}var z=D&&v(b,I);if(!z&&m&&m.handleField(b,I)?x=m.value(b,I,E,r):x=LD(I,E,r),x){var V=x.value;if(R[I]=V,A&&A(T,I,x),U&&typeof V=="object"&&!we(V)){var q=T;q&&(q=q.slice(),q.push(I)),C(E,V,b+"."+I,D,q,A,U)}}}})}})}return t.__ieDyn=1,t})()});function Oh(t,e){return{set:function(n,r){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];return bG([t,e],n,r,o)}}}var FA=ne(()=>{Ne()});function Wd(t,e,n){UA[t]=e,n!==!1&&(MA[e]=t)}function uI(t,e){var n=!1;if(t&&e){var r=br(t);if(r&&r[ze]>0)for(var o=e[GD](),i=0;i<r[ze];i++){var s=r[i];if(s&&mr(e,s)&&s[GD]()===o){n=!0;break}}}return n}function Uh(t,e,n,r){e&&n&&n[ze]>0&&(r&&UA[e]?(t[Md][UA[e]]=n,t[zD]=!0):t.url+="&"+e+"="+n)}function Ime(t,e,n){for(var r=0;r<t[ze];r++)if(t[r].name===e){t[r].value=n;return}t[Xn]({name:e,value:n})}function Pme(t,e){for(var n=0;n<t[ze];n++)if(t[n].name===e){t.splice(n,1);return}}var Bd,OA,xme,_me,Dme,UA,MA,c6,l6=ne(()=>{pr();Od();Ne();Z4();aI();vy();e6();AA();a6();FA();Fh();OA="sendAttempt",xme="&"+B4+"=true",_me="?cors=true&"+Rh[GD]()+"="+$D,Dme=(Bd={},Bd[1]=wA,Bd[100]=wA,Bd[200]="sent",Bd[8004]=MD,Bd[8003]=MD,Bd),UA={},MA={};Wd(gy,gy,!1);Wd(HD,HD);Wd(CA,"Client-Id");Wd(jD,jD);Wd(BD,BD);Wd(WD,WD);Wd(SA,SA);c6=(function(){function t(e,n,r,o){var i,s,a,c,l=!1,u,f,m,d,p,g,h,v,C,w,y,S,D,_,A,U,k,E,x,b,I,T,R,L,N,B,W,z;Je(t,this,function(V){$t();var q=!0;V[$d]=function($,Q,ie){L||(p=Q,S=Q.getCookieMgr(),f=ie,m=f.diagLog(),Is(b,hr($,function(ve){var be,qe=ve.cfg,ye=ve.cfg.extensionConfig[ie.identifier];N=Oh(ye[KD],ye[JD]),gr(qe.anonCookieName)?Ime(h,"anoncknm",qe.anonCookieName):Pme(h,"anoncknm"),I=ye[W4],T=ye.payloadListener;var P=ye.httpXHROverride,F=ye[_A]?ye[_A]:qe.endpointUrl;i=F+_me,_=Ve(ye[DA])?!0:!ye[DA],y=!ye[j4];var H=ye.valueSanitizer,G=ye.stringifyObjects,J=!!qe[XD];Ve(ye[XD])||(J=!!ye[XD]),A=ye.xhrTimeout,U=!!ye[IA],k=!!ye[PA],x=ye[V4]!==!1,B=!!ye.excludeCsMetaData,Q.getPlugin("LocalStorage")&&(k=!0),l=!gu(),w=new s6(p,H,G,J,Th,B),ae(ye[bA])||(l=!!ye[bA]),ye[TA]&&(z=ye[TA]);var te=Be();W?W.SetConfig(te):(W=new Ad,W[$d](te,m));var ue=P,Oe=ye[RA]?P:null,Xe=ye[RA]?P:null,Te=[3,2];if(!P){g=!1;var _o=[];gu()?(_o=[2,1],Te=[2,1,3]):_o=[1,2,3],_o=kc(_o,ye.transports),P=ce(_o,!1),P||go(m,"No available transport to send events"),ue=ce(_o,!0)}Oe||(Te=kc(Te,ye.unloadTransports),Oe=ce(Te,!0)),E=!g&&(l&&Ji()||!k&&Lc(!0)),d=(be={},be[0]=P,be[1]=ue||ce([1,2,3],!0),be[2]=Oe||ue||ce([1],!0),be[3]=Xe||ce([2,3],!0)||ue||ce([1],!0),be)})),L=!0)},V.addResponseHandler=function($){return R[Xn]($),{rm:function(){var Q=R.indexOf($);Q>=0&&R.splice(Q,1)}}},V[ZD]=function($){try{if(w)return w.getEventBlob($)}catch{}return Ls},V[QD]=function(){try{var $=w&&w[eI](0,!1,!1,!1,1,0);return le($,_)}catch{}return null},V[Cy]=function($,Q){try{var ie=[];ee($,function(P){Q&&(P=qo(P));var F=Ru.create(P[Ei],[P]);ie[Xn](F)});for(var ve=null;ie[ze]>0&&w;){var be=ie.shift();be&&be[pn]()>0&&(ve=ve||w[eI](0,!1,!1,!1,1,0),w.appendPayload(ve,be,e))}var qe=le(ve,_),ye={data:ve[kA],urlString:qe.url,headers:qe[Md],timeout:A,disableXhrSync:U,disableFetchKeepAlive:k};return _&&(uI(ye[As],hy)||(ye[As][hy]=yA),uI(ye[As],Rh)||(ye[As][Rh]=$D)),ye}catch{}return null};function ce($,Q){try{return W&&W.getSenderInst($,Q)}catch{}return null}V._getDbgPlgTargets=function(){return[d[0],s,w,d,Be(),i]};function Be(){try{var $={xdrOnComplete:mt,fetchOnComplete:xo,xhrOnComplete:Pn,beaconOnRetry:Xt},Q={enableSendPromise:!1,isOneDs:!0,disableCredentials:!q,fetchCredentials:z,disableXhr:!1,disableBeacon:!l,disableBeaconSync:!l,disableFetchKeepAlive:k,timeWrapper:N,addNoResponse:x,senderOnCompleteCallBack:$};return Q}catch{}return null}function mt($,Q,ie){var ve=ks($);vn(Q,200,{},ve),Di(ve)}function $t(){var $;i=null,s=new Q4,a=!1,c=new X4,l=!1,u=0,f=null,m=null,d=null,p=null,g=!0,h=[],v={},C=[],w=null,y=!1,S=null,D=!1,_=!1,A=$,U=$,k=$,E=$,x=$,b=[],I=$,T=$,R=[],L=!1,N=Oh(),B=!1,W=null}function xo($,Q,ie,ve){var be=function(P,F,H){vn(Q,P,F,H),Di(H)},qe={},ye=$[As];ye&&ye.forEach(function(P,F){qe[F]=P}),be($.status,qe,ie||Ls)}function Pn($,Q,ie){var ve=ks($);vn(Q,$.status,Nc($,!0),ve),Di(ve)}function vn($,Q,ie,ve){try{$(Q,ie,ve)}catch(be){se(m,2,518,Ee(be))}}function Xt($,Q,ie){var ve=$,be=200,qe=ve[Nh],ye=$.urlString+(x?xme:Ls);try{var P=Kn();if(qe){var F=!!p.getPlugin("LocalStorage"),H=[],G=[];ee(qe[Zr],function(J){if(H&&J&&J[pn]()>0)for(var te=J[ba](),ue=0;ue<te[ze];ue++)if(P.sendBeacon(ye,w.getEventBlob(te[ue])))G[Xn](J[ue]);else{H[Xn](J[Ta](ue));break}else H[Xn](J[Ta](0))}),G[ze]>0&&(qe.sentEvts=G),F||tr(H,8003,qe[zo],!0)}else be=0}catch(J){go(m,"Failed to send telemetry using sendBeacon API. Ex:"+Ee(J)),be=0}finally{vn(Q,be,{},Ls)}}function pt($){return $===2||$===3}function nt($){return D&&pt($)&&($=2),$}V.addHeader=function($,Q){v[$]=Q},V.removeHeader=function($){delete v[$]},V[Ey]=function(){return Dt()&&c[wy]()},V[Lh]=function($,Q){Ve($)&&($=0),D&&($=nt($),Q=2),j(C,$,0)&&xe(yt(),0,!1,$,Q||0)},V.isCompletelyIdle=function(){return!a&&u===0&&C[ze]===0},V[Sy]=function($){D=$},V.addBatch=function($){if($&&$[pn]()>0){if(s.isTenantKilled($[Ei]()))return!1;C[Xn]($)}return!0},V.teardown=function(){C[ze]>0&&xe(yt(),0,!0,2,2),ee(b,function($){$&&$.rm&&$.rm()}),b=[]},V.pause=function(){a=!0},V.resume=function(){a=!1,V[Lh](0,4)},V[tI]=function($,Q,ie){$&&$[pn]()>0&&(ae(Q)&&(Q=1),D&&(Q=nt(Q),ie=2),xe([$],0,!1,Q,ie||0))};function Dt(){return!a&&u<n}function yt(){var $=C;return C=[],$}function j($,Q,ie){var ve=!1;return $&&$[ze]>0&&!a&&d[Q]&&w&&(ve=Q!==0||Dt()&&(ie>0||c[wy]())),ve}function oe($){var Q={};return $&&ee($,function(ie,ve){Q[ve]={iKey:ie[Ei](),evts:ie[ba]()}}),Q}function xe($,Q,ie,ve,be){if(!(!$||$[ze]===0)){if(a){tr($,1,ve);return}ve=nt(ve);try{var qe=$,ye=ve!==0;mn(p,function(){return"HttpManager:_sendBatches"},function(P){P&&($=$.slice(0));for(var F=[],H=null,G=Go(),J=d[ve]||(ye?d[1]:d[0]),te=J&&J[nI],ue=E&&(D||pt(ve)||te===3||J._isSync&&te===2);j($,ve,Q);){var Oe=$.shift();Oe&&Oe[pn]()>0&&(s.isTenantKilled(Oe[Ei]())?F[Xn](Oe):(H=H||w[eI](Q,ie,ye,ue,be,ve),w.appendPayload(H,Oe,e)?H.overflow!==null&&($=[H.overflow][Pa]($),H.overflow=null,Qe(H,G,Go(),be),G=Go(),H=null):(Qe(H,G,Go(),be),G=Go(),$=[Oe][Pa]($),H=null)))}H&&Qe(H,G,Go(),be),$[ze]>0&&(C=$[Pa](C)),tr(F,8004,ve)},function(){return{batches:oe(qe),retryCount:Q,isTeardown:ie,isSynchronous:ye,sendReason:be,useSendBeacon:pt(ve),sendType:ve}},!ye)}catch(P){se(m,2,48,"Unexpected Exception sending batch: "+Ee(P))}}}function le($,Q){var ie={url:i,hdrs:{},useHdrs:!1};Q?(ie[Md]=Fd(ie[Md],v),ie.useHdrs=br(ie.hdrs)[ze]>0):Ie(v,function(P,F){MA[P]?Uh(ie,MA[P],F,!1):(ie[Md][P]=F,ie[zD]=!0)}),Uh(ie,CA,"NO_AUTH",Q),Uh(ie,HD,bh,Q);var ve=Ls;ee($.apiKeys,function(P){ve[ze]>0&&(ve+=","),ve+=P}),Uh(ie,jD,ve,Q),Uh(ie,WD,xn().toString(),Q);var be=Ur($);if(gr(be)&&(ie.url+="&ext.intweb.msfpc="+be),c[YD]()&&Uh(ie,BD,c[qD](),Q),p[Ah]){var qe=p[Ah]();qe>=0&&(ie.url+="&w="+qe)}for(var ye=0;ye<h[ze];ye++)ie.url+="&"+h[ye].name+"="+h[ye].value;return ie}function De($,Q,ie){$[Q]=$[Q]||{},$[Q][f.identifier]=ie}function Qe($,Q,ie,ve){if($&&$.payloadBlob&&$.payloadBlob[ze]>0){var be=!!I,qe=d[$.sendType];!pt($[zo])&&$[NA]&&$.sendReason===2&&(qe=d[2]||d[3]||qe);var ye=_;($.isBeacon||qe[nI]===3)&&(ye=!1);var P=le($,ye);ye=ye||P[zD];var F=Go();mn(p,function(){return"HttpManager:_doPayloadSend"},function(){for(var H=0;H<$.batches[ze];H++)for(var G=$[Zr][H],J=G[ba](),te=0;te<J[ze];te++){var ue=J[te];if(y){var Oe=ue[xy]=ue[xy]||{};De(Oe,"sendEventStart",F),De(Oe,"serializationStart",Q),De(Oe,"serializationCompleted",ie)}ue[OA]>0?ue[OA]++:ue[OA]=1}tr($[Zr],1e3+(ve||0),$[zo],!0);var Xe={data:$[kA],urlString:P.url,headers:P[Md],_thePayload:$,_sendReason:ve,timeout:A,disableXhrSync:U,disableFetchKeepAlive:k};ye&&(uI(Xe[As],hy)||(Xe[As][hy]=yA),uI(Xe[As],Rh)||(Xe[As][Rh]=$D));var Te=null;qe&&(Te=function(_o){c.firstRequestSent();var qa=function(Bs,xC){ht(Bs,xC,$,ve)},Do=$[rI]||$.isSync;try{qe.sendPOST(_o,qa,Do),T&&T(Xe,_o,Do,$[NA])}catch(Bs){go(m,"Unexpected exception sending payload. Ex:"+Ee(Bs)),vn(qa,0,{})}}),mn(p,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(Te)if($[zo]===0&&u++,be&&!$.isBeacon&&qe[nI]!==3){var _o={data:Xe.data,urlString:Xe.urlString,headers:Fd({},Xe[As]),timeout:Xe.timeout,disableXhrSync:Xe[IA],disableFetchKeepAlive:Xe[PA]},qa=!1;mn(p,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{I(_o,function(Do){qa=!0,!g&&!Do[Nh]&&(Do[Nh]=Do[Nh]||Xe[Nh],Do[oI]=Do[oI]||Xe[oI]),Te(Do)},$.isSync||$[rI])}catch{qa||Te(Xe)}})}else Te(Xe)})},function(){return{thePayload:$,serializationStart:Q,serializationCompleted:ie,sendReason:ve}},$.isSync)}$.sizeExceed&&$.sizeExceed[ze]>0&&tr($.sizeExceed,8003,$[zo]),$.failedEvts&&$.failedEvts[ze]>0&&tr($.failedEvts,8002,$[zo])}function rt($,Q){y&&ee($,function(ie){var ve=ie[xy]=ie[xy]||{};De(ve,"sendEventCompleted",Q)})}function ht($,Q,ie,ve){var be=9e3,qe=null,ye=!1,P=!1;try{var F=!0;if(typeof $!==sa){if(Q){c[yy](Q[H4]);var H=Q[$4]||Q["kill-duration-seconds"];ee(s[iI](Q[M4],H),function(J){ee(ie[Zr],function(te){if(te[Ei]()===J){qe=qe||[];var ue=te[Ta](0);ie.numEvents-=ue[pn](),qe[Xn](ue)}})})}if($==200||$==204){be=200;return}(!n6($)||ie.numEvents<=0)&&(F=!1),be=9e3+$%1e3}if(F){be=100;var G=ie.retryCnt;ie[zo]===0&&(G<r?(ye=!0,Or(function(){ie[zo]===0&&u--,xe(ie[Zr],G+1,ie[rI],D?2:ie[zo],5)},D,cI(G))):(P=!0,D&&(be=8001)))}}finally{ye||(c[yy](),wn(ie,be,ve,P)),tr(qe,8004,ie[zo])}}function wn($,Q,ie,ve){try{ve&&f[sI]();var be=$[Zr];Q===200&&(be=$.sentEvts||$[Zr],!ve&&!$.isSync&&f._clearBackOff(),Wn(be)),tr(be,Q,$[zo],!0)}finally{$[zo]===0&&(u--,ie!==5&&V.sendQueuedRequests($[zo],ie))}}function Wn($){if(y){var Q=Go();ee($,function(ie){ie&&ie[pn]()>0&&rt(ie[ba](),Q)})}}function Or($,Q,ie){Q?$():N.set($,ie)}function Ur($){for(var Q=0;Q<$.batches[ze];Q++){var ie=$[Zr][Q].Msfpc();if(ie)return encodeURIComponent(ie)}return Ls}function Di($){var Q=R;try{for(var ie=0;ie<Q[ze];ie++)try{Q[ie]($)}catch(be){se(m,1,519,"Response handler failed: "+be)}if($){var ve=JSON.parse($);gr(ve.webResult)&&gr(ve.webResult[kh])&&S.set("MSFPC",ve.webResult[kh],365*86400)}}catch{}}function tr($,Q,ie,ve){if($&&$[ze]>0&&o){var be=o[Ya(Q)];if(be){var qe=ie!==0;mn(p,function(){return"HttpManager:_sendBatchesNotification"},function(){Or(function(){try{be.call(o,$,Q,qe,ie)}catch(ye){se(m,1,74,"send request notification failed: "+ye)}},ve||qe,0)},function(){return{batches:oe($),reason:Q,isSync:qe,sendSync:ve,sendType:ie}},!qe)}}}function Ya($){var Q=Dme[$];return gr(Q)||(Q=U4,$>=9e3&&$<=9999?Q=O4:$>=8e3&&$<=8999?Q=MD:$>=1e3&&$<=1999&&(Q=F4)),Q}})}return t.__ieDyn=1,t})()});function Lme(t){return t&&t.sendPOST}var bme,u6,Tme,m6,p6,Rme,f6,kme,$A,jd,d6,Mn,Nme,h6,g6=ne(()=>{Bo();pr();Od();yd();Ne();vA();aI();l6();vy();AA();FA();Fh();bme=.25,u6=500,Tme=20,m6=6,p6=2,Rme=4,f6=2,kme=1,$A=1e4,jd="eventsDiscarded",d6="",Mn=void 0,Nme=Ds({eventsLimitInMem:{isVal:bu,v:$A},immediateEventLimit:{isVal:bu,v:500},autoFlushEventsLimit:{isVal:bu,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:Lme,v:Mn},overrideInstrumentationKey:Mn,overrideEndpointUrl:Mn,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:Mn,clearTimeoutOverride:Mn,payloadPreprocessor:Mn,payloadListener:Mn,disableEventTimings:Mn,valueSanitizer:Mn,stringifyObjects:Mn,enableCompoundKey:Mn,disableOptimizeObj:!1,fetchCredentials:Mn,transports:Mn,unloadTransports:Mn,useSendBeacon:Mn,disableFetchKeepAlive:Mn,avoidOptions:!1,xhrTimeout:Mn,disableXhrSync:Mn,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:Ir,v:m6},maxUnloadEventRetryAttempts:{isVal:Ir,v:p6},addNoResponse:Mn,excludeCsMetaData:Mn});h6=(function(t){Ho(e,t);function e(){var n=t.call(this)||this;n.identifier="PostChannel",n.priority=1011,n.version="4.3.6";var r,o=!1,i=[],s,a=!1,c=0,l,u=0,f,m={},d=Ud,p,g,h,v,C,w,y,S,D,_,A,U,k,E,x,b,I,T,R,L,N,B;return Je(e,n,function(W,z){nt(),W._getDbgPlgTargets=function(){return[C,r]},W[$d]=function(P,F,H){mn(F,function(){return"PostChannel:initialize"},function(){z[$d](P,F,H),R=F.getNotifyMgr();try{x=Ci(kr(W[_y]),F.evtNamespace&&F.evtNamespace()),W._addHook(hr(P,function(G){var J=G.cfg,te=vo(null,J,F);r=te.getExtCfg(W[_y],Nme),b=Oh(r[KD],r[JD]),A=!r.disableOptimizeObj&&AD(),I=r[q4],q(F),f=r.eventsLimitInMem,l=r.immediateEventLimit,y=r[LA],k=r.maxEventRetryAttempts,E=r.maxUnloadEventRetryAttempts,T=r[G4],fo(J.endpointUrl)?W.pause():a&&W.resume(),ye(),N=r[z4],B=!!r.disableTelemetry,L&&V();var ue=J.disablePageUnloadEvents||[];L=cy(mt,ue,x),L=Dh(mt,ue,x)||L,L=Ih($t,J.disablePageShowEvents,x)||L})),C[$d](P,W.core,W)}catch(G){throw W.setInitialized(!1),G}},function(){return{theConfig:P,core:F,extensions:H}})},W.processTelemetry=function(P,F){py(P,W[_y]),F=F||W._getTelCtx(F);var H=P;!B&&!o&&(N&&(H[Ei]=N),Pn(H,!0),U?j(2,2):pt()),W.processNext(H,F)},W.getOfflineSupport=function(){try{var P=C&&C[QD]();if(C)return{getUrl:function(){return P?P.url:null},serialize:Be,batch:ce,shouldProcess:function(F){return!B},createPayload:function(F){return null},createOneDSPayload:function(F){if(C[Cy])return C[Cy](F,A)}}}catch{}return null},W._doTeardown=function(P,F){j(2,2),o=!0,C.teardown(),V(),nt()};function V(){ly(null,x),uy(null,x),fy(null,x)}function q(P){var F=P[Ah];P[Ah]=function(){var H=0;return I&&(H=H|2),H|F.call(P)}}function ce(P){var F=d6;return P&&P[ze]&&ee(P,function(H){F&&(F+=`
`),F+=H}),F}function Be(P){var F=d6;try{xo(P),F=C[ZD](P)}catch{}return F}function mt(P){var F=P||On().event;F.type!=="beforeunload"&&(U=!0,C[Sy](U)),j(2,2)}function $t(P){U=!1,C[Sy](U)}function xo(P){P.ext&&P.ext[xA]&&delete P.ext[xA],P.ext&&P.ext[VD]&&P.ext[VD].id&&delete P.ext[VD].id,A&&(P.ext=qo(P.ext),P.baseData&&(P.baseData=qo(P.baseData)),P.data&&(P.data=qo(P.data)))}function Pn(P,F){if(P[Dy]||(P[Dy]=0),P[Tu]||(P[Tu]=1),xo(P),P[Hd]){if(h||a)P[Tu]=3,P[Hd]=!1;else if(C){A&&(P=qo(P)),C[tI](Ru.create(P[Ei],[P]),P[Hd]===!0?1:P[Hd],3);return}}var H=P[Tu],G=u,J=f;H===4&&(G=c,J=l);var te=!1;if(G<J)te=!De(P,F);else{var ue=1,Oe=Tme;H===4&&(ue=4,Oe=1),te=!0,Qe(P[Ei],P[Tu],ue,Oe)&&(te=!De(P,F))}te&&Ya(jd,[P],Ps.QueueFull)}W.setEventQueueLimits=function(P,F){r.eventsLimitInMem=f=bu(P)?P:$A,r[LA]=y=bu(F)?F:0,ye();var H=u>P;if(!H&&S>0)for(var G=1;!H&&G<=3;G++){var J=w[G];J&&J[Zr]&&ee(J[Zr],function(te){te&&te[pn]()>=S&&(H=!0)})}le(!0,H)},W.pause=function(){yt(),a=!0,C&&C.pause()},W.resume=function(){a=!1,C&&C.resume(),pt()},W._loadTransmitProfiles=function(P){Or(),Ie(P,function(F,H){var G=H[ze];if(G>=2){var J=G>2?H[2]:0;if(H.splice(0,G-2),H[1]<0&&(H[0]=-1),H[1]>0&&H[0]>0){var te=H[0]/H[1];H[0]=_G(te)*H[1]}J>=0&&H[1]>=0&&J>H[1]&&(J=H[1]),H[Xn](J),m[F]=H}})},W.flush=function(P,F,H){P===void 0&&(P=!0);var G;if(!a)if(H=H||1,P)F||(G=zi(function(te){F=te})),s==null?(yt(),ht(1,0,H),s=Dt(function(){s=null,wn(F,H)},0)):i[Xn](F);else{var J=yt();vn(1,1,H),F&&F(),J&&pt()}return G},W.setMsaAuthTicket=function(P){C.addHeader(gy,P)},W.setAuthPluginHeader=function(P){C.addHeader(EA,P)},W.removeAuthPluginHeader=function(){C.removeHeader(EA)},W.hasEvents=Xt,W._setTransmitProfile=function(P){d!==P&&m[P]!==void 0&&(yt(),d=P,pt())},yi(W,function(){return C},["addResponseHandler"]);function vn(P,F,H){var G=ht(P,F,H);return C[Lh](F,H),G}function Xt(){return u>0}function pt(){if(D>=0&&ht(D,0,_)&&C[Lh](0,_),c>0&&!g&&!a){var P=m[d][2];P>=0&&(g=Dt(function(){g=null,vn(4,0,1),pt()},P))}var F=m[d][1];!p&&!s&&F>=0&&!a&&(Xt()?p=Dt(function(){p=null,vn(v===0?3:1,0,1),v++,v%=2,pt()},F):v=0)}W[sI]=function(){h<Rme&&(h++,yt(),pt())},W._clearBackOff=function(){h&&(h=0,yt(),pt())};function nt(){r=null,o=!1,i=[],s=null,a=!1,c=0,l=500,u=0,f=$A,m={},d=Ud,p=null,g=null,h=0,v=0,w={},y=0,L=!1,S=0,D=-1,_=null,A=!0,U=!1,k=m6,E=p6,x=null,N=null,B=!1,b=Oh(),C=new c6(u6,f6,kme,{requeue:Di,send:Q,sent:ie,drop:ve,rspFail:be,oth:qe}),Ur(),oe(),ye()}function Dt(P,F){F===0&&h&&(F=1);var H=1e3;return h&&(H=cI(h-1)),b.set(P,F*H)}function yt(){return p!==null?(p.cancel(),p=null,v=0,!0):!1}function j(P,F){yt(),s&&(s.cancel(),s=null),a||vn(1,P,F)}function oe(){w[4]={batches:[],iKeyMap:{}},w[3]={batches:[],iKeyMap:{}},w[2]={batches:[],iKeyMap:{}},w[1]={batches:[],iKeyMap:{}}}function xe(P,F,H){var G=w[F];G||(F=1,G=w[F]);var J=G.iKeyMap[P];return!J&&H&&(J=Ru.create(P),G.batches[Xn](J),G.iKeyMap[P]=J),J}function le(P,F){C[Ey]()&&!h&&(y>0&&u>y&&(F=!0),F&&s==null&&W.flush(P,function(){},20))}function De(P,F){A&&(P=qo(P));var H=P[Tu],G=xe(P[Ei],H,!0);return G.addEvent(P)?(H!==4?(u++,F&&P[Dy]===0&&le(!P.sync,S>0&&G[pn]()>=S)):c++,!0):!1}function Qe(P,F,H,G){for(;H<=F;){var J=xe(P,F,!0);if(J&&J[pn]()>0){var te=J[Ta](0,G),ue=te[pn]();if(ue>0)return H===4?c-=ue:u-=ue,$(jd,[te],Ps.QueueFull),!0}H++}return rt(),!1}function rt(){for(var P=0,F=0,H=function(J){var te=w[J];te&&te[Zr]&&ee(te[Zr],function(ue){J===4?P+=ue[pn]():F+=ue[pn]()})},G=1;G<=4;G++)H(G);u=F,c=P}function ht(P,F,H){var G=!1,J=F===0;return!J||C[Ey]()?mn(W.core,function(){return"PostChannel._queueBatches"},function(){for(var te=[],ue=4;ue>=P;){var Oe=w[ue];Oe&&Oe.batches&&Oe.batches[ze]>0&&(ee(Oe[Zr],function(Xe){C.addBatch(Xe)?G=G||Xe&&Xe[pn]()>0:te=te[Pa](Xe[ba]()),ue===4?c-=Xe[pn]():u-=Xe[pn]()}),Oe[Zr]=[],Oe.iKeyMap={}),ue--}te[ze]>0&&Ya(jd,te,Ps.KillSwitch),G&&D>=P&&(D=-1,_=0)},function(){return{latency:P,sendType:F,sendReason:H}},!J):(D=D>=0?su(D,P):P,_=la(_,H)),G}function wn(P,F){vn(1,0,F),rt(),Wn(function(){P&&P(),i[ze]>0?s=Dt(function(){s=null,wn(i.shift(),F)},0):(s=null,pt())})}function Wn(P){C.isCompletelyIdle()?P():s=Dt(function(){s=null,Wn(P)},bme)}function Or(){yt(),Ur(),d=Ud,pt()}function Ur(){m={},m[Ud]=[2,1,0],m[OD]=[6,3,0],m[UD]=[18,9,0]}function Di(P,F){var H=[],G=k;U&&(G=E),ee(P,function(J){J&&J[pn]()>0&&ee(J[ba](),function(te){te&&(te[Hd]&&(te[Tu]=4,te[Hd]=!1),te[Dy]<G?(py(te,W[_y]),Pn(te,!1)):H[Xn](te))})}),H[ze]>0&&Ya(jd,H,Ps.NonRetryableStatus),U&&j(2,2)}function tr(P,F){var H=R||{},G=H[P];if(G)try{G.apply(H,F)}catch(J){se(W.diagLog(),1,74,P+" notification failed: "+J)}}function Ya(P,F){for(var H=[],G=2;G<arguments.length;G++)H[G-2]=arguments[G];F&&F[ze]>0&&tr(P,[F][Pa](H))}function $(P,F){for(var H=[],G=2;G<arguments.length;G++)H[G-2]=arguments[G];F&&F[ze]>0&&ee(F,function(J){J&&J[pn]()>0&&tr(P,[J.events()][Pa](H))})}function Q(P,F,H){P&&P[ze]>0&&tr("eventsSendRequest",[F>=1e3&&F<=1999?F-1e3:0,H!==!0])}function ie(P,F){$("eventsSent",P,F),pt()}function ve(P,F){$(jd,P,F>=8e3&&F<=8999?F-8e3:Ps.Unknown)}function be(P){$(jd,P,Ps.NonRetryableStatus),pt()}function qe(P,F){$(jd,P,Ps.Unknown),pt()}function ye(){T?S=0:S=la(u6*(f6+1),f/6)}}),n}return e.__ieDyn=1,e})(Hc)});var v6={};PC(v6,{BE_PROFILE:()=>UD,NRT_PROFILE:()=>OD,PostChannel:()=>h6,RT_PROFILE:()=>Ud});var w6=ne(()=>{vA();g6()});var Iy,Py,fI,Vd,Ra,Qr,Fs=ne(()=>{Iy="sampleRate",Py="ProcessLegacy",fI="http.method",Vd="https://dc.services.visualstudio.com",Ra="/v2/track",Qr="not_specified"});var dI,C6=ne(()=>{Ot();dI=VN({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]})});var Yd,$e,qd,ku,Nu,HA,Mh,E6,by,Ty,Gd,eo,Nr,to,Ry,ky,$h,zd,mI,Kd,Ny,Ly,ka,Jd,Hh,Xd,wo=ne(()=>{Yd="split",$e="length",qd="toLowerCase",ku="ingestionendpoint",Nu="toString",HA="removeItem",Mh="message",E6="count",by="stringify",Ty="pathname",Gd="match",eo="name",Nr="properties",to="measurements",Ry="sizeInBytes",ky="typeName",$h="exceptions",zd="severityLevel",mI="problemGroup",Kd="parsedStack",Ny="hasFullStack",Ly="assembly",ka="fileName",Jd="line",Hh="aiDataContract",Xd="duration"});function BA(t,e,n){var r=e[$e],o=S6(t,e);if(o[$e]!==r){for(var i=0,s=o;n[s]!==void 0;)i++,s=zn(o,0,147)+x6(i);o=s}return o}function S6(t,e){var n;return e&&(e=tt(Sn(e)),e[$e]>150&&(n=zn(e,0,150),se(t,2,57,"name is too long.  It has been truncated to 150 characters.",{name:e},!0))),n||e}function Nt(t,e,n){n===void 0&&(n=1024);var r;return e&&(n=n||1024,e=tt(Sn(e)),e[$e]>n&&(r=zn(e,0,n),se(t,2,61,"string value is too long. It has been truncated to "+n+" characters.",{value:e},!0))),r||e}function Zd(t,e){return VA(t,e,2048,66)}function Ay(t,e){var n;return e&&e[$e]>32768&&(n=zn(e,0,32768),se(t,2,56,"message is too long, it has been truncated to 32768 characters.",{message:e},!0)),n||e}function WA(t,e){var n;if(e){var r=""+e;r[$e]>32768&&(n=zn(r,0,32768),se(t,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:e},!0))}return n||e}function yo(t,e){if(e){var n={};Ie(e,function(r,o){if(tn(o)&&ya())try{o=Rr()[by](o)}catch(i){se(t,2,49,"custom property is not valid",{exception:i},!0)}o=Nt(t,o,8192),r=BA(t,r,n),n[r]=o}),e=n}return e}function Co(t,e){if(e){var n={};Ie(e,function(r,o){r=BA(t,r,n),n[r]=o}),e=n}return e}function jA(t,e){return e&&VA(t,e,128,69)[Nu]()}function VA(t,e,n,r){var o;return e&&(e=tt(Sn(e)),e[$e]>n&&(o=zn(e,0,n),se(t,2,r,"input is too long, it has been truncated to "+n+" characters.",{data:e},!0))),o||e}function x6(t){var e="00"+t;return ua(e,e[$e]-3)}var Os=ne(()=>{Ot();Ne();wo()});function I6(t){var e=D6,n=Fme,r=n[e];return _6.createElement?n[e]||(r=n[e]=_6.createElement("a")):r={host:Ome(t,!0)},r.href=t,e++,e>=n[$e]&&(e=0),D6=e,r}function Ome(t,e){var n=P6(t,e)||"";if(n){var r=n[Gd](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(r!=null&&r[$e]>3&&ke(r[2])&&r[2][$e]>0)return r[2]+(r[3]||"")}return n}function P6(t,e){var n=null;if(t){var r=t[Gd](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(r!=null&&r[$e]>2&&ke(r[2])&&r[2][$e]>0&&(n=r[2]||"",e&&r[$e]>2)){var o=(r[1]||"")[qd](),i=r[3]||"";(o==="http"&&i===":80"||o==="https"&&i===":443")&&(i=""),n+=i}}return n}var _6,D6,Fme,b6=ne(()=>{Ot();wo();_6=Fn()||{},D6=0,Fme=[null,null,null,null,null]});function pI(t){return wt(Ume,t[qd]())!==-1}function T6(t,e,n,r){var o,i=r,s=r;if(e&&e[$e]>0){var a=I6(e);if(o=a.host,!i)if(a[Ty]!=null){var c=a.pathname[$e]===0?"/":a[Ty];c.charAt(0)!=="/"&&(c="/"+c),s=a[Ty],i=Nt(t,n?n+" "+c:c)}else i=Nt(t,e)}else o=r,i=r;return{target:o,name:i,data:s}}var Ume,YA=ne(()=>{Ot();Fs();Os();b6();wo();Ume=[Vd+Ra,"https://breeze.aimon.applicationinsights.io"+Ra,"https://dc-int.services.visualstudio.com"+Ra]});var hI,uFe,fFe,R6=ne(()=>{Ot();hI=fn({LocalStorage:0,SessionStorage:1}),uFe=fn({AI:0,AI_AND_W3C:1,W3C:2}),fFe=fn({Normal:1,Critical:2})});function N6(t){try{if(ae(po()))return null;var e=new Date()[Nu](),n=vt(t===hI.LocalStorage?"localStorage":"sessionStorage"),r=k6+e;n.setItem(r,e);var o=n.getItem(r)!==e;if(n[HA](r),!o)return n}catch{}return null}function qA(){return gI()?N6(hI.SessionStorage):null}function GA(t){k6=t||""}function gI(t){return(t||Bh===void 0)&&(Bh=!!N6(hI.SessionStorage)),Bh}function zA(t,e){var n=qA();if(n!==null)try{return n.getItem(e)}catch(r){Bh=!1,se(t,2,2,"Browser failed read of session storage. "+nn(r),{exception:Ee(r)})}return null}function KA(t,e,n){var r=qA();if(r!==null)try{return r.setItem(e,n),!0}catch(o){Bh=!1,se(t,2,4,"Browser failed write to session storage. "+nn(o),{exception:Ee(o)})}return!1}function JA(t,e){var n=qA();if(n!==null)try{return n[HA](e),!0}catch(r){Bh=!1,se(t,2,6,"Browser failed removal of session storage item. "+nn(r),{exception:Ee(r)})}return!1}var Bh,k6,L6=ne(()=>{Ot();R6();wo();Bh=void 0,k6=""});function Fy(t){if(!t)return{};var e=t[Yd](Mme),n=xw(e,function(o,i){var s=i[Yd]($me);if(s[$e]===2){var a=s[0][qd](),c=s[1];o[a]=c}return o},{});if(br(n)[$e]>0){if(n.endpointsuffix){var r=n.location?n.location+".":"";n[ku]=n[ku]||"https://"+r+"dc."+n.endpointsuffix}n[ku]=n[ku]||Vd,fd(n[ku],"/")&&(n[ku]=n[ku].slice(0,-1))}return n}var Mme,$me,A6=ne(()=>{Ot();Fs();wo();Mme=";",$me="="});var XA,F6=ne(()=>{Ot();Fs();wo();Os();XA=(function(){function t(e,n,r){var o=this,i=this;i.ver=1,i.sampleRate=100,i.tags={},i[eo]=Nt(e,r)||Qr,i.data=n,i.time=Rs(new Date),i[Hh]={time:1,iKey:1,name:1,sampleRate:function(){return o.sampleRate===100?4:1},tags:1,data:1}}return t})()});var Yc,O6=ne(()=>{Fs();wo();Os();Yc=(function(){function t(e,n,r,o){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var i=this;i.ver=2,i[eo]=Nt(e,n)||Qr,i[Nr]=yo(e,r),i[to]=Co(e,o)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Event",t.dataType="EventData",t})()});function zme(t){return t.replace(/(\(anonymous\))/,"<anonymous>")}function Kme(t){return Vi(t,"[native")<0}function tF(t,e){var n=t;return n&&!ke(n)&&(JSON&&JSON[by]?(n=JSON[by](t),e&&(!n||n==="{}")&&(Re(t[Nu])?n=t[Nu]():n=""+t)):n=""+t+" - (Missing JSON.stringify)"),n||""}function j6(t,e){var n=t;return t&&(n&&!ke(n)&&(n=t[eF]||t[W6]||n),n&&!ke(n)&&(n=tF(n,!0)),t.filename&&(n=n+" @"+(t.filename||"")+":"+(t.lineno||"?")+":"+(t.colno||"?"))),e&&e!=="String"&&e!=="Object"&&e!=="Error"&&Vi(n||"",e)===-1&&(n=e+": "+n),n||""}function Jme(t){try{if(tn(t))return"hasFullStack"in t&&"typeName"in t}catch{}return!1}function Xme(t){try{if(tn(t))return"ver"in t&&"exceptions"in t&&"properties"in t}catch{}return!1}function H6(t){return t&&t.src&&ke(t.src)&&t.obj&&we(t.obj)}function Qd(t){var e=t||"";ke(e)||(ke(e[Zi])?e=e[Zi]:e=""+e);var n=e[Yd](`
`);return{src:e,obj:n}}function Zme(t){for(var e=[],n=t[Yd](`
`),r=0;r<n[$e];r++){var o=n[r];n[r+1]&&(o+="@"+n[r+1],r++),e.push(o)}return{src:t,obj:e}}function V6(t){var e=null;if(t)try{if(t[Zi])e=Qd(t[Zi]);else if(t[Wh]&&t[Wh][Zi])e=Qd(t[Wh][Zi]);else if(t.exception&&t.exception[Zi])e=Qd(t.exception[Zi]);else if(H6(t))e=t;else if(H6(t[QA]))e=t[QA];else if(On()&&On().opera&&t[eF])e=Zme(t[Mh]);else if(t.reason&&t.reason[Zi])e=Qd(t.reason[Zi]);else if(ke(t))e=Qd(t);else{var n=t[eF]||t[W6]||"";ke(t[M6])&&(n&&(n+=`
`),n+=" from "+t[M6]),n&&(e=Qd(n))}}catch(r){e=Qd(r)}return e||{src:"",obj:null}}function Qme(t){var e="";return t&&(t.obj?e=t.obj.join(`
`):e=t.src||""),e}function epe(t){var e,n=t.obj;if(n&&n[$e]>0){e=[];var r=0,o=!1,i=0;ee(n,function(g){if(o||ope(g)){var h=Sn(g);o=!0;var v=ipe(h,r);v&&(i+=v[Ry],e.push(v),r++)}});var s=32*1024;if(i>s)for(var a=0,c=e[$e]-1,l=0,u=a,f=c;a<c;){var m=e[a][Ry],d=e[c][Ry];if(l+=m+d,l>s){var p=f-u+1;e.splice(u,p);break}u=a,f=c,a++,c--}}return e}function vI(t){var e="";if(t&&(e=t.typeName||t[eo]||"",!e))try{var n=/function (.{1,200})\(/,r=n.exec(t.constructor[Nu]());e=r&&r[$e]>1?r[1]:""}catch{}return e}function ZA(t){if(t)try{if(!ke(t)){var e=vI(t),n=tF(t,!1);return(!n||n==="{}")&&(t[Wh]&&(t=t[Wh],e=vI(t)),n=tF(t,!0)),Vi(n,e)!==0&&e!=="String"?e+":"+n:n}}catch{}return""+(t||"")}function npe(){var t=this,e=we(t[Kd])&&xc(t[Kd],function(r){return ape(r)}),n={id:t.id,outerId:t.outerId,typeName:t[ky],message:t[Mh],hasFullStack:t[Ny],stack:t[Zi],parsedStack:e||void 0};return n}function Y6(t,e,n){var r,o,i,s,a,c,l,u;if(Jme(e))s=e[ky],a=e[Mh],l=e[Zi],u=e[Kd]||[],c=e[Ny];else{var f=e,m=f&&f.evt;ad(f)||(f=f[Wh]||m||f),s=Nt(t,vI(f))||Qr,a=Ay(t,j6(e||f,s))||Qr;var d=e[QA]||V6(e);u=epe(d),we(u)&&xc(u,function(p){p[Ly]=Nt(t,p[Ly]),p[ka]=Nt(t,p[ka])}),l=WA(t,Qme(d)),c=we(u)&&u[$e]>0,n&&(n[ky]=n[ky]||s)}return r={},r[Hh]=tpe,r.id=o,r.outerId=i,r.typeName=s,r.message=a,r[Ny]=c,r.stack=l,r.parsedStack=u,r.toInterface=npe,r}function rpe(t,e){var n=we(e[Kd])&&xc(e[Kd],function(o){return spe(o)})||e[Kd],r=Y6(t,Yi(Yi({},e),{parsedStack:n}));return r}function q6(t,e){var n=e[Gd](qme);if(n&&n[$e]>=4)t[ka]=n[1],t[Jd]=parseInt(n[2]);else{var r=e[Gd](Gme);r&&r[$e]>=3?(t[ka]=r[1],t[Jd]=parseInt(r[2])):t[ka]=e}}function B6(t,e,n){var r=t[ka];e.fn&&n&&n[$e]>e.fn&&(e.ln&&n[$e]>e.ln?(r=tt(n[e.fn]||""),t[Jd]=parseInt(tt(n[e.ln]||""))||0):r=tt(n[e.fn]||"")),r&&q6(t,r)}function ope(t){var e=!1;if(t&&ke(t)){var n=tt(t);n&&(e=Bme.test(n))}return e}function ipe(t,e){var n,r;if(t&&ke(t)&&tt(t)){r=(n={},n[Hh]=G6,n.level=e,n.assembly=tt(t),n.method=U6,n.fileName="",n.line=0,n.sizeInBytes=0,n);for(var o=0;o<$6[$e];){var i=$6[o];if(i.chk&&!i.chk(t))break;i.pre&&(t=i.pre(t));var s=t[Gd](i.re);if(s&&s[$e]>=i.len){i.m&&(r.method=tt(s[i.m]||U6)),i.hdl?i.hdl(r,i,s):i.fn&&(i.ln?(r[ka]=tt(s[i.fn]||""),r[Jd]=parseInt(tt(s[i.ln]||""))||0):q6(r,s[i.fn]||""));break}o++}}return z6(r)}function spe(t){var e,n=(e={},e[Hh]=G6,e.level=t.level,e.method=t.method,e.assembly=t[Ly],e.fileName=t[ka],e.line=t[Jd],e.sizeInBytes=0,e);return z6(n)}function z6(t){var e=Hme;return t&&(e+=t.method[$e],e+=t.assembly[$e],e+=t.fileName[$e],e+=t.level.toString()[$e],e+=t.line.toString()[$e],t[Ry]=e),t}function ape(t){return{level:t.level,method:t.method,assembly:t[Ly],fileName:t[ka],line:t[Jd]}}var Hme,Bme,Wme,jme,Vme,Yme,qme,Gme,U6,Wh,Zi,QA,M6,eF,W6,$6,em,tpe,G6,K6=ne(()=>{Bo();Ot();Ne();Fs();wo();Os();Hme=58,Bme=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Wme=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,jme=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,Vme=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,Yme=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,qme=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,Gme=/([^\(\s\n]+):([0-9]+)$/,U6="<no_method>",Wh="error",Zi="stack",QA="stackDetails",M6="errorSrc",eF="message",W6="description",$6=[{re:Wme,len:5,m:1,fn:2,ln:3,col:4},{chk:Kme,pre:zme,re:jme,len:4,m:1,fn:2,ln:3},{re:Vme,len:3,m:1,fn:2,hdl:B6},{re:Yme,len:2,fn:1,hdl:B6}];em=(function(){function t(e,n,r,o,i,s){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var a=this;a.ver=2,Xme(n)?(a[$h]=n[$h]||[],a[Nr]=n[Nr],a[to]=n[to],n[zd]&&(a[zd]=n[zd]),n.id&&(a.id=n.id,n[Nr].id=n.id),n[mI]&&(a[mI]=n[mI]),ae(n.isManual)||(a.isManual=n.isManual)):(r||(r={}),s&&(r.id=s),a[$h]=[Y6(e,n,r)],a[Nr]=yo(e,r),a[to]=Co(e,o),i&&(a[zd]=i),s&&(a.id=s))}return t.CreateAutoException=function(e,n,r,o,i,s,a,c){var l=vI(i||s||e);return{message:j6(e,l),url:n,lineNumber:r,columnNumber:o,error:ZA(i||s||e),evt:ZA(s||e),typeName:l,stackDetails:V6(a||i||s),errorSrc:c}},t.CreateFromInterface=function(e,n,r,o){var i=n[$h]&&xc(n[$h],function(a){return rpe(e,a)}),s=new t(e,Yi(Yi({},n),{exceptions:i}),r,o);return s},t.prototype.toInterface=function(){var e=this,n=e.exceptions,r=e.properties,o=e.measurements,i=e.severityLevel,s=e.problemGroup,a=e.id,c=e.isManual,l=n instanceof Array&&xc(n,function(u){return u.toInterface()})||void 0;return{ver:"4.0",exceptions:l,severityLevel:i,properties:r,measurements:o,problemGroup:s,id:a,isManual:c}},t.CreateSimpleException=function(e,n,r,o,i,s){var a;return{exceptions:[(a={},a[Ny]=!0,a.message=e,a.stack=i,a.typeName=n,a)]}},t.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",t.dataType="ExceptionData",t.formatError=ZA,t})(),tpe=mo({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});G6=mo({level:1,method:1,assembly:0,fileName:0,line:0})});var J6,X6=ne(()=>{J6=(function(){function t(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return t})()});var qc,Z6=ne(()=>{Fs();wo();X6();Os();qc=(function(){function t(e,n,r,o,i,s,a,c,l){this.aiDataContract={ver:1,metrics:1,properties:0};var u=this;u.ver=2;var f=new J6;f[E6]=o>0?o:void 0,f.max=isNaN(s)||s===null?void 0:s,f.min=isNaN(i)||i===null?void 0:i,f[eo]=Nt(e,n)||Qr,f.value=r,f.stdDev=isNaN(a)||a===null?void 0:a,u.metrics=[f],u[Nr]=yo(e,c),u[to]=Co(e,l)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",t.dataType="MetricData",t})()});function wI(t){(isNaN(t)||t<0)&&(t=0),t=PG(t);var e=Oy+t%1e3,n=Oy+ji(t/1e3)%60,r=Oy+ji(t/(1e3*60))%60,o=Oy+ji(t/(1e3*60*60))%24,i=ji(t/(1e3*60*60*24));return e=e[$e]===1?"00"+e:e[$e]===2?"0"+e:e,n=n[$e]<2?"0"+n:n,r=r[$e]<2?"0"+r:r,o=o[$e]<2?"0"+o:o,(i>0?i+".":Oy)+o+":"+r+":"+n+"."+e}var Oy,nF=ne(()=>{Ne();wo();Oy=""});var tm,Q6=ne(()=>{Fs();nF();wo();Os();tm=(function(){function t(e,n,r,o,i,s,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var c=this;c.ver=2,c.id=jA(e,a),c.url=Zd(e,r),c[eo]=Nt(e,n)||Qr,isNaN(o)||(c[Xd]=wI(o)),c[Nr]=yo(e,i),c[to]=Co(e,s)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",t.dataType="PageviewData",t})()});var nm,eK=ne(()=>{nF();YA();wo();Os();nm=(function(){function t(e,n,r,o,i,s,a,c,l,u,f,m){l===void 0&&(l="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var d=this;d.ver=2,d.id=n,d[Xd]=wI(i),d.success=s,d.resultCode=a+"",d.type=Nt(e,l);var p=T6(e,r,c,o);d.data=Zd(e,o)||p.data,d.target=Nt(e,p.target),u&&(d.target="".concat(d.target," | ").concat(u)),d[eo]=Nt(e,p[eo]),d[Nr]=yo(e,f),d[to]=Co(e,m)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",t.dataType="RemoteDependencyData",t})()});var rm,tK=ne(()=>{Fs();wo();Os();rm=(function(){function t(e,n,r,o,i){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var s=this;s.ver=2,n=n||Qr,s[Mh]=Ay(e,n),s[Nr]=yo(e,o),s[to]=Co(e,i),r&&(s[zd]=r)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Message",t.dataType="MessageData",t})()});var om,nK=ne(()=>{Fs();wo();Os();om=(function(){function t(e,n,r,o,i,s,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var c=this;c.ver=2,c.url=Zd(e,r),c[eo]=Nt(e,n)||Qr,c[Nr]=yo(e,i),c[to]=Co(e,s),a&&(c.domProcessing=a.domProcessing,c[Xd]=a[Xd],c.networkConnect=a.networkConnect,c.perfTotal=a.perfTotal,c.receivedResponse=a.receivedResponse,c.sentRequest=a.sentRequest)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",t.dataType="PageviewPerformanceData",t})()});var Gc,rK=ne(()=>{Gc=(function(){function t(e,n){this.aiDataContract={baseType:1,baseData:1},this.baseType=e,this.baseData=n}return t})()});var rF,oK=ne(()=>{Ot();rF=fn({Verbose:0,Information:1,Warning:2,Error:3,Critical:4})});function Au(t){var e="ai."+t+".";return function(n){return e+n}}var Uy,Zn,yI,jh,oF,Lu,im,My,$y,iF=ne(()=>{Bo();Ot();Uy=Au("application"),Zn=Au("device"),yI=Au("location"),jh=Au("operation"),oF=Au("session"),Lu=Au("user"),im=Au("cloud"),My=Au("internal"),$y=(function(t){Ho(e,t);function e(){return t.call(this)||this}return e})(iL({applicationVersion:Uy("ver"),applicationBuild:Uy("build"),applicationTypeId:Uy("typeId"),applicationId:Uy("applicationId"),applicationLayer:Uy("layer"),deviceId:Zn("id"),deviceIp:Zn("ip"),deviceLanguage:Zn("language"),deviceLocale:Zn("locale"),deviceModel:Zn("model"),deviceFriendlyName:Zn("friendlyName"),deviceNetwork:Zn("network"),deviceNetworkName:Zn("networkName"),deviceOEMName:Zn("oemName"),deviceOS:Zn("os"),deviceOSVersion:Zn("osVersion"),deviceRoleInstance:Zn("roleInstance"),deviceRoleName:Zn("roleName"),deviceScreenResolution:Zn("screenResolution"),deviceType:Zn("type"),deviceMachineName:Zn("machineName"),deviceVMName:Zn("vmName"),deviceBrowser:Zn("browser"),deviceBrowserVersion:Zn("browserVersion"),locationIp:yI("ip"),locationCountry:yI("country"),locationProvince:yI("province"),locationCity:yI("city"),operationId:jh("id"),operationName:jh("name"),operationParentId:jh("parentId"),operationRootId:jh("rootId"),operationSyntheticSource:jh("syntheticSource"),operationCorrelationVector:jh("correlationVector"),sessionId:oF("id"),sessionIsFirst:oF("isFirst"),sessionIsNew:oF("isNew"),userAccountAcquisitionDate:Lu("accountAcquisitionDate"),userAccountId:Lu("accountId"),userAgent:Lu("userAgent"),userId:Lu("id"),userStoreRegion:Lu("storeRegion"),userAuthUserId:Lu("authUserId"),userAnonymousUserAcquisitionDate:Lu("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Lu("authUserAcquisitionDate"),cloudName:im("name"),cloudRole:im("role"),cloudRoleVer:im("roleVer"),cloudRoleInstance:im("roleInstance"),cloudEnvironment:im("environment"),cloudLocation:im("location"),cloudDeploymentUnit:im("deploymentUnit"),internalNodeName:My("nodeName"),internalSdkVersion:My("sdkVersion"),internalAgentVersion:My("agentVersion"),internalSnippet:My("snippet"),internalSdkSrc:My("sdkSrc")}))});var $n,iK=ne(()=>{iF();$n=new $y});function sK(t,e){Wc(t,null,null,e)}function sF(t){var e=Fn(),n=Kn(),r=!1,o=[],i=1;n&&!ae(n.onLine)&&!n.onLine&&(i=2);var s=0,a=m(),c=Ci(kr("OfflineListener"),t);try{if(u(On())&&(r=!0),e){var l=e.body||e;l.ononline&&u(l)&&(r=!0)}}catch{r=!1}function u(w){var y=!1;return w&&(y=xa(w,"online",g,c),y&&xa(w,"offline",h,c)),y}function f(){return a}function m(){return!(s===2||i===2)}function d(){var w=m();a!==w&&(a=w,ee(o,function(y){var S={isOnline:a,rState:i,uState:s};try{y(S)}catch{}}))}function p(w){s=w,d()}function g(){i=1,d()}function h(){i=2,d()}function v(){var w=On();if(w&&r){if(sK(w,c),e){var y=e.body||e;Ve(y.ononline)||sK(y,c)}r=!1}}function C(w){return o.push(w),{rm:function(){var y=o.indexOf(w);if(y>-1)return o.splice(y,1)}}}return{isOnline:f,isListening:function(){return r},unload:v,addListener:C,setOnlineState:p}}var aK=ne(()=>{Ot()});var CI,zc=ne(()=>{YA();A6();C6();Fs();F6();O6();K6();Z6();Q6();eK();tK();nK();rK();oK();iF();Os();iK();L6();aK();CI="AppInsightsChannelPlugin"});var Fu,cK=ne(()=>{Fu="duration"});var Hn,EI,Ko,Na,am,Ye,Ou,Uu,Qi,Mu,Kc,Jc,Xc,es,Hy,$u,Vh,cm,By,Yh,Zc,Hu,qh,Gh,Lr,SI,zh,Kh,Jh,xI,aF,_I,DI,cF,lF,Us,uF,fF,Wy,Bu,II,jy,PI,bI,TI,Xh,lK,Wu=ne(()=>{Hn="tags",EI="deviceType",Ko="data",Na="name",am="traceID",Ye="length",Ou="stringify",Uu="measurements",Qi="dataType",Mu="envelopeType",Kc="toString",Jc="enqueue",Xc="count",es="push",Hy="emitLineDelimitedJson",$u="clear",Vh="markAsSent",cm="clearSent",By="bufferOverride",Yh="BUFFER_KEY",Zc="SENT_BUFFER_KEY",Hu="concat",qh="MAX_BUFFER_SIZE",Gh="triggerSend",Lr="diagLog",SI="initialize",zh="_sender",Kh="endpointUrl",Jh="instrumentationKey",xI="customHeaders",aF="maxBatchSizeInBytes",_I="onunloadDisableBeacon",DI="isBeaconApiDisabled",cF="alwaysUseXhrOverride",lF="enableSessionStorageBuffer",Us="_buffer",uF="onunloadDisableFetch",fF="disableSendBeaconSplit",Wy="getSenderInst",Bu="_onError",II="_onPartialSuccess",jy="_onSuccess",PI="itemsReceived",bI="itemsAccepted",TI="baseType",Xh="sampleRate",lK="getHashCodeScore"});function Dn(t,e,n){return Ki(t,e,n,xs)}function cpe(t,e,n){var r=n[Hn]=n[Hn]||{},o=e.ext=e.ext||{},i=e[Hn]=e[Hn]||[],s=o.user;s&&(Dn(r,$n.userAuthUserId,s.authId),Dn(r,$n.userId,s.id||s.localId));var a=o.app;a&&Dn(r,$n.sessionId,a.sesId);var c=o.device;c&&(Dn(r,$n.deviceId,c.id||c.localId),Dn(r,$n[EI],c.deviceClass),Dn(r,$n.deviceIp,c.ip),Dn(r,$n.deviceModel,c.model),Dn(r,$n[EI],c[EI]));var l=e.ext.web;if(l){Dn(r,$n.deviceLanguage,l.browserLang),Dn(r,$n.deviceBrowserVersion,l.browserVer),Dn(r,$n.deviceBrowser,l.browser);var u=n[Ko]=n[Ko]||{},f=u[Yt]=u[Yt]||{},m=f[vr]=f[vr]||{};Dn(m,"domain",l.domain),Dn(m,"isManual",l.isManual?uK:null),Dn(m,"screenRes",l.screenRes),Dn(m,"userConsent",l.userConsent?uK:null)}var d=o.os;d&&(Dn(r,$n.deviceOS,d[Na]),Dn(r,$n.deviceOSVersion,d.osVer));var p=o.trace;p&&(Dn(r,$n.operationParentId,p.parentID),Dn(r,$n.operationName,Nt(t,p[Na])),Dn(r,$n.operationId,p[am]));for(var g={},h=i[Ye]-1;h>=0;h--){var v=i[h];Ie(v,function(w,y){g[w]=y}),i.splice(h,1)}Ie(i,function(w,y){g[w]=y});var C=Yi(Yi({},r),g);C[$n.internalSdkVersion]||(C[$n.internalSdkVersion]=Nt(t,"javascript:".concat(lpe.Version),64)),n[Hn]=qo(C)}function ju(t,e,n){ae(t)||Ie(t,function(r,o){Ir(o)?n[r]=o:ke(o)?e[r]=o:ya()&&(e[r]=Rr()[Ou](o))})}function lm(t,e){ae(t)||Ie(t,function(n,r){t[n]=r||e})}function um(t,e,n,r){var o=new XA(t,r,e);Dn(o,"sampleRate",n[Iy]),(n[Yt]||{}).startTime&&(o.time=Rs(n[Yt].startTime)),o.iKey=n.iKey;var i=n.iKey.replace(/-/g,"");return o[Na]=o[Na].replace("{0}",i),cpe(t,n,o),n[Hn]=n[Hn]||[],qo(o)}function fm(t,e){ae(e[Yt])&&se(t,1,46,"telemetryItem.baseData cannot be null.")}function fK(t,e,n){fm(t,e);var r=e[Yt][Uu]||{},o=e[Yt][vr]||{};ju(e[Ko],o,r),ae(n)||lm(o,n);var i=e[Yt];if(ae(i))return go(t,"Invalid input for dependency data"),null;var s=i[vr]&&i[vr][fI]?i[vr][fI]:"GET",a=new nm(t,i.id,i.target,i[Na],i[Fu],i.success,i.responseCode,s,i.type,i.correlationContext,o,r),c=new Gc(nm[Qi],a);return um(t,nm[Mu],e,c)}function mF(t,e,n){fm(t,e);var r={},o={};e[dF]!==Yc[Qi]&&(r.baseTypeSource=e[dF]),e[dF]===Yc[Qi]?(r=e[Yt][vr]||{},o=e[Yt][Uu]||{}):e[Yt]&&ju(e[Yt],r,o),ju(e[Ko],r,o),ae(n)||lm(r,n);var i=e[Yt][Na],s=new Yc(t,i,r,o),a=new Gc(Yc[Qi],s);return um(t,Yc[Mu],e,a)}function dK(t,e,n){fm(t,e);var r=e[Yt][Uu]||{},o=e[Yt][vr]||{};ju(e[Ko],o,r),ae(n)||lm(o,n);var i=e[Yt],s=em.CreateFromInterface(t,i,o,r),a=new Gc(em[Qi],s);return um(t,em[Mu],e,a)}function mK(t,e,n){fm(t,e);var r=e[Yt],o=r[vr]||{},i=r[Uu]||{};ju(e[Ko],o,i),ae(n)||lm(o,n);var s=new qc(t,r[Na],r.average,r.sampleCount,r.min,r.max,r.stdDev,o,i),a=new Gc(qc[Qi],s);return um(t,qc[Mu],e,a)}function pK(t,e,n){fm(t,e);var r,o=e[Yt];!ae(o)&&!ae(o[vr])&&!ae(o[vr][Fu])?(r=o[vr][Fu],delete o[vr][Fu]):!ae(e[Ko])&&!ae(e[Ko][Fu])&&(r=e[Ko][Fu],delete e[Ko][Fu]);var i=e[Yt],s;((e.ext||{}).trace||{})[am]&&(s=e.ext.trace[am]);var a=i.id||s,c=i[Na],l=i.uri,u=i[vr]||{},f=i[Uu]||{};if(ae(i.refUri)||(u.refUri=i.refUri),ae(i.pageType)||(u.pageType=i.pageType),ae(i.isLoggedIn)||(u.isLoggedIn=i.isLoggedIn[Kc]()),!ae(i[vr])){var m=i[vr];Ie(m,function(g,h){u[g]=h})}ju(e[Ko],u,f),ae(n)||lm(u,n);var d=new tm(t,c,l,r,u,f,a),p=new Gc(tm[Qi],d);return um(t,tm[Mu],e,p)}function hK(t,e,n){fm(t,e);var r=e[Yt],o=r[Na],i=r.uri||r.url,s=r[vr]||{},a=r[Uu]||{};ju(e[Ko],s,a),ae(n)||lm(s,n);var c=new om(t,o,i,void 0,s,a,r),l=new Gc(om[Qi],c);return um(t,om[Mu],e,l)}function gK(t,e,n){fm(t,e);var r=e[Yt].message,o=e[Yt].severityLevel,i=e[Yt][vr]||{},s=e[Yt][Uu]||{};ju(e[Ko],i,s),ae(n)||lm(i,n);var a=new rm(t,r,o,i,s),c=new Gc(rm[Qi],a);return um(t,rm[Mu],e,c)}var dF,Yt,vr,uK,lpe,vK=ne(()=>{Bo();zc();Ot();cK();Wu();dF="baseType",Yt="baseData",vr="properties",uK="true";lpe={Version:"3.3.6"}});var wK,RI,upe,pF,yK=ne(()=>{Bo();pr();zc();Ot();Wu();wK=(function(){function t(e,n){var r=[],o=!1,i=n.maxRetryCnt;this._get=function(){return r},this._set=function(s){return r=s,r},Je(t,this,function(s){s[Jc]=function(a){if(s[Xc]()>=n.eventsLimitInMem){o||(se(e,2,105,"Maximum in-memory buffer size reached: "+s[Xc](),!0),o=!0);return}a.cnt=a.cnt||0,!(!ae(i)&&a.cnt>i)&&r[es](a)},s[Xc]=function(){return r[Ye]},s.size=function(){for(var a=r[Ye],c=0;c<r[Ye];c++)a+=r[c].item[Ye];return n[Hy]||(a+=2),a},s[$u]=function(){r=[],o=!1},s.getItems=function(){return r.slice(0)},s.batchPayloads=function(a){if(a&&a[Ye]>0){var c=[];ee(a,function(u){c[es](u.item)});var l=n[Hy]?c.join(`
`):"["+c.join(",")+"]";return l}return null},s.createNew=function(a,c,l){var u=r.slice(0);a=a||e,c=c||{};var f=l?new pF(a,c):new RI(a,c);return ee(u,function(m){f[Jc](m)}),f}})}return t.__ieDyn=1,t})(),RI=(function(t){Ho(e,t);function e(n,r){var o=t.call(this,n,r)||this;return Je(e,o,function(i,s){i[Vh]=function(a){s[$u]()},i[cm]=function(a){}}),o}return e.__ieDyn=1,e})(wK),upe=["AI_buffer","AI_sentBuffer"],pF=(function(t){Ho(e,t);function e(r,o){var i=t.call(this,r,o)||this,s=!1,a=o==null?void 0:o.namePrefix,c=o[By]||{getItem:zA,setItem:KA},l=c.getItem,u=c.setItem,f=o.maxRetryCnt;return Je(e,i,function(m,d){var p=y(e[Yh]),g=y(e[Zc]),h=_(),v=g[Hu](h),C=m._set(p[Hu](v));C[Ye]>e[qh]&&(C[Ye]=e[qh]),D(e[Zc],[]),D(e[Yh],C),m[Jc]=function(U){if(m[Xc]()>=e[qh]){s||(se(r,2,67,"Maximum buffer size reached: "+m[Xc](),!0),s=!0);return}U.cnt=U.cnt||0,!(!ae(f)&&U.cnt>f)&&(d[Jc](U),D(e[Yh],m._get()))},m[$u]=function(){d[$u](),D(e[Yh],m._get()),D(e[Zc],[]),s=!1},m[Vh]=function(U){D(e[Yh],m._set(w(U,m._get())));var k=y(e[Zc]);k instanceof Array&&U instanceof Array&&(k=k[Hu](U),k[Ye]>e[qh]&&(se(r,1,67,"Sent buffer reached its maximum size: "+k[Ye],!0),k[Ye]=e[qh]),D(e[Zc],k))},m[cm]=function(U){var k=y(e[Zc]);k=w(U,k),D(e[Zc],k)},m.createNew=function(U,k,E){E=!!E;var x=m._get().slice(0),b=y(e[Zc]).slice(0);U=U||r,k=k||{},m[$u]();var I=E?new e(U,k):new RI(U,k);return ee(x,function(T){I[Jc](T)}),E&&I[Vh](b),I};function w(U,k){var E=[],x=[];return ee(U,function(b){x[es](b.item)}),ee(k,function(b){!Re(b)&&wt(x,b.item)===-1&&E[es](b)}),E}function y(U){var k=U;return k=a?a+"_"+k:k,S(k)}function S(U){try{var k=l(r,U);if(k){var E=Rr().parse(k);if(ke(E)&&(E=Rr().parse(E)),E&&we(E))return E}}catch(x){se(r,1,42," storage key: "+U+", "+nn(x),{exception:Ee(x)})}return[]}function D(U,k){var E=U;try{E=a?a+"_"+E:E;var x=JSON[Ou](k);u(r,E,x)}catch(b){u(r,E,JSON[Ou]([])),se(r,2,41," storage key: "+E+", "+nn(b)+". Buffer cleared",{exception:Ee(b)})}}function _(){var U=[];try{return ee(upe,function(k){var E=A(k);if(U=U[Hu](E),a){var x=a+"_"+k,b=A(x);U=U[Hu](b)}}),U}catch(k){se(r,2,41,"Transfer events from previous buffers: "+nn(k)+". previous Buffer items can not be removed",{exception:Ee(k)})}return[]}function A(U){try{var k=S(U),E=[];return ee(k,function(x){var b={item:x,cnt:0};E[es](b)}),JA(r,U),E}catch{}return[]}}),i}var n;return n=e,e.VERSION="_1",e.BUFFER_KEY="AI_buffer"+n.VERSION,e.SENT_BUFFER_KEY="AI_sentBuffer"+n.VERSION,e.MAX_BUFFER_SIZE=2e3,e})(wK)});var CK,EK=ne(()=>{pr();Ot();Wu();CK=(function(){function t(e){Je(t,this,function(n){n.serialize=function(s){var a=r(s,"root");try{return Rr()[Ou](a)}catch(c){se(e,1,48,c&&Re(c[Kc])?c[Kc]():"Error serializing object",null,!0)}};function r(s,a){var c="__aiCircularRefCheck",l={};if(!s)return se(e,1,48,"cannot serialize object because it is null or undefined",{name:a},!0),l;if(s[c])return se(e,2,50,"Circular reference detected while serializing object",{name:a},!0),l;if(!s.aiDataContract){if(a==="measurements")l=i(s,"number",a);else if(a==="properties")l=i(s,"string",a);else if(a==="tags")l=i(s,"string",a);else if(we(s))l=o(s,a);else{se(e,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:a},!0);try{Rr()[Ou](s),l=s}catch(u){se(e,1,48,u&&Re(u[Kc])?u[Kc]():"Error serializing object",null,!0)}}return l}return s[c]=!0,Ie(s.aiDataContract,function(u,f){var m=Re(f)?f()&1:f&1,d=Re(f)?f()&4:f&4,p=f&2,g=s[u]!==void 0,h=tn(s[u])&&s[u]!==null;if(m&&!g&&!p)se(e,1,24,"Missing required field specification. The field is required but not present on source",{field:u,name:a});else if(!d){var v=void 0;h?p?v=o(s[u],u):v=r(s[u],u):v=s[u],v!==void 0&&(l[u]=v)}}),delete s[c],l}function o(s,a){var c;if(s)if(!we(s))se(e,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:a},!0);else{c=[];for(var l=0;l<s[Ye];l++){var u=s[l],f=r(u,a+"["+l+"]");c[es](f)}}return c}function i(s,a,c){var l;return s&&(l={},Ie(s,function(u,f){if(a==="string")f===void 0?l[u]="undefined":f===null?l[u]="null":f[Kc]?l[u]=f[Kc]():l[u]="invalid field: toString() is not defined.";else if(a==="number")if(f===void 0)l[u]="undefined";else if(f===null)l[u]="null";else{var m=parseFloat(f);l[u]=m}else l[u]="invalid field: "+c+" is of unknown type.",se(e,1,l[u],null,!0)})),l}})}return t.__ieDyn=1,t})()});var fpe,SK,xK=ne(()=>{Wu();fpe=8,SK=(function(){function t(){}return t.prototype.getHashCodeScore=function(e){var n=this.getHashCode(e)/t.INT_MAX_VALUE;return n*100},t.prototype.getHashCode=function(e){if(e==="")return 0;for(;e[Ye]<fpe;)e=e[Hu](e);for(var n=5381,r=0;r<e[Ye];++r)n=(n<<5)+n+e.charCodeAt(r),n=n&n;return Math.abs(n)},t.INT_MAX_VALUE=2147483647,t})()});var _K,DK=ne(()=>{zc();Wu();xK();_K=(function(){function t(){var e=this,n=new SK,r=new $y;e.getSamplingScore=function(o){var i=0;return o[Hn]&&o[Hn][r.userId]?i=n.getHashCodeScore(o[Hn][r.userId]):o.ext&&o.ext.user&&o.ext.user.id?i=n[lK](o.ext.user.id):o[Hn]&&o[Hn][r.operationId]?i=n.getHashCodeScore(o[Hn][r.operationId]):o.ext&&o.ext.telemetryTrace&&o.ext.telemetryTrace[am]?i=n.getHashCodeScore(o.ext.telemetryTrace[am]):i=Math.random()*100,i}}return t})()});var IK,PK=ne(()=>{zc();Ot();Wu();DK();IK=(function(){function t(e,n){this.INT_MAX_VALUE=2147483647;var r=n||Oc(null);(e>100||e<0)&&(r.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this[Xh]=e,this.samplingScoreGenerator=new _K}return t.prototype.isSampledIn=function(e){var n=this[Xh],r=!1;return n==null||n>=100||e.baseType===qc[Qi]?!0:(r=this.samplingScoreGenerator.getSamplingScore(e)<n,r)},t})()});function TK(t){try{return t.responseText}catch{}return null}function mpe(t){return t&&t.sendPOST}function ppe(t){return!isNaN(t)&&t>0&&t<=100}var Ut,Qc,La,bK,dpe,RK,hpe,Vy,kK=ne(()=>{Bo();pr();zc();Ot();Ne();vK();yK();EK();PK();Wu();La=void 0,bK="",dpe=65e3;RK=Ds((Ut={endpointUrl:yh(xs,Vd+Ra)},Ut[Hy]=Xi(),Ut.maxBatchInterval=15e3,Ut[aF]=102400,Ut.disableTelemetry=Xi(),Ut[lF]=Xi(!0),Ut.isRetryDisabled=Xi(),Ut[DI]=Xi(!0),Ut[fF]=Xi(!0),Ut.disableXhr=Xi(),Ut[uF]=Xi(),Ut[_I]=Xi(),Ut[Jh]=La,Ut.namePrefix=La,Ut.samplingPercentage=yh(ppe,100),Ut[xI]=La,Ut.convertUndefined=La,Ut.eventsLimitInMem=1e4,Ut[By]=!1,Ut.httpXHROverride={isVal:mpe,v:La},Ut[cF]=Xi(),Ut.transports=La,Ut.retryCodes=La,Ut.maxRetryCnt={isVal:Ir,v:10},Ut));hpe=(Qc={},Qc[Yc.dataType]=mF,Qc[rm.dataType]=gK,Qc[tm.dataType]=pK,Qc[om.dataType]=hK,Qc[em.dataType]=dK,Qc[qc.dataType]=mK,Qc[nm.dataType]=fK,Qc),Vy=(function(t){Ho(e,t);function e(){var n=t.call(this)||this;n.priority=1001,n.identifier=CI;var r,o,i,s,a,c,l,u,f=0,m,d,p,g,h,v,C,w,y,S,D,_,A,U,k,E,x,b,I,T,R,L,N,B,W,z,V;return Je(e,n,function(q,ce){ye(),q.pause=function(){Q(),s=!0},q.resume=function(){s&&(s=!1,o=null,rt(),$())},q.flush=function(P,F,H){if(P===void 0&&(P=!0),!s){Q();try{return q[Gh](P,null,H||1)}catch(G){se(q[Lr](),1,22,"flush failed, telemetry will not be collected: "+nn(G),{exception:Ee(G)})}}},q.onunloadFlush=function(){if(!s)if(C||T)try{return q[Gh](!0,Wn,2)}catch(P){se(q[Lr](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+nn(P),{exception:Ee(P)})}else q.flush(!1)},q.addHeader=function(P,F){u[P]=F},q[SI]=function(P,F,H,G){q.isInitialized()&&se(q[Lr](),1,28,"Sender is already initialized"),ce[SI](P,F,H,G);var J=q.identifier;c=new CK(F.logger),r=0,o=null,i=0,q[zh]=null,l=0;var te=q[Lr]();p=Ci(kr("Sender"),F.evtNamespace&&F.evtNamespace()),d=sF(p),q._addHook(hr(P,function(ue){var Oe=ue.cfg;Oe.storagePrefix&&GA(Oe.storagePrefix);var Xe=vo(null,Oe,F),Te=Xe.getExtCfg(J,RK),_o=Te[Kh];if(g&&_o===g){var qa=Oe[Kh];qa&&qa!==_o&&(Te[Kh]=qa)}fo(Te[Jh])&&(Te[Jh]=Oe[Jh]),gt(q,"_senderConfig",{g:function(){return Te}}),h!==Te[Kh]&&(g=h=Te[Kh]),F.activeStatus()===mi.PENDING?q.pause():F.activeStatus()===mi.ACTIVE&&q.resume(),S&&S!==Te[xI]&&ee(S,function(yr){delete u[yr.header]}),v=Te[aF],C=(Te[_I]===!1||Te[DI]===!1)&&Ji(),w=Te[_I]===!1&&Ji(),y=Te[DI]===!1&&Ji(),T=Te[cF],R=!!Te.disableXhr,V=Te.retryCodes;var Do=Te[By],Bs=!!Te[lF]&&(!!Do||gI()),xC=Te.namePrefix,O9=Bs!==E||Bs&&b!==xC||Bs&&x!==Do;if(q[Us]){if(O9)try{q[Us]=q[Us].createNew(te,Te,Bs)}catch(yr){se(q[Lr](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+nn(yr),{exception:Ee(yr)})}rt()}else q[Us]=Bs?new pF(te,Te):new RI(te,Te);b=xC,E=Bs,x=Do,L=!Te[uF]&&Lc(!0),W=!!Te[fF],q._sample=new IK(Te.samplingPercentage,te),_=Te[Jh],!fo(_)&&!qe(_,Oe)&&se(te,1,100,"Invalid Instrumentation key "+_),S=Te[xI],ke(g)&&!pI(g)&&S&&S[Ye]>0?ee(S,function(yr){n.addHeader(yr.header,yr.value)}):S=null,I=Te.enableSendPromise;var WO=mt();z?z.SetConfig(WO):(z=new Ad,z[SI](WO,te));var _C=Te.httpXHROverride,DC=null,Ig=null,U9=kc([3,1,2],Te.transports);DC=z&&z[Wy](U9,!1);var M0=z&&z.getFallbackInst();N=function(yr,of){return le(M0,yr,of)},B=function(yr,of){return le(M0,yr,of,!1)},DC=T?_C:DC||_C||M0,q[zh]=function(yr,of){return le(DC,yr,of)},L&&(m=Di);var $0=kc([3,1],Te.unloadTransports);L||($0=$0.filter(function(yr){return yr!==2})),Ig=z&&z[Wy]($0,!0),Ig=T?_C:Ig||_C,(T||Te.unloadTransports||!m)&&Ig&&(m=function(yr,of){return le(Ig,yr,of)}),m||(m=N),D=Te.disableTelemetry,A=Te.convertUndefined||La,U=Te.isRetryDisabled,k=Te.maxBatchInterval}))},q.processTelemetry=function(P,F){F=q._getTelCtx(F);var H=F[Lr]();try{var G=pt(P,H);if(!G)return;var J=nt(P,H);if(!J)return;var te=c.serialize(J),ue=q[Us];rt(te);var Oe={item:te,cnt:0};ue[Jc](Oe),$()}catch(Xe){se(H,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+nn(Xe),{exception:Ee(Xe)})}q.processNext(P,F)},q.isCompletelyIdle=function(){return!s&&f===0&&q._buffer[Xc]()===0},q.getOfflineListener=function(){return d},q._xhrReadyStateChange=function(P,F,H){if(!Ur(F))return $t(P,F,H)},q[Gh]=function(P,F,H){P===void 0&&(P=!0);var G;if(!s)try{var J=q[Us];if(D)J[$u]();else{if(J[Xc]()>0){var te=J.getItems();be(H||0,P),F?G=F.call(q,te,P):G=q[zh](te,P)}i=+new Date}Q()}catch(Oe){var ue=$w();(!ue||ue>9)&&se(q[Lr](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+nn(Oe),{exception:Ee(Oe)})}return G},q.getOfflineSupport=function(){return{getUrl:function(){return g},createPayload:j,serialize:Dt,batch:yt,shouldProcess:function(P){return!!pt(P)}}},q._doTeardown=function(P,F){q.onunloadFlush(),Fc(d,!1),ye()},q[Bu]=function(P,F,H){if(!Ur(P))return xo(P,F,H)},q[II]=function(P,F){if(!Ur(P))return Pn(P,F)},q[jy]=function(P,F){if(!Ur(P))return vn(P,F)},q._xdrOnLoad=function(P,F){if(!Ur(F))return Be(P,F)};function Be(P,F){var H=TK(P);if(P&&(H+""=="200"||H===""))r=0,q[jy](F,0);else{var G=Ld(H);G&&G[PI]&&G[PI]>G[bI]&&!U?q[II](F,G):q[Bu](F,_d(P))}}function mt(){try{var P={xdrOnComplete:function(H,G,J){var te=Xt(J);if(te)return Be(H,te)},fetchOnComplete:function(H,G,J,te){var ue=Xt(te);if(ue)return ht(H.status,ue,H.url,ue[Ye],H.statusText,J||"")},xhrOnComplete:function(H,G,J){var te=Xt(J);if(te)return $t(H,te,te[Ye])},beaconOnRetry:function(H,G,J){return Or(H,G,J)}},F={enableSendPromise:I,isOneDs:!1,disableCredentials:!1,disableXhr:R,disableBeacon:!y,disableBeaconSync:!w,senderOnCompleteCallBack:P};return F}catch{}return null}function $t(P,F,H){P.readyState===4&&ht(P.status,F,P.responseURL,H,Rc(P),TK(P)||P.response)}function xo(P,F,H){se(q[Lr](),2,26,"Failed to send telemetry.",{message:F}),q._buffer&&q._buffer[cm](P)}function Pn(P,F){for(var H=[],G=[],J=F.errors.reverse(),te=0,ue=J;te<ue.length;te++){var Oe=ue[te],Xe=P.splice(Oe.index,1)[0];ie(Oe.statusCode)?G[es](Xe):H[es](Xe)}P[Ye]>0&&q[jy](P,F[bI]),H[Ye]>0&&q[Bu](H,Rc(null,["partial success",F[bI],"of",F.itemsReceived].join(" "))),G[Ye]>0&&(tr(G),se(q[Lr](),2,40,"Partial success. Delivered: "+P[Ye]+", Failed: "+H[Ye]+". Will retry to send "+G[Ye]+" our of "+F[PI]+" items"))}function vn(P,F){q._buffer&&q._buffer[cm](P)}function Xt(P){try{if(P){var F=P,H=F.oriPayload;return H&&H[Ye]?H:null}}catch{}return null}function pt(P,F){if(D)return!1;if(!P)return F&&se(F,1,7,"Cannot send empty telemetry"),!1;if(P.baseData&&!P[TI])return F&&se(F,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(P[TI]||(P[TI]="EventData"),!q[zh])return F&&se(F,1,28,"Sender was not initialized"),!1;if(oe(P))P[Iy]=q._sample[Xh];else return F&&se(F,2,33,"Telemetry item was sampled out and not sent",{SampleRate:q._sample[Xh]}),!1;return!0}function nt(P,F){var H=P.iKey||_,G=e.constructEnvelope(P,H,F,A);if(!G){se(F,1,47,"Unable to create an AppInsights envelope");return}var J=!1;if(P[Hn]&&P[Hn][Py]&&(ee(P[Hn][Py],function(te){try{te&&te(G)===!1&&(J=!0,go(F,"Telemetry processor check returns false"))}catch(ue){se(F,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+nn(ue),{exception:Ee(ue)},!0)}}),delete P[Hn][Py]),!J)return G}function Dt(P){var F=bK,H=q[Lr]();try{var G=pt(P,H),J=null;G&&(J=nt(P,H)),J&&(F=c.serialize(J))}catch{}return F}function yt(P){var F=bK;return P&&P[Ye]&&(F="["+P.join(",")+"]"),F}function j(P){var F=Qe();return{urlString:g,data:P,headers:F}}function oe(P){return q._sample.isSampledIn(P)}function xe(P,F,H,G){F===200&&P?q._onSuccess(P,P[Ye]):G&&q[Bu](P,G)}function le(P,F,H,G){G===void 0&&(G=!0);var J=function(Oe,Xe,Te){return xe(F,Oe,Xe,Te)},te=De(F),ue=P&&P.sendPOST;return ue&&te?(G&&q._buffer[Vh](F),ue(te,J,!H)):null}function De(P){if(we(P)&&P[Ye]>0){var F=q[Us].batchPayloads(P),H=Qe(),G={data:F,urlString:g,headers:H,disableXhrSync:R,disableFetchKeepAlive:!L,oriPayload:P};return G}return null}function Qe(){try{var P=u||{};return pI(g)&&(P[dI[6]]=dI[7]),P}catch{}return null}function rt(P){var F=P?P[Ye]:0;return q[Us].size()+F>v?((!d||d.isOnline())&&q[Gh](!0,null,10),!0):!1}function ht(P,F,H,G,J,te){var ue=null;if(q._appId||(ue=Ld(te),ue&&ue.appId&&(q._appId=ue.appId)),(P<200||P>=300)&&P!==0){if((P===301||P===307||P===308)&&!wn(H)){q[Bu](F,J);return}if(d&&!d.isOnline()){if(!U){var Oe=10;tr(F,Oe),se(q[Lr](),2,40,". Offline - Response Code: ".concat(P,". Offline status: ").concat(!d.isOnline(),". Will retry to send ").concat(F.length," items."))}return}!U&&ie(P)?(tr(F),se(q[Lr](),2,40,". Response code "+P+". Will retry to send "+F[Ye]+" items.")):q[Bu](F,J)}else wn(H),P===206?(ue||(ue=Ld(te)),ue&&!U?q[II](F,ue):q[Bu](F,J)):(r=0,q[jy](F,G))}function wn(P){return l>=10?!1:!ae(P)&&P!==""&&P!==g?(g=P,++l,!0):!1}function Wn(P,F){if(m)m(P,!1);else{var H=z&&z[Wy]([3],!0);return le(H,P,F)}}function Or(P,F,H){var G=P,J=G&&G.oriPayload;if(W)B&&B(J,!0),se(q[Lr](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var te=[],ue=0;ue<J[Ye];ue++){var Oe=J[ue],Xe=[Oe],Te=De(Xe);H(Te,F)?q._onSuccess(Xe,Xe[Ye]):te[es](Oe)}te[Ye]>0&&(B&&B(te,!0),se(q[Lr](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function Ur(P){try{if(P&&P[Ye])return ke(P[0])}catch{}return null}function Di(P,F){var H=null;if(we(P)){for(var G=P[Ye],J=0;J<P[Ye];J++)G+=P[J].item[Ye];var te=z.getSyncFetchPayload();te+G<=dpe?H=2:Ji()?H=3:(H=1,se(q[Lr](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var ue=z&&z[Wy]([H],!0);return le(ue,P,F)}return null}function tr(P,F){if(F===void 0&&(F=1),!(!P||P[Ye]===0)){var H=q[Us];H[cm](P),r++;for(var G=0,J=P;G<J.length;G++){var te=J[G];te.cnt=te.cnt||0,te.cnt++,H[Jc](te)}Ya(F),$()}}function Ya(P){var F=10,H;if(r<=1)H=F;else{var G=(Math.pow(2,r)-1)/2,J=ji(Math.random()*G*F)+1;J=P*J,H=la(su(J,3600),F)}var te=xn()+H*1e3;o=te}function $(){if(!a&&!s){var P=o?la(0,o-xn()):0,F=la(k,P);a=di(function(){a=null,q[Gh](!0,null,1)},F)}}function Q(){a&&a.cancel(),a=null,o=null}function ie(P){return ae(V)?P===401||P===408||P===429||P===500||P===502||P===503||P===504:V[Ye]&&V.indexOf(P)>-1}function ve(){var P="getNotifyMgr";return q.core[P]?q.core[P]():q.core._notificationManager}function be(P,F){var H=ve();if(H&&H.eventsSendRequest)try{H.eventsSendRequest(P,F)}catch(G){se(q[Lr](),1,74,"send request notification failed: "+nn(G),{exception:Ee(G)})}}function qe(P,F){var H=F.disableInstrumentationKeyValidation,G=ae(H)?!1:H;if(G)return!0;var J="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",te=new RegExp(J);return te.test(P)}function ye(){q[zh]=null,q[Us]=null,q._appId=null,q._sample=null,u={},d=null,r=0,o=null,i=null,s=!1,a=null,c=null,l=0,f=0,m=null,p=null,g=null,h=null,v=0,C=!1,S=null,D=!1,_=null,A=La,U=!1,E=null,b=La,R=!1,L=!1,W=!1,N=null,B=null,z=null,gt(q,"_senderConfig",{g:function(){return G_({},RK)}})}}),n}return e.constructEnvelope=function(n,r,o,i){var s;r!==n.iKey&&!ae(r)?s=Yi(Yi({},n),{iKey:r}):s=n;var a=hpe[s.baseType]||mF;return a(o,s,i)},e})(Hc)});var hF=ne(()=>{kK()});var dm,Yy,Zh,Qh,NK=ne(()=>{dm="instrumentationKey",Yy="connectionString",Zh="endpointUrl",Qh="userOverrideEndpointUrl"});var LK={};PC(LK,{AppInsightsCore:()=>Bc,ApplicationInsights:()=>wpe,Sender:()=>Vy,SeverityLevel:()=>rF,arrForEach:()=>ee,isNullOrUndefined:()=>ae,proxyFunctions:()=>yi,throwError:()=>An});function vpe(t){return t&&t>0}var eg,gF,gpe,wpe,AK=ne(()=>{pr();hF();zc();Ot();yd();Ne();NK();Ot();zc();hF();gF=void 0,gpe=(eg={diagnosticLogInterval:yh(vpe,1e4)},eg[Yy]=gF,eg.endpointUrl=gF,eg[dm]=gF,eg.extensionConfig={},eg);wpe=(function(){function t(e){var n=new Bc,r;(ae(e)||ae(e[dm])&&ae(e[Yy]))&&An("Invalid input configuration"),Je(t,this,function(i){gt(i,"config",{g:function(){return r}}),s(),i.initialize=s,i.track=o,yi(i,n,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function s(){var a=jt(e||{},gpe);r=a.cfg,n.addUnloadHook(hr(a,function(){var c=r[Yy];if(fo(c)){var l=Lw(function(d,p){vi(c,function(g){var h=g.value,v=r[dm];if(!g.rejected&&h){r[Yy]=h;var C=Fy(h);v=C.instrumentationkey||v}d(v)})}),u=Lw(function(d,p){vi(c,function(g){var h=g.value,v=r[Zh];if(!g.rejected&&h){var C=Fy(h),w=C.ingestionendpoint;v=w?w+Ra:v}d(v)})});r[dm]=l,r[Zh]=r[Qh]||u}if(ke(c)){var f=Fy(c),m=f.ingestionendpoint;r[Zh]=r[Qh]?r[Qh]:m+Ra,r[dm]=f.instrumentationkey||r[dm]}r[Zh]=r[Qh]?r[Qh]:r[Zh]})),n.initialize(r,[new Vy])}});function o(i){i&&(i.baseData=i.baseData||{},i.baseType=i.baseType||"EventData"),n.track(i)}}return t.__ieDyn=1,t})()});var wF=M(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.TargetPopulation=Vu.Filters=Vu.VSCodeFilterProvider=void 0;var LI=require("vscode"),vF=class t{constructor(e,n,r){this.extensionName=e,this.extensionVersion=n,this.targetPopulation=r}static trimVersionSuffix(e){let n=/\-[a-zA-Z0-9]+$/;return e.split(n)[0]}getFilterValue(e){switch(e){case Aa.ApplicationVersion:return t.trimVersionSuffix(LI.version);case Aa.Build:return LI.env.appName;case Aa.ClientId:return LI.env.machineId;case Aa.ExtensionName:return this.extensionName;case Aa.ExtensionVersion:return t.trimVersionSuffix(this.extensionVersion);case Aa.Language:return LI.env.language;case Aa.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,n=Object.values(Aa);for(let r of n)e.set(r,this.getFilterValue(r));return e}};Vu.VSCodeFilterProvider=vF;var Aa;(function(t){t.Market="X-MSEdge-Market",t.CorpNet="X-FD-Corpnet",t.ApplicationVersion="X-VSCode-AppVersion",t.Build="X-VSCode-Build",t.ClientId="X-MSEdge-ClientId",t.ExtensionName="X-VSCode-ExtensionName",t.ExtensionVersion="X-VSCode-ExtensionVersion",t.Language="X-VSCode-Language",t.TargetPopulation="X-VSCode-TargetPopulation"})(Aa||(Vu.Filters=Aa={}));var MK;(function(t){t.Team="team",t.Internal="internal",t.Insiders="insider",t.Public="public"})(MK||(Vu.TargetPopulation=MK={}))});var $K=M(AI=>{"use strict";Object.defineProperty(AI,"__esModule",{value:!0});AI.BaseFeatureProvider=void 0;var yF=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}};AI.BaseFeatureProvider=yF});var HK=M(FI=>{"use strict";Object.defineProperty(FI,"__esModule",{value:!0});FI.FilteredFeatureProvider=void 0;var ype=$K(),CF=class extends ype.BaseFeatureProvider{constructor(e,n){super(e),this.telemetry=e,this.filterProviders=n,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let n of this.filterProviders){let r=n.getFilters();for(let o of r.keys()){let i=r.get(o);e.set(o,i)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;let n=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",n]])),this.cachedTelemetryEvents.push(e)}};FI.FilteredFeatureProvider=CF});var BK=M(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.TasApiFeatureProvider=Yu.TASAPI_FETCHERROR_EVENTNAME=void 0;var Cpe=HK();Yu.TASAPI_FETCHERROR_EVENTNAME="call-tas-error";var EF="ErrorType",SF=class extends Cpe.FilteredFeatureProvider{constructor(e,n,r){super(n,r),this.httpClient=e,this.telemetry=n,this.filterProviders=r}async fetch(){let e=this.getFilters(),n={};for(let a of e.keys()){let c=e.get(a);n[a]=c}let r;try{r=await this.httpClient.get({headers:n})}catch(a){let c=a,l=new Map;c.responseReceived&&!c.responseOk?l.set(EF,"ServerError"):c.responseReceived===!1?l.set(EF,"NoResponse"):l.set(EF,"GenericError"),this.telemetry.postEvent(Yu.TASAPI_FETCHERROR_EVENTNAME,l)}if(!r)throw Error(Yu.TASAPI_FETCHERROR_EVENTNAME);e.keys.length>0&&this.PostEventToTelemetry(n);let o=r.data,i=o.Configs,s=[];for(let a of i)if(a.Parameters)for(let c of Object.keys(a.Parameters)){let l=c+(a.Parameters[c]?"":"cf");s.includes(l)||s.push(l)}return{features:s,assignmentContext:o.AssignmentContext,configs:i}}};Yu.TasApiFeatureProvider=SF});var WK=M(rg=>{"use strict";Object.defineProperty(rg,"__esModule",{value:!0});rg.HttpClient=rg.FetchError=void 0;var ng=class extends Error{constructor(e,n,r){super(e),this.responseReceived=n,this.responseOk=r}};rg.FetchError=ng;var xF=class{constructor(e){this.endpoint=e}async get(e){let n=await fetch(this.endpoint,{method:"GET",headers:e==null?void 0:e.headers});if(!n)throw new ng("No response received",!1);if(!n.ok)throw new ng("Response not ok",!0,!1);let r=await n.json();if(!r)throw new ng("No data received",!1);return{data:r}}};rg.HttpClient=xF});var jK=M(OI=>{"use strict";Object.defineProperty(OI,"__esModule",{value:!0});OI.MemoryKeyValueStorage=void 0;var _F=class{constructor(){this.storage=new Map}async getValue(e,n){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(n||void 0)}setValue(e,n){this.storage.set(e,n)}};OI.MemoryKeyValueStorage=_F});var VK=M(UI=>{"use strict";Object.defineProperty(UI,"__esModule",{value:!0});UI.ExperimentationServiceBase=void 0;var Epe=jK(),DF=class{get features(){return this._features}set features(e){this._features=e,this.telemetry&&this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext)}constructor(e,n,r,o,i){this.telemetry=e,this.assignmentContextTelemetryPropertyName=n,this.telemetryEventName=r,this.storageKey=o,this.storage=i,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(i=new Epe.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((s,a)=>{this.resolveInitialFetchPromise=s})}async getFeaturesAsync(e=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch{}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});try{this.fetchPromise=Promise.all(this.featureProviders.map(async r=>await r.getFeatures()));let n=await this.fetchPromise;this.updateFeatures(n,e)}catch{}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,n=!1){let r={features:[],assignmentContext:"",configs:[]};for(let o of e){for(let i of o.features)r.features.includes(i)||r.features.push(i);for(let i of o.configs){let s=r.configs.find(a=>a.Id===i.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),i.Parameters):r.configs.push(i)}r.assignmentContext+=o.assignmentContext}(n||!this.featuresConsumed)&&(this.features=r),this.storage&&this.storage.setValue(this.storageKey,r)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),e!==void 0&&e.configs===void 0&&(e.configs=[])),this.features.features.length===0&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){let n=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),n.features.includes(e)}getTreatmentVariable(e,n){this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${n}`);let r=this.features.configs.find(o=>o.Id===e);return r==null?void 0:r.Parameters[n]}async getTreatmentVariableAsync(e,n,r){if(r){let o=this.featuresConsumed,i=this.getTreatmentVariable(e,n);if(i===void 0)this.featuresConsumed=o;else return i}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,n)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(!(e==null||this.featureProviders==null))for(let n of e)this.featureProviders.push(n)}};UI.ExperimentationServiceBase=DF});var YK=M(MI=>{"use strict";Object.defineProperty(MI,"__esModule",{value:!0});MI.PollingService=void 0;var IF=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(e&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};MI.PollingService=IF});var qK=M($I=>{"use strict";Object.defineProperty($I,"__esModule",{value:!0});$I.ExperimentationServiceAutoPolling=void 0;var Spe=VK(),xpe=YK(),PF=class extends Spe.ExperimentationServiceBase{constructor(e,n,r,o,i,s,a){if(super(e,o,i,s,a),this.telemetry=e,this.filterProviders=n,this.refreshRateMs=r,this.assignmentContextTelemetryPropertyName=o,this.telemetryEventName=i,this.storageKey=s,this.storage=a,r<1e3&&r!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");r>0&&(this.pollingService=new xpe.PollingService(r),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let n=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),n}else return await super.getFeaturesAsync(e)}};$I.ExperimentationServiceAutoPolling=PF});var GK=M(BI=>{"use strict";Object.defineProperty(BI,"__esModule",{value:!0});BI.ExperimentationService=void 0;var _pe=BK(),Dpe=WK(),Ipe=qK(),HI=class extends Ipe.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],e.refetchInterval!=null?e.refetchInterval:0,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage),this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new _pe.TasApiFeatureProvider(new Dpe.HttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};BI.ExperimentationService=HI;HI.REFRESH_RATE_IN_MINUTES=30});var zK=M(WI=>{"use strict";Object.defineProperty(WI,"__esModule",{value:!0});WI.ExperimentationService=void 0;var Ppe=GK();Object.defineProperty(WI,"ExperimentationService",{enumerable:!0,get:function(){return Ppe.ExperimentationService}})});var KK=M(jI=>{"use strict";Object.defineProperty(jI,"__esModule",{value:!0});jI.MementoKeyValueStorage=void 0;var bF=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,n){return await this.mementoGlobalStorage.get(e)||n}setValue(e,n){this.mementoGlobalStorage.update(e,n)}};jI.MementoKeyValueStorage=bF});var JK=M(RF=>{"use strict";Object.defineProperty(RF,"__esModule",{value:!0});var TF=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,n){}getTreatmentVariableAsync(e,n){return Promise.resolve(void 0)}};RF.default=TF});var ZK=M(og=>{"use strict";Object.defineProperty(og,"__esModule",{value:!0});og.getExperimentationServiceAsync=og.getExperimentationService=void 0;var bpe=wF(),Tpe=zK(),kF=require("vscode"),Rpe=KK(),kpe=JK(),Npe="https://default.exp-tas.com/vscode/ab",Lpe="query-expfeature",Ape="abexp.assignmentcontext",Fpe="VSCode.ABExp.FeatureData",Ope=1e3*60*30;function XK(t,e,n,r,o,...i){if(!o)throw new Error("Memento storage was not provided.");let s=kF.workspace.getConfiguration("telemetry");if(!(kF.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):kF.env.isTelemetryEnabled))return new kpe.default;let l=[new bpe.VSCodeFilterProvider(t,e,n),...i],u=new Rpe.MementoKeyValueStorage(o);return new Tpe.ExperimentationService({filterProviders:l,telemetry:r,storageKey:Fpe,keyValueStorage:u,featuresTelemetryPropertyName:"",assignmentContextTelemetryPropertyName:Ape,telemetryEventName:Lpe,endpoint:Npe,refetchInterval:Ope})}og.getExperimentationService=XK;async function Upe(t,e,n,r,o,...i){let s=XK(t,e,n,r,o,...i);return await s.initializePromise,s}og.getExperimentationServiceAsync=Upe});var e5=M(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.TargetPopulation=qu.getExperimentationServiceAsync=qu.getExperimentationService=void 0;var QK=ZK();Object.defineProperty(qu,"getExperimentationService",{enumerable:!0,get:function(){return QK.getExperimentationService}});Object.defineProperty(qu,"getExperimentationServiceAsync",{enumerable:!0,get:function(){return QK.getExperimentationServiceAsync}});var Mpe=wF();Object.defineProperty(qu,"TargetPopulation",{enumerable:!0,get:function(){return Mpe.TargetPopulation}})});var S9=M((EVe,qge)=>{qge.exports={name:"remote-containers",displayName:"%displayName%",description:"%description%",version:"0.431.1",publisher:"ms-vscode-remote",icon:"resources/dev-containers.png",repository:{type:"git",url:"https://github.com/Microsoft/vscode-remote-release.git"},bugs:{url:"https://github.com/Microsoft/vscode-remote-release/issues"},license:"SEE LICENSE IN LICENSE.txt",engines:{vscode:"^1.99.0"},extensionKind:["ui"],capabilities:{untrustedWorkspaces:{supported:"limited",description:"%capabilities.untrustedWorkspaces.description%"},virtualWorkspaces:!0},categories:["Other"],keywords:["remote","docker","containers","remote development","dev container","devcontainer","development container","continueOn"],aiKey:"0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255",activationEvents:["onStartupFinished","workspaceContains:.devcontainer/devcontainer.json","workspaceContains:.devcontainer.json","onResolveRemoteAuthority:dev-container","onResolveRemoteAuthority:attached-container","onResolveRemoteAuthority:k8s-container","onResolveRemoteAuthority:apple-container","onDebugResolve:extensionHost"],main:"./dist/extension/extension",l10n:"./l10n",enabledApiProposals:["resolvers","tunnels","workspaceTrust","terminalDimensions","contribEditSessions","contribViewsRemote","contribRemoteHelp"],contributes:{continueEditSession:[{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",group:"0_local@2",when:"!isWeb && remoteHub:hasVirtualFolders",qualifiedName:"%continueEditSession.containerVolume%",remoteGroup:"remote_30_dev-container_2_actions@8"},{command:"remote-containers.openRepositoryFromGitWithEditSession",group:"0_local@2",when:"git.state == initialized && gitOpenRepositoryCount != 0 && remoteName =~ /(codespaces*.*|tunnel)/ && false",qualifiedName:"%continueEditSession.containerVolume%",remoteGroup:"remote_30_dev-container_2_actions@8"}],languages:[{id:"jsonc",filenames:["devcontainer-feature.json",".devcontainer-internal.json"]}],jsonValidation:[{fileMatch:"devcontainer-feature.json",url:"https://raw.githubusercontent.com/devcontainers/spec/main/schemas/devContainerFeature.schema.json"}],configuration:{title:"%configuration.title%",properties:{"remote.containers.defaultExtensions":{scope:"application",deprecationMessage:"%configuration.defaultExtensions.deprecationMessage%",markdownDeprecationMessage:"%configuration.defaultExtensions.markdownDeprecationMessage%"},"dev.containers.defaultExtensions":{scope:"application",type:"array",description:"%configuration.defaultExtensions.description%",default:[],items:{type:"string",pattern:"([a-z0-9A-Z][a-z0-9\\-A-Z]*)\\.([a-z0-9A-Z][a-z0-9\\-A-Z]*)",errorMessage:"%configuration.defaultExtensions.errorMessage%"}},"dev.containers.defaultFeatures":{scope:"application",type:"object",description:"%configuration.defaultFeatures%",default:{}},"remote.containers.workspaceMountConsistency":{scope:"application",deprecationMessage:"%configuration.workspaceMountConsistency.deprecationMessage%",markdownDeprecationMessage:"%configuration.workspaceMountConsistency.markdownDeprecationMessage%"},"dev.containers.workspaceMountConsistency":{scope:"application",type:"string",enum:["consistent","cached","delegated"],enumDescriptions:["%configuration.workspaceMountConsistency.consistent%","%configuration.workspaceMountConsistency.cached%","%configuration.workspaceMountConsistency.delegated%"],description:"%configuration.workspaceMountConsistency.description%",default:"cached"},"dev.containers.gpuAvailability":{scope:"machine",type:"string",enum:["all","detect","none"],enumDescriptions:["%configuration.gpuAvailability.all%","%configuration.gpuAvailability.detect%","%configuration.gpuAvailability.none%"],description:"%configuration.gpuAvailability.description%",default:"detect"},"remote.containers.cacheVolume":{scope:"application",deprecationMessage:"%configuration.cacheVolume.deprecationMessage%",markdownDeprecationMessage:"%configuration.cacheVolume.markdownDeprecationMessage%"},"dev.containers.cacheVolume":{scope:"application",type:"boolean",description:"%configuration.cacheVolume.description%",default:!0},"remote.containers.copyGitConfig":{scope:"machine",deprecationMessage:"%configuration.copyGitConfig.deprecationMessage%",markdownDeprecationMessage:"%configuration.copyGitConfig.markdownDeprecationMessage%"},"dev.containers.copyGitConfig":{scope:"machine",type:"boolean",markdownDescription:"%configuration.copyGitConfig.markdownDescription%",default:!0},"remote.containers.gitCredentialHelperConfigLocation":{scope:"machine",deprecationMessage:"%configuration.gitCredentialHelperConfigLocation.deprecationMessage%",markdownDeprecationMessage:"%configuration.gitCredentialHelperConfigLocation.markdownDeprecationMessage%"},"dev.containers.gitCredentialHelperConfigLocation":{scope:"machine",type:"string",enum:["system","global","none"],enumDescriptions:["%configuration.gitCredentialHelperConfigLocation.system%","%configuration.gitCredentialHelperConfigLocation.global%","%configuration.gitCredentialHelperConfigLocation.none%"],description:"%configuration.gitCredentialHelperConfigLocation.description%",default:"global"},"dev.containers.dockerCredentialHelper":{scope:"machine",type:"boolean",markdownDescription:"%configuration.dockerCredentialHelper.markdownDescription%",default:!0},"dev.containers.githubCLILoginWithToken":{scope:"machine",type:"boolean",markdownDescription:"%configuration.githubCLILoginWithToken.markdownDescription%",default:!1},"dev.containers.mountWaylandSocket":{scope:"application",ignoreSync:!0,type:"boolean",markdownDescription:"%configuration.mountWaylandSocket.markdownDescription%",default:!0},"remote.containers.logLevel":{scope:"application",deprecationMessage:"%configuration.logLevel.deprecationMessage%",markdownDeprecationMessage:"%configuration.logLevel.markdownDeprecationMessage%"},"dev.containers.logLevel":{scope:"application",type:"string",description:"%configuration.logLevel.description%",default:"debug",enum:["info","debug","trace"]},"remote.containers.dockerPath":{scope:"application",deprecationMessage:"%configuration.dockerPath.deprecationMessage%",markdownDeprecationMessage:"%configuration.dockerPath.markdownDeprecationMessage%"},"dev.containers.dockerPath":{scope:"application",type:"string",description:"%configuration.dockerPath.description%",default:"docker"},"remote.containers.dockerComposePath":{scope:"application",deprecationMessage:"%configuration.dockerComposePath.deprecationMessage%",markdownDeprecationMessage:"%configuration.dockerComposePath.markdownDeprecationMessage%"},"dev.containers.dockerComposePath":{scope:"application",type:"string",description:"%configuration.dockerComposePath.description%",default:"docker-compose"},"dev.containers.dockerSocketPath":{scope:"application",type:"string",description:"%configuration.dockerSocketPath.description%",default:"/var/run/docker.sock"},"remote.containers.executeInWSL":{scope:"application",deprecationMessage:"%configuration.executeInWSL.deprecationMessage%",markdownDeprecationMessage:"%configuration.executeInWSL.markdownDeprecationMessage%"},"dev.containers.executeInWSL":{scope:"application",type:"boolean",description:"%configuration.executeInWSL.description%",default:!1},"remote.containers.executeInWSLDistro":{scope:"application",deprecationMessage:"%configuration.executeInWSLDistro.deprecationMessage%",markdownDeprecationMessage:"%configuration.executeInWSLDistro.markdownDeprecationMessage%"},"dev.containers.executeInWSLDistro":{scope:"application",type:"string",markdownDescription:"%configuration.executeInWSLDistro.markdownDescription%"},"dev.containers.forwardWSLServices":{scope:"application",type:"boolean",description:"%configuration.forwardWSLServices.description%",default:!0},"dotfiles.repository":{scope:"machine",type:"string",description:"%configuration.dotfiles.repository.description%"},"dotfiles.installCommand":{scope:"machine",type:"string",description:"%configuration.dotfiles.installCommand.description%"},"dotfiles.targetPath":{scope:"machine",type:"string",description:"%configuration.dotfiles.targetPath.description%",default:"~/dotfiles"},"remote.containers.dotfiles.repository":{scope:"machine",deprecationMessage:"%configuration.dotfiles.repository.deprecationMessage%",markdownDeprecationMessage:"%configuration.dotfiles.repository.markdownDeprecationMessage%"},"remote.containers.dotfiles.installCommand":{scope:"machine",deprecationMessage:"%configuration.dotfiles.installCommand.deprecationMessage%",markdownDeprecationMessage:"%configuration.dotfiles.installCommand.markdownDeprecationMessage%"},"remote.containers.dotfiles.targetPath":{scope:"machine",deprecationMessage:"%configuration.dotfiles.targetPath.deprecationMessage%",markdownDeprecationMessage:"%configuration.dotfiles.targetPath.markdownDeprecationMessage%"},"remote.containers.repositoryConfigurationPaths":{scope:"application",deprecationMessage:"%configuration.repositoryConfigurationPaths.deprecationMessage%",markdownDeprecationMessage:"%configuration.repositoryConfigurationPaths.markdownDeprecationMessage%"},"dev.containers.repositoryConfigurationPaths":{scope:"application",type:"array",markdownDescription:"%configuration.repositoryConfigurationPaths.markdownDescription%",default:[],items:{type:"string"}},"dev.containers.experimentalLockfile":{scope:"application",type:"boolean",description:"%configuration.experimentalLockfile.description%",default:!1},"dev.containers.optimisticallyLaunchDocker":{scope:"application",type:"boolean",description:"%configuration.optimisticallyLaunchDocker.description%",default:!0},"dev.containers.experimentalAppleContainerSupport":{scope:"application",type:"boolean",markdownDescription:"%configuration.experimentalAppleContainerSupport.markdownDescription%",default:!1,tags:["experimental"]}}},commands:[{command:"remote-containers.reopenInContainer",title:"%command.reopenInContainer%",category:"%command.category%"},{command:"remote-containers.rebuildAndReopenInContainer",title:"%command.rebuildAndReopenInContainer%",category:"%command.category%"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",title:"%command.rebuildNoCacheAndReopenInContainer%",category:"%command.category%"},{command:"remote-containers.reopenLocally",title:"%command.reopenLocally%",category:"%command.category%"},{command:"remote-containers.reopenInWSL",title:"%command.reopenInWSL%",category:"%command.category%"},{command:"remote-containers.reopenInSSH",title:"%command.reopenInSSH%",category:"%command.category%"},{command:"remote-containers.reopenInTunnel",title:"%command.reopenInTunnel%",category:"%command.category%"},{command:"remote-containers.openFolder",title:"%command.openFolder%",category:"%command.category%",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.openFolderInContainerInCurrentWindow",title:"%command.openFolderInContainerInCurrentWindow%",category:"%command.category%",icon:"$(arrow-right)"},{command:"remote-containers.openFolderInContainerInNewWindow",title:"%command.openFolderInContainerInNewWindow%",category:"%command.category%",icon:"$(empty-window)"},{command:"remote-containers.openInformationAboutMountPerformance",title:"%command.openInformationAboutMountPerformance%",category:"%command.category%",icon:"$(info)"},{command:"remote-containers.openRepositoryInVolume",title:"%command.openRepositoryInVolume%",category:"%command.category%"},{command:"remote-containers.openRepositoryInUniqueVolume",title:"%command.openRepositoryInUniqueVolume%",icon:"$(repo-clone)",category:"%command.category%"},{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",title:"%command.openRepositoryFromRemoteHubWithEditSession%",icon:"$(repo-clone)",category:"%command.category%"},{command:"remote-containers.openRepositoryFromGitWithEditSession",title:"%command.openRepositoryFromGitWithEditSession%",icon:"$(repo-clone)",category:"%command.category%"},{command:"remote-containers.openPullRequestInVolume",title:"%command.openPullRequestInVolume%",category:"%command.category%"},{command:"remote-containers.inspectVolume",title:"%command.inspectVolume%",category:"%command.category%"},{command:"remote-containers.openWorkspace",title:"%command.openWorkspace%",category:"%command.category%"},{command:"remote-containers.attachToRunningContainer",title:"%command.attachToRunningContainer%",category:"%command.category%"},{command:"remote-containers.attachToRunningContainerFromViewlet",title:"%command.attachToRunningContainerFromViewlet%",category:"%command.category%"},{command:"remote-containers.inspectVolumeFromViewlet",title:"%command.inspectVolumeFromViewlet%",category:"%command.category%"},{command:"remote-containers.cloneInVolumeFromViewlet",title:"%command.cloneInVolumeFromViewlet%",category:"%command.category%"},{command:"remote-containers.cleanUpDevContainers",title:"%command.cleanUpDevContainers%",category:"%command.category%",icon:"$(clear-all)"},{command:"remote-containers.pruneVolumes",title:"%command.pruneVolumes%",category:"%command.category%",icon:"$(clear-all)"},{command:"remote-containers.explorerVolumesRefresh",title:"%command.explorerVolumesRefresh%",category:"%command.category%",icon:"$(refresh)"},{command:"remote-containers.attachToK8sContainer",title:"%command.attachToK8sContainer%",category:"%command.category%"},{command:"remote-containers.attachToK8sContainerFromViewlet",title:"%command.attachToK8sContainerFromViewlet%",category:"%command.category%"},{command:"remote-containers.attachToAppleContainer",title:"%command.attachToAppleContainer%",category:"%command.category%"},{command:"remote-containers.switchContainer",title:"%command.switchContainer%",category:"%command.category%"},{command:"remote-containers.rebuildContainer",title:"%command.rebuildContainer%",category:"%command.category%",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.rebuildContainerNoCache",title:"%command.rebuildContainerNoCache%",category:"%command.category%",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.createDevContainerFile",title:"%command.createDevContainerFile%",category:"%command.category%"},{command:"remote-containers.createDevContainerFileWithCopilot",title:"%command.createDevContainerFileWithCopilot%",category:"%command.category%"},{command:"remote-containers.createDevContainer",title:"%command.createDevContainer%",category:"%command.category%"},{command:"remote-containers.settings",title:"%command.settings%",category:"%command.category%"},{command:"remote-containers.getHelp",title:"%command.getHelp%",category:"%command.category%"},{command:"remote-containers.getStarted",title:"%command.getStarted%",category:"%command.category%"},{command:"remote-containers.trySample",title:"%command.trySample%",category:"%command.category%"},{command:"remote-containers.reportIssue",title:"%command.reportIssue%",category:"%command.category%"},{command:"remote-containers.provideFeedback",title:"%command.provideFeedback%",category:"%command.category%"},{command:"remote-containers.openDevContainerFile",title:"%command.openDevContainerFile%",category:"%command.category%",icon:{light:"resources/light/gear.svg",dark:"resources/dark/gear.svg"}},{command:"remote-containers.openAttachConfigByNameFile",title:"%command.openAttachConfigByNameFile%",category:"%command.category%"},{command:"remote-containers.openAttachDevContainerFile",title:"%command.openAttachDevContainerFile%",category:"%command.category%"},{command:"remote-containers.revealLogTerminal",title:"%command.revealLogTerminal%",category:"%command.category%"},{command:"remote-containers.openLogFile",title:"%command.openLogFile%",category:"%command.developerCategory%"},{command:"remote-containers.openLastLogFile",title:"%command.openLastLogFile%",category:"%command.category%"},{command:"remote-containers.testConnection",title:"%command.testConnection%",category:"%command.developerCategory%"},{command:"remote-containers.attachToContainerInCurrentWindow",title:"%command.attachToContainerInCurrentWindow%",category:"%command.category%",icon:"$(arrow-right)"},{command:"remote-containers.attachToContainerInNewWindow",title:"%command.attachToContainerInNewWindow%",category:"%command.category%",icon:"$(empty-window)"},{command:"remote-containers.stopContainer",title:"%command.stopContainer%",category:"%command.category%"},{command:"remote-containers.startContainer",title:"%command.startContainer%",category:"%command.category%",icon:{light:"resources/light/vm-start.svg",dark:"resources/dark/vm-start.svg"}},{command:"remote-containers.removeContainer",title:"%command.removeContainer%",category:"%command.category%",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.removeRecentFolder",title:"%command.removeRecentFolder%",category:"%command.category%",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.showDetails",title:"%command.showDetails%",category:"%command.category%"},{command:"remote-containers.explorerTargetsRefresh",title:"%command.explorerTargetsRefresh%",category:"%command.category%",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.explorerDetailsRefresh",title:"%command.explorerDetailsRefresh%",category:"%command.category%",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.inspectDockerResource",title:"%command.inspectDockerResource%",category:"%command.category%"},{command:"remote-containers.inspectInBasicDevContainer",title:"%command.inspectInBasicDevContainer%",category:"%command.category%"},{command:"remote-containers.cloneInVolume",title:"%command.cloneInVolume%",category:"%command.category%"},{command:"remote-containers.removeVolume",title:"%command.removeVolume%",category:"%command.category%"},{command:"remote-containers.newContainer",title:"%command.newContainer%",category:"%command.category%",icon:{light:"resources/light/plus.svg",dark:"resources/dark/plus.svg"}},{command:"remote-containers.showContainerLog",title:"%command.showContainerLog%",category:"%command.category%"},{command:"remote-containers.addExtensionToConfig",title:"%command.addExtensionToConfig%",category:"%command.category%"},{command:"remote-containers.checkoutPRInVolume",title:"%command.checkoutPRInVolume%",category:"%command.category%"},{command:"remote-containers.showReopenInContainerNotificationReset",title:"%command.showReopenInContainerNotificationReset%",category:"%command.category%"},{command:"remote-containers.showRecoveryContainerNotificationReset",title:"%command.showRecoveryContainerNotificationReset%",category:"%command.category%"},{command:"remote-containers.labelPortAndUpdateConfig",title:"%command.labelPortAndUpdateConfig%",category:"%command.category%",icon:"$(tag)"},{command:"remote-containers.installDocker",title:"%command.installDocker%",category:"%command.category%"},{command:"remote-containers.installDockerInWSL",title:"%command.installDockerInWSL%",category:"%command.category%"},{command:"remote-containers.installUserCLI",title:"%command.installUserCLI%",category:"%command.category%"},{command:"remote-containers.configureContainerFeatures",title:"%command.configureContainerFeatures%",category:"%command.category%"}],menus:{commandPalette:[{command:"remote-containers.reopenInContainer",when:"!hideConnectCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",when:"!hideConnectCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.reopenInContainer",when:"!hideConnectCommands && workspaceFolderCount != 0 && remoteName == dev-container && isRecoveryContainer"},{command:"remote-containers.rebuildAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.reopenLocally",when:"!hideConnectCommands && canReopenLocally"},{command:"remote-containers.reopenInWSL",when:"!hideConnectCommands && canReopenInWSL"},{command:"remote-containers.reopenInSSH",when:"!hideConnectCommands && canReopenInSSH"},{command:"remote-containers.reopenInTunnel",when:"!hideConnectCommands && canReopenInTunnel"},{command:"remote-containers.openFolder",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openRepositoryInVolume",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openPullRequestInVolume",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.createDevContainer",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openWorkspace",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToRunningContainer",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToRunningContainerFromViewlet",when:"false"},{command:"remote-containers.inspectVolumeFromViewlet",when:"false"},{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",when:"false"},{command:"remote-containers.openRepositoryFromGitWithEditSession",when:"false"},{command:"remote-containers.cloneInVolumeFromViewlet",when:"false"},{command:"remote-containers.inspectInBasicDevContainer",when:"false"},{command:"remote-containers.cloneInVolume",when:"false"},{command:"remote-containers.removeVolume",when:"false"},{command:"remote-containers.attachToK8sContainer",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToAppleContainer",when:"!hideConnectCommands && config.dev.containers.experimentalAppleContainerSupport && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToK8sContainerFromViewlet",when:"false"},{command:"remote-containers.checkoutPRInVolume",when:"false"},{command:"remote-containers.switchContainer",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainer",when:"!hideRebuildCommands && remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainerNoCache",when:"!hideRebuildCommands && remoteName =~ /^dev-container$/"},{command:"remote-containers.testConnection",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.createDevContainerFile",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",when:"remoteName =~ /^(dev-container|wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.createDevContainerFileWithCopilot",when:"false && github.copilot.activated && !remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFileWithCopilot",when:"false && github.copilot.activated && remoteName =~ /^(dev-container|wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openDevContainerFile",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.openAttachConfigByNameFile",when:"remoteName == attached-container"},{command:"remote-containers.openAttachDevContainerFile",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.getStarted",when:"!remoteName && !virtualWorkspace || remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.trySample",when:"!hideConnectCommands && !remoteName && !virtualWorkspace"},{command:"remote-containers.trySample",when:"!hideConnectCommands && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.provideFeedback",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container)$/"},{command:"remote-containers.attachToContainerInCurrentWindow",when:"false"},{command:"remote-containers.attachToContainerInNewWindow",when:"false"},{command:"remote-containers.stopContainer",when:"false"},{command:"remote-containers.removeContainer",when:"false"},{command:"remote-containers.startContainer",when:"false"},{command:"remote-containers.removeRecentFolder",when:"false"},{command:"remote-containers.showDetails",when:"false"},{command:"remote-containers.explorerTargetsRefresh",when:"false"},{command:"remote-containers.explorerVolumesRefresh",when:"false"},{command:"remote-containers.explorerDetailsRefresh",when:"false"},{command:"remote-containers.inspectDockerResource",when:"false"},{command:"remote-containers.openFolderInContainerInCurrentWindow",when:"false"},{command:"remote-containers.openFolderInContainerInNewWindow",when:"false"},{command:"remote-containers.openInformationAboutMountPerformance",when:"false"},{command:"remote-containers.newContainer",when:"false"},{command:"remote-containers.showContainerLog",when:"false"},{command:"remote-containers.labelPortAndUpdateConfig",when:"false"},{command:"remote-containers.addExtensionToConfig",when:"false"},{command:"remote-containers.installDockerInWSL",when:"!hideConnectCommands && isWindows && !remoteName && !virtualWorkspace"},{command:"remote-containers.configureContainerFeatures",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.configureContainerFeatures",when:"remoteName =~ /^(dev-container|wsl|ssh-remote|tunnel)$/"}],"statusBar/remoteIndicator":[{command:"remote-containers.openDevContainerFile",group:"remote_30_dev-container_2_actions@0",when:"true"},{command:"remote-containers.createDevContainer",group:"remote_30_dev-container_2_actions@1",when:"!hideConnectCommands"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_2_actions@2",when:"!hideConnectCommands"},{command:"remote-containers.configureContainerFeatures",group:"remote_30_dev-container_2_actions@3",when:"remoteName =~ /^(dev-container)$/"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@4",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@4",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"!hideConnectCommands && workspaceFolderCount == 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"!hideConnectCommands && remoteName =~ /tunnel*.*/ && gitOpenRepositoryCount == 0"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"!hideConnectCommands && workspaceFolderCount == 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildContainer",group:"remote_30_dev-container_2_actions@6",when:"!hideRebuildCommands && remoteName =~ /^dev-container$/"},{command:"remote-containers.reopenLocally",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenLocally"},{command:"remote-containers.reopenInWSL",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenInWSL"},{command:"remote-containers.reopenInSSH",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenInSSH"},{command:"remote-containers.reopenInTunnel",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenInTunnel"},{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@8",when:"!hideConnectCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@8",when:"!hideConnectCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_2_actions@8",when:"!hideConnectCommands && workspaceFolderCount == 0 && !remoteName && !virtualWorkspace"}],"view/title":[{command:"remote-containers.explorerTargetsRefresh",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation@3"},{command:"remote-containers.newContainer",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation@1"},{command:"remote-containers.cleanUpDevContainers",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation@2"},{command:"remote-containers.newContainer",when:"!hideConnectCommands && (view == dockerContainers || view == vscode-containers.views.containers)",group:"navigation"},{command:"remote-containers.explorerDetailsRefresh",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.attachToContainerInNewWindow",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.rebuildContainer",when:"!hideRebuildCommands && view == detailsContainers && remoteName == dev-container",group:"navigation"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && remoteName =~ /^(dev|attached)-container$/",group:"navigation"},{command:"remote-containers.pruneVolumes",when:"view == devVolumes",group:"navigation@2"},{command:"remote-containers.explorerVolumesRefresh",when:"view == devVolumes",group:"navigation@3"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"view == devVolumes",group:"navigation@1"}],"view/item/context":[{command:"remote-containers.attachToRunningContainerFromViewlet",when:"!hideConnectCommands && (view == dockerContainers || view == vscode-containers.views.containers) && viewItem =~ /^runningContainer$/i",group:"containers_1_general@2"},{command:"remote-containers.inspectVolumeFromViewlet",when:"!hideConnectCommands && (view == dockerVolumes || view == vscode-containers.views.volumes) && viewItem == volume",group:"volumes_1_general@2"},{command:"remote-containers.checkoutPRInVolume",when:"!hideConnectCommands && view =~ /pr:/ && viewItem =~ /pullrequest(:local)?:nonactive|description/",group:"1_pullrequest@3"},{command:"remote-containers.attachToK8sContainerFromViewlet",group:"2@4",when:"!hideConnectCommands && view == extension.vsKubernetesExplorer && viewItem =~ /vsKubernetes\\.resource\\.pod/i"},{command:"remote-containers.openFolderInContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"1_folder@1"},{command:"remote-containers.openFolderInContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"inline@1"},{command:"remote-containers.openFolderInContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"1_folder@2"},{command:"remote-containers.openFolderInContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"inline@2"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"2_folder@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"inline@3"},{command:"workbench.action.closeFolder",when:"view == targetsContainers && viewItem =~ /active.*Folder/",group:"1_folder@1"},{command:"remote-containers.reopenLocally",when:"!hideConnectCommands && canReopenLocally && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInWSL",when:"!hideConnectCommands && canReopenInWSL && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInSSH",when:"!hideConnectCommands && canReopenInSSH && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInTunnel",when:"!hideConnectCommands && canReopenInTunnel && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.attachToContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"1_container@1"},{command:"remote-containers.attachToContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"inline@1"},{command:"remote-containers.attachToContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"1_container@2"},{command:"remote-containers.attachToContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"inline@2"},{command:"remote-containers.stopContainer",when:"view == targetsContainers && viewItem =~ /^running(Dev|)Container/",group:"2_container@2"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"2_container@3"},{command:"remote-containers.rebuildContainer",when:"!hideRebuildCommands && view == targetsContainers && viewItem =~ /activeDevContainer/",group:"2_container@1"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"inline@3"},{command:"remote-containers.startContainer",when:"view == targetsContainers && viewItem =~ /^exited(Dev|)Container/",group:"1_container@3"},{command:"remote-containers.showDetails",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@4"},{command:"remote-containers.inspectDockerResource",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@5"},{command:"remote-containers.showContainerLog",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@6"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && viewItem == devContainer"},{command:"remote-containers.inspectDockerResource",when:"view == detailsContainers && viewItem =~ /^(image|volume)$/"},{command:"remote-containers.openInformationAboutMountPerformance",when:"view == detailsContainers && viewItem == mountPerformanceInfo",group:"inline@1"},{command:"remote-containers.cloneInVolume",when:"view == devVolumes && viewItem =~ /^(devVolume)$/",group:"1_volumes@1"},{command:"remote-containers.inspectInBasicDevContainer",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@1"},{command:"remote-containers.inspectDockerResource",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@2"},{command:"remote-containers.removeVolume",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"3_volumes-destructive@1"}],"ports/item/port/inline":[{command:"remote-containers.labelPortAndUpdateConfig",group:"0_manage@4",when:"remoteName =~ /^(dev|attached)-container$/ && tunnelType == Forwarded"}],"extension/context":[{command:"remote-containers.addExtensionToConfig",group:"2_configure",when:"!isBuiltinExtension && !isWorkspaceScopedExtension && remoteName =~ /^(dev-container|attached-container|wsl|ssh-remote|tunnel)?$/"}]},resourceLabelFormatters:[{scheme:"vscode-remote",authority:"dev-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.dev-container.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"attached-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.attached-container.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"exec+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.exec.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"k8s-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.k8s-container.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"apple-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.apple-container.workspaceSuffix%"}}],views:{remote:[{id:"targetsContainers",name:"%views.remote.targetsContainers%",when:"!hideConnectCommands",group:"targets@2",remoteName:["dev-container","attached-container","exec","k8s-container","apple-container"]},{id:"detailsContainers",name:"%views.remote.detailsContainers%",when:"!hideConnectCommands && remote-containers:showDetails",group:"details@1",remoteName:["dev-container","attached-container"]},{id:"devVolumes",name:"%views.remote.devVolumes%",when:"!hideConnectCommands",group:"details@2",remoteName:["dev-container","attached-container"]}]},viewsWelcome:[{view:"targetsContainers",when:"remote-containers:needsDockerStartOrInstall",contents:"%viewsWelcome.targetsContainers.needsDockerStartOrInstall%"},{view:"targetsContainers",when:"remote-containers:needsSSHCredentials",contents:"%viewsWelcome.targetsContainers.needsSSHCredentials%"},{view:"targetsContainers",when:"remote-containers:noContainersWithFolder",contents:"%viewsWelcome.targetsContainers.noContainersWithFolder%"},{view:"targetsContainers",when:"remote-containers:noContainersWithoutFolder",contents:"%viewsWelcome.targetsContainers.noContainersWithoutFolder%"},{view:"devVolumes",when:"remote-containers:noDevVolumes",contents:"%viewsWelcome.devVolumes.noDevVolumes%"}],remoteHelp:{getStarted:"https://aka.ms/vscode-remote/containers/tutorial-sandbox",documentation:"https://aka.ms/vscode-remote/containers",issues:"https://aka.ms/vscode-remote/containers/issues",remoteName:["dev-container","attached-container","exec","k8s-container","apple-container"]}},scripts:{"vscode:prepublish":"npx npm-run-all --npm-path npm clean compile-prod dev-containers-user-cli-prepare",compile:"npx npm-run-all --npm-path npm clean-dist compile-dev",watch:"npx npm-run-all --npm-path npm clean-dist compile-watch",postinstall:"yarn --cwd node_modules/@devcontainers/cli",precommit:"node build/hygiene.js",package:"vsce package --yarn",lint:"eslint -c .eslintrc.js --rulesdir ./build/eslint --max-warnings 0 --ext .ts ./src ./test","compile-prod":"npx npm-run-all --npm-path npm compile-cli-prod copy-cli esbuild-prod","compile-dev":"npx npm-run-all --npm-path npm compile-cli-dev copy-cli esbuild-dev","compile-watch":"npx npm-run-all --npm-path npm --parallel compile-cli-watch watch-cli esbuild-watch","esbuild-prod":"node esbuild.js --production","esbuild-dev":"node esbuild.js","esbuild-watch":"node esbuild.js --watch","compile-cli-prod":"yarn --cwd node_modules/@devcontainers/cli compile-prod","compile-cli-dev":"yarn --cwd node_modules/@devcontainers/cli compile-dev","compile-cli-watch":"yarn --cwd node_modules/@devcontainers/cli compile-watch","copy-cli":'copyfiles --up 4 --all "node_modules/@devcontainers/cli/dist/spec-node/devContainersSpecCLI.js" dist',"watch-cli":"npm-watch","type-check":"npx npm-run-all --npm-path npm clean-built tsc-b","tsc-b":"tsc -b","type-check-watch":"npx npm-run-all --npm-path npm clean-built tsc-b-w","tsc-b-w":"tsc -b -w","dev-containers-cli-publish":"npx npm-run-all --npm-path npm dev-containers-cli-prepare dev-containers-cli-npm-publish","dev-containers-cli-package":"npx npm-run-all --npm-path npm dev-containers-cli-prepare dev-containers-cli-npm-pack","dev-containers-cli-prepare":"npx npm-run-all --npm-path npm clean dev-containers-cli-compile dev-containers-cli-copy-module","dev-containers-cli-compile":"npx npm-run-all --npm-path npm compile-prod","dev-containers-cli-copy-module":"copyfiles ThirdPartyNotices.txt dist/node/devContainersCLI.js dev-containers-cli","dev-containers-cli-npm-publish":"cd dev-containers-cli && npm publish","dev-containers-cli-npm-pack":"cd dev-containers-cli && npm pack","dev-containers-user-cli-package":"npx npm-run-all --npm-path npm dev-containers-user-cli-prepare dev-containers-user-cli-npm-pack","dev-containers-user-cli-prepare":"npx npm-run-all --npm-path npm dev-containers-user-cli-copy-module","dev-containers-user-cli-clean-prepare":"npx npm-run-all --npm-path npm clean dev-containers-user-prepare","dev-containers-user-cli-copy-module":'copyfiles ThirdPartyNotices.txt dist/node/devContainersUserCLI.js dist/spec-node/devContainersSpecCLI.js "scripts/**/*" dev-containers-user-cli',"dev-containers-user-cli-npm-pack":"cd dev-containers-user-cli && npm pack",clean:"npx npm-run-all --npm-path npm clean-dist clean-built","clean-dist":"rimraf dist dev-containers-cli/dist dev-containers-cli/scripts dev-containers-user-cli/dist dev-containers-user-cli/scripts","clean-built":"rimraf built",test:"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit test/core/**/*.test.ts","test-matrix":"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit","test-no-env":"mocha -r ts-node/register --exit test/core/**/*.test.ts","test-dev-containers":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/**/*.test.ts",copytestconfigsforalpine:"/bin/bash -c 'cd test/configs && for f in *; do if [[ -d $f ]] && [[ $f != *alpine* ]]; then cp -r -T $f $f-alpine ; fi ; done'"},watch:{"copy-cli":"node_modules/@devcontainers/cli/dist/spec-node/devContainersSpecCLI.js"},devDependencies:{"@stylistic/eslint-plugin":"^3.0.1","@types/adm-zip":"^0.5.7","@types/chai":"^4.3.20","@types/follow-redirects":"^1.14.4","@types/js-yaml":"^4.0.9","@types/markdown-it":"^14.1.2","@types/minimist":"^1.2.5","@types/mocha":"^10.0.10","@types/ncp":"^2.0.8","@types/node":"^20.19.22","@types/pull-stream":"^3.6.7","@types/recursive-readdir":"^2.2.4","@types/semver":"^7.7.1","@types/stats-lite":"^2.2.2","@types/tar":"^6.1.13","@types/tar-stream":"^3.1.4","@types/vscode":"~1.86.0","@types/yargs":"^17.0.33","@typescript-eslint/eslint-plugin":"^8.46.2","@typescript-eslint/experimental-utils":"^5.62.0","@typescript-eslint/parser":"^8.46.2","@vscode/l10n-dev":"^0.0.35","@vscode/vsce":"^3.6.2",ajv:"^8.17.1",chai:"^4.5.0",copyfiles:"^2.4.1",esbuild:"^0.25.11",eslint:"^8.57.0","eslint-plugin-local":"^6.0.0","event-stream":"^4.0.1","gulp-eslint":"^6.0.0","gulp-filter":"^9.0.1",husky:"^9.1.7",jsonc:"^2.0.0",minimist:"^1.2.8",mocha:"^11.7.4","npm-run-all":"^4.1.5","npm-watch":"^0.13.0","p-all":"^5.0.1",rimraf:"^6.0.1","stats-lite":"^2.2.0","ts-node":"^10.9.2",typescript:"^5.9.3","typescript-formatter":"^7.2.2",vinyl:"^3.0.1","vinyl-fs":"^4.0.2"},dependencies:{"@devcontainers/cli":"https://github.com/devcontainers/cli.git#0efa20b34ffebff8304448fe6a3b121735aa77ec","@vscode/extension-telemetry":"^0.9.9","@vscode/l10n":"^0.0.18","adm-zip":"^0.5.16",applicationinsights:"^2.9.8","find-process":"^2.0.0","follow-redirects":"^1.15.11","js-yaml":"^4.1.0","jsonc-parser":"^3.3.1",muxrpc:"^6.7.3","node-pty":"^1.0.0","pull-pushable":"^2.2.0","pull-stream":"^3.7.0","pull-stream-to-stream":"^2.0.0",semver:"^7.7.3","stream-to-pull-stream":"^1.7.3",tar:"^6.2.1","tar-stream":"^3.1.7","vscode-tas-client":"^0.1.84","vscode-uri":"^3.1.0",yargs:"~17.7.2"}}});var _ve={};PC(_ve,{activate:()=>Gge,attachToContainer:()=>vC,deactivate:()=>Xge});module.exports=j9(_ve);var O=Y(require("vscode")),I9=Y(Mr()),re=require("vscode"),P9=Y(require("os")),U0=Y(require("fs")),ut=Y(require("path")),b9=Y(require("querystring"));function bg(t,e=!1){let n=t.length,r=0,o="",i=0,s=16,a=0,c=0,l=0,u=0,f=0;function m(w,y){let S=0,D=0;for(;S<w||!y;){let _=t.charCodeAt(r);if(_>=48&&_<=57)D=D*16+_-48;else if(_>=65&&_<=70)D=D*16+_-65+10;else if(_>=97&&_<=102)D=D*16+_-97+10;else break;r++,S++}return S<w&&(D=-1),D}function d(w){r=w,o="",i=0,s=16,f=0}function p(){let w=r;if(t.charCodeAt(r)===48)r++;else for(r++;r<t.length&&_m(t.charCodeAt(r));)r++;if(r<t.length&&t.charCodeAt(r)===46)if(r++,r<t.length&&_m(t.charCodeAt(r)))for(r++;r<t.length&&_m(t.charCodeAt(r));)r++;else return f=3,t.substring(w,r);let y=r;if(r<t.length&&(t.charCodeAt(r)===69||t.charCodeAt(r)===101))if(r++,(r<t.length&&t.charCodeAt(r)===43||t.charCodeAt(r)===45)&&r++,r<t.length&&_m(t.charCodeAt(r))){for(r++;r<t.length&&_m(t.charCodeAt(r));)r++;y=r}else f=3;return t.substring(w,y)}function g(){let w="",y=r;for(;;){if(r>=n){w+=t.substring(y,r),f=2;break}let S=t.charCodeAt(r);if(S===34){w+=t.substring(y,r),r++;break}if(S===92){if(w+=t.substring(y,r),r++,r>=n){f=2;break}switch(t.charCodeAt(r++)){case 34:w+='"';break;case 92:w+="\\";break;case 47:w+="/";break;case 98:w+="\b";break;case 102:w+="\f";break;case 110:w+=`
`;break;case 114:w+="\r";break;case 116:w+="	";break;case 117:let _=m(4,!0);_>=0?w+=String.fromCharCode(_):f=4;break;default:f=5}y=r;continue}if(S>=0&&S<=31)if(Pg(S)){w+=t.substring(y,r),f=2;break}else f=6;r++}return w}function h(){if(o="",f=0,i=r,c=a,u=l,r>=n)return i=n,s=17;let w=t.charCodeAt(r);if(B0(w)){do r++,o+=String.fromCharCode(w),w=t.charCodeAt(r);while(B0(w));return s=15}if(Pg(w))return r++,o+=String.fromCharCode(w),w===13&&t.charCodeAt(r)===10&&(r++,o+=`
`),a++,l=r,s=14;switch(w){case 123:return r++,s=1;case 125:return r++,s=2;case 91:return r++,s=3;case 93:return r++,s=4;case 58:return r++,s=6;case 44:return r++,s=5;case 34:return r++,o=g(),s=10;case 47:let y=r-1;if(t.charCodeAt(r+1)===47){for(r+=2;r<n&&!Pg(t.charCodeAt(r));)r++;return o=t.substring(y,r),s=12}if(t.charCodeAt(r+1)===42){r+=2;let S=n-1,D=!1;for(;r<S;){let _=t.charCodeAt(r);if(_===42&&t.charCodeAt(r+1)===47){r+=2,D=!0;break}r++,Pg(_)&&(_===13&&t.charCodeAt(r)===10&&r++,a++,l=r)}return D||(r++,f=1),o=t.substring(y,r),s=13}return o+=String.fromCharCode(w),r++,s=16;case 45:if(o+=String.fromCharCode(w),r++,r===n||!_m(t.charCodeAt(r)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return o+=p(),s=11;default:for(;r<n&&v(w);)r++,w=t.charCodeAt(r);if(i!==r){switch(o=t.substring(i,r),o){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return o+=String.fromCharCode(w),r++,s=16}}function v(w){if(B0(w)||Pg(w))return!1;switch(w){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function C(){let w;do w=h();while(w>=12&&w<=15);return w}return{setPosition:d,getPosition:()=>r,scan:e?C:h,getToken:()=>s,getTokenValue:()=>o,getTokenOffset:()=>i,getTokenLength:()=>r-i,getTokenStartLine:()=>c,getTokenStartCharacter:()=>i-u,getTokenError:()=>f}}function B0(t){return t===32||t===9}function Pg(t){return t===10||t===13}function _m(t){return t>=48&&t<=57}var zO;(function(t){t[t.lineFeed=10]="lineFeed",t[t.carriageReturn=13]="carriageReturn",t[t.space=32]="space",t[t._0=48]="_0",t[t._1=49]="_1",t[t._2=50]="_2",t[t._3=51]="_3",t[t._4=52]="_4",t[t._5=53]="_5",t[t._6=54]="_6",t[t._7=55]="_7",t[t._8=56]="_8",t[t._9=57]="_9",t[t.a=97]="a",t[t.b=98]="b",t[t.c=99]="c",t[t.d=100]="d",t[t.e=101]="e",t[t.f=102]="f",t[t.g=103]="g",t[t.h=104]="h",t[t.i=105]="i",t[t.j=106]="j",t[t.k=107]="k",t[t.l=108]="l",t[t.m=109]="m",t[t.n=110]="n",t[t.o=111]="o",t[t.p=112]="p",t[t.q=113]="q",t[t.r=114]="r",t[t.s=115]="s",t[t.t=116]="t",t[t.u=117]="u",t[t.v=118]="v",t[t.w=119]="w",t[t.x=120]="x",t[t.y=121]="y",t[t.z=122]="z",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.asterisk=42]="asterisk",t[t.backslash=92]="backslash",t[t.closeBrace=125]="closeBrace",t[t.closeBracket=93]="closeBracket",t[t.colon=58]="colon",t[t.comma=44]="comma",t[t.dot=46]="dot",t[t.doubleQuote=34]="doubleQuote",t[t.minus=45]="minus",t[t.openBrace=123]="openBrace",t[t.openBracket=91]="openBracket",t[t.plus=43]="plus",t[t.slash=47]="slash",t[t.formFeed=12]="formFeed",t[t.tab=9]="tab"})(zO||(zO={}));var Xo=new Array(20).fill(0).map((t,e)=>" ".repeat(e)),Dm=200,W0={" ":{"\n":new Array(Dm).fill(0).map((t,e)=>`
`+" ".repeat(e)),"\r":new Array(Dm).fill(0).map((t,e)=>"\r"+" ".repeat(e)),"\r\n":new Array(Dm).fill(0).map((t,e)=>`\r
`+" ".repeat(e))},"	":{"\n":new Array(Dm).fill(0).map((t,e)=>`
`+"	".repeat(e)),"\r":new Array(Dm).fill(0).map((t,e)=>"\r"+"	".repeat(e)),"\r\n":new Array(Dm).fill(0).map((t,e)=>`\r
`+"	".repeat(e))}},KO=[`
`,"\r",`\r
`];function j0(t,e,n){let r,o,i,s,a;if(e){for(s=e.offset,a=s+e.length,i=s;i>0&&!Tg(t,i-1);)i--;let S=a;for(;S<t.length&&!Tg(t,S);)S++;o=t.substring(i,S),r=r7(o,n)}else o=t,r=0,i=0,s=0,a=t.length;let c=o7(n,t),l=KO.includes(c),u=0,f=0,m;n.insertSpaces?m=Xo[n.tabSize||4]??Im(Xo[1],n.tabSize||4):m="	";let d=m==="	"?"	":" ",p=bg(o,!1),g=!1;function h(){if(u>1)return Im(c,u)+Im(m,r+f);let S=m.length*(r+f);return!l||S>W0[d][c].length?c+Im(m,r+f):S<=0?c:W0[d][c][S]}function v(){let S=p.scan();for(u=0;S===15||S===14;)S===14&&n.keepLines?u+=1:S===14&&(u=1),S=p.scan();return g=S===16||p.getTokenError()!==0,S}let C=[];function w(S,D,_){!g&&(!e||D<a&&_>s)&&t.substring(D,_)!==S&&C.push({offset:D,length:_-D,content:S})}let y=v();if(n.keepLines&&u>0&&w(Im(c,u),0,0),y!==17){let S=p.getTokenOffset()+i,D=m.length*r<20&&n.insertSpaces?Xo[m.length*r]:Im(m,r);w(D,i,S)}for(;y!==17;){let S=p.getTokenOffset()+p.getTokenLength()+i,D=v(),_="",A=!1;for(;u===0&&(D===12||D===13);){let k=p.getTokenOffset()+i;w(Xo[1],S,k),S=p.getTokenOffset()+p.getTokenLength()+i,A=D===12,_=A?h():"",D=v()}if(D===2)y!==1&&f--,n.keepLines&&u>0||!n.keepLines&&y!==1?_=h():n.keepLines&&(_=Xo[1]);else if(D===4)y!==3&&f--,n.keepLines&&u>0||!n.keepLines&&y!==3?_=h():n.keepLines&&(_=Xo[1]);else{switch(y){case 3:case 1:f++,n.keepLines&&u>0||!n.keepLines?_=h():_=Xo[1];break;case 5:n.keepLines&&u>0||!n.keepLines?_=h():_=Xo[1];break;case 12:_=h();break;case 13:u>0?_=h():A||(_=Xo[1]);break;case 6:n.keepLines&&u>0?_=h():A||(_=Xo[1]);break;case 10:n.keepLines&&u>0?_=h():D===6&&!A&&(_="");break;case 7:case 8:case 9:case 11:case 2:case 4:n.keepLines&&u>0?_=h():(D===12||D===13)&&!A?_=Xo[1]:D!==5&&D!==17&&(g=!0);break;case 16:g=!0;break}u>0&&(D===12||D===13)&&(_=h())}D===17&&(n.keepLines&&u>0?_=h():_=n.insertFinalNewline?c:"");let U=p.getTokenOffset()+i;w(_,S,U),y=D}return C}function Im(t,e){let n="";for(let r=0;r<e;r++)n+=t;return n}function r7(t,e){let n=0,r=0,o=e.tabSize||4;for(;n<t.length;){let i=t.charAt(n);if(i===Xo[1])r++;else if(i==="	")r+=o;else break;n++}return Math.floor(r/o)}function o7(t,e){for(let n=0;n<e.length;n++){let r=e.charAt(n);if(r==="\r")return n+1<e.length&&e.charAt(n+1)===`
`?`\r
`:"\r";if(r===`
`)return`
`}return t&&t.eol||`
`}function Tg(t,e){return`\r
`.indexOf(t.charAt(e))!==-1}var Rg;(function(t){t.DEFAULT={allowTrailingComma:!1}})(Rg||(Rg={}));function JO(t,e){let n=[],r=new Object,o,i={value:{},offset:0,length:0,type:"object",parent:void 0},s=!1;function a(c,l,u,f){i.value=c,i.offset=l,i.length=u,i.type=f,i.colonOffset=void 0,o=i}try{kC(t,{onObjectBegin:(c,l)=>{if(e<=c)throw r;o=void 0,s=e>c,n.push("")},onObjectProperty:(c,l,u)=>{if(e<l||(a(c,l,u,"property"),n[n.length-1]=c,e<=l+u))throw r},onObjectEnd:(c,l)=>{if(e<=c)throw r;o=void 0,n.pop()},onArrayBegin:(c,l)=>{if(e<=c)throw r;o=void 0,n.push(0)},onArrayEnd:(c,l)=>{if(e<=c)throw r;o=void 0,n.pop()},onLiteralValue:(c,l,u)=>{if(e<l||(a(c,l,u,ZO(c)),e<=l+u))throw r},onSeparator:(c,l,u)=>{if(e<=l)throw r;if(c===":"&&o&&o.type==="property")o.colonOffset=l,s=!1,o=void 0;else if(c===","){let f=n[n.length-1];typeof f=="number"?n[n.length-1]=f+1:(s=!0,n[n.length-1]=""),o=void 0}}})}catch(c){if(c!==r)throw c}return{path:n,previousNode:o,isAtPropertyKey:s,matches:c=>{let l=0;for(let u=0;l<c.length&&u<n.length;u++)if(c[l]===n[u]||c[l]==="*")l++;else if(c[l]!=="**")return!1;return l===c.length}}}function XO(t,e=[],n=Rg.DEFAULT){let r=null,o=[],i=[];function s(c){Array.isArray(o)?o.push(c):r!==null&&(o[r]=c)}return kC(t,{onObjectBegin:()=>{let c={};s(c),i.push(o),o=c,r=null},onObjectProperty:c=>{r=c},onObjectEnd:()=>{o=i.pop()},onArrayBegin:()=>{let c=[];s(c),i.push(o),o=c,r=null},onArrayEnd:()=>{o=i.pop()},onLiteralValue:s,onError:(c,l,u)=>{e.push({error:c,offset:l,length:u})}},n),o[0]}function RC(t,e=[],n=Rg.DEFAULT){let r={type:"array",offset:-1,length:-1,children:[],parent:void 0};function o(c){r.type==="property"&&(r.length=c-r.offset,r=r.parent)}function i(c){return r.children.push(c),c}kC(t,{onObjectBegin:c=>{r=i({type:"object",offset:c,length:-1,parent:r,children:[]})},onObjectProperty:(c,l,u)=>{r=i({type:"property",offset:l,length:-1,parent:r,children:[]}),r.children.push({type:"string",value:c,offset:l,length:u,parent:r})},onObjectEnd:(c,l)=>{o(c+l),r.length=c+l-r.offset,r=r.parent,o(c+l)},onArrayBegin:(c,l)=>{r=i({type:"array",offset:c,length:-1,parent:r,children:[]})},onArrayEnd:(c,l)=>{r.length=c+l-r.offset,r=r.parent,o(c+l)},onLiteralValue:(c,l,u)=>{i({type:ZO(c),offset:l,length:u,parent:r,value:c}),o(l+u)},onSeparator:(c,l,u)=>{r.type==="property"&&(c===":"?r.colonOffset=l:c===","&&o(l))},onError:(c,l,u)=>{e.push({error:c,offset:l,length:u})}},n);let a=r.children[0];return a&&delete a.parent,a}function kg(t,e){if(!t)return;let n=t;for(let r of e)if(typeof r=="string"){if(n.type!=="object"||!Array.isArray(n.children))return;let o=!1;for(let i of n.children)if(Array.isArray(i.children)&&i.children[0].value===r&&i.children.length===2){n=i.children[1],o=!0;break}if(!o)return}else{let o=r;if(n.type!=="array"||o<0||!Array.isArray(n.children)||o>=n.children.length)return;n=n.children[o]}return n}function TC(t){switch(t.type){case"array":return t.children.map(TC);case"object":let e=Object.create(null);for(let n of t.children){let r=n.children[1];r&&(e[n.children[0].value]=TC(r))}return e;case"null":case"string":case"number":case"boolean":return t.value;default:return}}function kC(t,e,n=Rg.DEFAULT){let r=bg(t,!1),o=[],i=0;function s(I){return I?()=>i===0&&I(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function a(I){return I?T=>i===0&&I(T,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function c(I){return I?T=>i===0&&I(T,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>o.slice()):()=>!0}function l(I){return I?()=>{i>0?i++:I(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>o.slice())===!1&&(i=1)}:()=>!0}function u(I){return I?()=>{i>0&&i--,i===0&&I(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter())}:()=>!0}let f=l(e.onObjectBegin),m=c(e.onObjectProperty),d=u(e.onObjectEnd),p=l(e.onArrayBegin),g=u(e.onArrayEnd),h=c(e.onLiteralValue),v=a(e.onSeparator),C=s(e.onComment),w=a(e.onError),y=n&&n.disallowComments,S=n&&n.allowTrailingComma;function D(){for(;;){let I=r.scan();switch(r.getTokenError()){case 4:_(14);break;case 5:_(15);break;case 3:_(13);break;case 1:y||_(11);break;case 2:_(12);break;case 6:_(16);break}switch(I){case 12:case 13:y?_(10):C();break;case 16:_(1);break;case 15:case 14:break;default:return I}}}function _(I,T=[],R=[]){if(w(I),T.length+R.length>0){let L=r.getToken();for(;L!==17;){if(T.indexOf(L)!==-1){D();break}else if(R.indexOf(L)!==-1)break;L=D()}}}function A(I){let T=r.getTokenValue();return I?h(T):(m(T),o.push(T)),D(),!0}function U(){switch(r.getToken()){case 11:let I=r.getTokenValue(),T=Number(I);isNaN(T)&&(_(2),T=0),h(T);break;case 7:h(null);break;case 8:h(!0);break;case 9:h(!1);break;default:return!1}return D(),!0}function k(){return r.getToken()!==10?(_(3,[],[2,5]),!1):(A(!1),r.getToken()===6?(v(":"),D(),b()||_(4,[],[2,5])):_(5,[],[2,5]),o.pop(),!0)}function E(){f(),D();let I=!1;for(;r.getToken()!==2&&r.getToken()!==17;){if(r.getToken()===5){if(I||_(4,[],[]),v(","),D(),r.getToken()===2&&S)break}else I&&_(6,[],[]);k()||_(4,[],[2,5]),I=!0}return d(),r.getToken()!==2?_(7,[2],[]):D(),!0}function x(){p(),D();let I=!0,T=!1;for(;r.getToken()!==4&&r.getToken()!==17;){if(r.getToken()===5){if(T||_(4,[],[]),v(","),D(),r.getToken()===4&&S)break}else T&&_(6,[],[]);I?(o.push(0),I=!1):o[o.length-1]++,b()||_(4,[],[4,5]),T=!0}return g(),I||o.pop(),r.getToken()!==4?_(8,[4],[]):D(),!0}function b(){switch(r.getToken()){case 3:return x();case 1:return E();case 10:return A(!0);default:return U()}}return D(),r.getToken()===17?n.allowEmptyContent?!0:(_(4,[],[]),!1):b()?(r.getToken()!==17&&_(9,[],[]),!0):(_(4,[],[]),!1)}function ZO(t){switch(typeof t){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(t){if(Array.isArray(t))return"array"}else return"null";return"object"}default:return"null"}}function QO(t,e,n,r){let o=e.slice(),s=RC(t,[]),a,c;for(;o.length>0&&(c=o.pop(),a=kg(s,o),a===void 0&&n!==void 0);)typeof c=="string"?n={[c]:n}:n=[n];if(a)if(a.type==="object"&&typeof c=="string"&&Array.isArray(a.children)){let l=kg(a,[c]);if(l!==void 0)if(n===void 0){if(!l.parent)throw new Error("Malformed AST");let u=a.children.indexOf(l.parent),f,m=l.parent.offset+l.parent.length;if(u>0){let d=a.children[u-1];f=d.offset+d.length}else f=a.offset+1,a.children.length>1&&(m=a.children[1].offset);return af(t,{offset:f,length:m-f,content:""},r)}else return af(t,{offset:l.offset,length:l.length,content:JSON.stringify(n)},r);else{if(n===void 0)return[];let u=`${JSON.stringify(c)}: ${JSON.stringify(n)}`,f=r.getInsertionIndex?r.getInsertionIndex(a.children.map(d=>d.children[0].value)):a.children.length,m;if(f>0){let d=a.children[f-1];m={offset:d.offset+d.length,length:0,content:","+u}}else a.children.length===0?m={offset:a.offset+1,length:0,content:u}:m={offset:a.offset+1,length:0,content:u+","};return af(t,m,r)}}else if(a.type==="array"&&typeof c=="number"&&Array.isArray(a.children)){let l=c;if(l===-1){let u=`${JSON.stringify(n)}`,f;if(a.children.length===0)f={offset:a.offset+1,length:0,content:u};else{let m=a.children[a.children.length-1];f={offset:m.offset+m.length,length:0,content:","+u}}return af(t,f,r)}else if(n===void 0&&a.children.length>=0){let u=c,f=a.children[u],m;if(a.children.length===1)m={offset:a.offset+1,length:a.length-2,content:""};else if(a.children.length-1===u){let d=a.children[u-1],p=d.offset+d.length,g=a.offset+a.length;m={offset:p,length:g-2-p,content:""}}else m={offset:f.offset,length:a.children[u+1].offset-f.offset,content:""};return af(t,m,r)}else if(n!==void 0){let u,f=`${JSON.stringify(n)}`;if(!r.isArrayInsertion&&a.children.length>c){let m=a.children[c];u={offset:m.offset,length:m.length,content:f}}else if(a.children.length===0||c===0)u={offset:a.offset+1,length:0,content:a.children.length===0?f:f+","};else{let m=c>a.children.length?a.children.length:c,d=a.children[m-1];u={offset:d.offset+d.length,length:0,content:","+f}}return af(t,u,r)}else throw new Error(`Can not ${n===void 0?"remove":r.isArrayInsertion?"insert":"modify"} Array index ${l} as length is not sufficient`)}else throw new Error(`Can not add ${typeof c!="number"?"index":"property"} to parent of type ${a.type}`);else{if(n===void 0)throw new Error("Can not delete in empty document");return af(t,{offset:s?s.offset:0,length:s?s.length:0,content:JSON.stringify(n)},r)}}function af(t,e,n){if(!n.formattingOptions)return[e];let r=NC(t,e),o=e.offset,i=e.offset+e.content.length;if(e.length===0||e.content.length===0){for(;o>0&&!Tg(r,o-1);)o--;for(;i<r.length&&!Tg(r,i);)i++}let s=j0(r,{offset:o,length:i-o},{...n.formattingOptions,keepLines:!1});for(let c=s.length-1;c>=0;c--){let l=s[c];r=NC(r,l),o=Math.min(o,l.offset),i=Math.max(i,l.offset+l.length),i+=l.content.length-l.length}let a=t.length-(r.length-i)-o;return[{offset:o,length:a,content:r.substring(o,i)}]}function NC(t,e){return t.substring(0,e.offset)+e.content+t.substring(e.offset+e.length)}var e1;(function(t){t[t.None=0]="None",t[t.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=2]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",t[t.InvalidUnicode=4]="InvalidUnicode",t[t.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",t[t.InvalidCharacter=6]="InvalidCharacter"})(e1||(e1={}));var t1;(function(t){t[t.OpenBraceToken=1]="OpenBraceToken",t[t.CloseBraceToken=2]="CloseBraceToken",t[t.OpenBracketToken=3]="OpenBracketToken",t[t.CloseBracketToken=4]="CloseBracketToken",t[t.CommaToken=5]="CommaToken",t[t.ColonToken=6]="ColonToken",t[t.NullKeyword=7]="NullKeyword",t[t.TrueKeyword=8]="TrueKeyword",t[t.FalseKeyword=9]="FalseKeyword",t[t.StringLiteral=10]="StringLiteral",t[t.NumericLiteral=11]="NumericLiteral",t[t.LineCommentTrivia=12]="LineCommentTrivia",t[t.BlockCommentTrivia=13]="BlockCommentTrivia",t[t.LineBreakTrivia=14]="LineBreakTrivia",t[t.Trivia=15]="Trivia",t[t.Unknown=16]="Unknown",t[t.EOF=17]="EOF"})(t1||(t1={}));var r1=JO,Me=XO,cf=RC,rs=kg;var LC=TC;var n1;(function(t){t[t.InvalidSymbol=1]="InvalidSymbol",t[t.InvalidNumberFormat=2]="InvalidNumberFormat",t[t.PropertyNameExpected=3]="PropertyNameExpected",t[t.ValueExpected=4]="ValueExpected",t[t.ColonExpected=5]="ColonExpected",t[t.CommaExpected=6]="CommaExpected",t[t.CloseBraceExpected=7]="CloseBraceExpected",t[t.CloseBracketExpected=8]="CloseBracketExpected",t[t.EndOfFileExpected=9]="EndOfFileExpected",t[t.InvalidCommentToken=10]="InvalidCommentToken",t[t.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=12]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",t[t.InvalidUnicode=14]="InvalidUnicode",t[t.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",t[t.InvalidCharacter=16]="InvalidCharacter"})(n1||(n1={}));function bn(t,e,n,r){return QO(t,e,n,r)}function Io(t,e){let n=e.slice(0).sort((o,i)=>{let s=o.offset-i.offset;return s===0?o.length-i.length:s}),r=t.length;for(let o=n.length-1;o>=0;o--){let i=n[o];if(i.offset+i.length<=r)t=NC(t,i);else throw new Error("Overlapping edit");r=i.offset}return t}var Ht=Y(require("fs")),Ws=require("util"),c7="\\\\.\\pipe\\";function Cr(t){return new Promise(e=>Ht.stat(t,(n,r)=>e(n?process.platform==="win32"&&n.code==="EBUSY"&&t.startsWith(c7):r.isFile())))}function o1(t){return new Promise(e=>Ht.stat(t,(n,r)=>e(!n&&r.isDirectory())))}function i1(t){return new Promise(e=>Ht.stat(t,(n,r)=>e(!n&&r.isSocket())))}var at=(0,Ws.promisify)(Ht.readFile),Ng=(0,Ws.promisify)(Ht.writeFile),Ove=(0,Ws.promisify)(Ht.appendFile),sl=(0,Ws.promisify)(Ht.rename),al=(0,Ws.promisify)(Ht.readdir),s1=(0,Ws.promisify)(Ht.unlink),os=t=>new Promise((e,n)=>Ht.mkdir(t,{recursive:!0},r=>r?n(r):e())),a1=(0,Ws.promisify)(Ht.rmdir),cl=(0,Ws.promisify)(Ht.rm),Uve=(0,Ws.promisify)(Ht.copyFile);function lf(t,e,n,r=!1){let o=t.relative(e,n);return(r||!!o)&&!o.startsWith("..")&&!t.isAbsolute(o)}var Ue=Y(require("vscode")),Ar=require("vscode"),uC=Y(require("path"));var nu=Y(require("path")),jp=Y(Mr());var f1=Y(require("os")),Ag=Y(require("fs")),d1=Y(require("path"));var V0=require("events"),js=class{nodeEmitter=new V0.EventEmitter;disposables;constructor(...e){this.disposables=e}event=e=>(this.nodeEmitter.on("event",e),{dispose:()=>{this.nodeEmitter.off("event",e)}});fire(e){this.nodeEmitter.emit("event",e)}dispose(){this.nodeEmitter.removeAllListeners(),this.disposables.forEach(e=>e.dispose())}},AC=class{nodeEmitter=new V0.EventEmitter;event=e=>{let n=r=>r.results.push(e(r.data));return this.nodeEmitter.on("event",n),{dispose:()=>{this.nodeEmitter.off("event",n)}}};fire(e){let n=[];return this.nodeEmitter.emit("event",{data:e,results:n}),n}dispose(){this.nodeEmitter.removeAllListeners()}};function c1(t,e){return{sendTelemetryEvent:async()=>{},isCachedFlightEnabled:async()=>!1,product:e,package:t,getTelemetryLevel:()=>"off"}}function uf(t){return t.replaceAll(/ghcr.io\/devcontainers\/([^/,]+)\/([^/,]+)/g,"devcontainers-$1:$2")}var nr=(a=>(a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Info=3]="Info",a[a.Warning=4]="Warning",a[a.Error=5]="Error",a[a.Critical=6]="Critical",a[a.Off=7]="Off",a))(nr||{}),q0={info:3,debug:2,trace:1},l7=Object.keys(q0).reduce((t,e)=>(t[q0[e]]=e,t),[]);function OC(t){return q0[t]||3}function ro(t){return l7[t]||3}var Fe={write:()=>{},raw:()=>{},start:()=>Date.now(),stop:()=>{},event:()=>{}},Vs=/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/g;function G0(t,e){let n=!!e;return{event:r=>{n&&(n=!1,t.forEach(o=>o.event({type:"text",level:3,timestamp:Date.now(),text:e}))),t.forEach(o=>o.event(r))}}}function z0(t,e){let n=d7(t);return{event(r){let o=f7(r,e());o&&n.write(o)},join:n.join}}function K0(t,e,n){return{event(r){let o=u7(r,e(),n.getTime());o&&t(o)}}}function sn(t,e=2){return{event:t.event,write(n,r=e){t.event({type:"text",level:r,timestamp:Date.now(),text:n})},raw(n,r=e){t.event({type:"raw",level:r,timestamp:Date.now(),text:n})},start(n,r=e){let o=Date.now();return t.event({type:"start",level:r,timestamp:o,text:n}),o},stop(n,r,o=e){t.event({type:"stop",level:o,timestamp:Date.now(),text:n,startTimestamp:r})},get dimensions(){return t.dimensions},onDidChangeDimensions:t.onDidChangeDimensions}}function u7(t,e,n){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":return`[${Lg(l1,`${t.timestamp-n} ms`)}] ${FC(t.text)}`;case"raw":return t.text;case"start":return 1>=e?`${Lg(g7,`[${t.timestamp-n} ms] Start`)}: ${FC(t.text)}`:`[${Lg(l1,`${t.timestamp-n} ms`)}] Start: ${FC(t.text)}`;case"stop":return 1>=e?`${Lg(h7,`[${t.timestamp-n} ms] Stop`)} (${t.timestamp-t.startTimestamp} ms): ${FC(t.text)}`:void 0;default:throw m1(t)}}function FC(t){return w7(t).replace(/\r?\n/g,`\r
`).replace(/(\r?\n)?$/,`\r
`)}function f7(t,e){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":case"raw":return`[${new Date(t.timestamp).toISOString()}] ${Y0(t.text)}`;case"start":return`[${new Date(t.timestamp).toISOString()}] Start: ${Y0(t.text)}`;case"stop":return 2>=e?`[${new Date(t.timestamp).toISOString()}] Stop (${t.timestamp-t.startTimestamp} ms): ${Y0(t.text)}`:void 0;default:throw m1(t)}}function Y0(t){return t.replace(Vs,"").replace(/(\r?\n)?$/,f1.EOL)}function m1(t){return new Error(`Unknown log event type: ${t.type}`)}function d7(t){let e=[],n=!1,r,o;function i(){n=!1,o&&!e.length&&(r=void 0,o(),o=void 0)}function s(a,c=!1){if(a&&e.push(a),!c&&!n&&e.length){n=!0;let l=e.join("");e.length=0,Ag.appendFile(t,l,u=>{u&&(u.code==="ENOENT"?Ag.mkdir(d1.dirname(t),{recursive:!0},f=>{f?(i(),console.error(f)):Ag.appendFile(t,l,m=>{i(),m&&console.error(m),s()})}):(i(),console.error(u))),i(),s()})}}return{write:s,join:()=>r||(n?r=new Promise(a=>o=a):Promise.resolve())}}var m7="38;2;143;99;79",p1="38;2;99;143;79",p7="38;2;86;156;214",h7=m7,g7=p1,l1=p1,v7=p7;function Lg(t,e){return e.split(`
`).map(n=>`\x1B[1m\x1B[${t}m${n}\x1B[39m\x1B[22m`).join(`
`)}function w7(t){let e,n=0,r=[];for(Vs.lastIndex=0;e=Vs.exec(t);)r.push(u1(t.substring(n,e.index))),r.push(e[0]),n=Vs.lastIndex;return r.push(u1(t.substr(n))),r.join("")}function u1(t){let e=/(?<=^|[^A-Za-z0-9_\-\.])[0-9]+(\.[0-9]+)*(?=$|[^A-Za-z0-9_\-\.])/g,n,r=0,o=[];for(;n=e.exec(t);)o.push(t.substring(r,n.index)),o.push(Lg(v7,n[0])),r=e.lastIndex;return o.push(t.substr(r)),o.join("")}function ot(t){return t.split(/\r?\n/).map(e=>`\x1B[1m\x1B[31m${e}\x1B[39m\x1B[22m`).join(`\r
`)+`\r
`}function J0(t){return t.split(/\r?\n/).map(e=>`\x1B[1m\x1B[33m${e}\x1B[39m\x1B[22m`).join(`\r
`)+`\r
`}var pe=class extends Error{description;detail;step;originalError;manageContainer=!1;params;containerId;dockerParams;volumeName;repositoryPath;folderPath;containerProperties;config;actions=[];data={};constructor(e){var n;super(e.originalError&&e.originalError.message||e.description),Object.assign(this,e),this.actions||(this.actions=[]),this.data||(this.data={}),(n=this.originalError)!=null&&n.stack&&(this.stack=this.originalError.stack)}};var Se=Y(require("path")),_x=Y(require("fs")),jY=Y(WC()),rk=require("string_decoder"),Wl=Y(eS());var Rp=Y(require("crypto")),VY=Y(_T()),Bl=Y(Mr()),YY=Y(cB()),qY=Y(oW());var vse=Y(require("path")),GR=require("string_decoder");var lx=Y(require("path")),tY=Y(require("stream")),nY=Y(require("os")),Pp=Y(require("child_process")),Wv=require("string_decoder");var jV=Y(require("path")),VV=Y(require("assert"));var iW;(()=>{"use strict";var t={975:E=>{function x(T){if(typeof T!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(T))}function b(T,R){for(var L,N="",B=0,W=-1,z=0,V=0;V<=T.length;++V){if(V<T.length)L=T.charCodeAt(V);else{if(L===47)break;L=47}if(L===47){if(!(W===V-1||z===1))if(W!==V-1&&z===2){if(N.length<2||B!==2||N.charCodeAt(N.length-1)!==46||N.charCodeAt(N.length-2)!==46){if(N.length>2){var q=N.lastIndexOf("/");if(q!==N.length-1){q===-1?(N="",B=0):B=(N=N.slice(0,q)).length-1-N.lastIndexOf("/"),W=V,z=0;continue}}else if(N.length===2||N.length===1){N="",B=0,W=V,z=0;continue}}R&&(N.length>0?N+="/..":N="..",B=2)}else N.length>0?N+="/"+T.slice(W+1,V):N=T.slice(W+1,V),B=V-W-1;W=V,z=0}else L===46&&z!==-1?++z:z=-1}return N}var I={resolve:function(){for(var T,R="",L=!1,N=arguments.length-1;N>=-1&&!L;N--){var B;N>=0?B=arguments[N]:(T===void 0&&(T=process.cwd()),B=T),x(B),B.length!==0&&(R=B+"/"+R,L=B.charCodeAt(0)===47)}return R=b(R,!L),L?R.length>0?"/"+R:"/":R.length>0?R:"."},normalize:function(T){if(x(T),T.length===0)return".";var R=T.charCodeAt(0)===47,L=T.charCodeAt(T.length-1)===47;return(T=b(T,!R)).length!==0||R||(T="."),T.length>0&&L&&(T+="/"),R?"/"+T:T},isAbsolute:function(T){return x(T),T.length>0&&T.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var T,R=0;R<arguments.length;++R){var L=arguments[R];x(L),L.length>0&&(T===void 0?T=L:T+="/"+L)}return T===void 0?".":I.normalize(T)},relative:function(T,R){if(x(T),x(R),T===R||(T=I.resolve(T))===(R=I.resolve(R)))return"";for(var L=1;L<T.length&&T.charCodeAt(L)===47;++L);for(var N=T.length,B=N-L,W=1;W<R.length&&R.charCodeAt(W)===47;++W);for(var z=R.length-W,V=B<z?B:z,q=-1,ce=0;ce<=V;++ce){if(ce===V){if(z>V){if(R.charCodeAt(W+ce)===47)return R.slice(W+ce+1);if(ce===0)return R.slice(W+ce)}else B>V&&(T.charCodeAt(L+ce)===47?q=ce:ce===0&&(q=0));break}var Be=T.charCodeAt(L+ce);if(Be!==R.charCodeAt(W+ce))break;Be===47&&(q=ce)}var mt="";for(ce=L+q+1;ce<=N;++ce)ce!==N&&T.charCodeAt(ce)!==47||(mt.length===0?mt+="..":mt+="/..");return mt.length>0?mt+R.slice(W+q):(W+=q,R.charCodeAt(W)===47&&++W,R.slice(W))},_makeLong:function(T){return T},dirname:function(T){if(x(T),T.length===0)return".";for(var R=T.charCodeAt(0),L=R===47,N=-1,B=!0,W=T.length-1;W>=1;--W)if((R=T.charCodeAt(W))===47){if(!B){N=W;break}}else B=!1;return N===-1?L?"/":".":L&&N===1?"//":T.slice(0,N)},basename:function(T,R){if(R!==void 0&&typeof R!="string")throw new TypeError('"ext" argument must be a string');x(T);var L,N=0,B=-1,W=!0;if(R!==void 0&&R.length>0&&R.length<=T.length){if(R.length===T.length&&R===T)return"";var z=R.length-1,V=-1;for(L=T.length-1;L>=0;--L){var q=T.charCodeAt(L);if(q===47){if(!W){N=L+1;break}}else V===-1&&(W=!1,V=L+1),z>=0&&(q===R.charCodeAt(z)?--z==-1&&(B=L):(z=-1,B=V))}return N===B?B=V:B===-1&&(B=T.length),T.slice(N,B)}for(L=T.length-1;L>=0;--L)if(T.charCodeAt(L)===47){if(!W){N=L+1;break}}else B===-1&&(W=!1,B=L+1);return B===-1?"":T.slice(N,B)},extname:function(T){x(T);for(var R=-1,L=0,N=-1,B=!0,W=0,z=T.length-1;z>=0;--z){var V=T.charCodeAt(z);if(V!==47)N===-1&&(B=!1,N=z+1),V===46?R===-1?R=z:W!==1&&(W=1):R!==-1&&(W=-1);else if(!B){L=z+1;break}}return R===-1||N===-1||W===0||W===1&&R===N-1&&R===L+1?"":T.slice(R,N)},format:function(T){if(T===null||typeof T!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof T);return(function(R,L){var N=L.dir||L.root,B=L.base||(L.name||"")+(L.ext||"");return N?N===L.root?N+B:N+"/"+B:B})(0,T)},parse:function(T){x(T);var R={root:"",dir:"",base:"",ext:"",name:""};if(T.length===0)return R;var L,N=T.charCodeAt(0),B=N===47;B?(R.root="/",L=1):L=0;for(var W=-1,z=0,V=-1,q=!0,ce=T.length-1,Be=0;ce>=L;--ce)if((N=T.charCodeAt(ce))!==47)V===-1&&(q=!1,V=ce+1),N===46?W===-1?W=ce:Be!==1&&(Be=1):W!==-1&&(Be=-1);else if(!q){z=ce+1;break}return W===-1||V===-1||Be===0||Be===1&&W===V-1&&W===z+1?V!==-1&&(R.base=R.name=z===0&&B?T.slice(1,V):T.slice(z,V)):(z===0&&B?(R.name=T.slice(1,W),R.base=T.slice(1,V)):(R.name=T.slice(z,W),R.base=T.slice(z,V)),R.ext=T.slice(W,V)),z>0?R.dir=T.slice(0,z-1):B&&(R.dir="/"),R},sep:"/",delimiter:":",win32:null,posix:null};I.posix=I,E.exports=I}},e={};function n(E){var x=e[E];if(x!==void 0)return x.exports;var b=e[E]={exports:{}};return t[E](b,b.exports,n),b.exports}n.d=(E,x)=>{for(var b in x)n.o(x,b)&&!n.o(E,b)&&Object.defineProperty(E,b,{enumerable:!0,get:x[b]})},n.o=(E,x)=>Object.prototype.hasOwnProperty.call(E,x),n.r=E=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(E,"__esModule",{value:!0})};var r={};let o;n.r(r),n.d(r,{URI:()=>m,Utils:()=>k}),typeof process=="object"?o=process.platform==="win32":typeof navigator=="object"&&(o=navigator.userAgent.indexOf("Windows")>=0);let i=/^\w[\w\d+.-]*$/,s=/^\//,a=/^\/\//;function c(E,x){if(!E.scheme&&x)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${E.authority}", path: "${E.path}", query: "${E.query}", fragment: "${E.fragment}"}`);if(E.scheme&&!i.test(E.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(E.path){if(E.authority){if(!s.test(E.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(a.test(E.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let l="",u="/",f=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class m{static isUri(x){return x instanceof m||!!x&&typeof x.authority=="string"&&typeof x.fragment=="string"&&typeof x.path=="string"&&typeof x.query=="string"&&typeof x.scheme=="string"&&typeof x.fsPath=="string"&&typeof x.with=="function"&&typeof x.toString=="function"}scheme;authority;path;query;fragment;constructor(x,b,I,T,R,L=!1){typeof x=="object"?(this.scheme=x.scheme||l,this.authority=x.authority||l,this.path=x.path||l,this.query=x.query||l,this.fragment=x.fragment||l):(this.scheme=(function(N,B){return N||B?N:"file"})(x,L),this.authority=b||l,this.path=(function(N,B){switch(N){case"https":case"http":case"file":B?B[0]!==u&&(B=u+B):B=u}return B})(this.scheme,I||l),this.query=T||l,this.fragment=R||l,c(this,L))}get fsPath(){return C(this,!1)}with(x){if(!x)return this;let{scheme:b,authority:I,path:T,query:R,fragment:L}=x;return b===void 0?b=this.scheme:b===null&&(b=l),I===void 0?I=this.authority:I===null&&(I=l),T===void 0?T=this.path:T===null&&(T=l),R===void 0?R=this.query:R===null&&(R=l),L===void 0?L=this.fragment:L===null&&(L=l),b===this.scheme&&I===this.authority&&T===this.path&&R===this.query&&L===this.fragment?this:new p(b,I,T,R,L)}static parse(x,b=!1){let I=f.exec(x);return I?new p(I[2]||l,D(I[4]||l),D(I[5]||l),D(I[7]||l),D(I[9]||l),b):new p(l,l,l,l,l)}static file(x){let b=l;if(o&&(x=x.replace(/\\/g,u)),x[0]===u&&x[1]===u){let I=x.indexOf(u,2);I===-1?(b=x.substring(2),x=u):(b=x.substring(2,I),x=x.substring(I)||u)}return new p("file",b,x,l,l)}static from(x){let b=new p(x.scheme,x.authority,x.path,x.query,x.fragment);return c(b,!0),b}toString(x=!1){return w(this,x)}toJSON(){return this}static revive(x){if(x){if(x instanceof m)return x;{let b=new p(x);return b._formatted=x.external,b._fsPath=x._sep===d?x.fsPath:null,b}}return x}}let d=o?1:void 0;class p extends m{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=C(this,!1)),this._fsPath}toString(x=!1){return x?w(this,!0):(this._formatted||(this._formatted=w(this,!1)),this._formatted)}toJSON(){let x={$mid:1};return this._fsPath&&(x.fsPath=this._fsPath,x._sep=d),this._formatted&&(x.external=this._formatted),this.path&&(x.path=this.path),this.scheme&&(x.scheme=this.scheme),this.authority&&(x.authority=this.authority),this.query&&(x.query=this.query),this.fragment&&(x.fragment=this.fragment),x}}let g={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function h(E,x,b){let I,T=-1;for(let R=0;R<E.length;R++){let L=E.charCodeAt(R);if(L>=97&&L<=122||L>=65&&L<=90||L>=48&&L<=57||L===45||L===46||L===95||L===126||x&&L===47||b&&L===91||b&&L===93||b&&L===58)T!==-1&&(I+=encodeURIComponent(E.substring(T,R)),T=-1),I!==void 0&&(I+=E.charAt(R));else{I===void 0&&(I=E.substr(0,R));let N=g[L];N!==void 0?(T!==-1&&(I+=encodeURIComponent(E.substring(T,R)),T=-1),I+=N):T===-1&&(T=R)}}return T!==-1&&(I+=encodeURIComponent(E.substring(T))),I!==void 0?I:E}function v(E){let x;for(let b=0;b<E.length;b++){let I=E.charCodeAt(b);I===35||I===63?(x===void 0&&(x=E.substr(0,b)),x+=g[I]):x!==void 0&&(x+=E[b])}return x!==void 0?x:E}function C(E,x){let b;return b=E.authority&&E.path.length>1&&E.scheme==="file"?`//${E.authority}${E.path}`:E.path.charCodeAt(0)===47&&(E.path.charCodeAt(1)>=65&&E.path.charCodeAt(1)<=90||E.path.charCodeAt(1)>=97&&E.path.charCodeAt(1)<=122)&&E.path.charCodeAt(2)===58?x?E.path.substr(1):E.path[1].toLowerCase()+E.path.substr(2):E.path,o&&(b=b.replace(/\//g,"\\")),b}function w(E,x){let b=x?v:h,I="",{scheme:T,authority:R,path:L,query:N,fragment:B}=E;if(T&&(I+=T,I+=":"),(R||T==="file")&&(I+=u,I+=u),R){let W=R.indexOf("@");if(W!==-1){let z=R.substr(0,W);R=R.substr(W+1),W=z.lastIndexOf(":"),W===-1?I+=b(z,!1,!1):(I+=b(z.substr(0,W),!1,!1),I+=":",I+=b(z.substr(W+1),!1,!0)),I+="@"}R=R.toLowerCase(),W=R.lastIndexOf(":"),W===-1?I+=b(R,!1,!0):(I+=b(R.substr(0,W),!1,!0),I+=R.substr(W))}if(L){if(L.length>=3&&L.charCodeAt(0)===47&&L.charCodeAt(2)===58){let W=L.charCodeAt(1);W>=65&&W<=90&&(L=`/${String.fromCharCode(W+32)}:${L.substr(3)}`)}else if(L.length>=2&&L.charCodeAt(1)===58){let W=L.charCodeAt(0);W>=65&&W<=90&&(L=`${String.fromCharCode(W+32)}:${L.substr(2)}`)}I+=b(L,!0,!1)}return N&&(I+="?",I+=b(N,!1,!1)),B&&(I+="#",I+=x?B:h(B,!1,!1)),I}function y(E){try{return decodeURIComponent(E)}catch{return E.length>3?E.substr(0,3)+y(E.substr(3)):E}}let S=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function D(E){return E.match(S)?E.replace(S,(x=>y(x))):E}var _=n(975);let A=_.posix||_,U="/";var k;(function(E){E.joinPath=function(x,...b){return x.with({path:A.join(x.path,...b)})},E.resolvePath=function(x,...b){let I=x.path,T=!1;I[0]!==U&&(I=U+I,T=!0);let R=A.resolve(I,...b);return T&&R[0]===U&&!x.authority&&(R=R.substring(1)),x.with({path:R})},E.dirname=function(x){if(x.path.length===0||x.path===U)return x;let b=A.dirname(x.path);return b.length===1&&b.charCodeAt(0)===46&&(b=""),x.with({path:b})},E.basename=function(x){return A.basename(x.path)},E.extname=function(x){return A.extname(x.path)}})(k||(k={})),iW=r})();var{URI:Ce,Utils:Lo}=iW;var sW=Y(require("path"));var Rl=Y(Mr());function It(t,e){if(Iv(e)){let n=t.dirname(e);return{isWorkspaceFile:!0,workspaceOrFolderPath:e,rootFolderPath:n,configFolderPath:n}}return{isWorkspaceFile:!1,workspaceOrFolderPath:e,rootFolderPath:e,configFolderPath:e}}function Iv(t){return sW.extname(t)===".code-workspace"}async function bS(t,e){if(e.isWorkspaceFile)try{let n=e.rootFolderPath,r=(await t.readFile(e.workspaceOrFolderPath)).toString(),i=Me(r).folders;if(i&&i.length>0){for(let s of i){let a=s.path,c;if(a){if(t.path.isAbsolute(a))return Rl.t("Workspace contains an absolute folder path '{0}'.",a);c=t.path.resolve(n,a)}else{let l=s.uri;return l?Ce.parse(l).scheme!=="file"?Rl.t("Workspace contains folder '{0}' not on the local file system.",l):Rl.t("Workspace contains an absolute folder path '{0}'.",l):Rl.t("Workspace contains a folder that defines neither a path nor a URI.")}if(!foe(t,c,n))return Rl.t("Folder '{0}' is not a subfolder of shared root folder '{1}'.",c,n)}return}return Rl.t("Workspace does not define any folders")}catch(n){return Rl.t("Problems loading workspace file {0}: {1}",e.workspaceOrFolderPath,n&&(n.message||n.toString()))}}function foe(t,e,n){return e===n?!0:!e||!n||n.length>e.length||e.length>n.length&&e.charAt(n.length)!==t.path.sep?!1:doe(t.platform,n,e.substr(0,n.length))}function doe(t,e,n){return t==="linux"?e===n:e.toLowerCase()===n.toLowerCase()}var lr=Y(require("path")),zS=Y(eS()),AR=Y(require("crypto")),qS=Y(Pv()),OV=require("string_decoder");var FR=Y(Mr());var gp=Y(require("path"));async function uj(t,e){let n=await $oe(t),r=n["agent-socket"];if(!r){e.write("gpg-agent: No agent-socket found in container.");return}let o=n.homedir;try{let{stdout:a}=await t.exec(`ls '${o}/private-keys-v1.d' 2>/dev/null`);if(a.trim()){e.write("gpg-agent: Private keys found in container, not forwarding.");return}}catch{}let i=!1,s=n["keyboxd-socket"];if(s)try{await t.exec(`grep -e '^s*use-keyboxds*$' '${o}/common.conf' 2>/dev/null`),i=!0}catch{}return{homedir:o,gpgSocket:r,keyboxdSocket:s,useKeyboxd:i}}async function fj(t,e,n,r){let o=await Moe(t,r),i=o["agent-extra-socket"];if(!i){r.write(`gpg-agent: No agent-extra-socket found on ${t.type} host.`);return}let s=o.homedir,a=!1,c=o["keyboxd-socket"];if(c)try{let w=(await t.readFile(t.path.join(s,"common.conf"))).toString();a=/^\s*use-keyboxd\s*$/m.test(w)}catch{}let l=gp.posix.join(n.homedir,"pubring.kbx"),u=await Ai(e,l);u&&r.write(`GPG forwarding: ${l} exists in container.`);let f=gp.posix.join(n.homedir,"pubring.gpg"),m=await Ai(e,f);m&&r.write(`GPG forwarding: ${f} exists in container.`);let d=gp.posix.join(n.homedir,"trustdb.gpg"),p=await Ai(e,d);p&&r.write(`GPG forwarding: ${d} exists in container.`);let g=a&&n.keyboxdSocket&&!n.useKeyboxd&&!u&&!m,h=a&&(n.useKeyboxd||g),v=[],C=(async()=>{if(await e.exec(`mkdir -p -m 700 '${gp.posix.dirname(n.gpgSocket)}'`),h)g&&await e.exec(`mkdir -p -m 700 '${n.homedir}' && echo '
use-keyboxd' >> '${gp.posix.join(n.homedir,"common.conf")}'`);else if(a||n.useKeyboxd){if(!n.useKeyboxd&&!u&&!m||n.useKeyboxd&&(await e.exec("gpg --export --export-options backup")).stdout.trim().length===0){try{let w=await X({exec:t.exec,cmd:"gpg",args:["--export","--export-options","backup"],output:r});w.stdout.byteLength&&v.push(async()=>{try{await e.exec(`${Ff(w.stdout.byteLength)} | gpg --import --import-options restore`,{stdin:w.stdout})}catch(y){r.write(`GPG forwarding: Failed to import public keys: ${y==null?void 0:y.message}`)}})}catch(w){r.write(`GPG forwarding: Failed to export public keys: ${w==null?void 0:w.message}`)}try{let w=await X({exec:t.exec,cmd:"gpgsm",args:["--export","--armor"],output:r});w.stdout.byteLength&&v.push(async()=>{try{await e.exec(`${Ff(w.stdout.byteLength)} | gpgsm --import`,{stdin:w.stdout})}catch(y){r.write(`GPG forwarding: Failed to import certificates: ${y==null?void 0:y.message}`)}})}catch(w){r.write(`GPG forwarding: Failed to export certificates: ${w==null?void 0:w.message}`)}}}else u||await kl(t,e,t.path.join(s,"pubring.kbx"),l,"gpg"),m||await kl(t,e,t.path.join(s,"pubring.gpg"),f,"gpg"),p||await kl(t,e,t.path.join(s,"trustdb.gpg"),d,"gpg");if((a||n.useKeyboxd)&&!p)try{let w=await X({exec:t.exec,cmd:"gpg",args:["--export-ownertrust"],output:r});w.stdout.byteLength&&v.push(async()=>{try{await e.exec(`${Ff(w.stdout.byteLength)} | gpg --import-ownertrust`,{stdin:w.stdout})}catch(y){r.write(`GPG forwarding: Failed to import ownertrust: ${y==null?void 0:y.message}`)}})}catch(w){r.write(`GPG forwarding: Failed to export ownertrust: ${w==null?void 0:w.message}`)}await Hoe(t,r)})();return{cliHost:t,remoteGpgSocket:n.gpgSocket,localGpgSocket:i,remoteKeyboxdSocket:h?n.keyboxdSocket:void 0,localKeyboxdSocket:h?c:void 0,importTasks:async()=>{await C;for(let w of v)await w()}}}async function Moe(t,e){try{let{stdout:n}=await X({exec:t.exec,cmd:"gpgconf",args:["--list-dirs"],output:e,print:!0});return n.toString().trim().split(/\r?\n/).reduce((r,o)=>{let i=o.indexOf(":");if(i!==-1){let s=decodeURIComponent(o.substring(i+1));t.platform==="win32"&&/^\/.\//.test(s)&&(s=`${s.charAt(1)}:${s.substring(2).replace(/\//g,"\\")}`),r[o.substring(0,i)]=s}return r},{})}catch{return{}}}async function $oe(t){try{let{stdout:e}=await t.exec("gpgconf --list-dirs");return e.trim().split(`
`).reduce((n,r)=>{let o=r.indexOf(":");return o!==-1&&(n[r.substring(0,o)]=decodeURIComponent(r.substring(o+1))),n},{})}catch{return{}}}async function Hoe(t,e){try{await X({exec:t.exec,cmd:"gpg-connect-agent",args:["updatestartuptty","/bye"],output:e})}catch{}}var uR=Y(require("path"));async function bv(t,e,n){if(!("exec"in t)){for(let r=e,o="";r!==o;o=r,r=t.path.dirname(r))if(await t.isFile(t.path.join(r,".git","config")))return r;return}try{let{stdout:r}=await X({exec:t.exec,cmd:"git",args:["rev-parse","--show-cdup"],cwd:e,output:n}),o=r.toString().trim();return t.path.resolve(e,o)}catch{return}}async function fR(t,e,n,r){try{return await X({exec:t.exec,cmd:"git",args:["ls-remote",e],cwd:".",env:n,output:r,print:"onerror"}),!0}catch(o){return(o==null?void 0:o.code)==="ENOENT"?void 0:!1}}async function pj(t,e,n,r,o){let i=r[1],s={get:"fill",store:"approve",erase:"reject"}[i];if(s===void 0)throw new Error(`Expected get, store or erase, got: ${i}`);let a=await dj(n?t:e,s,o).catch(c=>{if(n)throw c});if(!n&&(a==="ENOENT"||(a==null?void 0:a.code)!==0)){let c=await dj(t,s,o);c!=="ENOENT"&&(a=c,c.code===0&&(n=!0))}return a==="ENOENT"?{result:{stdout:"",stderr:"",code:127},preferLocalCLIHost:n}:{result:a,preferLocalCLIHost:n}}async function dj({exec:t},e,n){try{let{stdout:r,stderr:o}=await X({exec:t,cmd:"git",args:["credential",e],env:{GIT_TERMINAL_PROMPT:"0"},stdin:Buffer.from(n),output:Fe});return{stdout:r.toString(),stderr:o.toString(),code:0}}catch(r){if((r==null?void 0:r.code)==="ENOENT"||(r==null?void 0:r.code)==="EPIPE")return"ENOENT";if(!(r&&r.stdout&&r.stderr))throw r;let{stdout:o,stderr:i,code:s}=r;return{stdout:o.toString(),stderr:i.toString(),code:s||0}}}async function hj(t,e,n){let r=await dR(t,e,n);if(!r)return;r.startsWith("refs/")&&(r=r.substr(5)),r.startsWith("remotes/")&&(r=r.substr(8));let o=r.indexOf("/");if(o===-1)return;let i=r.substr(0,o),s=r.substr(o+1);try{let{stdout:a}=await X({exec:t.exec,cmd:"git",args:["remote","get-url",i],cwd:e.rootFolderPath,output:n}),c=a.toString().trim();if(c.endsWith(".git")&&(c=c.substr(0,c.length-4)),c.startsWith("https://github.com/")){let l=await Voe(t,e,i,n);if(l&&s!==l)return`${c}/tree/${s}`}return c}catch{return}}async function NS(t,e,n){if(!("exec"in t)){let o=await bv(t,e.rootFolderPath,n);if(!o)return;try{return(await t.readFile(t.path.join(o,".git","config"))).toString().split(/^\[/m).filter(a=>a.startsWith("remote")).map(a=>(/^\s*url\s*=\s*(\S+)/m.exec(a)||[])[1]).filter(Boolean)}catch(i){if((i==null?void 0:i.code)!=="ENOENT")throw i;return[]}}let r;try{let{stdout:o}=await X({exec:t.exec,cmd:"git",args:["remote","-v"],cwd:e.rootFolderPath,output:n});r=o.toString()}catch{return}return Array.from(new Set(Boe(/^[^\s]+\s+([^\s]+)/gm,r,1)))}function Boe(t,e,n){return{[Symbol.iterator]:function*(){let r;for(;r=t.exec(e);)yield r[n],t.lastIndex===r.index&&t.lastIndex++}}}async function gj(t,e,n){return await Woe(t,e,n)||joe(t,e,n)}async function Woe(t,e,n){try{let{stdout:r}=await X({exec:t.exec,cmd:"git",args:["status","--porcelain"],cwd:e.rootFolderPath,output:n});return!!r.toString().trim()}catch{return}}async function joe(t,e,n){let r=await dR(t,e,n);if(r)try{let{stdout:o}=await X({exec:t.exec,cmd:"git",args:["log",`${r}..HEAD`],cwd:e.rootFolderPath,output:n});return!!o.toString().trim()}catch{return}}async function vj(t,e,n,r){let o=await dR(t,e,r);if(!o)return!1;try{let i=t.platform==="win32"?n.replace(/\\/g,"/"):n;return await X({exec:t.exec,cmd:"git",args:["cat-file","-e",`${o}:${i}`],cwd:e.rootFolderPath,output:r}),!0}catch{return!1}}async function dR(t,e,n){try{let{stdout:r}=await X({exec:t.exec,cmd:"git",args:["rev-parse","--abbrev-ref","--symbolic-full-name","@{u}"],cwd:e.rootFolderPath,output:n});return r.toString().trim()}catch{return}}async function Voe(t,e,n,r){try{let{stdout:o}=await X({exec:t.exec,cmd:"git",args:["remote","show",n],cwd:e.rootFolderPath,output:r});return(o.toString().match(/^\s*HEAD branch:\s*(.*)$/m)||[])[1]}catch{return}}async function wj(t,e,n,r,o,i,s){let{extensionPath:a,onDidInput:c}=t;if(await e.isFolder(e.path.join(n,".git"))){if(s&&(e.type==="container"&&await Fi({ptyExec:e.ptyExec,cmd:"git",args:["config","--global","--add","safe.directory",n],cwd:n,output:sn(o,3)}),await Yoe(e,n,o))){let d=r.tokenEnvVar?{...r.env,GIT_ASKPASS:e.path.join(a,"scripts","gitAskPass.sh"),GIT_TOKEN:e.env[r.tokenEnvVar]}:r.env;return{gitClone:Fi({ptyExec:e.ptyExec,cmd:"git",args:["pull","--ff-only"],cwd:n,env:d,onDidInput:c,output:sn(o,3)}).catch(g=>g),gitUnshallow:void 0}}return{gitClone:void 0,gitUnshallow:void 0}}await e.mkdirp(n);let l=r.tokenEnvVar?{...r.env,GIT_ASKPASS:e.path.join(a,"scripts","gitAskPass.sh"),GIT_TOKEN:e.env[r.tokenEnvVar]}:r.env,u=[];if(r.fullClone||u.push("--depth","1"),r.branch&&u.push("--branch",r.branch),r.recurseSubmodules&&u.push("--recurse-submodules"),e.type==="container"&&r.url.startsWith("file:")){let d=e.path.join(Ce.parse(r.url).path,".git");await Fi({ptyExec:e.ptyExec,cmd:"git",args:["config","--global","--add","safe.directory",d],cwd:n,env:l,output:sn(o,3)})}let f=Fi({ptyExec:e.ptyExec,cmd:"git",args:["clone",...u,r.url,"."],cwd:n,env:l,onDidInput:c,output:sn(o,3)}),m=r.fullClone?f:(async()=>(await f,await Fi({ptyExec:e.ptyExec,cmd:"git",args:["config","remote.origin.fetch","+refs/heads/*:refs/remotes/origin/*"],cwd:n,env:l,output:i}),Fi({ptyExec:e.ptyExec,cmd:"git",args:["fetch","--unshallow","--tags"],cwd:n,env:l,onDidInput:c,output:i})))();return{gitClone:f,gitUnshallow:m}}async function Yoe(t,e,n){return(await X({exec:t.exec,cmd:"git",args:["status","--porcelain"],cwd:e,output:n}).catch(o=>o)).stdout.toString().trim()===""}async function LS(t,e,n){let r=await Tv(t,e,[".gitconfig"],"git"," && grep -e '^\\[' ~/.gitconfig | grep -v -E '^\\[(filter|safe)([[:blank:]]+|\\])'"),o=await qoe(t,e,n);(r||o)&&(await Goe(t,e.shellServer),zoe(t,e).catch(i=>{t.output.write(`Error copying allowed signers: ${(i==null?void 0:i.stack)||(i==null?void 0:i.message)||i}`,5)}))}var yj=["git","config"];async function qoe(t,e,n){let{cliHost:r}=t,o=await mj(r);if(!await r.isFile(o)&&(r.type==="local"||(r=await Gr(process.cwd(),t.loadNativeModule,t.output),o=await mj(r),!await r.isFile(o))))return!1;let i=(async()=>{let s=await n,a=s.XDG_CONFIG_HOME?[s.XDG_CONFIG_HOME]:[e.homeFolder,".config"];return uR.posix.join(...a,...yj)})();return kl(r,e.shellServer,o,i,"git")}async function mj(t){let{env:e}=t,n=e.XDG_CONFIG_HOME?[e.XDG_CONFIG_HOME]:[await t.homedir(),".config"];return t.path.join(...n,...yj)}async function Goe(t,e){await e.exec(`# Cleaning up git config
for key in core.editor core.sshCommand gpg.program gpg.openpgp.program gpg.x509.program gpg.ssh.program
do
	value="$(git config --global --get $key)"
	executable="\${value%% *}"
	([ -z "$executable" ] || [ "$executable" = "${t.product.applicationName}" ]) && continue
	command -v "$executable" >/dev/null 2>&1 || (echo "Removing Git config key: $key = $value" && git config --global --unset $key)
done
git config --global --unset http.sslBackend || true`)}async function zoe(t,e){let{cliHost:n,output:r}=t,{homeFolder:o,shellServer:i}=e,s=await Koe(n,"gpg.ssh.allowedSignersFile",r);if(!s)return;let a=await n.homedir(),c=/^~[/\\]/.test(s)?n.path.join(a,s.substring(2)):s,l=n.path.resolve(a,c);r.write(`Copying allowed signers file: ${l}`);let u=n.path.relative(a,l),f=n.platform==="win32"?u.replace(/\\/g,"/"):u,m=uR.posix.resolve(o,f);await kl(n,i,l,m,"ssh")&&await i.exec(`git config --global gpg.ssh.allowedSignersFile '${m}'`)}async function Koe(t,e,n){try{let{stdout:r}=await X({exec:t.exec,cmd:"git",args:["config","--global","--get",e],output:n}),o=r.toString();return t.platform==="win32"&&o.endsWith(`\r
`)?o.substring(0,o.length-2):o.endsWith(`
`)?o.substring(0,o.length-1):o}catch{return}}var Ll=require("stream");async function Cj(t,e){let{stdout:n}=await t.exec(`cat /proc/${e}/environ`,{logOutput:!1});return n.split("\0").map(r=>{let o=r.indexOf("=");return o!==-1?[r.slice(0,o),r.slice(o+1)]:[]}).reduce((r,[o,i])=>(o&&(r[o]=i),r),{})}async function mR(t){let e=`for pid in \`cd /proc && ls -d [0-9]*\`; do { echo $pid ; readlink /proc/$pid/cwd || echo ; readlink /proc/$pid/ns/mnt || echo ; cat /proc/$pid/stat | tr "
" " " ; echo ; cat /proc/$pid/environ | tr "
" " " ; echo ; cat < /proc/$pid/cmdline | tr "
" " " ; echo ; } ; echo --- ; done ; readlink /proc/self/ns/mnt 2>/dev/null`,{stdout:n}=await t.exec(e,{logOutput:!1}),r=6,o=n.split(`
---
`),i=o.pop().trim();return{processes:o.map(a=>a.split(`
`)).filter(a=>a.length>=r).map(([a,c,l,u,f,m])=>{let d=/.*\) [^ ]* ([^ ]*) ([^ ]*)/.exec(u)||[];return{pid:a,ppid:d[1],pgrp:d[2],cwd:c,mntNS:l,cmd:m.replace(/\0/g," "),env:f.split("\0").reduce((p,g)=>{let h=g.indexOf("=");return h!==-1&&(p[g.substr(0,h)]=g.substr(h+1)),p},{})}}),mntNS:i}}function Ej(t){let e={};return t.forEach(n=>e[n.pid]={process:n,childProcesses:[]}),t.filter(n=>n.ppid).forEach(n=>{var r;return(r=e[n.ppid])==null?void 0:r.childProcesses.push(e[n.pid])}),e}function pR(t,e="  ",n="  "){return`${n}${t.process.pid}: ${t.process.cmd}
${t.childProcesses.map(r=>pR(r,e,n+e))}`}var Oi=Y(require("path")),Dj=Y(require("fs"));async function ni(t,e=process.cwd(),n=process.env){if(process.platform!=="win32")return t;if(Oi.isAbsolute(t))return await hR(t)||t;if(/[/\\]/.test(t)){let s=Oi.join(e,t);return await hR(s)||s}let r,o;if(n){for(let s of Object.keys(n))if(s.toLowerCase()==="path"){let a=n[s];typeof a=="string"&&(r=a,o=a.split(Oi.delimiter).filter(Boolean),o.push(Oi.join(n.ProgramW6432||"C:\\Program Files","Docker\\Docker\\resources\\bin")));break}}if(o===void 0||o.length===0){let s=new Error(`No PATH to look up executable '${t}'.`);throw s.code="ENOENT",s}for(let s of o){let a;Oi.isAbsolute(s)?a=Oi.join(s,t):a=Oi.join(e,s,t);let c=await hR(a);if(c)return c}let i=new Error(`Exectuable '${t}' not found on PATH '${r}'.`);throw i.code="ENOENT",i}var Sj=process.env.PATHEXT,xj=Sj?Sj.toLowerCase().split(";"):[".com",".exe",".bat",".cmd"];async function hR(t){if(xj.indexOf(Oi.extname(t))!==-1)return await _j(t)?t:void 0;for(let e of xj){let n=t+e;if(await _j(n))return n}}function _j(t){return new Promise(e=>Dj.stat(t,(n,r)=>e(!n&&r.isFile())))}var gR="dev-containers-",Ij="credentials not found in native keychain";async function Tj(t,e,n,r,o,i){let s=await Pj(n?t:e,r,o,i).catch(a=>{if(n)throw a});return!n&&(s==null?void 0:s.code)!==0&&(s=await Pj(t,r,o,i),s.code===0&&(n=!0)),{result:s,preferLocalCLIHost:n}}async function Pj(t,e,n,r){let o,i=e[1];try{let s=i==="store"?JSON.parse(n).ServerURL:n.trim(),a=await Joe(t,s,r);if(!a)return{stdout:i==="get"?Ij:"Docker credential helper not found.",stderr:"",code:1};if("identitytoken"in a)return i!=="get"?{stdout:`Docker credential command not supported without credential helper: ${i}.`,stderr:"",code:1}:{stdout:JSON.stringify({ServerURL:s,Username:"<token>",Secret:a.identitytoken}),stderr:"",code:0};if("auth"in a){if(i!=="get")return{stdout:`Docker credential command not supported without credential helper: ${i}.`,stderr:"",code:1};let[u,f]=Buffer.from(a.auth,"base64").toString().split(":");return{stdout:JSON.stringify({ServerURL:s,Username:u,Secret:f}),stderr:"",code:0}}o=`docker-credential-${a.helper}`;let{stdout:c,stderr:l}=await X({exec:t.exec,cmd:o,args:e.slice(1),stdin:Buffer.from(n),output:Fe});return{stdout:c.toString(),stderr:l.toString(),code:0}}catch(s){if(o&&((s==null?void 0:s.code)==="ENOENT"||(s==null?void 0:s.code)==="EPIPE"))return{stdout:i==="get"?Ij:`Docker credential helper '${o}' not found: ${(s==null?void 0:s.message)||String(s)}.`,stderr:"",code:1};if(!(s&&s.stdout&&s.stderr))throw s;let{stdout:a,stderr:c,code:l}=s;return{stdout:a.toString(),stderr:c.toString(),code:l||0}}}async function Joe(t,e,n){var o,i,s,a,c;n.write(`Looking up Docker credential helper for '${e}'.`);try{let l=Me((await t.readFile(t.path.join(await t.homedir(),".docker","config.json"))).toString()),u=Ce.parse(e).authority||e,f=(o=l==null?void 0:l.credHelpers)==null?void 0:o[u];if(f)return{helper:f};let m=(s=(i=l==null?void 0:l.auths)==null?void 0:i[e])==null?void 0:s.identitytoken;if(m)return{identitytoken:m};let d=(c=(a=l==null?void 0:l.auths)==null?void 0:a[e])==null?void 0:c.auth;if(d)return{auth:d};if(l!=null&&l.credsStore)return{helper:l.credsStore}}catch(l){(l==null?void 0:l.code)!=="ENOENT"&&n.write(`Error reading Docker config: ${(l==null?void 0:l.message)||String(l)}.`)}let r=await Rj(t);return r?{helper:r}:void 0}async function vR(t,e){let n=t.path.join(await t.homedir(),".docker","config.json");try{let r=await t.readFile(n),o=Me(r.toString());return!!(o!=null&&o.credsStore)||Object.keys((o==null?void 0:o.credHelpers)||{}).some(i=>{var s;return(s=o==null?void 0:o.credHelpers)==null?void 0:s[i]})||Object.keys((o==null?void 0:o.auths)||{}).some(i=>{var s,a;return(a=(s=o==null?void 0:o.auths)==null?void 0:s[i])==null?void 0:a.auth})||bj(t)}catch(r){return(r==null?void 0:r.code)!=="ENOENT"?(e.write(`Error reading Docker config (${n}): ${(r==null?void 0:r.stack)||(r==null?void 0:r.message)||String(r)}.`),!1):bj(t)}}async function bj(t){let e=await Rj(t);return!!e&&await Xoe(t,`docker-credential-${e}`)}async function Rj(t){if(t.platform==="darwin")return"osxkeychain";if(t.platform==="win32")return"wincred";if(t.platform==="linux")try{return await X({exec:t.exec,cmd:"/bin/sh",args:["-c","command -v docker-credential-pass >/dev/null 2>&1"],output:Fe}),"pass"}catch{return"secretservice"}}async function Xoe(t,e){try{return t.platform==="win32"?!!await ni(e,t.cwd,t.env):(await X({exec:t.exec,cmd:"/bin/sh",args:["-c",`command -v '${e}' >/dev/null 2>&1`],output:Fe}),!0)}catch{return!1}}function Nl(t){return`remote.containers.${t}`}function us(t){return`dev.containers.${t}`}var yR=Y(require("path"));var Zoe=Y(require("http")),Qoe=Y(require("https"));function wR(t,e={}){return new Promise((n,r)=>{let o=t.startsWith("https:")?Qoe:Zoe,i;if(Object.keys(e).length>0){let a=new URL(t);i={headers:e,host:a.host,path:a.pathname}}o.get(i??t,a=>{var c;if(a.statusCode<200||a.statusCode>299){if(a.statusCode===302){let l=(c=a.headers)==null?void 0:c.location;l&&n(wR(l,e))}r(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`))}else{a.on("error",r);let l=[];a.on("data",u=>l.push(u)),a.on("end",()=>n(Buffer.concat(l)))}}).on("error",r)})}async function cr(t){let e=await at(yR.join(t,"package.json"),"utf8");return JSON.parse(e)}async function Rv(t){let e=await at(yR.join(t,"product.json"),"utf8"),n=JSON.parse(e);return n.commit||(n.commit=await vp(n.quality)),n.serverDataFolderName||(n.serverDataFolderName=".vscode-server-oss"),n}async function vp(t="insider"){let e=`https://update.code.visualstudio.com/api/update/server-linux-x64/${t}/latest`,n=await wR(e);return JSON.parse(n.toString()).version}function AS(t){return["bin",t.serverApplicationName]}async function Bt(t){return new Promise(e=>setTimeout(e,t))}var Hie=PV(),FV=jS(),NR=NV(),Bie=AV(),Wie=["docker","oras","skopeo"];async function KS(t,e,n){var R,L,N,B,W,z;let{cliHost:r,wslCLIHost:o,output:i}=t,{shellServer:s,launchRootShellServer:a}=e,c="Launching Dev Containers helper.",l=i.start(c);if(Al)return i.stop(c,l),{remoteEnv:{},ready:Promise.resolve(),reconnect:()=>Promise.resolve()};let u=[r];r.type!=="local"&&u.push(await Gr(process.cwd(),t.loadNativeModule,i)),r.type!=="wsl"&&o&&u.push(o);let f=AR.randomUUID(),m={},d=await LR(u,V=>Jie(V,i)),p=d?lr.posix.join(((R=e.env)==null?void 0:R.TMPDIR)||"/tmp",`vscode-ssh-auth-${f}.sock`):void 0;d&&(m[p]=d,i.write(`ssh-agent: SSH_AUTH_SOCK in container (${p}) forwarded to ${d.cliHost.type} host (${d.unparsed}).`));let g=(L=e.env)!=null&&L.DISPLAY?void 0:jie(u,V=>Xie(V,i)),h=-1,v;if(g)do v=lr.posix.join(((N=e.env)==null?void 0:N.TMPDIR)||"/tmp",".X11-unix",`X${++h}`);while(await Vie(s,v));let C=g?`:${h}`:void 0;g&&(await s.exec(`mkdir -p '${lr.posix.dirname(v)}'`),m[v]=g,i.write(`X11 forwarding: DISPLAY in container (${C}) forwarded to ${g.cliHost.type} host (${g.unparsed}).`));let w=await uj(e.shellServer,i),y=w?await LR(u,V=>fj(V,e.shellServer,w,i)):void 0;y&&(m[y.remoteGpgSocket]={name:"gpg-agent",unparsed:y.localGpgSocket,cliHost:y.cliHost,connectTo:{socketPath:y.localGpgSocket}},i.write(`gpg-agent: Socket in container (${y.remoteGpgSocket}) forwarded to ${y.cliHost.type} host (${y.localGpgSocket}).`),y.localKeyboxdSocket&&y.remoteKeyboxdSocket&&(m[y.remoteKeyboxdSocket]={name:"keyboxd",unparsed:y.localKeyboxdSocket,cliHost:y.cliHost,connectTo:{socketPath:y.localKeyboxdSocket}},i.write(`GPG keyboxd: Socket in container (${y.remoteKeyboxdSocket}) forwarded to ${y.cliHost.type} host (${y.localKeyboxdSocket}).`))),((n==null?void 0:n.getNewConfiguration("githubCLILoginWithToken"))??t.isGitHubCLILoginWithTokenEnabled)&&await Zie(e,u,i);let D=lr.posix.join(((B=e.env)==null?void 0:B.TMPDIR)||"/tmp",`vscode-remote-containers-ipc-${f}.sock`),_=lr.posix.join(((W=e.env)==null?void 0:W.TMPDIR)||"/tmp",`vscode-remote-containers-server-${f}.js`),A=lr.posix.join(((z=e.env)==null?void 0:z.TMPDIR)||"/tmp",`vscode-remote-containers-${f}.js`),k=((n==null?void 0:n.getNewConfiguration("dockerCredentialHelper"))??t.isDockerCredentialHelperEnabled)&&a&&await UV(s,Wie)?lr.posix.join("/usr/local/bin",`docker-credential-${gR}${f}`):void 0,E=u.find(V=>V.type==="local"),x=MV(t,e,"Container",void 0,!1,!1,_,A,k,m,D,E),b=x.then(async V=>{await V.ready,await(y==null?void 0:y.importTasks())}),I=x.then(V=>V.mrpcExec),T=x.then(V=>V.mrpcPtyExec);return b.catch(console.error),t.onAdoptProcess(V=>nse(e.shellServer,D,p,v,V).catch(console.error)),i.stop(c,l),{remoteContainersCLI:A,remoteEnv:{REMOTE_CONTAINERS_IPC:D,...p?{SSH_AUTH_SOCK:p}:void 0,...C?{DISPLAY:C}:void 0,...v?{REMOTE_CONTAINERS_DISPLAY_SOCK:v}:void 0},mrpcExec:I,mrpcPtyExec:T,ready:b,reconnect:()=>x.then(V=>V.reconnect())}}function jie(t,e){for(let n of t){let r=e(n);if(r)return r}}async function LR(t,e){for(let n of t){let r=await e(n);if(r)return r}}async function UV(t,e){try{return await t.exec(`(${e.map(n=>`command -v '${n}'`).join(" || ")}) >/dev/null 2>&1`),!0}catch{return!1}}async function Vie(t,e){try{return await t.exec(`test -e ${e}`),!0}catch{return!1}}async function xp(t,e,n,r,o){let{passwdUser:i,homeFolder:s,nodeExecutable:a,mrpcExec:c,mrpcPtyExec:l,setBaseEnv:u,connect:f,reconnect:m,terminate:d}=await MV(t,{remoteExec:e,platform:o},"Host",n,!0,r,void 0);return{passwdUser:i,homeFolder:s,nodeExecutable:a,exec:c,ptyExec:l,setBaseEnv:u,connect:f,reconnect:m,terminate:d}}async function MV(t,e,n,r,o,i,s,a,c,l,u,f){let{cliHost:m,product:d,output:p}=t,{remoteExec:g,platform:h,nodeExecutable:v,launchRootShellServer:C}=e,w=a&&at(lr.join(t.extensionPath,"dist","common","remoteContainersCLI.js"),{encoding:"utf8"}),y=at(lr.join(t.extensionPath,"dist","common","remoteContainersServer.js"),{encoding:"utf8"}),S=await Wt(g,p,void 0,h,n),D=o?await Uf(S,await Fl(S)):void 0,_=(await S.exec({posix:"echo ~",win32:"echo $env:userprofile"})).stdout.trim().split(`
`)[0],A=!0;if(!v||!s){let I=S.path.join(_,".vscode-remote-containers");v||(v=await rse(t,S,I,_,d,i)),s||(s=S.path.join(I,"dist",`vscode-remote-containers-server-${t.package.version}.js`),await Ai(S,s)?A=!1:await S.exec(`mkdir -p '${S.path.dirname(s)}'`))}if(a){let I=`EOF-${a}`;await S.exec(`cat <<'${I}' >${a}
${await w}
${I}
`)}if(c&&C&&((m==null?void 0:m.type)!=="local"&&f&&await vR(f,p)||m&&await vR(m,p))){let I=(await S.exec(`cat ~/.docker/config.json || echo "{
}"`)).stdout,T=Me(I);if(!(T!=null&&T.credsStore)||T.credsStore.startsWith(gR)){let R=await C(),L=`EOF-${c}`;await R.exec(`mkdir -p ${lr.posix.dirname(c)} && cat <<'${L}' >${c}
#!/bin/sh
${v} ${a} docker-credential-helper $@
${L}
`),await R.exec(`chmod +x ${c}`);let N=bn(I,["credsStore"],lr.posix.basename(c).substring(18),{formattingOptions:{}}),B=Io(I,N);await S.exec(`mkdir -p ~/.docker && cat <<'${L}' >~/.docker/config.json
${B}
${L}
`)}}if(A){let I=`EOF-${s}`,T=`${s}_${Date.now()}`;await S.exec(`cat <<'${I}' >${T}
${await y}
${I}
mv ${T} ${s}`)}let U=()=>Yie(t,n,S,v,s,l,u,f),k=await U(),E;async function x(){let I=`${n}: Reconnecting Dev Container server`,T=p.start(I);await k.terminate().catch(()=>{}),S=await Wt(g,p,void 0,void 0,n),k=await U(),E&&await new Promise((R,L)=>{k.mrpc.setBaseEnv(E,N=>N?L(N):R())}),b(k),p.stop(I,T)}async function b(I){if(await I.reconnect,I===k)try{await x()}catch(T){p.write(`Reconnecting Dev Container server failed: ${(T==null?void 0:T.message)||String(T)}`)}}return b(k),{ready:k.ready,passwdUser:D,nodeExecutable:v,homeFolder:_,mrpcExec:Gie(()=>k.mrpc,n,r||_),mrpcPtyExec:zie(()=>k.mrpc,n,r||_),mrpcExecToEnd:Kie(()=>k.mrpc,n,r||_),setBaseEnv:I=>new Promise((T,R)=>{E=I,k.mrpc.setBaseEnv(I,L=>L?R(L):T())}),connect:k.mrpc.connect,reconnect:x,terminate:()=>k.terminate()}}async function Yie(t,e,n,r,o,i,s,a){let{cliHost:c,output:l}=t,u=Object.keys(i||{}),f={...u.reduce((E,x)=>(E[x]="duplex",E),{}),rpc:"async",connected:"async",ready:"async"},m={exec:"async",stdin:"sink",stdout:"source",stderr:"source",exit:"async",terminate:"async",dispose:"async",ptyExec:"async",ptyIn:"sink",ptyOut:"source",ptyResize:"async",ptyExit:"async",ptyTerminate:"async",ptyDispose:"async",execToEnd:"async",setBaseEnv:"async",connect:"duplex"},d=n.process,p=`set -e ; echo -n ${ri} >&2 ; ${s?`rm -f '${s}' ; `:""}REMOTE_CONTAINERS_SOCKETS='${JSON.stringify(u)}' REMOTE_CONTAINERS_IPC='${s||""}' '${r}' '${o}' ; exit
`;d.stdin.write(p);let g,h=new Promise(E=>g=E),v=new OV.StringDecoder;d.stderr.on("data",E=>{let x=v.write(E).replace(/^.*DeprecationWarning: Buffer\(\) is deprecated.*$\r?\n?/mg,"").trim();if(g){let b=x.indexOf(ri);b!==-1&&(g(),g=void 0,x=x.substr(0,b)+x.substr(b+1))}x&&l.write(ot(`${e} server: ${x}`))});let C=!1,w,y=new Promise(E=>w=E);d.exit.then(async({code:E,signal:x})=>{l.write(`${e} server terminated (code: ${E}, signal: ${x}).`),C?(l.write(`${e} server terminated. Reconnecting in 5 seconds...`),await Bt(5*1e3),w()):l.write(`${e} server terminated early. Not reconnecting.`)},E=>{l.write(`${e} server did not launch or terminated: ${(E==null?void 0:E.stack)||(E==null?void 0:E.message)||String(E)}`)});let S=(c==null?void 0:c.type)==="local",D={git:S,docker:S},_,A=new Promise(E=>_=E),U=Hie(m,f)({...u.reduce((E,x)=>{let b=i[x];return E[x]=qie(t,b),E},{}),rpc:async(E,x)=>{try{let{args:b,stdin:I}=JSON.parse(E);if(b[0]==="git-credential-helper"){let T=await pj(a,c,D.git,b,I);D.git=T.preferLocalCLIHost,x(void 0,JSON.stringify(T.result))}else if(b[0]==="docker-credential-helper"){let T=await Tj(a,c,D.docker,b,I,l);D.docker=T.preferLocalCLIHost,x(void 0,JSON.stringify(T.result))}}catch(b){console.error(b),x(b)}},connected:E=>{E()},ready:E=>{C=!0,_(),E()}});(0,qS.default)(FV.source(d.stdout),U.createStream(),FV.sink(d.stdin)),await Promise.race([h,d.exit.then(({code:E,signal:x})=>{throw new Error(`${e} server terminated (code: ${E}, signal: ${x}).`)})]);function k(){return C=!1,d.terminate()}return{ready:A,mrpc:U,terminate:k,reconnect:y}}function qie(t,e){let{sendTelemetryEvent:n,output:r}=t,o=!1;function i(s){if(!o&&s instanceof Error&&s.code==="ENOENT"&&(o=!0,r.event({type:"notification",message:FR.t("Could not connect to {0} on {1} host ({2}). Make sure the service is running.",e.name,e.cliHost.type,e.unparsed)}),n)){let a={serviceName:e.name,hostType:e.cliHost.type,hostPlatform:e.cliHost.platform},c=e.cliHost.authority;if(c){let l=c.indexOf("+");l!==-1&&(a.hostAuthority=c.substring(0,l))}n("serviceConnectionFailure",a)}}return()=>{let s=e.cliHost.connect(e.connectTo);return{sink:a=>{s.sink((c,l)=>{i(c),a(c,l)})},source:(a,c)=>{s.source(a,(l,u)=>{i(l),c(l,u)})}}}}function Gie(t,e,n){return async r=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=r,l=`Run in ${e}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),f=t(),m=await new Promise((d,p)=>{f.exec({cmd:o,args:i,cwd:s||n,env:a},(g,h)=>{g?p(g):d(h)})});return{stdin:NR.sink(f.stdin(m,d=>{d&&d.message!=="unexpected end of parent stream"&&console.error(d)})),stdout:NR.source(f.stdout(m)),stderr:NR.source(f.stderr(m)),exit:new Promise((d,p)=>{f.exit(m,(g,h)=>{var v;c.stop(l,u),g?((v=g.message)!=null&&v.endsWith("ENOENT")&&!g.code&&(g.code="ENOENT"),p(g)):d(h)})}),terminate:async()=>new Promise((d,p)=>{f.terminate(m,g=>{g?p(g):d()})})}}}function zie(t,e,n){return async r=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=r,l=`Run in ${e}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),f=t(),m=await new Promise((h,v)=>{var C,w;f.ptyExec({cmd:o,args:i,cwd:s||n,env:a,rows:(C=c.dimensions)==null?void 0:C.rows,cols:(w=c.dimensions)==null?void 0:w.columns},(y,S)=>{y?v(y):h(S)})}),d=[c.onDidChangeDimensions&&c.onDidChangeDimensions(h=>f.ptyResize(m,h.columns,h.rows))],p=Bie();(0,qS.default)(p,f.ptyIn(m,h=>{h&&h.message!=="unexpected end of parent stream"&&console.error(h)}));let g=new js;return(0,qS.default)(f.ptyOut(m),h=>{h(null,function v(C,w){if(C!==!0){if(C)throw C;g.fire(w),h(null,v)}})}),{write:h=>p.push(h),onData:g.event,resize:(h,v)=>f.ptyResize(m,h,v),exit:new Promise((h,v)=>{f.ptyExit(m,(C,w)=>{d.forEach(y=>y==null?void 0:y.dispose()),c.stop(l,u),C?v(C):h(w)})}),terminate:async()=>new Promise((h,v)=>{f.ptyTerminate(m,C=>{C?v(C):h()})})}}}function Kie(t,e,n){return async r=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=r,l=`Run in ${e}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),f=t();return new Promise((m,d)=>{f.execToEnd({cmd:o,args:i,cwd:s||n,env:a},(p,g)=>{if(c.stop(l,u),p||!g)d({stdin:new Ll.Writable,stdout:Ll.Readable.from([]),stderr:Ll.Readable.from([]),exit:Promise.reject(p),terminate:async()=>{}});else{let h=Ll.Readable.from([Buffer.from(g.stdout.data)]),v=new Promise(y=>h.on("end",y)),C=Ll.Readable.from([Buffer.from(g.stderr.data)]),w=new Promise(y=>C.on("end",y));m({stdin:new Ll.Writable,stdout:h,stderr:C,exit:Promise.all([v,w]).then(()=>({code:g.code,signal:g.signal})),terminate:async()=>{}})}})})}}var Lv="\\\\.\\pipe\\openssh-ssh-agent";async function OR(t){return t.platform==="win32"&&t.isFile(Lv)}async function Jie(t,e){let n=t.env.SSH_AUTH_SOCK;if(n)return{name:"ssh-agent",unparsed:n,cliHost:t,connectTo:{socketPath:n}};if(e.write(`ssh-agent: SSH_AUTH_SOCK not set on ${t.type} host.`),await OR(t))return{name:"ssh-agent",unparsed:Lv,cliHost:t,connectTo:{socketPath:Lv}}}function Xie(t,e){let n=t.env.DISPLAY,r=n==null?void 0:n.match(/^(?<hostOrPath>[^:]+)?:(?<display>\d+)(?:\.(?<screen>\d+))?$/);if(r!=null&&r.groups){let{hostOrPath:o,display:i}=r.groups,s=FR.t("X11 display");return!o||o==="localhost/unix"?{name:s,unparsed:n,cliHost:t,connectTo:{socketPath:`/tmp/.X11-unix/X${i}`}}:o.startsWith("/")?{name:s,unparsed:n,cliHost:t,connectTo:{socketPath:`${o}:${i}`}}:{name:s,unparsed:n,cliHost:t,connectTo:{host:o,port:6e3+parseInt(i,10)}}}n?e.write(`X11 forwarding: DISPLAY value on ${t.type} host not supported (${n}).`):e.write(`X11 forwarding: DISPLAY not set on ${t.type} host.`)}async function UR(t){let e=t.env.WAYLAND_DISPLAY,n=t.env.XDG_RUNTIME_DIR,r=e&&t.path.isAbsolute(e)?e:e&&n&&t.path.join(n,e),o=n&&t.path.join(n,"wayland-0"),i=r||o;if(i&&await t.isSocket(i))return i}async function $V(t){let e=AR.randomUUID();return lr.posix.join((t==null?void 0:t.TMPDIR)||"/tmp",`vscode-wayland-${e}.sock`)}async function HV(t,e){let{shellServer:n,remoteWaylandSocket:r}=t;if(!r||e.WAYLAND_DISPLAY)return{};let o=e.XDG_RUNTIME_DIR;o||(o=(await n.exec('umask 077 && XRD="/tmp/user/$(id -u)" && mkdir -p $XRD && echo $XRD')).stdout.trim());let i=lr.posix.basename(r);return await n.exec(`test -e ${o}/${i} || ln -sf ${r} ${o}/${i}`),o===e.XDG_RUNTIME_DIR?{WAYLAND_DISPLAY:i}:{XDG_RUNTIME_DIR:o,WAYLAND_DISPLAY:i}}async function Zie(t,e,n){let r="Checking for GitHub CLI",o=n.start(r);await UV(t.shellServer,["gh"])&&(async()=>{let s="Setting up GitHub CLI",a=n.start(s);try{if(!await ese(t.remoteExec,n)){let l=await LR(e,u=>Qie(u.exec,n))||void 0;l&&await tse(t.remoteExec,l,n)}}catch(c){n.write(`Error setting up GitHub CLI: ${(c==null?void 0:c.stack)||(c==null?void 0:c.message)||String(c)}`)}finally{n.stop(s,a)}})(),n.stop(r,o)}async function Qie(t,e){try{let{stdout:n}=await X({exec:t,cmd:"gh",args:["auth","token"],output:e});return n.toString().trim()}catch{return}}async function ese(t,e){try{return await X({exec:t,cmd:"gh",args:["auth","status"],output:e}),!0}catch{return!1}}async function tse(t,e,n){try{await X({exec:t,cmd:"gh",args:["auth","login","--with-token"],stdin:Buffer.from(e),output:n})}catch{}}var yp=new Set;async function nse(t,e,n,r,o){let i=await o.processId;if(i&&i>0){let s=await Cj(t,i),a=s.REMOTE_CONTAINERS_IPC;a&&a!==e&&!yp.has(a)&&a.indexOf("vscode-remote-containers-ipc")!==-1&&(yp.add(a),await t.exec(`rm '${a}' && ln -s '${e}' '${a}'`));let c=s.SSH_AUTH_SOCK;c&&n&&c!==n&&!yp.has(c)&&c.indexOf("vscode-ssh-auth")!==-1&&(yp.add(c),await t.exec(`rm '${c}' && ln -s '${n}' '${c}'`));let l=s.REMOTE_CONTAINERS_DISPLAY_SOCK;l&&r&&l!==r&&!yp.has(l)&&(yp.add(l),await t.exec(`rm '${l}' && ln -s '${r}' '${l}'`))}}async function rse(t,e,n,r,o,i){let s=o.commit||await vp(o.quality),a=o.commit?o.quality||"insider":"stable",c=lr.posix,l=`${a.substring(0,1).toUpperCase()}${a.substring(1)}${a==="insider"?"s":""}-${s}`,u=D=>Ai(e,D),f=c.join(Ep(c,r,o),"cli","servers",l,"server");if(await YS(f,u))return Cp(f);let m=c.join(MR(c,r,o),"cli","servers",l,"server");if(await YS(m,u))return Cp(m);let d=c.join(Ep(c,r,o),"bin",s);if(await YS(d,u))return Cp(d);let p=c.join(n,"bin",s);if(await YS(p,u))return Cp(p);let{localCacheFolder:g,output:h,alternateDownload:v}=t,C;if((await e.exec("uname -s")).stdout.trim().split(`
`)[0]==="Darwin")C=(await e.exec("uname -m")).stdout.trim()==="arm64"?GS.arm64:GS.x64;else{let D=await $R(e);C=JS(D,!1)}let y={localCacheFolder:g,build:C,commit:s,quality:a,web:!1,output:h,alternateDownload:v,legacy:!1},S=_p(y);if(await Cr(S)||await Fv(y),C.id==="darwin")await Av({output:h},e,S,p,i);else{let D=[];await zS.t({file:S,filter:A=>/^[^/]*\/(LICENSE$|node$|node_modules\/node-pty\/)/.test(A),onentry:A=>{new zS.WriteEntry.Tar(A).on("data",k=>D.push(k))}});let _=Buffer.concat(D);await Av({output:h},e,_,p,i,!1)}return Cp(p)}async function YS(t,e){let n=Cp(t),r=lr.posix.join(t,"node_modules","node-pty","package.json");return await e(n)&&await e(r)}function Cp(t){return lr.posix.join(t,"node")}var Ov=Y(require("net"));var Uv=jS(),HR=t=>{if("port"in t)return Uv.duplex(Ov.connect(t.port,t.host));let e=t.socketPath;if(process.platform!=="win32"||e.startsWith("\\\\.\\pipe\\"))return Uv.duplex(Ov.connect(e));let n=new Ov.Socket;return sse(n,e)};function ose(t){let e=[];return t.split("-").map(n=>{let r=n.match(/.{2}/g);r!==null&&r.reverse().map(o=>{e.push(parseInt(o,16))})}),Buffer.from(e)}function ise(t,e,n){return e||n===void 0?{headerSize:t,err:e}:t===0?{headerSize:t,data:n}:n.length>t?(n=n.slice(t,n.length),t=0,{headerSize:t,data:n}):(t=t-n.length,{headerSize:t})}function sse(t,e){let n=0,r=[],o=[],i,s=u=>{u instanceof Error&&console.error(u),t.destroy();for(let f of r)f.cb(u,void 0);r=[];for(let f of o)f(u,(m,d)=>{});o=[]};function a(u,f){i.source(u,function(m,d){let p=ise(n,m,d);n=p.headerSize,p.err||p.data?f(p.err||null,p.data):a(u,f)})}return(async()=>{let u=await at(e),m=u.toString().match(/!<socket >(\d+)( s)? ((([A-Fa-f0-9]{2}){4}-?){4})/),d,p;if(m!==null){let g=m[1],h=m[3];d=parseInt(g,10);let v=ose(h),C=Buffer.alloc(12);C.writeUInt32LE(process.pid,0),p=Buffer.concat([v,C]),n=28}else{let g=u.indexOf(10);d=parseInt(u.slice(0,g).toString(),10),p=u.slice(g+1),n=0}t.on("error",g=>{s(g)}),t.connect(d,"127.0.0.1",()=>{t.write(p,g=>{if(!g){i=Uv.duplex(t);for(let h of r)a(h.abort,h.cb);r=[];for(let h of o)i.sink(h);o=[]}})})})().catch(u=>{s(u)}),{source:function(u,f){i!==void 0?a(u,f):r.push({abort:u,cb:f})},sink:function(u){i!==void 0?i.sink(u):o.push(u)}}}function BV(t,e,n){return r=>{let o=(async()=>{let i="port"in r?`{ host: '${r.host}', port: ${r.port} }`:`{ path: '${r.socketPath}' }`,s=await e({cmd:t,args:["-e",`// Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host.
const net = require('net');
const fs = require('fs');
process.stdin.pause();
const client = net.createConnection(${i}, () => {
	console.error('Connection established');
	client.pipe(process.stdout);
	process.stdin.pipe(client);
});
client.on('close', function (hadError) {
	console.error(hadError ? 'Remote close with error' : 'Remote close');
	process.exit(hadError ? 1 : 0);
});
client.on('error', function (err) {
	process.stderr.write(err && (err.stack || err.message) || String(err));
});
process.stdin.on('close', function (hadError) {
	console.error(hadError ? 'Remote stdin close with error' : 'Remote stdin close');
	process.exit(hadError ? 1 : 0);
});
process.on('uncaughtException', function (err) {
	fs.writeSync(process.stderr.fd, \`Uncaught Exception: \${String(err && (err.stack || err.message) || err)}\\n\`);
});
`],output:sn(n,1)});return s.exit.then(({code:a,signal:c})=>{n.write(`Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host terminated with code ${a} and signal ${c}.`,1)},a=>{n.write(`Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host terminated with error: ${a&&a.message||String(a)}`)}),s.stderr.on("data",a=>{n.write(`Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host stderr: ${a.toString("utf8")}`,1)}),{sink:Uv.sink(s.stdin),source:Uv.source(s.stdout)}})();return{sink:i=>{o.then(s=>s.sink(i),s=>i(s,()=>{})).catch(s=>n.write(`Connection forwarding to sink error: ${(s==null?void 0:s.stack)||(s==null?void 0:s.message)||String(s)}`))},source:(i,s)=>{o.then(a=>a.source(i,s),a=>s(a)).catch(a=>n.write(`Connection forwarding to source error: ${(a==null?void 0:a.stack)||(a==null?void 0:a.message)||String(a)}`))}}}}var XS=!1;function Mf(t,e,n){return XS?function(o){return ase(t(o),`${e} ${JSON.stringify(o)}`,n)}:t}function ase(t,e,n){return XS?{source:WV(t.source,`${e} Source`,n),sink:cse(t.sink,`${e} Sink`,n)}:t}function WV(t,e,n){return XS?function(o,i){n.write(`${e} end in (${typeof o}${o&&typeof o=="object"?`: ${Object.keys(o)}`:""}): ${o&&typeof o=="object"&&o.stack||o}`),t(o,function(a,c){n.write(`${e} end out (${typeof a}${a&&typeof a=="object"?`: ${Object.keys(a)}`:""}): ${a&&typeof a=="object"&&a.stack||a}`),n.write(`${e} data: ${c==null?void 0:c.toString("hex")}`),i(a,c)})}:t}function cse(t,e,n){return XS?function(o){t(WV(o,e,n))}:t}var BR=Y(Mr()),YV=/^\\\\wsl(\.localhost|\$)?\\/;function xr(t){return YV.test(t.toLowerCase())}function $f(t){let e=t.toLowerCase(),n=YV.exec(e);if(!n)return"";let r=e.indexOf("\\",n[0].length);return t.substring(n[0].length,r)}async function Mv(t){let{stdout:e}=await X({exec:ds(void 0),cmd:"wsl",args:["-l","-v"],output:t}),n=e.toString(e[1]===0?"utf16le":"utf8").trim();return(/^\*\s*(\S+)/m.exec(n)||[])[1]}async function Ol(t,e,n){let{stdout:r}=await X({exec:ds(void 0),cmd:"wsl",args:["-d",t,"-e","wslpath","-u",e],output:n}),o=r.toString().trim();if(o.startsWith("/mnt/wsl/")&&e.match(/^[a-zA-Z]:/)){let i=`/mnt/${e[0].toLowerCase()}${e.substring(2).replace(/\\/g,"/")}`;try{return await X({exec:ds(void 0),cmd:"wsl",args:["-d",t,"-e","test","-e",i],output:n}),i}catch(s){(s==null?void 0:s.code)!==1&&n.write(`Error checking WSL path: ${(s==null?void 0:s.stack)||(s==null?void 0:s.message)||s}`)}}return o}async function lse(t,e){let{stdout:n}=await X({exec:ds(void 0),cmd:"wsl",args:["-d",t,"-e","/bin/sh","-c","echo ~"],output:e});return n.toString().trim()}async function qV(t,e,n){let{stdout:r}=await X({exec:t.exec,cmd:"wslpath",args:["-w",e],output:n});return r.toString().trim()}async function Dp(t,e){let n=$f(t),r=await Ol(n,t,e);return Ce.parse(`vscode-remote://wsl+${n}${r}`)}function Ip(t){if(t.scheme==="vscode-remote"){let e=ZS(t.authority);if(e){let n=t.path;return Iv(n)&&(n=jV.posix.dirname(n)),{wslDistro:e,wslPath:n}}}}function ZS(t){return(/wsl\+(.*)/.exec(t)||[])[1]}async function QS(t,e,n,r,o,i,s,a){var p;let{distro:c,cwd:l}=await WR(t,e,s);VV.ok(!c.startsWith("-"),BR.t("Distro must not start with a dash: {0}",c));let u=Hf("wsl",["-d",c,"-e"],l),f=await xp({extensionPath:n,localCacheFolder:r,package:await cr(n),product:o,loadNativeModule:i,output:s,alternateDownload:a},u,l,!1),m=await Bf({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:s},{shell:((p=f.passwdUser)==null?void 0:p.shell)||"/bin/sh",remoteExec:f.exec});delete m.WSL_INTEROP,await f.setBaseEnv(m);let d=so("wsl",l,m,f.exec,f.ptyExec,Mf(f.connect,"WSL",s),f.nodeExecutable,s);return d.toCommonURI=async g=>{try{return Ce.file((await X({exec:f.exec,cmd:"wslpath",args:["-w",g],output:s})).stdout.toString().trim())}catch{return}},d.reconnect=()=>f.reconnect(),d.terminate=()=>f.terminate(),d}async function WR(t,{defaultDistro:e},n){let r,o;return typeof t=="object"?(r=t.wslDistro,o=t.wslPath):t&&xr(t)?(r=$f(t),o=await Ol(r,t,n)):(r=e||await Mv(n)||(()=>{throw new pe({description:BR.t("No default WSL distro found.")})})(),o=t?await Ol(r,t,n):await lse(r,n)),{distro:r,cwd:o}}function Wf(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}async function GV(t,e,n,r,o){try{return(await Yn(e,{posix:X({exec:t,cmd:"cat",args:[r],output:o}),win32:X({exec:t,cmd:n,args:["-e",`require('fs').createReadStream('${r.replace(/\\/g,"\\\\")}').pipe(process.stdout)`],output:o})})).stdout}catch(i){let s=new Error(`Could not read file: ${r}`);throw s.originalError=i,s.code="ENOENT",s}}async function zV(t,e,n,r,o,i){await Yn(e,{posix:X({exec:t,cmd:"dd",args:[`of=${r}`],stdin:o,output:i}),win32:X({exec:t,cmd:n,args:["-e",`process.stdin.pipe(require('fs').createWriteStream('${r.replace(/\\/g,"\\\\")}'))`],stdin:o,output:i})})}async function ex(t,e,n,r,o){await Yn(e,{posix:()=>X({exec:t,cmd:"mv",args:["-n",n,r],output:o}),win32:()=>X({exec:t,cmd:"powershell",args:["-NoProfile","-Command",`Move-Item -Path '${n}' -Destination '${r}'`],env:ao(),output:o})})()}async function tx(t,e,n,r,o){let{recursive:i,force:s}=r;await Yn(e,{posix:()=>X({exec:t,cmd:"rm",args:[i&&"-r",s&&"-f",n].filter(Boolean),output:o}),win32:()=>X({exec:t,cmd:"powershell",args:["-NoProfile","-Command",`Remove-Item${i?" -Recurse":""}${s?" -Force":""} '${n}'`],env:ao(),output:o})})()}async function nx(t,e,n,r){await Yn(e,{posix:()=>X({exec:t,cmd:"mkdir",args:["-p",n],output:r}),win32:()=>X({exec:t,cmd:"powershell",args:["-NoProfile","-Command",`New-Item -ItemType Directory '${n}'`],env:ao(),output:r})})()}async function KV(t,e,n,r){return(await Yn(e,{posix:()=>X({exec:t,cmd:"ls",args:["-a",n],output:r}),win32:()=>X({exec:t,cmd:"powershell",args:["-NoProfile","-Command",`(Get-ChildItem '${n}').Name`],env:ao(),output:r})})()).stdout.toString().trim().split(/\r?\n/).filter(i=>i!=="."&&i!=="..")}var VR=Y(require("path")),ix=Y(require("os")),sx=Y(require("crypto"));var JV=Y(require("os")),rx=Y(require("assert")),ox=Y(Mr());async function XV(t,e,n,r,o,i,s,a,c,l){var v;let u=t.substr(6),f=u.indexOf(":"),m=[(l==null?void 0:l.settings.executablePath)||"ssh"];if(l!=null&&l.settings.executableArgs&&m.push(...l.settings.executableArgs),l!=null&&l.settings.configFilePath&&m.push("-F",use(l==null?void 0:l.settings.configFilePath)),f!==-1){let C=u.substr(f+1);rx.ok(!C.startsWith("-"),ox.t("Port number must not start with a dash: {0}",C));let w=u.substr(0,f);rx.ok(!w.startsWith("-"),ox.t("Hostname must not start with a dash: {0}",w)),m.push("-p",C,w)}else rx.ok(!u.startsWith("-"),ox.t("Hostname must not start with a dash: {0}",u)),m.push(u);let d=Hf(m[0],m.slice(1),void 0,await(l==null?void 0:l.sshAskpassEnv)||{}),p=await xp({extensionPath:r,localCacheFolder:o,package:await cr(r),product:i,loadNativeModule:s,output:a,alternateDownload:c},d,e,!1),g=await Bf({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:a},{shell:((v=p.passwdUser)==null?void 0:v.shell)||"/bin/sh",remoteExec:p.exec});await p.setBaseEnv(g);let h=so("remote",e||p.homeFolder,g,p.exec,p.ptyExec,p.connect,p.nodeExecutable,a);return h.toCommonURI=()=>Promise.resolve(void 0),h.reconnect=()=>p.reconnect(),h.terminate=()=>p.terminate(),h}function use(t){return t.replace(/^~($|\/|\\)/,`${JV.homedir()}$1`)}function $v(t,e){let n=fse(t);if(n)return Ce.parse(`vscode-remote://${jR(n)}${e}`)}function jR(t){let e=t.hostName;if(t.user||t.hostName.toLowerCase()!==t.hostName||t.port||t.hostName.match(/[\/\\\+]/)){let n=JSON.stringify(t);e=Buffer.from(n,"utf8").toString("hex")}return`ssh-remote+${e}`}function fse(t){if(!t.startsWith("ssh://"))return;let e=t.substr(6);return ZV(e)}function ZV(t){let e=t.match(/^(?:(.*)@)?(.+?)(?::(\d+))?$/);if(e){let[,n,r,o]=e;return{hostName:r,user:n,port:o?parseInt(o,10):void 0}}return{hostName:t}}function Ul(t){var e;return!!(t&&"host"in t&&((e=t.host)!=null&&e.startsWith("ssh://")))}function Ml(t){return!!(t!=null&&t.startsWith("ssh-remote+"))}function Hv(t){let e=/^ssh-remote\+(.*)$/.exec(t);if(!e)return;let n=e[1];try{let r=JSON.parse(Buffer.from(n,"hex").toString("utf8"));if(r&&r.hostName)return r}catch{}return ZV(n)}var dse=!1;async function YR(t,e,n,r,o,i,s,a,c,l){return t!=null&&t.startsWith("ssh://")&&!(l!=null&&l.localDocker)?XV(t,e,r,o,i,s,n,a,c,l):typeof e=="object"||r.executeInWSL==="forWSLPath"&&e&&xr(e)||r.executeInWSL==="always"?QS(e,r,o,i,s,n,a,c):dse?mse(e||process.cwd(),o,i,s,n,a,c):Gr(e||process.cwd(),n,a)}async function Gr(t,e,n=Fe){let r=ds(t),o=await eY(t,e);return QV(t,r,o,n?Mf(HR,"Local",n):HR,e,n)}async function mse(t,e,n,r,o,i,s){let a=ds(t),c=await xp({extensionPath:e,localCacheFolder:n,package:await cr(e),product:r,loadNativeModule:o,output:i,alternateDownload:s},a,t,!0,process.platform);return QV(t,c.exec,c.ptyExec,Mf(c.connect,"Local Test",i),o,i)}function so(t,e,n,r,o,i,s,a){let c,l,u;return{type:t,platform:"linux",exec:r,ptyExec:o,cwd:e,env:n,path:VR.posix,async homedir(){if(typeof l>"u"){let m=(await X({exec:r,cmd:"id",args:["-u"],output:Fe})).stdout.toString().trim(),d=await Wt(r,Fe,void 0,"linux","Host"),p=await Uf(d,m);l=this.env.HOME||(p==null?void 0:p.home)||"/"}return l},async tmpdir(){return this.env.TMPDIR||"/tmp"},isFile:async f=>{try{return await X({exec:r,cmd:"test",args:["-f",f],output:Fe}),!0}catch(m){if((m==null?void 0:m.code)!==1)throw m;return!1}},isFolder:async f=>{try{return await X({exec:r,cmd:"test",args:["-d",f],output:Fe}),!0}catch(m){if((m==null?void 0:m.code)!==1)throw m;return!1}},isSocket:async f=>{try{return await X({exec:r,cmd:"test",args:["-S",f],output:Fe}),!0}catch(m){if((m==null?void 0:m.code)!==1)throw m;return!1}},readFile:async f=>{try{return(await X({exec:r,cmd:"cat",args:[f],output:Fe})).stdout}catch(m){let d=new Error(`Could not read file: ${f}`);throw d.originalError=m,d.code="ENOENT",d}},writeFile:async(f,m)=>{await X({exec:r,cmd:"/bin/sh",args:["-c",`cat >'${f}'`],stdin:m,output:Fe})},rename:async(f,m)=>{await X({exec:r,cmd:"mv",args:[f,m],output:Fe})},rm:async(f,{recursive:m,force:d}={})=>{await X({exec:r,cmd:"rm",args:[...m?["-r"]:[],...d?["-f"]:[],f],output:Fe})},mkdirp:async f=>{await X({exec:r,cmd:"mkdir",args:["-p",f],output:Fe})},readDir:async f=>(await X({exec:r,cmd:"ls",args:["-a",f],output:Fe})).stdout.toString().trim().split(`
`).filter(m=>m!=="."&&m!==".."),readDirWithTypes:async f=>{let m={f:1,"*":1,"/":2,"@":64};return(await X({exec:r,cmd:"ls",args:["-aF",f],output:Fe})).stdout.toString().trim().split(`
`).map(d=>"/*@=%|>".indexOf(d[d.length-1])!==-1?[d.substr(0,d.length-1),d[d.length-1]]:[d,"f"]).filter(([d])=>d!=="."&&d!=="..").map(([d,p])=>[d,m[p]||0])},getUsername:async()=>(c===void 0&&(c=(await X({exec:r,cmd:"id",args:["-u","-n"],output:Fe})).stdout.toString().trim()),c),toCommonURI:()=>Promise.resolve(void 0),connect:i,locateCertificatesFile:function(){return u||(u=ax(this,void 0,a))},nodeExecutable:s}}function QV(t,e,n,r,o,i){let s;return{type:"local",platform:process.platform,exec:e,ptyExec:n,cwd:t,env:process.env,path:VR,homedir:async()=>ix.homedir(),tmpdir:async()=>ix.tmpdir(),isFile:Cr,isFolder:o1,isSocket:i1,readFile:at,writeFile:Ng,rename:sl,rm:cl,mkdirp:async a=>{await os(a)},readDir:al,getUsername:cx,toCommonURI:async a=>Ce.file(a),connect:r,locateCertificatesFile:function(){return s||(s=ax(this,o,i))}}}var pse=["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt","/etc/ssl/ca-bundle.pem"];async function ax(t,e,n){if(t.env.NODE_EXTRA_CA_CERTS&&await t.isFile(t.env.NODE_EXTRA_CA_CERTS))return t.env.NODE_EXTRA_CA_CERTS;if(t.platform==="linux"){for(let c of pse)if(await t.isFile(c))return c;return}if(t.type!=="local")return;let r=await(e==null?void 0:e("@vscode/proxy-agent"));if(!(r!=null&&r.loadSystemCertificates))return;let o=await r.loadSystemCertificates({loadSystemCertificatesFromNode:()=>{},log:{trace(c,...l){n.write(c,1)},debug(c,...l){n.write(c,2)},info(c,...l){n.write(c,3)},warn(c,...l){n.write(c,4)},error(c,...l){n.write(typeof c=="string"?c:String(c),5)}}});if(!o.length)return;let i=Buffer.from(o.join(t.platform==="win32"?`\r
`:`
`)),s=sx.createHash("sha256").update(i).digest("hex"),a=t.path.join(await Bv(t),`certificates-${s}.pem`);if(!await t.isFile(a)){await t.mkdirp(t.path.dirname(a));let c=`${a}-${sx.randomUUID()}`;await t.writeFile(c,i),await t.rename(c,a)}return a}var hse=lx.join(__dirname,"..","..","node_modules",".bin","ts-node"),Al=lx.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;async function X(t){let{exec:e,cmd:n,args:r,cwd:o,env:i,stdin:s,output:a,print:c}=t,l=await e({cmd:n,args:r,cwd:o,env:i,output:a});return new Promise((u,f)=>{let m=[],d=[],p=c==="continuous"?new Wv.StringDecoder:void 0;l.stdout.on("data",v=>{m.push(v),c==="continuous"&&a.write(p.write(v))}),l.stdout.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v});let g=c==="continuous"?new Wv.StringDecoder:void 0;l.stderr.on("data",v=>{d.push(v),c==="continuous"&&a.write(ot(g.write(v)))}),l.stderr.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v});let h=[];l.exit.then(({code:v})=>{try{h.forEach(y=>y.dispose());let C=Buffer.concat(m),w=Buffer.concat(d);(c===!0||v&&c==="onerror")&&(a.write(C.toString().replace(/\r?\n/g,`\r
`)),a.write(ot(w.toString()))),c&&v&&a.write(`Exit code ${v}`),v?f({message:`Command failed: ${n} ${(r||[]).join(" ")}`,stdout:C,stderr:w,code:v}):u({stdout:C,stderr:w})}catch(C){f(C)}},v=>{c&&(v!=null&&v.message)&&a.write(ot(v==null?void 0:v.message)),f(v)}),s instanceof Buffer?(l.stdin.write(s,v=>{v&&f(v)}),l.stdin.end()):s instanceof tY.Readable?s.pipe(l.stdin):typeof s=="function"&&h.push(s(v=>l.stdin.write(v)))})}async function Fi(t){let{ptyExec:e,cmd:n,args:r,cwd:o,env:i,output:s,resolveOn:a,onDidInput:c}=t,l=await e({cmd:n,args:r,cwd:o,env:i,output:s});return new Promise((u,f)=>{let m="",d=[c&&c(p=>l.write(p))];l.onData(p=>{m+=p,s.raw(p),a&&a.exec(m)&&u({cmdOutput:m})}),l.exit.then(({code:p,signal:g})=>{try{d.forEach(h=>h==null?void 0:h.dispose()),p||g?f({message:`Command failed: ${n} ${(r||[]).join(" ")}`,cmdOutput:m,code:p,signal:g}):u({cmdOutput:m})}catch(h){f(h)}},p=>{p!=null&&p.message&&s.write(ot(p==null?void 0:p.message)),d.forEach(g=>g==null?void 0:g.dispose()),f(p)})})}var gse={SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:7,SIGEMT:void 0,SIGFPE:8,SIGKILL:9,SIGUSR1:10,SIGSEGV:11,SIGUSR2:12,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGSTKFLT:16,SIGCHLD:17,SIGCLD:void 0,SIGCONT:18,SIGSTOP:19,SIGTSTP:20,SIGTTIN:21,SIGTTOU:22,SIGURG:23,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:29,SIGPOLL:29,SIGPWR:30,SIGINFO:void 0,SIGLOST:void 0,SIGSYS:31,SIGUNUSED:31};function ds(t){return async function(e){let{cmd:n,args:r,output:o}=e,i=`Run: ${n} ${(r||[]).join(" ").replace(/\n.*/g,"")}`,s=o.start(i),a=e.cwd||t,c=e.env?{...process.env,...e.env}:process.env,l=await ni(n,a,c),u=Pp.spawn(l,r,{cwd:a,env:c,windowsHide:!0});return{stdin:u.stdin,stdout:u.stdout,stderr:u.stderr,exit:new Promise((f,m)=>{u.once("error",d=>{o.stop(i,s),m(d)}),u.once("close",(d,p)=>{o.stop(i,s),f({code:d,signal:p})})}),async terminate(){u.kill("SIGKILL")}}}}async function eY(t,e){let n=await e("node-pty");if(!n)throw new Error("Missing node-pty");return async function(r){var g,h;let{cmd:o,args:i,output:s}=r,a=`Run: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,c=s.start(a),l=!1,u=r.cwd||t,f=r.env?{...process.env,...r.env}:process.env,m=await ni(o,u,f),d=n.spawn(m,i||[],{cwd:u,env:f,cols:(g=s.dimensions)==null?void 0:g.columns,rows:(h=s.dimensions)==null?void 0:h.rows,useConpty:l}),p=[s.onDidChangeDimensions&&s.onDidChangeDimensions(v=>d.resize(v.columns,v.rows))];return{onData:d.onData.bind(d),write:d.write.bind(d),resize:d.resize.bind(d),exit:new Promise(v=>{d.onExit(({exitCode:C,signal:w})=>{if(p.forEach(y=>y==null?void 0:y.dispose()),s.stop(a,c),v({code:C,signal:w}),process.platform==="win32")try{d.kill()}catch{}})}),async terminate(){d.kill("SIGKILL")}}}}function rY(t){let e=async function(n){let r=await t(n),o=new js;if(r.stdout){let i=new Wv.StringDecoder;r.stdout.on("data",s=>o.fire(i.write(s).replaceAll(/\r?\n/g,`\r
`))),r.stdout.on("close",()=>{let s=i.end();s&&o.fire(s)})}if(r.stderr){let i=new Wv.StringDecoder;r.stderr.on("data",s=>o.fire(i.write(s).replaceAll(/\r?\n/g,`\r
`))),r.stderr.on("close",()=>{let s=i.end();s&&o.fire(s)})}return{onData:o.event,write:r.stdin.write.bind(r.stdin),resize:()=>{},exit:r.exit.then(({code:i,signal:s})=>({code:typeof i=="number"?i:void 0,signal:typeof s=="string"?gse[s]:void 0})),terminate:r.terminate.bind(r)}};return e.isTTY=!1,e}function Hf(t,e,n,r){return async function(o){let{env:i,cmd:s,args:a,output:c}=o,l=o.cwd||n,u=l?`cd '${l}' && `:"",f=Object.keys(i||{}).map(y=>i[y]===void 0?"":`${y}='${i[y]}' `).join(""),m=(a||[]).map(y=>` '${y.replace(/'/g,`'"'"'`)}'`).join(""),d=`${u}${f}${s}${m}`,p=d!==s?["/bin/sh","-c",d]:[d],g=[...e,...p],h=`Run: ${t} ${g.join(" ").replace(/\n.*/g,"")}`,v=c.start(h),C=await ni(t,process.cwd(),process.env),w=Pp.spawn(C,g,{windowsHide:!0,env:r?{...process.env,...r}:void 0});return{stdin:w.stdin,stdout:w.stdout,stderr:w.stderr,exit:new Promise((y,S)=>{w.once("error",D=>{c.stop(h,v),S(D)}),w.once("close",(D,_)=>{c.stop(h,v),y({code:D,signal:_})})}),async terminate(){w.kill("SIGKILL")}}}}function ux(t){let e=/^'?v?(\d+(\.\d+)*)/.exec(t);if(e)return e[1].split(".").map(n=>parseInt(n,10))}function fx(t,e){for(let n=0,r=Math.max(t.length,e.length);n<r;n++){let o=t[n]||0,i=e[n]||0;if(o!==i)return o<i}return!1}var oY=Al?(t,e,n)=>Pp.spawn(hse,[t,...e||[]],{...n,windowsHide:!0}):Pp.fork;async function jf(t,e){if(!e){try{return require(t)}catch{}return}try{return require(`${e}/node_modules.asar/${t}`)}catch{}try{return require(`${e}/node_modules/${t}`)}catch{}try{return __non_webpack_require__(`${e}/node_modules.asar/${t}`)}catch{}try{return __non_webpack_require__(`${e}/node_modules/${t}`)}catch{}}function iY(t){let{output:e}=t,n=[];return{output:sn({...e,get dimensions(){return e.dimensions},event:o=>n?n.push(o):e.event(o)}),flush:()=>{n&&(n.forEach(o=>e.event(o)),n=void 0)}}}function sY(t,e,n){return sn({...t,get dimensions(){return t.dimensions},event:o=>{o.channel===e&&t.event(o),n.event(o)}})}function Yn(t,e){return e&&typeof e=="object"&&"win32"in e?t==="win32"?e.win32:e.posix:e}async function Ai(t,e){return Yn(t.platform,{posix:async()=>{try{return await t.exec(`test -f '${e}'`),!0}catch{return!1}},win32:async()=>(await t.exec(`Test-Path '${e}' -PathType Leaf`)).stdout.trim()==="True"})()}var qR;async function cx(){return qR===void 0&&(qR=(async()=>{try{return nY.userInfo().username}catch(t){if(process.platform!=="linux")throw t;return(await X({exec:ds(void 0),cmd:"id",args:["-u","-n"],output:Fe})).stdout.toString().trim()}})()),qR}function aY(t){let e=t.replace(/['\\]/g,"\\$&"),n=Wf(t).replaceAll("'","\\'");return` (command -v getent >/dev/null 2>&1 && getent passwd '${e}' || grep -E '^${n}|^[^:]*:[^:]*:${n}:' /etc/passwd || true)`}async function cY(t,e,n,r,o,i){let s="Extracting tarball",a=i.start(s),c=`${r}_${Date.now()}`;try{await nx(t,e,c,i);let l=n instanceof Buffer?n:await(async()=>{let u=[];for await(let f of n)u.push(f);return Buffer.concat(u)})();await X({exec:t,cmd:"tar",args:["--no-same-owner",`-x${o?"z":""}`,"--strip-components","1","-C",c],stdin:l,output:i,print:"continuous"}),await ex(t,e,c,r,i)}catch(l){try{await tx(t,e,c,{recursive:!0,force:!0},i)}catch{}throw l}finally{i.stop(s,a)}}async function Bv(t){return t.path.join(await t.tmpdir(),t.platform==="linux"?`vsch-${await t.getUsername()}`:"vsch")}async function dx(t,e){let{output:n}=t,r=await Wt(e.remoteExec,n);try{for(let i=0;i<3;i++){let s=Date.now();await r.exec("echo ping!"),n.write(`Roundtrip ${i+1} to container took ${Date.now()-s} ms`)}}finally{r.process.terminate()}let o=await Wt(t.cliHost.exec,n);try{for(let i=0;i<3;i++){let s=Date.now();await o.exec("echo ping!"),n.write(`Roundtrip ${i+1} to host took ${Date.now()-s} ms`)}}finally{o.process.terminate()}}function ao(t){return t?{...t,PSModulePath:void 0}:{PSModulePath:void 0}}var ri="\u2404";async function Wt(t,e,n,r="linux",o="Container"){let i=typeof t=="function",s=r==="win32",a=n?{VSCODE_REMOTE_CONTAINERS_SESSION:n}:{},c=i?await t({env:s?ao(a):a,cmd:s?"powershell":"/bin/sh",args:s?["-NoProfile","-Command","-"]:[],output:e}):t;if(!i){let d=s?`powershell -NoProfile -Command "powershell -NoProfile -Command -"
`:`/bin/sh -c 'echo ${ri}; /bin/sh'
`;c.stdin.write(d),await new Promise(g=>{let h="",v=new GR.StringDecoder;c.stdout.on("data",function C(w){h+=v.write(w),h.includes(d)&&(c.stdout.off("data",C),g())})})}let l=wse(c),u;async function f(d,p){let g=u=(async()=>{try{await u}catch{}return m(Yn(r,d),p)})();try{return await Promise.race([g,l.unexpectedExit])}finally{l.disposeStdioListeners(),u===g&&(u=void 0)}}async function m(d,p){let g=`Run in ${o.toLowerCase()}: ${d.replace(/\n.*/g,"")}`,h;if((p==null?void 0:p.logOutput)!=="silent"&&(h=e.start(g,p==null?void 0:p.logLevel)),c.stdin.destroyed){e.write("Stdin closed!");let{code:A,signal:U}=await c.exit;return Promise.reject({message:`Shell server terminated (code: ${A}, signal: ${U})`,code:A,signal:U})}r==="win32"?c.stdin.write(`[Console]::Write('${ri}'); ( ${d} ); [Console]::Write("${ri}$LastExitCode ${ri}"); [Console]::Error.Write('${ri}')
`):c.stdin.write(`echo -n ${ri}; ( ${d} ); echo -n ${ri}$?${ri}; echo -n ${ri} >&2
`);let[v,C]=lY(c.stdout,[1,2],(p==null?void 0:p.logOutput)==="continuous"?(A,U,k)=>{U===1&&k===0&&e.write(A,p==null?void 0:p.logLevel)}:()=>{}),w=lY(c.stderr,[1],(p==null?void 0:p.logOutput)==="continuous"?(A,U,k)=>{U===0&&k===0&&e.write(A,p==null?void 0:p.logLevel)}:()=>{})[0];p!=null&&p.stdin&&(await v,c.stdin.write(p==null?void 0:p.stdin));let[y,S]=await C,[D]=await w,_=parseInt(S,10)||0;return((p==null?void 0:p.logOutput)===void 0||(p==null?void 0:p.logOutput)===!0)&&(e.write(y,p==null?void 0:p.logLevel),e.write(D,p==null?void 0:p.logLevel),_&&e.write(`Exit code ${_}`,p==null?void 0:p.logLevel)),(p==null?void 0:p.logOutput)==="continuous"&&_&&e.write(`Exit code ${_}`,p==null?void 0:p.logLevel),(p==null?void 0:p.logOutput)!=="silent"&&e.stop(g,h,p==null?void 0:p.logLevel),_?Promise.reject({message:`Command in ${o.toLowerCase()} failed: ${d}`,code:_,stdout:y,stderr:D}):{stdout:y,stderr:D}}return{exec:f,process:c,platform:r,path:Yn(r,vse)}}function lY(t,e,n){let r=e.map(()=>{let u;return{promise:new Promise((m,d)=>u={resolve:m,reject:d}),...u}}),o=new GR.StringDecoder("utf8"),i=[],s=0,a=[];function c(u){let f=o.write(u);l(f)}function l(u){let f=u.indexOf(ri);if(f!==-1){let m=u.substr(0,f);i.push(m),n(m,s,a.length),a.push(i.join("")),i.length=0,a.length===e[s]&&(r[s].resolve(a),s++,a=[],s===e.length&&t.off("data",c)),f+1<u.length&&l(u.substr(f+1))}else i.push(u),n(u,s,a.length)}return t.on("data",c),r.map(u=>u.promise)}function wse(t){let e,n=new Promise((c,l)=>e=l),r=[],o=[],i=c=>r.push(c),s=c=>o.push(c);return t.stdout.on("data",i),t.stderr.on("data",s),t.exit.then(({code:c,signal:l})=>{e(`Shell server terminated (code: ${c}, signal: ${l})
${Buffer.concat(r).toString()}
${Buffer.concat(o).toString()}`)},c=>{e(`Shell server failed: ${c&&(c.stack||c.message)}`)}),{unexpectedExit:n,disposeStdioListeners:()=>{t.stdout.off("data",i),t.stderr.off("data",s),r.length=0,o.length=0}}}var DY=Y(require("net")),IY=Y(_Y());async function PY({forwardedPorts:t,output:e,getLogLevel:n},r,o,i){e.write(`Port forwarding for container port ${o} starts listening on local port.`,2);let s=i?{VSCODE_REMOTE_CONTAINERS_SESSION:i}:void 0;return new Promise((a,c)=>{let l=!0,u=new Set,f=DY.createServer({pauseOnConnect:!0},m=>{let d=m.remotePort,p=f.address().port;e.write(`Port forwarding connection from ${d} > ${p} > ${o} in the container.`),n()===1&&(async()=>{let g=await(0,IY.default)("port",d);e.write(`Port forwarding process for ${d} > ${p} > ${o} in the container:
${JSON.stringify(g,void 0,"  ")}`)})().catch(console.error),Hse(e,r,[r.nodeExecutable,"-e",`
				const net = require('net');
				const fs = require('fs');
				process.stdin.pause();
				const client = net.createConnection({ host: '127.0.0.1', port: ${o} }, () => {
					console.error('Connection established');
					client.pipe(process.stdout);
					process.stdin.pipe(client);
				});
				client.on('close', function (hadError) {
					console.error(hadError ? 'Remote close with error' : 'Remote close');
					process.exit(hadError ? 1 : 0);
				});
				client.on('error', function (err) {
					process.stderr.write(err && (err.stack || err.message) || String(err));
				});
				process.stdin.on('close', function (hadError) {
					console.error(hadError ? 'Remote stdin close with error' : 'Remote stdin close');
					process.exit(hadError ? 1 : 0);
				});
				process.on('uncaughtException', function (err) {
					fs.writeSync(process.stderr.fd, \`Uncaught Exception: \${String(err && (err.stack || err.message) || err)}\\n\`);
				});
			`],s).then(g=>{let h;g.exit.then(({code:v,signal:C})=>{h||(u.delete(m),m.end()),e.write(`Port forwarding ${d} > ${p} > ${o} terminated${h?` by extension (${h})`:""} with code ${v} and signal ${C}.`)},v=>{u.delete(m),m.end(),e.write(`Port forwarding ${d} > ${p} > ${o} terminated with error: ${v&&v.message||String(v)}`)}),g.stderr.on("data",v=>{e.write(`Port forwarding ${d} > ${p} > ${o} stderr: ${v.toString("utf8")}`,2)}),m.on("close",v=>{e.write(`Port forwarding ${d} > ${p} > ${o}: Local close${v?" with error":""}`,2),u.delete(m),h="closed",g.stdin.end(),setTimeout(()=>{h="killed",g.terminate().catch(console.error)},5e3)}),g.stdout.pipe(m),m.pipe(g.stdin),u.add(m)}).catch(console.error)});f.on("listening",()=>{var d,p;let m={targetPort:o,server:f,connections:u};f.on("close",()=>{t.delete(m)}),t.add(m),e.write(`Port forwarding local port ${(d=f.address())==null?void 0:d.port} to container port ${o}`),l?(l=!1,a(f)):e.write(`Port forwarding local port ${(p=f.address())==null?void 0:p.port} to container port ${o} failed before listening`)}),f.on("error",m=>{var d;if(m&&(m.code==="EADDRINUSE"||m.code==="EACCES")){f.listen(0,"127.0.0.1");return}l?(l=!1,c(m)):e.write(`Port forwarding local port ${(d=f.address())==null?void 0:d.port} to container port ${o} error: ${(m==null?void 0:m.message)||String(m)}`)}),f.on("close",()=>{var m;l?(l=!1,c(new Error("Closed"))):e.write(`Port forwarding local port ${(m=f.address())==null?void 0:m.port} to container port ${o} closed`)}),f.listen(o,"127.0.0.1")})}async function Hse(t,e,n,r){return e.remoteExec({env:r,cmd:n[0],args:n.slice(1),output:t})}function bY(t,e){return[...t].find(n=>{let r=n.server.address();return(r==null?void 0:r.port)===e})}var Tp=Y(require("path"));var ek=Y(Mr());function vx(t,e){let n,r=t.platform==="win32",o={...t,get env(){return n||(n=RY(r,t.env))}},i=jse.bind(void 0,r,o);return t.containerWorkspaceFolder&&(o.containerWorkspaceFolder=kY(i,t.containerWorkspaceFolder)),gx(i,e)}function TY(t,e,n,r){let o=t==="win32";return gx(Vse.bind(void 0,o,e,RY(o,n)),r)}function gx(t,e){if(typeof e=="string")return kY(t,e);if(Array.isArray(e))return e.map(n=>gx(t,n));if(e&&typeof e=="object"){let n=Object.create(null);return Object.keys(e).forEach(r=>{n[r]=gx(t,e[r])}),n}return e}var Bse=/\$\{(.*?)\}/g;function RY(t,e){if(t){let n=Object.create(null);return Object.keys(e).forEach(r=>{n[r.toLowerCase()]=e[r]}),n}return e}function kY(t,e){return e.replace(Bse,Wse.bind(void 0,t))}function Wse(t,e,n){let r,o=n.split(":");return o.length>1&&(n=o[0],r=o[1]),t(e,n,r)}function jse(t,e,n,r,o){switch(r){case"env":case"localEnv":return NY(t,e.env,o,n,e.configFile);case"localWorkspaceFolder":return e.localWorkspaceFolder!==void 0?e.localWorkspaceFolder:n;case"localWorkspaceFolderBasename":return e.localWorkspaceFolder!==void 0?(t?Tp.win32:Tp.posix).basename(e.localWorkspaceFolder):n;case"containerWorkspaceFolder":return e.containerWorkspaceFolder!==void 0?e.containerWorkspaceFolder:n;case"containerWorkspaceFolderBasename":return e.containerWorkspaceFolder!==void 0?Tp.posix.basename(e.containerWorkspaceFolder):n;default:return n}}function Vse(t,e,n,r,o,i){switch(o){case"containerEnv":return NY(t,n,i,r,e);default:return r}}function NY(t,e,n,r,o){if(n){t&&(n=n.toLowerCase());let i=e[n];return typeof i=="string"?i:""}throw new pe({description:o?ek.t("'{0}' in {1} can not be resolved because no environment variable name is given.",r,Tp.posix.basename(o.path)):ek.t("'{0}' can not be resolved because no environment variable name is given.",r)})}var wx=Y(require("path"));var Yse=["install.sh","install","bootstrap.sh","bootstrap","script/bootstrap","setup.sh","setup","script/setup"];async function LY(t,e,n,r,o){let{repository:i,installCommand:s,targetPath:a}=t.dotfilesConfiguration;if(i=o.getDotfileConfiguration("dotfiles.repository")||i,s=o.getDotfileConfiguration("dotfiles.installCommand")||s,a=o.getDotfileConfiguration("dotfiles.targetPath")||a,!i)return;await r;let c=await n;i.indexOf(":")===-1&&!/^\.{0,2}\//.test(i)&&(i=`https://github.com/${i}.git`);let l=e.shellServer,u=AY(e),f=Object.keys(c).filter(m=>!(m.startsWith("BASH_FUNC_")&&m.endsWith("%%"))).reduce((m,d)=>`${m}${d}=${qse(c[d])} `,"");try{t.output.event({type:"progress",name:"Installing Dotfiles",status:"running"}),s?await l.exec(`# Clone & install dotfiles
${yx(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${f}git clone ${i} ${a} || exit $?
if [ -x ${s} ]
then
	echo Executing script ${s}
	cd ${a} && ${f}${s}
else
	echo Error: ${s} not executable
	exit 126
fi
`,{logOutput:"continuous",logLevel:3}):await l.exec(`# Clone & install dotfiles
${yx(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${f}git clone ${i} ${a} || exit $?
cd ${a}
for f in ${Yse.join(" ")}
do
	if [ -e $f ]
	then
		installCommand=$f
		break
	fi
done
if [ -z "$installCommand" ]
then
	dotfiles=$(ls -d ${a}/.* 2>/dev/null | grep -v -E '/(.|..|.git)$')
	if [ ! -z "$dotfiles" ]
	then
		echo Linking dotfiles: $dotfiles
		ln -sf $dotfiles ~ 2>/dev/null
	else
		echo No dotfiles found.
	fi
else
	if [ -x "$installCommand" ]
	then
		echo Executing script '${a}'/"$installCommand"
		${f}./"$installCommand"
	else
		echo Error: '${a}'/"$installCommand" not executable
		exit 126
	fi
fi
`,{logOutput:"continuous",logLevel:3}),t.output.event({type:"progress",name:"Installing Dotfiles",status:"succeeded"})}catch{t.output.event({type:"progress",name:"Installing Dotfiles",status:"failed"})}}function qse(t){return`'${(t||"").replace(/'+/g,`'"$&"'`)}'`}function AY(t){return wx.posix.join(Mi(t),".dotfilesMarker")}async function FY(t){let e=AY(t),n=wx.posix.resolve(t.homeFolder,".devcontainer",".dotfilesMarker");try{await t.shellServer.exec(`test -f '${e}' && test ! -e '${n}' && mkdir -p '${wx.posix.dirname(n)}' && cp '${e}' '${n}'`)}catch{}}var nk=Y(require("path"));async function OY(t,e){var i;let n=Mi(t),r=nk.posix.join(n,".writeMachineMCPConfigMarker"),o=UY(t);if(await Cx(t.shellServer,r)&&!await Ai(t.shellServer,o)){let s=(i=e.customizations)==null?void 0:i.vscode,a=(Array.isArray(s)?s:s?[s]:[]).map(l=>l.mcp).filter(Boolean),c=Gse(a);Object.keys(c).length&&await t.shellServer.exec(`mkdir -p '${nk.posix.dirname(o)}' && cat >'${o}' <<'mcpJSON'
${JSON.stringify(c,null,"	")}
mcpJSON
`)}}function Gse(t){let e={},n=Object.assign({},...t.map(s=>s.servers));Object.keys(n).length&&(e.servers=n);let r=t.filter(s=>s.inputs).map(s=>s.inputs).flat(),o=new Set,i=[];for(let s=r.length-1;s>=0;s--){let a=r[s];o.has(a.id)||(o.add(a.id),i.push(a))}return i.length&&(e.inputs=i.reverse()),e}var jl=0,MY=/Extension host agent listening on (\d+)/;var zse="updateContentCommand";async function Dx(t){let{params:e,createdAt:n,startedAt:r,sharedDataFolder:o,sharedDataFolderIsLocalCacheFolder:i,remoteWorkspaceFolder:s,containerUser:a,containerGroup:c,containerEnv:l,remoteExec:u,remotePtyExec:f,remoteExecAsRoot:m,rootShellServer:d,remoteWaylandSocket:p}=t,g;if(d&&a==="root"?g=d:g=await Wt(u,e.output,e.sessionId),!l){let I=(await g.exec("echo $PATH")).stdout.trim();l=I?{PATH:I}:{}}a||(a=await Fl(g)),!m&&a==="root"&&(m=u);let h=await $R(g),v=await Uf(g,a);v||e.output.write(J0(`User ${a} not found with 'getent passwd'.`));let C=await Jse(l,v),w=await Kse(g,l,v),y=Ep(Se.posix,w,e.product),{commit:S,quality:D}=e.product,_=!1,A=S&&await Zse(y,S,D||"insider",e.web,_),U=JS(h,D==="stable"),k=S&&o&&await GY(Se.posix,o,U,S,D||"insider",e.web,_),E=A&&Hl("linux",A),x;d?x=Promise.resolve(d):a==="root"&&(x=Promise.resolve(g));let b={createdAt:n,startedAt:r,osRelease:h,build:U,user:a,gid:c||(v==null?void 0:v.gid),env:l,shell:C,homeFolder:w,userDataFolder:y,sharedDataFolderIsLocalCacheFolder:i,sharedDataFolder:o,legacy:_,installFolder:A,sharedInstallFolder:k,remoteWorkspaceFolder:s,nodeExecutable:E,remoteExec:u,remotePtyExec:f,remoteExecAsRoot:m,shellServer:g,remoteWaylandSocket:p};return(x||m)&&(b.launchRootShellServer=()=>x||(x=Wt(m,e.output))),b}async function Fl(t){return(await t.exec("id -un")).stdout.trim()}async function Kse(t,e,n){if(e.HOME){if(e.HOME===(n==null?void 0:n.home)||(n==null?void 0:n.uid)==="0")return e.HOME;try{return await t.exec(`[ ! -e '${e.HOME}' ] || [ -w '${e.HOME}' ]`),e.HOME}catch{}}return(n==null?void 0:n.home)||"/root"}async function Jse(t,e){return t.SHELL||e&&e.shell||"/bin/sh"}async function Uf(t,e){let{stdout:n}=await t.exec(aY(e),{logOutput:!1});if(n.trim())return Xse(n)}function Xse(t){let e=t.replace(/\n$/,"").split(":");return{name:e[0],uid:e[2],gid:e[3],home:e[5],shell:e[6]}}async function Zse(t,e,n,r,o){return Se.posix.join(t,"bin",`${e}${n==="stable"?"":`-${n}`}${r?"-web":""}${o?"-legacy":""}`)}async function GY(t,e,n,r,o,i,s){return t.join(e,"bin",n.id,`${r}${o==="stable"?"":`-${o}`}${i?"-web":""}${s?"-legacy":""}`)}function zY(t){return Se.posix.join(t.userDataFolder,"extensions")}function Mi(t){return Se.posix.join(typeof t=="string"?t:t.userDataFolder,"data/Machine")}function Ix(t){return Se.posix.join(t.userDataFolder,"data/Machine/settings.json")}function UY(t){return Se.posix.join(t.userDataFolder,"data/User/mcp.json")}function Qse(t){return Se.posix.join(t,".vscode-remote")}function Ep(t,e,n){return t.join(e,n.serverDataFolderName)}function MR(t,e,n){return t.join(e,n.dataFolderName)}function Px(t){return Se.posix.join("/var",/^\.*(.*)$/.exec(t)[1])}function Hl(t,e){return Yn(t,{posix:()=>Se.posix.join(e,"node"),win32:()=>Se.win32.join(e,"node.exe")})()}var Yv=class{constructor(e){this.settings=e}getConfiguration(e){return this.settings[us(e)]||this.settings[Nl(e)]}getNewConfiguration(e){return this.settings[us(e)]}getDotfileConfiguration(e){return this.settings[Nl(e)]||this.settings[e]}};async function Vl(t,e,n,r,o=jl,i,s){await eae(t,e);let a=await tae(t,e,r);await OY(e,r);let{serverDownloaded:c,didCheckRequirements:l}=await cae(t,e),u,f,m=Promise.resolve(),d;if(e.nodeExecutable){let y=await KS(t,e,a);u=y.remoteContainersCLI,f=y.remoteEnv,m=y.ready;let S=i;i=S&&(async(..._)=>(await y.ready,S(..._))),d=y.mrpcExec;let D=t.cliHost.reconnect;D&&(t.cliHost.reconnect=async _=>{await D(_),y.reconnect().catch(A=>t.output.write(ot(A&&(A.stack||A.message)||String(A))))})}let g=t.computeExtensionHostEnv||t.postCreate.enabled?Bf(t,e,r,d).then(async y=>({...y,...f,...await HV(e,y),REMOTE_CONTAINERS:"true",...TY(t.cliHost.platform,n.configFilePath,e.env,r.remoteEnv||{})})):Promise.resolve({}),h=a.getConfiguration("gitCredentialHelperConfigLocation")??t.credentialHelperConfigLocation;e.nodeExecutable&&(await Tv(t,e,[".ssh","known_hosts"],"ssh"),h!=="none"&&await Sx(e,u,t.output,"system"));let v,C,w;if(e.installFolder){let S=await _ae(t,e,o,d,async()=>fae(t,e,r,!1),void 0,!0,!1,l),D=S.serverPort;w=S.connectionToken,v=D,t.forwardServerPort&&e.nodeExecutable&&(C=await PY(t,e,D,t.sessionId),v=C.address().port,t.backgroundTasks.push(async()=>bae(t,e,r)))}if(t.postCreate.enabled){let y,S=new Promise(_=>y=()=>{_()}),D=(async()=>{let _={...f,REMOTE_CONTAINERS:"true"},A=["onCreateCommand","updateContentCommand","postCreateCommand","postStartCommand","postAttachCommand"],U=A.reduce((k,E)=>(k[E]=(r[`${E}s`]||[]).length>0,k),{});if(t.prebuild){let k=A.indexOf("updateContentCommand");if((!A.slice(0,k+1).some(b=>U[b])||!i?"prebuild":await i(!1,!1,!0,a,_))!=="prebuild")throw new Error('"prebuild" expected')}else{let k=!0,E=!0,x=r.waitFor||zse,b=A.indexOf(x),I=A.indexOf("postCreateCommand"),T=b<=I&&!A.slice(0,b+1).some(B=>U[B]),R=a.getDotfileConfiguration("dotfiles.repository")||t.dotfilesConfiguration.repository,L=!A.slice(0,I+1).some(B=>U[B])&&!R,N=T?"skipNonBlocking":L||!i?"stopForPersonalization":await i(k,E,!1,a,_);if(N==="skipNonBlocking"){if(y(),t.postCreate.skipNonBlocking)return;k=!1,N=!A.slice(b+1,I+1).some(W=>U[W])&&!R||!i?"stopForPersonalization":await i(k,E,!1,a,_)}if(N==="stopForPersonalization"){i||await LY(t,e,g,m,a),e.nodeExecutable&&((a.getConfiguration("copyGitConfig")??t.isCopyGitConfigEnabled)&&await LS(t,e,g.then(z=>({...e.env,...z}))),await Sx(e,u,t.output,h)),await(s==null?void 0:s()),E=!1;let B=b>I&&!A.slice(I+1,b+1).some(z=>U[z]),W=!A.slice(I+1).some(z=>U[z]);N=B?"skipNonBlocking":W||!i?"done":await i(k,E,!1,a,_)}if(N==="skipNonBlocking"){if(y(),t.postCreate.skipNonBlocking)return;k=!1,N=!A.slice(b+1).some(W=>U[W])||!i?"done":await i(k,E,!1,a,_)}if(N!=="done")throw new Error('"done" expected')}})();D.then(()=>{t.postCreate.done()},_=>{t.postCreate.done(_)}),t.backgroundTasks.push(D),await Promise.race([S,D])}return{hostOrContainerPort:v,hostPortServer:C,connectionToken:w,remoteEnv:t.computeExtensionHostEnv?await g:{},serverDownloaded:c}}async function eae(t,e){let n=Qse(e.homeFolder);!await xx(e.shellServer,e.userDataFolder)&&await xx(e.shellServer,n)&&await dc(t,e,["/bin/sh","-c",`cp -r '${n}' '${e.userDataFolder}'`])}async function tae(t,e,n){var s;let r=Mi(e),o=Se.posix.join(r,".writeMachineSettingsMarker"),i=Ix(e);if(await Cx(e.shellServer,o)&&!await Ai(e.shellServer,i)){let a=(s=n.customizations)==null?void 0:s.vscode,c=(Array.isArray(a)?a:a?[a]:[]).map(d=>d.settings).filter(Boolean),l=await nae(e.shellServer,t.getLogLevel()),u=l.length?`

Some of the command line tools available on the \`PATH\`: ${l.map(d=>`\`${d}\``).join(", ")}`:"",f=e.osRelease.prettyName||"Linux";c.push({"github.copilot.chat.codeGeneration.instructions":[{text:`This workspace is in a dev container running on ${f}.

Use \`"$BROWSER" <url>\` to open a webpage in the host's default browser.${u}`}]});let m=oae(c);if(iae(m,n.portsAttributes),sae(m,n.otherPortsAttributes),Object.keys(m).length)return await e.shellServer.exec(`mkdir -p '${Se.posix.dirname(i)}' && cat >'${i}' <<'settingsJSON'
${JSON.stringify(m,null,"	")}
settingsJSON
`),new Yv(m)}try{let{stdout:a}=await e.shellServer.exec(`cat ${i}`);return new Yv(Me(a)||{})}catch{return new Yv({})}}async function nae(t,e){let n=["apt","dpkg","snap","dnf","yum","rpm","apk","docker","git","gh","kubectl","podman","curl","wget","ssh","scp","rsync","gpg","ps","lsof","netstat","top","tree","find","grep","zip","unzip","tar","gzip","bzip2","xz"],{stdout:r}=await t.exec(`which ${n.join(" ")} || true`,{logOutput:e===1});return r.split(`
`).filter(Boolean).map(i=>Se.posix.basename(i)).filter(i=>n.includes(i))}var rae=["github.copilot.chat.reviewSelection.instructions","github.copilot.chat.codeGeneration.instructions","github.copilot.chat.commitMessageGeneration.instructions","github.copilot.chat.pullRequestDescriptionGeneration.instructions","github.copilot.chat.testGeneration.instructions"];function oae(t){let e=t.reduce((n,r)=>rae.reduce((o,i)=>{let s=r[i];return Array.isArray(s)&&(o[i]=o[i]?o[i].concat(s):s),o},n),{});return Object.assign({},...t,e)}function iae(t,e){if(!t||!e||!Object.keys(e).length)return;let n="remote.portsAttributes";if(!t[n]){t[n]=e;return}for(let r in e)t[n][r]||(t[n][r]=e[r])}function sae(t,e){if(!t||!e)return;let n="remote.otherPortsAttributes";t[n]||(t[n]=e)}async function bx(t,e,n,r){let o=typeof t.gid=="string"?`${t.user}:${t.gid}`:t.user,i=await e();if((await i.exec(`stat -c %u ${n}`)).stdout.trim()==="0"){let c=Se.posix.dirname(n);c!=="/"&&await i.exec(`chown ${o} ${c}`),n!=="/"&&await i.exec(`chown -R ${o} ${n}`)}else if(r&&(await i.exec(`stat -c %u ${r}`)).stdout.trim()==="0"){let u=Se.posix.dirname(r);u!=="/"&&await i.exec(`chown -R ${o} ${u}`)}}async function Sx(t,e,n,r){if(e||Al)if(r==="none")n.write("Git credential helper not enabled.");else{let o=r==="system"?t.launchRootShellServer&&await t.launchRootShellServer():t.shellServer;o?await o.exec(`command -v git >/dev/null 2>&1 && git config --${r} --replace-all credential.helper '!f() { ${t.nodeExecutable} ${e} git-credential-helper $*; }; f' || true`):n.write("Cannot configure system wide Git credential helper without root access.")}}async function Tv(t,e,n,r,o){let{cliHost:i}=t,s=i.path.join(await i.homedir(),...n);if(!await i.isFile(s)&&(i.type==="local"||(i=await Gr(process.cwd(),t.loadNativeModule,t.output),s=i.path.join(await i.homedir(),...n),!await i.isFile(s))))return!1;let a=Se.posix.join(e.homeFolder,...n);return kl(i,e.shellServer,s,a,r,o)}async function kl(t,e,n,r,o,i=""){let s=await aae(t,n);if(s)try{let a=await r,c=Se.posix.dirname(a);return await e.exec(`# Test for ${a} and ${o}
[ -e '${a}' ] ${i}&& echo '${a}' exists && exit 1
command -v ${o} >/dev/null 2>&1 || (echo ${o} not found && exit 1) || exit 1
mkdir -p '${c}'
[ -w '${c}' ] || (echo '${c}' not writable && exit 1) || exit 1`),await e.exec(`# Copy ${n} to ${a}
${Ff(s.byteLength)} >>'${a}'`,{stdin:s}),!0}catch(a){if(a&&a.code!==1)throw a}return!1}async function aae(t,e){try{return await t.readFile(e)}catch(n){if(n&&(n.code==="ENOENT"||n.code==="EISDIR"))return;throw n}}async function cae(t,e){let n=await $Y(t,e,e.legacy);if(n!=="retryWithLegacyServer")return n;let r=await $Y(t,e,!0);return e.legacy=!0,e.installFolder=r.installFolder,e.sharedInstallFolder=r.sharedInstallFolder,e.nodeExecutable=r.installFolder&&Hl("linux",r.installFolder),r}async function $Y(t,e,n){let r=await lae(t,e,n),o=!1;if(r.installFolder){let i=Se.posix.join(r.installFolder,"bin","helpers","check-requirements.sh");if(o=await xae(e.shellServer,i),o)try{await e.shellServer.exec(`'${i}'`)}catch(s){if((s==null?void 0:s.code)===100){if(!n)return"retryWithLegacyServer"}else throw(s==null?void 0:s.code)===99?new pe({description:Bl.t("The container does not meet all the requirements of the VS Code Server."),detail:s==null?void 0:s.stdout.toString().trim(),step:"checkRequirements",data:{reload:!1,learnMoreUrl:"https://aka.ms/vscode-remote/faq/old-linux"},originalError:s}):s}}return{...r,didCheckRequirements:o}}async function lae(t,e,n){let{commit:r}=t.product,{shellServer:o,launchRootShellServer:i,build:s}=e;if(!(r&&e.installFolder))return{serverDownloaded:void 0,installFolder:void 0,sharedInstallFolder:void 0};let a=n?`${e.installFolder}-legacy`:e.installFolder,c=n&&e.sharedInstallFolder?`${e.sharedInstallFolder}-legacy`:e.sharedInstallFolder;uae(e.osRelease,s),s.preview&&t.output.write(`\r
\x1B[1mSupport for ${s.label} is in preview.\x1B[22m\r
\r
`);let l=await xx(o,a),u;if(l||s===ZY[s.arch]&&(i?u=(await i()).exec("apk info | grep -e '^libstdc++$' || (apk update && apk add libstdc++)"):u=o.exec(`apk info | grep -e '^libstdc++$' || (echo "ERROR: libstdc++ not found. Please install." >&2 && exit 1)`)),c&&await xx(o,c))return l||await o.exec(`mkdir -p '${Se.posix.dirname(a)}' && ln -snf '${c}' '${a}'`),i&&(async()=>{await(await i()).exec(`touch '${c}'`)})().catch(console.error),await u,{serverDownloaded:!1,installFolder:a,sharedInstallFolder:c};if(l)return{serverDownloaded:!1,installFolder:a,sharedInstallFolder:c};t.progress(4),t.output.write(`Installing VS Code Server for commit ${r}\r
`);let f=!!(c&&i),m=f?c:a,d=f?await i():o,p={localCacheFolder:t.localCacheFolder,build:s,commit:r,quality:t.product.quality||"insider",web:t.web,output:t.output,alternateDownload:t.alternateDownload,legacy:n},g=_p(p),h=await Cr(g);h||await Fv(p);try{if(e.sharedDataFolderIsLocalCacheFolder)await BY(p);else{let v=Av(t,d,g,m);t.cliHost.type!=="local"&&await Promise.race([v,Bt(2e4).then(()=>!0)])&&dx(t,e).catch(C=>t.output.write(`Error testing connection: ${(C==null?void 0:C.stack)||(C==null?void 0:C.message)||C}`)),await v}}catch(v){if(v&&v.stderr&&/unexpected end of file|not in gzip format/i.test(v.stderr.toString()))await Fv(p),e.sharedDataFolderIsLocalCacheFolder?await BY(p):await Av(t,d,g,m);else throw v}return f&&(await o.exec(`mkdir -p '${Se.posix.dirname(a)}' && ln -snf '${c}' '${a}'`),(async()=>{await d.exec(`touch '${c}' && cd '${Se.posix.dirname(c)}' && ls -td *[^_]????????????? | tail -n +10 | xargs rm -rf`)})().catch(console.error)),await u,{serverDownloaded:!h,installFolder:a,sharedInstallFolder:c}}function uae(t,e){let n=t.version;if(e.minVersion&&n){let r=ux(n.trim());if(r&&fx(r,e.minVersion)){let o=Bl.t("{0} {1} or later required.",e.label,e.minVersion.join("."));throw new pe({description:o,data:{reload:!1}})}}}async function Fv(t){let{build:e,commit:n,quality:r,web:o,legacy:i,output:s}=t,a="Downloading VS Code Server",c=s.start(a);s.write(`${n} ${e.id} ${r}${o?" web":""}${i?" legacy":""}`);let l=_p(t);await os(Se.dirname(l));let u=`https://update.code.visualstudio.com/commit:${n}/server-${i?e.id.replace("linux-","linux-legacy-"):e.id}${o?"-web":""}/${r}`;s.write(`URL: ${u}`),s.write(`Path: ${l}`);let f,m;try{m=`${l}_${Date.now()}`,await new Promise((d,p)=>{let g=_x.createWriteStream(m);s.write("Starting download.",1),jY.https.get(u,{trackRedirects:!0},v=>{var y;if(v.statusCode<200||v.statusCode>299){s.write(`Download failed: ${v.statusCode} ${v.statusMessage}.`,1),p(new pe({description:Bl.t("Downloading the VS Code Server failed. Please try again later."),originalError:`Failed to download VS Code Server (${u}): HTTP ${v.statusCode} - ${v.statusMessage}`}));return}let w=(y=[...v.redirects,v].find(S=>S.headers["x-sha256"]))==null?void 0:y.headers["x-sha256"];f=Array.isArray(w)?w[0]:w,s.write("Downloading data.",1),v.on("error",p),v.pipe(g),v.on("end",d)}).on("error",p)}),f&&await HY(u,m,f,s)}catch(d){if(s.write("Downloading failed.",1),s.write((d==null?void 0:d.stack)||(d==null?void 0:d.message)||String(d),1),t.alternateDownload)s.write(d&&(d.originalError||d.message)),s.write("Retrying to download VS Code Server."),m=`${l}_${Date.now()}`,await t.alternateDownload(u,m),f&&await HY(u,m,f,s);else throw d||new pe({description:Bl.t("Downloading the VS Code Server failed. Please try again later.")})}finally{s.stop(a,c)}await sl(m,l)}async function HY(t,e,n,r){let o=Rp.createHash("sha256"),i=await at(e);o.update(i);let s=o.digest("hex");if(s!==n)throw r.write(`Failed to download VS Code Server (${t}): SHA mismatch, actual ${s} != expected ${n} (${e}, ${i.byteLength} bytes)`),new pe({description:Bl.t("Downloading the VS Code Server failed. Please try again later.")})}async function Av(t,e,n,r,o,i=!0){let s="Installing VS Code Server",a=t.output.start(s),c=`${r}_${Date.now()}`;try{if(await e.exec(`mkdir -p ${c}`),o)typeof n=="string"&&n.endsWith(".zip")?await e.exec(`unzip ${n} -d ${c}`):await e.exec(`cat ${n} | tar --no-same-owner -x${i?"z":""} -C ${c}`);else{let l=typeof n=="string"?await at(n):n;await e.exec(`${Ff(l.byteLength,!0)} | tar --no-same-owner -x${i?"z":""} -C ${c}`,{stdin:l,logOutput:"continuous"})}await e.exec(`mv -n ${Se.posix.join(c,"*",".")} ${r} && rmdir ${c}`)}catch(l){try{await e.exec(`rm -rf ${c}`)}catch{}throw l}finally{t.output.stop(s,a)}}async function BY(t){let{localCacheFolder:e,build:n,commit:r,quality:o,web:i,legacy:s,output:a}=t,c="Unpacking VS Code Server",l=a.start(c);a.write(`${r} ${n.id} ${o} ${i?"web":""} ${s?"legacy":""}`);let u=await GY(Se,e,n,r,o,i,s),f=`${u}_${Date.now()}`;try{await os(f);let m=_p(t);await(await ds(void 0)({cmd:"tar",args:["--no-same-owner","-xzf",m,"--strip-components","1","-C",f],cwd:process.cwd(),output:a})).exit,await cl(u,{recursive:!0,force:!0}),await sl(f,u)}catch(m){try{await cl(f,{recursive:!0,force:!0})}catch{}throw m}finally{a.stop(c,l)}}function _p(t){let{localCacheFolder:e,build:n,commit:r,quality:o,web:i,legacy:s}=t,a=Se.join(e,"serverCache",r),c=`vscode-server-${n.id}${o==="stable"?"":`-${o}`}${i?"-web":""}${s?"-legacy":""}${n.archiveExt||".tar.gz"}`;return Se.join(a,c)}async function KY(t,e){let n=await QY(e),r={},{stdout:o}=await dc(t,e,[Se.posix.join(e.installFolder,...AS(n)),...eq(e.userDataFolder),...tq(t.getTelemetryLevel()),"--list-extensions"],e.installFolder,{remoteEnv:r});return o.toString().split(`
`).filter(i=>!!i)}async function fae(t,e,n,r){let o="Preparing Extensions",i=t.output.start(o),{sharedDataFolder:s}=e,a=s?wae(s):void 0,c=JY(e),l=Mi(e),u=Se.posix.join(l,".installExtensionsMarker"),f=!await Cx(e.shellServer,u),m=mae(t,f,n);if(e.sharedDataFolderIsLocalCacheFolder)e.launchRootShellServer&&await(await e.launchRootShellServer()).exec(`mkdir -p '${a}' && chown -R ${e.user} ${a}`),await e.shellServer.exec(`mkdir -p '${a}' && ln -s -T '${a}' '${c}' || true`);else{let p=vae(t.localCacheFolder),g=await pae(t,e,p,a,c,[...m.builtinExtensions,...m.extensions]);hae(t,e,p,a,c,g).catch(console.error)}m.extensions=m.extensions.filter(p=>!m.builtinExtensions.includes(p)),t.product.version&&VY.lte("1.77.0",t.product.version.split("-")[0])&&(t.output.write(`Optimizing extensions for quality: ${t.product.quality}`),m.builtinExtensions=await dae(t,e,c,m.builtinExtensions));let d=[].concat(...m.builtinExtensions.map(p=>["--install-builtin-extension",p]),...m.extensions.map(p=>["--install-extension",p]));return r&&d.length&&d.push("--do-not-sync"),t.output.stop(o,i),{...m,args:d}}async function dae(t,e,n,r){if(r.length===0)return r;let{shellServer:o}=e,i=(await o.exec(`test -d ${n} && ls ${n} || true`)).stdout.trim().split(`
`).filter(a=>!!a&&a.endsWith("vsix"));t.output.write(`Available vsix: ${i.join(", ")||"None"}`);let s=r.map(a=>{let c=i.find(l=>l.startsWith(a.toLocaleLowerCase()));return c?`${n}/${c}`:a});return t.output.write(`Optimized extensions to install: ${s.join(", ")||"None"}`),s}function mae(t,e,n){var a,c;let r=e?[]:t.installBuiltinExtensions||[],o=t.getAdditionalExtensionsToInstall(e),i=[...e?[]:(((a=n.customizations)==null?void 0:a.vscode)||[]).map(l=>l.extensions||[]),o],s=[];for(let l of i.flat()){let u=(c=/^(?<removal>-)?(?<idAndVersion>(?<id>[^@ ]*)[^ ]*)$/.exec(l))==null?void 0:c.groups;if(u){let f=s.findIndex(m=>m.id===u.id);f!==-1&&s.splice(f,1),u.removal||s.push(u)}}return{builtinExtensions:r,extensions:s.map(l=>l.idAndVersion)}}async function pae(t,e,n,r,o,i){t.output.write(`Extensions cache, install extensions: ${i.join(", ")||"None"}`);let{shellServer:s}=e,a=(await s.exec(`test -d ${o} && ls ${o} || true`)).stdout.trim().split(`
`).filter(c=>!!c);if(r){let c=(await s.exec(`test -d ${r} && ls ${r} || true`)).stdout.trim().split(`
`).filter(u=>!!u),l=c.filter(u=>i.some(f=>u.toLowerCase().startsWith(f.toLowerCase()))&&a.indexOf(u)===-1);if(t.output.write(`Extensions cache, link in container: ${l.join(", ")||"None"}`),l.length){await s.exec(`mkdir -p '${o}' && ln -s '${r}'/* '${o}' || true`);let{launchRootShellServer:u}=e;u&&(async()=>{await(await u()).exec(`cd ${r} && touch ${l.map(m=>`'${m}'`).join(" ")}`)})().catch(console.error)}return{remoteExtensions:[...new Set([...a,...c])],cachedExtensions:c}}else{await os(n);let c=await al(n),l=c.filter(u=>i.some(f=>u.toLowerCase().startsWith(f.toLowerCase()))&&a.indexOf(u)===-1);if(t.output.write(`Extensions cache, copy to remote: ${l.join(", ")||"None"}`),l.length){let u=Se.basename(n),f=Wl.c({cwd:Se.dirname(n)},l.map(p=>Se.join(u,p))),m=Se.posix.join(o,`tmp-${Date.now()}`),d=await new Promise(p=>{let g=[];f.on("data",h=>g.push(h)),f.on("end",()=>p(Buffer.concat(g)))});await s.exec(`# Copy extensions to remote
mkdir -p ${m}
${Ff(d.byteLength)} | tar --no-same-owner -x --strip-components 1 -C ${m}
mv ${m}/* ${o} && rmdir ${m}`,{stdin:d})}return{remoteExtensions:a.concat(l),cachedExtensions:c}}}async function hae(t,e,n,r,o,i){if(r&&!e.launchRootShellServer)return;let s=1e4,a=6e4;for(await Bt(s);;)i=await gae(t,e,n,r,o,i),await Bt(a)}async function gae(t,e,n,r,o,{remoteExtensions:i,cachedExtensions:s}){let{shellServer:a,launchRootShellServer:c,remoteExec:l}=e,u=(await a.exec(`ls ${o} || true`,{logOutput:"silent"})).stdout.trim().split(`
`).filter(m=>!!m);if(!r){let m=i.filter(d=>u.indexOf(d)===-1);t.output.write(`Extensions cache, remote removals: ${m.join(", ")||"None"}`);for(let d of m)try{await s1(Se.join(n,d))}catch(p){if(!(p&&p.code==="ENOENT"))throw p}}let f=u.filter(m=>i.indexOf(m)===-1&&s.indexOf(m)===-1);if(t.output.write(`Extensions cache, copy to ${r?"shared cache":"local"}: ${f.join(", ")||"None"}`,1),f.length)if(r){let m=await c();await m.exec(`mkdir -p '${r}' && cd '${o}' && cp ${f.map(d=>`'${d}'`).join(" ")} '${r}'`),await m.exec(`cd '${r}' && ls -t | tail -n +500 | xargs rm -f`)}else{let m=Se.posix.basename(o),d=await l({cmd:"tar",cwd:Se.posix.dirname(o),args:["c",...f.map(v=>Se.posix.join(m,v))],output:t.output}),p=Se.join(Se.dirname(n),`${Se.basename(n)}-${Date.now()}`);await os(p);let g=Wl.x({cwd:p,strip:1}),h=new Promise((v,C)=>{g.on("error",C),g.on("finish",v)});d.stdout.pipe(g),await h;for(let v of await al(p))await sl(Se.join(p,v),Se.join(n,v));await a1(p)}return{remoteExtensions:u,cachedExtensions:s}}var ok="extensionsCache";function vae(t){return Se.join(t,ok)}function wae(t){return Se.posix.join(t,ok)}function JY(t){return Se.posix.join(t.userDataFolder,ok)}var XY={x64:{label:"x86-64",id:"linux-x64",arch:"x64",stable:!0,preview:!1},armhf:{label:"ARM",id:"linux-armhf",arch:"armhf",stable:!0,preview:!0},arm64:{label:"ARM64",id:"linux-arm64",arch:"arm64",stable:!0,preview:!0}},ZY={x64:{label:"Alpine Linux",id:"linux-alpine",arch:"x64",stable:!0,preview:!0,minVersion:[3,9]},arm64:{label:"Alpine Linux ARM64",id:"alpine-arm64",arch:"arm64",stable:!0,preview:!0,minVersion:[3,9]}},GS={x64:{label:"Mac",id:"darwin",arch:"x64",stable:!0,preview:!0,archiveExt:".zip"},arm64:{label:"Mac ARM",id:"darwin-arm64",arch:"arm64",stable:!0,preview:!0,archiveExt:".zip"}},yae={x64:{label:"Windows",id:"win32-x64",arch:"x64",stable:!0,preview:!0,archiveExt:".zip"},arm64:{label:"Windows ARM",id:"win32-arm64",arch:"arm64",stable:!0,preview:!0,archiveExt:".zip"}},Cae={linux:XY,alpine:ZY,darwin:GS,win32:yae},Eae={x86_64:"x64",armv7l:"armhf",arm64:"arm64",aarch64:"arm64"};function JS(t,e){var o;let n=Eae[t.hardware],r=n&&(((o=Cae[t.id])==null?void 0:o[n])||XY[n]);if(!r||e&&!r.stable)throw new pe({description:t.id==="alpine"?Bl.t("Alpine Linux is not supported on the hardware architecture '{0}' of the container.",t.hardware):Bl.t("The hardware architecture '{0}' of the container is not supported.",t.hardware),data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return r}async function $R(t){let e="unknown",n="unknown",r="unknown",o;try{e=(await t.exec("uname -m")).stdout.trim();let{stdout:i}=await t.exec("(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null");n=(i.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",r=(i.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",o=(i.match(/^PRETTY_NAME=([^\u001b\r\n]*)/m)||[])[1]||void 0}catch(i){console.error(i)}return{hardware:e,id:n,version:r,prettyName:o}}async function Sae(t,e,n,r){let o=await Yn(n,{async win32(){var c;return{amd64:"x86_64",arm64:"arm64"}[((c=e.PROCESSOR_ARCHITECTURE)==null?void 0:c.toLowerCase())||""]||"unknown"},async posix(){return(await X({exec:t,cmd:"uname",args:["-m"],output:r})).stdout.toString().trim()}})(),i=n,s="unknown",a;if(n==="linux")try{let c=(await X({exec:t,cmd:"/bin/sh",args:["(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null"],output:r})).stdout.toString();i=(c.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",s=(c.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",a=(c.match(/^PRETTY_NAME=([^\u001b\r\n]*)/m)||[])[1]||void 0}catch(c){console.error(c)}return{hardware:o,id:i,version:s,prettyName:a}}async function Cx(t,e){try{return await t.exec(yx(e)),!0}catch{return!1}}function yx(t){return`test ! -f '${t}' && set -o noclobber && mkdir -p '${Se.posix.dirname(t)}' && { > '${t}' ; } 2> /dev/null`}async function xx(t,e){try{return await t.exec(`test -d '${e}'`),!0}catch{return!1}}async function xae(t,e){try{return await t.exec(`test -x '${e}'`),!0}catch{return!1}}async function _ae(t,e,n,r,o,i,s,a,c){let{installFolder:l,sharedInstallFolder:u,shellServer:f}=e,{processes:m,mntNS:d}=await mR(f),p=await QY(e),g=`(${Se.posix.join(...AS(p))})`.replace(".","\\."),h=new RegExp(`${Se.posix.join(Se.posix.dirname(l).replace(".","\\."),"[^/]*",g)}`),v=m.filter(z=>z.mntNS===d&&h.test(z.cmd));t.output.write(`Running extension host agents:
${JSON.stringify(v,void 0,"  ")}`,1);let C=v.length?(await f.exec(`readlink -f '${l}'`)).stdout.toString().trim():void 0,{current:w,others:y}=v.reduce((z,V)=>(z[(V.cwd===C||V.cwd===l||V.cwd===u)&&h.test(V.cmd)?"current":"others"].push(V),z),{current:[],others:[]});if(s&&y.length){t.output.write(`Terminating old extension host agent.\r
`);try{await f.exec(`kill -9 ${y.map(z=>z.pgrp?`-${z.pgrp}`:z.pid).join(" ")}`)}catch{}}let{commit:S,quality:D}=t.product,_=Se.posix.join(Mi(e),`.connection-token-${S}${D==="stable"?"":`-${D}`}${t.web?"-web":""}${e.legacy?"-legacy":""}`),A=Se.posix.join(Mi(e),`.devport-${S}${D==="stable"?"":`-${D}`}${t.web?"-web":""}${e.legacy?"-legacy":""}`);if(w.length){t.output.write(`Extension host agent is already running.\r
`);try{let{stdout:z}=await f.exec(`cat '${A}' 2>/dev/null`),V=z.toString().trim(),q=parseInt(V,10),ce=new RegExp(" '?--connection-token-file'? ").test(w[0].cmd)?(await f.exec(`cat '${_}'`)).stdout.toString().trim():void 0;return{serverPort:q,connectionToken:ce}}catch(z){console.error(z),t.output.write(`Agent port not found. Terminating old extension host agent.\r
`);try{await f.exec(`kill -9 ${w.map(V=>V.pgrp?`-${V.pgrp}`:V.pid).join(" ")}`)}catch{}}}let U="isLocalContainer"in t&&t.isLocalContainer,k=`${_}-${Rp.randomUUID()}`,{stdout:E}=await f.exec(`cat '${_}' 2>/dev/null || (umask 377 && echo '${Rp.randomUUID()}' >'${k}' && mv -n '${k}' '${_}' && rm -f '${k}' && cat '${_}')`),x=E.toString().trim();t.progress(5);let b="Starting VS Code Server",I=t.output.start(b),T=[Se.posix.join(l,...AS(p)),"--log",ro(t.getLogLevel()),"--force-disable-user-env",...eq(e.userDataFolder),...Dae(U),...tq(t.getTelemetryLevel()),"--accept-server-license-terms","--host","127.0.0.1","--port",String(n),"--connection-token-file",_,"--extensions-download-dir",JY(e),...(await o()).args,"--start-server",...U?["--disable-websocket-compression"]:[""],...a?["--enable-remote-auto-shutdown"]:[],...c?["--skip-requirements-check"]:[]],R={SHELL:e.shell,...await i};delete R.NODE_OPTIONS;let N=(await dc(t,{remoteExec:e.remoteExec},T,l,{remoteEnv:R,resolveOn:MY,print:"continuous"})).cmdOutput;t.output.stop(b,I);let B=(MY.exec(N)||[])[1];if(!B)throw new Error("Port not found");return await f.exec(`echo ${B} >'${A}'`),{serverPort:parseInt(B,10),connectionToken:x}}async function QY({shellServer:t,installFolder:e}){return JSON.parse((await t.exec(`cat '${Se.posix.join(e,"product.json")}'`,{logOutput:!1})).stdout.toString().trim())}function eq(t){return["--server-data-dir",t]}function Dae(t){return t?["--use-host-proxy"]:[]}function tq(t){return t?["--telemetry-level",t]:[]}var Iae=/^([a-z0-9\-]+):(\d{1,5})$/;function Pae(t){let e=t.match(Iae);if(!(!e||e.length!==3))return{host:e[1],port:Number(e[2])}}async function bae(t,e,n){let r=(n.forwardPorts||[]).map(i=>typeof i=="number"?`localhost:${i}`:i).map(Pae).filter(Boolean),o=await t.getTunnels();await Promise.all(r.filter(i=>!o.find(s=>s.remoteAddress.host===i.host&&s.remoteAddress.port===i.port)).map(async({host:i,port:s})=>t.openTunnel(e,s,i)))}async function dc(t,{remoteExec:e},n,r,o={}){let i=o.print||(o.silent?"off":"end"),s=await e({env:o.remoteEnv,cwd:r,cmd:n[0],args:n.slice(1),output:o.silent?Fe:t.output}),a=[],c=[],l=new rk.StringDecoder,u=new rk.StringDecoder,f="",m="",d,p,g=new Promise((y,S)=>{d=y,p=S});s.stdout.on("data",y=>{a.push(y);let S=l.write(y);i==="continuous"&&t.output.write(S.replace(/\r?\n/g,`\r
`)),f+=S,o.resolveOn&&o.resolveOn.exec(f)&&d()}),s.stderr.on("data",y=>{c.push(y);let S=u.write(y);i==="continuous"&&t.output.write(S.replace(/\r?\n/g,`\r
`)),m+=S}),o.stdin instanceof Buffer?(s.stdin.write(o.stdin,y=>{y&&p(y)}),s.stdin.end()):o.stdin instanceof _x.ReadStream&&o.stdin.pipe(s.stdin),i!=="off"&&s.exit.catch(y=>{y!=null&&y.message&&t.output.write(ot(y==null?void 0:y.message))});let h=await Promise.race([s.exit,g]),v=Buffer.concat(a),C=Buffer.concat(c);i==="end"&&(t.output.write(f.replace(/\r?\n/g,`\r
`)),t.output.write(ot(m)));let w=`${f}
${m}`;return h&&(h.code||h.signal)?Promise.reject({message:`Command failed: ${n.join(" ")}`,cmdOutput:w,stdout:v,stderr:C,code:h.code,signal:h.signal}):{cmdOutput:w,stdout:v,stderr:C}}function Ff(t,e=!1){let r=t%8192;return`(dd iflag=fullblock bs=8192 count=${(t-r)/8192}${e?"":" 2>/dev/null"}; dd iflag=fullblock bs=${r} count=1${e?"":" 2>/dev/null"})`}async function Bf(t,e,n,r){let o=kae(n,t);if(!o||o==="none")return{};let i=await Tae(o,t,e.shellServer);return i||(t.output.write("userEnvProbe: not found in cache"),i=await WY(o,t,e,r,"cat /proc/self/environ","\0"),i||(t.output.write("userEnvProbe: falling back to printenv"),i=await WY(o,t,e,r,"printenv",`
`)),i&&await Rae(i,o,t,e.shellServer),i||{})}async function Tae(t,e,n){if(!n||!e.containerSessionDataFolder)return;let r=nq(t,e.containerSessionDataFolder);try{if(await Ai(n,r)){let{stdout:o}=await n.exec(`cat '${r}'`);return JSON.parse(o)}}catch(o){e.output.write(`Failed to read/parse user env cache: ${o}`,5)}}async function Rae(t,e,n,r){if(!r||!n.containerSessionDataFolder)return;let o=nq(e,n.containerSessionDataFolder);try{await r.exec(`mkdir -p '${Se.posix.dirname(o)}' && cat > '${o}' << 'envJSON'
${JSON.stringify(t,null,"	")}
envJSON
`)}catch(i){n.output.write(`Failed to cache user env: ${i}`,5)}}function nq(t,e){return Se.posix.join(e,`env-${t}.json`)}async function WY(t,e,n,r,o,i){var s;if(t==="none")return{};try{let a=Rp.randomUUID(),c=new RegExp(a+"([^]*)"+a),l=n.shell;e.output.write(`userEnvProbe shell: ${l}`);let u=Se.posix.basename(l),f=`echo -n ${a}; ${o}; echo -n ${a}`,m;/^pwsh(-preview)?$/.test(u)?m=t==="loginInteractiveShell"||t==="loginShell"?["-Login","-Command"]:["-Command"]:m=[t==="loginInteractiveShell"?"-lic":t==="loginShell"?"-lc":t==="interactiveShell"?"-ic":"-c"];let d=sn(e.output,1),p=dc({output:d},{remoteExec:await r||n.remoteExec},[l,...m,f],n.installFolder);Promise.race([p,Bt(2e3)]).then(async _=>{if(!_){let A,U=n.shellServer||await Wt(n.remoteExec,e.output);try{({processes:A}=await mR(U))}finally{n.shellServer||await U.process.terminate()}let k=A.find(E=>E.cmd.startsWith(l)&&E.cmd.indexOf(a)!==-1);if(k){let x=Ej(A)[k.pid];e.output.write(`userEnvProbe is taking longer than 2 seconds. Process tree:
${pR(x)}`)}else e.output.write("userEnvProbe is taking longer than 2 seconds. Process not found.")}},()=>{}).catch(_=>e.output.write(ot(_&&(_.stack||_.message)||"Error reading process tree.")));let g=await Promise.race([p,Bt(1e4)]);if(!g)return e.output.write(ot("userEnvProbe is taking longer than 10 seconds. Avoid waiting for user input in your shell's startup scripts. Continuing.")),{};let h=g.stdout.toString(),v=c.exec(h),C=v?v[1]:"";if(!C||C.trim()==="-n")return;let w=C.split(i).reduce((_,A)=>{let U=A.indexOf("=");return U!==-1&&(_[A.substring(0,U)]=A.substring(U+1)),_},{});e.output.write(`userEnvProbe parsed: ${JSON.stringify(w,void 0,"  ")}`,1),delete w.PWD;let y=w.PATH,S=(s=n.env)==null?void 0:s.PATH,D=!(e.allowSystemConfigChange&&n.launchRootShellServer)&&y&&S;if(D){let _=n.user;w.PATH=Nae(y,S,_==="root"||_==="0")}return e.output.write(`userEnvProbe PATHs:
Probe:     ${typeof y=="string"?`'${y}'`:"None"}
Container: ${typeof S=="string"?`'${S}'`:"None"}${D?`
Merged:    ${typeof w.PATH=="string"?`'${w.PATH}'`:"None"}`:""}`),w}catch(a){return e.output.write(ot("Error reading shell environment.")),e.output.write(ot((a==null?void 0:a.stack)||(a==null?void 0:a.message)||String(a))),{}}}function kae(t,e){let n=t==null?void 0:t.userEnvProbe;return e.output.write(`userEnvProbe: ${n||e.defaultUserEnvProbe}${n?"":" (default)"}`),n||(n=e.defaultUserEnvProbe),n}function Nae(t,e,n){let r=t.split(":"),o=0;for(let i of e.split(":")){let s=r.indexOf(i);s===-1?(n||!/\/sbin(\/|$)/.test(i))&&r.splice(o++,0,i):o=s+1}return r.join(":")}async function ik(t){for(let e of t)await(typeof e=="function"?e():e)}async function rq(t){let{localCacheFolder:e,output:n,alternateDownload:r,exec:o,env:i,isFile:s,userDataFolder:a,homeFolder:c,product:l,platform:u}=t,f=l.commit||await vp(l.quality),m=l.commit?l.quality||"insider":"stable",d=u==="win32"?Se.win32:Se.posix,p=`${m.substring(0,1).toUpperCase()}${m.substring(1)}${m==="insider"?"s":""}-${f}`,g=d.join(Ep(d,c,l),"cli","servers",p,"server");if(await Ex(u,g,s))return Hl(u,g);let h=d.join(MR(d,c,l),"cli","servers",p,"server");if(await Ex(u,h,s))return Hl(u,h);let v=d.join(Ep(d,c,l),"bin",f);if(await Ex(u,v,s))return Hl(u,v);let C=d.join(a,"bin",f);if(await Ex(u,C,s))return Hl(u,C);let w=await Sae(o,i,u,n),y=JS(w,!1),S={localCacheFolder:e,build:y,commit:f,quality:m,web:!1,output:n,alternateDownload:r,legacy:!1},D=_p(S);await Cr(D)||await Fv(S);let _=D.endsWith(".zip")?await Aae(D):await Lae(D);return await cY(o,u,_,C,!1,n),Hl(u,C)}async function Ex(t,e,n){let r=Hl(t,e),i=(t==="win32"?Se.win32:Se.posix).join(e,"node_modules","node-pty","package.json");return await n(r)&&await n(i)}async function Lae(t){let e=[];return await Wl.t({file:t,filter:n=>/^[^/]*\/(LICENSE$|node$|node_modules\/node-pty\/)/.test(n),onentry:n=>{new Wl.WriteEntry.Tar(n).on("data",o=>e.push(o))}}),Buffer.concat(e)}async function Aae(t){let n=new YY.default(t).getEntries().filter(o=>/^[^/]*\/(LICENSE$|node(\.exe)?$|node_modules\/node-pty\/.*[^/]$)/.test(o.entryName)),r=qY.pack();for(let o of n){let i=await new Promise((s,a)=>{o.getDataAsync((c,l)=>{l?a(l):s(c)})});r.entry({name:o.entryName,mode:o.attr>>>16&4095},i)}return r.finalize(),r}var Zq=Y(require("crypto")),ow=Y(require("path"));function yq(t){return typeof t>"u"||t===null}function Fae(t){return typeof t=="object"&&t!==null}function Oae(t){return Array.isArray(t)?t:yq(t)?[]:[t]}function Uae(t,e){var n,r,o,i;if(e)for(i=Object.keys(e),n=0,r=i.length;n<r;n+=1)o=i[n],t[o]=e[o];return t}function Mae(t,e){var n="",r;for(r=0;r<e;r+=1)n+=t;return n}function $ae(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var Hae=yq,Bae=Fae,Wae=Oae,jae=Mae,Vae=$ae,Yae=Uae,qn={isNothing:Hae,isObject:Bae,toArray:Wae,repeat:jae,isNegativeZero:Vae,extend:Yae};function Cq(t,e){var n="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),r+" "+n):r}function Gv(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Cq(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Gv.prototype=Object.create(Error.prototype);Gv.prototype.constructor=Gv;Gv.prototype.toString=function(e){return this.name+": "+Cq(this,e)};var Ao=Gv;function sk(t,e,n,r,o){var i="",s="",a=Math.floor(o/2)-1;return r-e>a&&(i=" ... ",e=r-a+i.length),n-r>a&&(s=" ...",n=r+a-s.length),{str:i+t.slice(e,n).replace(/\t/g,"\u2192")+s,pos:r-e+i.length}}function ak(t,e){return qn.repeat(" ",e-t.length)+t}function qae(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],o=[],i,s=-1;i=n.exec(t.buffer);)o.push(i.index),r.push(i.index+i[0].length),t.position<=i.index&&s<0&&(s=r.length-2);s<0&&(s=r.length-1);var a="",c,l,u=Math.min(t.line+e.linesAfter,o.length).toString().length,f=e.maxLength-(e.indent+u+3);for(c=1;c<=e.linesBefore&&!(s-c<0);c++)l=sk(t.buffer,r[s-c],o[s-c],t.position-(r[s]-r[s-c]),f),a=qn.repeat(" ",e.indent)+ak((t.line-c+1).toString(),u)+" | "+l.str+`
`+a;for(l=sk(t.buffer,r[s],o[s],t.position,f),a+=qn.repeat(" ",e.indent)+ak((t.line+1).toString(),u)+" | "+l.str+`
`,a+=qn.repeat("-",e.indent+u+3+l.pos)+`^
`,c=1;c<=e.linesAfter&&!(s+c>=o.length);c++)l=sk(t.buffer,r[s+c],o[s+c],t.position-(r[s]-r[s+c]),f),a+=qn.repeat(" ",e.indent)+ak((t.line+c+1).toString(),u)+" | "+l.str+`
`;return a.replace(/\n$/,"")}var Gae=qae,zae=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Kae=["scalar","sequence","mapping"];function Jae(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(r){e[String(r)]=n})}),e}function Xae(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(zae.indexOf(n)===-1)throw new Ao('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Jae(e.styleAliases||null),Kae.indexOf(this.kind)===-1)throw new Ao('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var zr=Xae;function oq(t,e){var n=[];return t[e].forEach(function(r){var o=n.length;n.forEach(function(i,s){i.tag===r.tag&&i.kind===r.kind&&i.multi===r.multi&&(o=s)}),n[o]=r}),n}function Zae(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function r(o){o.multi?(t.multi[o.kind].push(o),t.multi.fallback.push(o)):t[o.kind][o.tag]=t.fallback[o.tag]=o}for(e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(r);return t}function lk(t){return this.extend(t)}lk.prototype.extend=function(e){var n=[],r=[];if(e instanceof zr)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new Ao("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(i){if(!(i instanceof zr))throw new Ao("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new Ao("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new Ao("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(i){if(!(i instanceof zr))throw new Ao("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create(lk.prototype);return o.implicit=(this.implicit||[]).concat(n),o.explicit=(this.explicit||[]).concat(r),o.compiledImplicit=oq(o,"implicit"),o.compiledExplicit=oq(o,"explicit"),o.compiledTypeMap=Zae(o.compiledImplicit,o.compiledExplicit),o};var Qae=lk,ece=new zr("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),tce=new zr("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),nce=new zr("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),rce=new Qae({explicit:[ece,tce,nce]});function oce(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function ice(){return null}function sce(t){return t===null}var ace=new zr("tag:yaml.org,2002:null",{kind:"scalar",resolve:oce,construct:ice,predicate:sce,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function cce(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function lce(t){return t==="true"||t==="True"||t==="TRUE"}function uce(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var fce=new zr("tag:yaml.org,2002:bool",{kind:"scalar",resolve:cce,construct:lce,predicate:uce,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function dce(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function mce(t){return 48<=t&&t<=55}function pce(t){return 48<=t&&t<=57}function hce(t){if(t===null)return!1;var e=t.length,n=0,r=!1,o;if(!e)return!1;if(o=t[n],(o==="-"||o==="+")&&(o=t[++n]),o==="0"){if(n+1===e)return!0;if(o=t[++n],o==="b"){for(n++;n<e;n++)if(o=t[n],o!=="_"){if(o!=="0"&&o!=="1")return!1;r=!0}return r&&o!=="_"}if(o==="x"){for(n++;n<e;n++)if(o=t[n],o!=="_"){if(!dce(t.charCodeAt(n)))return!1;r=!0}return r&&o!=="_"}if(o==="o"){for(n++;n<e;n++)if(o=t[n],o!=="_"){if(!mce(t.charCodeAt(n)))return!1;r=!0}return r&&o!=="_"}}if(o==="_")return!1;for(;n<e;n++)if(o=t[n],o!=="_"){if(!pce(t.charCodeAt(n)))return!1;r=!0}return!(!r||o==="_")}function gce(t){var e=t,n=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}function vce(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!qn.isNegativeZero(t)}var wce=new zr("tag:yaml.org,2002:int",{kind:"scalar",resolve:hce,construct:gce,predicate:vce,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),yce=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Cce(t){return!(t===null||!yce.test(t)||t[t.length-1]==="_")}function Ece(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}var Sce=/^[-+]?[0-9]+e/;function xce(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(qn.isNegativeZero(t))return"-0.0";return n=t.toString(10),Sce.test(n)?n.replace("e",".e"):n}function _ce(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||qn.isNegativeZero(t))}var Dce=new zr("tag:yaml.org,2002:float",{kind:"scalar",resolve:Cce,construct:Ece,predicate:_ce,represent:xce,defaultStyle:"lowercase"}),Ice=rce.extend({implicit:[ace,fce,wce,Dce]}),Pce=Ice,Eq=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Sq=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function bce(t){return t===null?!1:Eq.exec(t)!==null||Sq.exec(t)!==null}function Tce(t){var e,n,r,o,i,s,a,c=0,l=null,u,f,m;if(e=Eq.exec(t),e===null&&(e=Sq.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,o=+e[3],!e[4])return new Date(Date.UTC(n,r,o));if(i=+e[4],s=+e[5],a=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(u=+e[10],f=+(e[11]||0),l=(u*60+f)*6e4,e[9]==="-"&&(l=-l)),m=new Date(Date.UTC(n,r,o,i,s,a,c)),l&&m.setTime(m.getTime()-l),m}function Rce(t){return t.toISOString()}var kce=new zr("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:bce,construct:Tce,instanceOf:Date,represent:Rce});function Nce(t){return t==="<<"||t===null}var Lce=new zr("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Nce}),pk=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Ace(t){if(t===null)return!1;var e,n,r=0,o=t.length,i=pk;for(n=0;n<o;n++)if(e=i.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}function Fce(t){var e,n,r=t.replace(/[\r\n=]/g,""),o=r.length,i=pk,s=0,a=[];for(e=0;e<o;e++)e%4===0&&e&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|i.indexOf(r.charAt(e));return n=o%4*6,n===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):n===18?(a.push(s>>10&255),a.push(s>>2&255)):n===12&&a.push(s>>4&255),new Uint8Array(a)}function Oce(t){var e="",n=0,r,o,i=t.length,s=pk;for(r=0;r<i;r++)r%3===0&&r&&(e+=s[n>>18&63],e+=s[n>>12&63],e+=s[n>>6&63],e+=s[n&63]),n=(n<<8)+t[r];return o=i%3,o===0?(e+=s[n>>18&63],e+=s[n>>12&63],e+=s[n>>6&63],e+=s[n&63]):o===2?(e+=s[n>>10&63],e+=s[n>>4&63],e+=s[n<<2&63],e+=s[64]):o===1&&(e+=s[n>>2&63],e+=s[n<<4&63],e+=s[64],e+=s[64]),e}function Uce(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var Mce=new zr("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Ace,construct:Fce,predicate:Uce,represent:Oce}),$ce=Object.prototype.hasOwnProperty,Hce=Object.prototype.toString;function Bce(t){if(t===null)return!0;var e=[],n,r,o,i,s,a=t;for(n=0,r=a.length;n<r;n+=1){if(o=a[n],s=!1,Hce.call(o)!=="[object Object]")return!1;for(i in o)if($ce.call(o,i))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(i)===-1)e.push(i);else return!1}return!0}function Wce(t){return t!==null?t:[]}var jce=new zr("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Bce,construct:Wce}),Vce=Object.prototype.toString;function Yce(t){if(t===null)return!0;var e,n,r,o,i,s=t;for(i=new Array(s.length),e=0,n=s.length;e<n;e+=1){if(r=s[e],Vce.call(r)!=="[object Object]"||(o=Object.keys(r),o.length!==1))return!1;i[e]=[o[0],r[o[0]]]}return!0}function qce(t){if(t===null)return[];var e,n,r,o,i,s=t;for(i=new Array(s.length),e=0,n=s.length;e<n;e+=1)r=s[e],o=Object.keys(r),i[e]=[o[0],r[o[0]]];return i}var Gce=new zr("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Yce,construct:qce}),zce=Object.prototype.hasOwnProperty;function Kce(t){if(t===null)return!0;var e,n=t;for(e in n)if(zce.call(n,e)&&n[e]!==null)return!1;return!0}function Jce(t){return t!==null?t:{}}var Xce=new zr("tag:yaml.org,2002:set",{kind:"mapping",resolve:Kce,construct:Jce}),xq=Pce.extend({implicit:[kce,Lce],explicit:[Mce,jce,Gce,Xce]}),ql=Object.prototype.hasOwnProperty,Tx=1,_q=2,Dq=3,Rx=4,ck=1,Zce=2,iq=3,Qce=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,ele=/[\x85\u2028\u2029]/,tle=/[,\[\]\{\}]/,Iq=/^(?:!|!!|![a-z\-]+!)$/i,Pq=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function sq(t){return Object.prototype.toString.call(t)}function ta(t){return t===10||t===13}function qf(t){return t===9||t===32}function Fo(t){return t===9||t===32||t===10||t===13}function Np(t){return t===44||t===91||t===93||t===123||t===125}function nle(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function rle(t){return t===120?2:t===117?4:t===85?8:0}function ole(t){return 48<=t&&t<=57?t-48:-1}function aq(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function ile(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var bq=new Array(256),Tq=new Array(256);for(Yf=0;Yf<256;Yf++)bq[Yf]=aq(Yf)?1:0,Tq[Yf]=aq(Yf);var Yf;function sle(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||xq,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Rq(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=Gae(n),new Ao(e,n)}function Pe(t,e){throw Rq(t,e)}function kx(t,e){t.onWarning&&t.onWarning.call(null,Rq(t,e))}var cq={YAML:function(e,n,r){var o,i,s;e.version!==null&&Pe(e,"duplication of %YAML directive"),r.length!==1&&Pe(e,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),o===null&&Pe(e,"ill-formed argument of the YAML directive"),i=parseInt(o[1],10),s=parseInt(o[2],10),i!==1&&Pe(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&kx(e,"unsupported YAML version of the document")},TAG:function(e,n,r){var o,i;r.length!==2&&Pe(e,"TAG directive accepts exactly two arguments"),o=r[0],i=r[1],Iq.test(o)||Pe(e,"ill-formed tag handle (first argument) of the TAG directive"),ql.call(e.tagMap,o)&&Pe(e,'there is a previously declared suffix for "'+o+'" tag handle'),Pq.test(i)||Pe(e,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch{Pe(e,"tag prefix is malformed: "+i)}e.tagMap[o]=i}};function Yl(t,e,n,r){var o,i,s,a;if(e<n){if(a=t.input.slice(e,n),r)for(o=0,i=a.length;o<i;o+=1)s=a.charCodeAt(o),s===9||32<=s&&s<=1114111||Pe(t,"expected valid JSON character");else Qce.test(a)&&Pe(t,"the stream contains non-printable characters");t.result+=a}}function lq(t,e,n,r){var o,i,s,a;for(qn.isObject(n)||Pe(t,"cannot merge mappings; the provided source object is unacceptable"),o=Object.keys(n),s=0,a=o.length;s<a;s+=1)i=o[s],ql.call(e,i)||(e[i]=n[i],r[i]=!0)}function Lp(t,e,n,r,o,i,s,a,c){var l,u;if(Array.isArray(o))for(o=Array.prototype.slice.call(o),l=0,u=o.length;l<u;l+=1)Array.isArray(o[l])&&Pe(t,"nested arrays are not supported inside keys"),typeof o=="object"&&sq(o[l])==="[object Object]"&&(o[l]="[object Object]");if(typeof o=="object"&&sq(o)==="[object Object]"&&(o="[object Object]"),o=String(o),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(i))for(l=0,u=i.length;l<u;l+=1)lq(t,e,i[l],n);else lq(t,e,i,n);else!t.json&&!ql.call(n,o)&&ql.call(e,o)&&(t.line=s||t.line,t.lineStart=a||t.lineStart,t.position=c||t.position,Pe(t,"duplicated mapping key")),o==="__proto__"?Object.defineProperty(e,o,{configurable:!0,enumerable:!0,writable:!0,value:i}):e[o]=i,delete n[o];return e}function hk(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):Pe(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Tn(t,e,n){for(var r=0,o=t.input.charCodeAt(t.position);o!==0;){for(;qf(o);)o===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),o=t.input.charCodeAt(++t.position);if(e&&o===35)do o=t.input.charCodeAt(++t.position);while(o!==10&&o!==13&&o!==0);if(ta(o))for(hk(t),o=t.input.charCodeAt(t.position),r++,t.lineIndent=0;o===32;)t.lineIndent++,o=t.input.charCodeAt(++t.position);else break}return n!==-1&&r!==0&&t.lineIndent<n&&kx(t,"deficient indentation"),r}function Ax(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||Fo(n)))}function gk(t,e){e===1?t.result+=" ":e>1&&(t.result+=qn.repeat(`
`,e-1))}function ale(t,e,n){var r,o,i,s,a,c,l,u,f=t.kind,m=t.result,d;if(d=t.input.charCodeAt(t.position),Fo(d)||Np(d)||d===35||d===38||d===42||d===33||d===124||d===62||d===39||d===34||d===37||d===64||d===96||(d===63||d===45)&&(o=t.input.charCodeAt(t.position+1),Fo(o)||n&&Np(o)))return!1;for(t.kind="scalar",t.result="",i=s=t.position,a=!1;d!==0;){if(d===58){if(o=t.input.charCodeAt(t.position+1),Fo(o)||n&&Np(o))break}else if(d===35){if(r=t.input.charCodeAt(t.position-1),Fo(r))break}else{if(t.position===t.lineStart&&Ax(t)||n&&Np(d))break;if(ta(d))if(c=t.line,l=t.lineStart,u=t.lineIndent,Tn(t,!1,-1),t.lineIndent>=e){a=!0,d=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=c,t.lineStart=l,t.lineIndent=u;break}}a&&(Yl(t,i,s,!1),gk(t,t.line-c),i=s=t.position,a=!1),qf(d)||(s=t.position+1),d=t.input.charCodeAt(++t.position)}return Yl(t,i,s,!1),t.result?!0:(t.kind=f,t.result=m,!1)}function cle(t,e){var n,r,o;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=o=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(Yl(t,r,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)r=t.position,t.position++,o=t.position;else return!0;else ta(n)?(Yl(t,r,o,!0),gk(t,Tn(t,!1,e)),r=o=t.position):t.position===t.lineStart&&Ax(t)?Pe(t,"unexpected end of the document within a single quoted scalar"):(t.position++,o=t.position);Pe(t,"unexpected end of the stream within a single quoted scalar")}function lle(t,e){var n,r,o,i,s,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return Yl(t,n,t.position,!0),t.position++,!0;if(a===92){if(Yl(t,n,t.position,!0),a=t.input.charCodeAt(++t.position),ta(a))Tn(t,!1,e);else if(a<256&&bq[a])t.result+=Tq[a],t.position++;else if((s=rle(a))>0){for(o=s,i=0;o>0;o--)a=t.input.charCodeAt(++t.position),(s=nle(a))>=0?i=(i<<4)+s:Pe(t,"expected hexadecimal character");t.result+=ile(i),t.position++}else Pe(t,"unknown escape sequence");n=r=t.position}else ta(a)?(Yl(t,n,r,!0),gk(t,Tn(t,!1,e)),n=r=t.position):t.position===t.lineStart&&Ax(t)?Pe(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}Pe(t,"unexpected end of the stream within a double quoted scalar")}function ule(t,e){var n=!0,r,o,i,s=t.tag,a,c=t.anchor,l,u,f,m,d,p=Object.create(null),g,h,v,C;if(C=t.input.charCodeAt(t.position),C===91)u=93,d=!1,a=[];else if(C===123)u=125,d=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),C=t.input.charCodeAt(++t.position);C!==0;){if(Tn(t,!0,e),C=t.input.charCodeAt(t.position),C===u)return t.position++,t.tag=s,t.anchor=c,t.kind=d?"mapping":"sequence",t.result=a,!0;n?C===44&&Pe(t,"expected the node content, but found ','"):Pe(t,"missed comma between flow collection entries"),h=g=v=null,f=m=!1,C===63&&(l=t.input.charCodeAt(t.position+1),Fo(l)&&(f=m=!0,t.position++,Tn(t,!0,e))),r=t.line,o=t.lineStart,i=t.position,Ap(t,e,Tx,!1,!0),h=t.tag,g=t.result,Tn(t,!0,e),C=t.input.charCodeAt(t.position),(m||t.line===r)&&C===58&&(f=!0,C=t.input.charCodeAt(++t.position),Tn(t,!0,e),Ap(t,e,Tx,!1,!0),v=t.result),d?Lp(t,a,p,h,g,v,r,o,i):f?a.push(Lp(t,null,p,h,g,v,r,o,i)):a.push(g),Tn(t,!0,e),C=t.input.charCodeAt(t.position),C===44?(n=!0,C=t.input.charCodeAt(++t.position)):n=!1}Pe(t,"unexpected end of the stream within a flow collection")}function fle(t,e){var n,r,o=ck,i=!1,s=!1,a=e,c=0,l=!1,u,f;if(f=t.input.charCodeAt(t.position),f===124)r=!1;else if(f===62)r=!0;else return!1;for(t.kind="scalar",t.result="";f!==0;)if(f=t.input.charCodeAt(++t.position),f===43||f===45)ck===o?o=f===43?iq:Zce:Pe(t,"repeat of a chomping mode identifier");else if((u=ole(f))>=0)u===0?Pe(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?Pe(t,"repeat of an indentation width identifier"):(a=e+u-1,s=!0);else break;if(qf(f)){do f=t.input.charCodeAt(++t.position);while(qf(f));if(f===35)do f=t.input.charCodeAt(++t.position);while(!ta(f)&&f!==0)}for(;f!==0;){for(hk(t),t.lineIndent=0,f=t.input.charCodeAt(t.position);(!s||t.lineIndent<a)&&f===32;)t.lineIndent++,f=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>a&&(a=t.lineIndent),ta(f)){c++;continue}if(t.lineIndent<a){o===iq?t.result+=qn.repeat(`
`,i?1+c:c):o===ck&&i&&(t.result+=`
`);break}for(r?qf(f)?(l=!0,t.result+=qn.repeat(`
`,i?1+c:c)):l?(l=!1,t.result+=qn.repeat(`
`,c+1)):c===0?i&&(t.result+=" "):t.result+=qn.repeat(`
`,c):t.result+=qn.repeat(`
`,i?1+c:c),i=!0,s=!0,c=0,n=t.position;!ta(f)&&f!==0;)f=t.input.charCodeAt(++t.position);Yl(t,n,t.position,!1)}return!0}function uq(t,e){var n,r=t.tag,o=t.anchor,i=[],s,a=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=i),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Pe(t,"tab characters must not be used in indentation")),!(c!==45||(s=t.input.charCodeAt(t.position+1),!Fo(s))));){if(a=!0,t.position++,Tn(t,!0,-1)&&t.lineIndent<=e){i.push(null),c=t.input.charCodeAt(t.position);continue}if(n=t.line,Ap(t,e,Dq,!1,!0),i.push(t.result),Tn(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&c!==0)Pe(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=r,t.anchor=o,t.kind="sequence",t.result=i,!0):!1}function dle(t,e,n){var r,o,i,s,a,c,l=t.tag,u=t.anchor,f={},m=Object.create(null),d=null,p=null,g=null,h=!1,v=!1,C;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=f),C=t.input.charCodeAt(t.position);C!==0;){if(!h&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Pe(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),i=t.line,(C===63||C===58)&&Fo(r))C===63?(h&&(Lp(t,f,m,d,p,null,s,a,c),d=p=g=null),v=!0,h=!0,o=!0):h?(h=!1,o=!0):Pe(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,C=r;else{if(s=t.line,a=t.lineStart,c=t.position,!Ap(t,n,_q,!1,!0))break;if(t.line===i){for(C=t.input.charCodeAt(t.position);qf(C);)C=t.input.charCodeAt(++t.position);if(C===58)C=t.input.charCodeAt(++t.position),Fo(C)||Pe(t,"a whitespace character is expected after the key-value separator within a block mapping"),h&&(Lp(t,f,m,d,p,null,s,a,c),d=p=g=null),v=!0,h=!1,o=!1,d=t.tag,p=t.result;else if(v)Pe(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=l,t.anchor=u,!0}else if(v)Pe(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=l,t.anchor=u,!0}if((t.line===i||t.lineIndent>e)&&(h&&(s=t.line,a=t.lineStart,c=t.position),Ap(t,e,Rx,!0,o)&&(h?p=t.result:g=t.result),h||(Lp(t,f,m,d,p,g,s,a,c),d=p=g=null),Tn(t,!0,-1),C=t.input.charCodeAt(t.position)),(t.line===i||t.lineIndent>e)&&C!==0)Pe(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return h&&Lp(t,f,m,d,p,null,s,a,c),v&&(t.tag=l,t.anchor=u,t.kind="mapping",t.result=f),v}function mle(t){var e,n=!1,r=!1,o,i,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&Pe(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(n=!0,s=t.input.charCodeAt(++t.position)):s===33?(r=!0,o="!!",s=t.input.charCodeAt(++t.position)):o="!",e=t.position,n){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(i=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):Pe(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Fo(s);)s===33&&(r?Pe(t,"tag suffix cannot contain exclamation marks"):(o=t.input.slice(e-1,t.position+1),Iq.test(o)||Pe(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);i=t.input.slice(e,t.position),tle.test(i)&&Pe(t,"tag suffix cannot contain flow indicator characters")}i&&!Pq.test(i)&&Pe(t,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch{Pe(t,"tag name is malformed: "+i)}return n?t.tag=i:ql.call(t.tagMap,o)?t.tag=t.tagMap[o]+i:o==="!"?t.tag="!"+i:o==="!!"?t.tag="tag:yaml.org,2002:"+i:Pe(t,'undeclared tag handle "'+o+'"'),!0}function ple(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&Pe(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Fo(n)&&!Np(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Pe(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function hle(t){var e,n,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Fo(r)&&!Np(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Pe(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),ql.call(t.anchorMap,n)||Pe(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],Tn(t,!0,-1),!0}function Ap(t,e,n,r,o){var i,s,a,c=1,l=!1,u=!1,f,m,d,p,g,h;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,i=s=a=Rx===n||Dq===n,r&&Tn(t,!0,-1)&&(l=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;mle(t)||ple(t);)Tn(t,!0,-1)?(l=!0,a=i,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):a=!1;if(a&&(a=l||o),(c===1||Rx===n)&&(Tx===n||_q===n?g=e:g=e+1,h=t.position-t.lineStart,c===1?a&&(uq(t,h)||dle(t,h,g))||ule(t,g)?u=!0:(s&&fle(t,g)||cle(t,g)||lle(t,g)?u=!0:hle(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&Pe(t,"alias node should not have any properties")):ale(t,g,Tx===n)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(u=a&&uq(t,h))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&Pe(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),f=0,m=t.implicitTypes.length;f<m;f+=1)if(p=t.implicitTypes[f],p.resolve(t.result)){t.result=p.construct(t.result),t.tag=p.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(ql.call(t.typeMap[t.kind||"fallback"],t.tag))p=t.typeMap[t.kind||"fallback"][t.tag];else for(p=null,d=t.typeMap.multi[t.kind||"fallback"],f=0,m=d.length;f<m;f+=1)if(t.tag.slice(0,d[f].tag.length)===d[f].tag){p=d[f];break}p||Pe(t,"unknown tag !<"+t.tag+">"),t.result!==null&&p.kind!==t.kind&&Pe(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"'),p.resolve(t.result,t.tag)?(t.result=p.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):Pe(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function gle(t){var e=t.position,n,r,o,i=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(Tn(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(i=!0,s=t.input.charCodeAt(++t.position),n=t.position;s!==0&&!Fo(s);)s=t.input.charCodeAt(++t.position);for(r=t.input.slice(n,t.position),o=[],r.length<1&&Pe(t,"directive name must not be less than one character in length");s!==0;){for(;qf(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!ta(s));break}if(ta(s))break;for(n=t.position;s!==0&&!Fo(s);)s=t.input.charCodeAt(++t.position);o.push(t.input.slice(n,t.position))}s!==0&&hk(t),ql.call(cq,r)?cq[r](t,r,o):kx(t,'unknown document directive "'+r+'"')}if(Tn(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Tn(t,!0,-1)):i&&Pe(t,"directives end mark is expected"),Ap(t,t.lineIndent-1,Rx,!1,!0),Tn(t,!0,-1),t.checkLineBreaks&&ele.test(t.input.slice(e,t.position))&&kx(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Ax(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Tn(t,!0,-1));return}if(t.position<t.length-1)Pe(t,"end of the stream or a document separator is expected");else return}function kq(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new sle(t,e),r=t.indexOf("\0");for(r!==-1&&(n.position=r,Pe(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)gle(n);return n.documents}function vle(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var r=kq(t,n);if(typeof e!="function")return r;for(var o=0,i=r.length;o<i;o+=1)e(r[o])}function wle(t,e){var n=kq(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new Ao("expected a single document in the stream, but found more")}}var yle=vle,Cle=wle,Nq={loadAll:yle,load:Cle},Lq=Object.prototype.toString,Aq=Object.prototype.hasOwnProperty,vk=65279,Ele=9,zv=10,Sle=13,xle=32,_le=33,Dle=34,uk=35,Ile=37,Ple=38,ble=39,Tle=42,Fq=44,Rle=45,Nx=58,kle=61,Nle=62,Lle=63,Ale=64,Oq=91,Uq=93,Fle=96,Mq=123,Ole=124,$q=125,Kr={};Kr[0]="\\0";Kr[7]="\\a";Kr[8]="\\b";Kr[9]="\\t";Kr[10]="\\n";Kr[11]="\\v";Kr[12]="\\f";Kr[13]="\\r";Kr[27]="\\e";Kr[34]='\\"';Kr[92]="\\\\";Kr[133]="\\N";Kr[160]="\\_";Kr[8232]="\\L";Kr[8233]="\\P";var Ule=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Mle=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function $le(t,e){var n,r,o,i,s,a,c;if(e===null)return{};for(n={},r=Object.keys(e),o=0,i=r.length;o<i;o+=1)s=r[o],a=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),c=t.compiledTypeMap.fallback[s],c&&Aq.call(c.styleAliases,a)&&(a=c.styleAliases[a]),n[s]=a;return n}function Hle(t){var e,n,r;if(e=t.toString(16).toUpperCase(),t<=255)n="x",r=2;else if(t<=65535)n="u",r=4;else if(t<=4294967295)n="U",r=8;else throw new Ao("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+qn.repeat("0",r-e.length)+e}var Ble=1,Kv=2;function Wle(t){this.schema=t.schema||xq,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=qn.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=$le(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Kv:Ble,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function fq(t,e){for(var n=qn.repeat(" ",e),r=0,o=-1,i="",s,a=t.length;r<a;)o=t.indexOf(`
`,r),o===-1?(s=t.slice(r),r=a):(s=t.slice(r,o+1),r=o+1),s.length&&s!==`
`&&(i+=n),i+=s;return i}function fk(t,e){return`
`+qn.repeat(" ",t.indent*e)}function jle(t,e){var n,r,o;for(n=0,r=t.implicitTypes.length;n<r;n+=1)if(o=t.implicitTypes[n],o.resolve(e))return!0;return!1}function Lx(t){return t===xle||t===Ele}function Jv(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==vk||65536<=t&&t<=1114111}function dq(t){return Jv(t)&&t!==vk&&t!==Sle&&t!==zv}function mq(t,e,n){var r=dq(t),o=r&&!Lx(t);return(n?r:r&&t!==Fq&&t!==Oq&&t!==Uq&&t!==Mq&&t!==$q)&&t!==uk&&!(e===Nx&&!o)||dq(e)&&!Lx(e)&&t===uk||e===Nx&&o}function Vle(t){return Jv(t)&&t!==vk&&!Lx(t)&&t!==Rle&&t!==Lle&&t!==Nx&&t!==Fq&&t!==Oq&&t!==Uq&&t!==Mq&&t!==$q&&t!==uk&&t!==Ple&&t!==Tle&&t!==_le&&t!==Ole&&t!==kle&&t!==Nle&&t!==ble&&t!==Dle&&t!==Ile&&t!==Ale&&t!==Fle}function Yle(t){return!Lx(t)&&t!==Nx}function qv(t,e){var n=t.charCodeAt(e),r;return n>=55296&&n<=56319&&e+1<t.length&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}function Hq(t){var e=/^\n* /;return e.test(t)}var Bq=1,dk=2,Wq=3,jq=4,kp=5;function qle(t,e,n,r,o,i,s,a){var c,l=0,u=null,f=!1,m=!1,d=r!==-1,p=-1,g=Vle(qv(t,0))&&Yle(qv(t,t.length-1));if(e||s)for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=qv(t,c),!Jv(l))return kp;g=g&&mq(l,u,a),u=l}else{for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=qv(t,c),l===zv)f=!0,d&&(m=m||c-p-1>r&&t[p+1]!==" ",p=c);else if(!Jv(l))return kp;g=g&&mq(l,u,a),u=l}m=m||d&&c-p-1>r&&t[p+1]!==" "}return!f&&!m?g&&!s&&!o(t)?Bq:i===Kv?kp:dk:n>9&&Hq(t)?kp:s?i===Kv?kp:dk:m?jq:Wq}function Gle(t,e,n,r,o){t.dump=(function(){if(e.length===0)return t.quotingType===Kv?'""':"''";if(!t.noCompatMode&&(Ule.indexOf(e)!==-1||Mle.test(e)))return t.quotingType===Kv?'"'+e+'"':"'"+e+"'";var i=t.indent*Math.max(1,n),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-i),a=r||t.flowLevel>-1&&n>=t.flowLevel;function c(l){return jle(t,l)}switch(qle(e,a,t.indent,s,c,t.quotingType,t.forceQuotes&&!r,o)){case Bq:return e;case dk:return"'"+e.replace(/'/g,"''")+"'";case Wq:return"|"+pq(e,t.indent)+hq(fq(e,i));case jq:return">"+pq(e,t.indent)+hq(fq(zle(e,s),i));case kp:return'"'+Kle(e)+'"';default:throw new Ao("impossible error: invalid scalar style")}})()}function pq(t,e){var n=Hq(t)?String(e):"",r=t[t.length-1]===`
`,o=r&&(t[t.length-2]===`
`||t===`
`),i=o?"+":r?"":"-";return n+i+`
`}function hq(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function zle(t,e){for(var n=/(\n+)([^\n]*)/g,r=(function(){var l=t.indexOf(`
`);return l=l!==-1?l:t.length,n.lastIndex=l,gq(t.slice(0,l),e)})(),o=t[0]===`
`||t[0]===" ",i,s;s=n.exec(t);){var a=s[1],c=s[2];i=c[0]===" ",r+=a+(!o&&!i&&c!==""?`
`:"")+gq(c,e),o=i}return r}function gq(t,e){if(t===""||t[0]===" ")return t;for(var n=/ [^ ]/g,r,o=0,i,s=0,a=0,c="";r=n.exec(t);)a=r.index,a-o>e&&(i=s>o?s:a,c+=`
`+t.slice(o,i),o=i+1),s=a;return c+=`
`,t.length-o>e&&s>o?c+=t.slice(o,s)+`
`+t.slice(s+1):c+=t.slice(o),c.slice(1)}function Kle(t){for(var e="",n=0,r,o=0;o<t.length;n>=65536?o+=2:o++)n=qv(t,o),r=Kr[n],!r&&Jv(n)?(e+=t[o],n>=65536&&(e+=t[o+1])):e+=r||Hle(n);return e}function Jle(t,e,n){var r="",o=t.tag,i,s,a;for(i=0,s=n.length;i<s;i+=1)a=n[i],t.replacer&&(a=t.replacer.call(n,String(i),a)),(mc(t,e,a,!1,!1)||typeof a>"u"&&mc(t,e,null,!1,!1))&&(r!==""&&(r+=","+(t.condenseFlow?"":" ")),r+=t.dump);t.tag=o,t.dump="["+r+"]"}function vq(t,e,n,r){var o="",i=t.tag,s,a,c;for(s=0,a=n.length;s<a;s+=1)c=n[s],t.replacer&&(c=t.replacer.call(n,String(s),c)),(mc(t,e+1,c,!0,!0,!1,!0)||typeof c>"u"&&mc(t,e+1,null,!0,!0,!1,!0))&&((!r||o!=="")&&(o+=fk(t,e)),t.dump&&zv===t.dump.charCodeAt(0)?o+="-":o+="- ",o+=t.dump);t.tag=i,t.dump=o||"[]"}function Xle(t,e,n){var r="",o=t.tag,i=Object.keys(n),s,a,c,l,u;for(s=0,a=i.length;s<a;s+=1)u="",r!==""&&(u+=", "),t.condenseFlow&&(u+='"'),c=i[s],l=n[c],t.replacer&&(l=t.replacer.call(n,c,l)),mc(t,e,c,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),mc(t,e,l,!1,!1)&&(u+=t.dump,r+=u));t.tag=o,t.dump="{"+r+"}"}function Zle(t,e,n,r){var o="",i=t.tag,s=Object.keys(n),a,c,l,u,f,m;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new Ao("sortKeys must be a boolean or a function");for(a=0,c=s.length;a<c;a+=1)m="",(!r||o!=="")&&(m+=fk(t,e)),l=s[a],u=n[l],t.replacer&&(u=t.replacer.call(n,l,u)),mc(t,e+1,l,!0,!0,!0)&&(f=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,f&&(t.dump&&zv===t.dump.charCodeAt(0)?m+="?":m+="? "),m+=t.dump,f&&(m+=fk(t,e)),mc(t,e+1,u,!0,f)&&(t.dump&&zv===t.dump.charCodeAt(0)?m+=":":m+=": ",m+=t.dump,o+=m));t.tag=i,t.dump=o||"{}"}function wq(t,e,n){var r,o,i,s,a,c;for(o=n?t.explicitTypes:t.implicitTypes,i=0,s=o.length;i<s;i+=1)if(a=o[i],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(n?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(c=t.styleMap[a.tag]||a.defaultStyle,Lq.call(a.represent)==="[object Function]")r=a.represent(e,c);else if(Aq.call(a.represent,c))r=a.represent[c](e,c);else throw new Ao("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');t.dump=r}return!0}return!1}function mc(t,e,n,r,o,i,s){t.tag=null,t.dump=n,wq(t,n,!1)||wq(t,n,!0);var a=Lq.call(t.dump),c=r,l;r&&(r=t.flowLevel<0||t.flowLevel>e);var u=a==="[object Object]"||a==="[object Array]",f,m;if(u&&(f=t.duplicates.indexOf(n),m=f!==-1),(t.tag!==null&&t.tag!=="?"||m||t.indent!==2&&e>0)&&(o=!1),m&&t.usedDuplicates[f])t.dump="*ref_"+f;else{if(u&&m&&!t.usedDuplicates[f]&&(t.usedDuplicates[f]=!0),a==="[object Object]")r&&Object.keys(t.dump).length!==0?(Zle(t,e,t.dump,o),m&&(t.dump="&ref_"+f+t.dump)):(Xle(t,e,t.dump),m&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object Array]")r&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?vq(t,e-1,t.dump,o):vq(t,e,t.dump,o),m&&(t.dump="&ref_"+f+t.dump)):(Jle(t,e,t.dump),m&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&Gle(t,t.dump,e,i,c);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Ao("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(l=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?l="!"+l:l.slice(0,18)==="tag:yaml.org,2002:"?l="!!"+l.slice(18):l="!<"+l+">",t.dump=l+" "+t.dump)}return!0}function Qle(t,e){var n=[],r=[],o,i;for(mk(t,n,r),o=0,i=r.length;o<i;o+=1)e.duplicates.push(n[r[o]]);e.usedDuplicates=new Array(i)}function mk(t,e,n){var r,o,i;if(t!==null&&typeof t=="object")if(o=e.indexOf(t),o!==-1)n.indexOf(o)===-1&&n.push(o);else if(e.push(t),Array.isArray(t))for(o=0,i=t.length;o<i;o+=1)mk(t[o],e,n);else for(r=Object.keys(t),o=0,i=r.length;o<i;o+=1)mk(t[r[o]],e,n)}function eue(t,e){e=e||{};var n=new Wle(e);n.noRefs||Qle(t,n);var r=t;return n.replacer&&(r=n.replacer.call({"":r},"",r)),mc(n,0,r,!0,!0)?n.dump+`
`:""}var tue=eue,nue={dump:tue};function wk(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var Xv=Nq.load,q_e=Nq.loadAll,G_e=nue.dump;var z_e=wk("safeLoad","load"),K_e=wk("safeLoadAll","loadAll"),J_e=wk("safeDump","dump");var vs=Y(require("path")),Kq=Y(require("os")),Jq=Y(require("crypto")),Xq=Y(eS());var Zv=Y(require("path")),qq=Y(require("os"));var Yq=Y(require("crypto"));var gs={async readDocument(t){switch(t.scheme){case"file":try{return(await at(t.fsPath)).toString()}catch(e){if(e&&e.code==="ENOENT")return;throw e}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}},async applyEdits(t,e,n){switch(t.scheme){case"file":let r=Io(n,e);await Ng(t.fsPath,r);break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},Ke=class t{constructor(e,n=t.scheme){this.fileHost=e;this.scheme=n}static scheme="vscode-fileHost";async readDocument(e){switch(e.scheme){case this.scheme:try{return(await this.fileHost.readFile(_e(e,this.fileHost.platform))).toString()}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,n,r){switch(e.scheme){case this.scheme:let o=Io(r,n);await this.fileHost.writeFile(_e(e,this.fileHost.platform),Buffer.from(o));break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},co=class t{constructor(e){this.shellServer=e}static scheme="vscode-remote";static nonce;async readDocument(e){switch(e.scheme){case t.scheme:try{let{stdout:n}=await this.shellServer.exec(`cat ${e.path}`);return n}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,n,r){switch(e.scheme){case t.scheme:try{t.nonce||(t.nonce=Yq.randomUUID());let o=Io(r,n),i=`EOF-${t.nonce}`;await this.shellServer.exec(`cat <<'${i}' >${e.path}
${o}
${i}
`)}catch(o){console.log(o)}break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},Ck=class{constructor(e){this.documents=e}async readDocument(e){let n=this.documents[e.scheme];if(!n)throw new Error(`Unsupported scheme: ${e.toString()}`);return n.readDocument(e)}async applyEdits(e,n,r){let o=this.documents[e.scheme];if(!o)throw new Error(`Unsupported scheme: ${e.toString()}`);return o.applyEdits(e,n,r)}};function ur(t,e){let n={file:gs,[Ke.scheme]:new Ke(t)};return e&&(n[co.scheme]="readFile"in e?new Ke(e,co.scheme):new co(e)),new Ck(n)}var yk=new Map;async function Ek(t,e){let n=t.toString(),r=yk.get(n);if(r||yk.set(n,r=[]),r.push(e),r.length===1){for(;r.length;)await r[0](),r.shift();yk.delete(n)}}function _e(t,e){let n;return t.authority&&t.path.length>1&&(t.scheme==="file"||t.scheme===Ke.scheme)?n=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?n=t.path[1].toLowerCase()+t.path.substr(2):n=t.path,e==="win32"&&(n=n.replace(/\//g,"\\"),n[0]==="\\"&&n[1]!=="\\"&&(n=`C:${n}`)),n}function Rn(t,e,n){let r=t==="win32"?"/"+n.replace(/\\/g,"/"):n;return e.with({path:r})}function Gl(t,e){return[t.join(e,".devcontainer","devcontainer.json"),t.join(e,".devcontainer.json")]}function Qv(t,e){let n=t.normalize(e);return Gl(t,"").includes(n)}async function Gf(t,e){let n=Gl(t.path,e);for(let r of n)if(await t.isFile(r))return Ce.file(r).with({scheme:Ke.scheme})}async function Gq(t){let e=Gl(Zv,t);for(let n of e)if(await Cr(n))return n}var pc=`{${qq.EOL}}`;async function $i(t,e,n,r){e.scheme==="file"&&await os(Zv.dirname(e.fsPath)),await t.applyEdits(e,n,r)}function zf(t){let e=Zv.posix.dirname(t.path);return t.with({path:e})}var ew=require("string_decoder");function tw(t){if(!(t.extensions||t.settings||t.devPort!==void 0))return t;let e={...t},n=e.customizations||(e.customizations={}),r=n.vscode||(n.vscode={});return e.extensions&&(r.extensions=(r.extensions||[]).concat(e.extensions),delete e.extensions),e.settings&&(r.settings={...e.settings,...r.settings||{}},delete e.settings),e.devPort!==void 0&&r.devPort===void 0&&(r.devPort=e.devPort,delete e.devPort),e}function Sk(t,e,n){return Fx(t,e.configFilePath,n)}function Fx(t,e,n){let r=zf(e);return e.with({path:vs.posix.resolve(r.path,t.platform==="win32"&&e.scheme!==co.scheme?(vs.win32.isAbsolute(n)?"/":"")+n.replace(/\\/g,"/"):n)})}function Oo(t){return"dockerFile"in t||"build"in t&&"dockerfile"in t.build}function Ox(t){return t&&(Oo(t)||"image"in t||"dockerComposeFile"in t)}function Kf(t,e){return Sk(t,e,oue(e))}function oue(t){return"dockerFile"in t?t.dockerFile:t.build.dockerfile}async function zl(t,e,n,r){if(Array.isArray(e.dockerComposeFile)){if(e.dockerComposeFile.length)return e.dockerComposeFile.map(o=>_e(Sk(t,e,o),t.platform))}else if(typeof e.dockerComposeFile=="string")return[_e(Sk(t,e,e.dockerComposeFile),t.platform)];if(r){let o=n==null?void 0:n.COMPOSE_FILE;if(o)return o.split(t.path.delimiter).map(a=>t.path.resolve(r,a));try{let a=t.path.join(r,".env"),c=await t.readFile(a),l=/^COMPOSE_FILE=(.+)$/m.exec(c.toString()),u=l&&l[1].trim();if(u)return u.split(t.path.delimiter).map(f=>t.path.resolve(r,f))}catch(a){if(!(a&&(a.code==="ENOENT"||a.code==="EISDIR")))throw a}let i=[t.path.resolve(r,"docker-compose.yml")],s=t.path.resolve(r,"docker-compose.override.yml");return await t.isFile(s)&&i.push(s),i}return[]}async function ii(t,e){let{cliHost:n,postCreate:r,output:o}=t;o.write(`Running Dev Containers CLI:   ${e.join(" ")}
`);let i=await iue(t),s=nw(n),a;try{await sue({exec:n.exec,cwd:t.cwd||i.cwd,cmd:s.cmd,args:[...s.args,i.script,...e],env:await xk(t,s.cmd),stdin:r==null?void 0:r.onDidInput,output:o,stdoutData:c=>a=c,stderrData:c=>o.event(c)}),o.write(a?JSON.stringify(a,void 0,4):"(No dev container CLI standard out)",1),o.write("Dev Containers CLI completed",1)}catch(c){throw c.data=a,c}return a}async function iue(t){let{cliHost:e,extensionPath:n,output:r}=t,o=vs.join(n,"dist","spec-node","devContainersSpecCLI.js"),i=e.type==="local"?n:e.path.join(await e.homedir(),".vscode-remote-containers","dist",`dev-containers-cli-${t.package.version}`),s=e.type==="local"?o:e.path.join(i,"dist","spec-node","devContainersSpecCLI.js");if(["wsl","remote"].indexOf(e.type)!==-1){let a="Checking for Dev Containers CLI",c=r.start(a),l=await e.isFile(s);if(r.stop(a,c),!l){let u="Copying Dev Containers CLI",f=r.start(u),m=`${i}-${Jq.randomUUID()}`,d=e.path.join(m,"dist","spec-node","devContainersSpecCLI.js");await e.mkdirp(e.path.dirname(d)),await Promise.all([zq(vs.join(n,"package.json"),e,e.path.join(m,"package.json")),zq(o,e,d),rw(vs.join(n,"scripts"),e,e.path.join(m,"scripts"),r)]),await e.rename(m,i),r.stop(u,f)}}return{cwd:i,script:s}}function nw(t){if(t.type==="local")return Al?{cmd:process.argv[0],args:[]}:{cmd:process.argv[0],args:[]};if(t.nodeExecutable)return{cmd:t.nodeExecutable,args:[]};throw new Error("Node executable required")}async function sue(t){let{exec:e,cmd:n,args:r,cwd:o,env:i,stdin:s,output:a,stdoutData:c,stderrData:l}=t,u=await e({cmd:n,args:r,cwd:o,env:i,output:a});return new Promise((f,m)=>{let d=new ew.StringDecoder,p="";u.stdout.on("data",C=>{p+=d.write(C);let w=p.split(`
`);p=w.pop();for(let y of w)if(y.trim())try{c(JSON.parse(y))}catch{a.write(y)}}),u.stdout.on("error",C=>{if((C==null?void 0:C.code)!=="ENOTCONN")throw C});let g=new ew.StringDecoder,h="";u.stderr.on("data",C=>{h+=g.write(C);let w=h.split(`
`);h=w.pop();for(let y of w)if(y.trim())try{l(JSON.parse(y))}catch{a.write(y)}}),u.stderr.on("error",C=>{if((C==null?void 0:C.code)!=="ENOTCONN")throw C});let v=[];u.exit.then(({code:C})=>{try{v.forEach(w=>w.dispose()),C?(a.write(`Exit code ${C}`),m({message:`Command failed: ${n} ${(r||[]).join(" ")}`,code:C})):f()}catch(w){m(w)}},m),typeof s=="function"&&v.push(s(C=>u.stdin.write(C)))})}async function xk(t,e){let{cliHost:n,env:r,appRoot:o}=t,i=await n.locateCertificatesFile();return{...r,...n.type==="local"?o?{NODE_PATH:`${n.path.join(o,"node_modules.asar")}${vs.delimiter}${n.path.join(o,"node_modules")}`}:void 0:n.type==="container"?void 0:{NODE_PATH:n.path.join(n.path.dirname(e),"node_modules")},...i?{NODE_EXTRA_CA_CERTS:i}:{},...Al?{TS_NODE_PROJECT:void 0}:{}}}async function zq(t,e,n){await e.writeFile(n,await at(t))}async function rw(t,e,n,r){await e.mkdirp(n);let o=Xq.c({cwd:t,filter:l=>(console.log(l),!0)},["."]),i=new Promise((l,u)=>{o.on("error",u),o.on("finish",l)}),s=await e.exec({cmd:"tar",args:["--no-same-owner","-x","-f","-"],cwd:n,output:r}),a=new ew.StringDecoder;s.stdout.on("data",l=>{r.write(a.write(l))});let c=new ew.StringDecoder;s.stderr.on("data",l=>{r.write(ot(c.write(l)))}),o.pipe(s.stdin),await Promise.all([s.exit,i])}async function _r(){return vs.join(Kq.tmpdir(),process.platform==="linux"?`vsch-${await cx()}`:"vsch")}function aue(){return{contentHashes:{}}}async function Mx(t,e,n,r){let o=t.getConfigurationState();if(o){let i=o.contentHashes,s=Object.keys(i),c=(await _k(e,n,r)).contentHashes,l=Object.keys(c),u=new Set(l);s.forEach(d=>u.delete(d));let f=new Set(s);l.forEach(d=>f.delete(d));let m=[];for(let d of s)d in c&&c[d]!==i[d]&&m.push(d);if(u.size||f.size||m.length){let d=await _k(e,n,r);(async()=>{await t.containerOutdated([...u,...f,...m].sort())==="ignore"&&await t.updateConfigurationState(d)})().catch(console.error)}}else await Qq(t,e,n,r)}async function $x(t,e,n,r,o){let i="Updating configuration state",s=o.start(i);await Qq(t,e,n,r),o.stop(i,s)}async function Qq(t,e,n,r){let o=await _k(e,n,r);await t.updateConfigurationState(o)}async function _k(t,e,n){let r=aue();Ux(r,ow.posix.basename(n.configFilePath.path),JSON.stringify({...n,forwardPorts:void 0,configFilePath:void 0,postStartCommand:void 0,postAttachCommand:void 0}));let o=zf(n.configFilePath).path;if(Oo(n)){let i=Kf(t,n),s=await e.readDocument(i);s!==void 0&&Ux(r,ow.posix.relative(o,i.path),s)}if("dockerComposeFile"in n){let i=await zl(t,n,t.env,t.cwd),s=await Promise.all(i.map(async a=>{let c=Ce.file(a).with({scheme:Ke.scheme});return{uri:c,content:await e.readDocument(c)}}));for(let{uri:a,content:c}of s)c!==void 0&&Ux(r,ow.posix.relative(o,a.path),c);for(let a=s.length-1;a>=0;a--){let{uri:c,content:l}=s[a];if(l){let u=cue(l),f=u&&u.services,m=f&&f[n.service],d=m&&m.build,p=d&&(typeof d=="string"?d:d.context);if(p){let g=Fx(t,c,p),h=e3(g,d.dockerfile||"Dockerfile"),v=await e.readDocument(h);v!==void 0&&Ux(r,ow.posix.relative(o,h.path),v)}if(m&&(m.image||m.build))break}}}return r}function cue(t){try{return Xv(t)}catch{return{}}}function Ux(t,e,n){let r=Zq.createHash("sha256").update(n).digest("hex");t.contentHashes[e]=r}var Es=Y(require("path")),ia=Y(require("crypto"));var eu=Y(Mr());var Jr=Y(require("path")),Lk=Y(require("crypto"));var Xf=Y(Mr());var i3=Y(require("net")),Tk=Y(require("path"));var Dk=Y(require("path")),Pk=Y(require("http")),t3=Y(require("os")),n3=Y(require("crypto"));async function r3(t,e){let n=await bk(t),r=new Ik(n,e);return r.listen(),r}var Ik=class{constructor(e,n){this.ipcHandlePath=e;this.server=Pk.createServer((r,o)=>{Promise.resolve(n(r,o)).catch(i=>console.error(i&&i.message||i))}),this.server.on("error",r=>console.error(r))}server;listen(){this.server.listen(this.ipcHandlePath)}dispose(){this.server.close()}};async function o3(t){return new Promise((e,n)=>{let r=[];t.setEncoding("utf8"),t.on("data",o=>r.push(o)),t.on("error",o=>n(o)),t.on("end",()=>{let o=JSON.parse(r.join(""));e(o)})})}async function bk(t){let e=n3.randomUUID(),n=`${t}-${e}`;return process.platform==="win32"?`\\\\.\\pipe\\${n}-sock`:process.env.XDG_RUNTIME_DIR?Dk.join(process.env.XDG_RUNTIME_DIR,`${n}.sock`):Dk.join(t3.tmpdir(),`${n}.sock`)}var Hx=class{messages=[];dequeueRequest;push(e){this.messages.push(e),this.dequeueRequest&&(this.dequeueRequest.resolve(this.messages),this.dequeueRequest=void 0,this.messages=[])}async dequeue(e){if(this.messages.length){let n=this.messages;return this.messages=[],n}return this.dequeueRequest&&this.dequeueRequest.resolve([]),new Promise((n,r)=>{this.dequeueRequest={resolve:n,reject:r},typeof e=="number"&&setTimeout(r,e)})}};async function Kl(t,e,n){if(process.env.SSH_ASKPASS)return{};let r=await bk("ssh-askpass");return await new Promise((o,i)=>{i3.createServer(s=>{s.setEncoding("utf8");let a="";s.on("data",async c=>{if(a+=c,a.endsWith(`
`))try{n.write(`SSH askpass request: ${a}`,1);let l=await e(JSON.parse(a));s.write(l,u=>{u&&console.error(u)}),s.end()}catch(l){console.error(l)}}),s.on("error",c=>console.error(c))}).on("error",s=>{i(s)}).listen(r,()=>{o()})}),{DISPLAY:process.env.DISPLAY||"1",ELECTRON_RUN_AS_NODE:"1",SSH_ASKPASS:Tk.join(t,"scripts",`ssh-askpass.${process.platform==="win32"?"bat":"sh"}`),SSH_ASKPASS_REQUIRE:"force",VSCODE_SSH_ASKPASS_NODE:process.execPath,VSCODE_SSH_ASKPASS_MAIN:Tk.join(t,"dist","common","sshAskpass.js"),VSCODE_SSH_ASKPASS_HANDLE:r}}var lue=0;function fr(t){return t.VSCODE_SSH_ASKPASS_HANDLE?{VSCODE_SSH_ASKPASS_COUNTER:String(++lue)}:{}}async function si(t,e){return(await ws(t,[e]))[0]}async function ws(t,e){let n=await Wx(t,"container",e);for(let r of n){r.Ports=[];let o=r.NetworkSettings.Ports;for(let i in o){let[s,a]=i.split("/");for(let c of o[i]||[]){let{HostIp:l,HostPort:u}=c;r.Ports.push({IP:l,PrivatePort:parseInt(s),PublicPort:parseInt(u),Type:a})}}}return n}async function s3(t,e){return(await Wx(t,"image",[e]))[0]}async function Bx(t,e){return(await Wx(t,"volume",[e]))[0]}async function Jf(t,e){return Wx(t,"volume",e)}async function Wx(t,e,n){if(!n.length)return[];let r=Bi(t),o=await X({...r,args:(r.args||[]).concat(["inspect","--type",e,...n])});try{return JSON.parse(o.stdout.toString())}catch(i){throw console.error({stdout:o.stdout.toString(),stderr:o.stderr.toString()}),i}}async function Jl(t,e=!1,n=[]){let r=[];e&&r.push("-a");for(let i of n)r.push("--filter",`label=${i}`);return(await et(t,"ps","-q",...r)).stdout.toString().split(/\r?\n/).filter(i=>!!i)}async function Uo(t,e=[]){let n=[];for(let o of e)n.push("--filter",`label=${o}`);return(await et(t,"volume","ls","-q",...n)).stdout.toString().split(/\r?\n/).filter(o=>!!o)}async function Xl(t,e=[]){return(await et(t,"volume","ls","-q","-f","dangling=true",...e.map(r=>["-f",`label=${r}`]).flat())).stdout.toString().split(/\r?\n/).filter(r=>!!r)}async function Fp(t,e,n){let r=[];for(let o of n||[])r.push("--label",o);await et(t,"volume","create",...r,e)}async function Hi(t,e){var o;let n,r;try{for(let i=0,s=7;i<s;i++)try{return await et(t,"rm","-f",e)}catch(a){let c=((o=a==null?void 0:a.stderr)==null?void 0:o.toString().toLowerCase())||"";if(i===s-1||!c.includes("already in progress"))throw a;r||(n=await jx(t,{container:[e],event:["destroy"]}),r=new Promise(l=>{n.stdout.on("data",()=>{l(),n.terminate(),r=new Promise(()=>{})})})),await Promise.race([r,Bt(1e3)])}}finally{n&&n.terminate()}throw new Error("Unreachable")}async function jx(t,e){let{exec:n,cmd:r,args:o,env:i,output:s}=Bi(t),a=[];for(let m in e)for(let d of e[m])a.push("--filter",`${m}=${d}`);let c="isPodman"in t&&t.isPodman?"json":"{{json .}}",l=(o||[]).concat(["events","--format",c,...a]),u=await n({cmd:r,args:l,env:i,output:s}),f=[];return u.stderr.on("data",m=>f.push(m)),u.exit.then(({code:m,signal:d})=>{f.length&&s.write(ot(Buffer.concat(f).toString())),(m||d&&d!=="SIGKILL")&&s.write(ot(`Docker events terminated (code: ${m}, signal: ${d}).`))},m=>{s.write(ot(m&&(m.stack||m.message)))}),u}async function et(t,...e){let n=Bi(t);return X({...n,args:(n.args||[]).concat(e)})}async function Rk(t){var e;try{let{stdout:n}=await et(t,"context","ls","--format","{{json .}}"),r=`[${n.toString().trim().split(/\r?\n/).join(",")}]`;return(e=JSON.parse(r).find(s=>s.Current))==null?void 0:e.Name}catch{return}}async function a3(t){try{let{stdout:e}=await et(t,"-v");return e.toString().toLowerCase().indexOf("podman")!==-1}catch{return!1}}async function c3(t,...e){let n=f3(t);return Fi({...n,args:(n.args||[]).concat(e)})}async function iw(t,...e){let n=Bi(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return X({...n,args:(n.args||[]).concat(e)})}function ys(t,e,n){return async function(r){let{exec:o,cmd:i,args:s,env:a}=Bi(t),{argsPrefix:c,args:l}=u3(e,n,r,!1);return o({cmd:i,args:(s||[]).concat(l),env:a,output:l3(r.output,i,c)})}}async function na(t,e,n,r){if(!await r("node-pty"))throw new Error("Missing node-pty");return async function(i){let{ptyExec:s,cmd:a,args:c,env:l}=f3(t),{argsPrefix:u,args:f}=u3(e,n,i,s.isTTY!==!1);return s({cmd:a,args:(c||[]).concat(f),env:l,output:l3(i.output,a,u)})}}function l3(t,e,n){return uue(t,`Run: ${e} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,"Run in container:")}function uue(t,e,n){let r=new RegExp(Wf(e),"g");return sn({...t,get dimensions(){return t.dimensions},event:i=>t.event("text"in i?{...i,text:i.text.replace(r,n)}:i)})}function u3(t,e,n,r){let{env:o,cwd:i,cmd:s,args:a}=n,c=["exec","-i"];r&&c.push("-t"),e&&c.push("-u",e),o&&Object.keys(o).forEach(u=>c.push("-e",`${u}=${o[u]}`)),i&&c.push("-w",i),c.push(t);let l=c.slice();return c.push(s),a&&c.push(...a),{argsPrefix:l,args:c}}function Bi(t,e){return"dockerEnv"in t?{exec:t.common.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.dockerEnv,...fr(t.dockerEnv)},output:t.common.output}:"cliHost"in t?{exec:t.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.env,...fr(t.env)},output:t.output}:{...t,env:{...t.env,...fr(t.env)}}}function f3(t,e){return"dockerEnv"in t?{ptyExec:t.common.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.dockerEnv,...fr(t.dockerEnv)},output:t.common.output}:"cliHost"in t?{ptyExec:t.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.env,...fr(t.env)},output:t.output}:{...t,env:{...t.env,...fr(t.env)}}}var d3=Y(Mr()),fue="com.docker.compose.project";async function m3(t,e,n,r,o,i,s,a,c,l,u,f,m,d){var v,C;let{common:p}=t,{cliHost:g}=e,h;try{let w=await zl(g,n,g.env,g.cwd),y=g.path.join(g.cwd,".env"),S=Array.isArray(n.dockerComposeFile)&&n.dockerComposeFile.length===0&&await g.isFile(y)?y:void 0,D=!c,_=r.remoteUser,A=due(n);h=await Up(t,s.Id,A,_),u&&c&&h.user!=="root"&&(h.launchRootShellServer?await bx(h,h.launchRootShellServer,A,n.configFilePath.path):p.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."));let U=await Yx(p,c,s,A,h),k=ur(g,h.shellServer);D||await $x(t.configurationTracking,g,k,n,p.output);let E=r.shutdownAction;E==="stopContainer"&&(E="stopCompose");let x={cwd:o,dockerCLI:t.dockerCLI,dockerComposeCLI:await t.dockerComposeCLI(),env:p.env,containerId:s.Id,user:h.user,sessionId:p.sessionId,shutdownAction:E,projectName:sw(s),composeFiles:w,envFile:S,buildContainerRunArgs:l,service:n.service,runServices:n.runServices,logLevel:p.getLogLevel(),delay:1e4},{shutdownArgs:b,doneWithDocuments:I}=await Vx(t,g,k,"dockerCompose",x,D?n:void 0);p.backgroundTasks.push(I);let T=((C=(((v=r.customizations)==null?void 0:v.vscode)||[]).slice().reverse().find(z=>typeof z.devPort=="number"))==null?void 0:C.devPort)||jl,{hostOrContainerPort:R,hostPortServer:L,connectionToken:N,remoteEnv:B,serverDownloaded:W}=await Vl(p,h,n,r,T,Mp(t,e,h,i,f,s.Id,a,m,d),U);return b.hostPortServer=L,{params:p,properties:h,config:n,resolvedAuthority:{host:hc,port:R,connectionToken:N,extensionHostEnv:B},tunnelInformation:p.isLocalContainer?Op(s):{},dockerParams:t,dockerContainerId:s.Id,serverDownloaded:W}}catch(w){let y=w instanceof pe?w:new pe({description:d3.t("An error occurred setting up the container."),originalError:w});throw s&&(y.manageContainer=!0,y.params=t.common,y.containerId=s.Id,y.dockerParams=t),h&&(y.containerProperties=h),y.config=n,y}}function due(t){return t.workspaceFolder||"/"}function sw(t){let e=(t.Config.Labels||{})[fue];return e||void 0}function Cs(t,e,n){let r;return()=>r||(r=(async()=>{let o=!0,i;try{i=(await iw({...t,cmd:e},"compose","version","--short")).stdout}catch{i=(await iw({...t,cmd:n},"version","--short")).stdout,o=!1}let s=i.toString().trim();return t.output.write(`Docker Compose version: ${s}`),{version:s,cmd:o?e:n,args:o?["compose"]:[]}})())}var aw=Y(Mr());var qx=Y(WC()),p3=Y(require("url"));function Gx(t,e){return new Promise((n,r)=>{let o=new p3.URL(t.url),i={hostname:o.hostname,port:o.port,path:o.pathname+o.search,method:t.type,headers:t.headers},s=(o.protocol==="https:"?qx.https:qx.http).request(i,a=>{if(a.statusCode<200||a.statusCode>299)r(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`)),e&&e.write(`HTTP request failed with status code ${a.statusCode}: : ${a.statusMessage}`,5);else{a.on("error",r);let c=[];a.on("data",l=>c.push(l)),a.on("end",()=>n(Buffer.concat(c)))}});s.on("error",r),t.data&&s.write(t.data),s.end()})}async function $p(t,e,n,r){var c;let o=await hue(e,t.output),i=Object.keys(n.features||{}).map(l=>{let u=mue(o,l);return u?{configFeatureId:l,disallowedFeatureEntry:u}:void 0}).filter(Boolean);if(!i.length)return;let s=!1;if(r){let l=await Zl(t,r);((c=l==null?void 0:l.State)==null?void 0:c.Status)==="running"&&(await et(t,"stop","-t","0",l.Id),s=!0)}let a=i[0];throw kk(a.configFeatureId,a.disallowedFeatureEntry.documentationURL,s)}function kk(t,e,n){return new pe({description:n?aw.t("Cannot use the '{0}' feature since it was reported to be problematic. The existing dev container was stopped.",t):aw.t("Cannot use the '{0}' feature since it was reported to be problematic.",t),detail:aw.t("Please remove this feature from your devcontainer.json and rebuild the dev container before continuing."),data:{learnMoreUrl:e,reload:!1}})}function mue(t,e){return t.disallowedFeatures.find(n=>e.startsWith(n.featureIdPrefix)&&(e.length===n.featureIdPrefix.length||"/:@".indexOf(e[n.featureIdPrefix.length])!==-1))}var h3="devcontainers.controlManifest",pue=300*1e3;async function hue(t,e){let n=t.get(h3);return n&&Date.parse(n.timestamp)+pue>Date.now()?n.manifest:gue(t,n==null?void 0:n.manifest,e)}async function gue(t,e,n){let r;try{r=await vue()}catch(o){n.write(aw.t("Failed to fetch control manifest: {0}",o.message)),r=e||{disallowedFeatures:[]}}return t.update(h3,{timestamp:new Date().toISOString(),manifest:r}),r}async function vue(){let t=await Gx({type:"GET",url:"https://containers.dev/static/devcontainer-control-manifest.json",headers:{"user-agent":"devcontainers-vscode",accept:"application/json"}}),e=Me(t.toString())||{};return Array.isArray(e.disallowedFeatures)?e.disallowedFeatures=e.disallowedFeatures.filter(n=>typeof n.featureIdPrefix=="string"):e.disallowedFeatures=[],e}async function Ak(t,e,n,r){if(e&&!/\/\.?devcontainer\.json$/.test(e.path))throw new Error(`Filename must be devcontainer.json or .devcontainer.json (${_e(e,t.common.cliHost.platform)}).`);let o=t.parsedAuthority;if(!o||un(o))return wue(t,o,e,n,r);if(lo(o))return o.inspectVolume?Nk(t,o):yue(t,o,e);if(ed(o))return o.inspectVolume?Nk(t,o):Cue(t,o,e);if(fw(o))return Nk(t,o);throw new Error(`Unexpected authority: ${JSON.stringify(o)}`)}async function wue(t,e,n,r,o){let{common:i,dockerCLI:s,dockerComposeCLI:a,dockerComposePath:c}=t,{cliHost:l,env:u,output:f}=i,m=l.cwd,d=t.originalCwd||m,p=e&&It(l.path,Iv(e.hostPath)?l.path.join(m,Jr.basename(e.hostPath)):m);e!=null&&e.configFile&&!n&&(n=e.configFile,l.type==="wsl"&&n.scheme==="file"&&(n=Ce.from({scheme:Ke.scheme,path:await I3(n,l)})));let g={cliHost:l,dockerCLI:s,dockerComposeCLI:a,dockerComposePath:c,env:u,output:f},h=o?void 0:Fk(d),v=o||[`${uw}=${d}`,`${Zx}=${i.product.quality}`];return Ok(t,g,h,v,d,m,n,r,void 0,p,e==null?void 0:e.settings,[],"on")}function Fk(t,e){let n=[`${lw}=${t}`];if(e){let{buildCLIHost:r,configFile:o}=e,i;o.scheme===Ke.scheme||o.scheme==="file"&&r.type==="local"?i=_e(o,r.platform):i=o.toString(),n.push(`${Zf}=${i}`)}return n}async function yue(t,e,n){let{repositoryPath:r,volumeName:o,folder:i}=e,s=ci(r);o=await S3(t,s,o);let{labels:a,remoteWorkspaceFolder:c}=x3(s,r,i,o),l=[...a],u=[...a,`${Zx}=${t.common.product.quality}`];e.configFile&&!n&&(n=e.configFile);let{containerId:f,shellServer:m,remoteContainersEnv:d,config:p,preInstalledExtensions:g}=await s.cloneAndInitializeRepository(t,e,s,o,n),h=i?s.workspaceFolder(i):s.fullRepositoryName,v=$k(s,o,i,t.dockerSocketPath);return g3(t,e,n,p,g,f,m,d,o,h,c,l,u,v)}async function Cue(t,e,n){let{common:r}=t,{extensionPath:o,appRoot:i,loadNativeModule:s,output:a}=r,{volumeName:c,folder:l}=e,u=[`${Jx}=${c}`,`${C3}=${l}`],f=u;await Bk(t);let m=Hk(c,Qf(),t.dockerSocketPath),{stdout:d}=await et(t,...m),p=d.toString().trim(),g=ys(t,p,"root"),h=await Wt(g,a),v=[],C=cw(l),w=C,y=await na(t,p,"root",s),S=so("container",C,{},g,y,()=>{throw new Error("not implemented")},"node",a),{configuration:D}=await zx({cliHost:S,dockerPath:"docker",dockerComposePath:"docker-compose",env:{},extensionPath:o,appRoot:i,package:r.package,output:a},C,n,t.common.getLogLevel(),u);return g3(t,e,n,D,v,p,h,{},c,C,w,u,f,m)}async function g3(t,e,n,r,o,i,s,a,c,l,u,f,m,d){var A,U,k;let p=It(Jr.posix,l),g=[`type=volume,source=${c},target=${Jr.posix.dirname(p.rootFolderPath)},external=true`],h=await _3(t,i,a,u),v={},{HOME:C,USERPROFILE:w}=t.common.env;C!=null&&C.startsWith("/")&&(v.HOME=C,await s.exec(`test -e "${C}" || (mkdir -p "$(dirname "${C}")" && ln -s ~ "${C}")`)),w!==void 0&&(v.USERPROFILE=w);let y=h.cliHost,S,D,_=Oo(r)||"image"in r;if(_||"dockerComposeFile"in r&&r.workspaceFolder||o.length){let E=o.length?{...r.customizations,vscode:{...(A=r.customizations)==null?void 0:A.vscode,extensions:[...((k=(U=r.customizations)==null?void 0:U.vscode)==null?void 0:k.extensions)||[],...o]}}:r.customizations;D=_?T=>({...T,workspaceFolder:void 0,workspaceMount:"",customizations:E}):T=>({...T,workspaceFolder:p.rootFolderPath,customizations:E});let x=y.path.join(await y.tmpdir(),`devcontainer-${Lk.randomUUID()}.json`),b=`EOF-${x}`,I=`${x}_${Date.now()}`;await s.exec(`cat <<'${b}' >${I}
${JSON.stringify({...D(r),configFilePath:void 0})}
${b}
mv ${I} ${x}`),S=Ce.from({scheme:Ke.scheme,path:x})}try{return await Ok(t,h,f,m,t.common.cliHost.cwd,y.cwd,n,S,D,p,e.settings,g,"off",d,!0,void 0,v)}finally{Promise.all(t.common.backgroundTasks.filter(E=>typeof E!="function").map(E=>E.catch(()=>{}))).then(()=>Hi(t,i))}}async function Nk(t,e){let{common:n,dockerCLI:r,dockerComposeCLI:o,dockerComposePath:i}=t,{cliHost:s,env:a,output:c}=n,{volumeName:l}=e,u,f,m=fw(e);m?(u=Xx,f="Inspect Volume"):(u=ci(e.repositoryPath).volumeDestination,f="Recovery Container");let d=[`${Hp}=${l}`],p=[`${Hp}=${l}`,`${Zx}=${n.product.quality}`],g=await E3(t),h=[`type=volume,source=${l},target=${u},external=true`],v={cliHost:s,dockerCLI:r,dockerComposeCLI:o,dockerComposePath:i,env:a,output:c},C=It(s.path,g);return Ok(t,v,d,p,g,g,void 0,void 0,void 0,C,e.settings,h,"never",void 0,!m,f)}async function Ok(t,e,n,r,o,i,s,a,c,l,u,f,m,d,p,g,h){var pt,nt,Dt,yt;let{common:v,userRepositoryConfigurationPaths:C}=t,{output:w,extensionPath:y,appRoot:S,postCreate:D,localWaylandSocket:_}=v,{cliHost:A}=e,U=[...f];if(t.cacheMount==="bind"&&(await os(v.localCacheFolder),U.push(`type=bind,source=${v.localCacheFolder},target=/vscode`)),t.cacheMount==="volume"){let j="vscode";(await Uo(e)).indexOf(j)===-1&&await Fp(e,j),U.push("type=volume,source=vscode,target=/vscode,external=true")}if(_){let j=await $V(void 0);U.push(`type=bind,source=${_},target=${j}`)}let k=s?{uri:s,type:Eue(A,l,s),fileHost:A}:l?await w3(A,l,C,t.common.loadNativeModule,!a,w):void 0,E=k==null?void 0:k.uri;if((E==null?void 0:E.scheme)==="file"&&A.type!=="local"){let j=Jr.dirname(E.fsPath),oe=Jr.basename(E.fsPath),xe=oe===".devcontainer.json"?j:Jr.dirname(j),le=A.path.join(await A.tmpdir(),`devcontainer-config-${Lk.randomUUID()}`);await rw(xe,A,le,w),E=Ce.from({scheme:Ke.scheme,path:A.path.join(le,...oe===".devcontainer.json"?[oe]:[Jr.basename(j),oe])})}typeof t.removeOnStartup=="string"&&await ai(t,t.removeOnStartup)&&await Hi(t,t.removeOnStartup);let x=await Zl(e,r);x&&t.removeOnStartup===!0&&n&&(await Hi(t,x.Id),x=void 0);let b=!!x||!n,I=b?r:await Sue(t,e,k,n),T=!1,R=t.removeOnStartup!==!0?x||n&&await Zl(e,n):void 0;((pt=R==null?void 0:R.State)==null?void 0:pt.Status)==="running"&&(T=!0,et({...Bi(t),print:"continuous"},"exec","-i","-u","root",R.Id,"/bin/sh","-c",`echo "Container already running. Keep-alive process started." ; export VSCODE_REMOTE_CONTAINERS_SESSION=${t.common.sessionId} ; /bin/sh`).catch(()=>{T=!1,w.write("Keep-alive process ended.")}));let L="",N=v.postCreate.output,B=sn({...N,get dimensions(){return N.dimensions},event:j=>{(j.type==="text"||j.type==="raw")&&(L+=j.text),N.event(j)}}),W={...h,...e.env,...fr(e.env)},z={cliHost:A,dockerPath:e.dockerCLI,dockerComposePath:e.dockerComposePath,env:W,extensionPath:y,appRoot:S,package:v.package,postCreate:D,output:B},V=v.postCreate.output.dimensions||v.output.dimensions,q=v.additionalFeaturesToInstall,ce;try{ce=await ii(z,["up",...e.cliHost.type==="local"&&v.persistedFolder?["--user-data-folder",v.persistedFolder]:[],...e.dockerCLI!=="docker"?["--docker-path",e.dockerCLI]:[],...e.dockerComposePath!=="docker-compose"?["--docker-compose-path",e.dockerComposePath]:[],...v.containerSessionDataFolder?["--container-session-data-folder",v.containerSessionDataFolder]:[],...b?["--container-data-folder",Mi(t.common.product.serverDataFolderName)]:[],...b?["--container-system-data-folder",Px(t.common.product.serverDataFolderName)]:[],"--workspace-folder",i,...t.workspaceMountConsistencyDefault?["--workspace-mount-consistency",t.workspaceMountConsistencyDefault]:[],"--gpu-availability",t.gpuAvailability,...[].concat(...I.map(j=>["--id-label",j])),"--log-level",ro(v.getLogLevel()),"--log-format","json",...E?["--config",_e(E,A.platform)]:[],...a?["--override-config",_e(a,A.platform)]:[],"--default-user-env-probe",v.defaultUserEnvProbe,...t.buildNoCache?["--build-no-cache"]:[],...t.removeOnStartup===!0?["--remove-existing-container"]:[],...t.expectExistingContainer||!t.common.hostConfig.canRebuildContainer?["--expect-existing-container"]:[],...t.useExperimentalLockfile?["--experimental-lockfile"]:[],...[].concat(...U.map(j=>["--mount",j])),"--skip-post-create","--update-remote-user-uid-default",m,"--mount-workspace-git-root",...V?["--terminal-columns",String(V.columns),"--terminal-rows",String(V.rows)]:[],...Object.keys(q).length>0?["--additional-features",JSON.stringify(q)]:[],"--include-configuration","--include-merged-configuration"])}catch(j){let oe;if((nt=j==null?void 0:j.data)!=null&&nt.disallowedFeatureId){let{disallowedFeatureId:xe,didStopContainer:le,learnMoreUrl:De}=j.data;oe=kk(xe,De,le),oe.originalError=j}else oe=j instanceof pe?j:new pe({description:Xf.t("An error occurred setting up the container."),originalError:j});throw j&&!(j instanceof pe)&&(j.cmdOutput=L),(Dt=j==null?void 0:j.data)!=null&&Dt.containerId&&(oe.manageContainer=!0,oe.params=t.common,oe.containerId=(yt=j==null?void 0:j.data)==null?void 0:yt.containerId,oe.dockerParams=t),oe.step="devContainersCLIUP",oe}if((ce==null?void 0:ce.outcome)!=="success")throw new pe({description:Xf.t("devcontainer command failed: {0}",JSON.stringify(ce)),step:"devContainersCLIUP"});ce.configuration.configFilePath=ce.mergedConfiguration.configFilePath=ce.configuration.configFilePath&&Ce.revive(ce.configuration.configFilePath).with({scheme:A.type==="local"?"file":Ke.scheme});let Be=await ai(t,ce.containerId);if(!Be)return Wk(v.output,"Dev container not found.");T||(T=!0,et({...Bi(t),print:"continuous"},"exec","-i","-u","root",Be.Id,"/bin/sh","-c",`echo "New container started. Keep-alive process started." ; export VSCODE_REMOTE_CONTAINERS_SESSION=${t.common.sessionId} ; /bin/sh`).catch(()=>{T=!1,w.write("Keep-alive process ended.")}));let{configuration:mt,mergedConfiguration:$t,remoteWorkspaceFolder:xo}=ce,Pn=Bp(v.cliHost.authority,u),vn=g||(mt.name?Xf.t("Dev Container: {0}{1}",mt.name,Pn):Xf.t("Dev Container{0}",Pn));v.setWorkspaceName(vn);let Xt;try{if(Oo(mt)||"image"in mt)Xt=await D3(t,e,mt,$t,xo,o,i,Be,b,!R,p,I,E,a);else if("dockerComposeFile"in mt)Xt=await m3(t,e,mt,$t,o,i,Be,b,!R,d,p,I,E,a);else throw new pe({description:Xf.t('Dev container config ({0}) is missing one of "image", "dockerFile" or "dockerComposeFile" properties.',mt.configFilePath.toString())})}catch(j){let oe=j instanceof pe?j:new pe({description:Xf.t("An error occurred setting up the container."),originalError:j});throw oe.step||(oe.step="setupDevContainer"),oe}if(xue(t,z,mt,a,c,Be,d,i,E,I,Xt.properties),Xt.configLocationType=k==null?void 0:k.type,(k==null?void 0:k.type)==="workspace")if(A.type==="container")Xt.configWorkspaceURI=k.uri.with({scheme:co.scheme,authority:v.authority});else{let j=_e(k.uri,A.platform),oe=Be.Mounts.find(xe=>lf(A.path,xe.Source,j));if(oe){let xe=A.path.relative(oe.Source,j),le=A.platform==="win32"?xe.replace(/\\/g,"/"):xe;Xt.configWorkspaceURI=Ce.from({scheme:co.scheme,authority:v.authority,path:Jr.posix.join(oe.Destination,le)})}}return Xt}function Eue(t,e,n){return e&&(n.scheme===Ke.scheme||n.scheme==="file"&&t.type==="local")&&lf(Jr,e.rootFolderPath,_e(n,t.platform))?"workspace":n.scheme==="file"?"repositoryConfig":"unknown"}async function Sue(t,e,n,r){var s;let{cliHost:o}=e,i;if(n){let{uri:a}=n,c;a.scheme===Ke.scheme||a.scheme==="file"&&o.type==="local"?c=_e(a,o.platform):c=a.toString();let l=[...r,`${Zf}=${c}`];if(await Zl(e,l))i=l;else{let u=await Zl(e,r);u&&!((s=u.Config.Labels)!=null&&s[Zf])?t.removeOnStartup===!0?(await Hi(e,u.Id),i=l):i=r:i=l}}else i=r;return i}function xue(t,e,n,r,o,i,s,a,c,l,u){let{common:f}=t,{output:m,extensionPath:d,appRoot:p}=f,{cliHost:g}=e;if(f.hostConfig.canRebuildContainer&&t.watch){let h,v=n.configFilePath;if(v.scheme===Ke.scheme)if(g.type==="local")h=v.with({scheme:"file"});else if(g.type==="container")h=v.with({scheme:co.scheme,authority:f.authority});else{let C=_e(v,g.platform),w=i.Mounts.find(y=>lf(g.path,y.Source,C));if(w){let y=g.path.relative(w.Source,C),S=g.platform==="win32"?y.replace(/\\/g,"/"):y;h=Ce.from({scheme:co.scheme,authority:f.authority,path:Jr.posix.join(w.Destination,S)})}}else(v.scheme==="file"||v.scheme===co.scheme)&&(h=v);if(h){let D=function(){C||(y=w().finally(async()=>{await Bt(g.type==="container"?5e3:1e3),y=void 0,S&&(S=!1,D())}))},C=!1;async function w(){let A=e,U;try{if(g.type==="container"){let{stdout:x}=await et(t,...s);U=x.toString().trim();let b=ys(t,U,"root");if(r&&o){let R=r.path,L=`EOF-${R}`,N=`${R}_${Date.now()}`,B=await Wt(b,m),W=Me((await B.exec(`cat '${v.path}'`)).stdout);await B.exec(`cat <<'${L}' >${N}
${JSON.stringify({...o(W),configFilePath:void 0})}
${L}
mv ${N} ${R}`)}let I=await na(t,U,"root",f.loadNativeModule);A={cliHost:so("container",a,{},b,I,()=>{throw new Error("not implemented")},"node",m),dockerPath:"docker",dockerComposePath:"docker-compose",env:{},extensionPath:d,appRoot:p,package:f.package,output:m}}let k=await zx(A,a,c,f.getLogLevel(),l,i.Id,r),E=ur(A.cliHost,u.shellServer);await Mx({...t.configurationTracking,containerOutdated:async x=>{C=!0;let b=await t.configurationTracking.containerOutdated(x);return b==="ignore"&&(C=!1),b}},A.cliHost,E,k.configuration)}finally{U&&await Hi(t,U)}}let y,S=!1,_=t.watch(h,()=>{y?S=!0:D()});t.common.shutdowns.push(async()=>(await _).dispose())}}}async function Zl(t,e){let n=await Jl(t,!0,e);return(await ws(t,n)).filter(o=>o.State.Status!=="removing")[0]}async function zx(t,e,n,r,o,i,s){let{cliHost:a,output:c}=t,l=await ii(t,["read-configuration",...t.dockerPath!=="docker"?["--docker-path",t.dockerPath]:[],...t.dockerComposePath!=="docker-compose"?["--docker-compose-path",t.dockerComposePath]:[],"--workspace-folder",e,...(o||[]).map(u=>["--id-label",u]).flat(),...i?["--container-id",i]:[],"--log-level",ro(r),"--log-format","json",...n?["--config",_e(n,a.platform)]:[],...s?["--override-config",_e(s,a.platform)]:[],"--mount-workspace-git-root",...c.dimensions?["--terminal-columns",String(c.dimensions.columns),"--terminal-rows",String(c.dimensions.rows)]:[]]);return l.configuration.configFilePath=Ce.revive(l.configuration.configFilePath).with({scheme:a.type==="local"?"file":Ke.scheme}),l}async function v3(t,e,n,r,o,i){let s=await w3(t,e,n,r,o,i);return s==null?void 0:s.uri}async function w3(t,e,n,r,o,i){let s=await NS(t,e,Fe),a=s&&await Uk(s,n);if(a)return{uri:a,type:"repositoryConfig",fileHost:await Gr(process.cwd(),r,i)};let c=await Gf(t,e.configFolderPath);if(c)return{uri:c,type:"workspace",fileHost:t};o&&i&&(s!=null&&s.length?i.write(`No dev container config found. Additional locations checked:
${Kx(s,n).map(l=>`- ${Jr.join(l,".devcontainer","devcontainer.json")}`).join(`
`)}`):i.write("No dev container config found. No repository connection string found."))}async function Uk(t,e){let n=Kx(t,e);for(let r of n){let o=await Gq(r);if(o)return Ce.file(o)}}function Kx(t,e){let n=[],r=new Set(t.map(_ue).filter(o=>!!o));for(let o of r)for(let i of e){let s=Jr.join(i,o);n.push(s)}return n}function y3(t,e,n){let r=t.path.relative(e.rootFolderPath,_e(n,t.platform));return r&&!r.startsWith("..")&&!t.path.isAbsolute(r)}function _ue(t){let e;if(t.startsWith("https://"))e=t.substr(8);else{let n=/[^@:]+@([^:]+):(.+)/.exec(t);if(n)e=`${n[1]}/${n[2]}`;else return}if(!(e.toLowerCase().startsWith("github.com")&&(e=(/^[^/]+\/[^/]+\/[^/]+/.exec(e)||[])[0],!e)))return e.endsWith(".git")&&(e=e.substr(0,e.length-4)),e}var Jx="vsc.devcontainer.volume.name",C3="vsc.devcontainer.volume.folder";function Mk(t){return t?`${t.volumeName}:${t.folder}`:void 0}function Ql(t){let e=(t.Config.Labels||{})[Jx],n=(t.Config.Labels||{})[C3];return e&&n?{volumeName:e,folder:n}:void 0}var ra=Y(require("url")),P3=Y(require("https"));var b3=Y(Mr());function oa(t){return t.toLowerCase().indexOf("github.com")>=0?Tue(t):t.toLowerCase().indexOf("visualstudio.com")>=0?Pue(t):t.toLowerCase().indexOf("dev.azure.com")>=0?Iue(t):t.toLowerCase().indexOf("gitlab.com")>=0?bue(t):Due(t)}function gc(t){let e="owner",n="repository";return{repository:"unknown",repositoryUrl:t,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${e}/${n}`}}function Due(t){var s;let e="unknown-owner",n,r=t,o;o=(s=ra.parse(t))==null?void 0:s.path;let i=o==null?void 0:o.split("/");return!i||i.length<1?gc(t):(n=i[i.length-1],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf("."))),{repository:"unknown",repositoryUrl:r,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${e}/${n}`})}function Iue(t){var i,s;let e,n,r=t,o;if(e_(t)){let a=`http://${t}`;o=(i=ra.parse(a))==null?void 0:i.path;let c=o==null?void 0:o.split("/");if(!c||c.length<5)return gc(t);e=c[3],n=c[4]}else{o=(s=ra.parse(t))==null?void 0:s.path;let a=o==null?void 0:o.split("/");if(!a||a.length<5)return gc(t);e=a[2],n=a[4],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf(".")))}return{repository:"ado",repositoryUrl:r,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${e}/${n}`}}function Pue(t){var i,s;let e,n,r=t,o;if(e_(t)){let a=`http://${t}`;o=(i=ra.parse(a))==null?void 0:i.path;let c=o==null?void 0:o.split("/");if(!c||c.length<5)return gc(t);e=c[3],n=c[4]}else{o=(s=ra.parse(t))==null?void 0:s.path;let a=o==null?void 0:o.split("/");if(!a||a.length<5)return gc(t);e=a[2],n=a[4],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf(".")))}return{repository:"vso",repositoryUrl:r,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${e}/${n}`}}function bue(t){var s,a;let e,n,r,o=t,i;if(e_(t)){let c=`http://${t}`;i=(s=ra.parse(c))==null?void 0:s.path,i&&(i=i.replace("/:","/"));let l=i==null?void 0:i.split("/");if(!l||l.length<3)return gc(t);e=l[1],n=l.slice(2,l.length-1).join("/")||void 0,r=l[l.length-1]}else{i=(a=ra.parse(t))==null?void 0:a.path;let c=i==null?void 0:i.split("/");if(!c||c.length<3)return gc(t);e=c[1],n=c.slice(2,c.length-1).join("/")||void 0,r=c[c.length-1]}return r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"gitlab",repositoryUrl:o,ref:void 0,commit:!1,repositoryOwner:e,repositoryProject:n,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}${n?`/${n}`:""}/${r}`}}function Tue(t){var c,l;let e,n,r=t,o,i,s;if(e_(t)){let u=`http://${t}`;s=(c=ra.parse(u))==null?void 0:c.path,s&&(s=s.replace("/:","/"))}else s=(l=ra.parse(t))==null?void 0:l.path;let a=s==null?void 0:s.split("/");if(!a||a.length<=2)return gc(t);if(e=a[1],n=a[2],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf("."))),a.length>=3){if(a[3]==="commit"||a[3]==="tree"){let u=t.match(/\/tree\/|\/commit\//);u&&u.index&&(r=t.substring(0,u.index),o=t.substring(u.index+u[0].length))}if(a[3]==="pull"){i=a[4];let u=t.match(/\/pull\//);u&&u.index&&(r=t.substring(0,u.index))}}return{repository:"github",repositoryUrl:r,ref:o,commit:a[3]==="commit",repositoryOwner:e,repositoryName:n,pullRequestId:i,fullRepositoryName:`${e}/${n}`}}function e_(t){return t=t.toLowerCase(),t.indexOf("://")<0?t.indexOf("@")<t.indexOf(":"):!1}var dw=class extends Error{description;code;constructor(e,n){super(),this.code=e,this.description=n}},mw=class{inputUrl;gitUrlInfo;constructor(e){this.inputUrl=e,this.gitUrlInfo=oa(this.inputUrl)}repositoryName(){return this.gitUrlInfo.repositoryName}repositoryOwner(){return this.gitUrlInfo.repositoryOwner}async postClone(e,n,r,o){}installExtension(){return null}},jk=class extends mw{constructor(e){super(e)}async parseUrl(e){var i,s,a;let n=(i=this.gitUrlInfo)==null?void 0:i.repositoryOwner,r=(s=this.gitUrlInfo)==null?void 0:s.repositoryName,o=(a=this.gitUrlInfo)==null?void 0:a.pullRequestId;return this.getPullRequestInfo(e,n,r,o)}async getPullRequestInfo(e,n,r,o){var u,f,m,d,p,g,h,v,C,w,y;let i=await this.fetchPullRequestInfo(e,n,r,o),s=(f=(u=i.head)==null?void 0:u.repo)==null?void 0:f.clone_url,a=(d=(m=i.base)==null?void 0:m.repo)==null?void 0:d.clone_url;if(!a)throw new dw(2,b3.t("Cannot access the head repository of the Pull Request."));let c=(p=i.head)==null?void 0:p.ref,l=((v=(h=(g=i.head)==null?void 0:g.repo)==null?void 0:h.owner)==null?void 0:v.login)===n?null:(y=(w=(C=i.head)==null?void 0:C.repo)==null?void 0:w.owner)==null?void 0:y.login;return{urlToClone:a,prRepositoryUrl:s,ref:c,sourceOwner:l}}async fetchPullRequestInfo(e,n,r,o){let i=`/repos/${n}/${r}/pulls/${o}`,s={"user-agent":"vscode-remote-containers"};e&&(s.authorization=`token ${e}`);let a={hostname:"api.github.com",port:443,path:i,method:"GET",headers:s};return new Promise((c,l)=>{let u="",f=P3.request(a,m=>{if(m.statusCode<200||m.statusCode>=300)return l(new Error(`Status Code: ${m.statusCode}`));m.on("data",d=>{u+=d}),m.on("end",()=>{let d=JSON.parse(u.toString());c(d)})});f.on("error",l),f.end()})}cloneOptions(e){return{url:e.urlToClone,fullClone:!0}}async postClone(e,n,r,o){if(e.sourceOwner){let l=e.prRepositoryUrl.replace(/\.[^/.]+$/,"");await X({exec:n.exec,cmd:"git",args:["remote","add",e.sourceOwner,l],cwd:r,output:o}),await X({exec:n.exec,cmd:"git",args:["fetch",e.sourceOwner,e.ref],cwd:r,output:o});try{await X({exec:n.exec,cmd:"git",args:["checkout","-t",`${e.sourceOwner}/${e.ref}`],cwd:r,output:o})}catch(u){if(!(u.stderr&&u.stderr.startsWith(`fatal: A branch named '${e.ref}' already exists`)))throw u}await X({exec:n.exec,cmd:"git",args:["config","--local",`remote.${e.sourceOwner}.github-pr-remote`,"true"],cwd:r,output:o})}else await X({exec:n.exec,cmd:"git",args:["checkout",e.ref],cwd:r,output:o});let i=this.gitUrlInfo.repositoryOwner,s=this.gitUrlInfo.repositoryName,a=this.gitUrlInfo.pullRequestId,c=`${i}#${s}#${a}`;await X({exec:n.exec,cmd:"git",args:["config","--local",`branch.${e.ref}.github-pr-owner-number`,c],cwd:r,output:o})}installExtension(){return"GitHub.vscode-pull-request-github"}},Vk=class extends mw{constructor(e){super(e)}async parseUrl(e){var n,r;return{urlToClone:(n=this.gitUrlInfo)==null?void 0:n.repositoryUrl,ref:(r=this.gitUrlInfo)==null?void 0:r.ref}}cloneOptions(e){let n=this.gitUrlInfo.commit;return{url:e.urlToClone,branch:!n&&e.ref||void 0,fullClone:n}}async postClone(e,n,r,o){this.gitUrlInfo.commit&&await X({exec:n.exec,cmd:"git",args:["checkout",e.ref],cwd:r,output:o})}},Qx=class extends mw{constructor(n,r){super(n);this.branch=r}async parseUrl(n){return{urlToClone:this.inputUrl,ref:this.branch}}cloneOptions(n){return{url:n.urlToClone,branch:n.ref||void 0}}};function t_(t,e){if(e)return new Qx(t,e);let n=oa(t);if(n.repository==="github"){if(n.pullRequestId)return new jk(t);if(n.ref)return new Vk(t)}return new Qx(t)}var Gk="vsch.local.repository",n_="dev.container.volume";function ci(t){return{repositoryPath:t,fullRepositoryName:zk(t),repositoryName:Kk(t),workspaceFolder:cw,volumeDestination:Qf(),oldVolumeName:kue(t),alreadyCloned:!1,uniqueVolumeName:Nue(t),legacyUniqueVolumeName:Lue(t),getOldWorkspacePath:N3,cloneAndInitializeRepository:Aue,gitUrlHandler:t_(t),gitUrlInfo:oa(t)}}function zk(t){let e=oa(t);return e==null?void 0:e.fullRepositoryName}function Kk(t){let e=oa(t);return e==null?void 0:e.repositoryName}function Qf(){return"/workspaces"}function kue(t){let e=zk(t);return`vsc-${Es.posix.basename(e)}-${R3(t)}`}function Nue(t){let e=T3(t),n=ia.createHash("sha256").update(t).digest("hex");return`${e}-${n}`}function Lue(t){let e=T3(t),n=R3(t);return`${e}-${n}`}function T3(t){let e=oa(t),n="";return e&&e.repositoryName&&(n=e.repositoryName,e.ref?n=`${n}-${e.ref.replace(/\//g,"-")}`:e.pullRequestId&&(n=`${n}-pull-${e.pullRequestId}`)),n}function R3(t){return ia.createHash("md5").update(t).digest("hex")}function cw(t){return Es.posix.join(`${Qf()}`,`${t}`)}async function Aue(t,{folder:e,cloneInfo:n},r,o,i){var f;await Bk(t);let{containerId:s,shellServer:a,remoteContainersEnv:c}=await Fue(t,r,o,e,i,t.configProvider,n),{config:l}=await Oue(t,r,e,i,a),u=(f=r.gitUrlHandler)==null?void 0:f.installExtension();return{repository:r,volumeName:o,containerId:s,shellServer:a,remoteContainersEnv:c,config:l,preInstalledExtensions:u?[u]:[]}}async function Fue(t,e,n,r,o,i,s){let{common:a}=t,{output:c,loadNativeModule:l}=a,u=e.fullRepositoryName,f,m,d,p;t.common.progress(1);let g=$k(e,n,r,t.dockerSocketPath,t.buildContainerRunArgs);r?(c.write(`Cloning Github repository: ${u} into ${e.workspaceFolder(r)}
\r`),f=`fatal: destination path '${e.workspaceFolder(r)}' already exists`,p=e.workspaceFolder(r),d=`Repository '${u}' was already cloned into '${e.workspaceFolder(r)}'.
\r`):(c.write(`Cloning Github repository: ${u} into volume ${n}
\r`),f=`fatal: destination path '${u}' already exists`,p=`${u}`,d=`Repository '${u}' was already cloned into volume.`);let h=e.gitUrlHandler;if(!h)throw new pe({description:eu.t("Could not analyze the URL.")});s?m=h.cloneOptions(s):m={url:e.repositoryPath};let{stdout:v}=await et(t,...g),C=v.toString().trim(),w=ys(t,C,"root"),y=await Wt(w,c),S=await KS(a,{remoteExec:w,user:"root",nodeExecutable:"node",shellServer:y,launchRootShellServer:async()=>y}),D=S.remoteContainersCLI,_=S.remoteEnv,A=S.ready,U=S.mrpcExec,k=await na(t,C,"root",l),E=so("container",p,{},await U||w,k,()=>{throw new Error("not implemented")},void 0,c);try{t.common.isCopyGitConfigEnabled&&await LS(t.common,{homeFolder:"/root",shellServer:y},{}),await Sx({shellServer:y,nodeExecutable:"node"},D,c,"global"),await Tv(t.common,{homeFolder:"/root",shellServer:y},[".ssh","known_hosts"],"ssh"),await A;let b=iY(a),I=await wj(a,E,p,{...m,env:{..._,...m.env}},c,b.output,!!t.removeOnStartup);if(await I.gitClone,I.gitUnshallow&&(a.backgroundTasks.push(I.gitUnshallow.then(()=>{})),I.gitUnshallow.then(b.flush,b.flush)),I.gitClone&&s)try{await h.postClone(s,E,p,c)}catch{return Yk(t,C,eu.t("Failed to checkout the repository {0}.",s.urlToClone))}}catch(b){let I=b&&(b.cmdOutput||b.stack||b.message)||String(b);if(I=I.replace(Vs,""),I.replace(/[\r\n]+/gm,"").includes(f))c.write(d),e.alreadyCloned=!0;else return Yk(t,C,eu.t("Git clone failed. {0}",I))}let{configRaw:x}=await k3(t,e,r,o,y);if(!Ox(x)&&i){c.write(`Repository ${u} has no dev container files.
\r`);let b=!0;for(;b;){let I=await i.createConfiguration(p,E);if(I)b=!1;else{let T=eu.t("Select Configuration");if(I=await i.showError(eu.t("You must select a container configuration since the repository does not contain a dev container configuration. Without a dev container configuration the container cannot be started."),T),I!==T)return Yk(t,C,eu.t("Cancelled container configuration selection."),{closeRemote:!0})}}}return{containerId:C,shellServer:y,remoteContainersEnv:_}}function $k(t,e,n,r,o=[]){let i=n?t.volumeDestination:t.fullRepositoryName;return Hk(e,i,r,o)}function Hk(t,e,n,r=[]){return["run","-d","--mount",`type=volume,src=${t},dst=${e}`,"-v",`${n}:/var/run/docker.sock`,"--security-opt","label=disable",...r,`${L3}`,"sleep","infinity"]}function Yk(t,e,n,r){throw e&&Hi(t,e),new pe({description:n,data:r})}async function k3(t,e,n,r,o){let i,s;if(n?s=e.workspaceFolder(n):s=`${N3(e.repositoryPath)}`,r)return i=(await o.exec(`cat ${r.path} 2>/dev/null`,{logOutput:!1})).stdout,{configRaw:i&&Me(i),configFile:r,workspaceFolder:s};if(r=await Uk([e.repositoryPath],t.userRepositoryConfigurationPaths),r&&(i=(await at(r.fsPath)).toString()),!r)for(let a of Gl(Es.posix,s))try{i=(await o.exec(`cat ${a} 2>/dev/null`,{logOutput:!1})).stdout,r=Ce.from({scheme:"vscode-remote",path:a});break}catch{}return{configRaw:i&&Me(i),configFile:r,workspaceFolder:s}}async function Oue(t,e,n,r,o){let{configRaw:i,configFile:s,workspaceFolder:a}=await k3(t,e,n,r,o);if(!s||!i)throw new pe({description:eu.t("The repository does not have a 'devcontainer.json' configuration file.")});let{common:c,configUpdater:l}=t,{cliHost:u,output:f}=c,m=tw({...i}),d=m;l&&(m.configFilePath=s,d=l(m),delete d.configFilePath);let p=vx({platform:u.platform,configFile:s,env:u.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:a},d);return p.configFilePath=s,("workspaceMount"in p||"workspaceFolder"in p)&&f.write("The options 'workspaceMount' or 'workspaceFolder' are ignored when cloning a repository into a volume."),{workspaceFolder:a,config:p}}function N3(t){return`/workspaces/${Es.posix.basename(zk(t))}`}var L3="vsc-volume-bootstrap",qk="bootstrap.Dockerfile",Uue="volume.Dockerfile";async function Bk(t,e,n,r){let{cliHost:o,output:i}="cliHost"in t?t:t.common;"cliHost"in t||(e=t.common.extensionPath,n=t.common.package.version,r=t.development);let s=o.path.join(await Bv(o),"bootstrap-image",r?`${n}-dev-${Date.now()}`:n),a=o.path.join(s,qk),c=o.path.join(s,".vscode-remote-containers","dist",`dev-containers-cli-${n}`),l=o.path.join(c,"dist","spec-node","devContainersSpecCLI.js"),u=!await o.isFolder(s);if(!u&&!(await o.isFile(a)&&await o.isFile(l))){let g="Removing incomplete bootstrap-image folder.",h=i.start(g),v=`${s}-${ia.randomUUID()}`;await o.rename(s,v),await o.rm(v,{recursive:!0,force:!0}),u=!await o.isFolder(s),i.stop(g,h)}if(u){let g=`${s}-${ia.randomUUID()}`,h=o.path.join(g,".vscode-remote-containers","dist",`dev-containers-cli-${n}`);await o.mkdirp(o.path.join(h,"dist","spec-node")),await o.writeFile(o.path.join(g,qk),await at(Es.join(e,"scripts",qk))),await o.writeFile(o.path.join(h,"package.json"),await at(Es.join(e,"package.json"))),await o.writeFile(o.path.join(h,"dist","spec-node","devContainersSpecCLI.js"),await at(Es.join(e,"dist","spec-node","devContainersSpecCLI.js"))),await o.mkdirp(o.path.join(h,"scripts")),await o.writeFile(o.path.join(h,"scripts","updateUID.Dockerfile"),await at(Es.join(e,"scripts","updateUID.Dockerfile"))),await o.rename(g,s)}let f=["build","-f",a,"-t",L3,s],m=await o.locateCertificatesFile(),d=o.path.join(s,"host-ca-certificates.crt"),p=`${d}-${ia.randomUUID()}`;await o.writeFile(p,m?await o.readFile(m):Buffer.from("")),await o.rename(p,d),await c3(t,...f)}async function E3(t){let{common:e}=t,{cliHost:n,output:r}=e,o=await Mue(t),i=n.path.join(o,Uue),s=!await n.isFolder(o);if(!s&&!await n.isFile(i)){let u="Removing incomplete inspect-volume folder.",f=r.start(u),m=`${o}-${ia.randomUUID()}`;await n.rename(o,m),await n.rm(m,{recursive:!0,force:!0}),s=!await n.isFolder(o),r.stop(u,f)}if(s){let u=`${o}-${ia.randomUUID()}`;await rw(Es.join(e.extensionPath,"scripts","inspect-volume"),n,u,r),await n.rename(u,o)}let a=await n.locateCertificatesFile(),c=n.path.join(o,"host-ca-certificates.crt"),l=`${c}-${ia.randomUUID()}`;return await n.writeFile(l,a?await n.readFile(a):Buffer.from("")),await n.rename(l,c),o}async function Mue(t){let{common:e,development:n}=t,{cliHost:r}=e,o=e.package.version;return r.path.join(await Bv(r),"inspect-volume",n?`${o}-dev-${Date.now()}`:o)}async function S3(t,e,n){let r=[`${Gk}=${e.repositoryPath}`];!n||n===li?r.push("vsch.local.repository.unique=true"):r.push("vsch.local.repository.unique=false"),e.gitUrlInfo.ref&&r.push(`vsch.local.repository.branch=${e.gitUrlInfo.ref}`),e.gitUrlInfo.pullRequestId&&r.push(`vsch.local.repository.pullRequestId=${e.gitUrlInfo.pullRequestId}`);let o=await Uo(t),i=Jk(e,n,o);return o.indexOf(i)===-1&&await Fp(t,i,r),i}function Jk(t,e,n){return e?e===li&&(n.indexOf(t.uniqueVolumeName)!==-1||n.indexOf(t.legacyUniqueVolumeName)===-1?e=t.uniqueVolumeName:e=t.legacyUniqueVolumeName):n.indexOf(t.uniqueVolumeName)!==-1||n.indexOf(t.oldVolumeName)===-1?e=t.uniqueVolumeName:e=t.oldVolumeName,e}var Wp="vsch.local.repository",Xk="vsch.local.repository.volume",Zk="vsch.local.repository.folder";function x3(t,e,n,r){return n?{labels:[`${Wp}=${e}`,`${Xk}=${r}`,`${Zk}=${n}`],remoteWorkspaceFolder:t.workspaceFolder(n)}:{labels:[`${Wp}=${e}`],remoteWorkspaceFolder:t.getOldWorkspacePath(e)}}async function _3(t,e,n,r){let{loadNativeModule:o,output:i}=t.common,s=ys(t,e,"root"),a=await na(t,e,"root",o),c=so("container",r,n,s,a,()=>{throw new Error("not implemented")},"node",i);return{cliHost:c,dockerCLI:"docker",dockerComposeCLI:Cs({exec:c.exec,env:n,output:i},"docker","docker-compose"),dockerComposePath:"docker-compose",env:n,output:i}}var A3=Y(Mr()),lw="devcontainer.local_folder",Zf="devcontainer.config_file",Hp="vsch.local.volume",Xx="/volume",Zx="vsch.quality",uw="vsch.local.folder";async function D3(t,e,n,r,o,i,s,a,c,l,u,f,m,d){let{common:p}=t,g;try{let h=!l,v=r.remoteUser;g=await Up(t,a.Id,o,v),u&&l&&o&&g.user!=="root"&&(g.launchRootShellServer?await bx(g,g.launchRootShellServer,o,n.configFilePath.path):p.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."));let C=await Yx(p,l,a,o,g);return await Hue(a,c,t,e,g,n,r,h,i,s,f,m,d,C)}catch(h){throw $ue(h,a,t,g,n)}}function $ue(t,e,n,r,o){let i=t instanceof pe?t:new pe({description:A3.t("An error occurred setting up the container."),originalError:t});return e&&(i.manageContainer=!0,i.params=n.common,i.containerId=e.Id,i.dockerParams=n),r&&(i.containerProperties=r),o&&(i.config=o),i}async function Hue(t,e,n,r,o,i,s,a,c,l,u,f,m,d){var k,E;let{common:p}=n,g=ur(r.cliHost,o.shellServer);a||await $x(n.configurationTracking,r.cliHost,g,i,p.output);let h=s.shutdownAction;h==="stopCompose"&&(h="stopContainer");let v={cwd:c,dockerCLI:n.dockerCLI,env:p.env,containerId:t.Id,user:o.user,sessionId:p.sessionId,shutdownAction:h,logLevel:p.getLogLevel(),delay:1e4},{shutdownArgs:C,doneWithDocuments:w}=await Vx(n,r.cliHost,g,"singleContainer",v,a?i:void 0);p.backgroundTasks.push(w);let y=((E=(((k=s.customizations)==null?void 0:k.vscode)||[]).slice().reverse().find(x=>typeof x.devPort=="number"))==null?void 0:E.devPort)||jl,{hostOrContainerPort:S,hostPortServer:D,connectionToken:_,remoteEnv:A,serverDownloaded:U}=await Vl(p,o,i,s,y,Mp(n,r,o,l,u,t.Id,e,f,m),d);return C.hostPortServer=D,{params:p,properties:o,config:i,resolvedAuthority:{host:hc,port:S,connectionToken:_,extensionHostEnv:A},tunnelInformation:p.isLocalContainer?Op(t):{},dockerParams:n,dockerContainerId:t.Id,serverDownloaded:U}}function tu(t){let e=t.Config.Labels||{},n=e[lw]||e[uw];return n||void 0}function F3(t){return(t.Config.Labels||{})[Zf]||void 0}function vc(t){let e=(t.Config.Labels||{})[Wp];return e||void 0}function r_(t){let e=(t.Config.Labels||{})[Xk];return e||void 0}function O3(t){let e=(t.Config.Labels||{})[Hp];return e||void 0}function U3(t){let e=(t.Config.Labels||{})[Zk];return e||void 0}function Wk(t,e){throw t.write(ot(e)),new Error(e)}function wc(t){return!!(t!=null&&t.startsWith("tunnel+"))}function M3(t){let e=/^tunnel\+(.*)$/.exec(t);return e?{tunnelName:e[1]}:void 0}var $3=Y(require("path"));async function H3(t,e,n,r,o,i){let s,a=new Promise(p=>s=p),c=new Hx,l=[],u=await r3("vscode-remote-containers",async(p,g)=>{let h=await o3(p),v=[];if(h.type==="poll")try{v=await c.dequeue(6e4)}catch{}else if(h.type==="reply"){let C=l[h.sequence];C&&(C(h.reply),delete l[h.sequence])}else h.type==="done"&&s?s():h.type==="log"&&r.event(h.event);g.write(JSON.stringify(v)),g.end()});u.server.unref();let f=$3.join(n,"dist","shutdown","shutdownMonitorProcess"),m=[u.ipcHandlePath,t,nr[e],o||"",i.getTime().toString()];r.write(`Forking shutdown monitor: ${f} ${m.join(" ")}\r
`);let d=oY(f,m,{stdio:["ignore","ignore","ignore","ipc"],detached:!0,execArgv:[]});return d.on("error",p=>{console.error(p)}),d.unref(),{queue:c,sequence:0,replies:l,done:a}}async function o_(t,e,n){let r=t.sequence++,o=new Promise(s=>t.replies[r]=s);return t.queue.push({type:"configure",sequence:r,options:e}),await o}async function B3({queue:t,done:e}){t.push({type:"cleanup"}),await e}var j3=require("net"),V3=require("util");var li="__UNIQUE__",hc="127.0.0.1";async function I3(t,e){if(t.scheme==="file"&&e.type==="wsl"){let{stdout:n}=await X({exec:e.exec,cmd:"wslpath",args:["-u",t.fsPath],output:Fe});return n.toString().trim()}return _e(t,e.platform)}async function td(t,e){let n=!t.env.SSH_AUTH_SOCK&&await OR(t)?Lv:t.type==="wsl"?t.env.SSH_AUTH_SOCK:void 0,r={DOCKER_CONTEXT:"default"};return e&&("context"in e?r.DOCKER_CONTEXT=e.context:(e.host&&(e.host.startsWith("ssh://")&&t.type==="remote"?r.VSCODE_DOCKER_HOST=e.host:r.DOCKER_HOST=e.host),e.certPath&&(r.DOCKER_CERT_PATH=e.certPath),e.tlsVerify&&(r.DOCKER_TLS_VERIFY=e.tlsVerify))),n&&(r.SSH_AUTH_SOCK=n),r}function dr(t){let e;if(t.DOCKER_CONTEXT&&t.DOCKER_CONTEXT!=="default")e={context:t.DOCKER_CONTEXT};else{e={};let n=t.VSCODE_DOCKER_HOST||t.DOCKER_HOST;n&&(e.host=n),t.DOCKER_CERT_PATH&&(e.certPath=t.DOCKER_CERT_PATH),t.DOCKER_TLS_VERIFY&&(e.tlsVerify=t.DOCKER_TLS_VERIFY),Object.keys(e).length||(e=void 0)}return e}function i_(t,{parentAuthority:e,settings:n}){e&&t.write(`Host authority: ${e}\r
`),n&&("context"in n&&n.context&&t.write(`Context: ${n.context}\r
`),"host"in n&&n.host&&t.write(`Host: ${n.host}\r
`),"certPath"in n&&n.certPath&&t.write(`CertPath: ${n.certPath}\r
`),"tlsVerify"in n&&n.tlsVerify&&t.write(`TLSVerify: ${n.tlsVerify}\r
`))}function ru(t,e){return(!t||t.startsWith("wsl+"))&&!e.VSCODE_DOCKER_HOST&&!e.DOCKER_HOST&&(!e.DOCKER_CONTEXT||e.DOCKER_CONTEXT==="default"||e.DOCKER_CONTEXT==="desktop-linux")}function Bp(t,e){var r,o;let n;return wc(t)?n=(r=M3(t))==null?void 0:r.tunnelName:Ml(t)?n=(o=Hv(t))==null?void 0:o.hostName:e&&("context"in e||e.host)&&(n="context"in e?e.context:e.host),n?` @ ${n}`:""}function yc(t){let{Name:e}=t;return e[0]==="/"?e.substring(1):e}async function ai(t,e){try{return await si(t,e)}catch{return}}async function s_(t,e=!0){let{common:n}=t,{output:r}=n,o="Check Docker is running",i=r.start(o);try{let{stdout:s}=await Qk(t,t.common.loadNativeModule,e,"version"),a=s.toString();if(a.toLowerCase().indexOf("cannot connect")!==-1)throw new Error(a)}catch(s){console.error(s);let a=jp.t("Docker returned an error. Make sure the Docker daemon is running and select an option how to proceed."),c=s&&(s.stderr?s.stderr.toString().toLowerCase():s.message)||"";throw c.indexOf("permission denied")!==-1?c.indexOf("ssh")!==-1?a=jp.t("Cannot connect to Docker daemon using 'ssh'. Make sure public/private keys are set up for connecting without keyboard interaction."):a=jp.t("Current user does not have permission to run 'docker'. Try adding the user to the 'docker' group."):c.indexOf("ENOENT")!==-1&&(a=jp.t("The 'docker' command was not found. Make sure Docker is installed.")),new pe({description:a,originalError:`Docker returned an error code ${s.code}, message: ${s.message}`})}finally{r.stop(o,i)}}async function Qk(t,e,n,...r){let o={...Bi(t),print:"continuous"};try{return await et(o,...r)}catch(i){if(!W3(i)||!n)throw i;let s="cliHost"in t?t.cliHost:t.common.cliHost,a="output"in t?t.output:t.common.output;if(s.type==="wsl"&&(s=await Gr(process.cwd(),e,a)),s.platform==="linux")throw i;if(s.platform==="darwin"&&await s.isFolder("/Applications/Docker.app"))await X({exec:s.exec,cmd:"open",args:["-g","-a","Docker"],env:{ELECTRON_RUN_AS_NODE:""},output:a,print:"continuous"});else{let c=Bue(s);if(s.platform==="win32"&&await s.isFile(c))await X({exec:s.exec,cmd:c,env:{ELECTRON_RUN_AS_NODE:""},output:"output"in t?t.output:t.common.output,print:"continuous"});else throw i}for(let c=6;c>0;c--){await Bt(5e3);try{return await et(o,...r)}catch(l){if(c===1||!W3(l))throw l}}throw i}}function Bue(t){return t.path.join(t.env.ProgramW6432||"C:\\Program Files","Docker\\Docker\\Docker Desktop.exe")}function W3(t){let e=Buffer.concat([t==null?void 0:t.stdout,t==null?void 0:t.stderr].filter(Boolean)).toString().toLowerCase();return e.includes("cannot connect to the docker daemon")||e.includes("docker daemon is not running")||e.includes("internal server error for api route and version")||e.includes("activate the wsl integration")}function un(t){return t.hostPath!==void 0}function lo(t){return t.repositoryPath!==void 0}function ed(t){return!lo(t)&&!!t.folder}function fw(t){return!lo(t)&&!ed(t)&&t.volumeName!==void 0}function uo(t){let e=q3("dev-container",t);if(e)return"unparsedConfig"in e?{parentAuthority:e.parentAuthority,hostPath:e.unparsedConfig}:("repositoryPath"in e&&e.configFile&&(e.configFile=Ce.revive(e.configFile)),"repositoryPath"in e?e.dockerHost?{parentAuthority:e.parentAuthority,repositoryPath:e.repositoryPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`},cloneInfo:e.cloneInfo}:e:("hostPath"in e&&e.configFile&&(e.configFile=Ce.revive(e.configFile)),"hostPath"in e&&e.dockerHost?{parentAuthority:e.parentAuthority,hostPath:e.hostPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`}}:e))}function pw(t,e,n,r,o,i){t=rd(t);let s=r||i?JSON.stringify({hostPath:e,localDocker:o,settings:r,configFile:i}):e;return`vscode-remote://dev-container+${Buffer.from(s,"utf8").toString("hex")}${t?`@${t}`:""}${n}`}function Wi(t,e,n,r,o,i,s,a){if(t=rd(t),e){let l=ci(e);if(!n){let f=JSON.stringify({repositoryPath:e,settings:i,cloneInfo:s,inspectVolume:o,configFile:a});return`vscode-remote://dev-container+${Buffer.from(f,"utf8").toString("hex")}${t?`@${t}`:""}${l.getOldWorkspacePath(e)}`}let u=JSON.stringify({repositoryPath:e,volumeName:n,folder:r,settings:i,cloneInfo:s,inspectVolume:o,configFile:a});return`vscode-remote://dev-container+${Buffer.from(u,"utf8").toString("hex")}${t?`@${t}`:""}${l.workspaceFolder(r)}`}if(r){let l={volumeName:n,folder:r,settings:i};return`vscode-remote://dev-container+${Buffer.from(JSON.stringify(l),"utf8").toString("hex")}${t?`@${t}`:""}${cw(r)}`}let c=JSON.stringify({volumeName:n,settings:i});return`vscode-remote://dev-container+${Buffer.from(c,"utf8").toString("hex")}${t?`@${t}`:""}${Xx}`}function nd(t){let e=q3("attached-container",t);if(e)return"unparsedConfig"in e?{parentAuthority:e.parentAuthority,containerId:e.unparsedConfig}:(e.dockerHost&&(e.settings={host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`},delete e.dockerHost),e)}function Y3(t,e,n,r){t=rd(t);let o=JSON.stringify({containerName:e,settings:n,cwd:r});return`attached-container+${Buffer.from(o,"utf8").toString("hex")}${t?`@${t}`:""}`}function q3(t,e){try{let n=ou(e);if(!n)return;let{name:r,config:o,parentAuthority:i}=n,s=r===t&&o?Buffer.from(o,"hex").toString("utf8"):void 0;if(!s)return;if(!s.startsWith("{"))return{parentAuthority:i,unparsedConfig:s};let a=JSON.parse(s);return a.parentAuthority=i,a}catch(n){console.warn(n);return}}function ou(t){let e=t==null?void 0:t.match(/^(?<name>[^@+]+)\+(?<config>[^@]+)(?:@(?<parentAuthority>.*))?$/);if(!e)return;let{name:n,config:r,parentAuthority:o}=e.groups;return{name:n,config:r,parentAuthority:o}}function iu(t,e){return Rn(e.startsWith("/")?"linux":"win32",Ce.parse(`vscode-remote://${t}`),e)}function rd(t){if(t){if(Ml(t)){let e=t.indexOf("@");if(e!==-1&&t.indexOf("+",e)===-1){let r=Hv(t);return jR(r)}return t}if(wc(t))return t}}async function G3(t,e,n){return await bv(t,e,n)||e}function z3(t,e,n){let r=t.path.relative(t.path.dirname(e),n);return`/workspaces/${t.platform==="win32"?r.replace(/\\/g,"/"):r}`}function e3(t,e){return t.with({path:nu.posix.resolve(t.path,e)})}async function Vx(t,e,n,r,o,i){let{common:s,onRemoveOnShutdownChanged:a}=t,c=s.output.start("Setup shutdown monitor"),l=await H3(r,s.getLogLevel(),s.extensionPath,s.output,s.logFilePath?nu.dirname(s.logFilePath):void 0,s.sessionStart);o_(l,o,s.output).catch(d=>console.error(d)),a&&a(async d=>{o.rebuild=!!d,o.delay=0,await o_(l,o,s.output)}),s.onDidChangeLogLevel(async d=>{o.logLevel=d,await o_(l,o,s.output)});let u={},f=async()=>{let d=B3(l);u.hostPortServer&&await(0,V3.promisify)(u.hostPortServer.close.bind(u.hostPortServer))(),await d};s.shutdowns.push(f);let m=t.common.hostConfig.canRebuildContainer&&i?Mx(t.configurationTracking,e,n,i).catch(console.error):Promise.resolve();return s.output.stop("Setup shutdown monitor",c),{monitor:l,shutdownArgs:u,doneWithDocuments:m}}function Op(t){return{environmentTunnels:t.Ports.filter(e=>!!e.PublicPort).map(e=>{let n=e.IP,r=(0,j3.isIPv4)(n)?n==="0.0.0.0"?"127.0.0.1":n:n==="::"?"[::1]":"["+n+"]";return{remoteAddress:{port:e.PrivatePort,host:"0.0.0.0"},localAddress:r+":"+e.PublicPort}})}}async function Up(t,e,n,r,o){var y;let{common:i}=t,s="Inspecting container",a=i.output.start(s),c=await si(t,e);i.output.stop(s,a);let l=r||c.Config.User||"root",[,u,,f]=/([^:]*)(:(.*))?/.exec(l),m=Wue(c.Config.Env),d=ys(t,e,l),p=await na(t,e,l,i.loadNativeModule),g=ys(t,e,"root"),h=c.Mounts.find(S=>S.Type==="volume"&&S.Name==="vscode"),v=c.Mounts.find(S=>S.Type==="bind"&&S.Source===i.localCacheFolder),C=h&&nu.posix.join(h.Destination,/^\.*(.*)$/.exec(i.product.serverDataFolderName)[1])||(v==null?void 0:v.Destination),w=(y=c.Mounts.find(S=>S.Type==="bind"&&S.Destination.startsWith("/tmp/vscode-wayland-")))==null?void 0:y.Destination;return Dx({params:i,createdAt:c.Created,startedAt:c.State.StartedAt,sharedDataFolder:C,sharedDataFolderIsLocalCacheFolder:!h&&!!v,remoteWorkspaceFolder:n,containerUser:u==="0"?"root":u,containerGroup:f,containerEnv:m,remoteExec:d,remotePtyExec:p,remoteExecAsRoot:g,rootShellServer:o,remoteWaylandSocket:w})}function Wue(t){return(t||[]).reduce((e,n)=>{let r=n.indexOf("=");return r!==-1&&(e[n.substr(0,r)]=n.substr(r+1)),e},{})}async function K3(t){let{common:e,dockerCLI:n,dockerComposeCLI:r,dockerComposePath:o,dockerEnv:i}=t,{cliHost:s,output:a}=e;return{cliHost:s,dockerCLI:n,dockerComposeCLI:r,dockerComposePath:o,env:i,output:a}}async function J3(t,e){return t.type==="local"&&e?t.path.join(e,"data"):t.path.join(await t.homedir(),".vscode-remote-containers","data")}function Mp(t,e,n,r,o,i,s,a,c){let l=!s;return async(u,f,m,d,p)=>{let{common:g}=t,{cliHost:h}=e,{dotfilesConfiguration:v}=g,C=d.getDotfileConfiguration("dotfiles.repository")||v.repository,w=d.getDotfileConfiguration("dotfiles.installCommand")||v.installCommand,y=d.getDotfileConfiguration("dotfiles.targetPath")||v.targetPath;l&&C&&(l=!1,await FY(n));let S={...e.env,...fr(e.env)},D={cliHost:e.cliHost,dockerPath:e.dockerCLI,dockerComposePath:e.dockerComposePath,env:S,extensionPath:g.extensionPath,appRoot:g.appRoot,package:g.package,postCreate:g.postCreate,output:g.postCreate.output},_=g.postCreate.output.dimensions||g.output.dimensions,A=await ii(D,["run-user-commands",...e.cliHost.type==="local"&&g.persistedFolder?["--user-data-folder",g.persistedFolder]:[],...e.dockerCLI!=="docker"?["--docker-path",e.dockerCLI]:[],...e.dockerComposePath!=="docker-compose"?["--docker-compose-path",e.dockerComposePath]:[],...g.containerSessionDataFolder?["--container-session-data-folder",g.containerSessionDataFolder]:[],...s?["--container-data-folder",Mi(t.common.product.serverDataFolderName)]:[],...s?["--container-system-data-folder",Px(t.common.product.serverDataFolderName)]:[],...r?["--workspace-folder",r]:[],...(o||[]).map(U=>["--id-label",U]).flat(),"--container-id",i,"--log-level",ro(g.getLogLevel()),"--log-format","json",...a?["--config",_e(a,h.platform)]:[],...c?["--override-config",_e(c,h.platform)]:[],"--default-user-env-probe",g.defaultUserEnvProbe,"--skip-non-blocking-commands",String(u),...g.skipPostAttach?["--skip-post-attach"]:[],"--prebuild",String(m),"--stop-for-personalization",String(f),...[].concat(...Object.keys(p).map(U=>["--remote-env",`${U}=${p[U]}`])),"--mount-workspace-git-root",..._?["--terminal-columns",String(_.columns),"--terminal-rows",String(_.rows)]:[],...C?["--dotfiles-repository",C]:[],...w?["--dotfiles-install-command",w]:[],...y?["--dotfiles-target-path",y]:[]]);if((A==null?void 0:A.outcome)!=="success")throw new pe({description:jp.t("devcontainer command failed: {0}",JSON.stringify(A))});return A.result}}async function X3(t,e,n,r,o,i,s,a){let{cliHost:c,output:l}=t,u=await ii(t,["read-configuration",...t.dockerPath!=="docker"?["--docker-path",t.dockerPath]:[],...t.dockerComposePath!=="docker-compose"?["--docker-compose-path",t.dockerComposePath]:[],...e?["--workspace-folder",e]:[],...(i||[]).map(f=>["--id-label",f]).flat(),...s?["--container-id",s]:[],"--log-level",ro(r),"--log-format","json",...n?["--config",_e(n,c.platform)]:[],...a?["--override-config",_e(a,c.platform)]:[],"--include-merged-configuration","--mount-workspace-git-root",...l.dimensions?["--terminal-columns",String(l.dimensions.columns),"--terminal-rows",String(l.dimensions.rows)]:[],...Object.keys(o).length>0?["--additional-features",JSON.stringify(o)]:[]]);return u.configuration.configFilePath=u.configuration.configFilePath&&Ce.revive(u.configuration.configFilePath).with({scheme:c.type==="local"?"file":Ke.scheme}),u}async function Yx(t,e,n,r,o){let{output:i}=t;if(e&&r)try{i.write(`safe.directory: Looking up root folder for workspace folder '${r}'.`);let s=n.Mounts.find(a=>lf(nu.posix,a.Destination,r,!0));if((s==null?void 0:s.Type)==="bind"){let a;try{let{stdout:u}=await o.shellServer.exec(`command -v git >/dev/null 2>&1 && ROOT_FOLDER="$(git -C '${r}' rev-parse --show-toplevel)" && test "$(stat -c %u "$ROOT_FOLDER")" != "$(id -u)" && echo -n "$ROOT_FOLDER"`);a=u.trim()}catch(u){a=u!=null&&u.stderr?(/dubious ownership in repository at '([^']+)'/.exec(u.stderr)||[])[1]:void 0}if(!a||!lf(nu.posix,s.Destination,a,!0)){i.write(`safe.directory: Checking host ownership of root folder${a?` '${a}'`:""} at mount point '${s.Destination}' skipped.`);return}i.write(`safe.directory: Checking host ownership of root folder '${a}' at mount point '${s.Destination}'.`);let c=nu.posix.relative(s.Destination,a),l=t.cliHost.path.join(s.Source,t.cliHost.platform==="win32"?c.replace(/\//g,"\\"):c);if(t.cliHost.platform==="win32"){let u;try{u=(await X({exec:t.cliHost.exec,cmd:"powershell",args:["-NoProfile","-NonInteractive","-Command","(Get-Acl .).Owner"],cwd:l,env:ao(),output:i,print:!0})).stdout.toString().trim()}catch(m){i.write(`safe.directory: Failed to get host owner for '${l}': ${m==null?void 0:m.message}`);return}let f;try{f=(await X({exec:t.cliHost.exec,cmd:"powershell",args:["-NoProfile","-NonInteractive","-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],cwd:l,env:ao(),output:i,print:!0})).stdout.toString().trim()}catch(m){i.write(`safe.directory: Failed to get current user ('${l}' owned by '${u}'): ${m==null?void 0:m.message}`);return}if(i.write(`safe.directory: '${l}' owned by '${u}', current user is '${f}'.`),u!==f)return}else await X({exec:t.cliHost.exec,cmd:"/bin/sh",args:["-c",`cd '${l}' && test "$(stat -${t.cliHost.platform==="darwin"?"f":"c"} %u .)" = "$(id -u)"`],output:i});if(o.launchRootShellServer){i.write(`safe.directory: Root folder '${a}' owned by current user on host but not owned by remote user in container. Adding to safe directory list in Git system config.`),await(await o.launchRootShellServer()).exec(`git config --system --get-all safe.directory | grep -x '${a}' || git config --system --add safe.directory '${a}'`);return}else return i.write(`safe.directory: Root folder '${a}' owned by current user on host but not owned by remote user in container. Later adding to safe directory list in Git global config.`),async()=>{await o.shellServer.exec(`git config --global --get-all safe.directory | grep -x '${a}' || git config --global --add safe.directory '${a}'`)}}}catch{}}var Mt=Y(require("vscode")),xi=require("vscode");var K=Y(require("vscode")),hm=Y(require("path"));var Vp=Y(require("vscode")),a_=Y(require("path")),eG=require("stream");var jue=jS();async function Xr(t,e,n,r,o,i,s,a,c,l,u){return t?Vue(t,n,s,a,c,l):YR(e,n,r,o,i,s,a,c,l,u)}async function Vue({server:t,authority:e},n,r,o,i,s){var A,U,k,E,x,b,I,T;let a="Loading environment from ExecServer",c=i.start(a),l=await t.env();i.stop(a,c),i.write(`Host OS: ${l.osPlatform}${l.osRelease?` ${l.osRelease}`:""}`),i.write(`Host CWD: ${n}`);let u=Yue(()=>t,void 0),f=l.osPlatform,{homeFolder:m,localEnv:d}=await Yn(f,{posix:async()=>{let R=await Wt(u,i,void 0,f,"Host"),L=f==="darwin"?(await X({exec:u,cmd:"/bin/sh",args:["-c","echo ~"],output:i})).stdout.toString().trim():(await R.exec("echo ~")).stdout.trim(),N=f==="darwin"?(await X({exec:u,cmd:"/bin/sh",args:["-c","id -un"],output:i})).stdout.toString().trim():await Fl(R),B=await Uf(R,N),W=(B==null?void 0:B.shell)||"/bin/sh",z=await Bf({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:i},{shell:W,remoteExec:u});return R.process.terminate(),{homeFolder:L,localEnv:z}},win32:async()=>(i.write(`USERPROFILE: ${l.env.USERPROFILE}`),i.write(`PATH: ${l.env.PATH}`),{homeFolder:l.env.USERPROFILE,localEnv:l.env})})(),p=async R=>u({...R,env:{...d,...R.env}}),g=async R=>{if(!t.fs){let L=await t.fsStat(R);return L.exists&&L.type==="file"}try{return(await t.fs.stat(R)).type===Vp.FileType.File}catch(L){if((L==null?void 0:L.code)==="FileNotFound"||(L==null?void 0:L.code)==="FileNotADirectory"||L!=null&&L.message.toLowerCase().includes("file not found"))return!1;throw L}},h=l.osPlatform==="win32",v=h?a_.win32:a_.posix,C=v.join(m,".vscode-remote-containers"),w=await rq({localCacheFolder:r,output:i,alternateDownload:s,exec:p,env:d,isFile:g,userDataFolder:C,homeFolder:m,product:o,platform:f}),y=BV(w,p,i),S=n||m,D,_;return{type:"remote",authority:e,platform:f,exec:p,ptyExec:rY(p),cwd:S,env:d,path:v,async homedir(){return m},tmpdir:Yn(f,{posix:async()=>d.TMPDIR||"/tmp",win32:async()=>d.TEMP}),isFile:g,isFolder:async R=>{if(!t.fs){let L=await t.fsStat(R);return L.exists&&L.type==="dir"}try{return(await t.fs.stat(R)).type===Vp.FileType.Directory}catch(L){if((L==null?void 0:L.code)==="FileNotFound"||(L==null?void 0:L.code)==="FileNotADirectory"||L!=null&&L.message.toLowerCase().includes("file not found"))return!1;throw L}},isSocket:async R=>{if(h)return!1;try{return await X({exec:p,cmd:"test",args:["-S",R],output:Fe}),!0}catch(L){if((L==null?void 0:L.code)!==1)throw L;return!1}},readFile:(A=t.fs)!=null&&A.read?async R=>{let L=await t.fs.read(R),N=[];return L.onDidReceiveMessage(B=>N.push(B)),await L.onEnd,Buffer.concat(N)}:R=>GV(p,f,w,R,Fe),writeFile:(U=t.fs)!=null&&U.write?async(R,L)=>{let{stream:N,done:B}=await t.fs.write(R);N.write(L),N.end(),await B}:(R,L)=>zV(p,f,w,R,L,Fe),rename:(k=t.fs)!=null&&k.rename?async(R,L)=>t.fs.rename(R,L):(R,L)=>ex(p,f,R,L,Fe),rm:(E=t.fs)!=null&&E.rm?async R=>t.fs.rm(R):(R,L)=>tx(p,f,R,L||{},Fe),mkdirp:(x=t.fs)!=null&&x.mkdirp?async R=>t.fs.mkdirp(R):R=>nx(p,f,R,Fe),readDir:(b=t.fs)!=null&&b.readdir?async R=>(await t.fs.readdir(R)).map(N=>N.name):R=>KV(p,f,R,Fe),readDirWithTypes:(I=t.fs)!=null&&I.readdir?async R=>(await t.fs.readdir(R)).map(N=>{let B=0;return N.type&Vp.FileType.File&&(B|=1),N.type&Vp.FileType.Directory&&(B|=2),N.type&Vp.FileType.SymbolicLink&&(B|=64),[N.name,B]}):Yn(f,{posix:async R=>{let L={f:1,"*":1,"/":2,"@":64};return(await X({exec:p,cmd:"ls",args:["-aF",R],output:Fe})).stdout.toString().trim().split(`
`).map(N=>"/*@=%|>".indexOf(N[N.length-1])!==-1?[N.substr(0,N.length-1),N[N.length-1]]:[N,"f"]).filter(([N])=>N!=="."&&N!=="..").map(([N,B])=>[N,L[B]||0])},win32:void 0}),getUsername:async()=>(D===void 0&&(D=await Yn(f,{posix:async()=>(await X({exec:p,cmd:"id",args:["-u","-n"],output:Fe})).stdout.toString().trim(),win32:async()=>d.USERNAME})()),D),toCommonURI:()=>Promise.resolve(void 0),connect:Mf((T=t.fs)!=null&&T.connect?R=>{if("port"in R&&!t.tcpConnect)return y(R);let L=(async()=>{let{stream:N}=await("port"in R?t.tcpConnect(R.host,R.port):t.fs.connect(R.socketPath));return jue.duplex(eN(N,N))})();return{sink:N=>{L.then(B=>B.sink(N),B=>N(B,()=>{})).catch(B=>i.write(`Connection forwarding to sink error: ${(B==null?void 0:B.stack)||(B==null?void 0:B.message)||String(B)}`))},source:(N,B)=>{L.then(W=>W.source(N,B),W=>B(W)).catch(W=>i.write(`Connection forwarding to source error: ${(W==null?void 0:W.stack)||(W==null?void 0:W.message)||String(W)}`))}}}:y,"Exec Server",i),locateCertificatesFile:function(){return _||(_=ax(this,void 0,i))},nodeExecutable:w,reconnect:async R=>{R?R!==t?(i.write("Updating to new ExecServer to reconnect."),t=R):i.write("New ExecServer to reconnect same as old."):i.write("No new ExecServer to reconnect.")}}}function Yue(t,e){return async function(n){let{cmd:r,args:o,output:i}=n,s=t(),a=`Run: ${r} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,c=i.start(a),l=n.cwd||e,u=await s.env(),f=n.env?{...u.env,...n.env}:u.env,m=await s.spawn(r,o||[],{cwd:l,env:f});return{stdin:que(m.stdin),stdout:Z3(m.stdout),stderr:Z3(m.stderr),exit:Promise.all([m.onExit,m.stdout.onEnd,m.stderr.onEnd]).then(([{status:d}])=>(i.stop(a,c),{code:d,signal:null})).catch(d=>{throw i.stop(a,c),d!=null&&d.message.includes("NotFound")&&(d.code="ENOENT"),d}),async terminate(){}}}}function Z3(t){return eN(void 0,t)}function que(t){return eN(t,void 0)}function eN(t,e){let n=new eG.Stream,r=!1;if(t&&(n.writable=!0,n.write=function(o,i,s){s=Array.from(arguments).find(c=>typeof c=="function");let a;try{t.write(o)}catch(c){a=c,setImmediate(()=>n.emit("error",c))}return s&&s(a),!0},n.end=function(o,i,s){s=Array.from(arguments).find(a=>typeof a=="function"),typeof o=="function"&&(o=void 0);try{o&&t.write(o),r=!0,t.end()}catch(a){setImmediate(()=>n.emit("error",a))}return s&&s(),this}),e){let c=function(){for(;i.length&&!n.paused;)n.emit("data",i.shift());!n.paused&&o&&n.emit("end")},o=!1;n.readable=!0,n.paused=!0;let i=[];(e.onDidReceiveMessage||e.onData)(l=>{let u=Buffer.from(l);n.paused?i.push(u):n.emit("data",u)}),e.onEnd.then(()=>{o=!0,n.paused||n.emit("end")});let s=n.on.bind(n);n.on=(l,u)=>{let f=s(l,u);return l==="data"&&n.paused&&setImmediate(n.resume.bind(n)),f};let a=n.pipe.bind(n);n.pipe=function(l,u){let f=a(l,u);return n.paused&&n.resume(),f},n.pause=function(){return n.paused=!0,n},n.resume=function(){return n.paused=!1,c(),n}}return n.destroy=function(o){return t&&!r&&(r=!0,n.end()),o&&n.emit("error",o),n.emit("close"),this},n}var UK=Y(require("https")),tg=Y(require("os")),qy=Y(require("vscode"));var Ame=async(t,e,n)=>{let r=await Promise.resolve().then(()=>(Od(),A4)),o=await Promise.resolve().then(()=>(w6(),v6)),i=new r.AppInsightsCore,s=new o.PostChannel,a={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(n){a.extensionConfig={};let u={alwaysUseXhrOverride:!0,httpXHROverride:n};a.extensionConfig[s.identifier]=u}let l=e.workspace.getConfiguration("telemetry").get("internalTesting");return i.initialize(a,[]),i.addTelemetryInitializer(u=>{u.ext=u.ext??{},u.ext.web=u.ext.web??{},u.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',l&&(u.ext.utc=u.ext.utc??{},u.ext.utc.flags=8462029)}),i},y6=async(t,e,n)=>{let r=await Ame(t,e,n);return{logEvent:(s,a)=>{try{r==null||r.track({name:s,baseData:{name:s,properties:a==null?void 0:a.properties,measurements:a==null?void 0:a.measurements}})}catch(c){throw new Error(`Failed to log event to app insights!
`+c.message)}},flush:async()=>{try{return new Promise((a,c)=>{if(!r){a();return}r.flush(!0,l=>{if(!l){c("Failed to flush app 1DS!");return}})})}catch(s){throw new Error(`Failed to flush 1DS!
`+s.message)}},dispose:async()=>new Promise(a=>{if(!r){a();return}r.unload(!1,()=>{a(),r=void 0},1e3)})}};zc();var sm=class t{static applyReplacements(e,n){for(let r of Object.keys(e))for(let o of n)o.lookup.test(r)&&(o.replacementString!==void 0?e[r]=o.replacementString:delete e[r])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"PACKAGE_JSON_VERSION"}}static getInstance(){return t._instance||(t._instance=new t),t._instance}};var FK=async(t,e,n,r,o)=>{let i;try{let a=await Promise.resolve().then(()=>(AK(),LK)),c={};if(r){let f={alwaysUseXhrOverride:!0,httpXHROverride:r};c[CI]=f}let l;t.startsWith("InstrumentationKey=")||(l=t);let u=l?{instrumentationKey:l}:{connectionString:t};i=new a.ApplicationInsights({...u,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:c})}catch(a){return Promise.reject(a)}return{logEvent:(a,c)=>{let l={...c==null?void 0:c.properties,...c==null?void 0:c.measurements};o!=null&&o.length&&sm.applyReplacements(l,o),i==null||i.track({name:a,data:l,baseType:"EventData",ext:{user:{id:e,authId:e},app:{sesId:n}},baseData:{name:a,properties:c==null?void 0:c.properties,measurements:c==null?void 0:c.measurements}})},flush:async()=>{i==null||i.flush(!1)},dispose:async()=>new Promise(c=>{i==null||i.unload(!0,()=>{c(),i=void 0},1e3)})}};var kI=class{constructor(e,n,r){this.telemetrySender=e,this.vscodeAPI=n,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,r),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,n,r,o){o?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logUsage(e,{properties:n,measurements:r})}sendTelemetryEvent(e,n,r){this.internalSendTelemetryEvent(e,n,r,!1)}sendRawTelemetryEvent(e,n,r){let o={...n};for(let i of Object.keys(o??{})){let s=o[i];typeof i=="string"&&s!==void 0&&(o[i]=new this.vscodeAPI.TelemetryTrustedValue(typeof s=="string"?s:s.value))}this.sendTelemetryEvent(e,o,r)}sendDangerousTelemetryEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,n,r,!0)}internalSendTelemetryErrorEvent(e,n,r,o){o?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logError(e,{properties:n,measurements:r})}sendTelemetryErrorEvent(e,n,r){this.internalSendTelemetryErrorEvent(e,n,r,!1)}sendDangerousTelemetryErrorEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,n,r,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}};var el;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(el||(el={}));var NI=class{constructor(e,n){this._instantiationStatus=el.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=n,this._key=e}sendEventData(e,n){if(!this._telemetryClient){this._instantiationStatus!==el.INSTANTIATED&&this._eventQueue.push({eventName:e,data:n});return}this._telemetryClient.logEvent(e,n)}sendErrorData(e,n){if(!this._telemetryClient){this._instantiationStatus!==el.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:n});return}let r={stack:e.stack,message:e.message,name:e.name};if(n){let o=n.properties||n;n.properties={...o,...r}}else n={properties:r};this._telemetryClient.logEvent("unhandlederror",n)}async flush(){var e;return(e=this._telemetryClient)==null?void 0:e.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:n})=>this.sendEventData(e,n)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:n})=>this.sendErrorData(e,n)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===el.NOT_INSTANTIATED&&(this._instantiationStatus=el.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=el.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=el.INSTANTIATED}))}};function OK(){return{sendPOST:(e,n)=>{let r={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{let o=UK.request(e.urlString,r,i=>{i.on("data",function(s){n(i.statusCode??200,i.headers,s.toString())}),i.on("error",function(){n(0,{})})});o.write(e.data,i=>{i&&n(0,{})}),o.end()}catch{n(0,{})}}}}var Gy=class extends kI{constructor(e,n){let r=s=>FK(s,qy.env.machineId,qy.env.sessionId,OK(),n);sm.shouldUseOneDataSystemSDK(e)&&(r=s=>y6(s,qy,OK()));let o={release:tg.release(),platform:tg.platform(),architecture:tg.arch()},i=new NI(e,r);if(e&&e.indexOf("AIF-")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(i,qy,{additionalCommonProperties:sm.getAdditionalCommonProperties(o)})}};var Ku=Y(e5());var t5=Y(require("vscode"));function qt(t){let e=t5.workspace.getConfiguration(),n=us(t),r=e.get(n),o=Nl(t),i=e.get(o);if(i!=null&&i!==r){let s=e.inspect(n);if(!s||s.globalValue===void 0&&s.workspaceValue===void 0&&s.workspaceFolderValue===void 0)return i}return r}function NF(t,e){return t.affectsConfiguration(us(e))||t.affectsConfiguration(Nl(e))}var Gu=Y(require("path"));var n5=Y(require("os")),Pt=Y(require("vscode")),mm=require("vscode");async function VI(){await Pt.window.showInformationMessage(mm.l10n.t("You need to first save your workspace in a folder containing all its workspace folders."),{modal:!0})}async function Fa(t){var r;let e=t?[t]:(r=Pt.workspace.workspaceFolders)==null?void 0:r.map(o=>o.uri);if(!e)return[];let n=await Promise.all([...e.map(o=>(async()=>{try{let i=o.with({path:Gu.posix.join(o.path,".devcontainer.json")});if((await Pt.workspace.fs.stat(i)).type===Pt.FileType.File)return[i]}catch(i){if((i==null?void 0:i.code)!=="FileNotFound")throw i}return[]})()),...e.map(o=>Pt.workspace.findFiles(new Pt.RelativePattern(o.with({path:Gu.posix.join(o.path,".devcontainer")}),"{devcontainer.json,*/devcontainer.json}")))]);return[].concat(...n)}async function zu(t,e){let n;if(t.length>1){let r=Pt.window.createQuickPick();r.placeholder=mm.l10n.t("Select a devcontainer.json file."),r.busy=!0,r.enabled=!1,r.show(),r.items=(await Promise.all(t.map(async i=>{let s=i.uri,a=i.fileHost.path,c=i.fileHost.platform,l=_e(s,c),u=Me((await i.fileHost.readFile(l)).toString())||{},f,m,d=a.dirname(l),p=a.dirname(d);a.basename(d)===".devcontainer"?(f=mm.l10n.t("Main"),m=p):a.basename(p)===".devcontainer"?(f=a.basename(d),m=a.dirname(p)):(f=mm.l10n.t("Project Root"),m=d);let g=u.name||f,h=i.type==="repositoryConfig"||i.type==="userData"?Ky(c,l,n5.homedir()):a.relative(m,l);return{label:g,description:h+(s.toString()===(e==null?void 0:e.toString())?` ${mm.l10n.t(" (Current)")}`:""),uri:s,buttons:[{iconPath:new Pt.ThemeIcon("go-to-file"),tooltip:mm.l10n.t("Open File")}]}}))).sort((i,s)=>{let a=Gu.posix.dirname(i.uri.path),c=Gu.posix.dirname(s.uri.path);return a!==c?a.localeCompare(c):i.label.localeCompare(s.label)}),r.busy=!1,r.enabled=!0;let o=await new Promise(i=>{r.onDidAccept(()=>i(r.selectedItems[0])),r.onDidHide(()=>i(void 0)),r.onDidTriggerItemButton(({item:s})=>{Pt.commands.executeCommand("vscode.open",s.uri),i(void 0)})});r.dispose(),n=o?Ce.from(o.uri):"cancelled"}else t.length===1&&(n=t[0].uri);return n}function Ky(t,e,n){if(t==="win32")return e;let r=`${$pe(n,"/")}/`;return(t==="linux"?e.startsWith(r):e.toLowerCase().startsWith(r.toLowerCase()))&&(e=`~/${e.substr(r.length)}`),e}function $pe(t,e){if(e.length===0)return t;for(;t.endsWith(e);)t=t.substr(0,t.length-e.length);return t}function Oa(t,e){let n=Pt.workspace.fs;return{platform:t,path:t==="win32"?Gu.win32:Gu.posix,async isFile(r){try{return((await n.stat(Rn(t,e,r))).type&Pt.FileType.File)!==0}catch(o){if((o==null?void 0:o.code)==="FileNotFound"||(o==null?void 0:o.code)==="FileNotADirectory")return!1;throw o}},async isFolder(r){try{return((await n.stat(Rn(t,e,r))).type&Pt.FileType.Directory)!==0}catch(o){if((o==null?void 0:o.code)==="FileNotFound"||(o==null?void 0:o.code)==="FileNotADirectory")return!1;throw o}},async readFile(r){try{let o=await n.readFile(Rn(t,e,r));return Buffer.from(o)}catch(o){if((o==null?void 0:o.code)==="FileNotFound"){let i=new Error(`Could not read file: ${r}`);throw i.originalError=o,i.code="ENOENT",i}throw o}},async rename(r,o){try{let i=Rn(t,e,r),s=Rn(t,e,o);await n.rename(i,s)}catch(i){if((i==null?void 0:i.code)==="FileNotFound"){let s=new Error(`Could not rename  ${r} -> ${o}`);throw s.originalError=i,s.code="ENOENT",s}throw i}},async rm(r,o){try{let i=Rn(t,e,r);await n.delete(i,{recursive:o.recursive})}catch(i){if((i==null?void 0:i.code)==="FileNotFound"){let s=new Error(`Could not remove ${r}`);throw s.originalError=i,s.code="ENOENT",s}throw i}},async writeFile(r,o){await n.writeFile(Rn(t,e,r),o)},async readDir(r){return(await n.readDirectory(Rn(t,e,r))).map(i=>i[0])},async readDirWithTypes(r){return n.readDirectory(Rn(t,e,r))},async mkdirp(r){await n.createDirectory(Rn(t,e,r))},async toCommonURI(r){return Rn(t,e,r)}}}var zy=class{async readDocument(e){try{let n=Pt.workspace.textDocuments.find(o=>o.uri.toString()===e.toString());if(n)return n.getText();let r=await Pt.workspace.fs.readFile(e);return Buffer.from(r).toString()}catch{return}}async applyEdits(e,n,r){let o=Pt.workspace.textDocuments.find(s=>s.uri.toString()===e.toString());if(o){let s=new Pt.WorkspaceEdit;for(let a of n){let c=o.positionAt(a.offset),l=o.positionAt(a.offset+a.length);s.replace(e,new Pt.Range(c,l),a.content)}if(await Pt.workspace.applyEdit(s))return}let i=Io(r,n);await Pt.workspace.fs.writeFile(e,Buffer.from(i))}};function Jy(t){var o,i;let e=((o=/\r?\n/.exec(t))==null?void 0:o[0])||`
`,n=((i=/^\t|^ +/m.exec(t))==null?void 0:i[0])||"	",r=n[0]===" ";return{eol:e,insertSpaces:r,tabSize:r?n.length:void 0}}function Xy(){let t=qt("logLevel")||"debug";return OC(t)}var He=require("vscode");var r5=Y(require("crypto"));async function YI(t,e,n){let r=await LF(t,e,n);return r?Fa(await t.toCommonURI(r)):[]}var qI=".devcontainer-internal.json";async function LF(t,e,n){let r=AF(t,e,n),o=t.path.basename(r),i=t.path.dirname(r),s=await t.isFolder(i)?await t.readDir(i):[];for(let a of s)if(a===o||a.startsWith(`${o}-`)&&!isNaN(Number(a.substring(o.length+1)))){let c=t.path.join(i,a),l=t.path.join(c,qI);if(await t.isFile(l)){let u=Me((await t.readFile(l)).toString());if((u==null?void 0:u.rootFolder)===e.rootFolderPath)return c}}}function o5(t,e,n){return`${AF(t,e,n)}-${r5.randomUUID()}`}async function i5(t,e,n,r){let o=`// Maintained by the Dev Container extension
${JSON.stringify({rootFolder:e.rootFolderPath},void 0,"	")}`;await t.writeFile(t.path.join(r,qI),Buffer.from(o));let i=AF(t,e,n),s;for(let a=1;;a++)if(s=a>1?`${i}-${a}`:i,!await t.isFolder(s)){await t.rename(r,s);break}return s}function AF(t,e,n){return t.path.join(n,"configs",t.path.basename(e.rootFolderPath))}async function s5(t,e){await t.rm(e,{recursive:!0})}process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";process.env.APPLICATIONINSIGHTS_CONFIGURATION_CONTENT="{}";function a5(t){return t.serverDataFolderName?t.serverDataFolderName:t.quality?t.quality==="stable"?".vscode-server":t.quality==="insider"?".vscode-server-insiders":`.vscode-server-${t.quality}`:".vscode-server-oss"}var it="remote-containers.revealLogTerminal",WF="remote-containers.revealPostCreateTerminal",gm="remote-containers.openDevContainerFile",p5="remote-containers.openRepositoryInVolume",zI="remote-containers.openRepositoryInUniqueVolume",h5="remote-containers.openRepositoryFromRemoteHubWithEditSession",g5="remote-containers.openRepositoryFromGitWithEditSession",v5="remote-containers.openPullRequestInVolume",c5=new AC,Qn={onRemoveOnShutdownChangedEmitter:c5,onRemoveOnShutdownChanged:c5.event,results:new Map},pm,hn=t=>jf(t,K.env.appRoot);function eC(t,e,n,r,o,i){return async(s,a)=>{r(),K.commands.executeCommand("setContext","forwardedPortsViewEnabled",!0);let c=K.env.remoteAuthority;if(a.resolveAttempt>1){let l=n.get(c);if(!l)throw new Error("Reconnect attempt without old result.");let u=He.l10n.t("Reconnection attempt {0}",a.resolveAttempt-1),f=t.log.start(u),{cliHost:m}=l.params;if(m.reconnect){let h=`Reconnecting CLIHost ${a.execServer?"with":"without"} ExecServer.`,v=t.log.start(h);try{await m.reconnect(a.execServer)}catch(C){throw t.log.write(ot(String(C&&(C.stack||C.message)||C))),K.RemoteAuthorityResolverError.TemporarilyNotAvailable(He.l10n.t("Cannot reconnect to remote host."))}finally{t.log.stop(h,v)}}else t.log.write("CLIHost does not need reconnection.");if((await tC(m,t.log)).pauseResolver&&await w5(m,t.log),l.dockerContainerId){let h=await ai(l.dockerParams,l.dockerContainerId);if(!h)throw K.RemoteAuthorityResolverError.NotAvailable(He.l10n.t("Container no longer exists."));if(h.State.Status==="paused")throw K.RemoteAuthorityResolverError.TemporarilyNotAvailable(He.l10n.t("Container is paused."));if(h.State.Status!=="running")throw K.RemoteAuthorityResolverError.NotAvailable(He.l10n.t("Container is no longer running."))}let p=l.resolvedAuthority.port,g=bY(l.params.forwardedPorts,p);if(g){if(g.connections.size){t.log.write(`Destroying ${g.connections.size} leftover connections to forwarded port ${p}.`);for(let h of g.connections)h.destroy()}}else t.log.write(`Forwarded port ${p} not found.`);return t.log.stop(u,f),{...l.resolvedAuthority,isTrusted:l.isTrusted}}else{let l=He.l10n.t("Resolving Remote"),u=t.log.start(l),f=await i(c,a,t,e);return Hpe(f.params,f.properties).catch(m=>{}),n.set(c,f),o(),t.log.stop(l,u),K.window.withProgress({location:K.ProgressLocation.Window,title:che,cancellable:!1},async m=>{await ik(f.params.backgroundTasks)}).then(void 0,m=>{t.log.write(ot(String(m&&(m.stack||m.message)||m)))}),{...f.resolvedAuthority,...f.tunnelInformation,isTrusted:f.isTrusted}}}}async function tC(t,e){let n=t.path.join(await t.homedir(),".vscode-remote-containers","config.json");try{let r=Me((await t.readFile(n)).toString())||{},o=r.canConnectToContainer!==!1,i=r.canRebuildContainer!==!1&&o;return await K.commands.executeCommand("setContext","hideConnectCommands",!o),await K.commands.executeCommand("setContext","hideRebuildCommands",!i),{canConnectToContainer:o,canRebuildContainer:i,pauseResolver:!!r.pauseResolver}}catch(r){return r.code!=="ENOENT"&&e.write(`Error reading ${n}: ${(r==null?void 0:r.stack)||(r==null?void 0:r.message)||r}`),{canConnectToContainer:!0,canRebuildContainer:!0,pauseResolver:!1}}}async function w5(t,e){let n=He.l10n.t("Pausing resolver"),r=e.start(n),o=nw(t),i=`
const fs = require('fs');
const path = require('path');
const os = require('os');

const filepath = path.join(os.homedir(), '.vscode-remote-containers', 'config.json');

fs.watch(path.dirname(filepath), (event, filename) => {
	if (filename === path.basename(filepath)) {
		console.log(\`config.json file event: \${event}\`);
		rereadConfig(true);
	}
});
rereadConfig();
setInterval(() => {
	rereadConfig();
}, 5000);
function rereadConfig(event = false) {
	try {
		const text = fs.readFileSync(filepath, 'utf8');
		const config = JSON.parse(text);
		if (!config.pauseResolver) {
			console.log(\`config.json: Continuing... (\${event ? 'event' : 'poll'})\`);
			process.exit();
		}
		if (event) {
			console.log('config.json: Still paused.');
		}
	} catch (err) {
		console.log('config.json: Not a JSON file.');
	}
}
`;try{await X({exec:t.exec,cmd:o.cmd,args:[...o.args,"-e",i],output:sn(e,1),print:"continuous"})}catch(s){e.write(ot((s==null?void 0:s.message)||String(s)))}e.stop(n,r)}async function Hpe(t,e){if(!e.nodeExecutable)return;let n=await at(hm.join(t.extensionPath,"dist","node","remoteCloudGuesser.js"),{encoding:"utf8"}),{stdout:r}=await dc(t,e,[e.nodeExecutable,"-e",n],void 0,{silent:!0}),o=r.toString().trim();t.sendTelemetryEvent("extraInfo",{remoteCloud:o})}var FF;async function KI(t){return FF||(FF=Kl(hm.join(__dirname,"..",".."),vm,t)),FF}var Zy={};async function vm(t,e=!0){var n;if(t.counter&&((n=Zy[t.prompt])==null?void 0:n.from)===t.counter&&delete Zy[t.prompt],!Zy[t.prompt]){if(!e)return"";Zy[t.prompt]={result:Promise.resolve(K.window.showInputBox({prompt:t.prompt||He.l10n.t("Enter password"),password:!0,ignoreFocusOut:!0}).then(r=>r||"")),from:t.counter}}return Zy[t.prompt].result}async function Ze(t,e,n,r=!0,o=KI(e),i=!0){var C;let s=!n;if(s){if(Qn.results.size){let w=[...Qn.results.values()].filter(y=>y.dockerParams)[0];if(w)return K3(w.dockerParams)}if(pm)return pm}i0()&&(e.write(He.l10n.t("Getting Docker parameters for own remote.")),wm()===1&&e.write(new Error().stack,1)),n&&typeof n!="string"&&"scheme"in n&&(n.scheme==="file"?n=n.fsPath:n=Ip(n));let a,c;if(!n){let w=(K.workspace.workspaceFolders||[])[0];if(K.env.remoteName==="wsl")w?n=Ip(w.uri):n={wslDistro:ZS(K.env.remoteAuthority),wslPath:"/"};else if(K.env.remoteName==="ssh-remote"){if(c=await K.workspace.getRemoteExecServer(K.env.remoteAuthority),!c){let y=Hv(K.env.remoteAuthority);if(y){let{user:S,hostName:D,port:_}=y;a={host:`ssh://${S?`${S}@`:""}${D}${_?`:${_}`:""}`}}}(c||a)&&(w?n=w.uri.path:n="/")}else K.env.remoteName==="tunnel"?(c=await K.workspace.getRemoteExecServer(K.env.remoteAuthority),w?n=w.uri.path:n="/"):K.env.remoteName==="attached-container"?a=(C=nd(K.env.remoteAuthority))==null?void 0:C.settings:(w==null?void 0:w.uri.scheme)==="file"&&(n=w.uri.fsPath);n||(n=process.cwd())}let l=a&&"host"in a&&a.host||void 0,u=r?ts():{executeInWSL:"never",defaultDistro:void 0},f=await Rv(K.env.appRoot),m=Xr(c?{server:c,authority:K.env.remoteAuthority}:void 0,l,n,hn,u,t.extensionPath,await _r(),f,e,Si,{sshAskpassEnv:o,settings:ig()});i&&!await Promise.race([m,Bt(1e3)])&&await K.window.withProgress({location:K.ProgressLocation.Notification,title:`[${He.l10n.t("Setting up Dev Containers (show log)")}](command:${it} "${He.l10n.t("Show details in terminal")}")`,cancellable:!1},async()=>{await m});let d=await m,p=Ms(),g=Ua();if(!a){let w=K.workspace.getConfiguration("containers"),y=K.workspace.getConfiguration("docker"),S=w.get("environment")||{},D=y.get("environment")||{},_=S.DOCKER_CONTEXT||D.DOCKER_CONTEXT||y.get("context")||d.env.DOCKER_CONTEXT;if(!_){let A={cliHost:d,dockerCLI:p,dockerComposeCLI:Cs({exec:d.exec,env:{},output:Fe},p,g),dockerComposePath:g,env:{},output:Fe};_=await Rk(A)||"default"}_&&_!=="default"?a={context:_}:(a={...dr(d.env),...["host","certPath","tlsVerify"].reduce((A,U)=>Bpe(A,y,U),{}),...dr({...D,...S})},Object.keys(a).length||(a=void 0))}let h={...d.type==="local"?await o:void 0,...await td(d,a)},v={cliHost:d,dockerCLI:p,dockerComposeCLI:Cs({exec:d.exec,env:h,output:e},p,g),dockerComposePath:g,env:h,output:e};return s&&(pm=v,jF(t,f),await tC(v.cliHost,e)),v}async function y5(){if(!K.env.remoteName||K.env.remoteName==="test")return process.platform;if(K.env.remoteName==="ssh-remote"||K.env.remoteName==="tunnel"){let t=await K.workspace.getRemoteExecServer(K.env.remoteAuthority);if(t)return(await t.env()).osPlatform}return"linux"}var GI;function jF(t,e){if(GI)return GI;let n=Vpe(t,e);return t.subscriptions.push(n),t.subscriptions.push(n.event(()=>{let r=pm==null?void 0:pm.cliHost;pm=void 0,r!=null&&r.terminate&&r.terminate()})),GI=n.event,GI}function Bpe(t,e,n){let r=e.get(n);return r&&(t[n]=r),t}var Wpe=["docker.context","docker.host","docker.certPath","docker.tlsVerify","docker.environment","containers.environment"],jpe=["dockerPath","dockerComposePath","executeInWSL","executeInWSLDistro"];function Vpe(t,e){let n=new K.EventEmitter,r=K.workspace.onDidChangeConfiguration(async l=>{(Wpe.some(u=>l.affectsConfiguration(u))||jpe.some(u=>NF(l,u)))&&n.fire()}),o,i,s,a=()=>{(async()=>{i||(i=await Xr(void 0,void 0,process.cwd(),hn,ts(),t.extensionPath,await _r(),e,Fe,Si));let l={cliHost:i,dockerCLI:Ms(),dockerComposeCLI:Cs({exec:i.exec,env:{},output:Fe},Ms(),Ua()),dockerComposePath:Ua(),env:{},output:Fe},u=await Rk(l);u===void 0?s=setTimeout(a,120*1e3):(u!==o&&(o!==void 0&&n.fire(),o=u),s=setTimeout(a,2*1e3))})().catch(console.error)};a();let c=n.dispose;return n.dispose=()=>{r.dispose(),s&&clearTimeout(s),c.call(n)},n}function Ju(){let t=K.workspace.workspaceFolders;if((t==null?void 0:t.length)===1){let e=t[0].uri;return VF(e)}return null}function VF(t){if(t&&t.scheme==="vscode-remote"&&/dev-container\+(.*)/.exec(t.authority)){let n=uo(t.authority);if(un(n))return null;if(lo(n)&&n.inspectVolume&&n.inspectVolume===!0)return n}return null}function JI(t){return{getConfigurationState:()=>t.get("configurationState"),updateConfigurationState:async e=>t.update("configurationState",e),containerOutdated:Ype}}async function Ype(t){let e="Rebuild",n="Ignore",r=await K.window.showInformationMessage(He.l10n.t("Configuration file(s) changed: {0}. The container might need to be rebuilt to apply the changes.",t.join(", ")),e,n);if(r===e)return K.commands.executeCommand("remote-containers.rebuildContainer");if(r===n)return"ignore"}var OF="remote.defaultExtensionsIfInstalledLocally",l5="dev.containers.defaultExtensionsIfInstalledLocally";async function C5(){let t=K.workspace.getConfiguration(),e=t.get(l5);if(!e)return;let n=t.inspect(OF);if(!(n!=null&&n.globalValue))await t.update(OF,e,K.ConfigurationTarget.Global);else{let r=n.globalValue.slice(),o=n.globalValue.map(i=>i.toLowerCase());for(let i of e){let s=i.toLowerCase();o.includes(s)||r.push(i)}await t.update(OF,r,K.ConfigurationTarget.Global)}await t.update(l5,void 0,K.ConfigurationTarget.Global)}function qpe(t){return t?u5():Array.from(new Set([...qt("defaultExtensions")||[],...u5()]))}function E5(){return Ju()?{}:qt("defaultFeatures")||{}}function u5(){let t=K.env.language,e=t.indexOf("-"),n=f5(t)||(e!==-1?f5(t.substr(0,e)):void 0);return n?[n]:[]}function f5(t){let e=t.toLowerCase();return K.extensions.all.filter(n=>{var o;let r=n.packageJSON&&n.packageJSON.contributes;return(o=r==null?void 0:r.localizations)!=null&&o.length?!!r.localizations.find(i=>{var s;return((s=i==null?void 0:i.languageId)==null?void 0:s.toLowerCase())===e}):!1}).map(n=>n.id)[0]}function d5(){return!!K.workspace.getConfiguration().get("workbench.enableExperiments")}function Gpe(){return!!qt("enableWebAccess")}function XI(){return qt("workspaceMountConsistency")||"cached"}async function ZI(t,e,n){if(t.type!=="local")try{let r=t.path.join(await t.homedir(),a5(e),"data","Machine","settings.json"),o=await t.readFile(r),i=Me(o.toString());return(i==null?void 0:i["dev.containers.gpuAvailability"])||"detect"}catch(r){return(r==null?void 0:r.code)!=="ENOENT"&&n.write(ot(String(r&&(r.stack||r.message)||r))),"detect"}return qt("gpuAvailability")||"detect"}function QI(){return qt("cacheVolume")??!0}function zpe(){let t=qt("copyGitConfig");return typeof t=="boolean"?t:!0}function Kpe(){return qt("gitCredentialHelperConfigLocation")||"global"}function Jpe(){let t=qt("dockerCredentialHelper");return typeof t=="boolean"?t:!0}function Xpe(){let t=qt("githubCLILoginWithToken");return typeof t=="boolean"?t:!0}function Zpe(){let t=qt("mountWaylandSocket");return typeof t=="boolean"?t:!0}function Ms(){return qt("dockerPath")||"docker"}function e0(){return qt("dockerSocketPath")||"/var/run/docker.sock"}function ts(){return{executeInWSL:YF(),defaultDistro:t0()}}function YF(){return process.platform!=="win32"?"never":qt("executeInWSL")?"always":"forWSLPath"}function t0(){if(process.platform==="win32")return qt("executeInWSLDistro")||void 0}function Qpe(){return process.platform==="win32"&&qt("forwardWSLServices")!==!1}function Ua(){return qt("dockerComposePath")||"docker-compose"}function n0(){return qt("experimentalLockfile")||!1}function qF(){let t=qt("optimisticallyLaunchDocker");return typeof t=="boolean"?t:!0}function wm(){let t=qt("logLevel")||"debug";return OC(t)}var ehe=t=>K.workspace.onDidChangeConfiguration(e=>{NF(e,"logLevel")&&t(wm())});function the(){let t=K.workspace.getConfiguration(),e=n=>(t.get(Nl(n),"")||t.get(n,"")).trim();return{repository:e("dotfiles.repository")||void 0,installCommand:e("dotfiles.installCommand")||void 0,targetPath:e("dotfiles.targetPath")||"~/dotfiles"}}function ig(){let t=K.workspace.getConfiguration();return{executablePath:t.get("remote.SSH.path"),executableArgs:wm()===1?["-v"]:void 0,configFilePath:t.get("remote.SSH.configFile")}}function ns(t,e,n,r,o,i,s,a,c){var m,d;let l={resolver:e,outcome:n};if(o){l.hostType=o.cliHost.type;let p=o.cliHost.authority;if(p){let g=p.indexOf("+");g!==-1&&(l.hostAuthority=p.substring(0,g))}}i&&(l.configProperties=JSON.stringify(Object.keys(i)),l.configExtensions=JSON.stringify(((d=(m=i.customizations)==null?void 0:m.vscode)==null?void 0:d.extensions)||[]),l.configFeatures=JSON.stringify(Object.keys(i.features||{}).map(p=>uf(p))),"image"in i?l.configType="image":Oo(i)?l.configType="dockerfile":"dockerComposeFile"in i&&(l.configType="dockerCompose")),s&&(l.configLocation=s),a&&(l.hardwareId=a.osRelease.hardware,l.osReleaseId=a.osRelease.id,l.osReleaseVersion=a.osRelease.version);let u=c&&c.originalError,f=u&&(u.stack||u.message||String(u))||c&&c.description;f&&(l.errorMessage=f),c!=null&&c.step&&(l.step=c.step),t.sendTelemetryEvent("resolver",l,{sessionTimeInMs:Date.now()-r.getTime()})}var UF=class{constructor(e){this.onClose=e}writeEmitter=new K.EventEmitter;onDidWrite=this.writeEmitter.event;inputEmitter=new K.EventEmitter;onDidInput=this.inputEmitter.event;queue=[];ready=!1;open(){this.ready=!0,this.queue.forEach(e=>this.writeEmitter.fire(e))}close(){this.ready=!1,this.onClose()}write(e){this.queue.push(e),this.ready&&this.writeEmitter.fire(e)}handleInput(e){this.inputEmitter.fire(e)}},Qy=class{constructor(e,n,r=void 0){this.sessionStart=n;let o=i=>{this.outputTerminal.write(i),this.revealOnNextOutput&&(this.revealOnNextOutput=!1,this.show())};this.logFilePath=e?hm.join(e,`remoteContainers-${n.toISOString().replace(/:/g,"-")}.log`):void 0,this.log=nhe(o,wm,this.logFilePath,n,r),Object.defineProperty(this.log,"dimensions",{get:()=>{var i;return(i=this._terminal)==null?void 0:i.dimensions}}),this.log.onDidChangeDimensions=i=>K.window.onDidChangeTerminalDimensions(s=>{s.terminal===this._terminal&&i(s.dimensions)})}_terminal;outputTerminal=new UF(()=>this._terminal=void 0);onDidInput=this.outputTerminal.onDidInput;_name=He.l10n.t("Dev Containers");_revealOnNextOutput=!1;log;logFilePath;get name(){return this._name}set name(e){this._name=e}get revealOnNextOutput(){return this._revealOnNextOutput}set revealOnNextOutput(e){this._revealOnNextOutput=e}show(){this._terminal||(this._terminal=K.window.createTerminal({name:this.name,pty:this.outputTerminal})),this._terminal.show()}dispose(){this._terminal&&this._terminal.dispose()}get shown(){return!!this._terminal}};function nhe(t,e,n,r,o=void 0){let i=[];return n&&i.push(z0(n,()=>Math.min(2,e()))),i.push(K0(t,e,r)),i.push(rhe()),sn(G0(i,o))}function rhe(){return{event(t){t.type==="notification"&&K.window.showInformationMessage(t.message,He.l10n.t("Dismiss"))}}}async function GF(t,e){let n=await ai(t,e.Id);if(n&&n.State.Status==="running")try{await et(t,"stop",n.Id)}catch(r){K.window.showErrorMessage(He.l10n.t("Error stopping container: {0}",r.message))}}async function r0(t,e){let n=await ai(t,e.Id);if(n&&n.State.Status!=="running")try{await et(t,"start",n.Id)}catch(r){K.window.showErrorMessage(He.l10n.t("Error starting container: {0}",r.message))}}async function S5(t,e){try{await et(t,"rm",e)}catch(n){K.window.showErrorMessage(He.l10n.t("Error removing container: {0}",n.message))}}async function zF(t,e){try{await et(t,"volume","rm","--force",e)}catch(n){K.window.showErrorMessage(He.l10n.t("Error removing volume: {0}",n.message))}}function ohe(){return K.env.sessionId!=="someValue.sessionId"?K.env.sessionId:`${K.env.sessionId}_${Date.now()}`}function ihe(t,e){let n=K.workspace.registerResourceLabelFormatter({scheme:"vscode-remote",authority:t.authority,formatting:{label:"${path}",separator:"/",workspaceSuffix:e,tildify:!0}});t.shutdowns.push(n.dispose.bind(n))}async function x5(t,e){if(t.globalState.get("removeOnStartup")===e)return await t.globalState.update("removeOnStartup",null),!0;let n=t.workspaceState.get("removeOnStartup",!1);return n&&await t.workspaceState.update("removeOnStartup",null),n}async function _5(t,e){await t.workspaceState.update("removeOnStartup",e)}async function KF(t,e){await t.globalState.update("removeOnStartup",e)}async function D5(t,e){return t.globalState.get("buildNoCache")===e?(await t.globalState.update("buildNoCache",null),!0):!1}async function nC(t,e){await t.globalState.update("buildNoCache",e)}async function sg(t,e,n,r,o){await t.globalState.update("openEditorsOnStartup",{workspaceFolder:e,fileWithError:n==null?void 0:n.toString(),logFile:r,openLog:o})}async function I5(t){var n;let e=t.globalState.get("openEditorsOnStartup");if(e){await t.globalState.update("openEditorsOnStartup",void 0);let r=(n=K.workspace.workspaceFolders)==null?void 0:n.some(i=>i.uri.fsPath===e.workspaceFolder||i.uri.path===e.workspaceFolder),o=await Ju();if(r||o&&o.repositoryPath===e.workspaceFolder&&(r=!0),r){let i=e.fileWithError?Ce.parse(e.fileWithError):void 0;if(e.openLog==="onTheSide"&&await m5(i),e.openLog&&e.logFile){let s={viewColumn:e.openLog==="onTheSide"?K.ViewColumn.Beside:K.ViewColumn.One,preserveFocus:!0},a=await K.window.showTextDocument(K.Uri.file(e.logFile),s),c=new K.Position(a.document.lineCount-1,0);a.selection=new K.Selection(c,c),a.revealRange(a.selection)}return e.openLog!=="onTheSide"&&await m5(i),!0}}return!1}function P5(t){return[`vscode-remote:/workspaces/${t}/.devcontainer/devcontainer.json`,`vscode-remote:/workspaces/${t}/.devcontainer.json`]}async function m5(t){return t?K.commands.executeCommand("vscode.open",K.Uri.parse(t.toString()),{viewColumn:K.ViewColumn.One}):K.commands.executeCommand("remote-containers.openDevContainerFile",void 0,{viewColumn:K.ViewColumn.One})}async function o0(t,e,n,r){return!r&&Qn.results.size?[...Qn.results.values()].filter(o=>o.config).map(o=>({type:o.configLocationType||"unknown",uri:o.configWorkspaceURI||o.config.configFilePath,fileHost:t})):(await Promise.all([!r||r==="workspace"?Fa().then(o=>o.map(i=>({type:"workspace",uri:i,fileHost:t}))):[],!r||r==="repositoryConfig"?JF(t,e).then(o=>o.map(i=>({type:"repositoryConfig",uri:i,fileHost:Oa(process.platform,i.with({path:hm.posix.dirname(i.path)}))}))):[],n&&(!r||r==="userData")?YI(t,e,n).then(o=>o.map(i=>({type:"userData",uri:i,fileHost:t}))):[]])).flat()}async function JF(t,e){let n=rC();if(n.length){let r=await NS(t,e,Fe);if(r!=null&&r.length){let o=Kx(r,n);return(await Promise.all(o.map(s=>Fa(Ce.file(s))))).flat()}}return[]}function rC(){return qt("repositoryConfigurationPaths")||[]}async function tl(t,e){if(e.type==="local")return t.globalStoragePath}async function she(t,e,n="localhost"){await K.workspace.openTunnel({remoteAddress:{host:n,port:e}})}function b5(t,e){let n=new Qy(void 0,e);n.name=He.l10n.t("Configuring..."),n.revealOnNextOutput=!0;let r=!1;n.onDidInput(()=>{r&&(r=!1,n.dispose())});let o,i={enabled:!0,skipNonBlocking:!1,output:sY(n.log,"postCreate",t),onDidInput:n.onDidInput,done:()=>{n.shown&&(n.log.raw(`\x1B[1m${He.l10n.t("Done. Press any key to close the terminal.")}\x1B[0m`),r=!0),o()},promise:new Promise(s=>o=s)};return{channel:n,postCreate:i}}async function Xu(t){let{authority:e,extensionContext:n,sessionStart:r,progress:o,cliHost:i,env:s,cwd:a,wslSettings:c,isLocalContainer:l,telemetry:u,onDidInput:f,output:m,logFilePath:d,allowSystemConfigChange:p,postCreate:g}=t,h=Gpe(),v=ohe(),C=await _r(),w;if(i.type!=="wsl"&&Qpe())try{w=await QS(void 0,c,n.extensionPath,C,u.product,hn,m,Si)}catch(S){m.write("Could not connect to WSL."),m.write((S==null?void 0:S.message)||String(S)),S!=null&&S.stdout&&m.write(S.stdout.toString()),S!=null&&S.stderr&&m.write(S.stderr.toString())}let y={computeExtensionHostEnv:!0,...u,appRoot:K.env.appRoot,localCacheFolder:C,containerSessionDataFolder:hm.posix.join("/tmp",`devcontainers-${v}`),extensionPath:n.extensionPath,sessionId:v,sessionStart:r,authority:e,cliHost:i,hostConfig:await tC(i,m),env:s,cwd:a,isLocalContainer:l,getAdditionalExtensionsToInstall:qpe.bind(void 0),additionalFeaturesToInstall:E5(),isCopyGitConfigEnabled:zpe(),credentialHelperConfigLocation:Kpe(),isDockerCredentialHelperEnabled:Jpe(),isGitHubCLILoginWithTokenEnabled:Xpe(),dotfilesConfiguration:the(),progress:fhe(o),onDidInput:f,output:m,logFilePath:d,allowSystemConfigChange:p,defaultUserEnvProbe:"loginInteractiveShell",postCreate:g,getTelemetryLevel:()=>u.getTelemetryLevel(),forwardServerPort:!0,web:h,getLogLevel:wm,onDidChangeLogLevel:ehe,loadNativeModule:hn,shutdowns:[],forwardedPorts:new Set,backgroundTasks:[],setWorkspaceName:S=>ihe(y,S),openTunnel:she,getTunnels:()=>Promise.resolve(K.workspace.tunnels),onAdoptProcess:K.window.onDidOpenTerminal,persistedFolder:await J3(i,n.globalStoragePath),alternateDownload:Si,skipPostAttach:!1,wslCLIHost:w,localWaylandSocket:l?await ahe(i,w,m):void 0,globalState:n.globalState};return y.hostConfig.pauseResolver&&await w5(i,m),y}async function ahe(t,e,n){if(!Zpe())return;let r=await UR(t);if(r)return r;let o=e&&await UR(e);if(o)return qV(e,o,n)}async function Si(t,e){let n=await K.commands.executeCommand("_workbench.downloadResource",K.Uri.parse(t));if(!n)throw new pe({description:He.l10n.t("Downloading the VS Code Server failed. Please try again later.")});await sl(n.fsPath,e)}var Zu=`[${He.l10n.t("Connecting to Dev Container (show log)")}](command:${it} "${He.l10n.t("Show details in terminal")}")`,che=`[${He.l10n.t("Configuring Dev Container (show log)")}](command:${WF} "${He.l10n.t("Show details in terminal")}")`,lhe=`[${He.l10n.t("Reading Dev Container Configuration (show log)")}](command:${it} "${He.l10n.t("Show details in terminal")}")`,uhe={0:"",1:He.l10n.t("Cloning Repository"),2:He.l10n.t("Building image"),3:He.l10n.t("Starting container"),4:He.l10n.t("Installing server"),5:He.l10n.t("Starting server"),6:""};function fhe(t){let e=0;return n=>{let r=6-n,o=(100-e)/(r+1);t.report({message:uhe[n],increment:o}),e+=o}}function T5(t,e,n){let{name:r,publisher:o,version:i,aiKey:s}=e;if(!s)return c1(e,n);let a=o?`${o}.${r}`:r,c=new Gy(s);t.subscriptions.push(c);let l=new MF(c),u=dhe(n),f=d5()?(0,Ku.getExperimentationService)(a,i,u,l,t.globalState):void 0;return{sendTelemetryEvent:l.sendTelemetryEvent.bind(l),isCachedFlightEnabled:async m=>f&&d5()?f.isCachedFlightEnabled(m):!1,product:n,package:e,getTelemetryLevel:()=>c.telemetryLevel}}var MF=class{constructor(e){this.baseReporter=e}sharedProperties={};sendTelemetryEvent(e,n,r){this.baseReporter.sendTelemetryEvent(e,{...this.sharedProperties,...n},r)}setSharedProperty(e,n){this.sharedProperties[e]=n}postEvent(e,n){let r={};for(let[o,i]of n)r[o]=i;this.sendTelemetryEvent(e,r)}};function dhe(t){switch(t.quality){case"stable":return Ku.TargetPopulation.Public;case"insider":return Ku.TargetPopulation.Insiders;case"exploration":return Ku.TargetPopulation.Internal;case void 0:return Ku.TargetPopulation.Team;default:return Ku.TargetPopulation.Public}}var oC=He.l10n.t("Opening a folder in a Dev Container may execute arbitrary code both inside and outside the container."),$F="userConfirmedCloneRepositoryInDevContainerRequiresTrust";async function iC(t,e){if(e!=null&&e.toLowerCase().startsWith("https://github.com/microsoft/vscode-remote-try-")||t.globalState.get($F))return!0;let n=He.l10n.t("Got It"),r=He.l10n.t("Learn More"),o=await K.window.showWarningMessage(He.l10n.t("Cloning a repository in a Dev Container may execute arbitrary code."),{modal:!0,detail:He.l10n.t("Only clone a repository in a Dev Container if you trust its authors.")},n,r);return o===n?(await t.globalState.update($F,!0),!0):(o===r&&K.env.openExternal(K.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}var HF="userConfirmedAttachToContainerRequiresTrust";async function $s(t){if(t.globalState.get(HF))return!0;let e=He.l10n.t("Got It"),n=He.l10n.t("Learn More"),r=await K.window.showWarningMessage(He.l10n.t("Attaching to a container may execute arbitrary code."),{modal:!0,detail:He.l10n.t("Only attach to a container if you trust its origin.")},e,n);return r===e?(await t.globalState.update(HF,!0),!0):(r===n&&K.env.openExternal(K.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}function R5(t){t.globalState.setKeysForSync([$F,HF,BF])}function k5(){let t=process.env.PATH||"";process.platform==="darwin"&&!/(^|:)\/usr\/local\/bin(:|$)/i.test(t)&&(process.env.PATH=`${t}:/usr/local/bin`)}var BF="updatedToPreRelease2",mhe="2022-01-19T05:14:31.474Z";async function N5(t,e){try{e.quality==="insider"&&e.date&&e.date.localeCompare(mhe)>=0&&!t.globalState.get(BF,!1)&&(await t.globalState.update(BF,!0),await K.commands.executeCommand("workbench.extensions.installExtension","ms-vscode-remote.remote-containers",{installPreReleaseVersion:!0}))}catch(n){console.error(n)}}async function ag(t,e,n,r){try{return await zx(t,e,n,wm(),void 0,void 0,r)}catch{return}}async function XF(t,e,n,r){let o=(async()=>{try{return await X3(t,e,n,wm(),E5(),void 0,void 0,r)}catch{return}})(),i=await Promise.race([o,new Promise(s=>setTimeout(()=>s("timeout"),1e3))]);return i!=="timeout"?i:K.window.withProgress({location:K.ProgressLocation.Notification,title:lhe,cancellable:!0},async(s,a)=>Promise.race([o,new Promise(c=>{let l=a.onCancellationRequested(()=>{l.dispose(),c("canceled")})})]))}async function Qu(t){return K.commands.executeCommand("_workbench.addToRecentlyOpened",t)}async function L5(t,e,n,r){try{return await $p(e,t.globalState,n,r),!0}catch(o){if(!(o instanceof pe))throw o;let i=He.l10n.t("Learn More");return await K.window.showWarningMessage(o.description,{modal:!0,detail:o.detail},...o.data.learnMoreUrl?[i]:[])===i&&await K.env.openExternal(K.Uri.parse(o.data.learnMoreUrl)),!1}}async function A5(t,e){let n="";for(let r=ou(K.env.remoteAuthority);r;r=ou(r.parentAuthority)){let o=r.name==="tunnel"?await K.extensions.getExtension("ms-vscode.remote-server"):r.name==="ssh-remote"?await K.extensions.getExtension("ms-vscode-remote.remote-ssh"):void 0;o&&(n+=` over ${o.packageJSON.displayName} ${o.packageJSON.version}`)}return`Dev Containers ${t.version}${n} in VS Code ${K.version} (${e.commit||"out-of-source"}).`}function F5(t){i0()&&(async()=>await Promise.race([t,new Promise(n=>setTimeout(()=>n("timeout"),1e4))])==="timeout"&&await K.window.withProgress({location:K.ProgressLocation.Notification,title:`[${He.l10n.t("Dev Containers waiting for connection request (show log)")}](command:${it} "${He.l10n.t("Show details in terminal")}")`},async()=>t))()}var phe=["dev-container","attached-container","k8s-container","apple-container"];function i0(){return K.env.remoteName&&phe.includes(K.env.remoteName)}var nl={id:"openDocumentation",title:xi.l10n.t("Open Documentation"),isLastAction:!1,applicable:(t,e)=>!e,execute:async t=>{await Mt.env.openExternal(Mt.Uri.parse("https://aka.ms/vscode-remote/container/resolve-failed"))}},rl={id:"reloadWindow",title:xi.l10n.t("Reload Window"),isLastAction:!0,applicable:(t,e)=>!e&&t.data.reload!==!1,execute:async t=>{t.manageContainer&&t.dockerParams&&t.containerId&&await et(t.dockerParams,"stop","-t","0",t.containerId),await Mt.commands.executeCommand("workbench.action.reloadWindow")}},U5={id:"rebuildContainer",title:xi.l10n.t("Rebuild Container"),isLastAction:!0,applicable:(t,e)=>t.manageContainer&&!!t.dockerParams&&!!t.containerId&&!e&&!(t.params&&"hostConfig"in t.params&&!t.params.hostConfig.canRebuildContainer),execute:async t=>{await Hi(t.dockerParams,t.containerId),await Mt.commands.executeCommand("workbench.action.reloadWindow")}},ef={id:"openRecent",title:xi.l10n.t("Open Recent..."),isLastAction:!0,applicable:(t,e)=>!e,execute:async t=>{await Mt.commands.executeCommand("workbench.action.openRecent")}},M5={id:"startContainer",title:xi.l10n.t("Start Container"),isLastAction:!0,applicable:t=>!!t.dockerParams&&!!t.containerId&&t.data.start===!0,execute:async t=>{await et(t.dockerParams,"start",t.containerId),await Mt.commands.executeCommand("workbench.action.reloadWindow")}},$5={id:"chooseContainer",title:xi.l10n.t("Choose Container"),isLastAction:!0,applicable:t=>t.data.attach===!0,execute:async()=>{await Mt.commands.executeCommand("remote-containers.attachToRunningContainer")}},Ma={id:"closeRemote",title:xi.l10n.t("Close Remote"),isLastAction:!0,applicable:(t,e)=>{if(!e)return!1;let n=Mt.workspace.workspaceFile;return!(n&&n.scheme==="untitled"||Mt.workspace.textDocuments.some(o=>o.isDirty))},execute:async t=>{await Mt.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null})}},tf=[{id:"retry",title:xi.l10n.t("Retry"),isLastAction:!0,applicable:(t,e)=>e&&t.data.reload!==!1,execute:rl.execute},{id:"moreActions",title:xi.l10n.t("More Actions..."),isCloseAffordance:!0,isLastAction:!1,applicable:(t,e)=>e,execute:async t=>{}},{id:"learnMore",title:xi.l10n.t("Learn More"),isLastAction:!1,applicable:(t,e)=>e&&!!t.data.learnMoreUrl,async execute(t){await Mt.env.openExternal(Mt.Uri.parse(t.data.learnMoreUrl))}}];async function $a(t,e,n,r=!1,o){var d,p,g,h,v,C;let i=t instanceof pe?t:new pe({description:xi.l10n.t("An error occurred setting up the container."),originalError:t});Mt.commands.executeCommand(it);let s=i.originalError&&(i.originalError.stack||i.originalError.message)||i.originalError;if(s!==void 0){o.write(ot(String(s)));let w=(p=(d=i.originalError)==null?void 0:d.stdout)==null?void 0:p.toString().trim();w&&o.write(w);let y=(h=(g=i.originalError)==null?void 0:g.stderr)==null?void 0:h.toString().trim();y&&o.write(ot(y)),(v=i.originalError)!=null&&v.code&&o.write(`Exit code ${(C=i.originalError)==null?void 0:C.code}`)}if(i.data.closeRemote)throw await Mt.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),Mt.RemoteAuthorityResolverError.NotAvailable(void 0,!1);let a=i.actions;a.length||(a=[nl]);let c=await a.reduce(async(w,y)=>await y.applicable(i,!0)?[...await w,y]:w,Promise.resolve([])),l=await Mt.window.showErrorMessage(i.description,{modal:!0,detail:i.detail},...c);if(l&&(O5(n,e,l.id),await l.execute(i)),l&&l.isLastAction){if(r)throw Mt.RemoteAuthorityResolverError.NotAvailable(void 0,!0);return}let u=await a.reduce(async(w,y)=>await y.applicable(i,!1)?[...await w,y]:w,Promise.resolve([])),f=u.map(w=>({label:w.title,action:w}));async function m(){let y=await(u.length?Mt.window.showQuickPick(f,{ignoreFocusOut:!0,placeHolder:xi.l10n.t("Pick an action to help resolve the problem.")}):Promise.resolve(void 0));y&&(O5(n,e,y.action.id),y.action.execute(i).catch(console.error),y.action.isLastAction||await m())}if(m().catch(console.error),r)throw Mt.RemoteAuthorityResolverError.NotAvailable(void 0,!0)}function O5(t,e,n){t.sendTelemetryEvent("errorAction",{resolver:e,action:n})}var gn=Y(require("vscode")),Kt=require("vscode"),Ha=Y(require("path"));var fe=Y(require("vscode")),zt=require("vscode");var r8=Y(_T());function H5(t){var e;return(e=t.options)!=null&&e.version?"version":void 0}var mg=Y(require("path"));async function nf(t){let r=await Gx({type:"GET",url:"https://containers.dev/static/devcontainer-index.json",headers:{"user-agent":"devcontainers-vscode",Accept:"application/json"}},t),o=Me(r.toString());return o.collections.find(i=>i.templates.length)||t.write("No container templates retrieved from index.",5),o.collections.find(i=>i.features.length)||t.write("No container features retrieved from index.",5),o}var Lt=Y(require("vscode")),st=require("vscode"),lC=Y(require("os"));var cC=Y(require("path"));var In=Y(require("vscode")),Gt=require("vscode");var B5=Gt.l10n.t("Keep Defaults"),hhe=Gt.l10n.t("Configure Options"),sC={iconPath:new In.ThemeIcon("check-all"),tooltip:Gt.l10n.t("Finish")},ZF=["devcontainers","microsoft","github"];async function cg(t,e,n,r=[],o,i=!0,s=!1){if(!e.length)return{};let a={iconPath:new In.ThemeIcon("info"),tooltip:Gt.l10n.t("Open Documentation")},c=t.quickPick.onDidTriggerItemButton(y=>{let S=y.item.feature.documentationURL;In.env.openExternal(In.Uri.parse(S))}),l=await o,u=Gt.l10n.t("Suggested by GitHub Copilot"),f=e.map(y=>{let S=r.indexOf(y)!==-1,D;if(S)D=Gt.l10n.t("$(lock) Feature is included in base image and cannot be removed");else if(y.owner){let A=y.owner==="devcontainers"?"$(verified)":"";D=`${y.owner||Gt.l10n.t("Unknown Publisher")} ${A}`}else D=void 0;let _=l==null?void 0:l.features.includes(y);return{label:_?`$(sparkle) ${y.name}`:y.name,detail:y.description,description:_?D?`${D} ${u}`:u:D,picked:n.indexOf(y)!==-1,buttons:y.documentationURL?[a]:void 0,feature:y,isAlreadyInstalledViaBaseImage:S,kind:In.QuickPickItemKind.Default}}).sort((y,S)=>{if(y.isAlreadyInstalledViaBaseImage!==S.isAlreadyInstalledViaBaseImage)return y.isAlreadyInstalledViaBaseImage?1:-1;let D=l==null?void 0:l.features.includes(y.feature),_=l==null?void 0:l.features.includes(S.feature);return D!==_?D?-1:1:y.label.localeCompare(S.label)}),m,d=t.quickPick,{matchOnDetail:p}=d;try{d.matchOnDetail=!0;let y=[];s&&y.push(In.QuickInputButtons.Back),i&&y.push(sC),m=await Eo(d,f,Gt.l10n.t("Select additional features to install"),Gt.l10n.t("Select Features"),!0,y)}finally{d.matchOnDetail=p}if(c.dispose(),!m)return;if(m.button===In.QuickInputButtons.Back)return"back";let g=m.pick.filter(y=>!y.isAlreadyInstalledViaBaseImage).map(y=>y.feature),h={};if(!g.length)return h;let v=[];for(let y of e){let S=g.indexOf(y)!==-1;h[y.id]=S?{}:!1,S&&ZF.indexOf(y.owner)===-1&&v.push(y)}if(t.askForTrust&&v.length){let y=[...new Set(v.map(E=>E.owner))].sort().map(E=>`@${E}`),S=y.length===1?y[0]:`${y.slice(0,-1).join(", ")} and ${y[y.length-1]}`,D={label:Gt.l10n.t("Trust {0}",S),description:Gt.l10n.t("from GitHub"),buttons:[{iconPath:new In.ThemeIcon("info"),tooltip:Gt.l10n.t("Open Documentation")}]},_={label:Gt.l10n.t("Back")},A={label:Gt.l10n.t("Cancel")},U=d.onDidTriggerItemButton(()=>{for(let E of v)In.env.openExternal(In.Uri.parse(E.documentationURL))}),k=await Eo(d,[D,_,A],Gt.l10n.t("Some features are from the {0} GitHub owner/organization(s).",S),void 0,void 0,!0);if(U.dispose(),!k||k===A)return;if(k==="back"||k===_)return cg(t,e,n,r,o,i,s)}return m.button===sC||!i||!g.some(y=>{let S=y.options;return S&&Object.keys(S).some(D=>{let _=S[D];return _.type==="boolean"||_.type==="string"&&("enum"in _&&(_.enum||[]).length>1||"proposals"in _&&(_.proposals||[]).length>1)})})||await In.window.showQuickPick([B5,hhe],{title:Gt.l10n.t("Keep Feature defaults or configure options?"),canPickMany:!1})===B5?h:ghe(t,h,g,()=>cg(t,e,n,r,o))}async function ghe(t,e,n,r){return(async function o(i,s,a){if(!s.length)return i;let c=s[0],l=i;if(!(c!=null&&c.options))return o(l,s.slice(1),a);let u,f;return u=await vhe(t,l,c),u&&(f=await whe(t,u,c,a)),!u||!f?await a():o(f,s.slice(1),a)})(e,n,r)}async function vhe(t,e,n){let r=n==null?void 0:n.options;if(!r)return e;let i=Object.keys(r).filter(l=>{var u;return((u=r[l])==null?void 0:u.type)==="boolean"}).map(l=>{let u=r[l];return{label:l,description:u.description,key:l,value:!0,picked:!!(u!=null&&u.default)}});if(!i.length)return e;let s=n.id,a=n.name||s,c=await Eo(t.quickPick,i,Gt.l10n.t("Select boolean options for {0}",a),Gt.l10n.t("Select boolean options for '{0}'",a),!0,[In.QuickInputButtons.Back,sC]);if(!(!c||c.button===In.QuickInputButtons.Back))return c.pick.reduce((l,u)=>({...l,[s]:{...l==null?void 0:l[s],[u.key]:u.value}}),e)}async function whe(t,e,n,r){let o=n==null?void 0:n.options;if(!o)return e;let i=n.id,s=n.name||i;return(async function a(c,l,u){if(!l.length)return c;let f=l[0],m=o[f],d=("enum"in m&&m.enum||"proposals"in m&&m.proposals||[]).map(v=>({label:String(v),value:v,description:m.default===v?Gt.l10n.t("(default)"):void 0}));if(d.length===0)return a(c,l.slice(1),u);let p="enum"in m?void 0:v=>{if(!(!v||d.some(C=>C.value===v)))return{label:Gt.l10n.t("Use: {0}",v),value:v,description:Gt.l10n.t("(custom)")}},g=d.length===1?{pick:d[0],button:"ok"}:await Eo(t.quickPick,d,m.description||Gt.l10n.t("Select a value"),Gt.l10n.t("Select options for '{0}'",s),void 0,[In.QuickInputButtons.Back,sC],p);if(!g||g.button===In.QuickInputButtons.Back)return;let h={...c,[i]:{...c==null?void 0:c[i],[f]:g.pick.value}};return g.button===sC?h:a(h,l.slice(1),u)})(e,Object.keys(o).filter(a=>{var c;return((c=o[a])==null?void 0:c.type)==="string"}),r)}var yhe=["png","md","json","txt","map"],Che=["node_modules",".git","bin","out","dist",".vscode-test"],Ehe=[{tag:"function.json",pattern:/^function\.json$/i},{tag:"package.json",pattern:/^package\.json$/i},{tag:"sln",pattern:/^.+\.sln$/i},{tag:"project.json",pattern:/^project\.json$/i},{tag:"csproj",pattern:/^.+\.csproj$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"amlignore",pattern:/^.+\.amlignore$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"environment.yml",pattern:/^environment\.yml$/i},{tag:"_config.yml",pattern:/^_config\.yml$/i},{tag:"_config.toml",pattern:/^_config\.toml$/i},{tag:"server.xml",pattern:/^server\.xml$/i},{tag:"web.xml",pattern:/^web\.xml$/i}],W5={"Node.js":["package.json"],".NET Core":["sln","project.json","csproj"],"Azure Functions":["function.json"],"Azure Machine Learning":["azureml","amlignore"],Anaconda:["environment.yml"],Jekyll:["_config.yml","_config.toml"],Tomcat:["server.xml","web.xml"],Dapr:[]},j5={"C#":["cs"],"C++":["cpp","cxx",".cc","c++"],"F#":["fs"],JavaScript:["js"],TypeScript:["ts"],Java:["java"],Elm:["elm"],Go:["go"],Python:["py","ipynb"],Ruby:["rb"],Perl:["pl"],PHP:["php"],R:["r"],PowerShell:["ps1"],Dart:["dart"],Rust:["rs"],Swift:["swift"],ReasonML:["re"],TerraForm:["tf"]},She=["ghcr.io/devcontainers/templates/docker-existing-docker-compose","ghcr.io/devcontainers/templates/docker-existing-dockerfile","ghcr.io/devcontainers/templates/codespaces-linux"];function V5(t,e){let n=new Map;for(let r of e)if(r.platforms){if(She.indexOf(r.id)>-1)continue;let o=0,i=0,s=r.platforms;if(s[0]==="Any")o+=5;else for(let a of s)if(j5[a]){let c=j5[a];for(let l of c)t.fileTypes.get(l.toLowerCase())&&(o+=10),t.mostPopularFileType===l&&(o+=10)}else if(W5[a]){let c=W5[a],l=!1;for(let u of c)t.configFiles.get(u)&&(l=!0,i+=20);l||(i-=20)}n.set(r,o+(i<0?-4:i))}return n}async function Y5(t,e){return xhe(t,e.rootFolderPath,Che,yhe)}async function xhe(t,e,n,r){let o=new Map,i=new Map,s=500;function a(d,p,g,h){let v=[];(t.readDirWithTypes||t.readDir)(d).then(w=>{if(g.count>=s)return g.count+=w.length,g.maxReached=!0,h(v);let y=w.length;if(y===0)return h(v);let S=w;g.count+w.length>s&&(g.maxReached=!0,y=s-g.count,S=w.slice(0,y)),g.count+=w.length;for(let D of S){let _=Array.isArray(D)?D[0]:D;(Array.isArray(D)?Promise.resolve((D[1]&1)!==0):t.isFile(t.path.join(d,_))).then(U=>{U?(v.push(_),--y===0&&h(v)):p.indexOf(_)===-1?a(t.path.join(d,_),p,g,k=>{if(v=v.concat(k),--y===0)return h(v)}):--y===0&&h(v)},()=>{if(--y===0)return h(v)})}},()=>h(v))}let c=d=>{o.has(d)?o.set(d,o.get(d)+1):o.set(d,1)},l=d=>{for(let p of Ehe)p.pattern.test(d)&&(i.has(p.tag)?i.set(p.tag,i.get(p.tag)+1):i.set(p.tag,1))},u=d=>{if(d.lastIndexOf(".")>=0){let p=d.split(".").pop();p&&!r.includes(p)&&c(p.toLowerCase())}l(d)},f=d=>[...d.entries()].reduce((p,g)=>g[1]>p[1]?g:p,["",0])[0],m={count:0,maxReached:!1};return new Promise((d,p)=>{a(e,n,m,async g=>{g.forEach(u),d({configFiles:i,fileTypes:o,fileCount:m.count,mostPopularFileType:f(o)})})})}var _i=Y(require("vscode")),s0=require("vscode");var aC={"ghcr.io/devcontainers/templates/anaconda":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/kubernetes-helm":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-outside-of-docker","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/kubectl-helm-minikube"],"ghcr.io/devcontainers/templates/alpine":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/docker-outside-of-docker-compose":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-outside-of-docker","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/jekyll":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/ruby"],"ghcr.io/devcontainers/templates/docker-outside-of-docker":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-outside-of-docker","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/docker-in-docker":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-in-docker","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/go":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/go","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/dotnet-fsharp":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/debian":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/rust-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/rust"],"ghcr.io/devcontainers/templates/universal":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/conda","ghcr.io/devcontainers/features/docker-in-docker","ghcr.io/devcontainers/features/dotnet","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/git-lfs","ghcr.io/devcontainers/features/github-cli","ghcr.io/devcontainers/features/go","ghcr.io/devcontainers/features/hugo","ghcr.io/devcontainers/features/java","ghcr.io/devcontainers/features/kubectl-helm-minikube","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/oryx","ghcr.io/devcontainers/features/php","ghcr.io/devcontainers/features/python","ghcr.io/devcontainers/features/ruby","ghcr.io/devcontainers/features/sshd"],"ghcr.io/devcontainers/templates/python":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/markdown":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/dotnet-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/rust":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/rust"],"ghcr.io/devcontainers/templates/java-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/java","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/java":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/java","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/anaconda-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/php":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/dotnet":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/powershell":["ghcr.io/devcontainers/features/common-utils"],"ghcr.io/devcontainers/templates/kubernetes-helm-minikube":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-in-docker","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/kubectl-helm-minikube"],"ghcr.io/devcontainers/templates/postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/ruby-rails-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/ruby"],"ghcr.io/devcontainers/templates/cpp-mariadb":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/cpp":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/dotnet-mssql":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/miniconda-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/typescript-node":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/javascript-node-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/ubuntu":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/php-mariadb":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/miniconda":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/ruby":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/ruby"],"ghcr.io/devcontainers/templates/go-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/go","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/javascript-node":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/javascript-node-mongo":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"]};async function G5(t,e,n,r,o){var u;let i=await QF(t,e,n);if(i.type==="cancelled")return;if(i.type==="failure"){let f=s0.l10n.t("OK");return await _i.window.showInformationMessage(_i.l10n.t("Something went wrong. Please pick a Dev Container configuration yourself."),{modal:!0,detail:i.message},f)===f||void 0}if(!i.template){let f=s0.l10n.t("OK");return await _i.window.showInformationMessage(_i.l10n.t("GitHub Copilot did not have enough contextual information. Please pick a Dev Container configuration yourself."),{modal:!0},f)===f||void 0}let s=i.template,a=await eO(t,{id:s,name:s},void 0),c=new Set(aC[s]||[]);a.features=((u=i.features)==null?void 0:u.filter(f=>!c.has(f)).map(f=>({id:f,copilotSuggested:!0,options:{}})))||[];let l=await lg(t,e,r,o,a);return l&&Jo(t.telemetry,"copilot",a,o),l}var z5="github.copilot.devcontainer.generateDevContainerConfig",q5=6e3;async function QF(t,e,n){var i,s;let r={index:{templates:((i=t.index)==null?void 0:i.collections.filter(a=>a.sourceInformation.repository==="https://github.com/devcontainers/templates").map(a=>a.templates).flat().filter(a=>!ug.includes(a.id)).map(({id:a,name:c,description:l})=>({id:a,name:c,description:l})))||[],features:((s=t.index)==null?void 0:s.collections.filter(a=>a.sourceInformation.repository==="https://github.com/devcontainers/features").map(a=>a.features).flat().filter(a=>!a.deprecated).map(({id:a,name:c,description:l})=>({id:a,name:c,description:l})))||[]},rootUri:_i.Uri.parse((await e.toCommonURI(n.rootFolderPath)).toString())},o=new _i.CancellationTokenSource;try{return await Promise.race([_i.commands.executeCommand(z5,r,o.token),Bt(q5).then(()=>(o.cancel(),{type:"failure",message:s0.l10n.t("Timeout after {0} seconds.",q5/1e3)}))])}catch(a){return{type:"failure",message:(a==null?void 0:a.message)||String(a)}}finally{o.dispose()}}async function K5(){return(await _i.commands.getCommands()).includes(z5)}var tO=cC.default.join(__dirname,"..",".."),J5=Lt.env.appRoot,_he=t=>jf(t,J5);async function dg(t,e){let{fileHost:n,output:r}=t;r.write("Entering createDevContainerConfig_v2");let o=await n8();if(o){let i=_e(o,n.platform),s=It(n.path,i),a=await bS(n,s);if(a){let l=st.l10n.t("Continue");if(await Lt.window.showInformationMessage(st.l10n.t("The workspace could fail to open in a container: {0}",a),{modal:!0},l)!==l)return!1}let c=await oO(t,s,void 0,void 0,e);if(c){let l=await n.toCommonURI(c);l&&Lt.window.showTextDocument(Lt.Uri.parse(l.toString()))}return!!c}return!1}async function lg(t,e,n,r,o,i=(s,a)=>a){return Lt.window.withProgress({location:Lt.ProgressLocation.Notification,title:st.l10n.t("Adding Dev Container Configuration Files..."),cancellable:!1},async()=>rO(t,e,n,r,o,i))}async function X5(t){let{output:e}=t,n={executeInWSL:"forWSLPath",defaultDistro:void 0},r=await _r(),o=process.cwd();return{cliHost:await Xr(void 0,void 0,o,_he,n,tO,r,t.telemetry.product,e,void 0,void 0),dockerPath:"",dockerComposePath:"",extensionPath:tO,appRoot:J5,output:e,package:await cr(tO)}}async function rO(t,e,n,r,o,i=(s,a)=>a){let{output:s}=t;s.write(`Preparing to apply Template '${o==null?void 0:o.id}'`);let a=cC.default.join(lC.tmpdir(),`tmp-output-dir-${Date.now()}`),c=cC.default.join(lC.tmpdir(),`tmp-dir-${Date.now()}`);t.quickPick.busy=!0,t.quickPick.enabled=!1;let l=await X5(t),u;try{u=await ii(l,["templates","apply","--workspace-folder",a,"--template-id",o.id,"--template-args",o.options?JSON.stringify(o.options):"{}","--features",o.features?JSON.stringify(o.features):"[]","--tmp-dir",c,"--log-level",ro(Xy()),"--omit-paths",o.omitPaths?JSON.stringify(o.omitPaths):"[]"])}catch{let d=st.l10n.t("Show Log");await Lt.window.showErrorMessage(st.l10n.t("Application of the template failed."),{modal:!0},...t.showLogCommandId?[d]:[])===d&&Lt.commands.executeCommand(t.showLogCommandId);return}let f=st.l10n.t("Skip"),m;for(let d of u.files){s.write(`Copying file '${d}'`,1);let p=e.path.join(n,d);if(await e.isFile(p)){let v=r==="userData"?Ky(e.platform,p,lC.homedir()):d,C=await Lt.window.showInformationMessage(st.l10n.t("File '{0}' already exists, overwrite?",v),{modal:!0},f,st.l10n.t("Overwrite"));if(!C)return;if(C===f)continue}await e.mkdirp(e.path.dirname(p));let g=await at(cC.default.join(a,d)),h=i(d,g);await e.writeFile(p,h),!m&&Qv(e.path,d)&&(m=p)}return s.write("Cleaning up...",1),await cl(a,{recursive:!0,force:!0}),await cl(c,{recursive:!0,force:!0}),t.quickPick.busy=!1,t.quickPick.enabled=!0,m}async function oO(t,e,n,r,o){let{fileHost:i,telemetry:s}=t,a=await iO(t,n,!1);if(r){Jo(await s,"existsMissingImageInfo");let d=_e(r,i.platform);if(!await Lt.window.showWarningMessage(st.l10n.t("Dev Container configuration '{0}' file is missing image information. You can add this manually or overwrite with a template.",i.path.relative(e.configFolderPath,d)),{modal:!0},st.l10n.t("Use Template"))){let g=await i.toCommonURI(d);g&&Lt.window.showTextDocument(Lt.Uri.parse(g.toString()));return}}let c,l,u="workspace";if(t.userDataFolderForConfigurations){c=await LF(i,e,t.userDataFolderForConfigurations);let d=c&&await Gf(i,c),p={label:st.l10n.t("Add configuration to user data folder"),description:d?st.l10n.t("Configuration already exists"):void 0,detail:st.l10n.t("This avoids having outgoing changes in your workspace folder")},g=await Gf(i,e.configFolderPath),h={label:st.l10n.t("Add configuration to workspace"),description:g?st.l10n.t("Configuration already exists"):void 0,detail:st.l10n.t("This allows you to share the configuration with others via source control")},v=await Eo(a.quickPick,[h,p],st.l10n.t("Where would you like to create your container configuration?"));if(!v)return;v===p&&(l=c||o5(i,e,t.userDataFolderForConfigurations),u="userData")}else if(!r){let d=await c0(i,e);if(d){Jo(await s,"exists");let p=_e(d.uri,i.platform);if(!await Lt.window.showWarningMessage(st.l10n.t("Dev Container configuration '{0}' file already exists.",i.path.relative(e.configFolderPath,p)),{modal:!0},st.l10n.t("Continue"))){let h=await i.toCommonURI(p);h&&Lt.window.showTextDocument(Lt.Uri.parse(h.toString()));return}}}let f=l||e.configFolderPath,m;if((o==null?void 0:o.picker)==="copilot"){let d=await G5(a,i,e,f,u);d===!0&&(d=await fg(a,i,e,f,u,void 0)),m=d}else m=await fg(a,i,e,f,u,void 0);if(m&&l&&!c){let d=await i5(i,e,t.userDataFolderForConfigurations,l);m=i.path.resolve(d,i.path.relative(l,m))}return a.quickPick.hide(),m}async function iO(t,e,n){let r=Lt.window.createQuickPick();r.ignoreFocusOut=!0,e&&(r.title=e);let o=await nf(t.output);return{existingFilesLearnMoreLink:e8,predefinedDefinitionsLearnMoreLink:t8,...t,quickPick:r,replaceExistingConfig:!0,existingConfig:void 0,telemetry:await t.telemetry,index:o,skipOptions:n}}async function Z5(t,e,n,r,o,i,s){if(!t.index)return;let c=await a0(t,e,n,i);if(!c)return;if(c==="back")return s?s():void 0;let l=await lg(t,e,r,o,c);return l&&Jo(t.telemetry,"definition",c,o),l}var ug=["ghcr.io/devcontainers/templates/docker-existing-docker-compose","ghcr.io/devcontainers/templates/docker-existing-dockerfile"];async function a0(t,e,n,r){let{index:o}=t,i=((o==null?void 0:o.collections.map(l=>l.templates).flat())||[]).filter(l=>!ug.includes(l.id));if(!(i!=null&&i.length))return;let s=()=>a0(t,e,n,r),a=await Dhe(t,e,n,i);if(!(a!=null&&a.length))return nO(t,[],i,r,s);let c=[{label:st.l10n.t("Show All Templates..."),detail:st.l10n.t("Show all available predefined container templates."),alwaysShow:!0,type:"showAll"}];return nO(t,c,a,r,s)}async function Dhe(t,e,n,r){r=r.filter(a=>a.owner==="devcontainers");let o=t.stats||e&&n&&(t.stats=await Y5(e,n));if(!(o!=null&&o.mostPopularFileType.length))return;let i=V5(o,r);return r.filter(a=>(i.get(a)||0)>0).sort(Ihe.bind(null,i))}function Ihe(t,e,n){let r=t.get(n)||0,o=t.get(e)||0;return r-o}async function nO(t,e,n,r,o){let{index:i,predefinedDefinitionsLearnMoreLink:s,telemetry:a}=t,c={iconPath:new Lt.ThemeIcon("info"),tooltip:st.l10n.t("Open Documentation")},l=t.quickPick.onDidTriggerItemButton(p=>{let g=p.item.template.documentationURL;Lt.env.openExternal(Lt.Uri.parse(g))}),u=(async()=>{let p=await r,g=n;p!=null&&p.template&&n.indexOf(p.template)===-1&&(g=[p.template,...n]);let h=st.l10n.t("Suggested by GitHub Copilot"),v=g.map(w=>{let y;if(w.owner){let D=(w==null?void 0:w.owner)==="devcontainers"?"$(verified)":"";y=`${((w==null?void 0:w.owner)==="microsoft"&&w.id.includes("microsoft/vscode-dev-containers")?st.l10n.t("community"):w==null?void 0:w.owner)||st.l10n.t("Unknown Publisher")} ${D}`}let S=w===(p==null?void 0:p.template);return{label:S?`$(sparkle) ${w.name}`:w.name,picked:n.indexOf(w)!==-1,detail:w==null?void 0:w.description,description:S?y?`${y} ${h}`:h:y,buttons:[c],template:w}}).sort((w,y)=>w===y?0:w.template===(p==null?void 0:p.template)?-1:y.template===(p==null?void 0:p.template)?1:w.label.localeCompare(y.label));return[...e,...s?[aO]:[],...v]})(),f=p=>{let g=p.trim();if(/^\S+(\/\S+){2,}$/.test(g))return{label:st.l10n.t("Use '{0}' as template...",g),detail:st.l10n.t("Apply this custom template instead of one of the listed templates."),templateId:g}},m=st.l10n.t("Select a container configuration template or enter a custom template id"),d=await Eo(t.quickPick,u,m,void 0,void 0,void 0,f);if(l.dispose(),!d){Jo(a,"canceled");return}if(d.type==="help"){Jo(a,"help"),Lt.env.openExternal(s);return}if(d.type==="showAll"){let p=((i==null?void 0:i.collections.map(g=>g.templates).flat())||[]).filter(g=>!ug.includes(g.id));return nO(t,[],p,r,o)}if(d.template)return ym(t,d.template,r.then(p=>{var v,C;if(!p)return;let g=((i==null?void 0:i.collections.map(w=>w.features).flat())||[]).filter(w=>!w.deprecated),h=new Set([...p.features,...p.template&&((v=aC[p.template.id])==null?void 0:v.map(w=>g.find(y=>y.id===w)).filter(w=>!!w))||[]]);return(((C=aC[d.template.id])==null?void 0:C.map(w=>g.find(y=>y.id===w)).filter(w=>!!w))||[]).forEach(w=>h.delete(w)),{template:p.template,features:Array.from(h)}}),o);if(d.templateId)return ym(t,{id:d.templateId,name:d.templateId},r,o)}async function eO(t,e,n){if(!e.version){let r=await Phe(t,e.id);r&&(e={...r,id:e.id})}return{id:e.id,options:{},features:[],omitPaths:[],metadata:{template:e,features:[],copilotSuggestion:n}}}async function Phe(t,e){let{output:n}=t;n.write(`Attempting metadata fetch for Template '${e}' from remote manifest`,3);let r=await X5(t);try{return await ii(r,["templates","metadata",e,"--log-level",ro(Xy())])}catch{n.write(`Metadata for '${e}' not cached on manifest. Some features will be unavailable.`,1),n.write(`Ask the Template owner to republish '${e}' to populate the data`,1);return}}async function ym(t,e,n,r){let o=await eO(t,e,await n),i={...o.metadata.template};if(t.skipOptions)return o;if(!i.options){let u=await sO(t,o,[],n,r);return u?u==="back"?r():u:void 0}let s=i.options,a=[],c=[];for(let u in s){let f=s[u];f.name=u,f.type==="boolean"?a.push(f):f.type==="string"&&c.push(f)}let l=await The(t,c,o,async()=>"back",(u,f)=>Q5(t,a,i.name,u,n,f));if(l==="back")return r();if(l)return l}async function bhe(t,e,n,r){var o;if((o=e.optionalPaths)!=null&&o.length){let i=e.optionalPaths.map(l=>({label:l,picked:!1})),s=st.l10n.t("Optional Files/Directories"),a=st.l10n.t("Include the following optional files/directories"),c=await Eo(t.quickPick,i,a,s,!0,!0);if(c==="back")return r();c&&(n.omitPaths=i.filter(l=>!c.includes(l)).map(l=>l.label))}return n}async function The(t,e,n,r,o){let i=e.map(s=>{let a=[];s.proposals&&s.proposals.length>0?a=s.proposals:s.enum&&s.enum.length>0?a=s.enum:s.default&&(a=[s.default]);let c=s.default,l=a.map(f=>({label:f,description:f===c?st.l10n.t("(default)"):void 0,value:f})),u=l.findIndex(f=>f.value===c);return u!==-1&&l.unshift(...l.splice(u,1)),{placeholder:s.description||s.name,name:s.name,default:s.default,enum:"enum"in s,items:l}});return(async function s(a,c,l){if(!a.length)return o(c,l);let u=a[0],f=u.enum?void 0:p=>{if(!(!p||u.items.some(g=>g.value===p)))return{label:st.l10n.t("Use: {0}",p),value:p,description:st.l10n.t("(custom)")}},m=await Eo(t.quickPick,u.items,u.placeholder,void 0,void 0,!0,f);if(!m)return;if(m==="back")return l();let d={...c.options};return d[u.name]=m.value,c.options={...d},s(a.slice(1),c,()=>s(a,c,l))})(i,n,r)}async function Q5(t,e,n,r,o,i){let s=r,a=e.map(u=>{let f=u.default==="true";return{label:u.description||u.name,picked:f,name:u.name,default:f}}),c=a.length?await Eo(t.quickPick,a,st.l10n.t("Select the options for the '{0}' dev container",n),void 0,!0,!0):[];if(!c)return r;if(c==="back")return i();for(let u of a){let f=c.indexOf(u)!==-1,m={...r.options};m[u.name]=f.toString(),r.options={...m}}let l=await sO(t,r,[],o,()=>e.length>0?Q5(t,e,n,s,o,i):i());if(l)return l==="back"?i():l}async function sO(t,e,n,r,o){let{quickPick:i,telemetry:s,output:a,index:c,askForTrust:l}=t,u=c==null?void 0:c.collections.reduce((g,h)=>g.concat(h.features),[]).filter(g=>!g.deprecated);if(!(u!=null&&u.length))return e;let m=await cg({quickPick:i,askForTrust:l,telemetry:s,output:a},u,n,[],r,!0,!0);if(!m)return;if(m==="back")return o();let d=[],p=[];for(let g in m)if(m[g]){let h=u.find(v=>v.id===g);if(h){p.push(h);let v=h.majorVersion||"latest",C={id:`${g}:${v}`,options:m[g]};d.push(C)}}return e.features=d,e.metadata.features=p,await bhe(t,e.metadata.template,e,()=>sO(t,e,p,r,o))}function o8(t){return{provideCompletionItems(e,n,r){let o=r1(e.getText(),e.offsetAt(n)),i=e.getWordRangeAtPosition(n)||new fe.Range(n,n);if(o.path[0]==="extensions"||o.path[0]==="vscode"&&o.path[1]==="extensions"){let s=Me(e.getText());return s.configFilePath=e.uri,Rhe(s,i)}if(o.path[0]==="features"){let s=Me(e.getText());s.configFilePath=e.uri;try{return khe(t,s,o,i)}catch(a){console.error(a)}}return[]}}}function Rhe(t,e){var r,o;let n=((t==null?void 0:t.extensions)||[]).concat(((o=(r=t==null?void 0:t.customizations)==null?void 0:r.vscode)==null?void 0:o.extensions)||[]);if(Array.isArray(n)){let i=fe.extensions.all.filter(s=>!(s.id.startsWith("vscode.")||s.id==="Microsoft.vscode-markdown"||n.indexOf(s.id)>-1));if(i.length)return i.map(s=>{let a=new fe.CompletionItem(s.id),c=`"${s.id}"`;return a.kind=fe.CompletionItemKind.Value,a.insertText=c,a.range=e,a.filterText=c,a})}}async function khe(t,e,n,r){var i;let o=e&&e.features||{};if(typeof o=="object"){if(e.configFilePath.scheme==="vscode-remote"&&t.fileHost.type==="local"){e={...e,configFilePath:e.configFilePath.with({scheme:Ke.scheme,authority:""})};let c=fe.env.remoteName&&fe.env.remoteName!=="test"?"linux":process.platform,l=((i=(fe.workspace.workspaceFolders||[])[0])==null?void 0:i.uri)||Ce.file(process.cwd());t={...t,fileHost:await Oa(c,l)}}let s=await nf(t.output),a=(s==null?void 0:s.collections.map(c=>c.features).flat().filter(c=>!c.deprecated))||[];if(n.path.length===2)if(n.isAtPropertyKey){let c=a.filter(l=>!(l.id in o));if(c.length)return c.map(l=>{let u=new fe.CompletionItem(l.id),f=`"${l.id}": `;return u.kind=fe.CompletionItemKind.Property,u.insertText=f,u.range=r,u.filterText=f,u})}else{let c=n.path[1].toString(),l=a.find(u=>u.id===c||c.startsWith(`${u.id}:`));if(l){let u=H5(l),f=u&&(l.options||{})[u]||{type:"boolean",description:zt.l10n.t("Set to true to install.")},m=(f.type==="string"?("enum"in f&&f.enum||"proposals"in f&&f.proposals||[""]).map(d=>`"${d}"`):["true","false"]).map(d=>({label:d,text:d}));return m.push({label:"{}",text:new fe.SnippetString(`{
	$1
}$0`)}),m.map(({label:d,text:p},g)=>{let h=new fe.CompletionItem(d);return h.kind=fe.CompletionItemKind.Value,h.insertText=p,h.range=r,h.sortText=`${g}_${d}`,h})}}else if(n.path.length===3){let c=n.path[1].toString(),l=a.find(u=>u.id===c||c.startsWith(`${u.id}:`));if(l){let u=l.options||{};if(n.isAtPropertyKey)return Object.keys(u).filter(f=>!(f in(o[c]||{}))).map(f=>{let m=new fe.CompletionItem(f),d=`"${f}": `;return m.kind=fe.CompletionItemKind.Property,m.insertText=d,m.range=r,m.filterText=d,m.detail=u[f].description,m});{let f=n.path[2],m=u[f];if(m)return(m.type==="string"?("enum"in m&&m.enum||"proposals"in m&&m.proposals||[""]).map(p=>`"${p}"`):["true","false"]).map((p,g)=>{let h=new fe.CompletionItem(p),v=p;return h.kind=fe.CompletionItemKind.Value,h.insertText=v,h.range=r,h.filterText=v,h.sortText=`${g}_${p}`,h})}}}}}async function i8(t){let e=await lO(t);if((e==null?void 0:e.scheme)===Ke.scheme){let n=_e(e,t.fileHost.platform);e=await t.fileHost.toCommonURI(n)}e&&await fe.window.showTextDocument(fe.Uri.parse(e.toString()))}async function lO(t){let e=await t.findDevContainerFiles();if(!e.length){let r=zt.l10n.t("Add Files...");await fe.window.showInformationMessage(zt.l10n.t("No container configuration file found."),{modal:!0},r)===r&&await dg(t)&&(e=await t.findDevContainerFiles())}let n=await zu(e);return n!=="cancelled"?n:void 0}async function s8(t,e){var r,o,i,s,a,c,l;let n=await lO(t);if(n){let u=ur(t.fileHost);n.scheme==="file"&&!await Cr(n.fsPath)?await $i(gs,n,[],pc):(n.scheme==="file"||n.scheme==="vscode-remote")&&(u=new zy);let f=await u.readDocument(n);if(f){let m=!/\.?devcontainer\.json/.test(mg.default.posix.basename(n.path)),d=Me(f),p=!m&&(((o=(r=d.customizations)==null?void 0:r.vscode)==null?void 0:o.extensions)||!d.extensions),g=(p?(s=(i=d.customizations)==null?void 0:i.vscode)==null?void 0:s.extensions:d.extensions)||[],h=t.openConfigurationCommandId?`[${zt.l10n.t("Dev Container configuration")}](command:${t.openConfigurationCommandId})`:zt.l10n.t("Dev Container configuration");if((d.extensions||[]).concat(((c=(a=d.customizations)==null?void 0:a.vscode)==null?void 0:c.extensions)||[]).indexOf(e)===-1){g.push(e);let v,C=Jy(f);p?(l=d.customizations)!=null&&l.vscode?v=bn(f,["customizations","vscode","extensions"],g,{formattingOptions:C}):d.customizations?v=bn(f,["customizations","vscode"],{extensions:g},{formattingOptions:C}):v=bn(f,["customizations"],{vscode:{extensions:g}},{formattingOptions:C}):v=bn(f,["extensions"],g,{formattingOptions:C}),await u.applyEdits(n,v,f),await fe.window.showInformationMessage(zt.l10n.t("Extension has been added to the {0}.",h))}else await fe.window.showInformationMessage(zt.l10n.t("Extension is already included in the {0}.",h))}}}async function a8(t,e){let n=await fe.commands.executeCommand("remote.tunnel.label",e);if(n===void 0)return;let r=n.label,o=n.port,i=await lO(t);if(i){let s=ur(t.fileHost);i.scheme==="file"&&!await Cr(i.fsPath)?await $i(gs,i,[],pc):(i.scheme==="file"||i.scheme==="vscode-remote")&&(s=new zy);let a=await s.readDocument(i);if(a){let l=Me(a).portsAttributes??{},u=l[`${o}`]??{},f=t.openConfigurationCommandId?`[${zt.l10n.t("Dev Container configuration")}](command:${t.openConfigurationCommandId})`:zt.l10n.t("Dev Container configuration");if(l&&u&&u.label===r)await fe.window.showInformationMessage(zt.l10n.t("Port attributes are already included in the {0}.",f));else{u.label=r,l[`${o}`]=u;let m=Jy(a),d=bn(a,["portsAttributes"],l,{formattingOptions:m});await s.applyEdits(i,d,a),await fe.window.showInformationMessage(zt.l10n.t("Port attributes have been added to the {0}.",f))}}}}function c8(t,e){let n=fe.languages.createDiagnosticCollection("devcontainer"),r=fe.window.activeTextEditor;r&&cO(r.document,n,e.output),t.subscriptions.push(fe.workspace.onDidChangeTextDocument(async o=>{cO(o.document,n,e.output)})),t.subscriptions.push(fe.workspace.onDidOpenTextDocument(async o=>{cO(o,n,e.output)})),t.subscriptions.push(fe.workspace.onDidCreateFiles(async o=>{await Promise.all(o.files.filter(i=>/\.?devcontainer\.json/.test(mg.default.posix.basename(i.path))).map(i=>fe.workspace.openTextDocument(i)))})),t.subscriptions.push(fe.workspace.onDidDeleteFiles(o=>{o.files.forEach(i=>n.forEach(s=>{s.toString().startsWith(i.toString())&&n.delete(s)}))})),t.subscriptions.push(fe.workspace.onDidRenameFiles(async o=>{o.files.forEach(i=>n.forEach(s=>{s.toString().startsWith(i.oldUri.toString())&&n.delete(s)})),await Promise.all(o.files.filter(i=>/\.?devcontainer\.json/.test(mg.default.posix.basename(i.newUri.path))).map(i=>fe.workspace.openTextDocument(i.newUri)))})),(async()=>{let o=await Fa().catch(i=>[]);await Promise.all(o.map(i=>fe.workspace.openTextDocument(i)))})().catch(o=>{e.output.write(`Error opening dev container configurations: ${(o==null?void 0:o.stack)||(o==null?void 0:o.message)||String(o)}`)}),t.subscriptions.push(n)}function l8(t,e,n){let r=async(s,a,c)=>{let l=mg.default.basename(s.uri.fsPath);if(/\.?devcontainer\.json/.test(l)){let u=cf(s.getText());if(!u)return;if((LC(u)||{}).features){let m=s.getText(s.getWordRangeAtPosition(a,/"[^"]*"/)).replace(/"/g,""),d=Lhe(m,e.output,await n());if(d)return{contents:[d],range:s.getWordRangeAtPosition(a,/"[^"]*"/)}}}},o=fe.languages.registerHoverProvider({pattern:"**/devcontainer.json"},{provideHover:r}),i=fe.languages.registerHoverProvider({pattern:"**/.devcontainer.json"},{provideHover:r});return t.subscriptions.push(o),t.subscriptions.push(i),[o,i]}function cO(t,e,n){let r=mg.default.basename(t.uri.fsPath);if(/\.?devcontainer\.json/.test(r)){let o=cf(t.getText());if(!o)return;let i=[...Ahe(t,o,n),...Fhe(o,t)];e.set(t.uri,i)}}function Nhe(t,e){let n=new RegExp("^[a-zA-Z0-9_-]*$");if(!t)return{type:void 0,tooltip:zt.l10n.t("Empty feature id")};let r={};if(!t.includes("/")&&!t.includes("\\")&&n.test(t)){let s=["fish","homebrew"].indexOf(t)>-1;return{...r,type:"local-cache",isLegacy:!0,tooltip:s?zt.l10n.t("Legacy feature not supported. Please check https://containers.dev/features for replacements."):void 0,code:s?{target:fe.Uri.parse("https://containers.dev/features"),value:"legacy-feature"}:void 0,level:fe.DiagnosticSeverity.Error}}if(t.startsWith("http://"))return{...r,type:void 0,tooltip:zt.l10n.t("Direct tarball references must be served over HTTPS."),level:fe.DiagnosticSeverity.Error};if(t.startsWith("https://"))try{return fe.Uri.parse(t,!0).scheme==="https"?{...r,type:"direct-tarball",level:void 0}:{...r,type:void 0,level:fe.DiagnosticSeverity.Error,tooltip:zt.l10n.t("Failed to parse scheme of URI")}}catch{return{...r,type:void 0,level:fe.DiagnosticSeverity.Error,tooltip:zt.l10n.t("Invalid URI")}}if(t.startsWith("/"))return{...r,type:void 0,tooltip:zt.l10n.t("Absolute file paths are not allowed.  Local file path must be indicated relative to the devcontainer.json."),level:fe.DiagnosticSeverity.Error};if(t.startsWith("./")||t.startsWith("../"))return{...r,type:"file-path"};if(t.split("/").length===3&&t.length>=5&&!t.includes("."))return new RegExp("^[a-zA-Z0-9_/@-]*$").test(t)?{...r,type:"github-repo",isLegacy:!0,level:fe.DiagnosticSeverity.Warning}:{...r,type:void 0,tooltip:zt.l10n.t("GitHub release feature id contains invalid characters"),level:fe.DiagnosticSeverity.Error};let i=t.split("/");return t.includes(".")&&i.length>1&&i[1].length>=1?new RegExp("^[a-zA-Z0-9_/:.-]*$").test(t)?i[1]==="devcontainers-contrib"?{...r,type:"oci",level:fe.DiagnosticSeverity.Warning,tooltip:zt.l10n.t("Replace the reference to the discontinued `devcontainers-contrib` with `devcontainers-extra`")}:{...r,type:"oci"}:{...r,type:void 0,level:fe.DiagnosticSeverity.Error,tooltip:zt.l10n.t("OCI Feature id contains invalid characters")}:{...r,type:void 0,level:fe.DiagnosticSeverity.Error,tooltip:zt.l10n.t("Failed to parse feature identifier.")}}function Lhe(t,e,n){var i;if(!n){e.write("No index found.",5);return}let o=(n==null?void 0:n.collections.map(s=>s.features).flat()).find(s=>t===s.id||t.startsWith(`${s.id}:`));if(o){let s=`${o.name}
`,a=o.description?`
${o.description}
`:"",c=o.documentationURL?`
${o.documentationURL}
`:"",l="";if(o.majorVersion){let u=t.split(":");if(u.length===2){let f=u[1];if(f&&f!=="latest")try{let m=(i=r8.parse(f,{loose:!0}))==null?void 0:i.major,d=Number.parseInt(o.majorVersion),p=`
${zt.l10n.t("New major version '{0}' published.",d)}
`;if(m&&m<d)l=p;else{let g=Number.parseInt(f);g!==void 0&&g<d&&(l=p)}}catch{}}}return new fe.MarkdownString(`${s}${a}${c}${l}`)}}function Ahe(t,e,n){var i;let r=rs(e,["features"]),o=[];for(let s of(r==null?void 0:r.children)||[])if(s.type==="property"){let a=(i=s.children)==null?void 0:i[0].value,c=Nhe(a,n);if(c.hint){let l=t.positionAt(s.offset),u=t.positionAt(s.offset+s.length),f=new fe.Diagnostic(new fe.Range(l,u),c.hint,fe.DiagnosticSeverity.Hint);o.push(f)}if(c.level!==void 0&&c.tooltip){let l=t.positionAt(s.offset),u=t.positionAt(s.offset+s.length),f=new fe.Diagnostic(new fe.Range(l,u),c.tooltip,c.level);f.code=c.code||{target:fe.Uri.parse("https://containers.dev/implementors/features/#referencing-a-feature"),value:"referencing-a-feature"},o.push(f)}}return o}function Fhe(t,e){return["extensions","settings","devPort"].filter(n=>rs(t,[n])&&rs(t,["vscode",n])).map(n=>{var s,a;let r=(((a=(s=rs(t,[n]))==null?void 0:s.parent)==null?void 0:a.children)||[])[0],o=e.positionAt(r.offset),i=e.positionAt(r.offset+r.length);return new fe.Diagnostic(new fe.Range(o,i),zt.l10n.t('Legacy "{0}" property when "{0}" property under "vscode" is also present.',n),fe.DiagnosticSeverity.Warning)})}var pg=Y(require("vscode")),uO=require("vscode");async function u8(t,e){let n=await Ohe(t);if(!n)return t.output.write("Failed to find configuration.  Cannot configure container features.",5),!1;let r=await Uhe(t,n,(e==null?void 0:e.preInstalledInBaseImageFeatureIds)||[]);if(!r)return!1;let o=await t.fileHost.toCommonURI(r);return o&&pg.window.showTextDocument(pg.Uri.parse(o.toString())),!!o}async function Ohe(t){let e=await t.findDevContainerFiles();if(e.length){let n=await zu(e);if(!n||n==="cancelled")return;let r=n.scheme==="file"?Oa(process.platform,zf(n)):t.fileHost,o=r.path.dirname(_e(n,r.platform)),i=r.path.basename(o)===".devcontainer"?r.path.dirname(o):o,s=It(r.path,i),a=await c0(r,s,n);if(a)return{fileHost:r,workspace:s,config:a}}else{let n=uO.l10n.t("Add Files...");await pg.window.showInformationMessage(uO.l10n.t("No container configuration file found."),{modal:!0},n)===n&&await dg(t)}}async function Uhe(t,e,n){var d;let{fileHost:r,workspace:o,config:i}=e,s=pg.window.createQuickPick();s.ignoreFocusOut=!0;let a={workspace:o,quickPick:s,telemetry:await t.telemetry,output:t.output},l=(await nf(t.output)).collections.reduce((p,g)=>p.concat(g.features),[]).filter(p=>!p.deprecated),u=l.filter(p=>n.includes(p.id)),f=[];if(i.object.features&&Object.entries(i.object.features).length>0){let p=Object.keys(i.object.features);f=l.filter(g=>p.some(h=>h.split(":")[0]===g.id))}let m=await cg(a,l,f,u,Promise.resolve(void 0),!0,!1);if(m)try{let p=i.text,g=i.text,h=Jy(i.text);for(let v of l){let C=[],w=v.majorVersion?`${v.id}:${v.majorVersion}`:v.id,y=["features",w];if(!m[v.id]&&((d=i.object.features)!=null&&d[w]))C=C.concat(bn(g,y,void 0,{formattingOptions:h}));else if(m[v.id]){let D=m[v.id];C=C.concat(bn(g,y,D,{formattingOptions:h}))}C.length&&(g=Io(g,C))}return p!==g&&await ur(r,r).applyEdits(i.uri,[{content:g,offset:0,length:i.text.length}],i.text),s.dispose(),_e(i.uri,r.platform)}catch(p){t.output.write(`Error in selecting dev container features: ${p}`,5),console.log("Error in selecting dev container features: ",p),s.dispose();return}}var bt=Y(require("vscode")),d8=Y(require("crypto")),l0=Y(require("path")),Cm=require("vscode");var f8={features:{}};function m8(t,e){let n=new Set,r=Promise.resolve(f8),o,a=e.codespaces?"codespaces.editDevContainerJSON":"remote-containers.editDevContainerJSON";t.subscriptions.push(bt.commands.registerCommand(a,async u=>u()),bt.languages.registerCodeLensProvider([{pattern:"**/devcontainer.json"},{pattern:"**/.devcontainer.json"}],{async provideCodeLenses(u,f){var p;let m=Object.keys(((p=Me(u.getText()))==null?void 0:p.features)||{}).sort();m.some(g=>!n.has(g))&&(n=new Set(m),r=c(u,m));let d=await r;if(!f.isCancellationRequested)return l(u,d)}}));async function c(u,f){o||(o=await Hhe(t,e));let m=u.uri;if(m.scheme!=="file"){let d=o.path.join(await o.tmpdir(),`dev-container-tmp-${d8.randomUUID()}`);await o.mkdirp(d);let p=o.path.join(d,".devcontainer.json");await o.writeFile(p,Buffer.from(JSON.stringify({features:f.reduce((v,C)=>(v[C]={},v),{})})));let g=l0.posix.basename(m.path)===".devcontainer.json",h=m.with({path:l0.posix.join(l0.posix.dirname(m.path),g?".devcontainer-lock.json":"devcontainer-lock.json")});try{let v=await bt.workspace.fs.readFile(h),C=o.path.join(d,".devcontainer-lock.json");await o.writeFile(C,Buffer.from(v))}catch(v){if((v==null?void 0:v.code)!=="FileNotFound")throw v}m=bt.Uri.file(p)}try{return Bhe(t,o,o.cwd,m,e.output)}catch(d){return e.output.write(`Error fetching version info: ${(d==null?void 0:d.message)||d}`),f8}}function l(u,f){let m=cf(u.getText());if(!m)return;let d=rs(m,["features"]);if(!(d!=null&&d.children)||d.type!=="object")return;let p=[];for(let g of d.children)if(g.type==="property"&&g.children){let S=function(_,A){return async()=>{let U=h.value.substring(0,C.length)+_;n.add(U),A&&!f.features[U]&&(f.features[U]=A);let k=bt.window.activeTextEditor;await(k==null?void 0:k.edit(E=>{E.replace(new bt.Range(k.document.positionAt(w),k.document.positionAt(w+y)),_)}))}},D=function(){return async()=>{let _={title:Cm.l10n.t("Remove")};if(await bt.window.showInformationMessage(Cm.l10n.t("The feature was not found either because it is no longer available or because of insufficient permissions to access it."),{modal:!0,detail:Cm.l10n.t("If this is permanent you may want to remove it from your configuration.")},_)!==_)return;let U=bt.window.activeTextEditor;await(U==null?void 0:U.edit(k=>{let E=g.parent,x=E.children,b=x.indexOf(g),I=x[b+1];if(I)k.delete(new bt.Range(U.document.positionAt(g.offset),U.document.positionAt(I.offset)));else{let T=x[b-1];T?k.delete(new bt.Range(U.document.positionAt(T.offset+T.length),U.document.positionAt(g.offset+g.length))):k.delete(new bt.Range(U.document.positionAt(E.offset+1),U.document.positionAt(g.offset+g.length)))}}))}},h=g.children[0],v=f.features[h.value],C=$he(h.value),w=h.offset+1+C.length,y=h.length-2-C.length;if(v!=null&&v.wanted&&v.current!==v.wanted){let _=new bt.CodeLens(new bt.Range(u.positionAt(h.offset),u.positionAt(h.offset+h.length)),{title:Cm.l10n.t("Update to {0}",v.wanted),command:a,arguments:[S(`:${v.wanted}`,{current:v.wanted,wanted:v.wanted,latest:v.latest})]});p.push(_)}if(v!=null&&v.latest&&v.current!==v.latest){let _=new bt.CodeLens(new bt.Range(u.positionAt(h.offset),u.positionAt(h.offset+h.length)),{title:Cm.l10n.t("Update to latest {0}",v.latest),command:a,arguments:[S(`:${v.latest}`)]});p.push(_)}if(v&&!v.latest){let _=new bt.CodeLens(new bt.Range(u.positionAt(h.offset),u.positionAt(h.offset+h.length)),{title:Cm.l10n.t("Not found..."),command:a,arguments:[D()]});p.push(_)}}return p}}var Mhe=/[:@][^/]*$/;function $he(t){let e=Mhe.exec(t);return e?t.substring(0,e.index):t}async function Hhe(t,e){let n={executeInWSL:"forWSLPath",defaultDistro:void 0},r=await _r(),o=process.cwd();return Xr(void 0,void 0,o,s=>jf(s,bt.env.appRoot),n,t.extensionPath,r,(await e.telemetry).product,e.output,void 0,void 0)}async function Bhe(t,e,n,r,o){let i={cliHost:e,dockerPath:"",dockerComposePath:"",extensionPath:t.extensionPath,appRoot:bt.env.appRoot,output:o,package:await cr(t.extensionPath)};return await ii(i,["outdated","--workspace-folder",n,...r?["--config",_e(r,e.platform)]:[],"--output-format","json","--log-level",ro(Xy()),"--log-format","json",...o.dimensions?["--terminal-columns",String(o.dimensions.columns),"--terminal-rows",String(o.dimensions.rows)]:[]])}var e8=gn.Uri.parse("https://aka.ms/vscode-remote/containers/folder-setup"),t8=gn.Uri.parse("https://aka.ms/vscode-dev-containers");function h8(t,e){let{output:n}=e;n.write("Internal initialization of dev container support package...");let r,o=()=>r||(r=nf(e.output));return{async openConfiguration(){return i8(e)},async createConfiguration(i){return dg(e,i)},async addExtensionToConfiguration(i){return s8(e,i)},async addPortLabelToConfiguration(i){return a8(e,i)},async configureContainerFeatures(i){return u8(e,i)},createCompletionItemProvider(){return o8(e)},startCodeLensProvider(){m8(t,e)},startHoverProvider(){l8(t,e,o)},startDiagnosticsCollection(){c8(t,e)}}}async function n8(){let t=gn.workspace.workspaceFile,e=gn.workspace.workspaceFolders,n;if(t){if(t.scheme==="untitled"){await VI();return}n=t}else if(e&&e.length)if(e.length>1){let r=await gn.window.showWorkspaceFolderPick({placeHolder:Kt.l10n.t("Select a folder to create a container configuration for")});r&&(n=r.uri)}else n=e[0].uri;return n}function Eo(t,e,n,r,o,i,s){if(t.value="",t.title=r||t.title||Kt.l10n.t("Add Dev Container Configuration Files"),t.placeholder=n,t.canSelectMany=!!o,Array.isArray(e))if(t.items=e,o)t.selectedItems=e.filter(m=>m.picked);else{let m=e.find(d=>d.picked);m&&(t.activeItems=[m])}t.buttons=i?Array.isArray(i)?i:[gn.QuickInputButtons.Back]:[];let a=[],c=t.items,l=c.filter(m=>m.isAlreadyInstalledViaBaseImage===!0),u={kind:gn.QuickPickItemKind.Separator,label:Kt.l10n.t("pre-installed features")};l.length&&(t.items=t.items.slice(0,c.length-l.length).concat(u).concat(t.items.slice(c.length-l.length)));let f=new Promise((m,d)=>{if(Array.isArray(e)||(t.busy=!0,e.then(p=>{if(t.busy=!1,t.items=p,o)t.selectedItems=p.filter(g=>g.picked);else{let g=p.find(h=>h.picked);g&&(t.activeItems=[g])}},p=>{t.busy=!1,d(p)})),a.push(t.onDidAccept(()=>{let p=o?t.selectedItems.slice():t.selectedItems[0];m(Array.isArray(i)?{pick:p,button:"ok"}:p),a.forEach(g=>g.dispose())})),a.push(t.onDidChangeSelection(p=>{if(!o)return;let g=l.filter(h=>!t.selectedItems.includes(h));g.length&&(t.selectedItems=t.selectedItems.concat(g))})),t.buttons.length&&a.push(t.onDidTriggerButton(p=>{let g=o?t.selectedItems.slice():t.activeItems[0];m(i===!0?"back":{pick:g,button:p}),a.forEach(h=>h.dispose())})),a.push(t.onDidHide(()=>{a.forEach(p=>p.dispose()),t.dispose(),m(void 0)})),s){let p;a.push(t.onDidChangeValue(g=>{let h=s(g);if(h||p){let v=t.items.filter(C=>C!==p);h&&v.push(h),p=h,t.items=v}}))}});return t.show(),f}var aO={label:Kt.l10n.t("Learn More"),description:Kt.l10n.t("Documentation on predefined container templates"),alwaysShow:!0,type:"help"};async function u0(t,e,n,r){return oO(t,e,n,r)}async function fg(t,e,n,r,o,i){var U;let{telemetry:s,existingFilesLearnMoreLink:a,index:c}=t,u=(o!=="userData"&&await((U=t.findDevContainerFiles)==null?void 0:U.call(t,"userData"))||[]).reduce((k,E)=>k&&k.uri.path.length<E.uri.path.length?k:E,void 0),f=(u==null?void 0:u.uri.scheme)==="file"?[{iconPath:new gn.ThemeIcon("go-to-file"),tooltip:Kt.l10n.t("Open File")}]:[],m=u?{label:Kt.l10n.t("Copy existing configuration to workspace"),detail:Kt.l10n.t("Copy the configuration from your user data folder to the workspace folder"),type:"userDataConfig",buttons:f}:void 0,d=c==null?void 0:c.collections.find(k=>k.sourceInformation.ociReference==="ghcr.io/devcontainers/templates"),p=d==null?void 0:d.templates.find(k=>k.id==="ghcr.io/devcontainers/templates/docker-existing-docker-compose"),g=d==null?void 0:d.templates.find(k=>k.id==="ghcr.io/devcontainers/templates/docker-existing-dockerfile"),h=await e.readDir(n.rootFolderPath),v=p?h.filter(k=>/(docker.*)?compose.*\.ya?ml$/i.test(k)).map(k=>e.path.join(n.rootFolderPath,k)):[],C=g?h.filter(k=>/dockerfile/i.test(k)).map(k=>e.path.join(n.rootFolderPath,k)):[],w=C.map(k=>{let E=e.path.basename(k);return{label:Kt.l10n.t("From '{0}'",E),description:p8(e,k),dockerfile:E,dockerfilePath:k,detail:Kt.l10n.t("Refer to the existing '{0}' in the container configuration",E),type:"dockerfile"}}),y=v.map(k=>{let E=e.path.basename(k);return{label:Kt.l10n.t("From '{0}'",E),description:p8(e,k),dockerComposeFile:E,dockerComposePath:k,detail:Kt.l10n.t("Refer to the existing '{0}' in the container configuration",E),type:"dockerComposeFile"}}),S=m||C.length>0||v.length>0,D={label:Kt.l10n.t("From a predefined container configuration template..."),detail:Kt.l10n.t("Use a base configuration from the container template registry"),alwaysShow:!0,type:"predefined"},_=t.quickPick.onDidTriggerItemButton(async()=>{await gn.commands.executeCommand("vscode.open",u.uri),t.quickPick.hide()}),A=S?await Eo(t.quickPick,[D,...m?[m]:[],...w,...y,...a?[aO]:[]],Kt.l10n.t("How would you like to create your container configuration?")):D;if(_.dispose(),!A){Jo(s,"canceled");return}if(A.type==="help"){Jo(s,"help"),gn.env.openExternal(a);return}if(A.type==="userDataConfig")return Whe(e,n,u);if(i||(i=e&&n&&await K5()?QF(t,e,n).then(k=>{if(k.type!=="success")return;let E=((c==null?void 0:c.collections.map(b=>b.templates).flat())||[]).filter(b=>!ug.includes(b.id)),x=((c==null?void 0:c.collections.map(b=>b.features).flat())||[]).filter(b=>!b.deprecated);return{template:E.find(b=>b.id===k.template),features:(k.features||[]).map(b=>x.find(I=>I.id===b)).filter(b=>!!b)}}):Promise.resolve(void 0)),A.type==="predefined")return Z5(t,e,n,r,o,i,()=>fg(t,e,n,r,o,i));if(A.type==="dockerComposeFile")return Vhe(t,e,r,o,A.dockerComposePath,p,i,()=>fg(t,e,n,r,o,i));if(A.type==="dockerfile")return jhe(t,e,r,o,A.dockerfilePath,g,i,()=>fg(t,e,n,r,o,i))}function p8(t,e){let n=gn.workspace.workspaceFolders||[];if(n.length<2)return;let r=n.find(o=>t.platform==="win32"?e.toLowerCase().startsWith(o.uri.fsPath.toLowerCase()):e.startsWith(o.uri.fsPath));return r&&r.name}async function Whe(t,e,n){let r=Kt.l10n.t("Skip"),o=n.fileHost,i=_e(n.uri,o.platform),s;if(o.path.basename(i)===".devcontainer.json")s=o.path.dirname(i);else for(let d=i;o.path.basename(d);d=o.path.dirname(d))if(o.path.basename(d)===".devcontainer"){s=o.path.dirname(d);break}if(!s)throw new Error(`Unexpected user config path: ${i}`);let a=o.readDirWithTypes||o.readDir,c=await a(s);for(;c.length;){let d=c.shift();if(d===qI)continue;let p=typeof d=="string"?d:d[0],g=o.path.join(s,p);if(typeof d=="string"?await o.isFile(g):(d[1]&1)!==0){let v=o.path.sep===t.path.sep?p:p.replaceAll(o.path.sep,t.path.sep),C=t.path.join(e.configFolderPath,v);if(await t.isFile(C)){let y=await gn.window.showInformationMessage(Kt.l10n.t("File '{0}' already exists, overwrite?",v),{modal:!0},r,Kt.l10n.t("Overwrite"));if(!y)return;if(y===r)continue}await t.mkdirp(t.path.dirname(C));let w=await o.readFile(g);await t.writeFile(C,w)}else(typeof d=="string"?await o.isFolder(g):(d[1]&2)!==0)&&c.push(...(await a(g)).map(C=>typeof C=="string"?o.path.join(p,C):[o.path.join(p,C[0]),C[1]]))}let l=Kt.l10n.t("Delete");await gn.window.showInformationMessage(Kt.l10n.t("Delete the configuration from the user data folder?"),{modal:!0},Kt.l10n.t("Keep"),l)===l&&await s5(o,s);let f=o.path.relative(s,i),m=o.path.sep===t.path.sep?f:f.replaceAll(o.path.sep,t.path.sep);return t.path.join(e.configFolderPath,m)}async function jhe(t,e,n,r,o,i,s,a){let{telemetry:c}=t,l=await ym(t,i,s,async()=>{});if(!l){Jo(c,"canceled");return}if(l==="back")return a();let u=await lg(t,e,n,r,l,(f,m)=>{if(!Qv(e.path,f))return m;let d=e.path.sep!==Ha.sep?f.replace(Ha.sep===Ha.win32.sep?/\\/g:/\//g,e.path.sep):f,p=e.path.resolve(n,d),g=e.path.relative(e.path.dirname(p),o),h=e.platform==="win32"?g.replace(/\\/g,"/"):g,v=m.toString(),C="dockerFile"in Me(v)?["dockerFile"]:["build","dockerfile"],w=bn(v,C,h,{formattingOptions:{}}),y=Io(v,w);return Buffer.from(y)});return u&&Jo(c,"dockerFile"),u}async function Vhe(t,e,n,r,o,i,s,a){let{telemetry:c}=t,l=(await e.readFile(o)).toString(),u=Xv(l);if(!u){await gn.window.showErrorMessage(Kt.l10n.t("Invalid docker-compose file '{0}'",o),{modal:!0});return}let f=u.version,m=Object.keys(u&&u.services||{}),d=m.length<2?m[0]||"":await Eo(t.quickPick,m.map(v=>({label:v,type:"service"})),Kt.l10n.t("Select a service"),void 0,void 0,!0);if(d==="back")return a();if(d===void 0){Jo(c,"canceled");return}let p=typeof d=="string"?d:d.label,g=await ym(t,i,s,async()=>{});if(!g)return;if(g==="back")return a();let h=await lg(t,e,n,r,g,(v,C)=>{if(Qv(e.path,v)){let w=e.path.sep!==Ha.sep?v.replace(Ha.sep===Ha.win32.sep?/\\/g:/\//g,e.path.sep):v,y=e.path.resolve(n,w),S=e.path.relative(e.path.dirname(y),o),D=e.platform==="win32"?S.replace(/\\/g,"/"):S,_=C.toString(),A=Me(_).dockerComposeFile,U=Array.isArray(A)?A.slice(1):[],k=[D,...U],E=bn(_,["dockerComposeFile"],k,{formattingOptions:{}}),x=Io(_,E),b=bn(x,["service"],p,{formattingOptions:{}}),I=Io(x,b);return Buffer.from(I)}if(/compose.*\.ya?ml$/.test(Ha.posix.basename(v))){let w=C.toString(),y=Xv(w);y.version&&f&&y.version!==f&&(w=w.replace(new RegExp(`^(version:.*)(${Wf(y.version)})`,"m"),`$1${f}`));let S=Object.keys(y&&y.services||{});return S.length&&(w=w.replace(new RegExp(`\\b${S[0]}\\b`),p)),Buffer.from(w)}return C});return h&&Jo(c,"dockerComposeFile"),h}function Jo(t,e,n,r){var i;let o={outcome:e};if(n){o.definitionName=uf(n.metadata.template.id);let s=n.metadata.copilotSuggestion,a=(i=s==null?void 0:s.template)==null?void 0:i.id;a&&(o.copilotSuggested=uf(a)),o.features=n.metadata.features.map(l=>uf(l.id)).join(",");let c=s==null?void 0:s.features.map(l=>uf(l.id)).join(",");c&&(o.copilotFeatures=c),a&&(o.copilotUsed="true")}r&&(o.targetLocation=r),t.sendTelemetryEvent("createConfiguration",o)}async function c0(t,e,n){if(n||(n=await Gf(t,e.configFolderPath)),!n)return;let r=await ur(t,t).readDocument(n);if(!r)return;let o=Me(r);return{uri:n,text:r,object:o}}async function g8(t,e,n,r,o,i,s){let a=uo(n);if(un(a)&&!await Ue.workspace.requestWorkspaceTrust({message:oC}))return xr(a.hostPath)?(await Ue.window.showInformationMessage(Ar.l10n.t("The WSL folder is currently not trusted."),{modal:!0,detail:Ar.l10n.t("Trust is required to build a dev container from it. The folder will now reopen in WSL.")}),await Ue.commands.executeCommand("remote-containers.reopenInWSL")):(await Ue.window.showInformationMessage(Ar.l10n.t("The local folder is currently not trusted."),{modal:!0,detail:Ar.l10n.t("Trust is required to build a dev container from it. The folder will now reopen locally.")}),await Ue.commands.executeCommand("remote-containers.reopenLocally")),new Promise(()=>{});let c=lo(a);if(c&&!await iC(t,a.repositoryPath))return await Ue.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{});let l=ed(a);return{...await Yhe(a,t,i,s,e,n,r,o),isTrusted:c||l||void 0}}async function Yhe(t,e,n,r,o,i,s,a){let{log:c,logFilePath:l}=n,u="hostPath"in t&&xr(t.hostPath)&&!!Ue.extensions.getExtension("ms-vscode-remote.remote-wsl");u&&Ue.commands.executeCommand("setContext","canReopenInWSL",!0);let f=t.settings,m="localDocker"in t&&t.localDocker,d=Ml(t.parentAuthority)||Ul(f)&&!m,p=d&&(!!Ue.extensions.getExtension("ms-vscode-remote.remote-ssh")||!!Ue.extensions.getExtension("ms-vscode-remote.remote-ssh-nightly"));p&&Ue.commands.executeCommand("setContext","canReopenInSSH",!0);let g=wc(t.parentAuthority)&&!!Ue.extensions.getExtension("ms-vscode.remote-server");g&&Ue.commands.executeCommand("setContext","canReopenInTunnel",!0);let h=!d&&!wc(t.parentAuthority);h&&Ue.commands.executeCommand("setContext","canReopenLocally",!0);let v;return Ue.window.withProgress({location:Ue.ProgressLocation.Notification,title:Zu,cancellable:!1},async C=>{if(t.parentAuthority&&!s.execServer)throw new Error(`Parent authority found without ExecServer: ${i}`);let w=ts(),y=Kl(e.extensionPath,vm,c),{cliHost:S,originalCwd:D}=await Ghe(s.execServer,t,w,e.extensionPath,await _r(),y,o.product,c),_={...S.type==="local"?await y:void 0,...await td(S,t.settings)},A={...S.env,..._},U=await Xu({authority:i,extensionContext:e,sessionStart:n.sessionStart,progress:C,cliHost:S,env:A,cwd:S.cwd,wslSettings:w,isLocalContainer:ru(t.parentAuthority,_),telemetry:o,onDidInput:n.onDidInput,output:c,logFilePath:l,allowSystemConfigChange:!0,postCreate:r}),k={async createConfiguration(E,x){return u0({fileHost:x,userDataFolderForConfigurations:un(t)?await tl(e,S):void 0,telemetry:o,output:c,openConfigurationCommandId:gm,showLogCommandId:it},It(uC.posix,E))},async showError(E,...x){return await Ue.window.showErrorMessage(E,{modal:!0},...x)}};v={common:U,parsedAuthority:t,dockerCLI:Ms(),dockerComposePath:Ua(),dockerComposeCLI:Cs({exec:U.cliHost.exec,env:{..._,...fr(_)},output:U.output},Ms(),Ua()),dockerSocketPath:e0(),dockerEnv:_,workspaceMountConsistencyDefault:XI(),gpuAvailability:await ZI(S,o.product,c),cacheMount:QI()?"volume":"none",configurationTracking:JI(e.workspaceState),removeOnStartup:await x5(e,i),buildNoCache:await D5(e,i),onRemoveOnShutdownChanged:a,userRepositoryConfigurationPaths:rC(),originalCwd:D,configProvider:k,development:e.extensionMode===Ue.ExtensionMode.Development,watch:async(E,x)=>{let b=Ue.workspace.createFileSystemWatcher(new Ue.RelativePattern(E,"*"));return b.onDidChange(x),b.onDidCreate(x),b.onDidDelete(x),b},ensureNoDisallowedFeatures:(E,x,b)=>$p(E,e.globalState,x,b),useExperimentalLockfile:n0()},await s_(v);try{return await Ak(v)}catch(E){return qhe(v,E)}}).then(C=>(a(async w=>{await _5(e,w&&C.dockerContainerId||!1),await nC(e,w==="rebuildNoCache"?i:!1)}),ns(o,fO(t),"success",n.sessionStart,v==null?void 0:v.common,C.config,C.configLocationType,C.properties),C),C=>{var k;let w=C instanceof pe?C:new pe({description:Ar.l10n.t("An error occurred setting up the container."),originalError:C});lo(t)&&(w.volumeName=t.volumeName,w.repositoryPath=t.repositoryPath,w.folderPath=t.folder),ns(o,fO(t),"failure",n.sessionStart,v==null?void 0:v.common,w.config,void 0,w.containerProperties,w);let y="onTheSide",S=(k=w.data)==null?void 0:k.fileWithError;!S&&(v!=null&&v.parsedAuthority)&&un(v.parsedAuthority)&&v.parsedAuthority.configFile&&(S=_e(v.parsedAuthority.configFile,v.common.cliHost.platform));let D=S&&(v==null?void 0:v.common.cliHost.path.basename(S))||"devcontainer.json",_=un(t)?[{id:"openFileWithErrorLocally",title:Ar.l10n.t("Edit {0} Locally",D),isLastAction:!0,applicable:async(E,x)=>h&&!(x&&u),async execute(){let E=v==null?void 0:v.common.cliHost,x=S?E.type==="wsl"?await E.toCommonURI(S):Ce.file(S):void 0;await sg(e,t.hostPath,x,l,y);let b=Ue.Uri.file(t.hostPath);await Ue.commands.executeCommand("vscode.openFolder",b)}},{id:"openFileWithErrorinWSL",title:Ar.l10n.t("Edit {0} in WSL",D),isLastAction:!0,applicable:async()=>u,async execute(){let E=Ue.Uri.parse((await Dp(t.hostPath,c)).toString()),x=S?Rn(S.startsWith("/")?"linux":"win32",E,S):void 0;await sg(e,E.path,x,l,y),await Ue.commands.executeCommand("vscode.openFolder",E)}},{id:"openFileWithErrorinSSH",title:Ar.l10n.t("Edit {0} in SSH",D),isLastAction:!0,applicable:async()=>p,async execute(){let E=t.settings,x=Ul(E)?$v(E.host,t.hostPath):iu(t.parentAuthority,t.hostPath),b=Ue.Uri.parse(x.toString()),I=S?Rn(S.startsWith("/")?"linux":"win32",b,S):void 0;await sg(e,b.path,I,l,y),await Ue.commands.executeCommand("vscode.openFolder",b)}},{id:"openFileWithErrorinTunnel",title:Ar.l10n.t("Edit {0} in Tunnel",D),isLastAction:!0,applicable:async()=>g,async execute(){let E=Ue.Uri.parse(iu(t.parentAuthority,t.hostPath).toString()),x=S?Rn(S.startsWith("/")?"linux":"win32",E,S):void 0;await sg(e,E.path,x,l,y),await Ue.commands.executeCommand("vscode.openFolder",E)}}]:[],A=lo(t)?t.inspectVolume?[Ma]:[{id:"reopenInRecoveryContainer",title:Ar.l10n.t("Edit {0} in Recovery Container",D),isLastAction:!0,applicable:(E,x)=>!0,execute:async E=>{await sg(e,t.repositoryPath,S?Ce.file(S).with({scheme:"vscode-remote"}):void 0,l,y);let x=ci(E.repositoryPath),b=await Uo(v),I=Jk(x,E.volumeName,b);await Ue.commands.executeCommand("remote-containers.inspectVolume",I,E.repositoryPath,E.folderPath)}},Ma,{id:"openRepository",title:Ar.l10n.t("Open Repository"),isLastAction:!1,applicable:(E,x)=>!x,async execute(){Ue.env.openExternal(Ue.Uri.parse(t.repositoryPath))}}]:[],U=fw(t)?[Ma]:[];return w.actions=[...tf,rl,U5,..._,...A,...U,ef,nl],zhe(w),$a(w,fO(t),o,!0,n.log)})}async function qhe(t,e){let{common:n}=t,{output:r}=n,o=((e==null?void 0:e.originalError)&&(e.originalError.cmdOutput||e.originalError.message)||"").toLowerCase();if(n.localWaylandSocket&&o.includes(`path does not exist: ${n.localWaylandSocket}`.toLowerCase())){n.localWaylandSocket=void 0;let i=await Ak(t);return(async()=>{let s=us("mountWaylandSocket");for(await Bt(3e3);Ue.workspace.getConfiguration().get(s,!0);){try{await Ue.workspace.getConfiguration().update(s,!1,Ue.ConfigurationTarget.Global)}catch{}await Bt(3e3)}r.write("Wayland socket mount disabled in user settings.")})().catch(s=>{r.write(ot(s&&(s.stack||s.message)||String(s)))}),i}throw e}async function Ghe(t,e,n,r,o,i,s,a){let{settings:c}=e,l=c&&"host"in c&&c.host||void 0;if(un(e)){let u=It(uC,e.hostPath),f=u.rootFolderPath,m=await Xr(t?{server:t,authority:e.parentAuthority}:void 0,l,u.rootFolderPath,hn,n,r,o,s,a,Si,{sshAskpassEnv:i,settings:ig(),localDocker:e.localDocker});return m.cwd!==u.rootFolderPath&&(u=It(m.path,u.isWorkspaceFile?m.path.join(m.cwd,uC.basename(e.hostPath)):m.cwd)),a.write(`Setting up container for folder or workspace: ${u.workspaceOrFolderPath}\r
`),i_(a,e),e.localDocker&&a.write(`Local Docker: ${e.localDocker}\r
`),{cliHost:m,originalCwd:f}}else{let u=await Xr(t?{server:t,authority:e.parentAuthority}:void 0,l,void 0,hn,n,r,o,s,a,Si,{sshAskpassEnv:i,settings:ig()});return{cliHost:u,originalCwd:await u.homedir()}}}function fO(t){return un(t)?"config":lo(t)?t.inspectVolume?"volume":"repository":"volume"}function zhe(t){let e=(t.originalError&&(t.originalError.cmdOutput||t.originalError.message)||"").toLowerCase();e&&e.indexOf("drive has not been shared")!==-1?t.description=Ar.l10n.t("The drive of the workspace folder is not shared. Share it in the Docker settings first."):e&&(e.indexOf("port is already allocated")!==-1||e.indexOf("address already in use")!==-1)?t.description=Ar.l10n.t("A port the container is setup to bind to is already in use. See the Dev Containers terminal for details."):e&&e.indexOf('invalid mount config for type "bind"')!==-1?t.description=Ar.l10n.t("A mount config is invalid. Make sure it has the right format and a source folder that exists on the machine where the Docker daemon is running."):e&&e.indexOf("deb.debian.org/debian/dists/jessie-updates")!==-1&&(t.description=Ar.l10n.t("The base image references the obsolete Debian 8 update repository."),t.actions.push({id:"learnMore",title:Ar.l10n.t("Learn More"),isLastAction:!1,applicable:(n,r)=>r,async execute(){Ue.env.openExternal(Ue.Uri.parse("https://aka.ms/vscode-remote/containers/troubleshooting/jessie"))}}))}var Wa=Y(require("vscode")),hg=require("vscode");var f0=Y(Mr());var w8=require("util");var Ba=Y(require("path")),y8=Y(require("crypto"));async function C8(t,e,n,r){var p,g;let{dockerCLI:o,dockerComposeCLI:i,dockerComposePath:s,common:a}=t,{cliHost:c,extensionPath:l,appRoot:u,postCreate:f,output:m}=a,d;try{let{commit:h}=a.product;if(!h)throw new pe({description:f0.t("Cannot attach without commit id for the remote extension host.")});let v=r?n.configFilePath:void 0;if((v==null?void 0:v.scheme)==="file"&&c.type!=="local"){let R=c.path.join(await c.tmpdir(),`devcontainer-config-${y8.randomUUID()}.json`);await c.writeFile(R,await at(v.fsPath)),v=Ce.from({scheme:Ke.scheme,path:R})}let C={...a.env,...fr(a.env)},w={cliHost:c,dockerPath:o,dockerComposePath:s,env:C,extensionPath:l,appRoot:u,package:a.package,postCreate:f,output:m},y=a.postCreate.output.dimensions||m.dimensions,S=await ii(w,["set-up","--container-id",e.Id,...c.type==="local"&&a.persistedFolder?["--user-data-folder",a.persistedFolder]:[],...t.dockerCLI!=="docker"?["--docker-path",t.dockerCLI]:[],...a.containerSessionDataFolder?["--container-session-data-folder",a.containerSessionDataFolder]:[],"--log-level",ro(a.getLogLevel()),"--log-format","json",...v?["--config",_e(v,c.platform)]:[],"--default-user-env-probe",a.defaultUserEnvProbe,"--skip-post-create",...y?["--terminal-columns",String(y.columns),"--terminal-rows",String(y.rows)]:[],"--include-configuration","--include-merged-configuration"]);if((S==null?void 0:S.outcome)!=="success")throw new pe({description:f0.t("devcontainer command failed: {0}",JSON.stringify(S))});S.configuration.configFilePath=S.mergedConfiguration.configFilePath=S.configuration.configFilePath&&Ce.revive(S.configuration.configFilePath).with({scheme:c.type==="local"?"file":Ke.scheme});let D=S.mergedConfiguration,_=D.remoteUser;d=await Up(t,e.Id,D.workspaceFolder,_);let A={cliHost:c,dockerCLI:o,dockerComposeCLI:i,dockerComposePath:s,env:C,output:f.output},U=((g=(((p=D.customizations)==null?void 0:p.vscode)||[]).slice().reverse().find(R=>typeof R.devPort=="number"))==null?void 0:g.devPort)||jl,{hostOrContainerPort:k,hostPortServer:E,connectionToken:x,remoteEnv:b,serverDownloaded:I}=await Vl(a,d,n,D,U,Mp(t,A,d,void 0,void 0,e.Id,!1,v,void 0)),T=ur(a.cliHost,d.shellServer);if(Khe(a,d,T,n.configFilePath),Xhe(a,d,T,n.configFilePath),E){let R=async()=>{await(0,w8.promisify)(E.close.bind(E))()};a.shutdowns.push(R)}return{params:a,properties:d,config:n,resolvedAuthority:{host:hc,port:k,connectionToken:x,extensionHostEnv:b},tunnelInformation:a.isLocalContainer?Op(e):{},dockerParams:t,dockerContainerId:e.Id,serverDownloaded:I}}catch(h){let v=h instanceof pe?h:new pe({description:f0.t("An error occurred attaching to the container."),originalError:h});throw e&&(v.manageContainer=!1,v.params=t.common,v.containerId=e.Id,v.dockerParams=t),d&&(v.containerProperties=d),v.config=n,v}}function Khe(t,e,n,r){e.installFolder&&E8(t,e,n,r).catch(console.error)}async function E8(t,e,n,r){try{await dc(t,e,["/bin/sh","-c",`# Watch installed extensions
			trap "exit 0" 15
			old=\`ls -A --full-time\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],zY(e),{print:"off"});return}catch(o){(o==null?void 0:o.code)===1?await Jhe(t,e,n,r):(o==null?void 0:o.code)!==2&&await Bt(6e4)}return E8(t,e,n,r)}async function Jhe(t,e,n,r){let o=await KY(t,e);await Ek(r,async()=>{var s,a;let i=await d0(t.cliHost,n,r,e.remoteWorkspaceFolder);if(!Qhe(((a=(s=i.config.customizations)==null?void 0:s.vscode)==null?void 0:a.extensions)||[],o)){let c=bn(i.text,["extensions"],o,{formattingOptions:{}});await $i(n,r,c,i.text)}})}function Xhe(t,e,n,r){S8(t,e,n,r).catch(console.error)}async function S8(t,e,n,r){try{let o=Ix(e),i=Ba.posix.dirname(o),s=Ba.posix.basename(o);await dc(t,e,["/bin/sh","-c",`# Watch machine settings
			trap "exit 0" 15
			old=\`ls -A --full-time ${s} 2>/dev/null || true\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time ${s} 2>/dev/null || true\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],i,{print:"off"});return}catch(o){(o==null?void 0:o.code)===1?await Zhe(t.cliHost,e,n,r):(o==null?void 0:o.code)!==2&&await Bt(6e4)}return S8(t,e,n,r)}async function Zhe(t,e,n,r){let{stdout:o}=await e.shellServer.exec(`cat ${Ix(e)}`),i=Me(o)||{};await Ek(r,async()=>{var a,c;let s=await d0(t,n,r,e.remoteWorkspaceFolder);if(JSON.stringify(((c=(a=s.config.customizations)==null?void 0:a.vscode)==null?void 0:c.settings)||{})!==JSON.stringify(i)){let l=bn(s.text,["settings"],i,{formattingOptions:{}});await $i(n,r,l,s.text)}})}function Qhe(t,e){let n=new Set(t),r=new Set(e);return n.size===r.size&&t.every(o=>r.has(o))}async function x8(t,e){let n=p0(t,e),r=await v8(n);return r||(n=I8(t,e.Config.Image),r=await v8(n)),r}async function _8(t,e,n,r,o){let i=Ce.file(p0(n,r)),s=await d0(t,e,i,o);return s.exists||(i=Ce.file(I8(n,r.Config.Image)),s=await d0(t,e,i,o)),s}function m0(t){return Ba.join(t,"nameConfigs")}function p0(t,e){return Ba.join(m0(t),`${b8(yc(e))}.json`)}async function D8(t){try{let e=m0(t);return(await al(e)).filter(r=>r.endsWith(".json")).map(r=>({name:T8(r.substr(0,r.length-5)),uri:Ce.file(Ba.join(e,r))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function h0(t){return Ba.join(t,"imageConfigs")}function I8(t,e){return Ba.join(h0(t),`${b8(e)}.json`)}async function P8(t){try{let e=h0(t);return(await al(e)).filter(r=>r.endsWith(".json")).map(r=>({image:T8(r.substr(0,r.length-5)),uri:Ce.file(Ba.join(e,r))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function b8(t){return t.replace(/[:/%]/g,e=>`%${e.charCodeAt(0).toString(16)}`)}function T8(t){return t.replace(/%([0-9a-f]{2})/g,(e,n)=>String.fromCharCode(parseInt(n,16)))}async function v8(t){if(!await Cr(t))return;let e=await at(t),n=Me(e.toString())||{},r=tw(n);return r.configFilePath=Ce.file(t),r}async function d0(t,e,n,r){let o=await e.readDocument(n),i=o||pc,s=Me(i)||{},a=tw(s),c=vx({platform:t.platform,configFile:n,env:t.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:r},a);return c.configFilePath=n,{exists:!!o,text:i,config:c}}async function R8(t,e,n,r,o,i){return await $s(t)?{...await ege(t,e,n,r,o,i),isTrusted:!0}:(await Wa.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function ege(t,e,n,r,o,i){let s,a;return Wa.window.withProgress({location:Wa.ProgressLocation.Notification,title:Zu,cancellable:!1},async c=>{var l,u;try{let f=nd(n);if(f.parentAuthority&&!r.execServer)throw new Error(`Parent authority found without ExecServer: ${n}`);let{settings:m}=f,d="containerName"in f?f.containerName:f.containerId;o.log.write(`Setting up container: ${d}\r
`),i_(o.log,f);let p=m&&"host"in m&&m.host||void 0,g=ts(),h=Kl(t.extensionPath,vm,o.log),v=await Xr(r.execServer?{server:r.execServer,authority:f.parentAuthority}:void 0,p,f.cwd,hn,g,t.extensionPath,await _r(),e.product,o.log,Si,{sshAskpassEnv:h,settings:ig()}),C=Ms(),w={...v.type==="local"?await h:void 0,...await td(v,m)},y=Cs({exec:v.exec,env:{...w,...fr(w)},output:o.log},Ms(),Ua()),S={...v.env,...w},D=await ai({cliHost:v,dockerCLI:C,dockerComposeCLI:y,dockerComposePath:Ua(),env:S,output:o.log},"containerName"in f?f.containerName:f.containerId);if(!D)throw new pe({description:hg.l10n.t("Cannot attach to the container with name/id {0}, it no longer exists.",d),data:{reload:!1,attach:!0}});let _=(u=(l=(Wa.workspace.workspaceFolders||[void 0])[0])==null?void 0:l.uri)==null?void 0:u.path,A=await _8(v,gs,t.globalStoragePath,D,_);if(_&&A.config.workspaceFolder!==_){let x=bn(A.text,["workspaceFolder"],_,{formattingOptions:{}});await $i(gs,A.config.configFilePath,x,A.text)}s={common:await Xu({authority:n,extensionContext:t,sessionStart:o.sessionStart,progress:c,cliHost:v,env:S,cwd:f.cwd||await v.homedir(),wslSettings:g,isLocalContainer:ru(f.parentAuthority,w),telemetry:e,onDidInput:o.onDidInput,output:o.log,logFilePath:o.logFilePath,allowSystemConfigChange:!1,postCreate:i}),parsedAuthority:f,dockerCLI:C,dockerComposePath:Ua(),dockerComposeCLI:y,dockerSocketPath:e0(),dockerEnv:w,workspaceMountConsistencyDefault:XI(),gpuAvailability:await ZI(v,e.product,o.log),cacheMount:QI()?"volume":"none",configurationTracking:JI(t.workspaceState),userRepositoryConfigurationPaths:[],development:t.extensionMode===Wa.ExtensionMode.Development,ensureNoDisallowedFeatures:(x,b,I)=>$p(x,t.globalState,b,I),useExperimentalLockfile:n0()},await s_(s);let U=Bp(f.parentAuthority,m),k=yc(D),E=hg.l10n.t("Container {0} ({1}){2}",D.Config.Image,k,U);if(s.common.setWorkspaceName(E),D.State.Status!=="running")throw new pe({description:hg.l10n.t("Cannot attach to the container {0} ({1}){2}, it is not running.",D.Config.Image,k,U),params:s.common,containerId:D.Id,dockerParams:s,data:{reload:!1,start:!0}});return await C8(s,D,A.config,A.exists)}catch(f){let m=f instanceof pe?f:new pe({description:hg.l10n.t("An error occurred attaching to the container."),originalError:f});throw m.actions=[M5,$5,...tf,rl,Ma,ef,nl],m}}).then(c=>(ns(e,"attach","success",o.sessionStart,s==null?void 0:s.common,a,void 0,c.properties),c),c=>{let l=c instanceof pe?c:new pe({description:hg.l10n.t("An error occurred attaching to the container."),originalError:c});return ns(e,"attach","failure",o.sessionStart,s==null?void 0:s.common,a,void 0,l.containerProperties,l),$a(l,"attach",e,!0,o.log)})}var lt=Y(require("vscode")),We=require("vscode");var rn=Y(require("vscode")),ja=require("vscode"),N8=Y(require("path")),Em=Y(require("os")),fC=Y(require("fs")),L8=Y(require("child_process")),A8=Y(require("crypto")),F8=Y(WC());async function v0(t){rge()?await new dO().downloadAndInstallDocker(t):O8()?await new mO().downloadAndInstallDocker(t):await rn.env.openExternal(rn.Uri.parse("https://aka.ms/download-docker-linux-vscode"))}var g0=class{async downloadAndInstallDocker(e){if(await this.preInstallCheck(e)){let r=ja.l10n.t("Downloading Docker installer..."),o=ja.l10n.t("The Docker Desktop installation is started. Complete the installation and then start Docker Desktop."),i;try{i=await rn.window.withProgress({location:rn.ProgressLocation.Notification,title:r},async()=>this.downloadInstaller())}catch(a){let c=ja.l10n.t("Downloading the Docker Desktop installer failed. Do you want to manually download and install?"),l=ja.l10n.t("Download");throw this.handleError(c,l,this.downloadUrl),a}let s=this.getInstallCommand(i);rn.window.showInformationMessage(o);try{await this.install(i,s,e)}catch(a){let c=ja.l10n.t("Docker Desktop installation failed. ({0})",String(a==null?void 0:a.message)),l=ja.l10n.t("Install Instruction");throw this.handleError(c,l,"https://aka.ms/AA37qtj"),a}}}async preInstallCheck(e){let n=!0;if(await new pO(e).isDockerInstalledRealTimeCheck()){let r=ja.l10n.t("Docker Desktop is already installed. Would you like to reinstall?"),o=ja.l10n.t("Reinstall");n=await rn.window.showInformationMessage(r,{modal:!0},o)!==void 0}return n}async downloadInstaller(){let e=`${nge()}.${this.fileExtension}`;return await ige(this.downloadUrl,e),e}handleError(e,n,r){rn.window.showErrorMessage(e,{title:n}).then(o=>{o&&rn.env.openExternal(rn.Uri.parse(r))})}},dO=class extends g0{downloadUrl="https://aka.ms/download-docker-windows-vscode";fileExtension="exe";getInstallCommand(e){return`"${e}"`}async install(e,n,r){try{r.write(`Executing command ${n}`),await U8(n,r)}finally{try{await fC.promises.stat(e),await fC.promises.unlink(e)}catch{}}}},mO=class extends g0{downloadUrl=`https://aka.ms/download-docker-mac${process.arch==="arm64"?"-arm64":""}-vscode`;fileExtension="dmg";getInstallCommand(e){return`chmod +x '${e}' && open '${e}'`}async install(e){let n=ja.l10n.t("Docker Install"),r=this.getInstallCommand(e);await oge(r,n,{addDockerEnv:!1})}},tge=0;function nge(){return N8.join(Em.tmpdir(),`${rn.env.sessionId}-${tge++}.tmp`)}function rge(){return Em.platform()==="win32"}function O8(){return Em.platform()==="darwin"}async function oge(t,e,n){var a,c;let r;n=n??{},n.addDockerEnv&&(r={});let o=new rn.Task({type:"shell"},n.workspaceFolder??rn.TaskScope.Workspace,e,"Docker",new rn.ShellExecution(t,{cwd:n.cwd||((c=(a=n.workspaceFolder)==null?void 0:a.uri)==null?void 0:c.fsPath)||Em.homedir(),env:r}),[]);n.alwaysRunNew&&(o.definition.idRandomizer=A8.randomUUID()),n.focus&&(o.presentationOptions={focus:!0});let i=await rn.tasks.executeTask(o);return new Promise((l,u)=>{let f=rn.tasks.onDidEndTaskProcess(m=>{m.execution===i&&(f.dispose(),m.exitCode&&n.rejectOnError&&u(m.exitCode),l())})})}var pO=class{constructor(e){this.output=e;this.isDockerInstalledLazy=new gO(async()=>{let n=await this.isDockerInstalledRealTimeCheck();return n&&this.isDockerInstalledLazy.cacheForever(),n},this.maxCacheTime)}maxCacheTime=3e4;isDockerInstalledLazy;async isDockerInstalled(){return await this.isDockerInstalledLazy.getValue()}async isDockerInstalledRealTimeCheck(){try{let e=await ni("docker");return await U8(`${e} -v`,this.output),!0}catch{return!1}}};async function ige(t,e){await new Promise((n,r)=>{let o=fC.createWriteStream(e);F8.https.get(t,s=>{if(s.statusCode<200||s.statusCode>299){r(new Error(`Failed to download Docker (${t}): HTTP ${s.statusCode} - ${s.statusMessage}`));return}s.on("error",r),s.pipe(o),s.on("end",n)}).on("error",r)})}var k8=10*1024;async function U8(t,e,n,r){let o=Buffer.alloc(n&&n.maxBuffer||k8),i=Buffer.alloc(n&&n.maxBuffer||k8);return await sge(t,e,n,r,o,r,i),{stdout:hO(o),stderr:hO(i)}}async function sge(t,e,n,r,o,i,s,a){return await new Promise((c,l)=>{let u,f=0,m=0;n=n||{},n.shell=!0,age(n,e);let d=L8.spawn(t,n);d.on("error",p=>(u&&(u.dispose(),u=void 0),l(p))),d.on("close",(p,g)=>{if(u&&(u.dispose(),u=void 0),a&&a.isCancellationRequested)return l(new Error("User canceled"));if(p){let h=`Process '${t.length>50?`${t.substring(0,50)}...`:t}' exited with code ${p}`;s&&(h+=`
Error: ${hO(s)}`);let v=new Error(h);return v.code=p,v.signal=g,v.stdErrHandled=i!==null,l(v)}return c()}),n!=null&&n.stdin&&(d.stdin.write(n.stdin),d.stdin.end()),(r||o)&&d.stdout.on("data",p=>{let g=p.toString();r&&r(g,d),o&&(f+=o.write(g,f))}),(i||s)&&d.stderr.on("data",p=>{let g=p.toString();i&&i(g,d),s&&(m+=s.write(g,m))}),a&&(u=a.onCancellationRequested(()=>{d.kill()}))})}function age(t,e){var n;O8()&&(/(?<=^|:)\/usr\/local\/bin(?=$|:)/i.test(((n=t==null?void 0:t.env)==null?void 0:n.PATH)||process.env.PATH||"")||(t=t??{},t.env=t.env??{...process.env},e.write("WARNING: Adding '/usr/local/bin' to the PATH because it is missing."),t.env.PATH=`${t.env.PATH}:/usr/local/bin`))}function hO(t){return t.toString().replace(/[\x00-\x09\x0B-\x0C\x0E-\x1F]|\r?\n$/g,"")}var gO=class{constructor(e,n){this.valueFactory=e;this._valueLifetime=n}_isValueCreated=!1;_value;_valuePromise;get isValueCreated(){return this._isValueCreated}cacheForever(){this._valueLifetime=void 0}clear(){this._isValueCreated=!1,this._valuePromise=void 0}async getValue(){if(this._isValueCreated)return this._value;let e=this._valuePromise===void 0;e&&(this._valuePromise=this.valueFactory());let n=await this._valuePromise;if(e&&(this._value=n,this._valuePromise=void 0,this._isValueCreated=!0),this._valueLifetime&&e){let r=setTimeout(()=>{this._valueLifetime&&this._valuePromise===void 0&&(this._isValueCreated=!1,this._value=void 0),clearTimeout(r)},this._valueLifetime)}return n}};var M8=Y(require("os")),gg=Y(require("crypto")),$8=Y(require("net")),H8=Y(require("path")),Jt=Y(require("vscode")),on=require("vscode");var B8=require("string_decoder");var W8="done",w0="devcontainers";async function C0(t,e,n,r){return Jt.commands.executeCommand(it),Jt.window.withProgress({location:Jt.ProgressLocation.Notification,title:"Installing Docker in WSL"},async o=>{let i={},s={};try{await cge(t,e,n,o,i,s)}catch(a){i.outcome="error",i.errorMessage=a==null?void 0:a.message,e.write(`Failed with error: ${(a==null?void 0:a.message)||a}`)}finally{r.sendTelemetryEvent("installDockerInWSL",i,s)}return i.outcome===W8})}async function j8(t){if(process.platform!=="win32")return!1;let e=Y8();if(t.write(`Windows build number: ${e}`),e<dC)return t.write(`WSL version 2 is required to run Docker and that is only available since Windows build ${dC}.`),!1;let n=await Gr(process.cwd(),hn,t);return!await y0(n,e,t)&&e<V8?(t.write(`WSL is not installed and can only be installed automatically since Windows build ${dC}.`),!1):!0}async function cge(t,e,n,r,o,i){let s=Y8();if(e.write(`Windows build number: ${s}`),s<dC)return o.outcome="wsl2NotAvailableForWindowsBuild",Jt.window.showInformationMessage(on.l10n.t("WSL version 2 is required to run Docker and that is only available since Windows build {0}.",dC),{modal:!0});let a=await Gr(process.cwd(),hn,e);if(r.report({message:on.l10n.t("Checking if WSL is installed.")}),!await y0(a,s,e)){if(s<V8)return o.outcome="wslInstallerNotAvailableWithWindowsBuild",Jt.window.showInformationMessage(on.l10n.t("WSL is not installed. Please install WSL manually and retry."),{modal:!0});if(r.report({message:on.l10n.t("Installing WSL.")}),await uge(a,t.extensionPath,e,n))return o.outcome="rebootRequiredAfterWSLInstall",Jt.window.showInformationMessage(on.l10n.t("Please reboot your machine to finalize the WSL setup."),{modal:!0});if(!await y0(a,s,e)&&(await new Promise(_=>setTimeout(_,3e3)),!await y0(a,s,e)))return o.outcome="wslNotFoundAfterInstall",Jt.window.showInformationMessage(on.l10n.t("WSL not found after install."),{modal:!0})}r.report({message:on.l10n.t("Checking WSL version.")}),o.wslVersion=await fge(a,e),r.report({message:on.l10n.t("Listing installed WSL distributions.")});let l=await vO(a,e);if(!l.length){if(r.report({message:on.l10n.t("Installing WSL distribution.")}),await mge(a,e,n))return o.outcome="featureMissingDuringDistroInstall",Jt.window.showInformationMessage(on.l10n.t("A required feature is missing. Please reboot your machine to finalize the WSL setup if you haven't done so yet."),{modal:!0});if(l=await vO(a,e),!l.length&&(await new Promise(S=>setTimeout(S,3e3)),l=await vO(a,e),!l.length))return o.outcome="noDistroAfterInstall",Jt.window.showInformationMessage(on.l10n.t("No WSL distro found after install."),{modal:!0})}i.wslDistros=l.length;let u=l.find(y=>y.isDefault);if(!u&&l.length===1&&(u=l[0]),!u)return o.outcome="noDefaultDistro",Jt.window.showInformationMessage(on.l10n.t("No default WSL distro found."),{modal:!0});if(o.isDefaultDistro=String(u.isDefault),u.version!=="2")return o.outcome="defaultDistroNotVersion2",Jt.window.showInformationMessage(on.l10n.t("Default distro is not using WSL version 2."),{modal:!0});r.report({message:on.l10n.t("Reading distribution information.")});let f=Hf("wsl",["-u","root","-e"],void 0),m=await Wt(f,e,void 0,"linux","Host"),{stdout:d}=await m.exec("cat /etc/os-release || cat /usr/lib/os-release || true"),p=pge(d);if(o.distro=p.ID,p.ID!=="debian"&&p.ID!=="ubuntu")return o.outcome="distroNotSupported",Jt.window.showInformationMessage(p.NAME?on.l10n.t("Unsupported WSL distribution: {0}",p.NAME):on.l10n.t("Unsupported WSL distribution."),{modal:!0});let g=Hf("wsl",["-e"],void 0),h=await Wt(g,e,void 0,"linux","Host"),v=await Fl(h);if(v==="root"){try{await m.exec(`id ${w0}`)}catch{await m.exec(`useradd --create-home --shell /usr/bin/bash --user-group --groups adm,dialout,cdrom,floppy,sudo,audio,dip,video,plugdev,netdev --password '${gg.randomUUID()}' ${w0}`)}if(await m.exec(`cat >>/etc/wsl.conf <<'wslConf'
[user]
default=${w0}
wslConf
`),await X({exec:a.exec,cmd:"wsl",args:["--terminate",u.name],output:e,print:"continuous"}),m=await Wt(f,e,void 0,"linux","Host"),h=await Wt(g,e,void 0,"linux","Host"),await Fl(h)==="root")return o.outcome="failedToSwitchUser",Jt.window.showInformationMessage(on.l10n.t("Default user in WSL is root, requiring a regular user."),{modal:!0})}let C=await wO(h,"docker")||await wO(m,"docker")||await wO(m,"dockerd");if(C){await m.exec(`usermod -aG docker ${v}`).catch(()=>{});let y=on.l10n.t("Reinstall");if(await Jt.window.showInformationMessage(on.l10n.t("Docker is already installed in WSL."),{modal:!0,detail:on.l10n.t("Path: {0}",C)},y)!==y){o.outcome="dockerAlreadyInstalled";return}}r.report({message:on.l10n.t("Installing Docker.")}),await m.exec("export DEBIAN_FRONTEND=noninteractive"),await m.exec("apt update && apt -y install --no-install-recommends apt-transport-https ca-certificates curl gnupg2"),await m.exec(`curl -fsSL https://download.docker.com/linux/${p.ID}/gpg | tee /etc/apt/trusted.gpg.d/docker.asc`),await m.exec(`echo "deb [arch=$(dpkg --print-architecture)] https://download.docker.com/linux/${p.ID} ${p.VERSION_CODENAME} stable" | tee /etc/apt/sources.list.d/docker.list`),await m.exec("apt update && apt -y install --no-install-recommends docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin"),await m.exec(`usermod -aG docker ${v}`),r.report({message:on.l10n.t("Updating Settings.")});let w=Jt.workspace.getConfiguration();await w.update(us("executeInWSL"),!0,Jt.ConfigurationTarget.Global),await w.update(us("executeInWSLDistro"),u.isDefault?void 0:u.name,Jt.ConfigurationTarget.Global),o.outcome=W8}var dC=18917,V8=20262;function Y8(){let t=M8.release(),e=process.platform==="win32"&&t&&/(\d+)\.(\d+)\.(\d+)/g.exec(t);return e&&e.length===4?parseInt(e[3]):0}async function y0(t,e,n){if(t.platform!=="win32")return!1;if(e>=22e3)try{return await X({exec:t.exec,cmd:"wsl",args:["--status"],output:n,print:"continuous"}),!0}catch{return n.write("WSL feature installed: false (wsl --status failed)"),!1}else{let r=lge(t);if(r){let o=await t.isFile(r);return n.write(`WSL feature installed: ${o} (dll path: ${r})`),o}return n.write("WSL feature installed: false (no dll path)"),!1}}function lge(t){let e=t.env.SystemRoot;if(e){let n=t.env.PROCESSOR_ARCHITEW6432;return t.path.join(e,n?"Sysnative":"System32","lxss","LxssManager.dll")}}async function uge(t,e,n,r){let{wrappedOutput:o,wrappedInput:i}=q8(n,r);try{let s=t.path.join(await t.tmpdir(),`wsl-install-${gg.randomUUID()}.js`);await t.writeFile(s,await at(H8.join(e,"dist/extension/runAsMain.js")));let a=`\\\\.\\pipe\\wsl-install-${gg.randomUUID()}-sock`,c=t.path.join(await t.tmpdir(),`wsl-install-${gg.randomUUID()}.bat`),l=nw(t),u=await xk({cliHost:t,env:{RUN_AS_CMD:await ni("wsl"),RUN_AS_ARGS:JSON.stringify(["--install"]),...n.dimensions?{RUN_AS_COLS:String(n.dimensions.columns),RUN_AS_ROWS:String(n.dimensions.rows)}:{},RUN_AS_SOCKET:a,ELECTRON_RUN_AS_NODE:"1"},appRoot:Jt.env.appRoot},l.cmd)||{},f=`@echo off

${Object.keys(u).map(g=>`set ${g}=${u[g]}`).join(`
`)}
"${l.cmd}" ${l.args.map(g=>`"${g}"`).join(" ")} "${s}"
`;await t.writeFile(c,Buffer.from(f.replaceAll(/\r?\n/g,`\r
`)));let m="",d=new $8.Server(g=>{d.close();let h=new B8.StringDecoder;g.on("data",v=>{let C=h.write(v);o.raw(C),m+=C}),i.event(v=>g.write(v))});return d.listen(a),await Fi({ptyExec:t.ptyExec,cmd:"powershell.exe",args:["Start-Process","-FilePath",`'${c}'`,"-Verb","RunAs","-WindowStyle","Hidden","-Wait"],env:ao(),output:o,onDidInput:i.event}),m.replace(Vs,"").replaceAll(/\s/g,"").indexOf("untilthesystemisrebooted")!==-1}finally{i.dispose()}}async function fge(t,e){try{let{stdout:n}=await X({exec:t.exec,cmd:"wsl",args:["--version"],output:e,print:"continuous"});return n.toString("utf16le").match(/^.*$/m)[0]}catch{return"unknown"}}async function vO(t,e){try{let{stdout:n}=await X({exec:t.exec,cmd:"wsl",args:["-l","-v"],output:e,print:"continuous"});return dge(n.toString("utf16le"))}catch{return[]}}function dge(t){let e=/\r\n/.test(t)?`\r
`:`
`,n=t.split(e),r=/^(?<default>\*|\s)\s*(?<name>[a-zA-Z0-9\.\-_]+)\s+(?<state>\w+)\s+(?<version>\d)/,o=[];for(let i=1;i<n.length;i++){let s=r.exec(n[i]);if(s!=null&&s.groups){let a=s.groups.name,c=s.groups.version,l=i===1;o.push({name:a,isDefault:l,version:c})}}return o}async function mge(t,e,n){await X({exec:t.exec,cmd:"wsl",args:["--set-default-version","2"],output:e,print:"continuous"});let{wrappedOutput:r,wrappedInput:o}=q8(e,n);try{let{cmdOutput:i}=await Fi({ptyExec:t.ptyExec,cmd:"wsl",args:["--install","-d","Ubuntu"],output:r,onDidInput:o.event});return i.replace(Vs,"").replaceAll(/\s/g,"").indexOf("0x80370114")!==-1}finally{o.dispose()}}function q8(t,e){let n=e(a=>r.fire(a)),r=new js(n),o="",i=gg.randomUUID();return{wrappedOutput:sn({...t,get dimensions(){return t.dimensions},event:a=>{if(t.event(a),a.type==="text"||a.type==="raw"){o+=a.text;let c=o.replace(Vs,"");/Enter new UNIX username:\s*$/.test(c)?r.fire(`${w0}\r`):/(New|Retype new) password:\s*$/.test(c)?r.fire(`${i}\r`):/any key to continue\.*\s*$/.test(c)?r.fire("\r"):/Installation successful!/.test(c)&&r.fire("exit\r")}}}),wrappedInput:r}}function pge(t){return t.split(`
`).reduce((e,n)=>{let r=n.indexOf("=");return r!==-1&&(e[n.substring(0,r)]=n.substring(r+1)),e},{})}async function wO(t,e){try{let{stdout:n}=await t.exec(`command -v ${e}`);return n.trim()}catch{return}}var hge={reopenInContainer:We.l10n.t("Do you want to continue with reopening the folder in a container?"),openInContainer:We.l10n.t("Do you want to continue with opening a folder in a container?"),cloneInVolume:We.l10n.t("Do you want to continue with cloning a repository in a Docker volume?"),attachToContainer:We.l10n.t("Do you want to continue with attaching to a container?"),checkoutPRInVolume:We.l10n.t("Do you want to continue with checking out a pull-request in a Docker volume?"),createDevContainer:We.l10n.t("Do you want to continue with creating a Dev Container?"),inspectVolume:We.l10n.t("Do you want to continue with inspecting a Docker volume?"),trySample:We.l10n.t("Do you want to continue with trying a sample Dev Container?")},gge=`[${We.l10n.t("Starting Docker (show log)")}](command:${it} "${We.l10n.t("Show details in terminal")}")`;async function no(t,e,n,r,o,i){var f;let s=await Ze(t,e,i),a=(f=(lt.workspace.workspaceFolders||[])[0])==null?void 0:f.uri;a&&(a.scheme==="file"&&xr(a.fsPath)||Ip(a))&&(s=await Ze(t,s.output,a));let c=pC(s,r),l=await Promise.race([c,new Promise(m=>setTimeout(()=>m("timeoutOrCanceled"),2e3))]);if(l==="timeoutOrCanceled"&&(l=await lt.window.withProgress({location:lt.ProgressLocation.Notification,title:gge,cancellable:!0},async(m,d)=>Promise.race([c,new Promise(p=>{let g=d.onCancellationRequested(()=>{g.dispose(),p("timeoutOrCanceled")})})])),l==="timeoutOrCanceled"))return!1;let u=await c;if(u==="permission")return await lt.window.showErrorMessage(We.l10n.t("Current user does not have permission to run 'docker'."),{modal:!0,detail:We.l10n.t("Try adding the user to the 'docker' group.")},We.l10n.t("Documentation"))&&lt.env.openExternal(lt.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079224")),!1;if(u==="ssh")return await lt.window.showErrorMessage(We.l10n.t("Cannot connect to Docker daemon using 'ssh'."),{modal:!0,detail:We.l10n.t("Make sure public/private keys are set up for connecting without keyboard interaction.")},We.l10n.t("Show Log"))&&lt.commands.executeCommand(it),!1;if(u==="daemon")return await lt.window.showErrorMessage(We.l10n.t("Docker returned an error."),{modal:!0,detail:We.l10n.t("Make sure the Docker daemon is running.")},We.l10n.t("Show Log"))&&lt.commands.executeCommand(it),!1;if(u==="cwd")return await lt.window.showErrorMessage(We.l10n.t("Workspace folder does not exist.",s.cliHost.cwd),{modal:!0,detail:s.cliHost.cwd},We.l10n.t("Show Log"))&&lt.commands.executeCommand(it),!1;if(u==="command"&&(s.cliHost.type==="local"||s.cliHost.type==="wsl")&&await j8(s.output)){let m=We.l10n.t("Install");if(await lt.window.showInformationMessage(We.l10n.t("Dev Containers require Docker to run."),{modal:!0,detail:We.l10n.t("Do you want to install Docker in WSL?")},m)===m){if(rf(r,"installInWSL","install"),await C0(t,s.output,n,r)){let g=We.l10n.t("Continue");return await lt.window.showInformationMessage(We.l10n.t("Docker has been installed. {0}",hge[o]),g)===g?(rf(r,"continueAfterInstall","continue"),!0):(rf(r,"continueAfterInstall","cancel"),!1)}return!1}return rf(r,"installInWSL","cancel"),!1}if(!u||u==="command"){if(s.cliHost.type==="wsl")await lt.window.showErrorMessage(We.l10n.t("Docker Desktop WSL 2 backend required."),{modal:!0},We.l10n.t("Read more on docker.com"))&&lt.env.openExternal(lt.Uri.parse("https://docs.docker.com/docker-for-windows/wsl"));else{let m=We.l10n.t("Install"),d=We.l10n.t("License"),p=We.l10n.t("Ignore"),g=[],h=[];u==="command"&&s.dockerCLI!=="docker"&&h.push(We.l10n.t("Command not found: '{0}'.",s.dockerCLI)),s.cliHost.type==="local"&&(g.push(m,d),h.push(We.l10n.t("Check the license for details."))),u===!1&&g.push(p);let v=h.join(" "),C=s.cliHost.type==="remote"?We.l10n.t("Docker version 17.12.0 or later required on remote host."):We.l10n.t("Docker version 17.12.0 or later required."),w=await lt.window.showErrorMessage(C,{modal:!0,detail:v},...g);if(w===m)return v0(s.output).then(console.error),rf(r,"dockerDesktop","install"),!1;if(w===d)return lt.env.openExternal(lt.Uri.parse("https://aka.ms/docker-subscription-service-agreement")),rf(r,"dockerDesktop","license"),!1;if(w===p)return rf(r,"dockerDesktop","ignore"),!0;rf(r,"dockerDesktop","cancel")}return!1}return u==="wsl1"?(await lt.window.showErrorMessage(We.l10n.t("WSL 2 distro required."),{modal:!0,detail:We.l10n.t("The WSL distro is running with WSL 1.")},We.l10n.t("Read more on docker.com"))&&lt.env.openExternal(lt.Uri.parse("https://docs.docker.com/docker-for-windows/wsl")),!1):!0}function rf(t,e,n){t.sendTelemetryEvent("dockerVersionUserChoice",{dialog:e,choice:n})}async function pC(t,e,n=!0){var a,c,l,u;let r;try{r=(await Qk(t,hn,n,"version","--format","{{json .}}")).stdout.toString()}catch(f){console.error(f);let m=f&&(f.stderr?f.stderr.toString():f.message)||"";mC(e,"error",void 0,m);let d=m.toLowerCase();return d.indexOf("permission denied")!==-1?d.indexOf("ssh")!==-1?"ssh":"permission":d.indexOf("enoent")!==-1||d.indexOf("not found")!==-1||d.indexOf("notfound")!==-1?await t.cliHost.isFolder(t.cliHost.cwd)?(t.output.write(`CLI host's PATH: ${t.cliHost.env.PATH}`),"command"):"cwd":t.cliHost.type==="wsl"&&((l=(c=(a=f==null?void 0:f.stdout)==null?void 0:a.toString())==null?void 0:c.toLowerCase())==null?void 0:l.indexOf("wsl 1"))!==-1?"wsl1":"daemon"}let o;try{let f=Me(r);o=(u=f==null?void 0:f.Server)==null?void 0:u.ApiVersion}catch{}let i=o&&ux(o);if(!i&&r.toLowerCase().indexOf("error during connect")!==-1)return mC(e,"error",void 0,r),"daemon";if(!i)return mC(e,"unparsed",r),!0;let s=!fx(i,[1,35]);return!s&&await a3(t)?(mC(e,"podman",r),!0):(mC(e,s?"success":"failure",r),s)}function mC(t,e,n,r){let o={outcome:e};n&&(o.version=n),r&&(o.errorMessage=r),t.sendTelemetryEvent("dockerVersion",o)}async function G8(t){try{let e=Bi(t,await t.dockerComposeCLI());return await iw({...e,print:!0},"version","--short"),!0}catch(e){return(e==null?void 0:e.code)==="ENOENT"?await lt.window.showErrorMessage(We.l10n.t("Docker Compose required"),{modal:!0,detail:t.dockerComposePath!=="docker-compose"?We.l10n.t("Command not found: '{0}'.",t.dockerComposePath):void 0},We.l10n.t("Documentation"))&&lt.env.openExternal(lt.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079610")):await lt.window.showErrorMessage(We.l10n.t("Docker Compose returned an error."),{modal:!0},We.l10n.t("Show Log"))&&lt.commands.executeCommand(it),!1}}var vg=Y(require("vscode"));var E0=class{constructor(e){this.fileHost=e}async provideDocumentLinks(e,n){let r=[],o=cf(e.getText());if(!o)return r;let i=LC(o)||{};return i.configFilePath=e.uri,Oo(i)&&this._linksForDockerfile(r,i,o,e),"dockerComposeFile"in i&&await this._linksForDockerCompose(r,i,o,e),r}_tryAddDocumentLinkToBucket(e,n,r,o,i){let s=e.positionAt(n),a=e.positionAt(r);s.compareTo(a)!==0&&i.push(new vg.DocumentLink(new vg.Range(s,a),o))}_linksForDockerfile(e,n,r,o){let i=rs(r,["build","dockerfile"])||rs(r,["dockerFile"]);i&&i.type==="string"&&this._tryAddDocumentLinkToBucket(o,i.offset+1,i.offset+i.length-1,Kf(this.fileHost,n),e)}async _linksForDockerCompose(e,n,r,o){let s=(await zl(this.fileHost,n)).map(c=>vg.Uri.file(c).path),a=rs(r,["dockerComposeFile"]);if(s.length>0&&a)if(a.type==="array"&&a.children)for(let c=0;c<a.children.length;c++)this._tryAddDocumentLinkToBucket(o,a.children[c].offset+1,a.children[c].offset+a.children[c].length-1,o.uri.with({path:s[c]}),e);else a.type==="string"&&this._tryAddDocumentLinkToBucket(o,a.offset+1,a.offset+a.length-1,o.uri.with({path:s[0]}),e)}};var Z=Y(require("vscode")),Ae=require("vscode"),Cg=Y(require("path"));var wg=require("vscode"),z8=Y(require("path"));function S0(t){let e=tu(t);if(e)return`${z8.basename(e)}`;{let n=sw(t);if(n)return n;let r=vc(t);if(r)return Kk(r);let o=Ql(t);return o?o.volumeName:t.Config.Image}}function x0(t,e=!1){let n=yc(t);return e?`${n} (${yO(t)})`:n}function yO(t){let e="",n=t.State.Status,r=new Date(t.State.StartedAt),o=new Date(t.State.FinishedAt);if(r.getFullYear()>1&&o.getFullYear()>1){let i=new Date,s=new Date(r>o?t.State.StartedAt:t.State.FinishedAt);e=` ${SO(i,s)}`+(n.endsWith("ing")?"":" ago")}return`${n.charAt(0).toUpperCase()+n.slice(1)}`+e}function _0(t){let e=t.Name;if(t.Labels&&yg(t)){let r=I0(t);r&&r.gitUrlInfo.repository!=="unknown"&&(e=r.gitUrlInfo.fullRepositoryName)}return e}function D0(t){let e="";if(t.Labels&&yg(t)){let r=I0(t);if(r&&r.gitUrlInfo.repository!=="unknown"){let o=CO(t),i=EO(t);i?e=`#${i}`:o&&(e=`${o}`)}}return e}function yg(t){let e=t.Labels;if(e){let n=e["vsch.local.repository.unique"];if(n&&n==="true")return!0}return!1}function CO(t){let e=t.Labels;if(e&&yg(t)&&e["vsch.local.repository.branch"])return e["vsch.local.repository.branch"]}function EO(t){let e=t.Labels;if(e&&yg(t)&&e["vsch.local.repository.pullRequestId"])return e["vsch.local.repository.pullRequestId"]}function I0(t){let e=t.Labels;if(e){let n=e["vsch.local.repository.unique"];if(n&&n==="true"){let r=e["vsch.local.repository"];return ci(r)}}}var K8=1e3,J8=K8*60,X8=J8*60,Z8=X8*24,vge=Z8*365;function SO(t,e){let n,r=t.getTime()-e.getTime();return(n=Math.round(r/vge))>0?n===1?"1 year":wg.l10n.t("{0} years",n):(n=Math.round(r/Z8))>0?n===1?"1 day":wg.l10n.t("{0} days",n):(n=Math.round(r/X8))>0?n===1?"1 hour":wg.l10n.t("{0} hours",n):(n=Math.round(r/J8))>0?n===1?"1 minute":wg.l10n.t("{0} minutes",n):(n=Math.round(r/K8),n===1?"1 second":wg.l10n.t("{0} seconds",n))}var hC=Y(require("vscode")),gC=require("vscode");async function Q8(t){let e=(await Promise.all([lw,uw,Wp,Hp,Jx].map(async o=>{let{stdout:i}=await et(t,"ps","-a","-q","--filter","status=exited","--filter",`label=${o}`);return i.toString().split(/\r?\n/).filter(s=>!!s)}))).flat(),n;if(e.length){let i=(await ws(t,e)).map(a=>({label:S0(a),description:x0(a,!0),container:a}));i.sort((a,c)=>a.label.localeCompare(c.label));let s=await hC.window.showQuickPick(i,{canPickMany:!0,placeHolder:gC.l10n.t("Select stopped dev containers to delete")});if(!s)return;s.length&&(n=new Set(await Xl(t)),await et(t,"rm",...s.map(a=>a.container.Id)))}let r=await t9(t,n);(!e.length||r==="none")&&await hC.window.showInformationMessage(gC.l10n.t("There are no stopped dev containers or unused dev volumes to delete."),{modal:!0})}async function e9(t){await t9(t)==="none"&&await hC.window.showInformationMessage(gC.l10n.t("There are no unused dev volumes to delete."),{modal:!0})}async function t9(t,e){let n=[...new Set([...e?(await Xl(t)).filter(r=>!e.has(r)&&r!=="vscode"):[],...await Xl(t,[Gk]),...await Xl(t,[n_])])];if(n.length){let o=(await Jf(t,n)).map(s=>({label:_0(s),description:D0(s),volume:s}));o.sort((s,a)=>s.label.localeCompare(a.label));let i=await hC.window.showQuickPick(o,{canPickMany:!0,placeHolder:gC.l10n.t("Select unused dev volumes to delete")});if(!i)return"cancel";i.length&&await et(t,"volume","rm",...i.map(s=>s.volume.Name))}return n.length?"done":"none"}var n9=Ae.l10n.t("Stop Container"),r9=Ae.l10n.t("Reopen Folder locally"),o9=Ae.l10n.t("Close Workspace");var wr=class{static isGroupItem(e){return!!e&&e.type==="Group"}static isContainerItem(e){return!!e&&e.type==="Container"}static isFolderItem(e){return!!e&&e.type==="Folder"}};var P0=class extends wr{constructor(n,r){super();this.label=n;this.groupType=r}type="Group";async asTreeItem(n,r,o,i){return new Z.TreeItem(this.label,Z.TreeItemCollapsibleState.Expanded)}},Eg=class extends wr{constructor(n,r=[],o,i=!1){super();this.container=n;this.folders=r;this.parent=o;this.isDevContainer=i}type="Container";async asTreeItem(n,r,o,i){let s=new Z.TreeItem(this.getContainerLabel(),this.getCollapsibleState());s.description=x0(this.container);let a=this.getContextBase();s.iconPath=T0(r,Ege),s.contextValue="exited"+a;let c=!1;return o&&this.container.Id===o.Id?(s.iconPath=T0(r,Cge),s.contextValue="active"+a,c=!0):n&&await this.setTreeItemIconAndContext(n,a,s),s.tooltip=this.getHover(c,s.iconPath instanceof Z.ThemeIcon?s.iconPath:new Z.ThemeIcon("vm"),s.label),this.folders.length===1&&this.isDevContainer&&(s.contextValue+="Folder"),s}getContextBase(){return(this.isDevContainer?"Dev":"")+"Container"}getCollapsibleState(){return this.folders.length>1?Z.TreeItemCollapsibleState.Expanded:Z.TreeItemCollapsibleState.None}async setTreeItemIconAndContext(n,r,o){switch(this.container.State.Status){case"created":{o.iconPath=new Z.ThemeIcon("vm"),o.contextValue="exited"+r;break}case"paused":{o.iconPath=new Z.ThemeIcon("vm-outline"),o.contextValue="running"+r;break}case"restarting":{o.iconPath=new Z.ThemeIcon("vm-outline"),o.contextValue="exited"+r;break}case"exited":{o.iconPath=new Z.ThemeIcon("vm"),o.contextValue="exited"+r;break}case"running":{o.iconPath=new Z.ThemeIcon("vm-running"),o.contextValue="running"+r;break}}}getTimeElapsed(n){return n?yO(n):""}getContainerLabel(){return S0(this.container)}getHover(n,r,o){let i=new Z.MarkdownString(void 0,!0);if(i.appendMarkdown(`$(${r.id}) ${o} (${yc(this.container)})  
`),this.repository){let a=this.repository.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)";i.appendMarkdown(`${a} [${this.repository.fullRepositoryName}](${this.repository.gitUrlInfo.repositoryUrl})  
`)}let s=r_(this.container);return s&&i.appendMarkdown(`$(file-symlink-directory) ${s}  
`),n?i.appendMarkdown(Ae.l10n.t("$(remote) Connected")):i.appendMarkdown(`$(history) ${this.getTimeElapsed(this.container)}`),i}_repository;_alreadyCheckedRepository=!1;get repository(){if(!this._alreadyCheckedRepository){let n=vc(this.container);n&&(this._repository=ci(n)),this._alreadyCheckedRepository=!0}return this._repository}inspect(n){return si(n,this.container.Id)}},ol=class extends wr{constructor(n,r,o){super();this.container=n;this.folder=r;this.isDevContainer=o}type="Folder";async asTreeItem(n,r,o,i){let s=new Z.TreeItem(Cg.basename(this.folder.path),Z.TreeItemCollapsibleState.None);return s.description=this.folder.path,s.iconPath=T0(r,xge),s.contextValue="attachedFolder",this.isDevContainer&&!vc(this.container)&&!Ql(this.container)&&(s.contextValue="devFolder"),o&&this.container.Id===o.Id&&i===this.folder.path&&(s.iconPath=T0(r,Sge),s.tooltip=Ae.l10n.t("Active Folder {0}",String(s.label)),s.contextValue=`active${s.contextValue}`),s}};function wge(t,e,n,r){if(!(!Z.env.remoteName||Z.env.remoteName!=="attached-container"&&Z.env.remoteName!=="dev-container"))return i9(t,e,n,r)}function i9(t,e,n,r){Z.commands.executeCommand("setContext","remote-containers:showDetails",!0);let o=new PO(t,e,r,e.output),i=Z.window.createTreeView("detailsContainers",{treeDataProvider:o});return o.setTitle=s=>{i.title=s},t.subscriptions.push(n.onDidChangeActiveContainer(s=>o.refresh(s))),o}function yge(t,e){let n=[n9];return t&&t.Id===e.Id&&Z.workspace.workspaceFolders&&Z.workspace.workspaceFolders.length>0&&(n.push(o9),Z.workspace.workspaceFolders[0].uri.authority.startsWith("dev-container")&&n.push(r9)),n}var xO=class{constructor(e,n){this.dockerParams=e;this.containerId=n}writeEmitter=new Z.EventEmitter;onDidWrite=this.writeEmitter.event;destroyables=[];open(){let{cliHost:e,env:n,output:r}=this.dockerParams;e.exec({cmd:Ms(),args:["logs","-f",this.containerId],env:n,output:r}).then(o=>{this.destroyables.push(o.stdout.on("data",i=>{this.write(i.toString())})),this.destroyables.push(o.stderr.on("data",i=>{this.write(i.toString())}))}).catch(console.error)}close(){this.writeEmitter.dispose(),this.destroyables.forEach(e=>{e.destroy()})}write(e){this.writeEmitter.fire(e.replace(/\n/g,`\r
`))}},b0=class{constructor(e,n,r,o,i,s){this.targetsTreeData=e;this.detailsTreeData=n;this.devVolumesTreeData=r;this.dockerParams=o;this.context=i;this.telemetry=s}updateDockerParameters(e){this.dockerParams=e}registerCommands(){let e=[];return e.push(Z.commands.registerCommand("remote-containers.stopContainer",this.commandStopContainer,this)),e.push(Z.commands.registerCommand("remote-containers.removeContainer",this.commandRemoveContainer,this)),e.push(Z.commands.registerCommand("remote-containers.startContainer",this.commandStartContainer,this)),e.push(Z.commands.registerCommand("remote-containers.removeRecentFolder",this.commandRemoveRecentFolder,this)),e.push(Z.commands.registerCommand("remote-containers.showDetails",this.commandShowDetails,this)),e.push(Z.commands.registerCommand("remote-containers.explorerDetailsRefresh",this.commandExplorerDetailsRefresh,this)),e.push(Z.commands.registerCommand("remote-containers.attachToContainerInCurrentWindow",this.commandAttachToContainerInCurrentWindow,this)),e.push(Z.commands.registerCommand("remote-containers.attachToContainerInNewWindow",this.commandAttachToContainerInNewWindow,this)),e.push(Z.commands.registerCommand("remote-containers.inspectDockerResource",this.commandInspectDockerResource,this)),e.push(Z.commands.registerCommand("remote-containers.openInformationAboutMountPerformance",this.openInformationAboutMountPerformance,this)),e.push(Z.commands.registerCommand("remote-containers.inspectInBasicDevContainer",this.commandInspectInBasicDevContainer,this)),e.push(Z.commands.registerCommand("remote-containers.cloneInVolume",this.commandCloneInVolume,this)),e.push(Z.commands.registerCommand("remote-containers.removeVolume",this.commandRemoveVolume,this)),e.push(Z.commands.registerCommand("remote-containers.explorerVolumesRefresh",this.commandExplorerVolumesRefresh,this)),e.push(Z.commands.registerCommand("remote-containers.openFolderInContainerInCurrentWindow",n=>this.commandStartAndOpenFolder(n,{forceReuseWindow:!0}),this)),e.push(Z.commands.registerCommand("remote-containers.openFolderInContainerInNewWindow",n=>this.commandStartAndOpenFolder(n,{forceNewWindow:!0}),this)),e.push(Z.commands.registerCommand("remote-containers.showContainerLog",this.commandShowContainerLog,this)),e}async commandStopContainer(e){if(!wr.isContainerItem(e))return;let n=this.targetsTreeData.currentContainer&&this.targetsTreeData.currentContainer.Id===e.container.Id?Ae.l10n.t("Stop active container? This will disconnect your current window."):Ae.l10n.t("Stop {0}?",e.getContainerLabel()),r=await Z.window.showWarningMessage(n,{modal:!0},...yge(this.targetsTreeData.currentContainer,e.container));await this.targetsTreeData.withProgress(e,async()=>{switch(r){case n9:{await GF(this.dockerParams,e.container),e.container=await si(this.dockerParams,e.container.Id);break}case o9:{await Z.commands.executeCommand("workbench.action.closeFolder");break}case r9:{await Z.commands.executeCommand("remote-containers.reopenLocally");break}}})}async commandRemoveContainer(e){if(!wr.isContainerItem(e))return;let n=await ai(this.dockerParams,e.container.Id);if(!n)return;let r=Ae.l10n.t("Remove"),o=await Z.window.showWarningMessage(Ae.l10n.t("Remove this container?"),{modal:!0,detail:Ae.l10n.t("This action is not reversible and deletes the container permanently.")},r);await this.targetsTreeData.withProgress(e.parent,async()=>{o===r&&(await GF(this.dockerParams,e.container),await S5(this.dockerParams,n.Id),this.detailsTreeData&&await this.detailsTreeData.refresh(void 0),await this.tryRemoveVolume(e.container))})}async tryRemoveVolume(e){let n=r_(e);if(n||(n=O3(e)),n){let r=await Bx(this.dockerParams,n);if((await Xl(this.dockerParams)).indexOf(n)>=0){let s;r!=null&&r.Labels&&r.Labels["vsch.local.repository.unique"]==="true"?s=Ae.l10n.t("The container is using a volume with a cloned repository."):s=Ae.l10n.t("This is the last container using '{0}'.",n);let a=Ae.l10n.t("Remove");await Z.window.showInformationMessage(s,{modal:!0,detail:Ae.l10n.t("Do you want to remove the volume and the data it contains?")},a)===a&&await zF(this.dockerParams,n)}}}async commandExplorerVolumesRefresh(e){return await this.devVolumesTreeData.getDockerParams(),this.devVolumesTreeData.refresh(void 0)}async commandStartContainer(e){wr.isContainerItem(e)&&await this.targetsTreeData.withProgress(e,async()=>{await r0(this.dockerParams,e.container),e.container=await si(this.dockerParams,e.container.Id)})}async commandRemoveRecentFolder(e){wr.isFolderItem(e)&&(await Z.commands.executeCommand("vscode.removeFromRecentlyOpened",e.folder.toString()),await this.targetsTreeData.refresh(void 0))}async commandShowDetails(e){wr.isContainerItem(e)&&(this.detailsTreeData||(this.detailsTreeData=i9(this.context,this.dockerParams,this.targetsTreeData,this.telemetry)),await this.detailsTreeData.refresh(e))}async commandExplorerDetailsRefresh(){this.detailsTreeData&&await this.detailsTreeData.refresh(void 0)}async commandStartAndOpenFolder(e,n){let r,o;wr.isFolderItem(e)?(o=e,r=e.container):Eg.isContainerItem(e)&&(o=e.folders[0],r=e.container),r&&(o&&nd(o.folder.authority)?(await r0(this.dockerParams,r),await vC(this.dockerParams,r,this.context,!!(n!=null&&n.forceNewWindow),o.folder.path)):await Z.commands.executeCommand("remote-containers.openFolder",o,n))}async commandAttachToContainerInCurrentWindow(e){return this.attachToContainerInternal(e,!1)}async commandAttachToContainerInNewWindow(e){return this.attachToContainerInternal(e,!0)}async attachToContainerInternal(e,n){let r;wr.isContainerItem(e)?r=e.container:this.detailsTreeData&&(r=this.detailsTreeData.container),r&&(await r0(this.dockerParams,r),await vC(this.dockerParams,r,this.context,n))}async commandInspectDockerResource(e){let n;(wr.isContainerItem(e)||il.isImageItem(e)||il.isVolume(e)||il.isDevVolume(e))&&(n=await e.inspect(this.dockerParams)),n&&Z.window.showTextDocument(await Z.workspace.openTextDocument({language:"json",content:JSON.stringify(n,null,"	")}))}async openInformationAboutMountPerformance(){await Z.env.openExternal(Z.Uri.parse("https://aka.ms/vscode-remote/containers/open-repo"))}async commandInspectInBasicDevContainer(e){il.isDevVolume(e)&&await e.inspectInBasicDevContainer()}async commandCloneInVolume(e){il.isDevVolume(e)&&await e.cloneRepositoryInVolume()}async commandRemoveVolume(e){il.isDevVolume(e)&&await e.removeVolume(this.dockerParams)}static async commandNewContainer(){var r;let e=[...(r=Z.workspace.workspaceFolders)!=null&&r.length?[{label:Ae.l10n.t("Open Current Folder in Container"),command:"remote-containers.reopenInContainer"}]:[],{label:Ae.l10n.t("Open Folder in Container..."),command:"remote-containers.openFolder"},{label:Ae.l10n.t("Open Workspace in Container..."),command:"remote-containers.openWorkspace"},{label:Ae.l10n.t("New Dev Container..."),command:"remote-containers.createDevContainer"},{label:Ae.l10n.t("Clone Repository in Container Volume..."),command:"remote-containers.openRepositoryInVolume"},{label:Ae.l10n.t("Clone GitHub Pull Request in Container Volume..."),command:"remote-containers.openPullRequestInVolume"},{label:Ae.l10n.t("Try a Sample..."),command:"remote-containers.trySample"}],n=await Z.window.showQuickPick(e,{placeHolder:Ae.l10n.t("Select an action to create a dev container")});if(n)return Z.commands.executeCommand(n.command)}async commandShowContainerLog(e){if(!wr.isContainerItem(e))return;let n=new xO(this.dockerParams,e.container.Id);Z.window.createTerminal({name:e.container.Config.Image,pty:n}).show()}};function s9(t,e,n,r){Z.commands.executeCommand("setContext","remote-containers:showDetails",!1);let o=new _O(t,e,s,n,r),i=Z.window.createTreeView("targetsContainers",{treeDataProvider:o});o.setMessage=a=>i.message=a,t.subscriptions.push(Z.commands.registerCommand("remote-containers.explorerTargetsRefresh",async()=>(await o.getDockerParams(!0),o.refresh(void 0)))),t.subscriptions.push(Z.commands.registerCommand("remote-containers.newContainer",b0.commandNewContainer)),t.subscriptions.push(Z.commands.registerCommand("remote-containers.pruneVolumes",async()=>{let a=await o.getDockerParams(!0);a&&await e9(a)}));function s(a){let c=wge(t,a,o,n),l=new TO(t,n,r),u=Z.window.createTreeView("devVolumes",{treeDataProvider:l});t.subscriptions.push(u);let f=new b0(o,c,l,a,t,n);t.subscriptions.push(...f.registerCommands()),t.subscriptions.push(jF(t,n.product)(async()=>{o.refresh(void 0),l.refresh(void 0);let m=await Ze(t,r);c&&c.updateDockerParameters(m),f.updateDockerParameters(m)}))}}var _O=class{constructor(e,n,r,o,i){this.context=e;this.resolverResults=n;this.onFirstReveal=r;this.telemetry=o;this.output=i}_onDidChangeTreeData=new Z.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;_onDidChangeActiveContainer=new Z.EventEmitter;onDidChangeActiveContainer=this._onDidChangeActiveContainer.event;dockerParams;refreshDockerParams=!1;needsSSHCredentials=!1;passiveSSHAskpassEnv;eventsProcess;setTreeMessage=()=>{};_currentContainer;currentFolder;devContainers=[];attachContainers=[];otherContainers=[];recentAttachEntries=new Map;recentAttachDevContainerEntries=new Map;recentDevComposeEntries=new Map;containerItems=new Map;action=Promise.resolve();set setMessage(e){this.setTreeMessage=e}get currentContainer(){return this._currentContainer}async getDockerParams(e=!1){if(!this.dockerParams){this.passiveSSHAskpassEnv||(this.passiveSSHAskpassEnv=Kl(this.context.extensionPath,async n=>(this.needsSSHCredentials=!0,vm(n,!1)),this.output));try{this.dockerParams=await Ze(this.context,this.output,void 0,void 0,e?void 0:this.passiveSSHAskpassEnv,!1);let n=qF();await pC(this.dockerParams,this.telemetry,n)!==!0&&(this.dockerParams=void 0)}catch(n){if(!this.needsSSHCredentials)throw n}}return this.dockerParams}handleDockerEvent(e){try{let n=JSON.parse(e.toString());if(!n.Action)return;let r="exec_create: /root/.vscode-server";if(n.Action==="die"||n.Action==="destroy"||n.Action==="create")this._onDidChangeTreeData.fire();else if(!n.Action.startsWith("exec_create")&&n.Actor&&n.Actor.ID&&this.containerItems.has(n.Actor.ID)){let o=this.containerItems.get(n.Actor.ID);this.dockerParams&&o?(async()=>(o.container=await si(this.dockerParams,o.container.Id),this._onDidChangeTreeData.fire(o)))():this._onDidChangeTreeData.fire(o);return}else if(n.Action.startsWith(r)){this._onDidChangeTreeData.fire();return}}catch{}}async tryEnsureDocker(){let e=await this.getDockerParams();if(e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await jx(e,{event:["create","destroy","die","health-status","kill","pause","rename","resize","restart","start","stop","unpause","update","exec_create"]}),this.eventsProcess.stdout.on("data",n=>{this.handleDockerEvent(n)})}catch(n){n.code!=="ENOENT"&&console.log(n),this.dockerParams=void 0}}async getTreeItem(e){return e.asTreeItem(this.dockerParams,this.context,this._currentContainer,this.currentFolder)}needsDockerStartOrInstallContext=void 0;async setDockerStartOrInstallContext(e){(this.needsDockerStartOrInstallContext===void 0||this.needsDockerStartOrInstallContext!==e)&&(this.needsDockerStartOrInstallContext=e,!this.needsDockerStartOrInstallContext&&this.hasContainersContext===!1&&this.setHasContainersContext(!0),await Z.commands.executeCommand("setContext","remote-containers:needsDockerStartOrInstall",!this.needsDockerStartOrInstallContext&&!this.needsSSHCredentials),await Z.commands.executeCommand("setContext","remote-containers:needsSSHCredentials",!this.needsDockerStartOrInstallContext&&this.needsSSHCredentials))}hasContainersContext=void 0;async setHasContainersContext(e){if(this.hasContainersContext===void 0||this.hasContainersContext!==e){this.hasContainersContext=e;let n=Z.workspace.workspaceFolders&&Z.workspace.workspaceFolders.length>0?"remote-containers:noContainersWithFolder":"remote-containers:noContainersWithoutFolder";await Z.commands.executeCommand("setContext",n,!this.hasContainersContext)}}async getDockerOrShowMessage(e){return this.refreshDockerParams&&(this.refreshDockerParams=!1,this.dockerParams=void 0),!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams)?(this.setDockerStartOrInstallContext(!1),this._onDidChangeActiveContainer.fire(void 0),!1):(this.setDockerStartOrInstallContext(!0),!0)}async getChildGroups(e){this.containerItems.clear(),await this.setCurrents(),await this.setContainerTypes(e);let n=[];return(this.devContainers.length>0||this.attachContainers.length>0)&&n.push(new P0(Ae.l10n.t("Dev Containers"),0)),this.otherContainers.length>0&&n.push(new P0(Ae.l10n.t("Other Containers"),2)),n}async getChildDevContainer(e,n){let r=await this.getWorkspaceFolderFromContainer(e),o=r?[new ol(e,r,!0)]:[],i=tu(e);i&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new ol(e,a,!1))):i&&this.recentAttachEntries.has(e.Id)?o.push(...this.recentAttachEntries.get(e.Id).map(a=>new ol(e,a,!1))):(i=vc(e))&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new ol(e,a,!1))):(i=Mk(Ql(e)))&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new ol(e,a,!1))):i===void 0&&this.recentDevComposeEntries.has(e.Id)&&o.push(...this.recentDevComposeEntries.get(e.Id).map(a=>new ol(e,a,!1)));let s=new Eg(e,o,n,!0);return this.setContainerItems(s),s}setContainerItems(e){this.containerItems.set(e.container.Id,e),this._currentContainer&&e.container.Id===this._currentContainer.Id&&this._onDidChangeActiveContainer.fire(e)}async getChildContainers(e){let n;if(e.groupType===0){let r=this.devContainers.map(async o=>this.getChildDevContainer(o,e));r.push(...this.attachContainers.map(async o=>{let i=new Eg(o,this.recentAttachEntries.get(o.Id).map(s=>new ol(o,s,!1)),e);return this.setContainerItems(i),i})),n=await Promise.all(r)}else n=this.otherContainers.map(r=>{let o=new Eg(r,[],e);return this.setContainerItems(o),o});return n.sort((r,o)=>r.getContainerLabel().localeCompare(o.getContainerLabel()))}getChildFolders(e){return e.folders&&e.folders.length>1?e.folders:[]}async getChildItems(e){if(e===void 0){let n=await Jl(this.dockerParams,!0);if(await this.setHasContainersContext(n.length>0),n.length===0)return[];let r=await ws(this.dockerParams,n);return this.getChildGroups(r)}else{if(wr.isGroupItem(e))return this.getChildContainers(e);if(wr.isContainerItem(e))return this.getChildFolders(e)}return[]}async getChildren(e){return await this.action,await this.getDockerOrShowMessage(e)?(this.onFirstReveal&&(this.onFirstReveal(this.dockerParams),this.onFirstReveal=void 0),this.setTreeMessage(void 0),this.getChildItems(e)):[]}async refresh(e){e===void 0&&(this.refreshDockerParams=!0),this._onDidChangeTreeData.fire(e)}async setCurrents(){let e=Z.workspace.workspaceFolders,n;if(this.dockerParams){if(e&&e.length>0){let r=this.resolverResults.get(e[0].uri.authority);r&&r.dockerContainerId&&(n=await ai(this.dockerParams,r.dockerContainerId),this.currentFolder=e[0].uri.path)}else if(this.resolverResults.size>0){let r=[...this.resolverResults.values()][0].dockerContainerId;r&&(n=await ai(this.dockerParams,r))}}n!==this._currentContainer&&(this._currentContainer=n)}addContainerToMap(e){if(tu(e)){this.devContainers.push(e);return}else if(vc(e)){this.devContainers.push(e);return}else if(Ql(e)){this.devContainers.push(e);return}else if(sw(e)&&this.recentDevComposeEntries.has(e.Id)){this.devContainers.push(e);return}else if(this.recentAttachEntries.has(e.Id)){this.attachContainers.push(e);return}this.otherContainers.push(e)}async setContainerTypes(e){return await this.setRecentEntries(e),this.devContainers.length=0,this.attachContainers.length=0,this.otherContainers.length=0,e.forEach(n=>{this.addContainerToMap(n)}),{hasDev:this.devContainers.length>0,hasAttach:this.attachContainers.length>0}}async getWorkspaceFolderFromHostWorkspace(e,n){let{cliHost:r,dockerCLI:o,dockerComposePath:i}=this.dockerParams,s=It(r.path,e),a=n?Ce.from({scheme:Ke.scheme,path:n}):await v3(r,s,rC(),hn),c={cliHost:r,dockerPath:o,dockerComposePath:i,appRoot:Z.env.appRoot,extensionPath:this.context.extensionPath,package:await cr(this.context.extensionPath),output:this.output},l=a&&await ag(c,s.rootFolderPath,a);if(l){let u=dr(this.dockerParams.env);return Z.Uri.parse(pw(r.authority,e,l.workspace.workspaceFolder,u),!0)}}async getWorkspaceFolderFromContainer(e){let n=tu(e);if(n){let r=F3(e);return this.getWorkspaceFolderFromHostWorkspace(n,r)}else{let r=vc(e),o=r_(e),i=U3(e),s=this.dockerParams;if(r){let c=dr(s.env);return Z.Uri.parse(Wi(s.cliHost.authority,r,o,i,!1,c,void 0))}let a=Ql(e);if(a){let c=dr(s.env);return Z.Uri.parse(Wi(s.cliHost.authority,void 0,a.volumeName,a.folder,!1,c,void 0))}}}async getWorkspaceFolderFromHostPath(e){let n=this.dockerParams.cliHost,r=await G3(n,e,this.output),o=z3(n,r,e),i=dr(this.dockerParams.env);return Z.Uri.parse(pw(n.authority,e,o,i),!0)}getWorkspaceFolderFromRepository(e,n,r){let o=this.dockerParams,i=dr(o.env);return Z.Uri.parse(Wi(o.cliHost.authority,e,n,r,!1,i,void 0),!0)}getWorkspaceFolderFromDevContainerInVolume(e,n){let r=this.dockerParams,o=dr(r.env);return Z.Uri.parse(Wi(r.cliHost.authority,void 0,e,n,!1,o,void 0),!0)}async findComposeTargetContainer(e,n){var r;return(r=n.find(o=>tu(o)===e))==null?void 0:r.Id}trySetEntryWithAttachAuthority(e,n,r){let o;if("containerName"in n){let i=r.find(s=>s.Name===n.containerName);i&&(o=i.Id)}else o=n.containerId;o&&(this.recentAttachEntries.has(o)?this.recentAttachEntries.get(o).push(e):this.recentAttachEntries.set(o,[e]))}async trySetEntryWithDevAuthority(e,n,r,o){let i=n.hostPath,s=o[i];if(s||(s=await this.getWorkspaceFolderFromHostPath(n.hostPath),o[i]=s),s.path!==e.path){this.recentAttachDevContainerEntries.has(n.hostPath)?this.recentAttachDevContainerEntries.get(n.hostPath).push(e):this.recentAttachDevContainerEntries.set(n.hostPath,[e]);let a=await this.findComposeTargetContainer(n.hostPath,r);a&&this.recentDevComposeEntries.has(a)?this.recentDevComposeEntries.get(a).push(e):a&&this.recentDevComposeEntries.set(a,[e])}}trySetEntryWithRepoAuthority(e,n){this.getWorkspaceFolderFromRepository(n.repositoryPath,n.volumeName,n.folder).path!==e.path&&(this.recentAttachDevContainerEntries.has(n.repositoryPath)?this.recentAttachDevContainerEntries.get(n.repositoryPath).push(e):this.recentAttachDevContainerEntries.set(n.repositoryPath,[e]))}trySetEntryWithDevContainerInVolumeAuthority(e,n){if(this.getWorkspaceFolderFromDevContainerInVolume(n.volumeName,n.folder).path!==e.path){let o=Mk(n);this.recentAttachDevContainerEntries.has(o)?this.recentAttachDevContainerEntries.get(o).push(e):this.recentAttachDevContainerEntries.set(o,[e])}}trySetEntryWithVolumeAuthority(e,n){let r=n.volumeName;r&&(this.recentAttachEntries.has(r)?this.recentAttachEntries.get(r).push(e):this.recentAttachEntries.set(r,[e]))}async trySetEntry(e,n,r){if(!e||!e.folderUri&&!e.workspace.configPath)return;let o=e.folderUri??e.workspace.configPath,i=nd(o.authority);if(i)this.trySetEntryWithAttachAuthority(o,i,n);else{let s=uo(o.authority);s&&(un(s)?await this.trySetEntryWithDevAuthority(o,s,n,r):lo(s)?this.trySetEntryWithRepoAuthority(o,s):ed(s)?this.trySetEntryWithDevContainerInVolumeAuthority(o,s):this.trySetEntryWithVolumeAuthority(o,s))}}async setRecentEntries(e){this.recentAttachEntries.clear(),this.recentAttachDevContainerEntries.clear(),this.recentDevComposeEntries.clear();let n=await Z.commands.executeCommand("_workbench.getRecentlyOpened");if(n&&n.workspaces){let r={};for(let o of n.workspaces)await this.trySetEntry(o,e,r)}}withProgress(e,n){return this.action=this.action.then(()=>n()),this.refresh(e)}};var il=class{constructor(e){this.label=e}detail;context;command;type="Default";static isDetailItem(e){return!!e&&e.label!==void 0&&e.type!==void 0}static isImageItem(e){return!!e&&e.type==="Image"}static isVolume(e){return!!e&&e.type==="Volume"}static isDevVolume(e){return!!e&&e.type==="DevVolume"}},DO=class{constructor(e){this.detail=e}type="Image";context="image";label=Ae.l10n.t("Image");inspect(e){return s3(e,this.detail)}},IO=class{constructor(e,n,r){this.label=e;this.detail=n;this.volumeDetails=r}type="Volume";context="volume";async inspect(e){return Bx(e,this.volumeDetails)}},PO=class{constructor(e,n,r,o){this.context=e;this.dockerParams=n;this.telemetry=r;this.output=o}_onDidChangeTreeData=new Z.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;_container;setTreeTitle=()=>{};updateDockerParameters(e){this.dockerParams=e}set setTitle(e){this.setTreeTitle=e}get container(){return this._container?this._container.container:void 0}getTreeItem(e){let n=new Z.TreeItem(e.label,Array.isArray(e.detail)&&e.detail.length>0?Z.TreeItemCollapsibleState.Expanded:Z.TreeItemCollapsibleState.None);return n.tooltip=e.label,e.detail&&!Array.isArray(e.detail)&&(n.description=e.detail,n.tooltip+=` ${n.description}`),n.contextValue=e.context,n.command=e.command,n}async getAttributes(e,n,r){let o=[];n&&o.push({label:Ae.l10n.t("Workspace"),detail:n});let i=vc(e.container);i&&o.push({label:Ae.l10n.t("Repository"),detail:i});let s=Ql(e.container);return s&&(o.push({label:Ae.l10n.t("Volume"),detail:s.volumeName}),o.push({label:Ae.l10n.t("Folder"),detail:s.folder})),o.push({label:Ae.l10n.t("Name"),detail:e.container.Name}),o.push(new DO(e.container.Config.Image)),r&&o.push({label:Ae.l10n.t("Configuration"),detail:r,command:{title:Ae.l10n.t("Open Dev Container File"),command:"remote-containers.openDevContainerFile",arguments:[r]},context:"devContainer"}),o}async getMounts(e){let n=[];return e&&e.Mounts.forEach(r=>{if(r.Type==="volume"){let o=r.Name,i=new IO(Ae.l10n.t("Volume"),o,o),s={label:Ae.l10n.t("Destination"),detail:r.Destination};n.push({label:Ae.l10n.t("Volume mount"),detail:[i,s]})}else if(r.Type==="bind"){let o={label:Ae.l10n.t("Source"),detail:r.Source},i={label:Ae.l10n.t("Destination"),detail:r.Destination},s=this.dockerParams&&["win32","darwin"].includes(this.dockerParams.cliHost.platform)?[{label:Ae.l10n.t("I/O performance"),detail:Ae.l10n.t("reduced by bridging OSes"),context:"mountPerformanceInfo",command:{command:"remote-containers.openInformationAboutMountPerformance"}}]:[];n.push({label:Ae.l10n.t("Bind mount"),detail:[o,i,...s]})}}),n}async getChildrenFromRoot(e){let n=[],r=tu(e.container),o=(e.container.Config.Labels||{})[Zf];n.push({label:Ae.l10n.t("Attributes"),detail:await this.getAttributes(e,r,o),type:"Title"});let i;this.dockerParams&&(i=await si(this.dockerParams,e.container.Id));let s=await this.getMounts(i);return s.length>0&&n.push({label:Ae.l10n.t("Mounts"),detail:s,type:"Title"}),n}async testContainer(){let e=!0;try{(this.dockerParams?await si(this.dockerParams,this._container.container.Id):void 0)===void 0&&(e=!1)}catch{e=!1}return e||(this._container=void 0,this.setTreeTitle(Ae.l10n.t("Details (Containers)"))),e}async getChildren(e){if(this._container===void 0)return[];let n=[];return e===void 0?await this.testContainer()&&(this.setTreeTitle(this._container.getContainerLabel()),n=await this.getChildrenFromRoot(this._container)):Array.isArray(e.detail)&&n.push(...e.detail),n}async refresh(e){this.dockerParams=await Ze(this.context,this.output),await pC(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0,this._container=void 0),this._container=e||this._container,this._onDidChangeTreeData.fire(void 0)}},bO=class extends il{type="DevVolume";volumeDetails;createdAt;constructor(e){super(e.Name),this.volumeDetails=e,this.createdAt=void 0}async asTreeItem(){let e=this.getLabel(),n=new Z.TreeItem(e,Z.TreeItemCollapsibleState.None);return n.iconPath=this.iconPath,n.description=this.getDescription(),this.isUniqueVolume()?n.contextValue="uniqueDevVolume":n.contextValue="devVolume",n}isUniqueVolume(){return yg(this.volumeDetails)}getLabel(){return _0(this.volumeDetails)}getDescription(){return D0(this.volumeDetails)}getBranchName(){return CO(this.volumeDetails)}getPullRequestId(){return EO(this.volumeDetails)}getRepository(){return I0(this.volumeDetails)}get iconPath(){return new Z.ThemeIcon("file-symlink-directory")}getTimeElapsed(){if(this.createdAt)return this.createdAt;let e="";if(new Date(this.volumeDetails.CreatedAt).getFullYear()>1){let r=new Date,o=new Date(this.volumeDetails.CreatedAt);e=Ae.l10n.t("{0} ago",SO(r,o))}return this.createdAt=e,e}async inspect(e){return Bx(e,this.volumeDetails.Name)}async inspectInBasicDevContainer(){await Z.commands.executeCommand("remote-containers.inspectVolume",this.volumeDetails.Name)}async cloneRepositoryInVolume(){await Z.commands.executeCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",this.volumeDetails.Name)}async removeVolume(e){if(!((await Xl(e)).indexOf(this.volumeDetails.Name)>=0)){await Z.window.showInformationMessage(Ae.l10n.t("Volume '{0}' is in use and cannot be removed.",this.volumeDetails.Name),{modal:!0});return}let o=Ae.l10n.t("Remove");await Z.window.showInformationMessage(Ae.l10n.t("Are you sure you want to remove volume '{0}'?",this.volumeDetails.Name),{modal:!0},o)===o&&await zF(e,this.volumeDetails.Name)}},TO=class{constructor(e,n,r){this.context=e;this.telemetry=n;this.output=r}dockerParams;_onDidChangeTreeData=new Z.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;eventsProcess;async getTreeItem(e){return e.asTreeItem()}async getDockerParams(){if(!this.dockerParams){this.dockerParams=await Ze(this.context,this.output,void 0,void 0);let e=qF();await pC(this.dockerParams,this.telemetry,e)!==!0&&(this.dockerParams=void 0)}return this.dockerParams}async setHasVolumesContext(e){await Z.commands.executeCommand("setContext","remote-containers:noDevVolumes",e)}async getDockerOrShowMessage(e){return!(!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams))}async getChildren(e){if(!await this.getDockerOrShowMessage(e))return[];let n=await Ze(this.context,this.output),r=await Uo(n),o=await Jf(n,r),i=a=>!(a.Name==="vscode"||a.Name.length===64&&/^[0-9a-fA-F]+$/.test(a.Name)),s=o.filter(i);return await this.setHasVolumesContext(s.length===0),s.sort((a,c)=>{let l=new Date(a.CreatedAt);return new Date(c.CreatedAt).getTime()-l.getTime()}),s.map(a=>new bO(a))}async resolveTreeItem(e,n){let r=await Ze(this.context,this.output),o=await this.getAssociatedContainers(r,n),i=n.getLabel(),s=n.getRepository(),a=n.getBranchName(),c=n.getPullRequestId(),l=n.getTimeElapsed();return o.length>0?e.tooltip=this.renderMarkdown(i,s,a,c,l,o.join(", ")):e.tooltip=this.renderMarkdown(i,s,a,c,l,Ae.l10n.t("None")),e}async getAssociatedContainers(e,n){let r=[],o=await Jl(e,!0),i=await ws(e,o);for(let s of i)for(let a of s.Mounts)a.Type==="volume"&&a.Name===n.volumeDetails.Name&&r.push(yc(s));return r}renderMarkdown(e,n,r,o,i,s){let a=new Z.MarkdownString(void 0,!0);if(n){let c=n.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)",l=n.gitUrlInfo.repositoryUrl;l.startsWith("http")?(l=n.gitUrlInfo.repositoryUrl.replace(".git",""),a.appendMarkdown(`${c} [${l}](${l})
`)):a.appendMarkdown(`${c} ${l})
`),a.appendMarkdown(`&nbsp;  
`),r&&(n.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-compare) [${r}](${l}/tree/${r})
`):a.appendMarkdown(`$(git-compare) ${r}
`),a.appendMarkdown(`&nbsp;  
`)),o&&(n.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-pull-request-create) [#${o}](${l}/pull/${o})
`):a.appendMarkdown(`$(git-pull-request-create) #${o}
`),a.appendMarkdown(`&nbsp;  
`)),a.appendMarkdown(`$(history) ${i}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`)}else a.appendMarkdown(`$(file-symlink-directory) ${e}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(history) ${i}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`);return a}handleDockerEvent(e){try{let n=JSON.parse(e.toString());if(!n.Action)return;(n.Action==="die"||n.Action==="destroy"||n.Action==="create"||n.Action==="prune")&&this._onDidChangeTreeData.fire()}catch{}}async tryEnsureDocker(){let e=await this.getDockerParams();if(e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await jx(e,{event:["destroy","die","kill","create","rename","resize","restart","start","stop","unpause","prune"]}),this.eventsProcess.stdout.on("data",n=>{this.handleDockerEvent(n)})}catch(n){n.code!=="ENOENT"&&console.log(n),this.dockerParams=void 0}}async refresh(e){e===void 0&&(this.dockerParams=void 0),this._onDidChangeTreeData.fire(e)}},Cge="vm-active",Ege="vm-default",Sge="folder-active",xge="folder";function T0(t,e){let n=`${e}.svg`;return{light:Z.Uri.file(t.asAbsolutePath(Cg.join("resources","light",n))),dark:Z.Uri.file(t.asAbsolutePath(Cg.join("resources","dark",n))),highContrast:Z.Uri.file(t.asAbsolutePath(Cg.join("resources","highContrast",n)))}}var HO=require("util");var er=Y(require("vscode")),Va=require("vscode");async function R0(t,e,n,r={},o={}){let i=await Dx({params:t,createdAt:void 0,startedAt:void 0,sharedDataFolderIsLocalCacheFolder:!1,sharedDataFolder:void 0,remoteWorkspaceFolder:"/",containerUser:void 0,containerGroup:void 0,containerEnv:void 0,remoteExec:e,remotePtyExec:n,remoteExecAsRoot:void 0,rootShellServer:void 0,remoteWaylandSocket:void 0}),{hostOrContainerPort:s,connectionToken:a,remoteEnv:c,serverDownloaded:l}=await Vl(t,i,r,o);return{params:t,properties:i,config:void 0,resolvedAuthority:{host:hc,port:s,connectionToken:a,extensionHostEnv:c},tunnelInformation:{},dockerParams:void 0,dockerContainerId:void 0,serverDownloaded:l}}async function RO(t,e,n){var r,o;try{if(!await $s(t))return;let{cliHost:i,env:s,output:a}=e,c;if(!(n!=null&&n.name)){let p=(await X({exec:i.exec,cmd:"kubectl",args:["get","pods","-o","json"],env:s,output:a})).stdout.toString(),g=JSON.parse(p).items;if(!g.length){await er.window.showInformationMessage(Va.l10n.t("No pods found."),{modal:!0},Va.l10n.t("Show Log"))&&er.commands.executeCommand(it);return}if(c=(r=await er.window.showQuickPick(g.map(h=>({label:h.metadata.name,description:h.metadata.namespace,pod:h})),{placeHolder:Va.l10n.t("Select pod")}))==null?void 0:r.pod,!c)return}if(!c){let d=["get","pod",n.name,"-o","json"];n.namespace&&d.push("--namespace",n.namespace);let g=(await X({exec:i.exec,cmd:"kubectl",args:d,env:s,output:a})).stdout.toString();c=JSON.parse(g)}let l=c.spec.containers||[];if(!l.length){await er.window.showInformationMessage(Va.l10n.t("No containers found."),{modal:!0},Va.l10n.t("Show Log"))&&er.commands.executeCommand(it);return}let u=l.length>1?(o=await er.window.showQuickPick(l.map(d=>({label:d.name,description:d.image,container:d})),{placeHolder:Va.l10n.t("Select container")}))==null?void 0:o.container:l[0];if(!u)return;let f=(await X({exec:i.exec,cmd:"kubectl",args:["config","current-context"],env:s,output:a})).stdout.toString().trim(),m={remoteAuthority:Pge(er.env.remoteAuthority,{context:f,podname:c.metadata.name,namespace:c.metadata.namespace,name:u.name,image:u.image})};t.extensionMode===er.ExtensionMode.Development&&(m.reuseWindow=!0),await er.commands.executeCommand("vscode.newWindow",m)}catch(i){e.output.write((i==null?void 0:i.stack)||(i==null?void 0:i.message)||String(i)),er.commands.executeCommand(it),await er.window.showErrorMessage(Va.l10n.t("Error while attaching to Kubernetes container."),{detail:i==null?void 0:i.message,modal:!0})}}async function a9(t,e,n,r,o,i){return await $s(t)?{...await _ge(t,e,n,r,o,i),isTrusted:!0}:(await er.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function _ge(t,e,n,r,o,i){let s;return er.window.withProgress({location:er.ProgressLocation.Notification,title:Zu,cancellable:!1},async a=>{try{let c=bge(n);if(!c)throw new Error(`Invalid authority: ${n}`);let{options:l,parentAuthority:u}=c;if(u&&!r.execServer)throw new Error(`Parent authority found without ExecServer: ${n}`);let f=process.cwd(),m=ts(),d=await Xr(r.execServer?{server:r.execServer,authority:u}:void 0,void 0,f,hn,m,t.extensionPath,await _r(),e.product,o.log,Si);s=await Xu({authority:n,extensionContext:t,sessionStart:o.sessionStart,progress:a,cliHost:d,env:d.env,cwd:f,wslSettings:m,isLocalContainer:ru(u,{}),telemetry:e,onDidInput:o.onDidInput,output:o.log,logFilePath:o.logFilePath,allowSystemConfigChange:!1,postCreate:i}),s.setWorkspaceName(`${l.name} in ${l.podname} (${l.image})`);let p=Dge(d.exec,l),g=Ige(d.ptyExec,l);return await R0(s,p,g)}catch(c){let l=c instanceof pe?c:new pe({description:Va.l10n.t("An error occurred attaching to the container."),originalError:c});throw l.actions=[...tf,rl,Ma,ef,nl],l}}).then(a=>(ns(e,"k8s-container","success",o.sessionStart,s,void 0,void 0,a.properties),a),a=>{let c=a instanceof pe?a:new pe({description:Va.l10n.t("An error occurred attaching to the container."),originalError:a});return ns(e,"k8s-container","failure",o.sessionStart,s,void 0,void 0,c.containerProperties,c),$a(c,"k8s-container",e,!0,o.log)})}function Dge(t,e){return async function(n){return t(c9(e,n))}}function Ige(t,e){return async function(n){return t(c9(e,n))}}function c9(t,e){let n=["exec","-it",t.podname];if(t.context&&n.push("--context",t.context),t.namespace&&n.push("--namespace",t.namespace),n.push("--container",t.name,"--"),e.cwd&&n.push("/bin/sh","-c",'cd "$1" && shift && "$@"',"--",e.cwd),e.env){let r=Object.keys(e.env);if(r.length){n.push("env");for(let o of r)n.push(`${o}=${e.env[o]}`)}}return n.push(e.cmd),e.args&&n.push(...e.args),{cmd:"kubectl",args:n,output:e.output}}function Pge(t,e){return t=rd(t),`k8s-container+${Buffer.from(JSON.stringify(e),"utf8").toString("hex")}${t?`@${t}`:""}`}function bge(t){let e=ou(t);if((e==null?void 0:e.name)!=="k8s-container")return;try{return{parentAuthority:e.parentAuthority,options:JSON.parse(Buffer.from(e.config,"hex").toString("utf8"))}}catch{}let n=e.config.split("+").reduce((r,o)=>{let i=o.indexOf("=");return i!==-1&&(r[o.substring(0,i)]=decodeURIComponent(o.substring(i+1))),r},{});return{parentAuthority:e.parentAuthority,options:n}}var Bn=Y(require("vscode")),Hs=require("vscode");async function l9(t,e){var n;try{if(!await $s(t))return;let{cliHost:r,env:o,output:i}=e;if(process.platform!=="darwin"){await Bn.window.showErrorMessage(Hs.l10n.t("Apple Containerization is only available on macOS."),{modal:!0})&&Bn.commands.executeCommand(it);return}let s;try{await X({exec:r.exec,cmd:"which",args:["container"],env:o,output:i})}catch{await Bn.window.showErrorMessage(Hs.l10n.t("Apple Container command not found."),{modal:!0,detail:Hs.l10n.t("Please ensure that the Apple Container CLI is installed and available in your PATH.")},Hs.l10n.t("Show Log"))&&Bn.commands.executeCommand(it);return}let c=(await X({exec:r.exec,cmd:"container",args:["list","--format","json"],env:o,output:i})).stdout.toString(),l;try{l=JSON.parse(c),Array.isArray(l)||(l=[l])}catch(f){throw i.write(`Failed to parse container list JSON: ${f}`),new Error(`Failed to parse container list: ${f}`)}if(!l.length){await Bn.window.showInformationMessage(Hs.l10n.t("No Apple containers found."),{modal:!0},Hs.l10n.t("Show Log"))&&Bn.commands.executeCommand(it);return}if(s=(n=await Bn.window.showQuickPick(l.map(f=>({label:f.configuration.id,description:`(${f.status})`,container:f})),{placeHolder:Hs.l10n.t("Select Apple container")}))==null?void 0:n.container,!s)return;let u={remoteAuthority:Nge(Bn.env.remoteAuthority,{id:s.configuration.id,image:s.configuration.image.reference})};t.extensionMode===Bn.ExtensionMode.Development&&(u.reuseWindow=!0),await Bn.commands.executeCommand("vscode.newWindow",u)}catch(r){e.output.write((r==null?void 0:r.stack)||(r==null?void 0:r.message)||String(r)),Bn.commands.executeCommand(it),await Bn.window.showErrorMessage(Hs.l10n.t("Error while attaching to Apple container."),{detail:r==null?void 0:r.message,modal:!0})}}async function u9(t,e,n,r,o,i){return await $s(t)?{...await Tge(t,e,n,r,o,i),isTrusted:!0}:(await Bn.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function Tge(t,e,n,r,o,i){let s;return Bn.window.withProgress({location:Bn.ProgressLocation.Notification,title:Zu,cancellable:!1},async c=>{try{let l=Lge(n);if(!l)throw new Error(`Invalid authority: ${n}`);let{options:u,parentAuthority:f}=l;if(f&&!r.execServer)throw new Error(`Parent authority found without ExecServer: ${n}`);let m=process.cwd(),d=ts(),p=await Xr(r.execServer?{server:r.execServer,authority:f}:void 0,void 0,m,hn,d,t.extensionPath,await _r(),e.product,o.log,Si);s=await Xu({authority:n,extensionContext:t,sessionStart:o.sessionStart,progress:c,cliHost:p,env:p.env,cwd:m,wslSettings:d,isLocalContainer:ru(f,{}),telemetry:e,onDidInput:o.onDidInput,output:o.log,logFilePath:o.logFilePath,allowSystemConfigChange:!1,postCreate:i}),s.setWorkspaceName(`${u.id} (${u.image})`);let g=Rge(p.exec,u),h=kge(p.ptyExec,u);return await R0(s,g,h)}catch(l){let u=l instanceof pe?l:new pe({description:Hs.l10n.t("An error occurred attaching to the Apple container."),originalError:l});throw u.actions=[...tf,rl,Ma,ef,nl],u}}).then(c=>(ns(e,"apple-container","success",o.sessionStart,s,void 0,void 0,c.properties),c),c=>{let l=c instanceof pe?c:new pe({description:Hs.l10n.t("An error occurred attaching to the Apple container."),originalError:c});return ns(e,"apple-container","failure",o.sessionStart,s,void 0,void 0,l.containerProperties,l),$a(l,"apple-container",e,!0,o.log)})}function Rge(t,e){return async function(n){return t(f9(e,n))}}function kge(t,e){return async function(n){return t(f9(e,n))}}function f9(t,e){let n=["exec","-i"];if(e.env){let r=Object.keys(e.env);if(r.length)for(let o of r)n.push("--env",`${o}=${e.env[o]}`)}return e.cwd&&n.push("-w",e.cwd),n.push(t.id),n.push(e.cmd),e.args&&n.push(...e.args),{cmd:"container",args:n,output:e.output}}function Nge(t,e){return t=rd(t),`apple-container+${Buffer.from(JSON.stringify(e),"utf8").toString("hex")}${t?`@${t}`:""}`}function Lge(t){let e=ou(t);if((e==null?void 0:e.name)==="apple-container")try{return{parentAuthority:e.parentAuthority,options:JSON.parse(Buffer.from(e.config,"hex").toString("utf8"))}}catch{return}}var _t=Y(require("vscode")),At=require("vscode"),xm=Y(require("fs")),Sg=Y(require("os")),Sm=Y(require("path")),k0=require("child_process"),xg=require("util");function N0(t){switch(t.quality){case"stable":return"";case"insider":return"-insiders";default:return`-${t.quality}`}}async function d9(t,e){let n=t.globalStorageUri,r=Lo.joinPath(n,"cli-bin");await _t.workspace.fs.createDirectory(r);let o="";try{o=(await _t.workspace.fs.readFile(Lo.joinPath(r,"vscode-path"))).toString()}catch(u){if((u==null?void 0:u.code)!=="FileNotFound")throw u}o!==process.execPath&&(await _t.workspace.fs.writeFile(Lo.joinPath(r,"vscode-app-root"),Buffer.from(_t.env.appRoot,"utf-8")),await _t.workspace.fs.writeFile(Lo.joinPath(r,"vscode-quality"),Buffer.from(e.quality??"","utf-8")),await _t.workspace.fs.writeFile(Lo.joinPath(r,"vscode-machine-id"),Buffer.from(_t.env.machineId,"utf-8")),await _t.workspace.fs.writeFile(Lo.joinPath(r,"vscode-path"),Buffer.from(process.execPath,"utf-8")));let i="";try{i=(await _t.workspace.fs.readFile(Lo.joinPath(r,"remote-containers-path"))).toString()}catch(u){if((u==null?void 0:u.code)!=="FileNotFound")throw u}if(i===t.extensionPath)return;let s=Lo.joinPath(t.extensionUri,"dev-containers-user-cli","bin"),a=N0(e),c=`devcontainer${a}`,l=[{source:"devcontainer",destination:c},{source:"devcontainer.cmd",destination:`devcontainer${a}.cmd`}];for(let u of l)await _t.workspace.fs.copy(Lo.joinPath(s,u.source),Lo.joinPath(r,u.destination),{overwrite:!0});process.platform!=="win32"&&await xm.promises.chmod(Lo.joinPath(r,c).fsPath,493),await _t.workspace.fs.writeFile(Lo.joinPath(r,"remote-containers-path"),Buffer.from(t.extensionPath,"utf-8"))}async function Age(t,e){let n=N0(e),r="";try{let o=await ni("powershell.exe");if(r=(await(0,xg.promisify)(k0.exec)(`"${o}" -NoProfile -NonInteractive -Command "[System.Environment]::GetEnvironmentVariable('PATH', 'User')"`,{env:ao(process.env)})).stdout.toString().trim(),r.indexOf(t)>=0)return await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI is already in your PATH"),{modal:!0,detail:At.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${n}`)}),!0;let s=At.l10n.t("Add"),a=At.l10n.t("Copy CLI Path");switch(await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI needs to be added to your PATH"),{modal:!0},s,a)){case s:let l=(0,xg.promisify)(k0.exec)(`"${o}"  -NoProfile -NonInteractive -Command "[System.Environment]::SetEnvironmentVariable('PATH', '${r};${t}', 'User')`,{env:ao(process.env)}),u=_t.window.showInformationMessage(At.l10n.t("The devcontainer CLI has been added to your PATH"),{modal:!0,detail:At.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${n}`)});await Promise.all([l,u]);break;case a:await _t.env.clipboard.writeText(t),await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI path has been copied to the clipboard"),{modal:!0,detail:At.l10n.t(`After adding to your PATH, try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${n}`)});break}return!0}catch{return!1}}async function Fge(t,e){let r=(process.env.PATH??"").split(":"),o=[Sm.join(Sg.homedir(),"bin"),Sm.join(Sg.homedir(),".local/bin")],i="/usr/local/bin";Sg.platform()==="darwin"&&o.push(i);let s=(0,xg.promisify)(xm.stat);for(let a of o){if(r.findIndex(p=>p===a)<0)continue;try{await s(a)}catch{continue}let c=N0(e),l=Sm.join(a,`devcontainer${c}`);try{let p=await s(l);return console.log(p),await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI is already symlinked in {0}",a),{modal:!0,detail:At.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${c}`)}),!0}catch(p){if((p==null?void 0:p.code)!=="ENOENT")return!1}let u=At.l10n.t("Create"),f=At.l10n.t("Copy CLI Path"),m=await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI needs to be in your PATH"),{detail:At.l10n.t("Create a symlink in {0}?",a),modal:!0},u,f),d=Sm.join(t,`devcontainer${c}`);switch(m){case u:if(a===i){if(!await Oge(d,l))break}else await(0,xg.promisify)(xm.symlink)(d,l);await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI has been symlinked in {0}",a),{modal:!0,detail:At.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${c}`)});break;case f:await _t.env.clipboard.writeText(t),await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI path has been copied to the clipboard"),{modal:!0,detail:At.l10n.t(`After adding to your PATH, try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${c}`)});break}return!0}return!1}async function Oge(t,e){try{return await xm.promises.symlink(t,e),!0}catch(n){if(n.code!=="EACCES"&&n.code!=="ENOENT")throw n;let r=At.l10n.t("OK");if(await _t.window.showInformationMessage(At.l10n.t("This will now prompt with 'osascript' for Administrator privileges to install the shell command."),{modal:!0},r)===r){let s=`"${await ni("osascript")}" -e "do shell script \\"mkdir -p ${Sm.dirname(e)} && ln -sf '${t}' '${e}'\\" with administrator privileges"`;return await(0,xg.promisify)(k0.exec)(s),!0}return!1}}async function m9(t,e){let n=t.globalStorageUri,r=Lo.joinPath(n,"cli-bin").fsPath;switch(Sg.platform()){case"win32":if(await Age(r,e))return;break;case"darwin":case"linux":if(await Fge(r,e))return;break}let o=At.l10n.t("Copy CLI Path");if(await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI needs to be included your PATH"),{modal:!0},o)===o){await _t.env.clipboard.writeText(r);let s=N0(e);await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI path has been copied to the clipboard"),{modal:!0,detail:At.l10n.t(`After adding to your PATH, try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${s}`)})}}var So=Y(require("vscode")),Fr=require("vscode"),kO=Y(require("path"));var Uge=Fr.l10n.t("Select Dev Container Configuration"),Mge=Fr.l10n.t('[Creating Dev Container (show log)](command:remote-containers.revealLogTerminal "Show details in terminal")'),p9="alpine:3.16.3";async function h9(t,e,n){let r=await $ge(t,e,n);if(!r)return;let{volumeAndFolderName:o}=r,i=dr(e.env),s=So.Uri.parse(Wi(e.cliHost.authority,void 0,o,o,!1,i,void 0));await Qu({uri:s,type:"folder",label:Fr.l10n.t("{0} [Dev Container]",o)}),await So.commands.executeCommand("vscode.openFolder",s)}async function $ge(t,e,n){let{output:r}=e,o=et(e,"pull",p9),i=await iO({telemetry:n,output:r,openConfigurationCommandId:gm,showLogCommandId:it},Uge,!0);i.askForTrust=!0;let s=await Uo(e),a=async()=>{i.skipOptions=!0;let f=await a0(i,void 0,void 0,Promise.resolve(void 0));if(f==="back"||!f)return;let m=f.metadata.template;if(ZF.indexOf(m.owner)===-1){let d=`@${m.owner}`,p={label:Fr.l10n.t("Trust {0}",d),description:Fr.l10n.t("from GitHub"),buttons:[{iconPath:new So.ThemeIcon("info"),tooltip:Fr.l10n.t("Open Documentation")}]},g={label:Fr.l10n.t("Back")},h={label:Fr.l10n.t("Cancel")},v=i.quickPick.onDidTriggerItemButton(()=>{So.env.openExternal(So.Uri.parse(m.documentationURL))}),C=await Eo(i.quickPick,[p,g,h],Fr.l10n.t("The {0} is from the {1} GitHub owner/organization.",m.name,d),void 0,void 0,!0);if(v.dispose(),!C||C===h)return;if(C==="back"||C===g)return a()}return g9(i,f,s,Hge(f.id,s),a)},c=await a();if(!c){i.quickPick.dispose();return}let{selectedTemplate:l,volumeName:u}=c;return So.window.withProgress({location:So.ProgressLocation.Notification,title:Mge,cancellable:!1},async()=>{let f;try{await Fp(e,u,[`${n_}=true`]),await o;let{stdout:m}=await et(e,...Bge(u,Qf()));f=m.toString().trim();let d=kO.posix.join(Qf(),u),p=ys(e,f,"root"),g=await na(e,f,"root",hn),h=so("container",d,{},p,g,()=>{throw new Error("not implemented")},"node",r);await h.mkdirp(d);let v=It(kO.posix,d),C=await rO(i,h,v.configFolderPath,"workspace",l);return i.quickPick.hide(),C?{volumeAndFolderName:u}:void 0}finally{if(f)try{await Hi(e,f)}catch{}}})}function Hge(t,e){let n,r=(/([^/:]+)(:[^/:]+)?$/.exec(t)||[])[1]||"devcontainer",o=0;do n=`${r}${o++?`-${o}`:""}`;while(e.indexOf(n)!==-1);return n}async function g9(t,e,n,r,o){let{quickPick:i}=t;i.placeholder=Fr.l10n.t("Dev container name"),i.selectedItems=[],i.value=r,i.buttons=[So.QuickInputButtons.Back];let s={label:Fr.l10n.t("Additional Options..."),alwaysShow:!0},a=!1;function c(){a=!1,i.items=[{label:Fr.l10n.t("Create Dev Container"),description:i.value,alwaysShow:!0},s]}function l(d){a=!0,i.items=[{label:d,alwaysShow:!0}]}c();let u=[],f=await new Promise(d=>{u=[i.onDidAccept(()=>{i.value?a||d({volumeName:i.value,options:i.selectedItems[0]===s}):l(Fr.l10n.t("The name cannot be empty."))}),i.onDidHide(()=>d(void 0)),i.onDidChangeValue(p=>{n.indexOf(p)!==-1?l(Fr.l10n.t("A Docker volume with this name already exists.")):p&&!/^[a-zA-Z0-9]/.test(p)?l(Fr.l10n.t("Only alphanumeric characters are allowed as the first character.")):p&&!/^[a-zA-Z0-9][a-zA-Z0-9_.-]*$/.test(p)?l(Fr.l10n.t("Only alphanumeric characters, periods, underscores and hyphens are allowed.")):c()}),i.onDidTriggerButton(()=>d("back"))]});if(u.forEach(d=>d.dispose()),!f)return;if(f==="back")return o();let{volumeName:m}=f;if(f.options){let p=await(async()=>{t.skipOptions=!1;let g=await ym(t,e.metadata.template,Promise.resolve(void 0),async()=>{let h=await g9(t,e,n,m,o);if(h)return m=h.volumeName,h.selectedTemplate});if(!(g==="back"||!g))return g})();if(!p)return;e=p}return i.busy=!0,i.enabled=!1,{volumeName:m,selectedTemplate:e}}function Bge(t,e){return["run","-d","--mount",`type=volume,src=${t},dst=${e}`,p9,"sleep","infinity"]}var L0=Y(require("crypto")),w9=require("path"),y9=Y(require("vscode")),NO=typeof __non_webpack_require__<"u"?__non_webpack_require__:require,Wge=["You may install and use any number of copies of the software only with Microsoft Visual Studio,","Visual Studio for Mac, Visual Studio Code, Azure DevOps, Team Foundation Server, and successor Microsoft products","and services (collectively, the \u201CVisual Studio Products and Services\u201D) to develop and test your applications.","The software is licensed, not sold. This agreement only gives you some rights to use the software. Microsoft reserves all other rights.","You may not:","work around any technical limitations in the software that only allow you to use it in certain ways;","reverse engineer, decompile or disassemble the software, or otherwise attempt to derive the source code for the software,","except and to the extent required by third party licensing terms governing use of certain open source components that may be included in the software;","remove, minimize, block, or modify any notices of Microsoft or its suppliers in the software;","use the software in any way that is against the law or to create or propagate malware; or","share, publish, distribute, or lease the software (except for any distributable code, subject to the terms above),","provide the software as a stand-alone offering for others to use, or transfer the software or this agreement to any third party."].join(" "),jge="aes-192-cbc",C9="SEE  LICENSE.txt",Vge=L0.scryptSync(Wge,C9,24),Yge=Buffer.from(C9);var E9={DevContainersOnlyLicensedForMicrosoftVSCode(){var t;return v9(((t=NO.main)==null?void 0:t.paths.map(e=>e+wC("f70715b752c50649525efc24a1d133eb")))??[])||v9([w9.posix.join(y9.env.appRoot,wC("9e4708daf438152c7e63cf9f3b24d92c"))])}};function v9(t){try{let e=NO.resolve(wC("bdf000de72c4f5f5d7cff4fa6dd90b95"),{paths:t}),n=NO(e);return!(!n[wC("0fd50b75eeecb3b44b3932921442f72c")]||!n[wC("80c3ae7905cba507debf9b326fc386ab")])}catch{return!1}}function wC(t){let e=L0.createDecipheriv(jge,Vge,Yge),n=e.update(t,"hex","utf8");return n+=e.final("utf8"),n}O.l10n.bundle&&I9.config({contents:O.l10n.bundle});var FO=class{constructor(e,n,r){this.context=e;this.output=n;this.telemetry=r}handleUri(e){switch(e.path){case"/cloneInVolume":this.cloneInVolume(e)}}async cloneInVolume(e){let n=b9.parse(e.query);if(!n.url){O.window.showErrorMessage(re.l10n.t("Failed to handle the URI '{0}' expected a 'url' query parameter.",e.toString()),{modal:!0});return}let r;if(Array.isArray(n.url)?r=n.url[0]:r=n.url,!await no(this.context,this.output.log,this.output.onDidInput,this.telemetry,"cloneInVolume"))return;let o=await Ze(this.context,this.output.log);if(await fR(o.cliHost,r,o.cliHost.type==="local"?await KI(this.output.log):{},this.output.log)===!1){O.commands.executeCommand(it),await O.window.showErrorMessage(re.l10n.t("Cannot access the repository '{0}'.",r),{modal:!0});return}await O.commands.executeCommand(zI,n.url)}};async function Gge(t){var k;k5();let e=new Date;R5(t);let n,r=new Promise(E=>n=E);F5(r);let o=await cr(t.extensionPath),i=await Rv(O.env.appRoot);N5(t,i);let s=T5(t,o,i),a=await A5(o,i),c=new Qy(t.logPath,e,a);if(t.subscriptions.push(O.commands.registerCommand(it,()=>c.show())),!E9.DevContainersOnlyLicensedForMicrosoftVSCode()){c.log.write("The Dev Containers extension is supported only in Microsoft versions of VS Code");return}let{channel:l,postCreate:u}=b5(c.log,e);t.subscriptions.push(O.commands.registerCommand(WF,()=>l.show()));let f,m=new Promise(E=>f=E);t.subscriptions.push(O.workspace.registerRemoteAuthorityResolver("dev-container",{resolve:eC(c,u,Qn.results,n,f,async(E,x,b,I)=>g8(t,s,E,x,Qn.onRemoveOnShutdownChanged,b,I)),async getCanonicalURI(E){let x=uo(E.authority);if(x&&un(x)){let{hostPath:b,settings:I}=x;return xr(b)?Dp(b,c.log):Ul(I)?$v(I.host,b):Ml(x.parentAuthority)?b.startsWith("/")?iu(x.parentAuthority,b):E:wc(x.parentAuthority)?b.startsWith("/")?iu(x.parentAuthority,b):E:O.Uri.file(b)}return E}}),O.workspace.registerRemoteAuthorityResolver("attached-container",{resolve:eC(c,u,Qn.results,n,f,async(E,x,b,I)=>R8(t,s,E,x,b,I))}),O.workspace.registerRemoteAuthorityResolver("k8s-container",{resolve:eC(c,u,Qn.results,n,f,async(E,x,b,I)=>a9(t,s,E,x,b,I))}),O.workspace.registerRemoteAuthorityResolver("apple-container",{resolve:eC(c,u,Qn.results,n,f,async(E,x,b,I)=>u9(t,s,E,x,b,I))}),O.window.registerUriHandler(new FO(t,c,s)));let d=async(E,x,b)=>{if(!await no(t,c.log,c.onDidInput,s,"openInContainer"))return;let I=await Ze(t,c.log),T;if(wr.isFolderItem(E)?T=E.folder:T=E,T.scheme==="vscode-remote"&&T.authority.startsWith("dev-container+"))return O.commands.executeCommand("vscode.openFolder",T,b||{});{let R=It(I.cliHost.path,_e(T,I.cliHost.platform));return yC(t,R,I,c.onDidInput,s,x,b)}};t.subscriptions.push(O.commands.registerCommand("remote-containers.openFolder",async(E,x)=>E?d(E,!1,x):LO(t,!0,s,!1,c.log,c.onDidInput))),t.subscriptions.push(O.commands.registerCommand("remote-containers.openWorkspace",async(E,x)=>E?d(E,!1,x):LO(t,!1,s,!1,c.log,c.onDidInput))),t.subscriptions.push(O.commands.registerCommand(p5,async E=>_g(t,s,c.log,c.onDidInput,E))),t.subscriptions.push(O.commands.registerCommand(zI,async E=>_g(t,s,c.log,c.onDidInput,E,li))),t.subscriptions.push(O.commands.registerCommand(g5,async()=>{var L,N,B;let x=(await((L=O.extensions.getExtension("vscode.git"))==null?void 0:L.activate())).getAPI(1);if(x.repositories.length===0)return;let b=x.repositories.reduce((W,z)=>{let V=z.state.remotes.find(q=>{var ce,Be;return q.name===((Be=(ce=z.state.HEAD)==null?void 0:ce.upstream)==null?void 0:Be.remote)});return V!=null&&V.pushUrl&&W.push({repository:z,label:V.pushUrl}),W},[]),I=b[0];if(b.length>1){let W=await O.window.showQuickPick(b,{canPickMany:!1,placeHolder:re.l10n.t("Choose which repository to clone")});if(W===void 0)return;I=W}let T=I.label,R=(B=(N=I.repository.state.HEAD)==null?void 0:N.upstream)==null?void 0:B.name;return _g(t,s,c.log,c.onDidInput,{url:T,branch:R},li)})),t.subscriptions.push(O.commands.registerCommand(h5,async()=>{var R;let E=O.workspace.workspaceFolders;if(!E)return;let x=E[0].uri;if(E.length>1){let L=await O.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,title:re.l10n.t("Choose a repository to clone in a Container Volume")});x=L==null?void 0:L[0]}let b,I;try{let L=await O.commands.executeCommand("remoteHub.api.getRepositoryContext",x);if(!L)throw new Error("Unable to get active repository context.");b=L.name,I=L.ref}catch{let B=await(await((R=O.extensions.getExtension("ms-vscode.remote-repositories"))==null?void 0:R.activate())).getMetadata(x);if(!B)throw new Error("Unable to get active repository context.");b=`${B.repo.owner}/${B.repo.name}`,I=(await B.getRevision()).name}let T=`https://github.com/${b}`;return I&&(T=`${T}/tree/${I}`),_g(t,s,c.log,c.onDidInput,T,li)})),t.subscriptions.push(O.commands.registerCommand(v5,async E=>ive(t,s,c.log,c.onDidInput,E,li))),t.subscriptions.push(O.commands.registerCommand("remote-containers.inspectVolume",async(E,x,b)=>N9(t,E,x,b,s,c.log,c.onDidInput))),t.subscriptions.push(O.commands.registerCommand("remote-containers.inspectVolumeFromViewlet",async E=>sve(t,E,s,c.log,c.onDidInput))),t.subscriptions.push(O.commands.registerCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",async E=>_g(t,s,c.log,c.onDidInput,void 0,E))),t.subscriptions.push(O.commands.registerCommand("remote-containers.reopenInContainer",()=>p(!1))),t.subscriptions.push(O.commands.registerCommand("remote-containers.rebuildAndReopenInContainer",()=>p(!0))),t.subscriptions.push(O.commands.registerCommand("remote-containers.rebuildNoCacheAndReopenInContainer",()=>p("rebuildNoCache")));let p=async E=>{if(!await O.workspace.requestWorkspaceTrust({message:oC})||!await no(t,c.log,c.onDidInput,s,"reopenInContainer"))return;let b=await Ze(t,c.log),I=O.workspace.workspaceFile;if(I&&I.scheme==="untitled"){await VI();return}let T=O.workspace.workspaceFolders;if(!I&&T&&T.length){let L=T.length>1?await O.window.showWorkspaceFolderPick({placeHolder:re.l10n.t("Pick a folder to reopen in a container.")}):T[0];L&&(I=L.uri)}let R=VF(I);if(R){await CC(t,R.repositoryPath,R.volumeName,R.folder,b);return}if(I){let L;if(b.cliHost.type==="wsl"&&I.scheme==="file"){let B=_e(I,process.platform),W=$f(B)||t0()||await Mv(b.output)||(()=>{throw new Error("No default WSL distro found.")})();L=await Ol(W,B,b.output)}else L=_e(I,b.cliHost.platform);let N=It(b.cliHost.path,L);await yC(t,N,b,c.onDidInput,s,E,{forceReuseWindow:!0})}else return LO(t,!0,s,E,c.log,c.onDidInput)};t.subscriptions.push(O.commands.registerCommand("remote-containers.reopenLocally",async()=>{let E=O.workspace.workspaceFolders,x=O.workspace.workspaceFile||E&&E.length&&E[0].uri;if(x&&x.scheme==="vscode-remote"){let b=uo(x.authority);if(b&&un(b)){let I=O.Uri.file(b.hostPath),T={forceReuseWindow:!0};await O.commands.executeCommand("vscode.openFolder",I,T)}else O.window.showInformationMessage(re.l10n.t("'Reopen Locally' not possible in current context."))}})),t.subscriptions.push(O.commands.registerCommand("remote-containers.reopenInWSL",async()=>{let E=O.workspace.workspaceFolders,x=O.workspace.workspaceFile||E&&E.length&&E[0].uri;if(x&&x.scheme==="vscode-remote"){let b=uo(x.authority);if(b&&un(b)&&xr(b.hostPath)){let I=O.Uri.parse((await Dp(b.hostPath,c.log)).toString()),T={forceReuseWindow:!0};await O.commands.executeCommand("vscode.openFolder",I,T)}else O.window.showInformationMessage(re.l10n.t("'Reopen in WSL' not possible in current context."))}})),t.subscriptions.push(O.commands.registerCommand("remote-containers.reopenInSSH",async()=>{let E=O.workspace.workspaceFolders,x=O.workspace.workspaceFile||E&&E.length&&E[0].uri;if(x&&x.scheme==="vscode-remote"){let b=uo(x.authority),I=b==null?void 0:b.settings;if(b&&un(b)&&(Ml(b.parentAuthority)||Ul(I))){let T=Ul(I)?$v(I.host,b.hostPath):iu(b.parentAuthority,b.hostPath),R={forceReuseWindow:!0};await O.commands.executeCommand("vscode.openFolder",O.Uri.parse(T.toString()),R)}else O.window.showInformationMessage(re.l10n.t("'Reopen in SSH' not possible in current context."))}})),t.subscriptions.push(O.commands.registerCommand("remote-containers.reopenInTunnel",async()=>{let E=O.workspace.workspaceFolders,x=O.workspace.workspaceFile||E&&E.length&&E[0].uri;if(x&&x.scheme==="vscode-remote"){let b=uo(x.authority);if(b&&un(b)&&wc(b.parentAuthority)){let I=O.Uri.parse(iu(b.parentAuthority,b.hostPath).toString()),T={forceReuseWindow:!0};await O.commands.executeCommand("vscode.openFolder",I,T)}else O.window.showInformationMessage(re.l10n.t("'Reopen in Tunnel' not possible in current context."))}}));let g=async E=>{var R;if(!await $s(t))return;let x,b=typeof E=="string"?E:(R=E==null?void 0:E.containerDesc)==null?void 0:R.Id;if(b){if(!await no(t,c.log,c.onDidInput,s,"attachToContainer"))return;let L=await Ze(t,c.log);x=await si(L,b)}else{let L=no(t,c.log,c.onDidInput,s,"attachToContainer");if(x=await pve(t,c.log,L),!x)return}let I=await Ze(t,c.log),T=t.extensionMode===O.ExtensionMode.Development;vC(I,x,t,!T)};t.subscriptions.push(O.commands.registerCommand("remote-containers.attachToRunningContainer",g)),t.subscriptions.push(O.commands.registerCommand("remote-containers.attachToRunningContainerFromViewlet",g)),t.subscriptions.push(O.commands.registerCommand("remote-containers.attachToK8sContainer",async E=>RO(t,await Ze(t,c.log),E))),t.subscriptions.push(O.commands.registerCommand("remote-containers.attachToK8sContainerFromViewlet",async E=>RO(t,await Ze(t,c.log),E))),t.subscriptions.push(O.commands.registerCommand("remote-containers.attachToAppleContainer",async()=>l9(t,await Ze(t,c.log))));let h=async E=>{var b;if(!await no(t,c.log,c.onDidInput,s,"checkoutPRInVolume"))return;let x=(b=E==null?void 0:E.pullRequestModel)==null?void 0:b.html_url;_g(t,s,c.log,c.onDidInput,x,li)};t.subscriptions.push(O.commands.registerCommand("remote-containers.checkoutPRInVolume",h)),t.subscriptions.push(O.commands.registerCommand("remote-containers.switchContainer",async()=>{var I;if(Qn.results.size){let T=[...Qn.results.values()].filter(L=>L.dockerParams)[0],R=(I=T==null?void 0:T.dockerParams)==null?void 0:I.parsedAuthority;if(R&&lo(R)&&!R.inspectVolume){let L=so("container","/",{},T.properties.remoteExec,T.properties.remotePtyExec,()=>{throw new Error("not implemented")},void 0,T.params.output),N=await Fa().then(q=>q.map(ce=>({type:"workspace",uri:ce,fileHost:L}))),B=await zu(N,T.configWorkspaceURI);if(!B||B==="cancelled")return;let W=Ce.from({scheme:Ke.scheme,path:B.path}),z=O.Uri.parse(Wi(R.parentAuthority,R.repositoryPath,R.volumeName,R.folder,!1,R.settings,R.cloneInfo,W).toString()),V=R.volumeName;V===li&&(V=re.l10n.t("a unique volume")),await Qu({uri:z,type:"folder",label:re.l10n.t("{0} in {1} [Dev Container]",R.folder,V)}),await O.commands.executeCommand("vscode.openFolder",z);return}}let E=await Ze(t,c.log),x=It(E.cliHost.path,E.cliHost.cwd);if((await R9(E.cliHost,x,await tl(t,E.cliHost))).length<2){await O.window.showInformationMessage(re.l10n.t("No other Dev Container configurations found in folder. Did you mean to open another folder in a container?"),{modal:!0},re.l10n.t("Open Folder in Container..."))&&O.commands.executeCommand("remote-containers.openFolder");return}await yC(t,x,E,c.onDidInput,s,!1,void 0,!0)})),t.subscriptions.push(O.commands.registerCommand("remote-containers.rebuildContainer",async()=>{let E=Ju();if(E){let x=await Ze(t,c.log);await CC(t,E.repositoryPath,E.volumeName,E.folder,x,!0);return}return await Promise.all(Qn.onRemoveOnShutdownChangedEmitter.fire(!0)),O.commands.executeCommand("workbench.action.reloadWindow")})),t.subscriptions.push(O.commands.registerCommand("remote-containers.rebuildContainerNoCache",async()=>{let E=Ju();if(E){let x=await Ze(t,c.log);await CC(t,E.repositoryPath,E.volumeName,E.folder,x,"rebuildNoCache");return}return await Promise.all(Qn.onRemoveOnShutdownChangedEmitter.fire("rebuildNoCache")),O.commands.executeCommand("workbench.action.reloadWindow")}));let v=y5(),C=((k=(O.workspace.workspaceFolders||[])[0])==null?void 0:k.uri)||Ce.file(process.cwd()),w=v.then(E=>Oa(E,C)),y,S=()=>y||(y=Ze(t,c.log).then(E=>E.cliHost)),D,_=()=>D||(D=(async()=>{let E=await w,x=await S(),b=O.env.remoteName==="dev-container"&&O.env.remoteAuthority&&uo(O.env.remoteAuthority),T=!b||un(b)?await tl(t,x):void 0;return c.log.write("Initializing configuration support..."),h8(t,{fileHost:E,userDataFolderForConfigurations:T,findDevContainerFiles:async R=>o0(x,It(E.path,_e(C,E.platform)),T,R),telemetry:s,output:c.log,openConfigurationCommandId:gm,showLogCommandId:it})})());async function A(){var E;return(E=O.workspace.workspaceFolders)!=null&&E.length?!0:(await O.window.showInformationMessage(re.l10n.t("Open a folder to create the configuration files in first."),{modal:!0},re.l10n.t("Open Folder"))&&await O.commands.executeCommand(process.platform==="darwin"?"workbench.action.files.openFileFolder":"workbench.action.files.openFolder"),!1)}t.subscriptions.push(O.commands.registerCommand("remote-containers.createDevContainerFile",async()=>{await A()&&await A0(t,await S(),await _(),s,c.log,c.onDidInput)})),t.subscriptions.push(O.commands.registerCommand("remote-containers.createDevContainerFileWithCopilot",async()=>{await A()&&await A0(t,await S(),await _(),s,c.log,c.onDidInput,{picker:"copilot"})})),t.subscriptions.push(O.commands.registerCommand("remote-containers.createDevContainer",async()=>{if(!await no(t,c.log,c.onDidInput,s,"createDevContainer"))return;let E=await Ze(t,c.log);await h9(t,E,s)})),t.subscriptions.push(O.commands.registerCommand("remote-containers.openDevContainerFile",async(E,x)=>{let b,I=await Ze(t,c.log),T;if(typeof E=="string"?b=[{type:"unknown",uri:Ce.file(E),fileHost:Oa(process.platform,Ce.file(ut.dirname(E)))}]:(T=await o0(I.cliHost,It(I.cliHost.path,I.cliHost.cwd),await tl(t,I.cliHost)),b=(await Promise.all(T.map(R=>R.uri.scheme==="file"||R.uri.scheme==="vscode-remote"?R:I.cliHost.toCommonURI(_e(R.uri,I.cliHost.platform)).then(L=>L&&{type:R.type,uri:L})))).filter(R=>!!R)),b.length){let R=await zu(b);if(!R||R==="cancelled")return;let L=Ju();if(L){let N=P5(L.folder);for(let B of N){try{await O.workspace.openTextDocument(O.Uri.parse(B.toString()))}catch{continue}await O.commands.executeCommand("vscode.open",O.Uri.parse(B.toString()),x);return}return}if(R){if(R.scheme==="file"&&await Cr(R.fsPath))return await O.commands.executeCommand("vscode.open",O.Uri.parse(R.toString()),x);if(R.scheme==="file"&&Qn.results.size)return await $i(gs,R,[],pc),await O.commands.executeCommand("vscode.open",O.Uri.parse(R.toString()),x);if(R.scheme==="vscode-remote")return await O.commands.executeCommand("vscode.open",O.Uri.parse(R.toString()),x);if(E===void 0)return await A0(t,await S(),await _(),s,c.log,c.onDidInput)}}else if(E===void 0&&!(T!=null&&T.length))return await A0(t,await S(),await _(),s,c.log,c.onDidInput)})),t.subscriptions.push(O.commands.registerCommand("remote-containers.openAttachConfigByNameFile",async()=>{let{dockerContainerId:E,dockerParams:x}=[...Qn.results.values()][0];if(!E||!x)return O.window.showInformationMessage(re.l10n.t("Named configurations are only available for Docker containers."),{modal:!0});let b=await si(x,E),I=p0(t.globalStoragePath,b),T=O.Uri.file(I);return await Cr(I)?O.commands.executeCommand("vscode.open",T):(await $i(gs,T,[],pc),O.commands.executeCommand("vscode.open",T))})),t.subscriptions.push(O.commands.registerCommand("remote-containers.openAttachDevContainerFile",async()=>{let E=[...(await D8(t.globalStoragePath)).map(b=>({label:b.name,...b})).sort((b,I)=>b.label.localeCompare(I.label)),...(await P8(t.globalStoragePath)).map(b=>({label:b.image,...b})).sort((b,I)=>b.label.localeCompare(I.label))],x=await O.window.showQuickPick(E.length?E:[{label:re.l10n.t("No configuration found.")}],{placeHolder:re.l10n.t("Choose a configuration file")});if(x&&"uri"in x)return O.commands.executeCommand("vscode.open",O.Uri.parse(x.uri.toString()))})),t.subscriptions.push(O.commands.registerCommand("remote-containers.settings",async()=>O.commands.executeCommand("workbench.action.openSettings",`@ext:${_9()}`))),t.subscriptions.push(O.commands.registerCommand("remote-containers.getHelp",async()=>O.env.openExternal(O.Uri.parse("https://aka.ms/vscode-remote/containers")))),t.subscriptions.push(O.commands.registerCommand("remote-containers.getStarted",async()=>O.env.openExternal(O.Uri.parse("https://aka.ms/vscode-remote/containers/getting-started")))),t.subscriptions.push(O.commands.registerCommand("remote-containers.reportIssue",async()=>{let E={extensionId:_9(),issueBody:re.l10n.t("For bug reports please include the complete log output. (In the VS Code window: `F1` > `Dev Containers: Show Container Log`.)")};return O.commands.executeCommand("vscode.openIssueReporter",E)})),t.subscriptions.push(O.commands.registerCommand("remote-containers.provideFeedback",async()=>O.env.openExternal(O.Uri.parse("https://aka.ms/vscode-remote/containers/provide-feedback")))),w.then(E=>{t.subscriptions.push(O.languages.registerDocumentLinkProvider([{pattern:"**/devcontainer.json",language:"jsonc"},{pattern:"**/.devcontainer.json",language:"jsonc"}],new E0(E)))}),t.subscriptions.push(O.commands.registerCommand("remote-containers.trySample",()=>Eve(t,c,s))),t.subscriptions.push(O.commands.registerCommand("remote-containers.openLogFile",()=>Sve(t))),t.subscriptions.push(O.commands.registerCommand("remote-containers.openLastLogFile",()=>xve(t,"remoteContainers",c.logFilePath))),t.subscriptions.push(O.commands.registerCommand("remote-containers.showReopenInContainerNotificationReset",()=>vve(t))),t.subscriptions.push(O.commands.registerCommand("remote-containers.showRecoveryContainerNotificationReset",()=>Kge(t))),t.subscriptions.push(O.commands.registerCommand("remote-containers.installDocker",()=>v0(c.log))),t.subscriptions.push(O.commands.registerCommand("remote-containers.installDockerInWSL",()=>C0(t,c.log,c.onDidInput,s))),t.subscriptions.push(O.commands.registerCommand("remote-containers.cleanUpDevContainers",async()=>Q8(await Ze(t,c.log)))),s9(t,Qn.results,s,c.log),d9(t,i).catch(E=>{c.log.write(`Error ensuring user CLI is configured: ${(E==null?void 0:E.stack)||(E==null?void 0:E.message)||String(E)}`)}),t.subscriptions.push(O.commands.registerCommand("remote-containers.installUserCLI",()=>m9(t,i))),t.subscriptions.push(O.commands.registerCommand("remote-containers.testConnection",async()=>{await O.commands.executeCommand(it);let E=[...Qn.results.values()][0];if(!E){c.log.write("Not connected.");return}let{params:x,properties:b}=E;await dx(x,b)})),(async()=>{i0()&&await m;let E=O.env.remoteName,x=!E||["dev-container","attached-container","wsl","ssh-remote","tunnel","exec","k8s-container"].indexOf(E)!==-1?[{pattern:"**/.devcontainer.json"},{pattern:"**/devcontainer.json"}]:[],b=await _();t.subscriptions.push(O.languages.registerCompletionItemProvider([...x,{pattern:ut.join(h0(t.globalStoragePath),"*.json")},{pattern:ut.join(m0(t.globalStoragePath),"*.json")}],b.createCompletionItemProvider())),E!=="codespaces"&&(b.startCodeLensProvider(),b.startHoverProvider(),b.startDiagnosticsCollection()),await I5(t)||await L9(t,await S(),s,c.log,c.onDidInput)})().catch(console.error),Jge(t),t.subscriptions.push(O.commands.registerCommand("remote-containers.addExtensionToConfig",async E=>(await _()).addExtensionToConfiguration(E)),O.commands.registerCommand("remote-containers.configureContainerFeatures",async()=>(await _()).configureContainerFeatures()),O.commands.registerCommand("remote-containers.labelPortAndUpdateConfig",async E=>(await _()).addPortLabelToConfiguration(E))),Ju()&&O.commands.executeCommand("setContext","isRecoveryContainer",!0),await C5()}var x9="showRecoveryContainerNotification",T9="showReopenInContainerNotificationReset",zge=5e3;function Kge(t){return t.globalState.update(T9,Date.now())}async function Jge(t){setTimeout(async()=>{let e=t.globalState.get(T9);if($O(t.globalState.get(x9),e))return;if(Ju()){let r=re.l10n.t("This is a recovery container that allows you to edit your Dockerfile. Use 'Reopen in Container' to retry."),o=re.l10n.t("Reopen in Container"),i=re.l10n.t("Don't Show Again"),s=await O.window.showInformationMessage(r,o,i);s===o?O.commands.executeCommand("remote-containers.reopenInContainer"):s===i&&await t.globalState.update(x9,Date.now())}},zge)}async function Xge(){await Promise.all([...Qn.results.values()].map(t=>Promise.all(t.params.shutdowns.map(e=>{try{e()}catch(n){console.error(n)}}))))}function _9(){let{name:t,publisher:e}=S9();return`${e}.${t}`}async function LO(t,e,n,r,o,i){var m;if(!await no(t,o,i,n,"openInContainer"))return;let s=await Ze(t,o),a,c=O.workspace.workspaceFolders;if(c&&c[0]){let d=c[0].uri;if(d.scheme==="vscode-remote"){let p=uo(d.authority);if(p&&un(p)){let g=It(s.cliHost.path,p.hostPath);a=O.Uri.file(g.rootFolderPath)}else/^(wsl|ssh-remote|tunnel)\+/.test(d.authority)&&(a=d)}else d.scheme==="file"&&(a=d)}a||((m=O.env.remoteName)!=null&&m.match(/^(wsl|ssh-remote|tunnel)$/)?a=O.Uri.from({scheme:"vscode-remote",authority:O.env.remoteAuthority,path:await s.cliHost.homedir()}):a=O.Uri.file(P9.homedir()));let l=e?{defaultUri:a,canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,openLabel:re.l10n.t("Open")}:{defaultUri:a,canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{[re.l10n.t("Code Workspace")]:["code-workspace"]},openLabel:re.l10n.t("Open")},u=await O.window.showOpenDialog(l),f=u&&u[0];if(f){let d=e?f:f.with({path:ut.posix.dirname(f.path)}),p=await Ze(t,s.output,d,YF()==="always"),g;f.scheme==="file"&&p.cliHost.type==="wsl"?g=e?p.cliHost.cwd:p.cliHost.path.join(p.cliHost.cwd,ut.posix.basename(f.path)):g=_e(f,p.cliHost.platform);let h=It(p.cliHost.path,g);await yC(t,h,p,i,n,r)}}async function yC(t,e,n,r,o,i,s,a){try{await Zge(t,e,n,r,o,i,s,a)}catch(c){await $a(c,"ui",o,!1,n.output)}}async function Zge(t,e,n,r,o,i,s,a){var k;let{cliHost:c}=n;if(xr(e.rootFolderPath)){if(!await no(t,n.output,r,o,"openInContainer",e.rootFolderPath))return;n=await Ze(t,n.output,e.rootFolderPath),c=n.cliHost,e=It(c.path,e.isWorkspaceFile?c.path.join(c.cwd,ut.basename(e.workspaceOrFolderPath)):c.cwd)}let l=await bS(c,e);if(l){let E=re.l10n.t("Continue");if(await O.window.showInformationMessage(re.l10n.t("The workspace could fail to open in a container: {0}",l),{modal:!0},E)!==E)return}let u=await tve(t,c,e);if(u==="cancelled")return;let f=u&&(u.scheme==="file"?await at(u.fsPath):await c.readFile(_e(u,c.platform))).toString(),m=!!(f&&((k=Me(f))!=null&&k.initializeCommand)),{dockerCLI:d,dockerComposePath:p}=n,g={cliHost:c,dockerPath:d,dockerComposePath:p,appRoot:O.env.appRoot,extensionPath:t.extensionPath,package:await cr(t.extensionPath),output:n.output},h=u&&await(m?ag(g,e.rootFolderPath,u):await XF(g,e.rootFolderPath,u)||ag(g,e.rootFolderPath,u));if(h==="canceled")return;if(!h&&u){let E=_e(u,c.platform),x=await c.toCommonURI(E);x&&O.window.showTextDocument(O.Uri.parse(x.toString()));let b=re.l10n.t("Show Log");await O.window.showErrorMessage(re.l10n.t("Failed to read Dev Container configuration '{0}' file.",c.path.relative(e.configFolderPath,E)),{modal:!0},b)===b&&O.commands.executeCommand(it);return}let v=h&&!Ox(h.configuration);if(!h||v){let E=await u0({fileHost:c,userDataFolderForConfigurations:await tl(t,c),telemetry:o,output:n.output,openConfigurationCommandId:gm,showLogCommandId:it},e,void 0,h==null?void 0:h.configuration.configFilePath);if(!E||(u=Ce.file(E).with({scheme:Ke.scheme}),h=await XF(g,e.rootFolderPath,u),!h||h==="canceled"))return}if(!await L5(t,n,h.configuration)||!await rve(n,"mergedConfiguration"in h?h.mergedConfiguration:h.configuration))return;let C=h.configuration,w=h.workspace.workspaceFolder,y=c.type==="wsl"?(await c.toCommonURI(e.workspaceOrFolderPath)).fsPath:e.workspaceOrFolderPath,S=(u==null?void 0:u.scheme)===Ke.scheme&&c.type==="wsl"&&!xr(y)&&await c.toCommonURI(_e(u,c.platform))||u;if(Oo(C)){let E=Kf(c,C);if(!C.initializeCommand&&!await ur(c).readDocument(E))return EC(re.l10n.t('"{0}" does not exist.',E.fsPath),c,C.configFilePath);if(C.workspaceFolder&&!ut.posix.isAbsolute(C.workspaceFolder))return EC(re.l10n.t("Workspace folder in devcontainer.json must be an absolute path."),c,C.configFilePath)}else if(!("image"in C))if("dockerComposeFile"in C){let E=c.type==="wsl"?e.isWorkspaceFile?ut.dirname(y):y:e.rootFolderPath;if(!await G8(n)||!await hve(E,S,n,C))return}else{let E=C.configFilePath;return EC(re.l10n.t('Configuration "{0}" not valid.',c.path.relative(e.rootFolderPath,_e(E,c.platform))),c,E)}e.isWorkspaceFile&&(w=ut.posix.join(w,c.path.basename(e.workspaceOrFolderPath)));let D=dr(n.env),_=(c.type==="local"||c.type==="wsl")&&Ul(D),A=a?c.authority:O.env.remoteAuthority,U=O.Uri.parse(pw(A,y,w,D,_,S));await Qu({uri:U,type:e.isWorkspaceFile?"workspace":"folder",label:re.l10n.t("{0} [Dev Container]",`${Ky(c.platform,e.workspaceOrFolderPath,await c.homedir())}${Bp(A,D)}`)}),await KF(t,i?U.authority:!1),await nC(t,i==="rebuildNoCache"?U.authority:!1),await O.commands.executeCommand("vscode.openFolder",U,s||{})}async function R9(t,e,n){let r=await nve(t,e.rootFolderPath),i=(r==null?void 0:r.scheme)==="file"&&process.platform==="win32"&&xr(r.fsPath)&&!O.workspace.getConfiguration("security").get("allowedUNCHosts",[]).includes(r.authority)?eve(t,e):Qge(r,t,e);return(await Promise.all([i.then(s=>s.map(a=>({type:"workspace",uri:a,fileHost:t}))),JF(t,e).then(s=>s.map(a=>({type:"repositoryConfig",uri:a,fileHost:Oa(process.platform,a.with({path:ut.posix.dirname(a.path)}))}))),n?YI(t,e,n).then(s=>s.map(a=>({type:"userData",uri:a,fileHost:t}))):[]])).flat()}async function Qge(t,e,n){return Promise.all((await Fa(t)).map(async o=>{if(!t){let i=ut.posix.relative(O.workspace.workspaceFolders[0].uri.path,o.path),s=e.platform==="win32"?"/"+n.rootFolderPath.replace(/\\/g,"/"):n.rootFolderPath;return Ce.from({scheme:Ke.scheme,path:ut.posix.join(s,i)})}if(o.scheme===co.scheme)return Ce.from({scheme:Ke.scheme,path:o.path});if(e.type==="wsl"&&o.scheme==="file"){let i=ut.relative(t.fsPath,o.fsPath),s=ut.posix.resolve(n.rootFolderPath,i.replace(/\\/g,"/"));return Ce.from({scheme:Ke.scheme,path:s})}return o}))}async function eve(t,e){let n=t.path.join(e.rootFolderPath,".devcontainer"),r=[...Gl(t.path,e.rootFolderPath),...(await t.readDirWithTypes(n)).filter(([,o])=>(o&2)!==0).map(([o])=>t.path.join(n,o,"devcontainer.json"))];return(await Promise.all(r.map(o=>t.isFile(o).then(i=>i?Ce.from({scheme:Ke.scheme,path:o}):void 0)))).filter(Boolean)}async function tve(t,e,n){let r=await R9(e,n,await tl(t,e)),o;if(O.env.remoteAuthority){let i=uo(O.env.remoteAuthority);i&&un(i)&&(o=i.configFile)}return zu(r,o)}function nve(t,e){switch(t.type){case"local":return Ce.file(e);case"wsl":return O.env.remoteName==="wsl"?Ce.from({scheme:"vscode-remote",authority:O.env.remoteAuthority,path:e}):t.toCommonURI(e);case"remote":return O.env.remoteName==="ssh-remote"||O.env.remoteName==="tunnel"?Rn(t.platform,Ce.from({scheme:"vscode-remote",authority:O.env.remoteAuthority}),e):void 0;default:return}}async function rve(t,{hostRequirements:e}){var r,o;let n=e&&ove(e);if(n&&(n.cpus||n.memory||n.gpu&&n.gpu!=="optional")){let i=await et(t,"info","--format","{{json .}}"),s=JSON.parse(i.stdout.toString()),a=s.NCPU&&n.cpus&&n.cpus>s.NCPU,c=s.MemTotal&&n.memory&&n.memory>s.MemTotal,l=((o=(r=s.Runtimes)==null?void 0:r.nvidia)==null?void 0:o.path)==="nvidia-container-runtime";if(a||c){let u=[];s.NCPU&&u.push(re.l10n.t("CPUs {0}",s.NCPU.toLocaleString())),s.MemTotal&&u.push(re.l10n.t("RAM {0}",AO(s.MemTotal))),l&&u.push(re.l10n.t("GPU"));let f=[];n.cpus&&f.push(re.l10n.t("CPUs {0}",n.cpus.toLocaleString())),n.memory&&f.push(re.l10n.t("RAM {0}",AO(n.memory))),n.storage&&f.push(re.l10n.t("disk {0}",AO(n.storage))),n.gpu&&n.gpu!=="optional"&&f.push(re.l10n.t("GPU"));let m=re.l10n.t(`Docker daemon: {0}
devcontainer.json: {1}`,u.join(", "),f.join(", "));if(!await O.window.showInformationMessage(re.l10n.t("Not all host requirements in devcontainer.json are met by the Docker daemon."),{modal:!0,detail:m},re.l10n.t("Continue")))return!1}}return!0}function ove(t){return{cpus:t.cpus||0,memory:D9(t.memory||"0"),storage:D9(t.storage||"0"),gpu:t.gpu}}function D9(t){let e=/^(\d+)([tgmk]b)?$/.exec(t);if(e){let[,n,r]=e,o=parseInt(n,10),i=r&&{t:2**40,g:2**30,m:2**20,k:2**10}[r[0]]||1;return o*i}return 0}function AO(t){let e=Math.min(Math.floor(Math.log2(Math.max(Math.abs(t),1))/10),4),n=t/Math.pow(2,10*e),r=Math.max(Math.pow(10,2-Math.floor(Math.log10(Math.max(Math.abs(n),1)))),1),o=Math.round(n*r)/r,i=[" bytes","kb","mb","gb","tb"][e];return`${o.toLocaleString()}${i}`}async function _g(t,e,n,r,o,i){if(!await iC(t))return;let s=null;if(!await no(t,n,r,e,"cloneInVolume"))return;let a=await Ze(t,n);if(typeof o=="string")s=o;else{let c;if(o!==void 0?c=o:c=await O.commands.executeCommand("git-base.api.getRemoteSources",{providerLabel:l=>re.l10n.t("Clone a repository from {0} in a Container Volume",l.name),urlLabel:re.l10n.t("Clone git repository from URL"),branch:!0}),c){s=(typeof c=="string"?c:c.url).trim(),s.split("/").length===2&&s.indexOf(":")===-1&&(s=`https://github.com/${s}`);let l=oa(s);if(await fR(a.cliHost,l.repositoryUrl,a.cliHost.type==="local"?await KI(a.output):{},a.output)===!1){O.commands.executeCommand(it),await O.window.showInformationMessage(re.l10n.t("Cannot access the repository '{0}'.",l.repositoryUrl),{modal:!0});return}typeof c!="string"&&c.branch&&(s=`${s}/tree/${c.branch}`)}}s&&await k9(t,a,s,i)}async function k9(t,e,n,r){if(r||(r=await cve(e)),r){let o=BO(n);r!==li&&(o=await uve(n)),o&&await CC(t,n,r,o,e)}}async function ive(t,e,n,r,o,i){if(!await iC(t))return;let s=/^(?:(?:https:\/\/)?github.com\/)?([^/]+)\/([^/]+?)(?:\/(?:pull\/([0-9]+)))?(?:\/|$)/i;if(!await no(t,n,r,e,"checkoutPRInVolume"))return;let a=await Ze(t,n),c={placeHolder:re.l10n.t("e.g. https://github.com/microsoft/vscode/pull/123"),prompt:re.l10n.t("Enter a GitHub pull request url"),validateInput:f=>s.test(f)?void 0:re.l10n.t("Invalid pull request url")},l;if(o?l=o:l=await O.window.showInputBox(c),!l)return;let u=oa(l);if(u.repository==="unknown"||!u.pullRequestId){await O.window.showInformationMessage(re.l10n.t("Invalid pull request URL '{0}'.",l),{modal:!0});return}await k9(t,a,l,i)}async function N9(t,e,n,r,o,i,s){if(!await no(t,i,s,o,"inspectVolume"))return;let a=await Ze(t,i);e||(e=await ave(a)),e&&(n&&r?await mve(e,n,r,a):await dve(e,a))}async function sve(t,e,n,r,o){await no(t,r,o,n,"inspectVolume")&&await N9(t,e==null?void 0:e.volumeName,void 0,void 0,n,r,o)}var SC=class{get detail(){return""}},OO=class extends SC{get label(){return re.l10n.t("$(plus) Create a new volume...")}get description(){return""}get volumeName(){return""}get detail(){return re.l10n.t("Use this volume to store several cloned repositories.")}get alwaysShow(){return!0}},UO=class extends SC{volume;constructor(e){super(),this.volume=e}get label(){return re.l10n.t("$(folder) {0}",this.volume.Name)}get description(){let e=new Date(this.volume.CreatedAt);return re.l10n.t("created at {0}",e.toDateString())}get volumeName(){return this.volume.Name}},MO=class extends SC{volume;constructor(e){super(),this.volume=e}get label(){return re.l10n.t("$(folder) {0}",this.volume.Name)}get description(){let e=new Date(this.volume.CreatedAt);return re.l10n.t("created at {0}",e.toDateString())}get volumeName(){return this.volume.Name}};async function ave(t){let e=await Uo(t),r=(await Jf(t,e)).map(a=>new MO(a)),o=re.l10n.t("Select the volume to inspect with Visual Studio Code"),i=O.window.createQuickPick();i.items=r,i.placeholder=o,i.show();let s=await new Promise(a=>{i.onDidAccept(()=>a(i.activeItems[0])),i.onDidHide(()=>a(void 0))});return i.hide(),s?s.volume.Name:null}async function cve(t){let e=await Uo(t,["vsch.local.repository.unique=false"]),r=(await Jf(t,e)).map(u=>new UO(u)),o=new OO,i=[o,...r],s=re.l10n.t("Select the volume for the cloned repository"),a=O.window.createQuickPick();a.items=i,a.placeholder=s,a.ignoreFocusOut=!0,a.show();let c=await new Promise(u=>{a.onDidAccept(()=>u(a.activeItems[0])),a.onDidHide(()=>u(void 0))});if(a.hide(),!c)return null;let l=null;return c===o?l=await lve(t):l=c.volumeName,l}async function lve(t){let e="",n="vsc-remote-containers",r=await Uo(t);r.find(s=>s===n)||(e=n);let o={prompt:re.l10n.t("Enter the volume name."),value:e,ignoreFocusOut:!0,validateInput:s=>/^[a-zA-Z0-9][a-zA-Z0-9_.-]+$/i.test(s)?null:s.length<2?re.l10n.t("Volume names should be at least two characters and the first character must be alphanumeric."):re.l10n.t("Only [a-zA-Z0-9_.-] are allowed and the first character must be alphanumeric.")},i=await O.window.showInputBox(o);return i?r.find(s=>s===i)?(await O.window.showErrorMessage(re.l10n.t("Volume already exists"),{modal:!0}),null):i:null}async function uve(t){let e={prompt:re.l10n.t("Enter the target folder name."),value:BO(t),ignoreFocusOut:!0},n=await O.window.showInputBox(e);return n||null}function BO(t){return ci(t).repositoryName}async function fve(){return(await O.authentication.getSession("github",["repo"],{createIfNone:!0})).accessToken}async function CC(t,e,n,r,o,i=!1){let s=dr(o.env),a=t_(e),c;try{c=await a.parseUrl(void 0)}catch(u){if(u instanceof dw){O.window.showErrorMessage(u.description);return}let f=await fve();try{c=await a.parseUrl(f)}catch{O.window.showErrorMessage(re.l10n.t("Cannot access '{0}'.",e),{modal:!0});return}}let l=O.Uri.parse(Wi(o.cliHost.authority,e,n,r,!1,s,c));n===li&&(n=re.l10n.t("a unique volume")),await Qu({uri:l,type:"folder",label:re.l10n.t("{0} in {1} [Dev Container]",r,n)}),await KF(t,i?l.authority:!1),await nC(t,i==="rebuildNoCache"?l.authority:!1),await O.commands.executeCommand("vscode.openFolder",l)}async function dve(t,e){let n=dr(e.env),r=O.Uri.parse(Wi(e.cliHost.authority,void 0,t,void 0,!0,n,void 0));await Qu({uri:r,type:"folder",label:re.l10n.t("Volume {0} [Dev Container]",t)}),await O.commands.executeCommand("vscode.openFolder",r)}async function mve(t,e,n,r){let o=dr(r.env),i=O.Uri.parse(Wi(r.cliHost.authority,e,t,n,!0,o,void 0));await Qu({uri:i,type:"folder",label:re.l10n.t("{0} in {1} [Inspect Dev Container]",n,t)}),await O.commands.executeCommand("vscode.openFolder",i)}async function vC(t,e,n,r,o){var c;if(!await $s(n))return;let i,s=t.cliHost;if(s.type==="wsl"){let l=await s.toCommonURI(s.cwd);l&&l.scheme==="file"&&(i=l.fsPath)}let a=Y3(t.cliHost.authority,e.Name,dr(t.env),i);if(o=o||((c=await x8(n.globalStoragePath,e))==null?void 0:c.workspaceFolder),o){let l=O.Uri.parse(`vscode-remote://${a}${o}`),u={};r?u.forceNewWindow=!0:u.forceReuseWindow=!0,await O.commands.executeCommand("vscode.openFolder",l,u)}else{let l={remoteAuthority:a};r||(l.reuseWindow=!0),await O.commands.executeCommand("vscode.newWindow",l)}}async function pve(t,e,n){let r=!0,o=(async()=>{if(!await n)throw new Error("cancel");r=!1;let i=await Ze(t,e),s=await Jl(i),a=await ws(i,s),c=[];if(a.forEach(l=>{l.State.Status==="running"&&c.push({label:l.Name,description:`${l.Config.Image} ${l.Id}`,containerInfo:l})}),c.length===0)throw O.window.showErrorMessage(re.l10n.t("There are no running containers to attach to."),{modal:!0}),new Error("cancel");return c.sort((l,u)=>l.label.localeCompare(u.label))})();try{let i={placeHolder:re.l10n.t("Select the container to attach VS Code")},s=await O.window.showQuickPick(o,i);if(!s&&r){if(!await n)throw new Error("cancel");s=await O.window.showQuickPick(o,i)}return s?s.containerInfo:void 0}catch(i){if(i&&i.message==="cancel")return;throw i}}async function hve(t,e,n,r){if(!r.workspaceFolder)return EC(re.l10n.t("Workspace folder not specified in devcontainer.json."),n.cliHost,r.configFilePath),!1;if(!ut.posix.isAbsolute(r.workspaceFolder))return EC(re.l10n.t("Workspace folder in devcontainer.json must be an absolute path."),n.cliHost,r.configFilePath),!1;if(r.initializeCommand)return!0;let o=await zl(n.cliHost,r,n.cliHost.env,n.cliHost.cwd),i=Fk(t,{buildCLIHost:n.cliHost,configFile:e});return!(await Zl(n,i)&&!await gve(n.cliHost,o))}async function gve(t,e){let n=[];for(let r=0;r<e.length;r++)await t.isFile(e[r])||n.push(e[r]);return n.length>0?(O.window.showErrorMessage(re.l10n.t("The following referenced docker compose files do not exist: {0}",n.join(", ")),{modal:!0}),!1):!0}async function EC(t,e,n){if(await O.window.showErrorMessage(t,{modal:!0},re.l10n.t("Open devcontainer.json"))){let o=_e(n,e.platform),i=await e.toCommonURI(o);i&&O.window.showTextDocument(O.Uri.parse(i.toString()))}}async function A0(t,e,n,r,o,i,s){await n.createConfiguration(s)&&await L9(t,e,r,o,i)}async function L9(t,e,n,r,o){if([void 0,"wsl","ssh-remote","tunnel"].indexOf(O.env.remoteName)===-1)return;let i=O.workspace.workspaceFile,s=O.workspace.workspaceFolders,a=i||s&&s.length&&s[0].uri||void 0;if(a&&a.scheme!=="vscode-vfs"){let c;if(e.type==="wsl"&&a.scheme==="file"){let m=_e(a,process.platform),d=$f(m)||t0()||await Mv(r)||(()=>{throw new Error("No default WSL distro found.")})();c=await Ol(d,m,r)}else c=_e(a,e.platform);let l=It(e.path,c),f=(await o0(e,l,await tl(t,e))).sort((m,d)=>{if(m.type!==d.type)return m.type.localeCompare(d.type);let p=ut.posix.dirname(m.uri.path),g=ut.posix.dirname(d.uri.path);return p.localeCompare(g)})[0];f&&(await tC(e,r)).canConnectToContainer&&await wve(t,f,l,e,n,r,o)}}var F0="showReopenInContainerNotification",A9="showReopenInContainerNotificationReset";function vve(t){return t.globalState.update(A9,Date.now())}async function wve(t,e,n,r,o,i,s){let a=t.globalState.get(A9);if($O(t.globalState.get(F0),a)||$O(t.workspaceState.get(F0),a))return;let c=y3(r,n,e.uri),l,u="";if(r.platform!=="linux"&&O.env.remoteName!=="wsl"&&!(r.platform==="win32"&&xr(n.rootFolderPath))&&O.env.remoteName!=="ssh-remote"){let w=await Ze(t,i);if(l=await hj(w.cliHost,n,w.output),l&&c){let y=await bv(w.cliHost,n.rootFolderPath,w.output);y&&await vj(w.cliHost,n,w.cliHost.path.relative(y,_e(e.uri,w.cliHost.platform)),w.output)||(l=void 0)}if(l){let{cliHost:y,dockerCLI:S,dockerComposePath:D}=w,_={cliHost:y,dockerPath:S,dockerComposePath:D,appRoot:O.env.appRoot,extensionPath:t.extensionPath,package:await cr(t.extensionPath),output:i},A=await ag(_,n.rootFolderPath,e.uri);(!A||!Oo(A.configuration)&&!("image"in A.configuration))&&(l=void 0)}l&&(u=re.l10n.t(" Or: Clone repository in Docker volume for [better I/O performance](https://aka.ms/vscode-remote/containers/open-repo)."))}O.env.remoteName==="wsl"&&n.rootFolderPath.match(/^\/mnt\/[a-z]\//)&&(u=re.l10n.t(" This workspace is on the Windows file system (/mnt/). For best performance, we recommend moving the workspace to the Linux file system (~/home)."));let f;c?n.isWorkspaceFile?f=re.l10n.t("Workspace contains a Dev Container configuration file."):f=re.l10n.t("Folder contains a Dev Container configuration file."):f=re.l10n.t("There is a [Dev Container configuration](command:remote-containers.openDevContainerFile) available for this repository.");let m=re.l10n.t("Reopen in Container"),d=re.l10n.t("Clone in Volume"),p=re.l10n.t("Don't Show Again..."),g=n.isWorkspaceFile?re.l10n.t("{0} Reopen workspace to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).{1}",f,u):re.l10n.t("{0} Reopen folder to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).{1}",f,u),h=l?[m,d,p]:[m,p];yve(o,e.type);let v=await O.window.showInformationMessage(g,...h);if(Cve(o,v===m?"reopen":v===d?"openRepository":v===p?"dontShowAgain":"cancel",e.type),v===m){if(!await O.workspace.requestWorkspaceTrust({message:oC})||!await no(t,i,s,o,"reopenInContainer"))return;let y=await Ze(t,i);if(y.cliHost.type==="wsl"&&r.platform==="win32"){let{cwd:S}=await WR(n.workspaceOrFolderPath,ts(),i);n=It(y.cliHost.path,S)}await yC(t,n,y,s,o,!1,{forceReuseWindow:!0})}else if(v===d){let w=await Ze(t,i),y=await gj(w.cliHost,n,w.output),S=re.l10n.t("OK"),D=re.l10n.t("Cancel");(!y||S===await O.window.showInformationMessage(re.l10n.t("Local changes not pushed to the Git remote will not be available in the Docker volume."),S,D))&&await O.window.withProgress({location:O.ProgressLocation.Notification,title:re.l10n.t("Clone in Volume")},async(_,A)=>{_.report({message:re.l10n.t("Follow the prompts at the top of the window.")}),await O.commands.executeCommand(zI,l)})}else if(v===p){let w=n.isWorkspaceFile?re.l10n.t("Any Workspace"):re.l10n.t("Any Folder"),y=n.isWorkspaceFile?re.l10n.t("Current Workspace"):re.l10n.t("Current Folder"),S=n.isWorkspaceFile?re.l10n.t("Don't show again for the current workspace or for any workspace?"):re.l10n.t("Don't show again for the current folder or for any folder?"),D=await O.window.showInformationMessage(S,w,y);D===w?await t.globalState.update(F0,Date.now()):D===y&&await t.workspaceState.update(F0,Date.now())}}function yve(t,e){t.sendTelemetryEvent("reopenNotificationOpen",{location:e})}function Cve(t,e,n){t.sendTelemetryEvent("reopenNotificationResult",{result:e,location:n})}function $O(t,e){return t===!1?t=1:t===void 0&&(t=-1),e===void 0&&(e=0),e<t}async function Eve(t,e,n){if(!await no(t,e.log,e.onDidInput,n,"trySample"))return;let r=await Ze(t,e.log),o=[{label:"C++",detail:"https://github.com/Microsoft/vscode-remote-try-cpp"},{label:"Go",detail:"https://github.com/Microsoft/vscode-remote-try-go"},{label:"Java",detail:"https://github.com/Microsoft/vscode-remote-try-java"},{label:".NET",detail:"https://github.com/Microsoft/vscode-remote-try-dotnet"},{label:"Node",detail:"https://github.com/Microsoft/vscode-remote-try-node"},{label:"PHP",detail:"https://github.com/Microsoft/vscode-remote-try-php"},{label:"Python",detail:"https://github.com/Microsoft/vscode-remote-try-python"},{label:"Rust",detail:"https://github.com/Microsoft/vscode-remote-try-rust"}],i={placeHolder:re.l10n.t("Select a sample repository to clone in a container volume")},s=await O.window.showQuickPick(o,i);s&&s.detail&&await CC(t,s.detail,li,BO(s.detail),r)}async function Sve(t){let e=await Promise.all((await F9(t)).map(async r=>{let o=await(0,HO.promisify)(U0.stat)(r.path),i=r.time;return{label:r.prefix,description:`${Dg(i.getFullYear())}-${Dg(i.getMonth()+1)}-${Dg(i.getDate())} ${Dg(i.getHours())}:${Dg(i.getMinutes())}:${Dg(i.getSeconds())} - ${o.size} bytes`,path:r.path}}));e.length||e.push({label:re.l10n.t("No log files found.")});let n=await O.window.showQuickPick(e,{placeHolder:re.l10n.t("Choose a log file")});n&&n.path&&await O.window.showTextDocument(O.Uri.file(n.path))}function Dg(t,e=2){return t.toString().padStart(e,"0")}async function xve(t,e,n){let r=(await F9(t)).find(o=>o.name.startsWith(e)&&o.path!==n);r?await O.window.showTextDocument(O.Uri.file(r.path)):await O.window.showInformationMessage(re.l10n.t("No previous log file found."),{modal:!0})}async function F9(t){let e=[],n=ut.basename(t.logPath),r=ut.dirname(ut.dirname(ut.dirname(t.logPath))),o=/(\d\d\d\d)(\d\d)(\d\d)T(\d\d)(\d\d)(\d\d)/;o.test(ut.basename(r))&&(r=ut.dirname(r));for(let i of(await O0(r)).sort().reverse()){let s=o.exec(i);if(s){let a=ut.join(r,i);for(let c of await O0(a)){let l=ut.join(a,c),u=c.startsWith("window");for(let f of u?await O0(l):[c]){let m=ut.join(u?l:a,f),d=ut.join(m,n);for(let p of(await O0(d)).sort()){let g=ut.join(d,p),h=/(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d)[:\-](\d\d)[:\-](\d\d)\.(\d\d\d)Z/.exec(p),v=h?new Date(`${h[1]}-${h[2]}-${h[3]}T${h[4]}:${h[5]}:${h[6]}.${h[7]}Z`):new Date(`${s[1]}-${s[2]}-${s[3]}T${s[4]}:${s[5]}:${s[6]}Z`);e.push({name:p,path:g,time:v,prefix:h?p.substr(0,h.index-1):p.substr(0,p.length-4)})}}}}}return e.sort((i,s)=>i.time>s.time?-1:i.time<s.time?1:i.path.localeCompare(s.path)),e}async function O0(t){try{return await(0,HO.promisify)(U0.readdir)(t)}catch{return[]}}0&&(module.exports={activate,attachToContainer,deactivate});
/*! Bundled license information:

@nevware21/ts-utils/dist/es5/mod/ts-utils.js:
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)

@nevware21/ts-async/dist/es5/mod/ts-async.js:
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=extension.js.map
